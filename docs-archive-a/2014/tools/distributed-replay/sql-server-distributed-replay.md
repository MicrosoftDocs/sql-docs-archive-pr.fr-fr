---
title: SQL Server Distributed Replay | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
helpviewer_keywords:
- Distributed Replay
- SQL Server Distributed Replay
ms.assetid: 58ef7016-b105-42c2-90a0-364f411849a4
author: stevestein
ms.author: sstein
ms.openlocfilehash: b832cb8a8d8a38815b13b82a7af8eefc2fb81427
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87695048"
---
# <a name="sql-server-distributed-replay"></a><span data-ttu-id="a65bd-102">SQL Server Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-102">SQL Server Distributed Replay</span></span>
  <span data-ttu-id="a65bd-103">La fonctionnalité [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay vous aide à évaluer l’impact de futures mises à niveau de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a65bd-103">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature helps you assess the impact of future [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] upgrades.</span></span> <span data-ttu-id="a65bd-104">Vous pouvez également l’utiliser pour évaluer l’impact des mises à niveau du matériel et du système d’exploitation, ainsi que des paramétrages de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a65bd-104">You can also use it to help assess the impact of hardware and operating system upgrades, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] tuning.</span></span>

## <a name="benefits-of-distributed-replay"></a><span data-ttu-id="a65bd-105">Avantages de Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-105">Benefits of Distributed Replay</span></span>
 <span data-ttu-id="a65bd-106">Comme avec le [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], vous pouvez utiliser Distributed Replay pour relire une trace capturée sur un environnement de test mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="a65bd-106">Similar to [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], you can use Distributed Replay to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="a65bd-107">Contrairement au [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], Distributed Replay n'est pas limité à la relecture de la charge de travail d'un seul ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a65bd-107">Unlike [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], Distributed Replay is not limited to replaying the workload from a single computer.</span></span>

 <span data-ttu-id="a65bd-108">Distributed Replay offre une solution plus évolutive que le [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a65bd-108">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="a65bd-109">Avec Distributed Replay, vous pouvez relire des charges de travail de plusieurs ordinateurs et mieux simuler une charge de travail critique.</span><span class="sxs-lookup"><span data-stu-id="a65bd-109">With Distributed Replay, you can replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="a65bd-110">La fonctionnalité [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay peut utiliser plusieurs ordinateurs pour relire les données de trace et simuler les charges de travail critiques.</span><span class="sxs-lookup"><span data-stu-id="a65bd-110">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature can use multiple computers to replay trace data and simulate a mission-critical workload.</span></span> <span data-ttu-id="a65bd-111">Utilisez Distributed Replay pour tester la compatibilité des applications, tester les performances ou planifier la capacité.</span><span class="sxs-lookup"><span data-stu-id="a65bd-111">Use Distributed Replay for application compatibility testing, performance testing, or capacity planning.</span></span>

## <a name="when-to-use-distributed-replay"></a><span data-ttu-id="a65bd-112">Quand utiliser Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-112">When to Use Distributed Replay</span></span>
 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] <span data-ttu-id="a65bd-113">et Distributed Replay se chevauchent quelque peu.</span><span class="sxs-lookup"><span data-stu-id="a65bd-113">and Distributed Replay provide some overlap in functionality.</span></span>

 <span data-ttu-id="a65bd-114">Vous pouvez utiliser le [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] pour relire une trace capturée sur un environnement de test mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="a65bd-114">You may use [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="a65bd-115">Vous pouvez également analyser les résultats de la relecture pour rechercher d'éventuelles incompatibilités de fonctions et de performances.</span><span class="sxs-lookup"><span data-stu-id="a65bd-115">You can also analyze the replay results to look for potential functional and performance incompatibilities.</span></span> <span data-ttu-id="a65bd-116">Toutefois, le [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] ne peut relire une charge de travail qu’à partir d’un seul ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a65bd-116">However, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can only replay a workload from a single computer.</span></span> <span data-ttu-id="a65bd-117">Lors de la relecture d’une application OLTP intensive ayant de nombreuses connexions simultanées actives ou un débit élevé, le [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] peut devenir un goulot d’étranglement des ressources.</span><span class="sxs-lookup"><span data-stu-id="a65bd-117">When replaying an intensive OLTP application that has many active concurrent connections or high throughput, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can become a resource bottleneck.</span></span>

 <span data-ttu-id="a65bd-118">Distributed Replay offre une solution plus évolutive que le [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a65bd-118">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="a65bd-119">Utilisez-le pour relire une charge de travail depuis plusieurs ordinateurs et mieux simuler des charges de travail critiques.</span><span class="sxs-lookup"><span data-stu-id="a65bd-119">Use Distributed Replay to replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="a65bd-120">Le tableau suivant explique à quel moment utiliser chacun des outils.</span><span class="sxs-lookup"><span data-stu-id="a65bd-120">The following table describes when to use each tool.</span></span>

|<span data-ttu-id="a65bd-121">Outil</span><span class="sxs-lookup"><span data-stu-id="a65bd-121">Tool</span></span>|<span data-ttu-id="a65bd-122">Utilisation quand...</span><span class="sxs-lookup"><span data-stu-id="a65bd-122">Use When...</span></span>|
|----------|---------------|
|[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]|<span data-ttu-id="a65bd-123">Vous souhaitez utiliser le mécanisme de relecture classique sur un ordinateur unique.</span><span class="sxs-lookup"><span data-stu-id="a65bd-123">You want to use the conventional replay mechanism on a single computer.</span></span> <span data-ttu-id="a65bd-124">En particulier, vous avez besoin de fonctions de débogage ligne par ligne, telles que les commandes **Étape**, **Exécuter jusqu’au curseur**et **Basculer le point d’arrêt** .</span><span class="sxs-lookup"><span data-stu-id="a65bd-124">In particular, you need line-by-line debugging capabilities, such as the **Step**, **Run to Cursor**, and **Toggle Breakpoint** commands.</span></span><br /><br /> <span data-ttu-id="a65bd-125">Vous souhaitez relire une trace [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a65bd-125">You want to replay an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] trace.</span></span>|
|<span data-ttu-id="a65bd-126">Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-126">Distributed Replay</span></span>|<span data-ttu-id="a65bd-127">Vous souhaitez évaluer la compatibilité des applications.</span><span class="sxs-lookup"><span data-stu-id="a65bd-127">You want to evaluate application compatibility.</span></span> <span data-ttu-id="a65bd-128">Par exemple, vous souhaitez tester des scénarios de mise à niveau de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] et du système d'exploitation, des mises à niveau du matériel ou des paramétrages d'index.</span><span class="sxs-lookup"><span data-stu-id="a65bd-128">For example, you want to test [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and operating system upgrade scenarios, hardware upgrades, or index tuning.</span></span><br /><br /> <span data-ttu-id="a65bd-129">La simultanéité des accès de la trace capturée est si élevée qu'un seul client de relecture ne suffit pas à le simuler.</span><span class="sxs-lookup"><span data-stu-id="a65bd-129">The concurrency in the captured trace is so high that a single replay client cannot sufficiently simulate it.</span></span>|

## <a name="distributed-replay-concepts"></a><span data-ttu-id="a65bd-130">Concepts de Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-130">Distributed Replay Concepts</span></span>
 <span data-ttu-id="a65bd-131">Les composants suivants constituent l'environnement de Distributed Replay :</span><span class="sxs-lookup"><span data-stu-id="a65bd-131">The following components make up the Distributed Replay environment:</span></span>

-   <span data-ttu-id="a65bd-132">**Outil d’administration de Distributed Replay**: application console, `DReplay.exe` , utilisée pour communiquer avec le contrôleur Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="a65bd-132">**Distributed Replay administration tool**: A console application, `DReplay.exe`, used to communicate with the distributed replay controller.</span></span> <span data-ttu-id="a65bd-133">Utilisez l'outil d'administration pour contrôler la relecture distribuée.</span><span class="sxs-lookup"><span data-stu-id="a65bd-133">Use the administration tool to control the distributed replay.</span></span>

-   <span data-ttu-id="a65bd-134">**Contrôleur Distributed Replay** : un ordinateur exécutant le service Windows nommé contrôleur Distributed Replay [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a65bd-134">**Distributed Replay controller**: A computer running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay controller.</span></span> <span data-ttu-id="a65bd-135">Le contrôleur Distributed Replay orchestre les actions des clients de relecture distribuée.</span><span class="sxs-lookup"><span data-stu-id="a65bd-135">The Distributed Replay controller orchestrates the actions of the distributed replay clients.</span></span> <span data-ttu-id="a65bd-136">Chaque environnement Distributed Replay ne doit contenir qu'une seule instance de contrôleur.</span><span class="sxs-lookup"><span data-stu-id="a65bd-136">There can only be one controller instance in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="a65bd-137">**Clients Distributed Replay** : un ou plusieurs ordinateurs (physiques ou virtuels) qui exécutent le service Windows nommé client Distributed Replay [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a65bd-137">**Distributed Replay clients**: One or more computers (physical or virtual) running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay client.</span></span> <span data-ttu-id="a65bd-138">Les clients Distributed Replay fonctionnent ensemble pour simuler des charges de travail sur une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a65bd-138">The Distributed Replay clients work together to simulate workloads against an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="a65bd-139">Chaque environnement Distributed Replay peut contenir un ou plusieurs clients.</span><span class="sxs-lookup"><span data-stu-id="a65bd-139">There can be one or more clients in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="a65bd-140">**Serveur cible** : une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que les clients Distributed Replay peuvent utiliser pour relire les données de trace.</span><span class="sxs-lookup"><span data-stu-id="a65bd-140">**Target server**: An instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that the Distributed Replay clients can use to replay trace data.</span></span> <span data-ttu-id="a65bd-141">Nous conseillons de placer le serveur cible dans un environnement de test.</span><span class="sxs-lookup"><span data-stu-id="a65bd-141">We recommend that the target server be located in a test environment.</span></span>

 <span data-ttu-id="a65bd-142">L'outil d'administration Distributed Replay, le contrôleur et le client peuvent être installés sur différents ordinateurs ou sur le même ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a65bd-142">The Distributed Replay administration tool, controller, and client can be installed on different computers or the same computer.</span></span> <span data-ttu-id="a65bd-143">Il ne peut exister qu'une instance du contrôleur Distributed Replay ou du service client en cours d'exécution sur le même ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a65bd-143">There can be only one instance of the Distributed Replay controller or client service that is running on the same computer.</span></span>

 <span data-ttu-id="a65bd-144">L'illustration suivante montre l'architecture physique Distributed Replay de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="a65bd-144">The following figure shows the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay physical architecture:</span></span>

 <span data-ttu-id="a65bd-145">![Architecture Distributed Replay](../../database-engine/media/distributedreplayarch.gif "Architecture Distributed Replay")</span><span class="sxs-lookup"><span data-stu-id="a65bd-145">![Distributed Replay Architecture](../../database-engine/media/distributedreplayarch.gif "Distributed Replay Architecture")</span></span>

## <a name="distributed-replay-tasks"></a><span data-ttu-id="a65bd-146">Tâches relatives à Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-146">Distributed Replay Tasks</span></span>

|<span data-ttu-id="a65bd-147">Description de la tâche</span><span class="sxs-lookup"><span data-stu-id="a65bd-147">Task Description</span></span>|<span data-ttu-id="a65bd-148">Rubrique</span><span class="sxs-lookup"><span data-stu-id="a65bd-148">Topic</span></span>|
|----------------------|-----------|
|<span data-ttu-id="a65bd-149">Explique comment configurer Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="a65bd-149">Describes how to configure Distributed Replay.</span></span>|[<span data-ttu-id="a65bd-150">Configurer Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="a65bd-150">Configure Distributed Replay</span></span>](configure-distributed-replay.md)|
|<span data-ttu-id="a65bd-151">Explique comment préparer les données de trace d'entrée.</span><span class="sxs-lookup"><span data-stu-id="a65bd-151">Describes how to prepare the input trace data.</span></span>|[<span data-ttu-id="a65bd-152">Préparer les données de trace d’entrée</span><span class="sxs-lookup"><span data-stu-id="a65bd-152">Prepare the Input Trace Data</span></span>](prepare-the-input-trace-data.md)|
|<span data-ttu-id="a65bd-153">Explique comment relire les données de trace.</span><span class="sxs-lookup"><span data-stu-id="a65bd-153">Describes how to replay trace data.</span></span>|[<span data-ttu-id="a65bd-154">Relire les données de trace</span><span class="sxs-lookup"><span data-stu-id="a65bd-154">Replay Trace Data</span></span>](replay-trace-data.md)|
|<span data-ttu-id="a65bd-155">Décrit comment examiner les résultats des données de trace de Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="a65bd-155">Describes how to review the Distributed Replay trace data results.</span></span>|[<span data-ttu-id="a65bd-156">Examiner les résultats de la relecture</span><span class="sxs-lookup"><span data-stu-id="a65bd-156">Review the Replay Results</span></span>](review-the-replay-results.md)|
|<span data-ttu-id="a65bd-157">Décrit comment utiliser l’outil d’administration pour lancer, surveiller et annuler des opérations sur le contrôleur.</span><span class="sxs-lookup"><span data-stu-id="a65bd-157">Describes how to use the administration tool to initiate, monitor, and cancel operations on the controller.</span></span>|[<span data-ttu-id="a65bd-158">Options de ligne de commande de l’outil d’administration &#40;Distributed Replay Utility&#41;</span><span class="sxs-lookup"><span data-stu-id="a65bd-158">Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;</span></span>](administration-tool-command-line-options-distributed-replay-utility.md)|

## <a name="see-also"></a><span data-ttu-id="a65bd-159">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a65bd-159">See Also</span></span>
 <span data-ttu-id="a65bd-160">[SQL Server Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [de Distributed Replay à l’aide de Distributed Replay pour effectuer un test de charge de votre SQL Server-partie 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [à l’aide de Distributed Replay pour tester le chargement de votre SQL Server-partie 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span><span class="sxs-lookup"><span data-stu-id="a65bd-160">[SQL Server Distributed Replay Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [Using Distributed Replay to Load Test Your SQL Server - Part 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [Using Distributed Replay to Load Test Your SQL Server - Part 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span></span>


