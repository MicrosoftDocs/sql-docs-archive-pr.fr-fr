---
title: Préparer les données de trace d’entrée | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: c14fd3d2-5770-47c2-a851-cc13ddbc9bf5
author: stevestein
ms.author: sstein
ms.openlocfilehash: c13dddcf29f93940fa4eae6b2849dcfb278ae3b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87703644"
---
# <a name="prepare-the-input-trace-data"></a><span data-ttu-id="8a28f-102">Préparer les données de trace d'entrée</span><span class="sxs-lookup"><span data-stu-id="8a28f-102">Prepare the Input Trace Data</span></span>
  <span data-ttu-id="8a28f-103">Avant de pouvoir démarrer une relecture distribuée avec la fonctionnalité [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay, vous devez préparer les données de trace d’entrée en lançant l’étape de prétraitement de l’outil d’administration de relecture distribuée.</span><span class="sxs-lookup"><span data-stu-id="8a28f-103">Before you can start a distributed replay with the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature, you must prepare the input trace data by initiating the preprocess stage from the distributed replay administration tool.</span></span> <span data-ttu-id="8a28f-104">Dans l'étape de prétraitement, Distributed Replay Controller traite les données de trace et génère un fichier intermédiaire :</span><span class="sxs-lookup"><span data-stu-id="8a28f-104">In the preprocess stage, the distributed replay controller processes the trace data and generates an intermediate file:</span></span>  
  
 <span data-ttu-id="8a28f-105">![Étape de prétraitement Distributed Replay](../../database-engine/media/preprocess.gif "Étape de prétraitement Distributed Replay")</span><span class="sxs-lookup"><span data-stu-id="8a28f-105">![Distributed replay preprocess stage](../../database-engine/media/preprocess.gif "Distributed replay preprocess stage")</span></span>  
  
 <span data-ttu-id="8a28f-106">Pour plus d'informations sur l'étape de prétraitement, consultez [SQL Server Distributed Replay](sql-server-distributed-replay.md).</span><span class="sxs-lookup"><span data-stu-id="8a28f-106">For more information about the preprocess stage, see [SQL Server Distributed Replay](sql-server-distributed-replay.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8a28f-107">Les données de trace d'entrée doivent être capturées dans une version de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] compatible avec Distributed Replay.</span><span class="sxs-lookup"><span data-stu-id="8a28f-107">The input trace data must be captured in a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is compatible with Distributed Replay.</span></span> <span data-ttu-id="8a28f-108">Les données de trace d'entrée doivent également être compatibles avec le serveur cible sur lequel vous souhaitez relire les données de trace.</span><span class="sxs-lookup"><span data-stu-id="8a28f-108">The input trace data must also be compatible with the target server that you want to replay the trace data against.</span></span> <span data-ttu-id="8a28f-109">Pour plus d'informations sur les conditions requises en matière de version, consultez [Distributed Replay Requirements](distributed-replay-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="8a28f-109">For more information about version requirements, see [Distributed Replay Requirements](distributed-replay-requirements.md).</span></span>  
  
### <a name="to-prepare-the-input-trace-data"></a><span data-ttu-id="8a28f-110">Pour préparer les données de trace d'entrée</span><span class="sxs-lookup"><span data-stu-id="8a28f-110">To prepare the input trace data</span></span>  
  
1.  <span data-ttu-id="8a28f-111">**Modifier les paramètres de configuration de l’appareil (facultatif)**  : si vous voulez modifier les paramètres de configuration du prétraitement, tels que filtrer ou non les sessions système ou configurer la durée d’inactivité maximale, vous devez modifier l’élément `<PreprocessModifiers>` du fichier de configuration de prétraitement XML, `DReplay.exe.preprocess.config`.</span><span class="sxs-lookup"><span data-stu-id="8a28f-111">**(Optional) Modify preprocess configuration settings**: If you want to modify the preprocess configuration settings, such as whether to filter system sessions or to configure the maximum idle time, you must modify the `<PreprocessModifiers>` element of the XML-based preprocess configuration file, `DReplay.exe.preprocess.config`.</span></span> <span data-ttu-id="8a28f-112">Si vous modifiez le fichier de configuration de prétraitement, nous vous recommandons de modifier une copie plutôt que l'original.</span><span class="sxs-lookup"><span data-stu-id="8a28f-112">If you modify the preprocess configuration file, we recommend that you modify a copy rather than the original.</span></span> <span data-ttu-id="8a28f-113">Pour modifier des paramètres, suivez la procédure suivante :</span><span class="sxs-lookup"><span data-stu-id="8a28f-113">To modify settings, follow these steps:</span></span>  
  
    1.  <span data-ttu-id="8a28f-114">Faites une copie du fichier par défaut de configuration de prétraitement, `DReplay.exe.preprocess.config`, et renommez le nouveau fichier.</span><span class="sxs-lookup"><span data-stu-id="8a28f-114">Make a copy of the default preprocess configuration file, `DReplay.exe.preprocess.config`, and rename the new file.</span></span> <span data-ttu-id="8a28f-115">Le fichier par défaut de configuration de prétraitement se trouve dans le dossier d'installation de l'outil d'administration.</span><span class="sxs-lookup"><span data-stu-id="8a28f-115">The default preprocess configuration file is located in the administration tool installation folder.</span></span>  
  
    2.  <span data-ttu-id="8a28f-116">Modifiez les paramètres de configuration de prétraitement dans le nouveau fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="8a28f-116">Modify the preprocess configuration settings in the new configuration file.</span></span>  
  
    3.  <span data-ttu-id="8a28f-117">Quand vous initialisez l’étape de prétraitement (étape suivante), utilisez le paramètre *config_file* de l’option **preprocess** pour spécifier l’emplacement du fichier de configuration modifié.</span><span class="sxs-lookup"><span data-stu-id="8a28f-117">When initiating the preprocess stage (the next step), use the *config_file* parameter of the **preprocess** option to specify the location of the modified configuration file.</span></span>  
  
     <span data-ttu-id="8a28f-118">Pour plus d'informations sur le fichier de configuration de prétraitement, consultez [Configurer Distributed Replay](configure-distributed-replay.md).</span><span class="sxs-lookup"><span data-stu-id="8a28f-118">For more information about the preprocess configuration file, see [Configure Distributed Replay](configure-distributed-replay.md).</span></span>  
  
2.  <span data-ttu-id="8a28f-119">**Initialiser l'étape de prétraitement** : pour préparer les données de trace d'entrée, vous devez exécuter l'outil d'administration avec l'option **prétraiter**.</span><span class="sxs-lookup"><span data-stu-id="8a28f-119">**Initiate the preprocess stage**: To prepare the input trace data, you must run the administration tool with the **preprocess** option.</span></span> <span data-ttu-id="8a28f-120">Pour plus d’informations, consultez [Option preprocess &#40;outil d’administration Distributed Replay&#41;](preprocess-option-distributed-replay-administration-tool.md).</span><span class="sxs-lookup"><span data-stu-id="8a28f-120">For more information, see [Preprocess Option &#40;Distributed Replay Administration Tool&#41;](preprocess-option-distributed-replay-administration-tool.md).</span></span>  
  
    1.  <span data-ttu-id="8a28f-121">Ouvrez l'utilitaire d'invite de commandes Windows (`CMD.exe`) et accédez à l'emplacement d'installation de l'outil d'administration Distributed Replay (`DReplay.exe`).</span><span class="sxs-lookup"><span data-stu-id="8a28f-121">Open the Windows Command Prompt utility (`CMD.exe`), and navigate to the installation location of the Distributed Replay administration tool (`DReplay.exe`).</span></span>  
  
    2.  <span data-ttu-id="8a28f-122">(Facultatif) Utilisez le paramètre *controller* , **-m**, pour spécifier le contrôleur, si le service du contrôleur s’exécute sur un ordinateur différent de l’outil d’administration.</span><span class="sxs-lookup"><span data-stu-id="8a28f-122">(Optional) Use the *controller* parameter, **-m**, to specify the controller, if the controller service is running on a computer different from the administration tool.</span></span>  
  
    3.  <span data-ttu-id="8a28f-123">Utilisez le paramètre *input_trace_file* , **-i**, pour spécifier l’emplacement et le nom des fichiers de trace d’entrée.</span><span class="sxs-lookup"><span data-stu-id="8a28f-123">Use the *input_trace_file* parameter, **-i**, to specify the location and name of the input trace files.</span></span>  
  
    4.  <span data-ttu-id="8a28f-124">Utilisez le paramètre *controller_working_directory* , **-d**, pour spécifier l’emplacement où le fichier intermédiaire doit être enregistré sur le contrôleur.</span><span class="sxs-lookup"><span data-stu-id="8a28f-124">Use the *controller_working_directory* parameter, **-d**, to specify where the intermediate file should be saved on the controller.</span></span>  
  
    5.  <span data-ttu-id="8a28f-125">(Facultatif) Utilisez le paramètre *config_file* , **-c**, pour spécifier l’emplacement du fichier de configuration de prétraitement.</span><span class="sxs-lookup"><span data-stu-id="8a28f-125">(Optional) Use the *config_file* parameter, **-c**, to specify location of the preprocess configuration file.</span></span> <span data-ttu-id="8a28f-126">Utilisez ce paramètre pour pointer sur le nouveau fichier de configuration, si vous avez modifié une copie du fichier de configuration de prétraitement par défaut.</span><span class="sxs-lookup"><span data-stu-id="8a28f-126">Use this parameter to point to the new configuration file if you have modified a copy of the default preprocess configuration file.</span></span>  
  
    6.  <span data-ttu-id="8a28f-127">(Facultatif) Utilisez le paramètre *status_interval* , **-f**, pour spécifier si vous voulez que l’outil d’administration affiche des messages d’état à une fréquence autre que 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="8a28f-127">(Optional) Use the *status_interval* parameter, **-f**, to specify if you want the administration tool to display status messages at a frequency different than 30 seconds.</span></span>  
  
     <span data-ttu-id="8a28f-128">Par exemple, l’initialisation de l’étape de prétraitement sur le même ordinateur que le service contrôleur, pour un fichier de trace situé dans `c:\trace1.trc`, un répertoire de travail du contrôleur situé dans `c:\WorkingDir` et un message d’état affiché selon la valeur par défaut de 30 secondes, requiert la syntaxe : `dreplay preprocess -i c:\trace1.trc -d c:\WorkingDir`</span><span class="sxs-lookup"><span data-stu-id="8a28f-128">For example, initiating the preprocess stage on the same computer as the controller service, for a trace file located at `c:\trace1.trc`, a controller working directory located at `c:\WorkingDir` , and a status message displayed at the default value of 30 seconds, requires the syntax: `dreplay preprocess -i c:\trace1.trc -d c:\WorkingDir`</span></span>  
  
3.  <span data-ttu-id="8a28f-129">Une fois l'étape de prétraitement terminée, le fichier intermédiaire est stocké dans le répertoire de travail du contrôleur.</span><span class="sxs-lookup"><span data-stu-id="8a28f-129">After the preprocess stage is complete, the intermediate file is stored in the controller working directory.</span></span> <span data-ttu-id="8a28f-130">Pour initialiser l’étape de relecture d’événements, vous devez exécuter l’outil d’administration avec l’option **replay** .</span><span class="sxs-lookup"><span data-stu-id="8a28f-130">To initiate the event replay stage, you must run the administration tool with the **replay** option.</span></span> <span data-ttu-id="8a28f-131">Pour plus d’informations, consultez [Relire les données de trace](replay-trace-data.md).</span><span class="sxs-lookup"><span data-stu-id="8a28f-131">For more information, see [Replay Trace Data](replay-trace-data.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8a28f-132">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8a28f-132">See Also</span></span>  
 <span data-ttu-id="8a28f-133">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span><span class="sxs-lookup"><span data-stu-id="8a28f-133">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span></span>  
 <span data-ttu-id="8a28f-134">[Distributed Replay Requirements](distributed-replay-requirements.md) </span><span class="sxs-lookup"><span data-stu-id="8a28f-134">[Distributed Replay Requirements](distributed-replay-requirements.md) </span></span>  
 <span data-ttu-id="8a28f-135">[Options de ligne de commande de l’outil d’administration &#40;Distributed Replay Utility&#41;](administration-tool-command-line-options-distributed-replay-utility.md) </span><span class="sxs-lookup"><span data-stu-id="8a28f-135">[Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;](administration-tool-command-line-options-distributed-replay-utility.md) </span></span>  
 [<span data-ttu-id="8a28f-136">Configurer Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="8a28f-136">Configure Distributed Replay</span></span>](configure-distributed-replay.md)  
  
  
