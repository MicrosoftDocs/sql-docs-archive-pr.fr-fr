---
title: Gestion des erreurs dans les données | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- truncating data
- data conversion errors [Integration Services]
- errors [Integration Services], data flow components
- lookups [Integration Services]
- errors [Integration Services]
- errors [Integration Services], data flow outputs
- error outputs [Integration Services]
- data flow [Integration Services], errors
- expressions [Integration Services], errors
ms.assetid: c61667b4-25cb-4d45-a52f-a733e32863f4
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 442ecc68fc352d50955af9302fbcedf77ba36338
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709816"
---
# <a name="error-handling-in-data"></a><span data-ttu-id="be0f4-102">Gestion des erreurs dans les données</span><span class="sxs-lookup"><span data-stu-id="be0f4-102">Error Handling in Data</span></span>
  <span data-ttu-id="be0f4-103">Lorsqu'un composant de flux de données applique une transformation à des données de colonne, extrait des données à partir de sources ou charge des données dans des destinations, des erreurs peuvent se produire.</span><span class="sxs-lookup"><span data-stu-id="be0f4-103">When a data flow component applies a transformation to column data, extracts data from sources, or loads data into destinations, errors can occur.</span></span> <span data-ttu-id="be0f4-104">Les erreurs sont fréquemment dues à des valeurs de données inattendues.</span><span class="sxs-lookup"><span data-stu-id="be0f4-104">Errors frequently occur because of unexpected data values.</span></span> <span data-ttu-id="be0f4-105">Par exemple, une conversion de données échoue car une colonne contient une chaîne au lieu d'un nombre, une insertion dans une colonne de base de données échoue car les données sont une date et que la colonne a un type de données numérique, ou l'évaluation d'une expression échoue car la valeur d'une colonne est nulle, ce qui engendre une opération mathématique non valide.</span><span class="sxs-lookup"><span data-stu-id="be0f4-105">For example, a data conversion fails because a column contains a string instead of a number, an insertion into a database column fails because the data is a date and the column has a numeric data type, or an expression fails to evaluate because a column value is zero, resulting in a mathematical operation that is not valid.</span></span>  
  
 <span data-ttu-id="be0f4-106">Les erreurs appartiennent en général à l'une des catégories suivantes :</span><span class="sxs-lookup"><span data-stu-id="be0f4-106">Errors typically fall into one the following categories:</span></span>  
  
-   <span data-ttu-id="be0f4-107">Erreurs de conversion de données, qui se produisent si une conversion provoque la perte de chiffres significatifs, la perte de chiffres non significatifs et la troncation de chaînes.</span><span class="sxs-lookup"><span data-stu-id="be0f4-107">Data conversion errors, which occur if a conversion results in loss of significant digits, the loss of insignificant digits, and the truncation of strings.</span></span> <span data-ttu-id="be0f4-108">Les erreurs de conversion de données se produisent également si la conversion demandée n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="be0f4-108">Data conversion errors also occur if the requested conversion is not supported.</span></span>  
  
-   <span data-ttu-id="be0f4-109">Erreurs d'évaluation d'expression, qui se produisent si des expressions évaluées au moment de l'exécution effectuent des opérations non valides ou deviennent syntaxiquement incorrectes à cause de valeurs de données manquantes ou incorrectes.</span><span class="sxs-lookup"><span data-stu-id="be0f4-109">Expression evaluation errors, which occur if expressions that are evaluated at run time perform invalid operations or become syntactically incorrect because of missing or incorrect data values.</span></span>  
  
-   <span data-ttu-id="be0f4-110">Erreurs de recherche, qui se produisent si une opération de recherche ne trouve pas de correspondance dans la table de recherche.</span><span class="sxs-lookup"><span data-stu-id="be0f4-110">Lookup errors, which occur if a lookup operation fails to locate a match in the lookup table.</span></span>  
  
 <span data-ttu-id="be0f4-111">De nombreux composants de flux de données prennent en charge les sorties d'erreur, qui vous permettent de contrôler la manière dont le composant gère les erreurs de lignes dans les données entrantes et sortantes.</span><span class="sxs-lookup"><span data-stu-id="be0f4-111">Many data flow components support error outputs, which let you control how the component handles row-level errors in both incoming and outgoing data.</span></span> <span data-ttu-id="be0f4-112">Vous pouvez spécifier le comportement du composant lorsqu'une troncation ou une erreur se produit en définissant des options sur des colonnes dans l'entrée ou la sortie.</span><span class="sxs-lookup"><span data-stu-id="be0f4-112">You specify how the component behaves when truncation or an error occurs by setting options on individual columns in the input or output.</span></span> <span data-ttu-id="be0f4-113">Par exemple, vous pouvez faire en sorte que le composant échoue si les données de noms des clients sont tronquées, mais qu'il ignore les erreurs sur une autre colonne qui contient des données moins importantes.</span><span class="sxs-lookup"><span data-stu-id="be0f4-113">For example, you can specify that the component should fail if customer name data is truncated, but ignore errors on another column that contains less important data.</span></span>  
  
 <span data-ttu-id="be0f4-114">La sortie d'erreur peut être connectée à l'entrée d'une autre transformation ou chargée dans une destination différente de la sortie sans erreur.</span><span class="sxs-lookup"><span data-stu-id="be0f4-114">The error output can be connected to the input of another transformation or loaded into a different destination than the non-error output.</span></span> <span data-ttu-id="be0f4-115">Par exemple, la sortie d'erreur peut être connectée à une transformation de colonne dérivée qui fournit une chaîne pour une colonne vide.</span><span class="sxs-lookup"><span data-stu-id="be0f4-115">For example, the error output can be a connected to a Derived Column transformation that provides a string for a column that is blank.</span></span>  
  
 <span data-ttu-id="be0f4-116">Le schéma suivant illustre un flux de données simple incluant une sortie d'erreur.</span><span class="sxs-lookup"><span data-stu-id="be0f4-116">The following diagram shows a simple data flow including an error output.</span></span>  
  
 <span data-ttu-id="be0f4-117">![Flux de données avec affichage des erreurs](../media/mw-dts-11.gif "Flux de données avec affichage des erreurs")</span><span class="sxs-lookup"><span data-stu-id="be0f4-117">![Data flow with error output](../media/mw-dts-11.gif "Data flow with error output")</span></span>  
  
 <span data-ttu-id="be0f4-118">Outre les colonnes de données, la sortie d'erreur contient les colonnes **ErrorCode** et **ErrorColumn** .</span><span class="sxs-lookup"><span data-stu-id="be0f4-118">In addition to the data columns, the error output includes the **ErrorCode** and **ErrorColumn** columns.</span></span> <span data-ttu-id="be0f4-119">La colonne **ErrorCode** identifie l'erreur, tandis que la colonne **ErrorColumn** contient l'identificateur de lignage de la colonne d'erreur.</span><span class="sxs-lookup"><span data-stu-id="be0f4-119">The **ErrorCode** column identifies the error and the **ErrorColumn** contains the lineage identifier of the error column.</span></span> <span data-ttu-id="be0f4-120">Pour afficher les métadonnées de ces colonnes, cliquez sur le chemin d'accès qui connecte la sortie d'erreur au composant suivant dans le flux de données.</span><span class="sxs-lookup"><span data-stu-id="be0f4-120">To view the metadata of these columns, click the path that connects the error output to the next component in the data flow.</span></span> <span data-ttu-id="be0f4-121">Dans certaines circonstances, la colonne **ErrorColumn** prend la valeur zéro.</span><span class="sxs-lookup"><span data-stu-id="be0f4-121">Under some circumstances, the value of the **ErrorColumn** column is set to zero.</span></span> <span data-ttu-id="be0f4-122">Cela se produit lorsque la condition d'erreur affecte toute la ligne et non une seule colonne.</span><span class="sxs-lookup"><span data-stu-id="be0f4-122">This occurs when the error condition affects the entire row instead of a single column.</span></span> <span data-ttu-id="be0f4-123">Par exemple, lorsqu'une recherche échoue dans la transformation de recherche.</span><span class="sxs-lookup"><span data-stu-id="be0f4-123">An example is when a lookup fails in the Lookup transformation.</span></span>  
  
 <span data-ttu-id="be0f4-124">Pour plus d’informations, consultez [Flux de données](data-flow.md) et [Chemins d’accès d’Integration Services](integration-services-paths.md).</span><span class="sxs-lookup"><span data-stu-id="be0f4-124">For more information, see [Data Flow](data-flow.md) and [Integration Services Paths](integration-services-paths.md).</span></span>  
  
 <span data-ttu-id="be0f4-125">Pour obtenir une liste d'erreurs, d'avertissements et d'autres messages Integration Services, consultez [Integration Services Error and Message Reference](../integration-services-error-and-message-reference.md).</span><span class="sxs-lookup"><span data-stu-id="be0f4-125">For a list of Integration Services errors, warnings, and other messages, see [Integration Services Error and Message Reference](../integration-services-error-and-message-reference.md).</span></span>  
  
## <a name="error-and-truncation-options"></a><span data-ttu-id="be0f4-126">Options d'erreur et de troncation</span><span class="sxs-lookup"><span data-stu-id="be0f4-126">Error and Truncation Options</span></span>  
 <span data-ttu-id="be0f4-127">Les erreurs appartiennent à l'une des deux catégories suivantes : erreurs ou troncations.</span><span class="sxs-lookup"><span data-stu-id="be0f4-127">Errors fall into one of two categories: errors or truncations.</span></span> <span data-ttu-id="be0f4-128">Une erreur indique un échec non équivoque et génère un résultat NULL.</span><span class="sxs-lookup"><span data-stu-id="be0f4-128">An error indicates an unequivocal failure, and generates a NULL result.</span></span> <span data-ttu-id="be0f4-129">Il peut s'agir par exemple d'erreurs de conversion de données ou d'évaluation d'expression,</span><span class="sxs-lookup"><span data-stu-id="be0f4-129">Such errors can include data conversion errors or expression evaluation errors.</span></span> <span data-ttu-id="be0f4-130">telles qu'une tentative de conversion d'une chaîne contenant des caractères alphabétiques en nombre.</span><span class="sxs-lookup"><span data-stu-id="be0f4-130">For example, an attempt to convert a string that contains alphabetical characters to a number causes an error.</span></span> <span data-ttu-id="be0f4-131">Les conversions de données, les évaluations d'expression et les affectations de résultats d'expression aux variables, propriétés et colonnes de données peuvent échouer en raison de casts non conformes et de types de données incompatibles.</span><span class="sxs-lookup"><span data-stu-id="be0f4-131">Data conversions, expression evaluations, and assignments of expression results to variables, properties, and data columns may fail because of illegal casts and incompatible data types.</span></span> <span data-ttu-id="be0f4-132">Pour plus d’informations, consultez [Cast &#40;expression SSIS&#41;](../expressions/cast-ssis-expression.md), [Types de données Integration Services dans les expressions](../expressions/integration-services-data-types-in-expressions.md) et [Types de données Integration Services](integration-services-data-types.md).</span><span class="sxs-lookup"><span data-stu-id="be0f4-132">For more information see, [Cast &#40;SSIS Expression&#41;](../expressions/cast-ssis-expression.md), [Integration Services Data Types in Expressions](../expressions/integration-services-data-types-in-expressions.md), and [Integration Services Data Types](integration-services-data-types.md).</span></span>  
  
 <span data-ttu-id="be0f4-133">Une troncation est une erreur moins grave.</span><span class="sxs-lookup"><span data-stu-id="be0f4-133">A truncation is less serious than an error.</span></span> <span data-ttu-id="be0f4-134">Elle génère des résultats qui peuvent être utilisables, voire même souhaitables.</span><span class="sxs-lookup"><span data-stu-id="be0f4-134">A truncation generates results that might be usable or even desirable.</span></span> <span data-ttu-id="be0f4-135">Vous pouvez faire en sorte de traiter les troncations comme des erreurs ou comme des conditions acceptables.</span><span class="sxs-lookup"><span data-stu-id="be0f4-135">You can elect to treat truncations as errors or as acceptable conditions.</span></span> <span data-ttu-id="be0f4-136">Par exemple, si vous insérez une chaîne de 15 caractères dans une colonne qui ne fait qu'un seul caractère de large, vous pouvez choisir de tronquer la chaîne.</span><span class="sxs-lookup"><span data-stu-id="be0f4-136">For example, if you are inserting a 15-character string into a column that is only one character wide, you can elect to truncate the string.</span></span>  
  
 <span data-ttu-id="be0f4-137">Vous pouvez configurer la manière dont les sources, les  transformations et les destinations gèrent les erreurs et les troncations.</span><span class="sxs-lookup"><span data-stu-id="be0f4-137">You can configure how sources, transformations, and destinations handle errors and truncations.</span></span> <span data-ttu-id="be0f4-138">Le tableau ci-dessous décrit les options disponibles.</span><span class="sxs-lookup"><span data-stu-id="be0f4-138">The following table describes the options.</span></span>  
  
|<span data-ttu-id="be0f4-139">Option</span><span class="sxs-lookup"><span data-stu-id="be0f4-139">Option</span></span>|<span data-ttu-id="be0f4-140">Description</span><span class="sxs-lookup"><span data-stu-id="be0f4-140">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="be0f4-141">Composant défaillant</span><span class="sxs-lookup"><span data-stu-id="be0f4-141">Fail Component</span></span>|<span data-ttu-id="be0f4-142">La tâche de flux de données échoue lorsqu'une erreur ou une troncation a lieu.</span><span class="sxs-lookup"><span data-stu-id="be0f4-142">The Data Flow task fails when an error or a truncation occurs.</span></span> <span data-ttu-id="be0f4-143">L'échec est l'option par défaut pour une erreur et une troncation.</span><span class="sxs-lookup"><span data-stu-id="be0f4-143">Failure is the default option for an error and a truncation.</span></span>|  
|<span data-ttu-id="be0f4-144">Ignorer l'échec</span><span class="sxs-lookup"><span data-stu-id="be0f4-144">Ignore Failure</span></span>|<span data-ttu-id="be0f4-145">L'erreur ou la troncation est ignorée et la ligne de données est dirigée vers la sortie de la transformation ou de la source.</span><span class="sxs-lookup"><span data-stu-id="be0f4-145">The error or the truncation is ignored and the data row is directed to the output of the transformation or source.</span></span>|  
|<span data-ttu-id="be0f4-146">Réacheminer la ligne</span><span class="sxs-lookup"><span data-stu-id="be0f4-146">Redirect Row</span></span>|<span data-ttu-id="be0f4-147">La ligne de données d'erreur ou de troncation est dirigée vers la sortie d'erreur de la source, de la transformation ou de la destination.</span><span class="sxs-lookup"><span data-stu-id="be0f4-147">The error or the truncation data row is directed to the error output of the source, transformation, or destination.</span></span>|  
  
## <a name="adding-the-error-description"></a><span data-ttu-id="be0f4-148">Ajout de la description de l'erreur</span><span class="sxs-lookup"><span data-stu-id="be0f4-148">Adding the Error Description</span></span>  
 <span data-ttu-id="be0f4-149">Par défaut, une sortie d'erreur fournit le code d'erreur numérique et contient généralement l'identificateur de la colonne dans laquelle l'erreur s'est produite.</span><span class="sxs-lookup"><span data-stu-id="be0f4-149">By default an error output provides the numeric error code and usually contains the identifier of the column in which the error occurred.</span></span> <span data-ttu-id="be0f4-150">Vous pouvez utiliser le composant Script pour inclure la description de l'erreur dans une colonne supplémentaire en utilisant une ligne unique de script pour appeler la méthode <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.GetErrorDescription%2A> de l'interface <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100>.</span><span class="sxs-lookup"><span data-stu-id="be0f4-150">You can use the Script component to include the error description in an additional column by using a single line of script to call the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.GetErrorDescription%2A> method of the <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100> interface.</span></span>  
  
 <span data-ttu-id="be0f4-151">Le composant Script peut être ajouté au segment d'erreur du flux de données n'importe où en aval des composants de flux de données dont vous souhaitez capturer les erreurs, mais est généralement placé immédiatement avant l'écriture des lignes en erreur vers une destination.</span><span class="sxs-lookup"><span data-stu-id="be0f4-151">The Script component can be added to the error segment of the data flow anywhere downstream from the data flow components whose errors that you want to capture, but is typically placed immediately before the error rows are written to a destination.</span></span> <span data-ttu-id="be0f4-152">De cette manière, le script recherche uniquement les descriptions des lignes d'erreurs écrites.</span><span class="sxs-lookup"><span data-stu-id="be0f4-152">This way, the script looks up only descriptions for error rows that are written.</span></span> <span data-ttu-id="be0f4-153">Par exemple, le segment d'erreur du flux de données peut corriger certaines erreurs sans écrire ces lignes dans une destination d'erreur.</span><span class="sxs-lookup"><span data-stu-id="be0f4-153">For example, the error segment of the data flow may correct some errors and not write those rows to an error destination.</span></span> <span data-ttu-id="be0f4-154">Pour plus d’informations, consultez [amélioration d’une sortie d’erreur avec le composant script](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span><span class="sxs-lookup"><span data-stu-id="be0f4-154">For more information, see [Enhancing an Error Output with the Script Component](../extending-packages-scripting-data-flow-script-component-examples/enhancing-an-error-output-with-the-script-component.md).</span></span>  
  
### <a name="to-configure-an-error-output"></a><span data-ttu-id="be0f4-155">Pour configurer un affichage des erreurs</span><span class="sxs-lookup"><span data-stu-id="be0f4-155">To configure an error output</span></span>  
  
-   [<span data-ttu-id="be0f4-156">Configurer une sortie d'erreur dans un composant de flux de données</span><span class="sxs-lookup"><span data-stu-id="be0f4-156">Configure an Error Output in a Data Flow Component</span></span>](../configure-an-error-output-in-a-data-flow-component.md)  
  
## <a name="see-also"></a><span data-ttu-id="be0f4-157">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="be0f4-157">See Also</span></span>  
 <span data-ttu-id="be0f4-158">[Flux de données](data-flow.md) </span><span class="sxs-lookup"><span data-stu-id="be0f4-158">[Data Flow](data-flow.md) </span></span>  
 <span data-ttu-id="be0f4-159">[Transformer des données avec des transformations](transformations/transform-data-with-transformations.md) </span><span class="sxs-lookup"><span data-stu-id="be0f4-159">[Transform Data with Transformations](transformations/transform-data-with-transformations.md) </span></span>  
 <span data-ttu-id="be0f4-160">[Connecter des composants avec des chemins](../connect-components-with-paths.md) </span><span class="sxs-lookup"><span data-stu-id="be0f4-160">[Connect Components with Paths](../connect-components-with-paths.md) </span></span>  
 <span data-ttu-id="be0f4-161">[Tâche de flux de données](../control-flow/data-flow-task.md) </span><span class="sxs-lookup"><span data-stu-id="be0f4-161">[Data Flow Task](../control-flow/data-flow-task.md) </span></span>  
 [<span data-ttu-id="be0f4-162">Flux de données</span><span class="sxs-lookup"><span data-stu-id="be0f4-162">Data Flow</span></span>](data-flow.md)  
  
  
