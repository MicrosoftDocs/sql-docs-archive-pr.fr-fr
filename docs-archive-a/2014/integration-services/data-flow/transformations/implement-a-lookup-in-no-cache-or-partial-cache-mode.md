---
title: Implémenter une recherche en mode Aucun cache ou Cache partiel | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- Lookup transformation
- match exactly [Integration Services]
- lookups [Integration Services]
- exact matches [Integration Services]
ms.assetid: 01b7fbca-5181-4d47-9f75-7f25af6b40d2
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 5c3958450d6371299972a69f5312a3c631c853aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87613058"
---
# <a name="implement-a-lookup-in-no-cache-or-partial-cache-mode"></a><span data-ttu-id="ecea7-102">Implémenter une recherche en mode Aucun cache ou Cache partiel</span><span class="sxs-lookup"><span data-stu-id="ecea7-102">Implement a Lookup in No Cache or Partial Cache Mode</span></span>
  <span data-ttu-id="ecea7-103">Vous pouvez configurer la transformation de recherche afin qu'elle utilise le mode Cache partiel ou le mode Aucun cache.</span><span class="sxs-lookup"><span data-stu-id="ecea7-103">You can configure the Lookup transformation to use the partial cache or no cache mode:</span></span>  
  
-   <span data-ttu-id="ecea7-104">Cache partiel</span><span class="sxs-lookup"><span data-stu-id="ecea7-104">Partial cache</span></span>  
  
     <span data-ttu-id="ecea7-105">Les lignes avec entrées correspondantes dans le dataset de référence et, éventuellement, les lignes sans entrées correspondantes dans le dataset sont stockées dans le cache.</span><span class="sxs-lookup"><span data-stu-id="ecea7-105">The rows with matching entries in the reference dataset and, optionally, the rows without matching entries in the dataset are stored in cache.</span></span> <span data-ttu-id="ecea7-106">Lorsque la taille de mémoire du cache est dépassée, la transformation de recherche supprime automatiquement les lignes le moins fréquemment utilisées du cache.</span><span class="sxs-lookup"><span data-stu-id="ecea7-106">When the memory size of the cache is exceeded, the Lookup transformation automatically removes the least frequently used rows from the cache.</span></span>  
  
-   <span data-ttu-id="ecea7-107">Aucun cache</span><span class="sxs-lookup"><span data-stu-id="ecea7-107">No cache</span></span>  
  
     <span data-ttu-id="ecea7-108">Aucune donnée n'est chargée dans le cache.</span><span class="sxs-lookup"><span data-stu-id="ecea7-108">No data is loaded into cache.</span></span>  
  
 <span data-ttu-id="ecea7-109">Que vous sélectionniez le mode Cache partiel ou le mode Aucun cache, vous utilisez un gestionnaire de connexions OLE DB pour vous connecter au dataset de référence.</span><span class="sxs-lookup"><span data-stu-id="ecea7-109">Whether you select partial cache or no cache, you use an OLE DB connection manager to connect to the reference dataset.</span></span> <span data-ttu-id="ecea7-110">Le dataset de référence est généré à l’aide d’une table, d’une vue ou d’une requête SQL pendant l’exécution de la transformation de recherche.</span><span class="sxs-lookup"><span data-stu-id="ecea7-110">The reference dataset is generated by using a table, view, or SQL query during the execution of the Lookup transformation</span></span>  
  
### <a name="to-implement-a-lookup-transformation-in-no-cache-or-partial-cache-mode"></a><span data-ttu-id="ecea7-111">Pour implémenter une transformation de recherche en mode Aucun cache ou en mode Cache partiel</span><span class="sxs-lookup"><span data-stu-id="ecea7-111">To implement a Lookup transformation in no cache or partial cache mode</span></span>  
  
1.  <span data-ttu-id="ecea7-112">Dans [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)], ouvrez le projet [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] qui contient le package souhaité, puis ouvrez le package.</span><span class="sxs-lookup"><span data-stu-id="ecea7-112">In [!INCLUDE[ssBIDevStudioFull](../../../includes/ssbidevstudiofull-md.md)], open the [!INCLUDE[ssISnoversion](../../../includes/ssisnoversion-md.md)] project that contains the package you want, and then open the package.</span></span>  
  
2.  <span data-ttu-id="ecea7-113">Sous l’onglet **Flux de données** , ajoutez une transformation de recherche.</span><span class="sxs-lookup"><span data-stu-id="ecea7-113">On the **Data Flow** tab, add a Lookup transformation.</span></span>  
  
3.  <span data-ttu-id="ecea7-114">Connectez la transformation de recherche au flux de données en faisant glisser un connecteur à partir d'une source ou d'une transformation précédente jusqu'à la transformation de recherche.</span><span class="sxs-lookup"><span data-stu-id="ecea7-114">Connect the Lookup transformation to the data flow by dragging a connector from a source or a previous transformation to the Lookup transformation.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ecea7-115">Une transformation de recherche configurée pour utiliser le mode Aucun cache peut ne pas se valider si cette transformation se connecte à un fichier plat qui contient un champ Date vide.</span><span class="sxs-lookup"><span data-stu-id="ecea7-115">A Lookup transformation that is configured to use the no cache mode might not validate if that transformation connects to a flat file that contains an empty date field.</span></span> <span data-ttu-id="ecea7-116">La validation de la transformation dépend si le gestionnaire de connexions pour le fichier plat a été configuré pour conserver des valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="ecea7-116">Whether the transformation validates depends on whether the connection manager for the flat file has been configured to retain null values.</span></span> <span data-ttu-id="ecea7-117">Pour que la validation de la transformation de recherche soit validée, dans **l’Éditeur de source de fichier plat**, dans la **page Gestionnaire de connexions**, sélectionnez l’option **Conserver les valeurs NULL de la source comme valeurs NULL dans le flux de données** .</span><span class="sxs-lookup"><span data-stu-id="ecea7-117">To ensure that the Lookup transformation validates, in the **Flat File Source Editor**, on the **Connection Manager Page**, select the **Retain null values from the source as null values in the data flow** option.</span></span>  
  
4.  <span data-ttu-id="ecea7-118">Double-cliquez sur la transformation source ou précédente pour configurer le composant.</span><span class="sxs-lookup"><span data-stu-id="ecea7-118">Double-click the source or previous transformation to configure the component.</span></span>  
  
5.  <span data-ttu-id="ecea7-119">Double-cliquez sur la transformation de recherche, puis dans **l’Éditeur de transformation de recherche**, dans la page **Général** , sélectionnez **Cache partiel** ou **Aucun cache**.</span><span class="sxs-lookup"><span data-stu-id="ecea7-119">Double-click the Lookup transformation, and then in the **Lookup Transformation Editor**, on the **General** page, select **Partialcache** or **No cache**.</span></span>  
  
6.  <span data-ttu-id="ecea7-120">Dans la liste **Spécifier comment gérer les lignes sans entrées correspondantes** , sélectionnez une option de gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="ecea7-120">For **Specify how to handle rows with no matching entries** list, select an error handling option from the list.</span></span>  
  
7.  <span data-ttu-id="ecea7-121">Dans la page **Connexion** , sélectionnez un gestionnaire de connexions dans la liste **Gestionnaire de connexions OLE DB** ou cliquez sur **Nouveau** pour créer un gestionnaire de connexions.</span><span class="sxs-lookup"><span data-stu-id="ecea7-121">On the **Connection** page, select a connection manager from the **OLE DB connection manager** list or click **New** to create a new connection manager.</span></span> <span data-ttu-id="ecea7-122">Pour plus d’informations, consultez [OLE DB Connection Manager](../../connection-manager/ole-db-connection-manager.md).</span><span class="sxs-lookup"><span data-stu-id="ecea7-122">For more information, see [OLE DB Connection Manager](../../connection-manager/ole-db-connection-manager.md).</span></span>  
  
8.  <span data-ttu-id="ecea7-123">Effectuez l’une des étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="ecea7-123">Do one of the following steps:</span></span>  
  
    -   <span data-ttu-id="ecea7-124">Cliquez sur **Utiliser une table ou une vue**, puis sélectionnez une table ou une vue, ou cliquez sur **Nouveau** pour créer une table ou une vue.</span><span class="sxs-lookup"><span data-stu-id="ecea7-124">Click **Use a table or a view**, and then either select a table or view, or click **New** to create a table or view.</span></span>  
  
    -   <span data-ttu-id="ecea7-125">Cliquez sur **Utiliser les résultats d’une requête SQL**, puis générez une requête dans la fenêtre **Commande SQL** .</span><span class="sxs-lookup"><span data-stu-id="ecea7-125">Click **Use results of an SQL query**, and then build a query in the **SQL Command** window.</span></span>  
  
         <span data-ttu-id="ecea7-126">-ou-</span><span class="sxs-lookup"><span data-stu-id="ecea7-126">-or-</span></span>  
  
         <span data-ttu-id="ecea7-127">Cliquez sur **Générer la requête** pour générer une requête à l’aide des outils graphiques fournis par le **Générateur de requêtes** .</span><span class="sxs-lookup"><span data-stu-id="ecea7-127">Click **Build Query** to build a query by using the graphical tools that the **Query Builder** provides.</span></span>  
  
         <span data-ttu-id="ecea7-128">-ou-</span><span class="sxs-lookup"><span data-stu-id="ecea7-128">-or-</span></span>  
  
         <span data-ttu-id="ecea7-129">Cliquez sur **Parcourir** pour importer une instruction SQL à partir d’un fichier.</span><span class="sxs-lookup"><span data-stu-id="ecea7-129">Click **Browse** to import an SQL statement from a file.</span></span>  
  
     <span data-ttu-id="ecea7-130">Pour valider la requête SQL, cliquez sur **Analyser la requête**.</span><span class="sxs-lookup"><span data-stu-id="ecea7-130">To validate the SQL query, click **Parse Query**.</span></span>  
  
     <span data-ttu-id="ecea7-131">Pour afficher un échantillon des données, cliquez sur **Aperçu**.</span><span class="sxs-lookup"><span data-stu-id="ecea7-131">To view a sample of the data, click **Preview**.</span></span>  
  
9. <span data-ttu-id="ecea7-132">Cliquez sur la page **Colonnes** , puis faites glisser au moins une colonne de la liste **Colonnes d’entrée disponibles** vers une colonne de la liste **Colonnes de recherche disponibles** .</span><span class="sxs-lookup"><span data-stu-id="ecea7-132">Click the **Columns** page, and then drag at least one column from the **Available Input Columns** list to a column in the **Available Lookup Column** list.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ecea7-133">La transformation de recherche mappe automatiquement les colonnes ayant le même nom et le même type de données.</span><span class="sxs-lookup"><span data-stu-id="ecea7-133">The Lookup transformation automatically maps columns that have the same name and the same data type.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ecea7-134">Les types de données des colonnes doivent correspondre pour que les colonnes puissent être mappées.</span><span class="sxs-lookup"><span data-stu-id="ecea7-134">Columns must have matching data types to be mapped.</span></span> <span data-ttu-id="ecea7-135">Pour plus d’informations, consultez [Types de données Integration Services](../integration-services-data-types.md).</span><span class="sxs-lookup"><span data-stu-id="ecea7-135">For more information, see [Integration Services Data Types](../integration-services-data-types.md).</span></span>  
  
10. <span data-ttu-id="ecea7-136">Incluez des colonnes de recherche dans la sortie en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="ecea7-136">Include lookup columns in the output by doing the following steps:</span></span>  
  
    1.  <span data-ttu-id="ecea7-137">Dans la liste **Colonnes de recherche disponibles** , sélectionnez des colonnes.</span><span class="sxs-lookup"><span data-stu-id="ecea7-137">From the **Available Lookup Columns** list, select columns.</span></span>  
  
    2.  <span data-ttu-id="ecea7-138">Dans la liste **Opération de recherche** , spécifiez si les valeurs des colonnes de recherche remplacent les valeurs des colonnes d’entrée ou si elles sont écrites dans une nouvelle colonne.</span><span class="sxs-lookup"><span data-stu-id="ecea7-138">In **Lookup Operation** list, specify whether the values from the lookup columns replace values in the input column or are written to a new column.</span></span>  
  
11. <span data-ttu-id="ecea7-139">Si vous avez sélectionné **Cache partial** à l’étape 5, dans la page **Avancé** , définissez les options de cache suivantes :</span><span class="sxs-lookup"><span data-stu-id="ecea7-139">If you selected **Partial cache** in step 5, on the **Advanced** page, set the following cache options:</span></span>  
  
    -   <span data-ttu-id="ecea7-140">Dans la liste **Taille du cache (32 bits)** , sélectionnez la taille du cache pour les environnements 32 bits.</span><span class="sxs-lookup"><span data-stu-id="ecea7-140">From the **Cache size (32-bit)** list, select the cache size for 32-bit environments.</span></span>  
  
    -   <span data-ttu-id="ecea7-141">Dans la liste **Taille du cache (64 bits)** , sélectionnez la taille du cache pour les environnements 64 bits.</span><span class="sxs-lookup"><span data-stu-id="ecea7-141">From the **Cache size (64-bit)** list, select the cache size for 64-bit environments.</span></span>  
  
    -   <span data-ttu-id="ecea7-142">Pour mettre en cache les lignes sans entrées correspondantes dans la référence, sélectionnez **Activer le cache pour les lignes sans entrées correspondantes**.</span><span class="sxs-lookup"><span data-stu-id="ecea7-142">To cache the rows without matching entries in the reference, select **Enable cache for rows with no matching entries**.</span></span>  
  
    -   <span data-ttu-id="ecea7-143">Dans la liste **Allocation à partir du cache** , sélectionnez le pourcentage du cache à utiliser pour stocker les lignes sans entrées correspondantes.</span><span class="sxs-lookup"><span data-stu-id="ecea7-143">From the **Allocation from cache** list, select the percentage of the cache to use to store the rows without matching entries.</span></span>  
  
12. <span data-ttu-id="ecea7-144">Pour modifier l’instruction SQL qui génère le dataset de référence, sélectionnez **Modifier l’instruction SQL**et modifiez l’instruction SQL affichée dans la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="ecea7-144">To modify the SQL statement that generates the reference dataset, select **Modify the SQL statement**, and change the SQL statement displayed in the text box.</span></span>  
  
     <span data-ttu-id="ecea7-145">Si l’instruction inclut des paramètres, cliquez sur **Paramètres** pour mapper les paramètres aux colonnes d’entrée.</span><span class="sxs-lookup"><span data-stu-id="ecea7-145">If the statement includes parameters, click **Parameters** to map the parameters to input columns.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ecea7-146">L’instruction SQL facultative que vous spécifiez dans cette page substitue et remplace le nom de table que vous avez spécifié dans la page **Connexion** de **l’Éditeur de transformation de recherche**.</span><span class="sxs-lookup"><span data-stu-id="ecea7-146">The optional SQL statement that you specify on this page overrides and replaces the table name that you specified on the **Connection** page of the **Lookup Transformation Editor**.</span></span>  
  
13. <span data-ttu-id="ecea7-147">Pour configurer la sortie d’erreur, cliquez sur la page **Sortie d’erreur** et définissez les options de gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="ecea7-147">To configure the error output, click the **Error Output** page and set the error handling options.</span></span> <span data-ttu-id="ecea7-148">Pour plus d’informations, consultez [Éditeur de transformation de recherche &#40;page Sortie d’erreur&#41;](../../lookup-transformation-editor-error-output-page.md).</span><span class="sxs-lookup"><span data-stu-id="ecea7-148">For more information, see [Lookup Transformation Editor &#40;Error Output Page&#41;](../../lookup-transformation-editor-error-output-page.md).</span></span>  
  
14. <span data-ttu-id="ecea7-149">Cliquez sur **OK** pour enregistrer les modifications apportées à la transformation de recherche, puis exécutez le package.</span><span class="sxs-lookup"><span data-stu-id="ecea7-149">Click **OK** to save your changes to the Lookup transformation, and then run the package.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ecea7-150">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ecea7-150">See Also</span></span>  
 [<span data-ttu-id="ecea7-151">Transformations Integration Services</span><span class="sxs-lookup"><span data-stu-id="ecea7-151">Integration Services Transformations</span></span>](integration-services-transformations.md)  
  
  
