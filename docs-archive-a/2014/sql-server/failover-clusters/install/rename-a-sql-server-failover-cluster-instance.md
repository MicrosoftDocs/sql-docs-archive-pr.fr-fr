---
title: Renommer une instance de cluster de basculement SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- clusters [SQL Server], virtual servers
- renaming virtual servers
- virtual servers [SQL Server], failover clustering
- failover clustering [SQL Server], virtual servers
ms.assetid: 2a49d417-25fb-4760-8ae5-5871bfb1e6f3
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 397e36931e446861db0fcb899cad30e8c7b1ffc2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87605039"
---
# <a name="rename-a-sql-server-failover-cluster-instance"></a><span data-ttu-id="db1f3-102">Renommer une instance de cluster de basculement SQL Server</span><span class="sxs-lookup"><span data-stu-id="db1f3-102">Rename a SQL Server Failover Cluster Instance</span></span>
  <span data-ttu-id="db1f3-103">Lorsqu'une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fait partie d'un cluster de basculement, le processus permettant de renommer un serveur virtuel diffère du processus permettant de renommer une instance autonome.</span><span class="sxs-lookup"><span data-stu-id="db1f3-103">When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is part of a failover cluster, the process of renaming the virtual server differs from that of renaming a stand-alone instance.</span></span> <span data-ttu-id="db1f3-104">Pour plus d’informations, consultez [Renommer un ordinateur qui héberge une instance autonome de SQL Server](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="db1f3-104">For more information, see [Rename a Computer that Hosts a Stand-Alone Instance of SQL Server](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md).</span></span>  
  
 <span data-ttu-id="db1f3-105">Le nom du serveur virtuel est toujours identique au nom réseau SQL (le nom réseau du serveur virtuel SQL).</span><span class="sxs-lookup"><span data-stu-id="db1f3-105">The name of the virtual server is always the same as the name of the SQL Network Name (the SQL Virtual Server Network Name).</span></span> <span data-ttu-id="db1f3-106">Bien que vous puissiez modifier le nom du serveur virtuel, vous ne pouvez pas modifier le nom de l'instance.</span><span class="sxs-lookup"><span data-stu-id="db1f3-106">Although you can change the name of the virtual server, you cannot change the instance name.</span></span> <span data-ttu-id="db1f3-107">Par exemple, vous pouvez attribuer un autre nom à un serveur virtuel nommé VS1\instance1, tel que SQL35\instance1, mais la partie instance du nom (instance1) restera inchangée.</span><span class="sxs-lookup"><span data-stu-id="db1f3-107">For example, you can change a virtual server named VS1\instance1 to some other name, such as SQL35\instance1, but the instance portion of the name, instance1, will remain unchanged.</span></span>  
  
 <span data-ttu-id="db1f3-108">Avant de commencer le processus d'attribution d'un nouveau nom, examinez les éléments ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="db1f3-108">Before you begin the renaming process, review the items below.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="db1f3-109">ne prend pas en charge le renommage des serveurs impliqués dans la réplication, sauf en cas d’utilisation de la copie des journaux de transaction avec la réplication.</span><span class="sxs-lookup"><span data-stu-id="db1f3-109">does not support renaming servers involved in replication, except in the case of using log shipping with replication.</span></span> <span data-ttu-id="db1f3-110">Le serveur secondaire dans l'envoi de journaux peut être renommé si le serveur principal est perdu de manière permanente.</span><span class="sxs-lookup"><span data-stu-id="db1f3-110">The secondary server in log shipping can be renamed if the primary server is permanently lost.</span></span> <span data-ttu-id="db1f3-111">Pour plus d’informations, consultez [Copie des journaux de transaction et réplication &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="db1f3-111">For more information, see [Log Shipping and Replication &#40;SQL Server&#41;](../../../database-engine/log-shipping/log-shipping-and-replication-sql-server.md).</span></span>  
  
-   <span data-ttu-id="db1f3-112">Lorsqu'un serveur configuré pour utiliser la mise en miroir de base de données doit être renommé, vous devez au préalable désactiver la mise en miroir de la base de données, puis la réactiver avec le nouveau nom du serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="db1f3-112">When renaming a virtual server that is configured to use database mirroring, you must turn off database mirroring before the renaming operation, and then re-establish database mirroring with the new virtual server name.</span></span> <span data-ttu-id="db1f3-113">Les métadonnées pour la mise en miroir de la base de données ne seront pas mises à jour automatiquement de façon à refléter le nouveau nom du serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="db1f3-113">Metadata for database mirroring will not be updated automatically to reflect the new virtual server name.</span></span>  
  
### <a name="to-rename-a-virtual-server"></a><span data-ttu-id="db1f3-114">Pour renommer un serveur virtuel</span><span class="sxs-lookup"><span data-stu-id="db1f3-114">To rename a virtual server</span></span>  
  
1.  <span data-ttu-id="db1f3-115">À l'aide de l'Administrateur de cluster, modifiez le nom réseau SQL.</span><span class="sxs-lookup"><span data-stu-id="db1f3-115">Using Cluster Administrator, change the SQL Network Name to the new name.</span></span>  
  
2.  <span data-ttu-id="db1f3-116">Faites passer la ressource de nom réseau en mode hors connexion.</span><span class="sxs-lookup"><span data-stu-id="db1f3-116">Take the network name resource offline.</span></span> <span data-ttu-id="db1f3-117">La ressource [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] et les autres ressources dépendantes basculeront également en mode hors connexion.</span><span class="sxs-lookup"><span data-stu-id="db1f3-117">This takes the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource and other dependent resources offline as well.</span></span>  
  
3.  <span data-ttu-id="db1f3-118">Faites repasser la ressource [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en mode connecté.</span><span class="sxs-lookup"><span data-stu-id="db1f3-118">Bring the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource back online.</span></span>  
  
## <a name="verify-the-renaming-operation"></a><span data-ttu-id="db1f3-119">Vérification de l'opération d'attribution d'un nom</span><span class="sxs-lookup"><span data-stu-id="db1f3-119">Verify the Renaming Operation</span></span>  
 <span data-ttu-id="db1f3-120">Une fois qu'un serveur virtuel a été renommé, toute connexion qui utilisait l'ancien nom doit maintenant se connecter à l'aide du nouveau nom.</span><span class="sxs-lookup"><span data-stu-id="db1f3-120">After a virtual server has been renamed, any connections that used the old name must now connect using the new name.</span></span>  
  
 <span data-ttu-id="db1f3-121">Pour vérifier que l'opération de changement de nom a abouti, sélectionnez les informations de `@@servername` ou `sys.servers`.</span><span class="sxs-lookup"><span data-stu-id="db1f3-121">To verify that the renaming operation has completed, select information from either `@@servername` or `sys.servers`.</span></span> <span data-ttu-id="db1f3-122">La fonction `@@servername` retourne le nouveau nom de serveur virtuel et la table `sys.servers` affiche le nouveau nom de serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="db1f3-122">The `@@servername` function will return the new virtual server name, and the `sys.servers` table will show the new virtual server name.</span></span> <span data-ttu-id="db1f3-123">Pour vérifier que le processus de basculement fonctionne correctement avec le nouveau nom, l'utilisateur doit également essayer de faire basculer la ressource [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] vers les autres nœuds.</span><span class="sxs-lookup"><span data-stu-id="db1f3-123">To verify that the failover process is working correctly with the new name, the user should also try to fail the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource over to the other nodes.</span></span>  
  
 <span data-ttu-id="db1f3-124">Pour les connexions établies à partir d'un nœud du cluster, le nouveau nom peut être utilisé presque immédiatement.</span><span class="sxs-lookup"><span data-stu-id="db1f3-124">For connections from any node in the cluster, the new name can be used almost immediately.</span></span> <span data-ttu-id="db1f3-125">Toutefois, pour les connexions utilisant le nouveau nom à partir d'un ordinateur client, le nouveau nom ne peut être utilisé pour se connecter au serveur qu'une fois qu'il est visible à cet ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="db1f3-125">However, for connections using the new name from a client computer, the new name cannot be used to connect to the server until the new name is visible to that client computer.</span></span> <span data-ttu-id="db1f3-126">La durée nécessaire à la propagation du nouveau nom sur le réseau peut aller de quelques secondes à quelques minutes, selon la configuration du réseau ; il faudra peut-être davantage de temps avant que l'ancien nom du serveur virtuel ne soit plus visible sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="db1f3-126">The length of time required for the new name to be propagated across a network can be a few seconds, or as long as 3 to 5 minutes, depending on the network configuration; additional time may be required before the old virtual server name is no longer visible on the network.</span></span>  
  
 <span data-ttu-id="db1f3-127">Pour minimiser le délai de propagation réseau lorsque vous renommez un serveur virtuel, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="db1f3-127">To minimize network propagation delay of a virtual server renaming operation, use the following steps:</span></span>  
  
#### <a name="to-minimize-network-propagation-delay"></a><span data-ttu-id="db1f3-128">Pour minimiser le délai de propagation réseau</span><span class="sxs-lookup"><span data-stu-id="db1f3-128">To minimize network propagation delay</span></span>  
  
1.  <span data-ttu-id="db1f3-129">Exécutez les commandes suivantes à partir d'une invite de commandes sur le nœud du serveur :</span><span class="sxs-lookup"><span data-stu-id="db1f3-129">Issue the following commands from a command prompt on the server node:</span></span>  
  
    ```  
    ipconfig /flushdns  
    ipconfig /registerdns  
    nbtstat -RR  
    ```  
  
## <a name="additional-considerations-after-the-renaming-operation"></a><span data-ttu-id="db1f3-130">Éléments supplémentaires à prendre en considération après une opération Renommer</span><span class="sxs-lookup"><span data-stu-id="db1f3-130">Additional considerations after the Renaming Operation</span></span>  
 <span data-ttu-id="db1f3-131">Après avoir renommé le nom réseau d'un cluster de basculement, nous devons vérifier et suivre les instructions suivantes pour que tous les scénarios dans [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent et [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]soient opérationnels.</span><span class="sxs-lookup"><span data-stu-id="db1f3-131">After we rename the network name of failover cluster we need to verify and perform the following instructions to enable all scenarios in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent and [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="db1f3-132">\*\* [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] :\*\* Après avoir modifié le nom réseau d’une [!INCLUDE[ssASCurrent](../../../includes/ssascurrent-md.md)] instance de cluster de basculement à l’aide de l’outil Administrateur de cluster Windows, l’opération de mise à niveau ou de désinstallation ultérieure peut échouer.</span><span class="sxs-lookup"><span data-stu-id="db1f3-132">**[!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]:** After you change the network name of a [!INCLUDE[ssASCurrent](../../../includes/ssascurrent-md.md)] failover cluster instance using Windows Cluster Administrator tool, the future upgrade or uninstall operation might fail.</span></span> <span data-ttu-id="db1f3-133">Pour résoudre ce problème, mettez à jour l’entrée de Registre **ClusterName** en suivant les instructions de la section résolution de [ce](https://go.microsoft.com/fwlink/?LinkId=244002) ( https://go.microsoft.com/fwlink/?LinkId=244002) .</span><span class="sxs-lookup"><span data-stu-id="db1f3-133">To resolve this issue update the **ClusterName** registry entry following the instructions in the resolution section of [this](https://go.microsoft.com/fwlink/?LinkId=244002) (https://go.microsoft.com/fwlink/?LinkId=244002).</span></span>  
  
 <span data-ttu-id="db1f3-134">\*\* [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Service agent :\*\* Vérifiez et effectuez les actions supplémentaires ci-dessous pour [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Service de l’agent :</span><span class="sxs-lookup"><span data-stu-id="db1f3-134">**[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent Service:** Verify and perform the below additional actions for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent Service:</span></span>  
  
-   <span data-ttu-id="db1f3-135">Corrigez les paramètres de registre si l'Agent SQL est configuré pour le transfert d'événements.</span><span class="sxs-lookup"><span data-stu-id="db1f3-135">Fix the registry settings if SQL Agent is configured for event forwarding.</span></span> <span data-ttu-id="db1f3-136">Pour plus d’informations, consultez [Désigner un serveur de transfert d’événements &#40;SQL Server Management Studio&#41;](../../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="db1f3-136">For more information, see [Designate an Events Forwarding Server &#40;SQL Server Management Studio&#41;](../../../ssms/agent/designate-an-events-forwarding-server-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="db1f3-137">Corrigez les noms d'instance du serveur maître (MSX) et des serveurs cibles (TSX) lorsque le nom réseau du cluster/des ordinateurs est modifié.</span><span class="sxs-lookup"><span data-stu-id="db1f3-137">Fix the master server (MSX) and target servers (TSX) instance names when machines / cluster network name is renamed.</span></span> <span data-ttu-id="db1f3-138">Pour plus d'informations, voir les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="db1f3-138">For more information, see the following topics:</span></span>  
  
    -   [<span data-ttu-id="db1f3-139">Annuler l’inscription de plusieurs serveurs cibles dans un serveur maître</span><span class="sxs-lookup"><span data-stu-id="db1f3-139">Defect Multiple Target Servers from a Master Server</span></span>](../../../ssms/agent/defect-multiple-target-servers-from-a-master-server.md)  
  
    -   [<span data-ttu-id="db1f3-140">Créer un environnement multiserveur</span><span class="sxs-lookup"><span data-stu-id="db1f3-140">Create a Multiserver Environment</span></span>](../../../ssms/agent/create-a-multiserver-environment.md)  
  
-   <span data-ttu-id="db1f3-141">Reconfigurez la copie des journaux de transaction afin que le nom de serveur mis à jour soit utilisé dans les journaux de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="db1f3-141">Reconfigure the Log Shipping so that updated server name is used to backup and restore logs.</span></span> <span data-ttu-id="db1f3-142">Pour plus d'informations, voir les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="db1f3-142">For more information, see the following topics:</span></span>  
  
    -   [<span data-ttu-id="db1f3-143">Configurer la copie des journaux de transaction &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="db1f3-143">Configure Log Shipping &#40;SQL Server&#41;</span></span>](../../../database-engine/log-shipping/configure-log-shipping-sql-server.md)  
  
    -   [<span data-ttu-id="db1f3-144">Supprimer la copie des journaux de transaction &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="db1f3-144">Remove Log Shipping &#40;SQL Server&#41;</span></span>](../../../database-engine/log-shipping/remove-log-shipping-sql-server.md)  
  
-   <span data-ttu-id="db1f3-145">Mettez à jour les étapes de travail qui dépendent du nom du serveur.</span><span class="sxs-lookup"><span data-stu-id="db1f3-145">Update the Jobsteps that depend on server name.</span></span> <span data-ttu-id="db1f3-146">Pour plus d’informations, consultez [Gérer les étapes de travail](../../../ssms/agent/manage-job-steps.md).</span><span class="sxs-lookup"><span data-stu-id="db1f3-146">For more information, see [Manage Job Steps](../../../ssms/agent/manage-job-steps.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="db1f3-147">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="db1f3-147">See Also</span></span>  
 [<span data-ttu-id="db1f3-148">Renommer un ordinateur qui héberge une instance autonome de SQL Server</span><span class="sxs-lookup"><span data-stu-id="db1f3-148">Rename a Computer that Hosts a Stand-Alone Instance of SQL Server</span></span>](../../../database-engine/install-windows/rename-a-computer-that-hosts-a-stand-alone-instance-of-sql-server.md)  
  
  
