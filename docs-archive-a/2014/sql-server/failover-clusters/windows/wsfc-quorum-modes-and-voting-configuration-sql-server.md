---
title: Modes de quorum WSFC et configuration de vote (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], WSFC clusters
- quorum [SQL Server], AlwaysOn and WSFC quorum
- failover clustering [SQL Server], AlwaysOn Availability Groups
ms.assetid: ca0d59ef-25f0-4047-9130-e2282d058283
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 6b1d5ad992c59f252f485f2d65451a72f150bef8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87605000"
---
# <a name="wsfc-quorum-modes-and-voting-configuration-sql-server"></a><span data-ttu-id="b7b6c-102">Modes de quorum WSFC et configuration de vote (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="b7b6c-102">WSFC Quorum Modes and Voting Configuration (SQL Server)</span></span>
  <span data-ttu-id="b7b6c-103">Les [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)][!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] et les instances de cluster de basculement AlwaysOn tirent parti du clustering de basculement Windows Server (WSFC) en tant que technologie de plateforme.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-103">Both [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)][!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and AlwaysOn Failover Cluster Instances (FCI) take advantage of Windows Server Failover Clustering (WSFC) as a platform technology.</span></span>  <span data-ttu-id="b7b6c-104">WSFC utilise une approche basée sur le quorum pour la surveillance de l'intégrité globale du cluster et l'optimisation de la tolérance aux pannes au niveau du nœud.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-104">WSFC uses a quorum-based approach to monitoring overall cluster health and maximize node-level fault tolerance.</span></span> <span data-ttu-id="b7b6c-105">Il est très important de disposer d'une connaissance fondamentale de la configuration du vote des nœuds et des modes de quorum WSFC pour concevoir, administrer et dépanner votre solution de récupération d'urgence haute disponibilité AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-105">A fundamental understanding of WSFC quorum modes and node voting configuration is very important to designing, operating, and troubleshooting your AlwaysOn high availability and disaster recovery solution.</span></span>  
  
 <span data-ttu-id="b7b6c-106">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-106">**In this topic:**</span></span>  
  
-   [<span data-ttu-id="b7b6c-107">Détection de l’intégrité du cluster par quorum</span><span class="sxs-lookup"><span data-stu-id="b7b6c-107">Cluster Health Detection by Quorum</span></span>](#ClusterHealthDetectionbyQuorum)  
  
-   [<span data-ttu-id="b7b6c-108">Modes de quorum</span><span class="sxs-lookup"><span data-stu-id="b7b6c-108">Quorum Modes</span></span>](#QuorumModes)  
  
-   [<span data-ttu-id="b7b6c-109">Nœuds votants et non-votants</span><span class="sxs-lookup"><span data-stu-id="b7b6c-109">Voting and Non-Voting Nodes</span></span>](#VotingandNonVotingNodes)  
  
-   [<span data-ttu-id="b7b6c-110">Réglages recommandés pour le vote du quorum</span><span class="sxs-lookup"><span data-stu-id="b7b6c-110">Recommended Adjustments to Quorum Voting</span></span>](#RecommendedAdjustmentstoQuorumVoting)  
  
-   [<span data-ttu-id="b7b6c-111">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="b7b6c-111">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="b7b6c-112">Contenu connexe</span><span class="sxs-lookup"><span data-stu-id="b7b6c-112">Related Content</span></span>](#RelatedContent)  
  
##  <a name="cluster-health-detection-by-quorum"></a><a name="ClusterHealthDetectionbyQuorum"></a> <span data-ttu-id="b7b6c-113">Détection de l'intégrité du cluster par quorum</span><span class="sxs-lookup"><span data-stu-id="b7b6c-113">Cluster Health Detection by Quorum</span></span>  
 <span data-ttu-id="b7b6c-114">Chaque nœud d'un cluster WSFC participe à la communication périodique de pulsation pour partager l'état d'intégrité du nœud avec les autres nœuds.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-114">Each node in a WSFC cluster participates in periodic heartbeat communication to share the node's health status with the other nodes.</span></span> <span data-ttu-id="b7b6c-115">Les nœuds qui ne répondent pas sont considérés comme étant en état d'échec.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-115">Unresponsive nodes are considered to be in a failed state.</span></span>  
  
 <span data-ttu-id="b7b6c-116">Un ensemble de nœuds de *quorum* est une majorité des nœuds votants et des témoins dans le cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-116">A *quorum* node set is a majority of the voting nodes and witnesses in the WSFC cluster.</span></span> <span data-ttu-id="b7b6c-117">L'intégrité globale et le statut d'un cluster WSFC sont déterminés par un *vote de quorum*périodique.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-117">The overall health and status of a WSFC cluster is determined by a periodic *quorum vote*.</span></span>  <span data-ttu-id="b7b6c-118">La présence d'un quorum signifie que le cluster est intègre et en mesure d'assurer la tolérance aux pannes au niveau du nœud.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-118">The presence of a quorum means that the cluster is healthy and able to provide node-level fault tolerance.</span></span>  
  
 <span data-ttu-id="b7b6c-119">L'absence de quorum indique que le cluster n'est pas intègre.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-119">The absence of a quorum indicates that the cluster is not healthy.</span></span>  <span data-ttu-id="b7b6c-120">L'intégrité globale du cluster WSFC doit être assurée pour garantir la disponibilité de nœuds secondaires intègres vers lesquels les nœuds principaux peuvent basculer.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-120">Overall WSFC cluster health must be maintained in order to ensure that healthy secondary nodes are available for primary nodes to fail over to.</span></span>  <span data-ttu-id="b7b6c-121">Si le vote du quorum échoue, le cluster WSFC passe hors connexion par mesure de sécurité.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-121">If the quorum vote fails, the WSFC cluster will be set offline as a precautionary measure.</span></span>  <span data-ttu-id="b7b6c-122">Cela entraîne également l'arrêt de toutes les instances de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] inscrites avec le cluster.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-122">This will also cause all [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances registered with the cluster to be stopped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="b7b6c-123">Si un cluster WSFC passe hors connexion suite à l'échec du quorum, une intervention manuelle est nécessaire pour le remettre en ligne.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-123">If a WSFC cluster is set offline because of quorum failure, manual intervention is required to bring it back online.</span></span>  
>   
>  <span data-ttu-id="b7b6c-124">Pour plus d’informations, voir : [récupération d’urgence WSFC par le quorum forcé &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="b7b6c-124">For more information, see: [WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md).</span></span>  
  
##  <a name="quorum-modes"></a><a name="QuorumModes"></a><span data-ttu-id="b7b6c-125">Modes de quorum</span><span class="sxs-lookup"><span data-stu-id="b7b6c-125">Quorum Modes</span></span>  
 <span data-ttu-id="b7b6c-126">Un *mode de quorum* est configuré au niveau du cluster WSFC afin de dicter la méthodologie utilisée pour le vote du quorum.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-126">A *quorum mode* is configured at the WSFC cluster level that dictates the methodology used for quorum voting.</span></span>  <span data-ttu-id="b7b6c-127">L'utilitaire Gestionnaire du cluster de basculement recommande un mode de quorum en fonction du nombre de nœuds du cluster.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-127">The Failover Cluster Manager utility will recommend a quorum mode based on the number of nodes in the cluster.</span></span>  
  
 <span data-ttu-id="b7b6c-128">Les modes de quorum suivants peuvent être utilisés pour déterminer la constitution d'un quorum de votes :</span><span class="sxs-lookup"><span data-stu-id="b7b6c-128">The following quorum modes can be used to determine what constitutes a quorum of votes:</span></span>  
  
-   <span data-ttu-id="b7b6c-129">**Nœud majoritaire.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-129">**Node Majority.**</span></span> <span data-ttu-id="b7b6c-130">Plus de la moitié des nœuds votants du cluster doit voter de manière affirmative pour que le cluster soit considéré comme intègre.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-130">More than one-half of the voting nodes in the cluster must vote affirmatively for the cluster to be healthy.</span></span>  
  
-   <span data-ttu-id="b7b6c-131">**Nœud et partage de fichiers majoritaires.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-131">**Node and File Share Majority.**</span></span> <span data-ttu-id="b7b6c-132">Semblable au mode de quorum Nœud majoritaire, à ceci près qu'un partage de fichiers distant est également configuré en tant que témoin du vote, et que la connectivité de n'importe quel nœud à ce partage est également comptabilisée comme vote affirmatif.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-132">Similar to Node Majority quorum mode, except that a remote file share is also configured as a voting witness, and connectivity from any node to that share is also counted as an affirmative vote.</span></span>  <span data-ttu-id="b7b6c-133">Plus de la moitié des votes possibles doivent être affirmatifs pour que cluster soit considéré comme intègre.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-133">More than one-half of the possible votes must be affirmative for the cluster to be healthy.</span></span>  
  
     <span data-ttu-id="b7b6c-134">À titre de recommandation, le partage de fichiers témoin ne doit pas résider sur un nœud du cluster, et il doit être visible pour tous les nœuds du cluster.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-134">As a best practice, the witness file share should not reside on any node in the cluster, and it should be visible to all nodes in the cluster.</span></span>  
  
-   <span data-ttu-id="b7b6c-135">**Nœud et disque majoritaires.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-135">**Node and Disk Majority.**</span></span> <span data-ttu-id="b7b6c-136">Semblable au mode de quorum Nœud majoritaire, à ceci près qu'une ressource de cluster de disque partagé est également désignée comme témoin du vote, et que la connectivité de n'importe quel nœud à ce disque partagé est également comptabilisée comme un vote affirmatif.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-136">Similar to Node Majority quorum mode, except that a shared disk cluster resource is also designated as a voting witness, and connectivity from any node to that shared disk is also counted as an affirmative vote.</span></span>  <span data-ttu-id="b7b6c-137">Plus de la moitié des votes possibles doivent être affirmatifs pour que cluster soit considéré comme intègre.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-137">More than one-half of the possible votes must be affirmative for the cluster to be healthy.</span></span>  
  
-   <span data-ttu-id="b7b6c-138">**Disque uniquement.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-138">**Disk Only.**</span></span> <span data-ttu-id="b7b6c-139">Une ressource de cluster de disque partagé est désignée comme témoin, et la connectivité de n'importe quel nœud à ce disque partagé est comptabilisée comme un vote affirmatif.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-139">A shared disk cluster resource is designated as a witness, and connectivity by any node to that shared disk is counted as an affirmative vote.</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="b7b6c-140">Lorsque vous utilisez une configuration de stockage asymétrique pour [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], il est généralement conseillé d'utiliser le mode de quorum Nœud majoritaire lorsque vous avez un nombre impair de nœuds votants, ou le mode de quorum Nœud et partage de fichiers majoritaires lorsque vous avez un nombre pair de nœuds votants.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-140">When using an asymmetric storage configuration for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], you should generally use the Node Majority quorum mode when you have an odd number of voting nodes, or the Node and File Share Majority quorum mode when you have an even number of voting nodes.</span></span>  
  
##  <a name="voting-and-non-voting-nodes"></a><a name="VotingandNonVotingNodes"></a> <span data-ttu-id="b7b6c-141">Nœuds votants et non-votants</span><span class="sxs-lookup"><span data-stu-id="b7b6c-141">Voting and Non-Voting Nodes</span></span>  
 <span data-ttu-id="b7b6c-142">Par défaut, chaque nœud du cluster WSFC est inclus en tant que membre du quorum du cluster ; chaque nœud dispose d'un seul vote pour déterminer l'intégrité globale de cluster, et chaque nœud tente en permanence d'établir un quorum.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-142">By default, each node in the WSFC cluster is included as a member of the cluster quorum; each node has a single vote in determining the overall cluster health, and each node will continuously attempt to establish a quorum.</span></span>  <span data-ttu-id="b7b6c-143">À ce point précis, la discussion du quorum a soigneusement qualifié l'ensemble des nœuds de cluster WSFC qui votent pour déterminer l'intégrité du cluster en tant que *nœuds votants*.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-143">The quorum discussion to this point has carefully qualified the set of WSFC cluster nodes that vote on cluster health as *voting nodes*.</span></span>  
  
 <span data-ttu-id="b7b6c-144">Aucun nœud d'un cluster WSFC ne peut définitivement déterminer seul que le cluster est globalement intègre ou pas.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-144">No individual node in a WSFC cluster can definitively determine that the cluster as a whole is healthy or unhealthy.</span></span>  <span data-ttu-id="b7b6c-145">À tout moment, du point de vue de chaque nœud, certains autres nœuds peuvent sembler être hors connexion, ou en cours de basculement, ou ne pas répondre en raison d'une défaillance de communication réseau.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-145">At any given moment, from the perspective of each node, some of the other nodes may appear to be offline, or appear to be in the process of failover, or appear unresponsive due to a network communication failure.</span></span>  <span data-ttu-id="b7b6c-146">Une fonction principale du vote de quorum consiste à déterminer si l'état apparent de chaque nœud du cluster WSFC correspond à l'état réel du nœud.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-146">A key function of the quorum vote is to determine whether the apparent state of each of node in the WSFC cluster is indeed that actual state of those nodes.</span></span>  
  
 <span data-ttu-id="b7b6c-147">Pour tous les modes de quorum à l’exception de « Disque uniquement », l’efficacité d’un vote de quorum dépend de la fiabilité des communications entre tous les nœuds votants du cluster.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-147">For all of the quorum models except 'Disk Only', the effectiveness of a quorum vote depends on reliable communications between all of the voting nodes in the cluster.</span></span> <span data-ttu-id="b7b6c-148">Les communications réseau entre les nœuds sur le même sous-réseau physique doivent être considérées comme fiables ; le vote du quorum doit être approuvé.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-148">Network communications between nodes on the same physical subnet should be considered reliable; the quorum vote should be trusted.</span></span>  
  
 <span data-ttu-id="b7b6c-149">Toutefois, si un nœud d'un autre sous-réseau est considéré comme non-réactif dans un vote de quorum alors qu'il en ligne et intègre, ceci est probablement dû à une défaillance de communication réseau entre les sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-149">However, if a node on another subnet is seen as non-responsive in a quorum vote, but it is actually online and otherwise healthy, that is most likely due to a network communications failure between subnets.</span></span>  <span data-ttu-id="b7b6c-150">En fonction de la topologie de cluster, du mode de quorum et de la configuration de la stratégie de basculement, l'échec de communication réseau peut effectivement créer plusieurs ensembles (ou sous-ensembles) de nœuds votants.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-150">Depending upon the cluster topology, quorum mode, and failover policy configuration, that network communications failure may effectively create more than one set (or subset) of voting nodes.</span></span>  
  
 <span data-ttu-id="b7b6c-151">Quand plusieurs sous-ensembles de nœuds votants sont en mesure d’établir un quorum par eux-mêmes, on parle de *scénario de fractionnement*.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-151">When more than one subset of voting nodes is able to establish a quorum on its own, that is known as a *split-brain scenario*.</span></span>  <span data-ttu-id="b7b6c-152">Dans ce scénario, les nœuds appartenant à des quorums distincts peuvent se comporter différemment, et être en conflit les uns avec les autres.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-152">In such a scenario, the nodes in the separate quorums may behave differently, and in conflict with one another.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b7b6c-153">Le scénario de fractionnement est uniquement possible lorsqu'un administrateur système procède manuellement à une opération de quorum forcée, ou dans quelques cas très rares, à un basculement forcé, ce qui a pour effet de subdiviser l'ensemble de nœuds du quorum.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-153">The split-brain scenario is only possible when a system administrator manually performs a forced quorum operation, or in very rare circumstances, a forced failover; explicitly subdividing the quorum node set.</span></span>  
  
 <span data-ttu-id="b7b6c-154">Afin de simplifier la configuration de votre quorum et d’augmenter le temps, vous pouvez ajuster le paramètre *NodeWeight* de chaque nœud afin que le vote du nœud ne soit pas comptabilisé dans le quorum.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-154">In order to simplify your quorum configuration and increase up-time, you may want to adjust each node's *NodeWeight* setting so that the node's vote is not counted towards the quorum.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="b7b6c-155">Pour utiliser les paramètres NodeWeight, le correctif logiciel suivant doit être appliqué à tous les serveurs dans le cluster WSFC :</span><span class="sxs-lookup"><span data-stu-id="b7b6c-155">In order to use NodeWeight settings, the following hotfix must be applied to all servers in the WSFC cluster:</span></span>  
>   
>  <span data-ttu-id="b7b6c-156">[KB2494036](https://support.microsoft.com/kb/2494036): un correctif est disponible pour vous permettre de configurer un nœud de cluster qui n’a pas de votes de quorum dans [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] et dans[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b7b6c-156">[KB2494036](https://support.microsoft.com/kb/2494036): A hotfix is available to let you configure a cluster node that does not have quorum votes in [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and in [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]</span></span>  
  
##  <a name="recommended-adjustments-to-quorum-voting"></a><a name="RecommendedAdjustmentstoQuorumVoting"></a> <span data-ttu-id="b7b6c-157">Réglages recommandés pour le vote du quorum</span><span class="sxs-lookup"><span data-stu-id="b7b6c-157">Recommended Adjustments to Quorum Voting</span></span>  
 <span data-ttu-id="b7b6c-158">Lorsque vous activez ou désactivez le vote d’un nœud WSFC donné, respectez les instructions suivantes :</span><span class="sxs-lookup"><span data-stu-id="b7b6c-158">When enabling or disabling a given WSFC node's vote, follow these guidelines:</span></span>  
  
-   <span data-ttu-id="b7b6c-159">**Aucun vote par défaut.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-159">**No vote by default.**</span></span> <span data-ttu-id="b7b6c-160">Imaginons que chaque nœud ne doit pas voter sans justification explicite.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-160">Assume that each node should not vote without explicit justification.</span></span>  
  
-   <span data-ttu-id="b7b6c-161">**Inclure tous les réplicas principaux.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-161">**Include all primary replicas.**</span></span> <span data-ttu-id="b7b6c-162">Chaque nœud WSFC hébergeant un réplica principal de groupe de disponibilité ou qui est le propriétaire par défaut d'une instance de cluster de basculement doit disposer d'un vote.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-162">Each WSFC node that hosts an availability group primary replica or is the preferred owner of an FCI should have a vote.</span></span>  
  
-   <span data-ttu-id="b7b6c-163">**Inclure les propriétaires possibles de basculement automatique.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-163">**Include possible automatic failover owners.**</span></span> <span data-ttu-id="b7b6c-164">Chaque nœud susceptible d'héberger un réplica de disponibilité suite à un basculement automatique du groupe de disponibilité ou d'une instance de cluster de basculement doit disposer d'un vote.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-164">Each node that could host a primary replica, as the result of an automatic availability group failover or FCI failover, should have a vote.</span></span> <span data-ttu-id="b7b6c-165">S'il n'existe qu'un seul groupe de disponibilité dans le cluster WSFC et des réplicas de disponibilité sont hébergés uniquement par des instances autonomes, cette règle inclut uniquement le réplica secondaire qui est la cible du basculement automatique.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-165">If there is only one availability group in the WSFC cluster and availability replicas are hosted only by standalone instances, this rule includes only the secondary replica that is the automatic failover target.</span></span>  
  
-   <span data-ttu-id="b7b6c-166">**Exclure les nœuds de site secondaire.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-166">**Exclude secondary site nodes.**</span></span> <span data-ttu-id="b7b6c-167">En général, n'attribuez pas de vote aux nœuds WSFC résidant sur un site de récupération d'urgence secondaire.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-167">In general, do not give votes to WSFC nodes that reside at a secondary disaster recovery site.</span></span>  <span data-ttu-id="b7b6c-168">Il n'est pas souhaitable que les nœuds du site secondaire puissent contribuer à une décision visant à mettre le cluster hors connexion lorsque le site principal fonctionne correctement.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-168">You do not want nodes in the secondary site to contribute to a decision to take the cluster offline when there is nothing wrong with the primary site.</span></span>  
  
-   <span data-ttu-id="b7b6c-169">**Nombre impair de voix.**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-169">**Odd number of votes.**</span></span> <span data-ttu-id="b7b6c-170">Si nécessaire, ajoutez un partage de fichiers témoin, un nœud témoin ou un disque témoin au cluster et modifiez le mode de quorum de manière à empêcher d'éventuels liens dans le vote du quorum.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-170">If necessary, add a witness file share, a witness node, or a witness disk to the cluster and adjust the quorum mode to prevent possible ties in the quorum vote.</span></span>  
  
-   <span data-ttu-id="b7b6c-171">**Réévaluez les assignations de vote après le basculement**</span><span class="sxs-lookup"><span data-stu-id="b7b6c-171">**Re-assess vote assignments post-failover.**</span></span> <span data-ttu-id="b7b6c-172">Il n'est pas souhaitable de basculer dans une configuration de cluster qui ne prend pas en charge un quorum intègre.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-172">You do not want to fail over into a cluster configuration that does not support a healthy quorum.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="b7b6c-173">Lors de la validation de la configuration de vote du quorum WSFC, l'Assistant Groupe de disponibilité AlwaysOn affiche un avertissement si l'une des conditions suivantes est remplie :</span><span class="sxs-lookup"><span data-stu-id="b7b6c-173">When validating WSFC quorum vote configuration, the AlwaysOn Availability Group Wizard shows a warning if any of the following conditions are true:</span></span>  
> 
>  -   <span data-ttu-id="b7b6c-174">Le nœud de cluster qui héberge le réplica principal n'a pas de vote.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-174">The cluster node that hosts the primary replica does not have a vote</span></span>  
> -   <span data-ttu-id="b7b6c-175">Un réplica secondaire est configuré pour le basculement automatique et le nœud de cluster n'a pas de vote.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-175">A secondary replica is configured for automatic failover and its cluster node does not have a vote.</span></span>  
> -   <span data-ttu-id="b7b6c-176">[KB2494036](https://support.microsoft.com/kb/2494036) n'est pas installé sur tous les nœuds de cluster qui hébergent des réplicas de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-176">[KB2494036](https://support.microsoft.com/kb/2494036) is not installed on all cluster nodes that host availability replicas.</span></span> <span data-ttu-id="b7b6c-177">Ce correctif logiciel est requis pour ajouter ou supprimer des votes pour les nœuds de cluster dans les déploiements multisites.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-177">This patch is required to add or remove votes for cluster nodes in multi-site deployments.</span></span> <span data-ttu-id="b7b6c-178">Toutefois, dans les déploiements sur un seul site, il n'est généralement pas nécessaire et vous pouvez ignorer l'avertissement en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-178">However, in single-site deployments, it is usually not required and you may safely ignore the warning.</span></span>  
> 
> [!TIP]
>  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b7b6c-179">expose plusieurs vues de gestion dynamique (DMV) du système qui peuvent vous aider à gérer la configuration des paramètres du cluster WSFC et le vote du quorum de nœud.</span><span class="sxs-lookup"><span data-stu-id="b7b6c-179">exposes several system dynamic management views (DMVs) that can help you manage settings related WSFC cluster configuration and node quorum voting.</span></span>  
> 
>  <span data-ttu-id="b7b6c-180">Pour plus d’informations, consultez :  [sys.dm_hadr_cluster](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-transact-sql), [sys.dm_hadr_cluster_members](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-members-transact-sql), [sys.dm_os_cluster_nodes](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-nodes-transact-sql), [sys.dm_hadr_cluster_networks](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-networks-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="b7b6c-180">For more information, see:  [sys.dm_hadr_cluster](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-transact-sql), [sys.dm_hadr_cluster_members](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-members-transact-sql), [sys.dm_os_cluster_nodes](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-nodes-transact-sql), [sys.dm_hadr_cluster_networks](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-cluster-networks-transact-sql)</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="b7b6c-181">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="b7b6c-181">Related Tasks</span></span>  
  
-   [<span data-ttu-id="b7b6c-182">Afficher les paramètres NodeWeight pour le quorum de cluster</span><span class="sxs-lookup"><span data-stu-id="b7b6c-182">View Cluster Quorum NodeWeight Settings</span></span>](view-cluster-quorum-nodeweight-settings.md)  
  
-   [<span data-ttu-id="b7b6c-183">Configurer les paramètres NodeWeight pour un quorum de cluster</span><span class="sxs-lookup"><span data-stu-id="b7b6c-183">Configure Cluster Quorum NodeWeight Settings</span></span>](configure-cluster-quorum-nodeweight-settings.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="b7b6c-184">Contenu associé</span><span class="sxs-lookup"><span data-stu-id="b7b6c-184">Related Content</span></span>  
  
-   [<span data-ttu-id="b7b6c-185">Guide de solutions Microsoft SQL Server AlwaysOn pour la haute disponibilité et la récupération d'urgence</span><span class="sxs-lookup"><span data-stu-id="b7b6c-185">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="b7b6c-186">Vérification de la configuration du vote du quorum dans l'Assistant Groupe de disponibilité AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="b7b6c-186">Quorum vote configuration check in AlwaysOn Availability Group Wizards</span></span>](https://blogs.msdn.com/b/sqlalwayson/archive/2012/03/13/quorum-vote-configuration-check-in-alwayson-availability-group-wizards-andy-jing.aspx)  
  
-   <span data-ttu-id="b7b6c-187">[Technologies de Windows Server : clusters de basculement](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="b7b6c-187">[Windows Server Technologies:  Failover Clusters](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span></span>  
  
-   <span data-ttu-id="b7b6c-188">[Guide pas à pas de configuration d'un cluster de basculement : configuration du quorum dans un cluster de basculement](https://technet.microsoft.com/library/cc770620\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="b7b6c-188">[Failover Cluster Step-by-Step Guide: Configuring the Quorum in a Failover Cluster](https://technet.microsoft.com/library/cc770620\(WS.10\).aspx)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b7b6c-189">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b7b6c-189">See Also</span></span>  
 <span data-ttu-id="b7b6c-190">[Récupération d’urgence WSFC par le quorum forcé &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="b7b6c-190">[WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md) </span></span>  
 [<span data-ttu-id="b7b6c-191">Clustering de basculement Windows Server &#40;WSFC&#41; avec SQL Server</span><span class="sxs-lookup"><span data-stu-id="b7b6c-191">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](windows-server-failover-clustering-wsfc-with-sql-server.md)  
  
  
