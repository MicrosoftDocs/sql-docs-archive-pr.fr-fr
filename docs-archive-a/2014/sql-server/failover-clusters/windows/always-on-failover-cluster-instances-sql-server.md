---
title: Instances de cluster de basculement Always On (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- clustering [SQL Server]
- high availability [SQL Server], failover clustering
- virtual servers [SQL Server], about virtual servers
- clusters [SQL Server]
- servers [SQL Server], failover clustering
- resource groups [SQL Server]
- availability [SQL Server]
- failover clustering [SQL Server]
- AlwaysOn [SQL Server], see failover clustering [SQL Server]
ms.assetid: 86a15b33-4d03-4549-8ea2-b45e4f1baad7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 6adc173560fd83d00616eb00c63651ef667c2a00
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87605025"
---
# <a name="always-on-failover-cluster-instances-sql-server"></a><span data-ttu-id="14671-102">Instances de cluster de basculement Always On (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="14671-102">Always On Failover Cluster Instances (SQL Server)</span></span>
  <span data-ttu-id="14671-103">Dans le cadre de l' [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] offre Always on, Always on instances de cluster de basculement tirent parti de la fonctionnalité de clustering de basculement Windows Server (WSFC) pour fournir une haute disponibilité locale grâce à la redondance au niveau de l’instance de serveur, une *instance de cluster de basculement* (FCI).</span><span class="sxs-lookup"><span data-stu-id="14671-103">As part of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Always On offering, Always On Failover Cluster Instances leverages Windows Server Failover Clustering (WSFC) functionality to provide local high availability through redundancy at the server-instance level-a *failover cluster instance* (FCI).</span></span> <span data-ttu-id="14671-104">Une instance FCI est une instance unique de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installée sur plusieurs nœuds WSFC (clustering de basculement Windows Server) et, éventuellement, sur plusieurs sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="14671-104">An FCI is a single instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is installed across Windows Server Failover Clustering (WSFC) nodes and, possibly, across multiple subnets.</span></span> <span data-ttu-id="14671-105">Sur le réseau, une instance de cluster de basculement FCI apparaît en tant qu'instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] s'exécutant sur un ordinateur unique, mais elle permet le basculement d'un nœud WSFC vers un autre en cas d'indisponibilité du nœud actuel.</span><span class="sxs-lookup"><span data-stu-id="14671-105">On the network, an FCI appears to be an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] running on a single computer, but the FCI provides failover from one WSFC node to another if the current node becomes unavailable.</span></span>  
  
 <span data-ttu-id="14671-106">Une instance FCI peut tirer parti des [groupes de disponibilité Always On](../../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) pour permettre la récupération d’urgence à distance au niveau de la base de données.</span><span class="sxs-lookup"><span data-stu-id="14671-106">An FCI can leverage [Always On Availability Groups](../../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md)to provide remote disaster recovery at the database level.</span></span> <span data-ttu-id="14671-107">Pour plus d’informations, consultez [Clustering de basculement et groupes de disponibilité Always On (;SQL Server);](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="14671-107">For more information, see [Failover Clustering and Always On Availability Groups (;SQL Server);](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="14671-108">À compter de [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], les instances de cluster de basculement Always On prennent en charge les volumes partagés de cluster dans [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] et [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="14671-108">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], Always On Failover Cluster Instances supports Clustered Shared Volumes (CSV) in both [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] and [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span></span> <span data-ttu-id="14671-109">Pour plus d'informations sur les volumes partagés de cluster, consultez [Présentation des volumes partagés de cluster dans un cluster de basculement](https://technet.microsoft.com/library/dd759255.aspx).</span><span class="sxs-lookup"><span data-stu-id="14671-109">For more information on CSV, see [Understanding Cluster Shared Volumes in a Failover Cluster](https://technet.microsoft.com/library/dd759255.aspx).</span></span>  
  
 <span data-ttu-id="14671-110">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="14671-110">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="14671-111">Avantages</span><span class="sxs-lookup"><span data-stu-id="14671-111">Benefits</span></span>](#Benefits)  
  
-   [<span data-ttu-id="14671-112">Recommandations</span><span class="sxs-lookup"><span data-stu-id="14671-112">Recommendations</span></span>](#Recommendations)  
  
-   [<span data-ttu-id="14671-113">Vue d'ensemble d'une instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-113">Failover Cluster Instance Overview</span></span>](#Overview)  
  
-   [<span data-ttu-id="14671-114">Éléments d'une instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-114">Elements of a Failover Cluster Instance</span></span>](#FCIelements)  
  
-   [<span data-ttu-id="14671-115">Concepts et tâches de basculement SQL Server</span><span class="sxs-lookup"><span data-stu-id="14671-115">SQL Server Failover Concepts and Tasks</span></span>](#ConceptsAndTasks)  
  
-   [<span data-ttu-id="14671-116">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="14671-116">Related Topics</span></span>](#RelatedTopics)  
  
##  <a name="benefits-of-a-failover-cluster-instance"></a><a name="Benefits"></a><span data-ttu-id="14671-117">Avantages d’une instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-117">Benefits of a Failover Cluster Instance</span></span>  
 <span data-ttu-id="14671-118">En cas de défaillance matérielle ou logicielle d'un serveur, les applications ou les clients qui se connectent au serveur font face à un temps mort.</span><span class="sxs-lookup"><span data-stu-id="14671-118">When there is hardware or software failure of a server, the applications or clients connecting to the server will experience downtime.</span></span> <span data-ttu-id="14671-119">Lorsqu'une instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] est configurée pour être une instance FCI (au lieu d'une instance autonome), la haute disponibilité de cette instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] est protégée par la présence de nœuds redondants dans l'instance FCI.</span><span class="sxs-lookup"><span data-stu-id="14671-119">When a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is configured to be an FCI (instead of a standalone instance), the high availability of that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is protected by the presence of redundant nodes in the FCI.</span></span> <span data-ttu-id="14671-120">Un seul des nœuds de l'instance FCI possède le groupe de ressources WSFC à la fois.</span><span class="sxs-lookup"><span data-stu-id="14671-120">Only one of the nodes in the FCI owns the WSFC resource group at a time.</span></span> <span data-ttu-id="14671-121">En cas de défaillances (défaillances matérielles, défaillances du système d'exploitation, d'une application ou d'un service) ou lors d'une mise à niveau planifiée, la propriété du groupe de ressources est transférée vers un autre nœud WSFC.</span><span class="sxs-lookup"><span data-stu-id="14671-121">In case of a failure (hardware failures, operating system failures, application or service failures), or a planned upgrade, the resource group ownership is moved to another WSFC node.</span></span> <span data-ttu-id="14671-122">Ce processus est transparent pour un client ou une application se connectant à [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , ce qui permet de réduire les temps morts auxquels font face l'application ou les clients lors d'une défaillance.</span><span class="sxs-lookup"><span data-stu-id="14671-122">This process is transparent to the client or application connecting to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and this minimize the downtime the application or clients experience during a failure.</span></span> <span data-ttu-id="14671-123">Les listes suivantes répertorient certains des avantages clés des instances de cluster de basculement [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="14671-123">The following lists some key benefits that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instances provide:</span></span>  
  
-   <span data-ttu-id="14671-124">Protection au niveau de l'instance par redondance</span><span class="sxs-lookup"><span data-stu-id="14671-124">Protection at the instance level through redundancy</span></span>  
  
-   <span data-ttu-id="14671-125">Basculement automatique en cas de défaillances (défaillances matérielles, défaillances du système d'exploitation, d'une application ou d'un service)</span><span class="sxs-lookup"><span data-stu-id="14671-125">Automatic failover in the event of a failure (hardware failures, operating system failures, application or service failures)</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="14671-126">Dans un groupe de disponibilité Always On, le basculement automatique depuis une instance FCI vers d’autres nœuds au sein du groupe de disponibilité n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="14671-126">In an Always On availability group, automatic failover from an FCI to other nodes within the availability group is not supported.</span></span> <span data-ttu-id="14671-127">Cela signifie que les instances FCI et les nœuds autonomes ne doivent pas être associés dans un groupe de disponibilité si le basculement automatique est un composant important de votre solution haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="14671-127">This means that FCIs and standalone nodes should not be coupled together within an availability group if automatic failover is an important component your high availability solution.</span></span> <span data-ttu-id="14671-128">Toutefois, cette association peut être effectuée pour votre solution de *récupération d'urgence* .</span><span class="sxs-lookup"><span data-stu-id="14671-128">However, this coupling can be made for your *disaster recovery* solution.</span></span>  
  
-   <span data-ttu-id="14671-129">Prise en charge d'une vaste gamme de solutions de stockage, y compris les disques de cluster WSFC (iSCSI, Fiber Channel, etc.) et les partages de fichiers de protocole SMB.</span><span class="sxs-lookup"><span data-stu-id="14671-129">Support for a broad array of storage solutions, including WSFC cluster disks (iSCSI, Fiber Channel, and so on) and server message block (SMB) file shares.</span></span>  
  
-   <span data-ttu-id="14671-130">Solution de récupération d’urgence à l’aide d’une instance FCI à plusieurs sous-réseaux ou exécutant une base de données hébergée par l’instance FCI au sein d’un groupe de disponibilité Always On.</span><span class="sxs-lookup"><span data-stu-id="14671-130">Disaster recovery solution using a multi-subnet FCI or running an FCI-hosted database inside an Always On availability group.</span></span> <span data-ttu-id="14671-131">Avec la nouvelle prise en charge de plusieurs sous-réseaux dans [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], une instance FCI à plusieurs sous-réseaux ne requiert plus un réseau local virtuel, ce qui augmente la facilité de gestion et la sécurité d’une telle instance.</span><span class="sxs-lookup"><span data-stu-id="14671-131">With the new multi-subnet support in [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], a multi-subnet FCI no longer requires a virtual LAN, increasing the manageability and security of a multi-subnet FCI.</span></span>  
  
-   <span data-ttu-id="14671-132">Absence de reconfiguration des applications et des clients pendant les basculements</span><span class="sxs-lookup"><span data-stu-id="14671-132">Zero reconfiguration of applications and clients during failovers</span></span>  
  
-   <span data-ttu-id="14671-133">Stratégie flexible de basculement pour les événements déclencheurs granulaires dans le cas de basculements automatiques</span><span class="sxs-lookup"><span data-stu-id="14671-133">Flexible failover policy for granular trigger events for automatic failovers</span></span>  
  
-   <span data-ttu-id="14671-134">Basculements fiables par la détection périodique et détaillée de l'intégrité à l'aide de connexions dédiées et persistantes</span><span class="sxs-lookup"><span data-stu-id="14671-134">Reliable failovers through periodic and detailed health detection using dedicated and persisted connections</span></span>  
  
-   <span data-ttu-id="14671-135">Possibilité de configuration et de prévision de la durée de basculement via des points de contrôle d'arrière-plan indirects</span><span class="sxs-lookup"><span data-stu-id="14671-135">Configurability and predictability in failover time through indirect background checkpoints</span></span>  
  
-   <span data-ttu-id="14671-136">Utilisation des ressources limitée au cours des basculements</span><span class="sxs-lookup"><span data-stu-id="14671-136">Throttled resource usage during failovers</span></span>  
  
##  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="14671-137">Recommandations</span><span class="sxs-lookup"><span data-stu-id="14671-137">Recommendations</span></span>  
 <span data-ttu-id="14671-138">Dans un environnement de production, nous recommandons d'utiliser des adresses IP statiques en association avec l'adresse IP virtuelle d'une instance de cluster de basculement.</span><span class="sxs-lookup"><span data-stu-id="14671-138">In a production environment, we recommend that you use static IP addresses in conjunction the virtual IP address of a Failover Cluster Instance.</span></span>  <span data-ttu-id="14671-139">Nous déconseillons d'utiliser DHCP dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="14671-139">We recommend against using DHCP in a production environment.</span></span> <span data-ttu-id="14671-140">En cas d'arrêt du système, si le bail IP DHCP expire, il faudra consacrer du temps supplémentaire pour réinscrire la nouvelle adresse IP DHCP associée au nom DNS.</span><span class="sxs-lookup"><span data-stu-id="14671-140">In the event of down time, if the DHCP IP lease expires, extra time is required to re-register the new DHCP IP address associated with the DNS name.</span></span>  
  
##  <a name="failover-cluster-instance-overview"></a><a name="Overview"></a><span data-ttu-id="14671-141">Présentation de l’instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-141">Failover Cluster Instance Overview</span></span>  
 <span data-ttu-id="14671-142">Une instance FCI s'exécute dans un groupe de ressources WSFC avec un ou plusieurs nœuds WSFC.</span><span class="sxs-lookup"><span data-stu-id="14671-142">An FCI runs in a WSFC resource group with one or more WSFC nodes.</span></span> <span data-ttu-id="14671-143">Au démarrage de l'instance FCI, l'un des nœuds suppose la propriété du groupe de ressources et met son instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en ligne.</span><span class="sxs-lookup"><span data-stu-id="14671-143">When the FCI starts up, one of the nodes assume ownership of the resource group and brings its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance online.</span></span> <span data-ttu-id="14671-144">Les ressources détenues par ce nœud sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="14671-144">The resources owned by this node include:</span></span>  
  
-   <span data-ttu-id="14671-145">Nom du réseau</span><span class="sxs-lookup"><span data-stu-id="14671-145">Network name</span></span>  
  
-   <span data-ttu-id="14671-146">Adresse IP</span><span class="sxs-lookup"><span data-stu-id="14671-146">IP address</span></span>  
  
-   <span data-ttu-id="14671-147">Disques partagés</span><span class="sxs-lookup"><span data-stu-id="14671-147">Shared disks</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="14671-148">Service Moteur de base de données</span><span class="sxs-lookup"><span data-stu-id="14671-148">Database Engine service</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="14671-149">Service Agent</span><span class="sxs-lookup"><span data-stu-id="14671-149">Agent service</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="14671-150">Analysis Services, s'il est installé</span><span class="sxs-lookup"><span data-stu-id="14671-150">Analysis Services service, if installed</span></span>  
  
-   <span data-ttu-id="14671-151">Une ressource de partage de fichiers, si la fonctionnalité FILESTREAM est installée</span><span class="sxs-lookup"><span data-stu-id="14671-151">One file share resource, if the FILESTREAM feature is installed</span></span>  
  
 <span data-ttu-id="14671-152">À un moment donné, seul le propriétaire du groupe de ressources (et aucun autre nœud de l'instance FCI) exécute ses services [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] respectifs dans le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="14671-152">At any time, only the resource group owner (and no other node in the FCI) is running its respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services in the resource group.</span></span> <span data-ttu-id="14671-153">En cas de basculement, qu'il s'agisse d'un basculement automatique ou d'un basculement planifié, la séquence d'événements suivante se produit :</span><span class="sxs-lookup"><span data-stu-id="14671-153">When a failover occurs, whether it be an automatic failover or a planned failover, the following sequence of events happen:</span></span>  
  
1.  <span data-ttu-id="14671-154">Sauf en cas de défaillance du système ou du matériel, toutes les pages de modifications dans le cache de tampons sont écrites sur le disque.</span><span class="sxs-lookup"><span data-stu-id="14671-154">Unless a hardware or system failure occurs, all dirty pages in the buffer cache are written to disk.</span></span>  
  
2.  <span data-ttu-id="14671-155">Tous les services [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] respectifs du groupe de ressources sont arrêtés sur le nœud actif.</span><span class="sxs-lookup"><span data-stu-id="14671-155">All respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services in the resource group are stopped on the active node.</span></span>  
  
3.  <span data-ttu-id="14671-156">La propriété du groupe de ressources est transférée vers un autre nœud de l'instance FCI.</span><span class="sxs-lookup"><span data-stu-id="14671-156">The resource group ownership is transferred to another node in the FCI.</span></span>  
  
4.  <span data-ttu-id="14671-157">Le nouveau propriétaire du groupe de ressources démarre ses services [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="14671-157">The new resource group owner starts its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services.</span></span>  
  
5.  <span data-ttu-id="14671-158">Les demandes de connexion de l'application cliente sont automatiquement dirigées vers le nouveau nœud actif à l'aide du même nom de réseau virtuel (VNN).</span><span class="sxs-lookup"><span data-stu-id="14671-158">Client application connection requests are automatically directed to the new active node using the same virtual network name (VNN).</span></span>  
  
 <span data-ttu-id="14671-159">L'instance FCI reste en ligne tant que son cluster WSFC sous-jacent présente une intégrité de quorum satisfaisante (la majorité des nœuds de quorum WSFC est disponible en tant que cibles de basculement automatique).</span><span class="sxs-lookup"><span data-stu-id="14671-159">The FCI is online as long as its underlying WSFC cluster is in good quorum health (the majority of the quorum WSFC nodes are available as automatic failover targets).</span></span> <span data-ttu-id="14671-160">Lorsque le cluster WSFC perd son quorum, soit en raison d'une défaillance du matériel, du logiciel ou du réseau, soit à cause d'une configuration de quorum inappropriée, l'intégralité du cluster WSFC, ainsi que l'instance FCI, sont mis hors connexion.</span><span class="sxs-lookup"><span data-stu-id="14671-160">When the WSFC cluster loses its quorum, whether due to hardware, software, network failure, or improper quorum configuration, the entire WSFC cluster, along with the FCI, is brought offline.</span></span> <span data-ttu-id="14671-161">Une intervention manuelle est alors requise dans ce scénario de basculement non planifié afin de rétablir le quorum dans les nœuds disponibles restants et de remettre le cluster WSFC et l'instance FCI en ligne.</span><span class="sxs-lookup"><span data-stu-id="14671-161">Manual intervention is then required in this unplanned failover scenario to reestablish quorum in the remaining available nodes in order to bring the WSFC cluster and FCI back online.</span></span> <span data-ttu-id="14671-162">Pour plus d’informations, consultez [modes de quorum WSFC et configuration de vote (; SQL Server);](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="14671-162">For more information, see [WSFC Quorum Modes and Voting Configuration (;SQL Server);](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
### <a name="predictable-failover-time"></a><span data-ttu-id="14671-163">Durée de basculement prévisible</span><span class="sxs-lookup"><span data-stu-id="14671-163">Predictable Failover Time</span></span>  
 <span data-ttu-id="14671-164">Selon le moment auquel votre instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] a exécuté pour la dernière fois une opération de point de contrôle, le cache de tampons peut renfermer une quantité substantielle de pages de modifications.</span><span class="sxs-lookup"><span data-stu-id="14671-164">Depending on when your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance last performed a checkpoint operation, there can be a substantial amount of dirty pages in the buffer cache.</span></span> <span data-ttu-id="14671-165">Par conséquent, les basculements durent aussi longtemps que nécessaire pour écrire les pages de modifications restantes sur le disque, opération qui peut provoquer une durée de basculement longue et imprévisible.</span><span class="sxs-lookup"><span data-stu-id="14671-165">Consequently, failovers last as long as it takes to write the remaining dirty pages to disk, which can lead to long and unpredictable failover time.</span></span> <span data-ttu-id="14671-166">À compter de [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], l’instance FCI peut utiliser des points de contrôle indirects pour limiter la quantité de pages de modifications conservées dans le cache des tampons.</span><span class="sxs-lookup"><span data-stu-id="14671-166">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the FCI can use indirect checkpoints to throttle the amount of dirty pages kept in the buffer cache.</span></span> <span data-ttu-id="14671-167">Même si cette opération consomme des ressources supplémentaires avec une charge de travail normale, elle rend la durée de basculement plus prévisible et plus facile à configurer.</span><span class="sxs-lookup"><span data-stu-id="14671-167">While this does consume additional resources under regular workload, it makes the failover time more predictable as well as more configurable.</span></span> <span data-ttu-id="14671-168">Cela s'avère très utile lorsque le contrat de niveau de service de votre organisation spécifie un objectif de durée maximale d'interruption admissible (RTO, Recovery Time Objective) pour votre solution haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="14671-168">This is very useful when the service-level agreement in your organization specifies the recovery time objective (RTO) for your high availability solution.</span></span> <span data-ttu-id="14671-169">Pour plus d'informations sur les points de contrôle indirects, consultez [Indirect Checkpoints](../../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt).</span><span class="sxs-lookup"><span data-stu-id="14671-169">For more information on indirect checkpoints, see [Indirect Checkpoints](../../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt).</span></span>  
  
### <a name="reliable-health-monitoring-and-flexible-failover-policy"></a><span data-ttu-id="14671-170">Contrôle d'intégrité fiable et stratégie flexible de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-170">Reliable Health Monitoring and Flexible Failover Policy</span></span>  
 <span data-ttu-id="14671-171">Après le démarrage réussi de l'instance FCI, le service WSFC surveille à la fois l'intégrité du cluster WSFC sous-jacent, ainsi que l'intégrité de l'instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="14671-171">After the FCI starts successfully, the WSFC service monitors both the health of the underlying WSFC cluster, as well as the health of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="14671-172">À compter de [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], le service WSFC utilise une connexion dédiée pour interroger l’instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] active en vue d’un diagnostic de composant détaillé via une procédure stockée système.</span><span class="sxs-lookup"><span data-stu-id="14671-172">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)][!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the WSFC service uses a dedicated connection to poll the active [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance for detailed component diagnostics through a system stored procedure.</span></span> <span data-ttu-id="14671-173">Son implication est triple :</span><span class="sxs-lookup"><span data-stu-id="14671-173">The implication of this is three-fold:</span></span>  
  
-   <span data-ttu-id="14671-174">La connexion dédiée à l'instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] permet d'interroger de manière fiable le diagnostic de composant à tout moment, même lorsque l'instance FCI est soumise à une charge importante.</span><span class="sxs-lookup"><span data-stu-id="14671-174">The dedicated connection to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance makes it possible to reliably poll for component diagnostics all the time, even when the FCI is under heavy load.</span></span> <span data-ttu-id="14671-175">Cela permet de distinguer un système dont la charge est importante d'un système qui présente réellement des conditions d'échec, ce qui empêche la survenue de problèmes tels que les basculements inappropriés.</span><span class="sxs-lookup"><span data-stu-id="14671-175">This makes it possible to distinguish between a system that is under heavy load and a system that actually has failure conditions, thus preventing issues such as false failovers.</span></span>  
  
-   <span data-ttu-id="14671-176">Le diagnostic de composant détaillé permet de configurer une stratégie de basculement plus souple, dans laquelle vous pouvez choisir les conditions d'échec qui déclenchent des basculements.</span><span class="sxs-lookup"><span data-stu-id="14671-176">The detailed component diagnostics makes it possible to configure a more flexible failover policy, whereby you can choose what failure conditions trigger failovers and which failure conditions do not.</span></span>  
  
-   <span data-ttu-id="14671-177">Le diagnostic de composant détaillé permet également rétroactivement un meilleur dépannage des basculements automatiques.</span><span class="sxs-lookup"><span data-stu-id="14671-177">The detailed component diagnostics also enables better troubleshooting of automatic failovers retroactively.</span></span> <span data-ttu-id="14671-178">Les informations de diagnostic sont stockées dans les fichiers journaux, qui sont colocalisés avec les journaux d'erreurs de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="14671-178">The diagnostic information is stored to log files, which are collocated with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] error logs.</span></span> <span data-ttu-id="14671-179">Vous pouvez les charger dans la Visionneuse du fichier journal afin d'examiner les états de composant qui mènent à la survenue d'un basculement et d'en déterminer la cause.</span><span class="sxs-lookup"><span data-stu-id="14671-179">You can load them into the Log File Viewer to inspect the component states leading up to the failover occurrence in order to determine what cause that failover.</span></span>  
  
 <span data-ttu-id="14671-180">Pour plus d’informations, consultez [stratégie de basculement pour les instances de cluster de basculement](failover-policy-for-failover-cluster-instances.md)</span><span class="sxs-lookup"><span data-stu-id="14671-180">For more information, see [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md)</span></span>  
  
##  <a name="elements-of-a-failover-cluster-instance"></a><a name="FCIelements"></a><span data-ttu-id="14671-181">Éléments d’une instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-181">Elements of a Failover Cluster Instance</span></span>  
 <span data-ttu-id="14671-182">Une instance FCI se compose d'un ensemble de serveurs physiques (nœuds) qui présentent une configuration matérielle similaire, ainsi qu'une configuration logicielle identique qui inclut la version du système d'exploitation et le niveau de correctif, la version de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , le niveau de correctif, les composants et le nom de l'instance.</span><span class="sxs-lookup"><span data-stu-id="14671-182">An FCI consists of a set of physical servers (nodes) that contain similar hardware configuration as well as identical software configuration that includes operating system version and patch level, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] version, patch level, components, and instance name.</span></span> <span data-ttu-id="14671-183">Une configuration logicielle identique est nécessaire pour garantir le fonctionnement intégral de l'instance FCI au moment du basculement entre les nœuds.</span><span class="sxs-lookup"><span data-stu-id="14671-183">Identical software configuration is necessary to ensure that the FCI can be fully functional as it fails over between the nodes.</span></span>  
  
 <span data-ttu-id="14671-184">Groupe de ressources WSFC</span><span class="sxs-lookup"><span data-stu-id="14671-184">WSFC Resource Group</span></span>  
 <span data-ttu-id="14671-185">Une instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI s'exécute dans un groupe de ressources WSFC.</span><span class="sxs-lookup"><span data-stu-id="14671-185">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI runs in a WSFC resource group.</span></span> <span data-ttu-id="14671-186">Chaque nœud du groupe de ressources conserve une copie synchronisée des paramètres de configuration, ainsi que les clés de Registre ayant fait l'objet d'un point de contrôle, pour garantir la fonctionnalité complète de l'instance FCI suite à un basculement. Seul un des nœuds du cluster possède le groupe de ressources à la fois (nœud actif).</span><span class="sxs-lookup"><span data-stu-id="14671-186">Each node in the resource group maintains a synchronized copy of the configuration settings and check-pointed registry keys to ensure full functionality of the FCI after a failover, and only one of the nodes in the cluster owns the resource group at a time (the active node).</span></span> <span data-ttu-id="14671-187">Le service WSFC gère le cluster de serveurs, la configuration de quorum, la stratégie de basculement et les opérations de basculement, ainsi que les adresses IP virtuelles et le nom VNN de l'instance FCI.</span><span class="sxs-lookup"><span data-stu-id="14671-187">The WSFC service manages the server cluster, quorum configuration, failover policy, and failover operations, as well as the VNN and virtual IP addresses for the FCI.</span></span> <span data-ttu-id="14671-188">En cas de défaillances (défaillances matérielles, défaillances du système d'exploitation, d'une application ou d'un service) ou lors d'une mise à niveau planifiée, la propriété du groupe de ressources est transférée vers un autre nœud de l'instance FCI. Le nombre de nœuds pris en charge dans un groupe de ressources WSFC dépend de l'édition de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="14671-188">In case of a failure (hardware failures, operating system failures, application or service failures) or a planned upgrade, the resource group ownership is moved to another node in the FCI.The number of nodes that are supported in a WSFC resource group depends on your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] edition.</span></span> <span data-ttu-id="14671-189">De plus, le même cluster WSFC peut exécuter plusieurs instances FCI (plusieurs groupes de ressources), selon la capacité du matériel, notamment le processeur, la mémoire et le nombre de disques.</span><span class="sxs-lookup"><span data-stu-id="14671-189">Also, the same WSFC cluster can run multiple FCIs (multiple resource groups), depending on your hardware capacity, such as CPUs, memory, and number of disks.</span></span>  
  
 <span data-ttu-id="14671-190">Binaires de SQL Server</span><span class="sxs-lookup"><span data-stu-id="14671-190">SQL Server Binaries</span></span>  
 <span data-ttu-id="14671-191">Les binaires de produit sont installés localement sur chaque nœud de l'instance FCI, un processus similaire aux installations autonomes de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="14671-191">The product binaries are installed locally on each node of the FCI, a process similar to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] stand-alone installations.</span></span> <span data-ttu-id="14671-192">Toutefois, lors du démarrage, les services ne sont pas démarrés automatiquement ; ils sont gérés par WSFC.</span><span class="sxs-lookup"><span data-stu-id="14671-192">However, during startup, the services are not started automatically, but managed by WSFC.</span></span>  
  
 <span data-ttu-id="14671-193">Stockage</span><span class="sxs-lookup"><span data-stu-id="14671-193">Storage</span></span>  
 <span data-ttu-id="14671-194">Contrairement au groupe de disponibilité Always On, une instance FCI doit utiliser le stockage partagé entre tous les nœuds de l’instance FCI pour le stockage des journaux et des bases de données.</span><span class="sxs-lookup"><span data-stu-id="14671-194">Contrary to the Always On availability group, an FCI must use shared storage between all nodes of the FCI for database and log storage.</span></span> <span data-ttu-id="14671-195">Le stockage partagé peut se présenter sous forme de disques de cluster WSFC, de disques sur un réseau SAN ou de partages de fichiers sur un serveur SMB.</span><span class="sxs-lookup"><span data-stu-id="14671-195">The shared storage can be in the form of WSFC cluster disks, disks on a SAN, or file shares on an SMB.</span></span> <span data-ttu-id="14671-196">De cette façon, tous les nœuds de l'instance FCI ont la même vue des données d'instance lors d'un basculement.</span><span class="sxs-lookup"><span data-stu-id="14671-196">This way, all nodes in the FCI have the same view of instance data whenever a failover occurs.</span></span> <span data-ttu-id="14671-197">Cela signifie, toutefois, que le stockage partagé présente le risque d'être l'unique point de défaillance et que l'instance FCI dépend de la solution de stockage sous-jacente pour assurer la protection des données.</span><span class="sxs-lookup"><span data-stu-id="14671-197">This does mean, however, that the shared storage has the potential of being the single point of failure, and FCI depends on the underlying storage solution to ensure data protection.</span></span>  
  
 <span data-ttu-id="14671-198">Nom de réseau</span><span class="sxs-lookup"><span data-stu-id="14671-198">Network Name</span></span>  
 <span data-ttu-id="14671-199">Le nom de réseau virtuel (VNN) de l'instance FCI fournit un point de connexion unifié pour l'instance FCI.</span><span class="sxs-lookup"><span data-stu-id="14671-199">The VNN for the FCI provides a unified connection point for the FCI.</span></span> <span data-ttu-id="14671-200">Cela permet aux applications de se connecter au VNN sans avoir besoin de connaître le nœud actif.</span><span class="sxs-lookup"><span data-stu-id="14671-200">This allows applications to connect to the VNN without the need to know the currently active node.</span></span> <span data-ttu-id="14671-201">Lorsqu'un basculement se produit, le VNN est inscrit sur le nouveau nœud actif après son démarrage.</span><span class="sxs-lookup"><span data-stu-id="14671-201">When a failover occurs, the VNN is registered to the new active node after it starts.</span></span> <span data-ttu-id="14671-202">Ce processus est transparent pour un client ou une application se connectant à [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , ce qui permet de réduire les temps morts auxquels font face l'application ou les clients lors d'une défaillance.</span><span class="sxs-lookup"><span data-stu-id="14671-202">This process is transparent to the client or application connecting to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and this minimize the downtime the application or clients experience during a failure.</span></span>  
  
 <span data-ttu-id="14671-203">Adresses IP virtuelles</span><span class="sxs-lookup"><span data-stu-id="14671-203">Virtual IPs</span></span>  
 <span data-ttu-id="14671-204">Dans le cas d'une instance FCI à plusieurs sous-réseaux, une adresse IP virtuelle est affectée à chaque sous-réseau au sein de l'instance FCI.</span><span class="sxs-lookup"><span data-stu-id="14671-204">In the case of a multi-subnet FCI, a virtual IP address is assigned to each subnet in the FCI.</span></span> <span data-ttu-id="14671-205">Durant un basculement, le VNN sur le serveur DNS est mis à jour pour indiquer l'adresse IP virtuelle du sous-réseau respectif.</span><span class="sxs-lookup"><span data-stu-id="14671-205">During a failover, the VNN on the DNS server is updated to point to the virtual IP address for the respective subnet.</span></span> <span data-ttu-id="14671-206">Les applications et les clients peuvent ensuite se connecter à l'instance FCI à l'aide du même nom VNN après un basculement de plusieurs sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="14671-206">Applications and clients can then connect to the FCI using the same VNN after a multi-subnet failover.</span></span>  
  
##  <a name="sql-server-failover-concepts-and-tasks"></a><a name="ConceptsAndTasks"></a><span data-ttu-id="14671-207">Concepts et tâches de basculement SQL Server</span><span class="sxs-lookup"><span data-stu-id="14671-207">SQL Server Failover Concepts and Tasks</span></span>  
  
|<span data-ttu-id="14671-208">Concepts et tâches</span><span class="sxs-lookup"><span data-stu-id="14671-208">Concepts and Tasks</span></span>|<span data-ttu-id="14671-209">Rubrique</span><span class="sxs-lookup"><span data-stu-id="14671-209">Topic</span></span>|  
|------------------------|-----------|  
|<span data-ttu-id="14671-210">Décrit le mécanisme de détection de pannes et la stratégie flexible de basculement.</span><span class="sxs-lookup"><span data-stu-id="14671-210">Describes the failure detection mechanism and the flexible failover policy.</span></span>|[<span data-ttu-id="14671-211">Failover Policy for Failover Cluster Instances</span><span class="sxs-lookup"><span data-stu-id="14671-211">Failover Policy for Failover Cluster Instances</span></span>](failover-policy-for-failover-cluster-instances.md)|  
|<span data-ttu-id="14671-212">Décrit les concepts dans l'administration et la maintenance de l'instance FCI.</span><span class="sxs-lookup"><span data-stu-id="14671-212">Describes concepts in FCI administration and maintenance.</span></span>|[<span data-ttu-id="14671-213">Administration et maintenance de l'instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="14671-213">Failover Cluster Instance Administration and Maintenance</span></span>](failover-cluster-instance-administration-and-maintenance.md)|  
|<span data-ttu-id="14671-214">Décrit la configuration de sous-réseaux multiples et les concepts associés</span><span class="sxs-lookup"><span data-stu-id="14671-214">Describes multi-subnet configuration and concepts</span></span>|[<span data-ttu-id="14671-215">SQL Server le clustering de sous-réseaux multiples (; SQL Server);</span><span class="sxs-lookup"><span data-stu-id="14671-215">SQL Server Multi-Subnet Clustering (;SQL Server);</span></span>](sql-server-multi-subnet-clustering-sql-server.md)|  
  
##  <a name="related-topics"></a><a name="RelatedTopics"></a><span data-ttu-id="14671-216">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="14671-216">Related Topics</span></span>  
  
|<span data-ttu-id="14671-217">**Descriptions des rubriques**</span><span class="sxs-lookup"><span data-stu-id="14671-217">**Topic descriptions**</span></span>|<span data-ttu-id="14671-218">**Rubrique**</span><span class="sxs-lookup"><span data-stu-id="14671-218">**Topic**</span></span>|  
|----------------------------|---------------|  
|<span data-ttu-id="14671-219">Décrit comment installer une nouvelle instance FCI [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="14671-219">Describes how to install a new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI.</span></span>|[<span data-ttu-id="14671-220">Créer un cluster de basculement SQL Server (; Programme d’installation);</span><span class="sxs-lookup"><span data-stu-id="14671-220">Create a New SQL Server Failover Cluster (;Setup);</span></span>](../install/create-a-new-sql-server-failover-cluster-setup.md)|  
|<span data-ttu-id="14671-221">Explique comment effectuer une mise à niveau vers un cluster de basculement [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="14671-221">Describes how to upgrade to a [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] failover cluster.</span></span>|[<span data-ttu-id="14671-222">Mettre à niveau un cluster de basculement SQL Server</span><span class="sxs-lookup"><span data-stu-id="14671-222">Upgrade a SQL Server Failover Cluster</span></span>](upgrade-a-sql-server-failover-cluster-instance.md)|  
|<span data-ttu-id="14671-223">Décrit les concepts de clustering de basculement Windows et fournit des liens vers les tâches liées au clustering de basculement Windows.</span><span class="sxs-lookup"><span data-stu-id="14671-223">Describes Windows Failover Clustering Concepts and provides links to tasks related to Windows Failover Clustering</span></span>|[!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]<span data-ttu-id="14671-224">: [Vue d’ensemble des clusters de basculement](https://go.microsoft.com/fwlink/?LinkId=177878)</span><span class="sxs-lookup"><span data-stu-id="14671-224">: [Overview of Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=177878)</span></span><br /><br /> [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]<span data-ttu-id="14671-225">R2 : [Présentation des clusters de basculement](https://go.microsoft.com/fwlink/?LinkId=177879)</span><span class="sxs-lookup"><span data-stu-id="14671-225">R2: [Overview of Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=177879)</span></span>|  
|<span data-ttu-id="14671-226">Décrit les différences de concepts entre les nœuds dans une instance FCI et les réplicas au sein d'un groupe de disponibilité, ainsi que les éléments à prendre en compte pour utiliser une instance FCI pour héberger un réplica pour un groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="14671-226">Describes the distinctions in concepts between nodes in an FCI and replicas within an availability group and considerations for using an FCI to host a replica for an availability group.</span></span>|[<span data-ttu-id="14671-227">Clustering de basculement et groupes de disponibilité Always On (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="14671-227">Failover Clustering and Always On Availability Groups (SQL Server)</span></span>](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md)|  
  
  
