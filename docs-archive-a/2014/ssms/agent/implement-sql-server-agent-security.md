---
title: Implémenter la sécurité de SQL Server Agent | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, security
- security [SQL Server Agent], about security
- security [SQL Server Agent]
- security [SQL Server], SQL Server Agent
ms.assetid: d770d35c-c8de-4e00-9a85-7d03f45a0f0d
author: stevestein
ms.author: sstein
ms.openlocfilehash: 8b70449ace66d4e33a547eca1c0b19eafabde5a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87699215"
---
# <a name="implement-sql-server-agent-security"></a><span data-ttu-id="c69b7-102">Implémenter la sécurité de l'Agent SQL Server</span><span class="sxs-lookup"><span data-stu-id="c69b7-102">Implement SQL Server Agent Security</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c69b7-103">Agent permet à l’administrateur de la base de données d’exécuter chaque étape de travail dans un contexte de sécurité qui a uniquement les autorisations requises pour effectuer cette étape, ce qui est déterminé par un proxy [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="c69b7-103">Agent lets the database administrator run each job step in a security context that has only the permissions required to perform that job step, which is determined by a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy.</span></span> <span data-ttu-id="c69b7-104">Pour définir des autorisations pour une étape de travail particulière, créez un proxy possédant les autorisations requises, puis assignez ce proxy à l'étape de travail.</span><span class="sxs-lookup"><span data-stu-id="c69b7-104">To set the permissions for a particular job step, you create a proxy that has the required permissions and then assign that proxy to the job step.</span></span> <span data-ttu-id="c69b7-105">Un proxy peut être spécifié pour plusieurs étapes de travail.</span><span class="sxs-lookup"><span data-stu-id="c69b7-105">A proxy can be specified for more than one job step.</span></span> <span data-ttu-id="c69b7-106">Pour les étapes de travail qui requièrent les mêmes autorisations, vous utilisez le même proxy.</span><span class="sxs-lookup"><span data-stu-id="c69b7-106">For job steps that require the same permissions, you use the same proxy.</span></span>  
  
 <span data-ttu-id="c69b7-107">La section suivante explique quel rôle de base de données vous devez accorder aux utilisateurs pour qu'ils puissent créer ou exécuter des travaux à l'aide de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="c69b7-107">The following section explains what database role you must grant to users so they can create or execute jobs by using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="granting-access-to-sql-server-agent"></a><span data-ttu-id="c69b7-108">Octroi de l'autorisation d'accéder à SQL Server Agent</span><span class="sxs-lookup"><span data-stu-id="c69b7-108">Granting Access to SQL Server Agent</span></span>  
 <span data-ttu-id="c69b7-109">Pour utiliser l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , les utilisateurs doivent être membres de l'un ou de tous les rôles de base de données fixes suivants :</span><span class="sxs-lookup"><span data-stu-id="c69b7-109">To use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, users must be a member of one or more of the following fixed database roles:</span></span>  
  
-   <span data-ttu-id="c69b7-110">**SQLAgentUserRole**</span><span class="sxs-lookup"><span data-stu-id="c69b7-110">**SQLAgentUserRole**</span></span>  
  
-   <span data-ttu-id="c69b7-111">**SQLAgentReaderRole**</span><span class="sxs-lookup"><span data-stu-id="c69b7-111">**SQLAgentReaderRole**</span></span>  
  
-   <span data-ttu-id="c69b7-112">**SQLAgentOperatorRole**</span><span class="sxs-lookup"><span data-stu-id="c69b7-112">**SQLAgentOperatorRole**</span></span>  
  
 <span data-ttu-id="c69b7-113">Ces rôles sont stockés dans la base de données **msdb** .</span><span class="sxs-lookup"><span data-stu-id="c69b7-113">These roles are stored in the **msdb** database.</span></span> <span data-ttu-id="c69b7-114">Par défaut, aucun utilisateur n'est membre de ces rôles de base de données.</span><span class="sxs-lookup"><span data-stu-id="c69b7-114">By default, no user is a member of these database roles.</span></span> <span data-ttu-id="c69b7-115">L'appartenance à ces rôles doit être accordée explicitement.</span><span class="sxs-lookup"><span data-stu-id="c69b7-115">Membership in these roles must be granted explicitly.</span></span> <span data-ttu-id="c69b7-116">Les utilisateurs qui sont membres du rôle serveur fixe **sysadmin** ont un accès complet à [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent et ne doivent pas nécessairement être membres de ces rôles de base de données fixes pour utiliser [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="c69b7-116">Users who are members of the **sysadmin** fixed server role have full access to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, and do not need to be a member of these fixed database roles to use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span> <span data-ttu-id="c69b7-117">Si un utilisateur n’est pas membre de ces rôles de base de données ou du rôle **sysadmin** , le nœud de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent ne leur est pas accessible quand ils se connectent à [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] à l’aide de [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c69b7-117">If a user is not a member of one of these database roles or of the **sysadmin** role, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent node is not available to them when they connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="c69b7-118">Les membres de ces rôles de base de données peuvent afficher et exécuter les travaux dont ils sont propriétaires, et créer des étapes de travail qui s'exécutent comme un compte proxy existant.</span><span class="sxs-lookup"><span data-stu-id="c69b7-118">Members of these database roles can view and execute jobs that they own, and create job steps that run as an existing proxy account.</span></span> <span data-ttu-id="c69b7-119">Pour en savoir plus sur les autorisations spécifiques associées à chacun de ces rôles, consultez [Rôles de base de données fixes de SQL Server Agent](sql-server-agent-fixed-database-roles.md).</span><span class="sxs-lookup"><span data-stu-id="c69b7-119">For more information about the specific permissions that are associated with each of these roles, see [SQL Server Agent Fixed Database Roles](sql-server-agent-fixed-database-roles.md).</span></span>  
  
 <span data-ttu-id="c69b7-120">Les membres du rôle serveur fixe **sysadmin** sont habilités à créer, à modifier et à supprimer des comptes proxy.</span><span class="sxs-lookup"><span data-stu-id="c69b7-120">Members of the **sysadmin** fixed server role have permission to create, modify, and delete proxy accounts.</span></span> <span data-ttu-id="c69b7-121">Les membres du rôle **sysadmin** sont habilités à créer des étapes de travail qui ne spécifient pas un proxy, mais s’exécutent plutôt comme le compte de service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, qui est le compte utilisé pour démarrer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="c69b7-121">Members of the **sysadmin** role have permission to create job steps that do not specify a proxy, but instead run as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account, which is the account that is used to start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
## <a name="guidelines"></a><span data-ttu-id="c69b7-122">Recommandations</span><span class="sxs-lookup"><span data-stu-id="c69b7-122">Guidelines</span></span>  
 <span data-ttu-id="c69b7-123">Pour améliorer la sécurité de votre implémentation de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent, suivez les instructions suivantes :</span><span class="sxs-lookup"><span data-stu-id="c69b7-123">Follow these guidelines to improve the security of your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent implementation:</span></span>  
  
-   <span data-ttu-id="c69b7-124">Créez des comptes utilisateur dédiés spécifiquement pour les proxys et utilisez uniquement ces comptes utilisateur proxy pour exécuter les étapes de travail.</span><span class="sxs-lookup"><span data-stu-id="c69b7-124">Create dedicated user accounts specifically for proxies, and only use these proxy user accounts for running job steps.</span></span>  
  
-   <span data-ttu-id="c69b7-125">Octroyez exclusivement les autorisations nécessaires aux comptes utilisateur proxy.</span><span class="sxs-lookup"><span data-stu-id="c69b7-125">Only grant the necessary permissions to proxy user accounts.</span></span> <span data-ttu-id="c69b7-126">Octroyez exclusivement les autorisations réellement requises pour exécuter les étapes de travail qui sont assignées à un compte proxy donné.</span><span class="sxs-lookup"><span data-stu-id="c69b7-126">Grant only those permissions actually required to run the job steps that are assigned to a given proxy account.</span></span>  
  
-   <span data-ttu-id="c69b7-127">N’exécutez pas le service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent sous un compte Microsoft Windows qui est membre du groupe **Administrateurs** de Windows.</span><span class="sxs-lookup"><span data-stu-id="c69b7-127">Do not run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service under a Microsoft Windows account that is a member of the Windows **Administrators** group.</span></span>  
  
-   <span data-ttu-id="c69b7-128">Les proxys sont aussi sécurisés que la banque d'informations d'identification de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c69b7-128">Proxies are only as secure as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] credential store.</span></span>  
  
-   <span data-ttu-id="c69b7-129">Si les opérations d'écriture utilisateur peuvent écrire dans le journal des événements NT, elles peuvent déclencher des alertes par le biais de l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c69b7-129">If user write operations can write to the NT Event log, they can raise alerts via [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent.</span></span>  
  
-   <span data-ttu-id="c69b7-130">Ne spécifiez pas le compte administrateur NT en tant que compte de service ou compte proxy.</span><span class="sxs-lookup"><span data-stu-id="c69b7-130">Do not specify the NT Admin account as a service account or proxy account.</span></span>  
  
-   <span data-ttu-id="c69b7-131">Notez que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et l’Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ont chacun accès aux ressources de l’autre.</span><span class="sxs-lookup"><span data-stu-id="c69b7-131">Note that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent have access to each other's assets.</span></span> <span data-ttu-id="c69b7-132">Les deux services partagent un espace de processus unique et l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est un sysadmin sur le service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c69b7-132">The two services share a single process space and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is a sysadmin on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service.</span></span>  
  
-   <span data-ttu-id="c69b7-133">Lorsque TSX est inscrit avec un MSX, le MSX sysadmin obtient le contrôle total sur l'instance TSX de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c69b7-133">When a TSX enlists with an MSX, the MSX sysadmins gets total control over the TSX instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="c69b7-134">ACE est une extension et ne peut pas s'appeler elle-même.</span><span class="sxs-lookup"><span data-stu-id="c69b7-134">ACE is an extension and cannot invoke itself.</span></span> <span data-ttu-id="c69b7-135">ACE est appelé par le programme de chaînage ScenarioEngine.exe, également appelé Microsoft.SqlServer.Chainer.Setup.exe, ou peut être appelé par un autre processus hôte.</span><span class="sxs-lookup"><span data-stu-id="c69b7-135">ACE is invoked by Chainer ScenarioEngine.exe - also known as Microsoft.SqlServer.Chainer.Setup.exe - or it can be invoked by another host process.</span></span>  
  
-   <span data-ttu-id="c69b7-136">ACE dépend des DLL de configuration suivantes détenues par SSDP, car ces API de DLL sont appelées par ACE :</span><span class="sxs-lookup"><span data-stu-id="c69b7-136">ACE depends on the following configuration DLL's owned by SSDP, because those API's of DLL's are called by ACE:</span></span>  
  
    -   <span data-ttu-id="c69b7-137">**SCO** - Microsoft.SqlServer.Configuration.Sco.dll, y compris les nouvelles validations SCO pour les comptes virtuels</span><span class="sxs-lookup"><span data-stu-id="c69b7-137">**SCO** - Microsoft.SqlServer.Configuration.Sco.dll, including new SCO validations for virtual accounts</span></span>  
  
    -   <span data-ttu-id="c69b7-138">**Cluster** - Microsoft.SqlServer.Configuration.Cluster.dll</span><span class="sxs-lookup"><span data-stu-id="c69b7-138">**Cluster** - Microsoft.SqlServer.Configuration.Cluster.dll</span></span>  
  
    -   <span data-ttu-id="c69b7-139">**SFC** - Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span><span class="sxs-lookup"><span data-stu-id="c69b7-139">**SFC** - Microsoft.SqlServer.Configuration.SqlConfigBase.dll</span></span>  
  
    -   <span data-ttu-id="c69b7-140">**Extension** - Microsoft.SqlServer.Configuration.ConfigExtension.dll</span><span class="sxs-lookup"><span data-stu-id="c69b7-140">**Extension** - Microsoft.SqlServer.Configuration.ConfigExtension.dll</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c69b7-141">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c69b7-141">See Also</span></span>  
 <span data-ttu-id="c69b7-142">[Rôles prédéfinis](../../reporting-services/security/role-definitions-predefined-roles.md) </span><span class="sxs-lookup"><span data-stu-id="c69b7-142">[Predefined Roles](../../reporting-services/security/role-definitions-predefined-roles.md) </span></span>  
 <span data-ttu-id="c69b7-143">[sp_addrolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c69b7-143">[sp_addrolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addrolemember-transact-sql) </span></span>  
 <span data-ttu-id="c69b7-144">[sp_droprolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c69b7-144">[sp_droprolemember &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-droprolemember-transact-sql) </span></span>  
 [<span data-ttu-id="c69b7-145">Centre de sécurité pour le moteur de base de données SQL Server et Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="c69b7-145">Security Center for SQL Server Database Engine and Azure SQL Database</span></span>](../../relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database.md)  
  
  
