---
title: Utilisation des fichiers de stratégie de sécurité Reporting Services | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- CodeGroup elements
- configuration files [Reporting Services]
- code access security [Reporting Services], security policies
- security policies [Reporting Services]
- security configuration files [Reporting Services]
- named permission sets [Reporting Services]
ms.assetid: 2280fff6-3de7-44b1-87da-5db0ec975928
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 15c5422741137505bc29a2de861fca1420e455d8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87614391"
---
# <a name="using-reporting-services-security-policy-files"></a><span data-ttu-id="e98df-102">Utilisation des fichiers de stratégie de sécurité Reporting Services</span><span class="sxs-lookup"><span data-stu-id="e98df-102">Using Reporting Services Security Policy Files</span></span>
  [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="e98df-103">stocke les informations de stratégie de sécurité dans trois fichiers de configuration qui sont copiés dans le système de fichiers au cours de l'installation.</span><span class="sxs-lookup"><span data-stu-id="e98df-103">stores component security policy information in three configuration files that are copied to the file system during setup.</span></span> <span data-ttu-id="e98df-104">Ces fichiers de configuration peuvent contenir une combinaison de stratégies de sécurité à usage interne et définies par l'utilisateur pour les assemblys de code dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e98df-104">These configuration files can contain a combination of internal-use and user-defined security policies for code assemblies in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="e98df-105">Les trois fichiers de configuration correspondent à trois composants sécurisables dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] : le service Windows Report Server, l'application Web du Gestionnaire de rapports et la fenêtre d'aperçu du Concepteur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-105">The three configuration files correspond to three securable components in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]: The report server and Windows service, the Report Manager Web application, and the Report Designer preview window.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e98df-106">Il y a deux modes d’aperçu pour le Concepteur de rapports : l’onglet d’aperçu et la fenêtre d’aperçu contextuelle, qui s’affiche quand votre projet de rapport démarre en mode **DebugLocal**.</span><span class="sxs-lookup"><span data-stu-id="e98df-106">There are two preview modes for Report Designer: the preview tab and the pop-up preview window that is launched when your Report Project is started in **DebugLocal** mode.</span></span> <span data-ttu-id="e98df-107">L’onglet **Aperçu** n’est pas un composant sécurisable et n’applique pas de paramètres de stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="e98df-107">The **Preview** tab is not a securable component and does not apply security policy settings.</span></span> <span data-ttu-id="e98df-108">La fenêtre d'aperçu est destinée à simuler les fonctionnalités du serveur de rapports ; par conséquent, elle dispose d'un fichier de configuration de stratégie que vous ou un administrateur devez modifier pour utiliser les assemblys et extensions personnalisés dans le Concepteur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-108">The preview window is meant to simulate the report server functionality and therefore has a policy configuration file that you or an administrator must modify to use custom assemblies and custom extensions in Report Designer.</span></span>  
  
 <span data-ttu-id="e98df-109">Les fichiers de configuration de stratégie de sécurité contiennent des informations de classe de sécurité, quelques jeux d'autorisations nommés par défaut et les groupes de codes des assemblys dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e98df-109">The security policy configuration files contain security class information, some default named permission sets, and the code groups for assemblies in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="e98df-110">Les fichiers de configuration de stratégie de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] sont semblables au fichier Security.config qui détermine la hiérarchie des groupes de codes et les jeux d'autorisations associés aux stratégies de niveaux ordinateur et entreprise du [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e98df-110">The policy configuration files of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] are similar to the Security.config file that determines the code group hierarchy and permission sets associated with machine and enterprise level policies in the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="e98df-111">L'emplacement de ce fichier est C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\CONFIG\security.config.</span><span class="sxs-lookup"><span data-stu-id="e98df-111">The location of this file is C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\CONFIG\security.config.</span></span>  
  
## <a name="policy-files-in-reporting-services"></a><span data-ttu-id="e98df-112">Fichiers de stratégie dans Reporting Services</span><span class="sxs-lookup"><span data-stu-id="e98df-112">Policy Files in Reporting Services</span></span>  
 <span data-ttu-id="e98df-113">Le tableau suivant répertorie les fichiers de configuration de stratégie dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], leurs emplacements (dans une installation par défaut) et leurs fonctions respectives.</span><span class="sxs-lookup"><span data-stu-id="e98df-113">The following table lists the policy configuration files in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], their locations (assuming a default installation), and their respective functions.</span></span>  
  
|<span data-ttu-id="e98df-114">Nom de fichier</span><span class="sxs-lookup"><span data-stu-id="e98df-114">File name</span></span>|<span data-ttu-id="e98df-115">Emplacement (installation par défaut)</span><span class="sxs-lookup"><span data-stu-id="e98df-115">Location (default installation)</span></span>|<span data-ttu-id="e98df-116">Description</span><span class="sxs-lookup"><span data-stu-id="e98df-116">Description</span></span>|  
|---------------|---------------------------------------|-----------------|  
|<span data-ttu-id="e98df-117">rssrvpolicy.config</span><span class="sxs-lookup"><span data-stu-id="e98df-117">rssrvpolicy.config</span></span>|<span data-ttu-id="e98df-118">C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer</span><span class="sxs-lookup"><span data-stu-id="e98df-118">C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer</span></span>|<span data-ttu-id="e98df-119">Fichier de configuration de stratégie du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-119">The report server policy configuration file.</span></span> <span data-ttu-id="e98df-120">Ces stratégies de sécurité affectent principalement les expressions de rapport et les assemblys personnalisés, une fois qu'un rapport est déployé sur un serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-120">These security policies primarily affect report expressions and custom assemblies once a report is deployed to a report server.</span></span> <span data-ttu-id="e98df-121">Ce fichier de stratégie affecte également les extensions personnalisées en matière de données, de remise, de rendu et de sécurité, qui sont déployées sur le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-121">This policy file also affects custom data, delivery, rendering and security extensions deployed to the report server.</span></span>|  
|<span data-ttu-id="e98df-122">rsmgrpolicy.config</span><span class="sxs-lookup"><span data-stu-id="e98df-122">rsmgrpolicy.config</span></span>|<span data-ttu-id="e98df-123">C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager</span><span class="sxs-lookup"><span data-stu-id="e98df-123">C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager</span></span>|<span data-ttu-id="e98df-124">Fichier de configuration de stratégie du Gestionnaire de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-124">Report Manager policy configuration file.</span></span> <span data-ttu-id="e98df-125">Ces stratégies de sécurité affectent tous les assemblys qui étendent le Gestionnaire de rapports, par exemple les extensions d'interface utilisateur d'abonnement pour une remise personnalisée.</span><span class="sxs-lookup"><span data-stu-id="e98df-125">These security policies affect all assemblies that extend Report Manager; for example, subscription user interface extensions for custom delivery.</span></span>|  
|<span data-ttu-id="e98df-126">rspreviewpolicy.config</span><span class="sxs-lookup"><span data-stu-id="e98df-126">rspreviewpolicy.config</span></span>|<span data-ttu-id="e98df-127">C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies</span><span class="sxs-lookup"><span data-stu-id="e98df-127">C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies</span></span>|<span data-ttu-id="e98df-128">Fichier de configuration de stratégie de l'aperçu autonome du Concepteur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-128">The Report Designer stand-alone preview policy configuration file.</span></span> <span data-ttu-id="e98df-129">Ces stratégies de sécurité affectent les assemblys personnalisés et les expressions de rapport utilisés dans les rapports pendant l'aperçu et le développement.</span><span class="sxs-lookup"><span data-stu-id="e98df-129">These security policies affect custom assemblies and report expressions that are used in reports during preview and development.</span></span> <span data-ttu-id="e98df-130">Ces stratégies affectent également les extensions personnalisées, par exemple les extensions pour le traitement des données, qui sont déployées sur le Concepteur de rapports.</span><span class="sxs-lookup"><span data-stu-id="e98df-130">These policies also affect custom extensions, such as data processing extensions, that are deployed to Report Designer.</span></span>|  
  
## <a name="modifying-configuration-files"></a><span data-ttu-id="e98df-131">Modification des fichiers de configuration</span><span class="sxs-lookup"><span data-stu-id="e98df-131">Modifying Configuration Files</span></span>  
 <span data-ttu-id="e98df-132">Les paramètres de configuration sont spécifiés soit comme des éléments, soit comme des attributs XML.</span><span class="sxs-lookup"><span data-stu-id="e98df-132">Configuration settings are specified as either XML elements or attributes.</span></span> <span data-ttu-id="e98df-133">Si le langage XML et les fichiers de configuration vous sont familiers, vous pouvez modifier les paramètres définissables par l'utilisateur dans un éditeur de texte ou de code.</span><span class="sxs-lookup"><span data-stu-id="e98df-133">If you understand XML and configuration files, you can use a text or code editor to modify user-definable settings.</span></span> <span data-ttu-id="e98df-134">Les fichiers de configuration de sécurité contiennent des informations sur la hiérarchie du groupe de codes et les jeux d'autorisations associés à un niveau de stratégie dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e98df-134">Security configuration files contain information about the code group hierarchy and permission sets associated with a policy level in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="e98df-135">Il est recommandé d'employer l'utilitaire de configuration du .NET Framework (Mscorcfg.msc) ou l'utilitaire de stratégie de sécurité d'accès du code (Caspol.exe) pour modifier au préalable les stratégies de sécurité dans le fichier Security.config, afin que les modifications de stratégie correspondent aux éléments de configuration XML valides pour les fichiers de stratégie.</span><span class="sxs-lookup"><span data-stu-id="e98df-135">It is recommended that you use the .NET Framework Configuration Utility (Mscorcfg.msc) or Code Access Security Policy Utility (Caspol.exe) to modify security policies in the Security.config file first, so that policy changes correspond to valid XML configuration elements for policy files.</span></span> <span data-ttu-id="e98df-136">Une fois que vous avez terminé, vous pouvez couper et coller les nouveaux groupes de codes et jeux d'autorisations de Security.config vers le fichier de stratégie du composant auquel vous ajoutez des autorisations de code.</span><span class="sxs-lookup"><span data-stu-id="e98df-136">Once you have done that, you can cut and paste the new code groups and permission sets from Security.config to the policy file for the component to which you are adding code permissions.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="e98df-137">Sauvegardez vos fichiers de configuration de stratégie avant d'apporter des modifications.</span><span class="sxs-lookup"><span data-stu-id="e98df-137">You should backup your policy configuration files prior to making any changes.</span></span>  
  
 <span data-ttu-id="e98df-138">Cette approche présente un double intérêt.</span><span class="sxs-lookup"><span data-stu-id="e98df-138">Using this approach accomplishes two things.</span></span> <span data-ttu-id="e98df-139">En premier lieu, elle vous permet d'utiliser un outil visuel pour générer vos groupes de codes et jeux d'autorisations pour [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e98df-139">First, it enables you to use a visual tool to build your code groups and permission sets for [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="e98df-140">Cela est beaucoup plus facile que d'écrire entièrement des éléments de configuration XML.</span><span class="sxs-lookup"><span data-stu-id="e98df-140">This is much easier than writing XML configuration elements from scratch.</span></span> <span data-ttu-id="e98df-141">En second lieu, vous êtes assuré de ne pas endommager les fichiers de configuration de stratégie de sécurité en utilisant des éléments et attributs XML incorrects.</span><span class="sxs-lookup"><span data-stu-id="e98df-141">Secondly, it ensures that you do not corrupt the security policy configuration files with malformed XML elements and attributes.</span></span> <span data-ttu-id="e98df-142">Pour plus d'informations sur l'utilitaire de stratégie de sécurité d'accès du code, consultez Utilisation des fichiers de stratégie de sécurité Reporting Services sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="e98df-142">For more information about the Code Access Security Policy Utility, see Using Reporting Services Security Policy Files on MSDN.</span></span>  
  
 <span data-ttu-id="e98df-143">Avant de modifier des fichiers de configuration de stratégie, lisez toutes les informations disponibles dans cette section et les rubriques connexes.</span><span class="sxs-lookup"><span data-stu-id="e98df-143">Before modifying policy configuration files, you should read all the information available in this section and related topics.</span></span> <span data-ttu-id="e98df-144">La modification de la configuration de stratégie de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] peut avoir un impact déterminant en matière de sécurité sur la façon dont les composants [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] exécutent des modules de code externes.</span><span class="sxs-lookup"><span data-stu-id="e98df-144">Modifying the policy configuration of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] can have a significant security impact on how [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] components execute external code modules.</span></span>  
  
## <a name="placement-of-codegroup-elements-for-extensions"></a><span data-ttu-id="e98df-145">Placement des éléments CodeGroup pour les extensions</span><span class="sxs-lookup"><span data-stu-id="e98df-145">Placement of CodeGroup Elements for Extensions</span></span>  
 <span data-ttu-id="e98df-146">Le placement des éléments CodeGroup dans un fichier de stratégie de sécurité est important.</span><span class="sxs-lookup"><span data-stu-id="e98df-146">The placement of CodeGroup elements in a security policy file is important.</span></span> <span data-ttu-id="e98df-147">Pour les extensions et les assemblys personnalisés que vous développez, il est recommandé de placer vos groupes de codes personnalisés directement en dessous de l'entrée existante pour l'appartenance (membership) URL "$CodeGen$/\*", comme indiqué ci-après :</span><span class="sxs-lookup"><span data-stu-id="e98df-147">For extensions and custom assemblies that you develop, it is recommended that you place your custom code groups directly below the existing entry for the URL membership "$CodeGen$/\*", as indicated by the following:</span></span>  
  
```  
<CodeGroup  
    class="UnionCodeGroup"  
    version="1"  
    PermissionSetName="FullTrust">  
    <IMembershipCondition   
        class="UrlMembershipCondition"  
        version="1"  
        Url="$CodeGen$/*"  
    />  
</CodeGroup>  
<CodeGroup   
    class="UnionCodeGroup"  
    version="1"  
    PermissionSetName="FullTrust"  
    Name="MyCustomCodeGroup"  
    Description="Code group for my custom extension">  
        <IMembershipCondition class="UrlMembershipCondition"  
        version="1"  
        Url="C:\Program Files\Microsoft SQL Server\MSSQL\Reporting Services\ReportServer\bin\MyAssembly.dll"  
        />  
</CodeGroup>  
```  
  
 <span data-ttu-id="e98df-148">Les groupes de codes supplémentaires peuvent être ajoutés les uns à la suite des autres.</span><span class="sxs-lookup"><span data-stu-id="e98df-148">Additional code groups can be added one after another.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e98df-149">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e98df-149">See Also</span></span>  
 [<span data-ttu-id="e98df-150">Présentation des stratégies de sécurité</span><span class="sxs-lookup"><span data-stu-id="e98df-150">Understanding Security Policies</span></span>](understanding-security-policies.md)  
  
  
