---
title: Présentation des stratégies de sécurité | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- code groups [Reporting Services]
- code access security [Reporting Services], security policies
- Execution permission set
- custom assemblies [Reporting Services], security
- permission sets [Reporting Services]
- expressions [Reporting Services], security
- evidence [Reporting Services]
- FullTrust permission set
- security policies [Reporting Services]
- named permission sets [Reporting Services]
ms.assetid: a9bf043a-139a-4929-9a58-244815323df0
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e03f2ca7aae75f692ba2c888d1fb6bd3f60fb4a4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87614392"
---
# <a name="understanding-security-policies"></a><span data-ttu-id="dc513-102">Présentation des stratégies de sécurité</span><span class="sxs-lookup"><span data-stu-id="dc513-102">Understanding Security Policies</span></span>
  <span data-ttu-id="dc513-103">Tout code exécuté par un serveur de rapports doit faire partie d'une stratégie de sécurité d'accès du code spécifique.</span><span class="sxs-lookup"><span data-stu-id="dc513-103">Any code that is executed by a report server must be part of a specific code access security policy.</span></span> <span data-ttu-id="dc513-104">Ces stratégies de sécurité comprennent des groupes de codes qui mappent une preuve à un ensemble de jeux d'autorisations nommés.</span><span class="sxs-lookup"><span data-stu-id="dc513-104">These security policies consist of code groups that map evidence to a set of named permission sets.</span></span> <span data-ttu-id="dc513-105">Souvent, les groupes de codes sont associés à un jeu d'autorisations nommé qui spécifie les autorisations pouvant être accordées au code dans ce groupe.</span><span class="sxs-lookup"><span data-stu-id="dc513-105">Often, code groups are associated with a named permission set that specifies the allowable permissions for code in that group.</span></span> <span data-ttu-id="dc513-106">Le runtime utilise la preuve fournie par un hôte approuvé ou par le chargeur pour déterminer les groupes de codes auxquels le code appartient et, par conséquent, les autorisations à accorder au code.</span><span class="sxs-lookup"><span data-stu-id="dc513-106">The runtime uses evidence provided by a trusted host or by the loader to determine which code groups the code belongs to and, therefore, which permissions to grant the code.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="dc513-107">adhère à cette architecture de stratégie de sécurité telle qu’elle est définie par le Common Language Runtime (CLR) [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc513-107">adheres to this security policy architecture as defined by the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] common language runtime (CLR).</span></span> <span data-ttu-id="dc513-108">Les sections suivantes décrivent les divers types de codes qui existent dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], ainsi que les règles de stratégie associées.</span><span class="sxs-lookup"><span data-stu-id="dc513-108">The following sections describe the various types of code in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] and the policy rules associated with them.</span></span>  
  
## <a name="report-server-assemblies"></a><span data-ttu-id="dc513-109">Assemblys du serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="dc513-109">Report Server Assemblies</span></span>  
 <span data-ttu-id="dc513-110">Les assemblys du serveur de rapports sont ceux qui contiennent du code faisant partie du produit [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc513-110">Report server assemblies are those that contain code that is part of the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] product.</span></span> [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] <span data-ttu-id="dc513-111">est écrit à l'aide d'assemblys de code managé ; tous ces assemblys portent un nom fort (autrement dit, ils sont signés numériquement).</span><span class="sxs-lookup"><span data-stu-id="dc513-111">is written using managed code assemblies; all of these assemblies are strong-named (that is, digitally signed).</span></span> <span data-ttu-id="dc513-112">Les groupes de codes de ces assemblys sont définis à l’aide de **StrongNameMembershipCondition**, qui fournit une preuve basée sur les informations de clé publique pour le nom fort de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="dc513-112">The code groups for these assemblies are defined using the **StrongNameMembershipCondition**, which provides evidence based on public key information for the assembly's strong name.</span></span> <span data-ttu-id="dc513-113">Le jeu d’autorisations **FullTrust** est accordé au groupe de codes.</span><span class="sxs-lookup"><span data-stu-id="dc513-113">The code group is granted the **FullTrust** permission set.</span></span>  
  
## <a name="report-server-extensions-rendering-data-delivery-and-security"></a><span data-ttu-id="dc513-114">Extensions du serveur de rapports (rendu, données, remise et sécurité)</span><span class="sxs-lookup"><span data-stu-id="dc513-114">Report Server Extensions (Rendering, Data, Delivery, and Security)</span></span>  
 <span data-ttu-id="dc513-115">Les extensions du serveur de rapports sont des extensions personnalisées en matière de données, de remise, de rendu et de sécurité que vous ou des personnes tierces créez afin d'étendre les fonctionnalités de [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc513-115">Report server extensions are custom data, delivery, rendering, and security extensions that you or other third-parties create in order to extend the functionality of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="dc513-116">Vous devez accorder **FullTrust** à ces extensions ou au code assembleur dans les fichiers de configuration de stratégie associés au composant [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] que vous étendez.</span><span class="sxs-lookup"><span data-stu-id="dc513-116">You must grant **FullTrust** to these extensions or assembly code in the policy configuration files associated with the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] component you are extending.</span></span> <span data-ttu-id="dc513-117">Les extensions fournies avec [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] sont signées à l’aide de la clé publique du serveur de rapports et reçoivent le jeu d’autorisations **FullTrust**.</span><span class="sxs-lookup"><span data-stu-id="dc513-117">Extensions shipped as a part of [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] are signed with the report server public key and receive the **FullTrust** permission set.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dc513-118">Vous devez modifier les fichiers de configuration de stratégie [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] afin que **FullTrust** puisse être accordé aux extensions tierces.</span><span class="sxs-lookup"><span data-stu-id="dc513-118">You must modify the [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] policy configuration files to allow **FullTrust** for any third-party extensions.</span></span> <span data-ttu-id="dc513-119">Si vous n’ajoutez pas de groupe de codes avec **FullTrust** à vos extensions personnalisées, ces dernières ne peuvent pas être utilisées par le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="dc513-119">If you do not add a code group with **FullTrust** for your custom extensions, they cannot be used by the report server.</span></span>  
  
 <span data-ttu-id="dc513-120">Pour plus d’informations sur les fichiers de configuration de stratégie dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], consultez [Utilisation des fichiers de stratégie de sécurité Reporting Services](using-reporting-services-security-policy-files.md).</span><span class="sxs-lookup"><span data-stu-id="dc513-120">For more information about the policy configuration files in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)], see [Using Reporting Services Security Policy Files](using-reporting-services-security-policy-files.md).</span></span>  
  
## <a name="expressions-used-in-reports"></a><span data-ttu-id="dc513-121">Expressions utilisées dans les rapports</span><span class="sxs-lookup"><span data-stu-id="dc513-121">Expressions Used in Reports</span></span>  
 <span data-ttu-id="dc513-122">Les expressions de rapport sont des expressions de code incorporé ou des méthodes définies par l’utilisateur contenues dans l’élément **Code** d’un fichier RDL (Report Definition Language).</span><span class="sxs-lookup"><span data-stu-id="dc513-122">Report expressions are inline code expressions or user-defined methods contained within the **Code** element of a report definition language file.</span></span> <span data-ttu-id="dc513-123">Il existe un groupe de codes déjà configuré dans les fichiers de stratégie, qui accorde à ces expressions le jeu d’autorisations **Execution** par défaut.</span><span class="sxs-lookup"><span data-stu-id="dc513-123">There is a code group that is already configured in the policy files that grants these expressions the **Execution** permission set by default.</span></span> <span data-ttu-id="dc513-124">Le groupe de codes ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="dc513-124">The code group looks like the following:</span></span>  
  
```  
<CodeGroup  
   class="UnionCodeGroup"  
   version="1"  
   PermissionSetName="Execution"  
   Name="Report_Expressions_Default_Permissions"  
   Description="This code group grants default permissions for code in report expressions and Code element. ">  
    <IMembershipCondition  
       class="StrongNameMembershipCondition"  
       version="1"  
       PublicKeyBlob="002400..."  
    />  
</CodeGroup>  
```  
  
 <span data-ttu-id="dc513-125">L’autorisation **Execution** permet au code de s’exécuter mais pas d’utiliser des ressources protégées.</span><span class="sxs-lookup"><span data-stu-id="dc513-125">**Execution** permission allows code to run (execute), but not to use protected resources.</span></span> <span data-ttu-id="dc513-126">Toutes les expressions d'un rapport sont compilées en un assembly (appelé assembly « hôte d'expressions ») qui est stocké en tant que partie du rapport compilé.</span><span class="sxs-lookup"><span data-stu-id="dc513-126">All expressions found within a report are compiled into an assembly (called an "expression host" assembly) that is stored as a part of the compiled report.</span></span> <span data-ttu-id="dc513-127">Lorsque le rapport est exécuté, le serveur de rapports charge l'assembly hôte d'expressions et effectue des appels dans cet assembly pour exécuter les expressions.</span><span class="sxs-lookup"><span data-stu-id="dc513-127">When the report is executed, the report server loads the expression host assembly and makes calls into that assembly to execute expressions.</span></span> <span data-ttu-id="dc513-128">Les assemblys hôtes d'expressions sont signés avec une clé spécifique utilisée pour définir le groupe de codes de tous les hôtes d'expressions.</span><span class="sxs-lookup"><span data-stu-id="dc513-128">Expression host assemblies are signed with a specific key that is used to define the code group for all expression hosts.</span></span>  
  
 <span data-ttu-id="dc513-129">Les expressions de rapport référencent des collections du modèle objet de rapport (champs, paramètres, etc.) et effectuent des tâches simples comme l'arithmétique et des opérations de chaîne.</span><span class="sxs-lookup"><span data-stu-id="dc513-129">Report expressions reference report object model collections (fields, parameters, etc.) and perform simple tasks like arithmetic and string operations.</span></span> <span data-ttu-id="dc513-130">Le code qui effectue ces opérations simples requiert uniquement l’autorisation **Execution**.</span><span class="sxs-lookup"><span data-stu-id="dc513-130">Code that performs these simple operations only requires **Execution** permission.</span></span> <span data-ttu-id="dc513-131">Par défaut, les méthodes définies par l’utilisateur dans l’élément **Code** et les assemblys personnalisés reçoivent l’autorisation **Execution** dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc513-131">By default, user-defined methods in the **Code** element and any custom assemblies are granted **Execution** permission in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="dc513-132">Par conséquent, pour la plupart des expressions, la configuration actuelle ne requiert pas que vous modifiiez les fichiers de stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="dc513-132">Thus, for most expressions, the current configuration does not require that you modify any security policy files.</span></span> <span data-ttu-id="dc513-133">Pour accorder des autorisations supplémentaires aux assemblys hôtes d'expressions, un administrateur doit modifier les fichiers de configuration de stratégie du serveur de rapports et du Concepteur de rapports ; en outre, il doit également modifier le groupe de codes des expressions de rapport.</span><span class="sxs-lookup"><span data-stu-id="dc513-133">To grant additional permissions to expression host assemblies, an administrator needs to modify the policy configuration files of the report server and Report Designer, and change the report expressions code group.</span></span> <span data-ttu-id="dc513-134">Dans la mesure où il s'agit d'un paramètre global, la modification des autorisations par défaut des hôtes d'expressions affecte tous les rapports.</span><span class="sxs-lookup"><span data-stu-id="dc513-134">Because it is a global setting, changing default permissions for the expression hosts affects all reports.</span></span> <span data-ttu-id="dc513-135">Pour cette raison, il est vivement recommandé que vous placiez l'ensemble du code qui requiert une sécurité supplémentaire dans un assembly personnalisé.</span><span class="sxs-lookup"><span data-stu-id="dc513-135">For this reason, it is highly recommended that you place all code that requires additional security into a custom assembly.</span></span> <span data-ttu-id="dc513-136">Seul cet assembly recevra les autorisations dont vous avez besoin.</span><span class="sxs-lookup"><span data-stu-id="dc513-136">Only this assembly will be granted the permissions you need.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dc513-137">Le code qui appelle des assemblys externes ou des ressources protégées doit être incorporé dans un assembly personnalisé à utiliser dans les rapports.</span><span class="sxs-lookup"><span data-stu-id="dc513-137">Code that calls external assemblies or protected resources should be incorporated into a custom assembly for use in reports.</span></span> <span data-ttu-id="dc513-138">Vous disposez ainsi d'un plus grand contrôle des autorisations requises et déclarées par votre code.</span><span class="sxs-lookup"><span data-stu-id="dc513-138">Doing so gives you more control over the permissions requested and asserted by your code.</span></span> <span data-ttu-id="dc513-139">N’effectuez pas d’appels pour sécuriser des méthodes dans l’élément **Code**.</span><span class="sxs-lookup"><span data-stu-id="dc513-139">You should not make calls to secure methods within the **Code** element.</span></span> <span data-ttu-id="dc513-140">En effet, cela vous oblige à accorder **FullTrust** à l’hôte d’expressions de rapport ; cela vous oblige également à accorder l’accès complet à l’ensemble du code personnalisé pour le Common Language Runtime.</span><span class="sxs-lookup"><span data-stu-id="dc513-140">Doing so requires you to grant **FullTrust** to the report expression host and grants all custom code full access to the CLR.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="dc513-141">N’accordez pas **FullTrust** au groupe de codes pour un hôte d’expressions de rapport.</span><span class="sxs-lookup"><span data-stu-id="dc513-141">Do not grant **FullTrust** to the code group for a report expression host.</span></span> <span data-ttu-id="dc513-142">Sinon, vous permettez à toutes les expressions de rapport d'effectuer des appels système protégés.</span><span class="sxs-lookup"><span data-stu-id="dc513-142">If you do, you enable all report expressions to make protected system calls.</span></span>  
  
## <a name="custom-assemblies-referenced-in-reports"></a><span data-ttu-id="dc513-143">Assemblys personnalisés référencés dans les rapports</span><span class="sxs-lookup"><span data-stu-id="dc513-143">Custom Assemblies Referenced in Reports</span></span>  
 <span data-ttu-id="dc513-144">Certaines expressions de rapport peuvent appeler des assemblys de code tiers, également nommés assemblys personnalisés dans [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="dc513-144">Some report expressions can call third-party code assemblies, also known in [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] as custom assemblies.</span></span> <span data-ttu-id="dc513-145">Pour le serveur de rapports, ces assemblys sont censés disposer au moins de l’autorisation **Execution** dans les fichiers de configuration de stratégie.</span><span class="sxs-lookup"><span data-stu-id="dc513-145">The report server expects these assemblies to have at least **Execution** permission in the policy configuration files.</span></span> <span data-ttu-id="dc513-146">Par défaut, les fichiers de stratégie fournis avec [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] accordent l’autorisation **Execution** à tous les assemblys à partir de la zone « Mon Ordinateur ».</span><span class="sxs-lookup"><span data-stu-id="dc513-146">By default, policy files that ship with [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] grant **Execution** permission to all assemblies starting from the 'My Computer' zone.</span></span> <span data-ttu-id="dc513-147">Vous pouvez accorder des autorisations supplémentaires aux assemblys personnalisés en fonction de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="dc513-147">You can grant additional permissions to custom assemblies as needed.</span></span>  
  
 <span data-ttu-id="dc513-148">Dans certains cas, vous devrez peut-être effectuer une opération qui requiert des autorisations de code spécifique dans une expression de rapport.</span><span class="sxs-lookup"><span data-stu-id="dc513-148">In some cases, you may need to perform an operation that requires specific code permissions in a report expression.</span></span> <span data-ttu-id="dc513-149">En règle générale, cela signifie qu'une expression de rapport doit appeler une méthode de bibliothèque CLR sécurisée (par exemple une méthode de bibliothèque qui accède aux fichiers ou au Registre système).</span><span class="sxs-lookup"><span data-stu-id="dc513-149">Typically, this means that a report expression needs to make a call to a secured CLR library method (such as one that accesses files or the system registry).</span></span> <span data-ttu-id="dc513-150">La documentation du [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] décrit les autorisations de code requises pour effectuer cet appel sécurisé ; pour exécuter l'appel, le code appelant doit recevoir ces autorisations sécurisées spécifiques.</span><span class="sxs-lookup"><span data-stu-id="dc513-150">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] documentation describes the code permissions that are required to make this secure call; to execute the call, the calling code must be granted these specific, secure permissions.</span></span> <span data-ttu-id="dc513-151">Si vous effectuez l’appel à partir d’une expression de rapport ou de l’élément **Code**, les autorisations appropriées doivent être accordées à l’assembly hôte d’expressions.</span><span class="sxs-lookup"><span data-stu-id="dc513-151">If you make the call from a report expression or the **Code** element, the expression host assembly must be granted the appropriate permissions.</span></span> <span data-ttu-id="dc513-152">Cependant, une fois que vous avez accordé les autorisations appropriées à l'hôte d'expressions, tout code s'exécutant dans l'expression d'un rapport reçoit désormais cette autorisation spécifique.</span><span class="sxs-lookup"><span data-stu-id="dc513-152">However, once you grant the expression host the permissions, all code that runs in any expression in any report is now granted that specific permission.</span></span> <span data-ttu-id="dc513-153">Il est beaucoup plus sûr d'effectuer l'appel à partir d'un assembly personnalisé et d'accorder à ce dernier les autorisations spécifiques.</span><span class="sxs-lookup"><span data-stu-id="dc513-153">It is much more secure to make the call from a custom assembly and grant that custom assembly the specific permissions.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dc513-154">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="dc513-154">See Also</span></span>  
 <span data-ttu-id="dc513-155">[Sécurité d’accès du code dans Reporting Services](code-access-security-in-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="dc513-155">[Code Access Security in Reporting Services](code-access-security-in-reporting-services.md) </span></span>  
 [<span data-ttu-id="dc513-156">Développement sécurisé &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="dc513-156">Secure Development &#40;Reporting Services&#41;</span></span>](secure-development-reporting-services.md)  
  
  
