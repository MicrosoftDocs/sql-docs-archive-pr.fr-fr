---
title: Utiliser une source de données externe pour les données des abonnés (abonnements pilotés par les données) | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- subscriber data sources [Reporting Services]
- subscriptions [Reporting Services], external data sources
- query-based subscriptions [Reporting Services]
- external data sources [Reporting Services]
- data-driven subscriptions
- data sources [Reporting Services], subscriptions
ms.assetid: 1cade8ec-729c-4df8-a428-e75c9ad86369
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: e23da709289ffb6ca345bb6211f40388877a1a87
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87706964"
---
# <a name="use-an-external-data-source-for-subscriber-data-data-driven-subscription"></a><span data-ttu-id="24271-102">Utiliser une source de données externe pour les données des abonnés (abonnements pilotés par les données)</span><span class="sxs-lookup"><span data-stu-id="24271-102">Use an External Data Source for Subscriber Data (Data-Driven Subscription)</span></span>
  <span data-ttu-id="24271-103">Dans un abonnement piloté par les données, les données d'abonnement dynamiques sont fournies par une requête ou une commande qui récupère les données à partir d'une source de données externe.</span><span class="sxs-lookup"><span data-stu-id="24271-103">In a data-driven subscription, dynamic subscription data is provided by a query or command that retrieves data from an external data source.</span></span> <span data-ttu-id="24271-104">Il est possible de récupérer les données d'abonnement à partir de n'importe quelle source de données gérée qui répond aux impératifs du traitement des abonnements pilotés par les données.</span><span class="sxs-lookup"><span data-stu-id="24271-104">Subscription data can be retrieved from any supported data source that meets the requirements for data-driven subscription processing.</span></span> <span data-ttu-id="24271-105">La syntaxe de la requête ou de la commande doit être valide pour l'extension de traitement de données installée avec votre serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="24271-105">The query or command syntax must be valid for a data processing extension installed with your report server.</span></span>  
  
## <a name="data-processing-requirements"></a><span data-ttu-id="24271-106">Impératifs liés au traitement des données</span><span class="sxs-lookup"><span data-stu-id="24271-106">Data Processing Requirements</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="24271-107">utilise les extensions pour le traitement des données afin de récupérer les données d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="24271-107">uses data processing extensions to retrieve subscription data.</span></span> <span data-ttu-id="24271-108">Les types de sources de données recommandés sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="24271-108">Recommended data source types include the following:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="24271-109">bases de données relationnelles</span><span class="sxs-lookup"><span data-stu-id="24271-109">relational databases</span></span>  
  
-   <span data-ttu-id="24271-110">Bases de données Oracle</span><span class="sxs-lookup"><span data-stu-id="24271-110">Oracle databases</span></span>  
  
-   [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] <span data-ttu-id="24271-111">sources de données d’exploration de données et multidimensionnelles</span><span class="sxs-lookup"><span data-stu-id="24271-111">multidimensional and data mining data sources</span></span>  
  
-   <span data-ttu-id="24271-112">Sources de données XML</span><span class="sxs-lookup"><span data-stu-id="24271-112">XML data sources</span></span>  
  
     <span data-ttu-id="24271-113">Lorsque vous utilisez l'extension de traitement des données XML pour les données des abonnés, veillez à augmenter les valeurs des paramètres de délai d'attente des requêtes dans l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="24271-113">When using the XML data processing extension for subscriber data, be sure to increase the query timeout settings in the subscription.</span></span> <span data-ttu-id="24271-114">L'extension de traitement des données XML utilise des millisecondes (et non des secondes) pour les valeurs de délai d'attente des requêtes.</span><span class="sxs-lookup"><span data-stu-id="24271-114">The XML data processing extension uses milliseconds rather than seconds for query timeout values.</span></span> <span data-ttu-id="24271-115">Si vous n'augmentez pas la valeur du délai d'attente, il est possible que l'abonnement échoue en raison d'une durée de traitement insuffisante.</span><span class="sxs-lookup"><span data-stu-id="24271-115">If you do not increase the timeout value, the subscription might fail due to insufficient processing time.</span></span>  
  
     <span data-ttu-id="24271-116">Évitez d’utiliser l’option **Informations d’identification non requises** quand vous configurez la connexion à la source de données de l’abonné.</span><span class="sxs-lookup"><span data-stu-id="24271-116">Avoid using the **Credentials are not required** option when configuring the connection to the subscriber data source.</span></span> <span data-ttu-id="24271-117">Il est recommandé d'opter pour des informations d'identification stockées lorsque vous utilisez l'extension de traitement des données XML pour récupérer les données d'abonnement lors de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="24271-117">Stored credentials are recommended when using the XML data processing extension to retrieve subscription data at run time.</span></span>  
  
 <span data-ttu-id="24271-118">Vous serez peut-être en mesure d'utiliser d'autres types de données pris en charge, mais il n'est pas certain qu'ils fonctionnent tous.</span><span class="sxs-lookup"><span data-stu-id="24271-118">You might be able to use other supported data source types, but not all of them are guaranteed to work.</span></span> <span data-ttu-id="24271-119">Par exemple, les types de sources de données suivants ne peuvent pas être utilisés pour les données des abonnés :</span><span class="sxs-lookup"><span data-stu-id="24271-119">For example, the following data source types cannot be used for subscriber data:</span></span>  
  
-   <span data-ttu-id="24271-120">Bases de données SAP Netweaver BI</span><span class="sxs-lookup"><span data-stu-id="24271-120">SAP Netweaver BI databases</span></span>  
  
-   <span data-ttu-id="24271-121">Modèles de rapport</span><span class="sxs-lookup"><span data-stu-id="24271-121">report models</span></span>  
  
 <span data-ttu-id="24271-122">Si vous disposez d’une extension de traitement de données que vous voulez utiliser dans les abonnements pilotés par les données, cette extension doit implémenter les interfaces <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> et <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> .</span><span class="sxs-lookup"><span data-stu-id="24271-122">If you have a custom data processing extension that you want to use in data-driven subscriptions, it must implement the <xref:Microsoft.ReportingServices.DataProcessing.IDbCommand> and the <xref:Microsoft.ReportingServices.DataProcessing.IDataReader> interfaces.</span></span> <span data-ttu-id="24271-123">L'extension de traitement des données doit prendre en charge une exécution de requête schéma exclusivement.</span><span class="sxs-lookup"><span data-stu-id="24271-123">The data processing extension must support a schema-only query execution.</span></span> <span data-ttu-id="24271-124">Cette requête permet de récupérer les métadonnées des colonnes lors de la conception, afin que les utilisateurs puissent mapper les colonnes aux options de remise et aux paramètres de rapport dans la définition d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="24271-124">This query is used to retrieve column metadata at design-time so that users can map columns to delivery options and report parameters in the subscription definition.</span></span> <span data-ttu-id="24271-125">L'exécution de requêtes schéma exclusivement intervient très tôt dans le processus, lorsque l'utilisateur définit l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="24271-125">Schema-only query execution occurs at an early stage when the user is defining the subscription.</span></span>  
  
## <a name="query-requirements"></a><span data-ttu-id="24271-126">Impératifs liés aux requêtes</span><span class="sxs-lookup"><span data-stu-id="24271-126">Query Requirements</span></span>  
 <span data-ttu-id="24271-127">Lorsque vous créez une requête qui récupère les données d'abonnement, gardez à l'esprit les points suivants :</span><span class="sxs-lookup"><span data-stu-id="24271-127">When creating query that retrieves subscription data, keep the following points in mind:</span></span>  
  
-   <span data-ttu-id="24271-128">Vous ne pouvez créer qu'une seule requête pour l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="24271-128">You can only create one query for the subscription.</span></span>  
  
-   <span data-ttu-id="24271-129">La requête doit retourner toutes les valeurs que vous voulez utiliser pour les options de remise et pour la spécification des paramètres de rapport.</span><span class="sxs-lookup"><span data-stu-id="24271-129">The query must return all of the values that you want to use for delivery options and for specifying report parameters.</span></span>  
  
-   <span data-ttu-id="24271-130">Le serveur de rapports créera une remise de rapport pour chaque ligne du jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="24271-130">The report server will create a report delivery for every row in the result set.</span></span> <span data-ttu-id="24271-131">Si le premier jeu de résultats est composé de trois cents lignes, le serveur de rapports tentera de remettre trois cents rapports.</span><span class="sxs-lookup"><span data-stu-id="24271-131">If the result set consists of three hundred rows, the report server will attempt to deliver three hundred reports.</span></span>  
  
## <a name="setting-delivery-options-using-variable-data-from-a-subscriber-database"></a><span data-ttu-id="24271-132">Définition des options de remise à l'aide de données de variable d'une base de données d'abonnés</span><span class="sxs-lookup"><span data-stu-id="24271-132">Setting Delivery Options Using Variable Data from a Subscriber Database</span></span>  
 <span data-ttu-id="24271-133">Vous pouvez utiliser les données de la base de données d'abonnés pour personnaliser les options de remise de chaque destinataire.</span><span class="sxs-lookup"><span data-stu-id="24271-133">You can use data in the subscriber database to customize delivery options for each recipient.</span></span> <span data-ttu-id="24271-134">Le type d'extension de remise que vous utilisez détermine les options disponibles.</span><span class="sxs-lookup"><span data-stu-id="24271-134">The kind of delivery extension you are using determines which options are available.</span></span> <span data-ttu-id="24271-135">Si vous utilisez l'extension de remise par messagerie électronique du serveur de rapports, la requête doit contenir une adresse de messagerie pour chaque abonné.</span><span class="sxs-lookup"><span data-stu-id="24271-135">If you are using the report server e-mail delivery extension, the query should contain an e-mail alias for each subscriber.</span></span> <span data-ttu-id="24271-136">Si vous utilisez une extension de remise par partage de fichiers, les données d'abonnés doivent inclure des valeurs pouvant être utilisées pour créer des fichiers de rapports spécifiques aux abonnés ou pour fournir une destination pour la remise.</span><span class="sxs-lookup"><span data-stu-id="24271-136">If you are using file share delivery, the subscriber data should include values that can be used to create subscriber-specific report files or to provide a destination for the delivery.</span></span> <span data-ttu-id="24271-137">Pour plus d’informations, consultez [remise par partage de fichiers dans Reporting Services](file-share-delivery-in-reporting-services.md) et [remise par courrier électronique dans Reporting Services](e-mail-delivery-in-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="24271-137">For more information, see [File Share Delivery in Reporting Services](file-share-delivery-in-reporting-services.md) and [E-Mail Delivery in Reporting Services](e-mail-delivery-in-reporting-services.md).</span></span>  
  
## <a name="passing-parameter-values-from-the-subscriber-database-to-the-report"></a><span data-ttu-id="24271-138">Transmission de valeurs de paramètres de la base de données d'abonnés au rapport</span><span class="sxs-lookup"><span data-stu-id="24271-138">Passing Parameter Values from the Subscriber Database to the Report</span></span>  
 <span data-ttu-id="24271-139">Si vous créez un abonnement piloté par les données pour un rapport paramétrable, vous pouvez utiliser des valeurs de paramètres de variable pour personnaliser la production de chaque rapport.</span><span class="sxs-lookup"><span data-stu-id="24271-139">If you are creating a data-driven subscription for a parameterized report, you can use variable parameter values to customize the output of each report.</span></span> <span data-ttu-id="24271-140">Par exemple, une base de données d'abonnés peut contenir des numéros d'identification d'employés, des dates d'embauche, des postes et des adresses de lieux de travail dont vous pouvez vous servir pour filtrer les données du rapport.</span><span class="sxs-lookup"><span data-stu-id="24271-140">For example, the subscriber database might contain employee identification numbers, hire dates, job titles, and office location information that can be used to filter report data.</span></span> <span data-ttu-id="24271-141">Si le rapport accepte des paramètres basés sur ces données de colonnes, vous pouvez mapper le paramètre à la colonne appropriée.</span><span class="sxs-lookup"><span data-stu-id="24271-141">If the report accepts parameters that are based on these or other available column data, you can map the parameter to the appropriate column.</span></span>  
  
 <span data-ttu-id="24271-142">Lors du mappage de champs d'abonné à des paramètres de rapport, vérifiez que les types de données et les longueurs de colonnes sont compatibles.</span><span class="sxs-lookup"><span data-stu-id="24271-142">When mapping subscriber fields to report parameters, make sure that the data types and column lengths are compatible.</span></span> <span data-ttu-id="24271-143">En cas de non-correspondance du type de données, une erreur se produit lors du traitement des abonnements.</span><span class="sxs-lookup"><span data-stu-id="24271-143">If there is a data type mismatch, an error will occur during subscription processing.</span></span> <span data-ttu-id="24271-144">Pour en savoir plus sur l’utilisation des données dans un rapport paramétrable, consultez [Créer un abonnement piloté par les données &#40;didacticiel SSRS&#41;](../create-a-data-driven-subscription-ssrs-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="24271-144">To learn more about using subscriber data in a parameterized report, see [Create a Data-Driven Subscription &#40;SSRS Tutorial&#41;](../create-a-data-driven-subscription-ssrs-tutorial.md).</span></span>  
  
## <a name="modifying-the-subscriber-data-source"></a><span data-ttu-id="24271-145">Modification de la source de données des abonnés</span><span class="sxs-lookup"><span data-stu-id="24271-145">Modifying the Subscriber Data Source</span></span>  
 <span data-ttu-id="24271-146">Les modifications suivantes apportées à la source de données peuvent empêcher l'exécution de l'abonnement :</span><span class="sxs-lookup"><span data-stu-id="24271-146">The following modifications to the subscriber data source can prevent the subscription from running:</span></span>  
  
-   <span data-ttu-id="24271-147">suppression des colonnes référencées dans l'abonnement ;</span><span class="sxs-lookup"><span data-stu-id="24271-147">Removing columns that are referenced in the subscription.</span></span>  
  
-   <span data-ttu-id="24271-148">modification de la structure de la table de la source de données ;</span><span class="sxs-lookup"><span data-stu-id="24271-148">Modifying the table structure of the data source.</span></span>  
  
-   <span data-ttu-id="24271-149">modification du type de données et de diverses propriétés de colonne.</span><span class="sxs-lookup"><span data-stu-id="24271-149">Changing data type and other column properties.</span></span>  
  
 <span data-ttu-id="24271-150">Si vous procédez à des modifications de ce type, vous devez mettre à jour l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="24271-150">If you make any of these changes, you must update the subscription.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="24271-151">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="24271-151">See Also</span></span>  
 <span data-ttu-id="24271-152">[Créer, modifier et supprimer un abonnement piloté par les données](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="24271-152">[Create, Modify, and Delete a Data-Driven Subscription](data-driven-subscriptions.md) </span></span>  
 <span data-ttu-id="24271-153">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span><span class="sxs-lookup"><span data-stu-id="24271-153">[Data-Driven Subscriptions](data-driven-subscriptions.md) </span></span>  
 [<span data-ttu-id="24271-154">Abonnements et remise &#40;Reporting Services&#41;</span><span class="sxs-lookup"><span data-stu-id="24271-154">Subscriptions and Delivery &#40;Reporting Services&#41;</span></span>](subscriptions-and-delivery-reporting-services.md)  
  
  
