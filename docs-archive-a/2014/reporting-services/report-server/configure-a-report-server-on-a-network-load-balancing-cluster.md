---
title: Configurer un serveur de rapports sur un cluster avec équilibrage de la charge réseau | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], network load balancing
ms.assetid: 6bfa5698-de65-43c3-b940-044f41c162d3
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 5de36ab620db63294d2a5ec98fad6c45af201d26
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87611559"
---
# <a name="configure-a-report-server-on-a-network-load-balancing-cluster"></a><span data-ttu-id="7eee0-102">Configurer un serveur de rapports sur un cluster avec équilibrage de la charge réseau</span><span class="sxs-lookup"><span data-stu-id="7eee0-102">Configure a Report Server on a Network Load Balancing Cluster</span></span>
  <span data-ttu-id="7eee0-103">Si vous configurez la montée en puissance parallèle du serveur de rapports en vue de son exécution sur un cluster avec équilibrage de la charge réseau (NLB, Network Load Balancing), vous devez effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7eee0-103">If you are configuring a report server scale-out to run on a Network Load Balancing (NLB) cluster, you must do the following:</span></span>  
  
-   <span data-ttu-id="7eee0-104">S'assurer que le cluster avec équilibrage de la charge réseau est accessible via un nom de serveur virtuel mappé avec l'adresse IP du serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="7eee0-104">Ensure that the NLB cluster is accessible through a virtual server name that maps to the virtual server IP address.</span></span> <span data-ttu-id="7eee0-105">Un nom de serveur virtuel est nécessaire pour configurer un point d'entrée unique au cluster avec équilibrage de la charge réseau.</span><span class="sxs-lookup"><span data-stu-id="7eee0-105">A virtual server name is necessary so that you can configure a single point of entry to the NLB cluster.</span></span> <span data-ttu-id="7eee0-106">Lorsque vous configurerez une URL pour chaque instance du serveur de rapports, vous spécifierez le nom du serveur virtuel en tant qu'hôte.</span><span class="sxs-lookup"><span data-stu-id="7eee0-106">When you configure a URL for each report server instance, you will specify the virtual server name as the host.</span></span>  
  
-   <span data-ttu-id="7eee0-107">Configurez la validation de l'état d'affichage pour prendre en charge la consultation des rapports interactifs.</span><span class="sxs-lookup"><span data-stu-id="7eee0-107">Configure view state validation to support interactive report viewing.</span></span> <span data-ttu-id="7eee0-108">Les rapports interactifs sont en général restitués à plusieurs reprises au cours d'une session mono-utilisateur afin de permettre la visualisation de données nouvelles ou différentes en réponse aux actions de l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7eee0-108">Interactive reports are typically rendered numerous times during a single user session to visualize new or different data in response to user actions.</span></span> <span data-ttu-id="7eee0-109">Configurer la validation de l'état d'affichage assure la continuité au cours de la session utilisateur quel que soit le serveur de rapports qui répond à la demande réelle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-109">By configuring view state validation, continuity is preserved within the user session regardless of which report server services the actual request.</span></span>  
  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="7eee0-110">ne fournit pas de fonctionnalités pour l’équilibrage de charge d’un déploiement avec montée en puissance parallèle ni pour la définition d’un point unique d’accès via une URL partagée.</span><span class="sxs-lookup"><span data-stu-id="7eee0-110">does not provide functionality for load balancing a scale-out deployment or for defining a single point of access through a shared URL.</span></span> <span data-ttu-id="7eee0-111">Vous devez implémenter une solution logicielle ou matérielle distincte de cluster avec équilibrage de la charge réseau afin de prendre en charge un déploiement avec montée en puissance parallèle de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7eee0-111">You must implement a separate software or hardware NLB cluster solution to support a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] scale-out deployment.</span></span>  
  
 <span data-ttu-id="7eee0-112">Vous pouvez installer [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] sur les nœuds qui font déjà partie d'un cluster avec équilibrage de la charge réseau ou configurer d'abord un déploiement avec montée en puissance parallèle, puis installer le logiciel de cluster.</span><span class="sxs-lookup"><span data-stu-id="7eee0-112">You can install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] on nodes that are already part of an NLB cluster, or you can configure a scale-out deployment first and then install cluster software.</span></span>  
  
## <a name="steps-for-report-server-deployment-on-an-nlb-cluster"></a><span data-ttu-id="7eee0-113">Étapes pour le déploiement du serveur de rapports sur un cluster avec équilibrage de la charge réseau</span><span class="sxs-lookup"><span data-stu-id="7eee0-113">Steps for Report Server Deployment on an NLB Cluster</span></span>  
 <span data-ttu-id="7eee0-114">Appuyez-vous sur les indications suivantes pour installer et configurer votre déploiement :</span><span class="sxs-lookup"><span data-stu-id="7eee0-114">Use the following guidelines to install and configure your deployment:</span></span>  
  
|<span data-ttu-id="7eee0-115">Étape</span><span class="sxs-lookup"><span data-stu-id="7eee0-115">Step</span></span>|<span data-ttu-id="7eee0-116">Description</span><span class="sxs-lookup"><span data-stu-id="7eee0-116">Description</span></span>|<span data-ttu-id="7eee0-117">Informations complémentaires</span><span class="sxs-lookup"><span data-stu-id="7eee0-117">More information</span></span>|  
|----------|-----------------|----------------------|  
|<span data-ttu-id="7eee0-118">1</span><span class="sxs-lookup"><span data-stu-id="7eee0-118">1</span></span>|<span data-ttu-id="7eee0-119">Avant d'installer Reporting Services sur les nœuds de serveurs d'un cluster avec équilibrage de la charge réseau, vérifiez les spécifications du déploiement avec montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-119">Before you install Reporting Services on server nodes in an NLB cluster, check the requirements for scale-out deployment.</span></span>|<span data-ttu-id="7eee0-120">[Configurer un déploiement avec montée en puissance parallèle de serveurs de rapports en mode natif &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Documentation en ligne de</span><span class="sxs-lookup"><span data-stu-id="7eee0-120">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online</span></span>|  
|<span data-ttu-id="7eee0-121">2</span><span class="sxs-lookup"><span data-stu-id="7eee0-121">2</span></span>|<span data-ttu-id="7eee0-122">Configurez le cluster avec équilibrage de la charge réseau et vérifiez son bon fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="7eee0-122">Configure the NLB cluster and verify it is working correctly.</span></span><br /><br /> <span data-ttu-id="7eee0-123">Veillez à mapper un nom d'en-tête de l'hôte à l'adresse IP du serveur virtuel du cluster avec équilibrage de la charge réseau.</span><span class="sxs-lookup"><span data-stu-id="7eee0-123">Be sure to map a host header name to the virtual server IP of the NLB cluster.</span></span> <span data-ttu-id="7eee0-124">Le nom d'en-tête de l'hôte est utilisé dans l'URL du serveur de rapports et présente l'avantage d'être plus facile à retenir et à taper qu'une adresse IP.</span><span class="sxs-lookup"><span data-stu-id="7eee0-124">The host header name is used in the report server URL, and is easier to remember and type than an IP address.</span></span>|<span data-ttu-id="7eee0-125">Pour plus d'informations, consultez la documentation Windows Server correspondant à la version du système d'exploitation Windows que vous exécutez.</span><span class="sxs-lookup"><span data-stu-id="7eee0-125">For more information, see the Windows Server product documentation for the version of the Windows operating system that you run.</span></span>|  
|<span data-ttu-id="7eee0-126">3</span><span class="sxs-lookup"><span data-stu-id="7eee0-126">3</span></span>|<span data-ttu-id="7eee0-127">Ajoutez le nom NetBIOS et de domaine complet pour l’en-tête de l’hôte dans la liste des **BackConnectionHostNames** stockés dans le Registre Windows.</span><span class="sxs-lookup"><span data-stu-id="7eee0-127">Add the NetBIOS and Fully Qualified Domain Name (FQDN) for the host header to the list of **BackConnectionHostNames** stored in the Windows Registry.</span></span> <span data-ttu-id="7eee0-128">Utilisez les étapes de la **Méthode 2 : Spécification des noms d’hôte** dans [l’article 896861 de la Base de connaissances](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861), avec la modification suivante.</span><span class="sxs-lookup"><span data-stu-id="7eee0-128">Use the steps in **Method 2: Specify host names** in [KB 896861](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861), with the following adjustment.</span></span> <span data-ttu-id="7eee0-129">**L’étape 7** de l’article de la Base de connaissances indique « Quittez l’Éditeur du Registre, puis redémarrez le service IISAdmin ».</span><span class="sxs-lookup"><span data-stu-id="7eee0-129">**Step 7** of the KB article says "Quit Registry Editor, and then restart the IISAdmin service."</span></span> <span data-ttu-id="7eee0-130">À la place, redémarrez l'ordinateur pour vous assurer que les modifications prennent effet.</span><span class="sxs-lookup"><span data-stu-id="7eee0-130">Instead, reboot the computer to ensure the changes take effect.</span></span><br /><br /> <span data-ttu-id="7eee0-131">Par exemple, si le nom d’en-tête de l’hôte \<MyServer> est un nom virtuel pour le nom d’ordinateur Windows « contoso », vous pouvez probablement référencer le formulaire de nom de domaine complet comme « contoso.domain.com ».</span><span class="sxs-lookup"><span data-stu-id="7eee0-131">For example, if the host header name \<MyServer> is a virtual name for the Windows computer name of "contoso", you can probably reference the FQDN form as "contoso.domain.com".</span></span> <span data-ttu-id="7eee0-132">Vous devrez ajouter le nom d’en-tête de l’hôte (MyServer) et le nom de domaine complet (contoso.domain.com) à la liste dans **BackConnectionHostNames**.</span><span class="sxs-lookup"><span data-stu-id="7eee0-132">You will need to add both the hostheader name (MyServer ) and FQDN name (contoso.domain.com) to the list in **BackConnectionHostNames**.</span></span>|<span data-ttu-id="7eee0-133">Cette étape est requise si votre environnement serveur implique l'authentification NTLM sur l'ordinateur local, créant une connexion de retour de boucle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-133">This step is required if your server environment involves NTLM authentication on the local computer, creating a loop back connection.</span></span><br /><br /> <span data-ttu-id="7eee0-134">Si tel est le cas, les demandes entre le gestionnaire de rapports et le serveur de rapports vont échouer avec l'erreur 401 (Non autorisé).</span><span class="sxs-lookup"><span data-stu-id="7eee0-134">If this is the case, you will experience the requests between Report Manager and Report Server to fail with 401 (Unauthorized).</span></span>|  
|<span data-ttu-id="7eee0-135">4</span><span class="sxs-lookup"><span data-stu-id="7eee0-135">4</span></span>|<span data-ttu-id="7eee0-136">Installer [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] en mode fichiers uniquement sur les nœuds qui font déjà partie d'un cluster avec équilibrage de la charge réseau et configurer les instances du serveur de rapports pour un déploiement avec montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-136">Install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] in files-only mode on nodes that are already part of a NLB cluster, and configure the report server instances for scale-out deployment.</span></span><br /><br /> <span data-ttu-id="7eee0-137">La montée en puissance parallèle que vous configurez ne répond pas aux demandes adressées à l'IP du serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="7eee0-137">The scale-out that you configure might not respond to requests that are directed to the virtual server IP.</span></span> <span data-ttu-id="7eee0-138">La configuration de la montée en puissance parallèle pour l'utilisation de l'IP du serveur virtuel intervient à un stade ultérieur, après la configuration de la validation de l'état d'affichage.</span><span class="sxs-lookup"><span data-stu-id="7eee0-138">Configuring the scale-out to use the virtual server IP occurs at a later step, after you configure view state validation.</span></span>|[<span data-ttu-id="7eee0-139">Configurer un déploiement avec montée en puissance parallèle de serveurs de rapports en mode natif &#40;Gestionnaire de configuration de SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="7eee0-139">Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md)|  
|<span data-ttu-id="7eee0-140">5</span><span class="sxs-lookup"><span data-stu-id="7eee0-140">5</span></span>|<span data-ttu-id="7eee0-141">Configurez la validation de l'état d'affichage.</span><span class="sxs-lookup"><span data-stu-id="7eee0-141">Configure view state validation.</span></span><br /><br /> <span data-ttu-id="7eee0-142">Pour de meilleurs résultats, effectuez cette étape après avoir configuré le déploiement avec montée en puissance parallèle et avant de configurer les instances du serveur de rapports pour l'utilisation de l'IP du serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="7eee0-142">For best results, perform this step after you configure the scale-out deployment, and before you configure the report server instances to use the virtual server IP.</span></span> <span data-ttu-id="7eee0-143">En configurant d'abord la validation de l'état d'affichage, vous pouvez éviter les exceptions sur l'échec de la validation de l'état quand les utilisateurs tentent d'accéder aux rapports interactifs.</span><span class="sxs-lookup"><span data-stu-id="7eee0-143">By configuring view state validation first, you can avoid exceptions about failed state validation when users attempt to access interactive reports.</span></span>|<span data-ttu-id="7eee0-144">[Comment configurer la validation de l’état d’affichage](#ViewState) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="7eee0-144">[How to Configure View State Validation](#ViewState) in this topic.</span></span>|  
|<span data-ttu-id="7eee0-145">6</span><span class="sxs-lookup"><span data-stu-id="7eee0-145">6</span></span>|<span data-ttu-id="7eee0-146">Configurer `Hostname` et `UrlRoot` pour utiliser l'adresse IP de serveur virtuel du cluster avec équilibrage de la charge réseau.</span><span class="sxs-lookup"><span data-stu-id="7eee0-146">Configure `Hostname` and `UrlRoot` to use the virtual server IP of the NLB cluster.</span></span>|<span data-ttu-id="7eee0-147">[Comment configurer Hostname et UrlRoot](#SpecifyingVirtualServerName) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="7eee0-147">[How to Configure Hostname and UrlRoot](#SpecifyingVirtualServerName) in this topic.</span></span>|  
|<span data-ttu-id="7eee0-148">7</span><span class="sxs-lookup"><span data-stu-id="7eee0-148">7</span></span>|<span data-ttu-id="7eee0-149">Vérifiez que les serveurs sont accessibles via le nom d'hôte que vous avez spécifié.</span><span class="sxs-lookup"><span data-stu-id="7eee0-149">Verify the servers are accessible through the host name you specified.</span></span>|<span data-ttu-id="7eee0-150">[Vérifier l’accès au serveur de rapports](#Verify) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="7eee0-150">[Verify Report Server Access](#Verify) in this topic.</span></span>|  
  
##  <a name="how-to-configure-view-state-validation"></a><a name="ViewState"></a><span data-ttu-id="7eee0-151">Comment configurer la validation de l’état d’affichage</span><span class="sxs-lookup"><span data-stu-id="7eee0-151">How to Configure View State Validation</span></span>  
 <span data-ttu-id="7eee0-152">Pour exécuter un déploiement avec montée en puissance parallèle sur un cluster avec équilibrage de la charge réseau, vous devez configurer la validation de l'état d'affichage afin que les utilisateurs puissent consulter les rapports HTML interactifs.</span><span class="sxs-lookup"><span data-stu-id="7eee0-152">To run a scale-out deployment on an NLB cluster, you must configure view state validation so that users can view interactive HTML reports.</span></span> <span data-ttu-id="7eee0-153">Vous devez accomplir ces tâches pour le serveur de rapports et pour le Gestionnaire de rapports.</span><span class="sxs-lookup"><span data-stu-id="7eee0-153">You must do this for the report server and for Report Manager.</span></span>  
  
 <span data-ttu-id="7eee0-154">La validation de l'état d'affichage est contrôlée par ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="7eee0-154">View state validation is controlled by the ASP.NET.</span></span> <span data-ttu-id="7eee0-155">Par défaut, la validation de l'état d'affichage est activée et utilise l'identité du service Web pour effectuer la validation.</span><span class="sxs-lookup"><span data-stu-id="7eee0-155">By default, view state validation is enabled and uses the identity of the Web service to perform the validation.</span></span> <span data-ttu-id="7eee0-156">Toutefois, dans un scénario de cluster avec équilibrage de la charge réseau, il existe plusieurs instances de services et plusieurs identités de services Web qui s'exécutent sur différents ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="7eee0-156">However, in an NLB cluster scenario, there are multiple service instances and web service identities that run on different computers.</span></span> <span data-ttu-id="7eee0-157">L'identité de service étant différente pour chaque nœud, vous ne pouvez pas vous appuyer sur une seule identité de processus pour effectuer la validation.</span><span class="sxs-lookup"><span data-stu-id="7eee0-157">Because the service identity varies for each node, you cannot rely on a single process identity to perform the validation.</span></span>  
  
 <span data-ttu-id="7eee0-158">Pour contourner ce problème, vous pouvez générer une clé de validation arbitraire pour prendre en charge la validation de l'état d'affichage, puis configurer manuellement chaque nœud de serveur de rapports de manière à ce qu'il utilise la même clé.</span><span class="sxs-lookup"><span data-stu-id="7eee0-158">To work around this issue, you can generate an arbitrary validation key to support view state validation, and then manually configure each report server node to use the same key.</span></span> <span data-ttu-id="7eee0-159">Vous pouvez utiliser n'importe quelle séquence hexadécimale générée de façon aléatoire.</span><span class="sxs-lookup"><span data-stu-id="7eee0-159">You can use any randomly generated hexadecimal sequence.</span></span> <span data-ttu-id="7eee0-160">L'algorithme de validation (tel que SHA1) détermine la longueur que doit avoir la séquence hexadécimale.</span><span class="sxs-lookup"><span data-stu-id="7eee0-160">The validation algorithm (such as SHA1) determines how long the hexadecimal sequence must be.</span></span>  
  
1.  <span data-ttu-id="7eee0-161">Générez une clé de validation et clé de déchiffrement en utilisant les fonctionnalités de création automatique fourni par le [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7eee0-161">Generate a validation key and decryption key by using the autogenerate functionality provided by the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="7eee0-162">À la fin, vous devez avoir une seule entrée de <`machineKey`> que vous pouvez coller dans le fichier Web.config pour chaque instance de gestionnaire de rapports dans le déploiement avec montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-162">In the end, you must have a single <`machineKey`> entry that you can paste into the Web.config file for each Report Manager instance in the scale-out deployment.</span></span>  
  
     <span data-ttu-id="7eee0-163">L'exemple suivant illustre la valeur que vous devez obtenir.</span><span class="sxs-lookup"><span data-stu-id="7eee0-163">The following example provides an illustration of the value you must obtain.</span></span> <span data-ttu-id="7eee0-164">Ne copiez pas cet exemple dans vos fichiers de configuration ; les valeurs de clé ne sont pas valides.</span><span class="sxs-lookup"><span data-stu-id="7eee0-164">Do not copy the example into your configuration files; the key values are not valid.</span></span>  
  
    ```  
    <machineKey validationKey="123455555" decryptionKey="678999999" validation="SHA1" decryption="AES"/>  
    ```  
  
2.  <span data-ttu-id="7eee0-165">Ouvrez le fichier Web.config pour Gestionnaire de rapports et, dans la section> du <, `system.web` collez l' `machineKey` élément <> que vous avez généré.</span><span class="sxs-lookup"><span data-stu-id="7eee0-165">Open the Web.config file for Report Manager, and in the <`system.web`> section paste the <`machineKey`> element that you generated.</span></span> <span data-ttu-id="7eee0-166">Par défaut, le fichier Web.config du Gestionnaire de rapports se trouve dans \Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span><span class="sxs-lookup"><span data-stu-id="7eee0-166">By default, the Report Manager Web.config file is located in \Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span></span>  
  
3.  <span data-ttu-id="7eee0-167">Enregistrez le fichier .</span><span class="sxs-lookup"><span data-stu-id="7eee0-167">Save the file.</span></span>  
  
4.  <span data-ttu-id="7eee0-168">Répétez l'étape précédente pour chaque serveur de rapports impliqué dans le déploiement avec montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-168">Repeat the previous step for each report server in the scale-out deployment.</span></span>  
  
5.  <span data-ttu-id="7eee0-169">Vérifiez que tous les fichiers Web.Config dans les dossiers \Reporting Services\Report Manager contiennent des `machineKey` éléments de> <identiques dans la `system.web` section> de <.</span><span class="sxs-lookup"><span data-stu-id="7eee0-169">Verify that all Web.Config files in the \Reporting Services\Report Manager folders contain identical <`machineKey`> elements in the <`system.web`> section.</span></span>  
  
##  <a name="how-to-configure-hostname-and-urlroot"></a><a name="SpecifyingVirtualServerName"></a> <span data-ttu-id="7eee0-170">Comment configurer Hostname et UrlRoot</span><span class="sxs-lookup"><span data-stu-id="7eee0-170">How to Configure Hostname and UrlRoot</span></span>  
 <span data-ttu-id="7eee0-171">Pour configurer un déploiement avec montée en puissance parallèle du serveur de rapports sur un cluster avec équilibrage de la charge réseau, vous devez définir un seul nom de serveur virtuel qui fournit un point d'accès unique au cluster de serveurs.</span><span class="sxs-lookup"><span data-stu-id="7eee0-171">To configure a report server scale-out deployment on an NLB cluster, you must define a single virtual server name that provides a single point of access to the server cluster.</span></span> <span data-ttu-id="7eee0-172">Puis, inscrivez le nom du serveur virtuel auprès du serveur de noms de domaine de votre environnement.</span><span class="sxs-lookup"><span data-stu-id="7eee0-172">Then register this virtual server name with the Domain Name Server (DNS) in your environment.</span></span>  
  
 <span data-ttu-id="7eee0-173">Après avoir défini le nom du serveur virtuel, vous pouvez configurer les propriétés `Hostname` et `UrlRoot` du fichier RSReportServer.config de façon à inclure le nom du serveur virtuel dans l'URL du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="7eee0-173">After you define the virtual server name, you can configure the `Hostname` and `UrlRoot` properties in the RSReportServer.config file to include the virtual server name in the report server URL.</span></span>  
  
 <span data-ttu-id="7eee0-174">Configurez la propriété `Hostname` lorsque vous utilisez des réservations d'URL spécifiant des caractères génériques dans votre environnement de création de rapports.</span><span class="sxs-lookup"><span data-stu-id="7eee0-174">Configure the `Hostname` property when you are using wildcard URL reservations in your reporting environment.</span></span> <span data-ttu-id="7eee0-175">Lorsque vous spécifiez la propriété `Hostname` comme nom de serveur virtuel du serveur avec équilibrage de la charge réseau, le trafic réseau de l'environnement de création de rapports est dirigé vers le serveur avec équilibrage de la charge réseau.</span><span class="sxs-lookup"><span data-stu-id="7eee0-175">When you specify the `Hostname` property to be the virtual server name of the NLB server, network traffic for the reporting environment is directed to the NLB server.</span></span> <span data-ttu-id="7eee0-176">Le serveur NLB distribue ensuite les demandes parmi les nœuds du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="7eee0-176">The NLB then distributes requests among the report server nodes.</span></span>  
  
 <span data-ttu-id="7eee0-177">En outre, configurez la propriété `UrlRoot` afin que les liens du rapport fonctionnent dans les rapports exportés vers des rapports statiques, tels que ceux au format Excel ou PDF, ou dans les rapports créés par abonnements, tels que les abonnements de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="7eee0-177">Additionally, configure the `UrlRoot` property so that report links work in reports that have been exported to static reports, such as in an Excel or PDF format, or in reports that are generated by subscriptions, such as e-mail subscriptions.</span></span>  
  
 <span data-ttu-id="7eee0-178">Si vous intégrez [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] avec [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] 3,0 ou [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007, ou si vous hébergez vos rapports dans une application Web personnalisée, vous devrez peut-être configurer uniquement la `UrlRoot` propriété.</span><span class="sxs-lookup"><span data-stu-id="7eee0-178">If you integrate [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] with [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] 3.0 or [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007, or you host your reports in a custom Web application, you might need to configure only the `UrlRoot` property.</span></span> <span data-ttu-id="7eee0-179">Dans ce cas, configurez la propriété `UrlRoot` comme URL du site SharePoint ou de l'application Web.</span><span class="sxs-lookup"><span data-stu-id="7eee0-179">In this case, configure the `UrlRoot` property to be the URL of the SharePoint site or Web application.</span></span> <span data-ttu-id="7eee0-180">Le trafic réseau de l'environnement de création de rapports est alors dirigé vers l'application qui gère les rapports, et non vers le serveur de rapports ou le cluster avec équilibrage de la charge réseau (NLB, Network Load Balancing).</span><span class="sxs-lookup"><span data-stu-id="7eee0-180">This will direct network traffic for the reporting environment to the application that handles the reports rather than to the report server or NLB cluster.</span></span>  
  
 <span data-ttu-id="7eee0-181">Ne modifiez pas `ReportServerUrl`.</span><span class="sxs-lookup"><span data-stu-id="7eee0-181">Do not modify `ReportServerUrl`.</span></span> <span data-ttu-id="7eee0-182">Si vous modifiez cette URL, un aller-retour supplémentaire au serveur virtuel sera nécessaire pour chaque demande interne à gérer.</span><span class="sxs-lookup"><span data-stu-id="7eee0-182">If you modify this URL, you will introduce an extra roundtrip through the virtual server each time an internal request is handled.</span></span> <span data-ttu-id="7eee0-183">Pour plus d’informations, consultez [URL des fichiers de configuration &#40;Gestionnaire de configuration de SSRS&#41;](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="7eee0-183">For more information, see [URLs in Configuration Files  &#40;SSRS Configuration Manager&#41;](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span></span> <span data-ttu-id="7eee0-184">Pour plus d’informations sur la modification du fichier de configuration, consultez [Modifier un fichier de configuration Reporting Services &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) dans la documentation en ligne de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7eee0-184">For more information about editing the configuration file, see [Modify a Reporting Services Configuration File &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
1.  <span data-ttu-id="7eee0-185">Ouvrez RSReportServer.config dans un éditeur de texte.</span><span class="sxs-lookup"><span data-stu-id="7eee0-185">Open RSReportServer.config in a text editor.</span></span>  
  
2.  <span data-ttu-id="7eee0-186">Recherchez la **\<Service>** section et ajoutez les informations suivantes au fichier de configuration, en remplaçant la `Hostname` valeur par le nom du serveur virtuel de votre serveur NLB :</span><span class="sxs-lookup"><span data-stu-id="7eee0-186">Find the **\<Service>** section, and add the following information to the configuration file, replacing the `Hostname` value with the virtual server name for your NLB server:</span></span>  
  
    ```  
    <Hostname>virtual_server</Hostname>  
    ```  
  
3.  <span data-ttu-id="7eee0-187">Recherchez `UrlRoot`.</span><span class="sxs-lookup"><span data-stu-id="7eee0-187">Find `UrlRoot`.</span></span> <span data-ttu-id="7eee0-188">L’élément n’est pas spécifié dans le fichier de configuration, mais la valeur par défaut utilisée est une URL au format suivant : http://ou https:// \<*computername*> / \<*reportserver*> , où \<*reportserver*> est le nom du répertoire virtuel du service Web Report Server.</span><span class="sxs-lookup"><span data-stu-id="7eee0-188">The element is unspecified in the configuration file, but the default value used is a URL in this format: http:// or https://\<*computername*>/\<*reportserver*>, where \<*reportserver*> is the virtual directory name of the Report Server Web service.</span></span>  
  
4.  <span data-ttu-id="7eee0-189">Tapez une valeur pour `UrlRoot` qui comprend le nom virtuel du cluster au format suivant : http://ou https:// \<*virtual_server*> / \<*reportserver*> .</span><span class="sxs-lookup"><span data-stu-id="7eee0-189">Type a value for `UrlRoot` that includes the virtual name of the cluster in this format: http:// or https://\<*virtual_server*>/\<*reportserver*>.</span></span>  
  
5.  <span data-ttu-id="7eee0-190">Enregistrez le fichier .</span><span class="sxs-lookup"><span data-stu-id="7eee0-190">Save the file.</span></span>  
  
6.  <span data-ttu-id="7eee0-191">Répétez ces étapes dans chaque fichier RSReportServer.config de chaque serveur de rapports impliqué dans le déploiement par montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="7eee0-191">Repeat these steps in each RSReportServer.config file for each report server in the scale-out deployment.</span></span>  
  
##  <a name="verify-report-server-access"></a><a name="Verify"></a><span data-ttu-id="7eee0-192">Vérifier l’accès au serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="7eee0-192">Verify Report Server Access</span></span>  
 <span data-ttu-id="7eee0-193">Vérifiez que vous pouvez accéder au déploiement avec montée en puissance parallèle via le nom du serveur virtuel (par exemple, https://MyVirtualServerName/reportserver et https://MyVirtualServerName/reports) .</span><span class="sxs-lookup"><span data-stu-id="7eee0-193">Verify that you can access the scale-out deployment through the virtual server name (for example, https://MyVirtualServerName/reportserver and https://MyVirtualServerName/reports).</span></span>  
  
 <span data-ttu-id="7eee0-194">Vous pouvez vérifier quel nœud traite effectivement les rapports en examinant les fichiers journaux du serveur de rapports ou en vérifiant le journal d’exécution Reporting Services (la table du journal d’exécution contient une colonne **InstanceName** qui indique quelle instance a traité une demande particulière).</span><span class="sxs-lookup"><span data-stu-id="7eee0-194">You can check which node actually processes reports by looking at the report server log files or by checking the RS execution log (the execution log table contains a column called **InstanceName** that shows which instance processed a particular request).</span></span> <span data-ttu-id="7eee0-195">Pour plus d’informations, consultez [Fichiers journaux et sources de Reporting Services](../report-server/reporting-services-log-files-and-sources.md) dans la documentation en ligne de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7eee0-195">For more information, see [Reporting Services Log Files and Sources](../report-server/reporting-services-log-files-and-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="7eee0-196">Si vous ne pouvez pas vous connecter au serveur de rapports, vérifiez l'équilibrage de la charge réseau pour contrôler que les demandes sont envoyées au serveur de rapports et affichez le journal HTTP du serveur de rapports pour être certain que le serveur reçoit les demandes.</span><span class="sxs-lookup"><span data-stu-id="7eee0-196">If you cannot connect to the report server, check the NLB to ensure that requests are sent to the report server and view the report server HTTP log to ensure that the server is receiving the requests.</span></span>  
  
#### <a name="troubleshooting-failed-requests"></a><span data-ttu-id="7eee0-197">Dépannage des demandes ayant échoué</span><span class="sxs-lookup"><span data-stu-id="7eee0-197">Troubleshooting Failed Requests</span></span>  
 <span data-ttu-id="7eee0-198">Si les demandes n'atteignent pas les instances du serveur de rapports, consultez le fichier RSReportServer.config pour vérifier que le nom du serveur virtuel est spécifié comme nom d'hôte pour les URL du serveur de rapports :</span><span class="sxs-lookup"><span data-stu-id="7eee0-198">If requests do not reach the report server instances, check the RSReportServer.config file to verify that the virtual server name is specified as the host name for the report server URLs:</span></span>  
  
1.  <span data-ttu-id="7eee0-199">Ouvrez le fichier RSReportServer.config dans un éditeur de texte.</span><span class="sxs-lookup"><span data-stu-id="7eee0-199">Open the RSReportServer.config file in a text editor.</span></span>  
  
2.  <span data-ttu-id="7eee0-200">Recherchez <`Hostname`>, <`ReportServerUrl`> et <> `UrlRoot` , puis vérifiez le nom d’hôte pour chaque paramètre.</span><span class="sxs-lookup"><span data-stu-id="7eee0-200">Find <`Hostname`>, <`ReportServerUrl`>, and <`UrlRoot`>, and check the host name for each settings.</span></span> <span data-ttu-id="7eee0-201">Si la valeur n'est pas le nom d'hôte attendu, remplacez-le par le nom d'hôte approprié.</span><span class="sxs-lookup"><span data-stu-id="7eee0-201">If the value is not the host name you expect, replace it with the correct host name.</span></span>  
  
 <span data-ttu-id="7eee0-202">Si vous démarrez l’outil de configuration Reporting Services après avoir apporté ces modifications, l’outil peut remplacer la `ReportServerUrl` valeur par défaut des paramètres <>.</span><span class="sxs-lookup"><span data-stu-id="7eee0-202">If you start the Reporting Services Configuration tool after making these changes, the tool might change the <`ReportServerUrl`> settings to the default value.</span></span> <span data-ttu-id="7eee0-203">Conservez toujours une copie de sauvegarde des fichiers de configuration au cas où vous auriez besoin de les remplacer par la version qui contient les paramètres à utiliser.</span><span class="sxs-lookup"><span data-stu-id="7eee0-203">Always keep a backup copy of the configuration files in case you need to replace them with the version that contains the settings you want to use.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7eee0-204">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7eee0-204">See Also</span></span>  
 <span data-ttu-id="7eee0-205">[Gestionnaire de configuration de Reporting Services &#40;mode natif&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="7eee0-205">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="7eee0-206">[Configurer une URL &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="7eee0-206">[Configure a URL  &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="7eee0-207">[Configurer un déploiement avec montée en puissance parallèle de serveurs de rapports en mode natif &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="7eee0-207">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span></span>  
 [<span data-ttu-id="7eee0-208">Gérer un serveur de rapports Reporting Services en mode natif</span><span class="sxs-lookup"><span data-stu-id="7eee0-208">Manage a Reporting Services Native Mode Report Server</span></span>](manage-a-reporting-services-native-mode-report-server.md)  
  
  
