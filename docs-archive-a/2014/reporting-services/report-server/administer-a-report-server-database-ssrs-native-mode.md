---
title: Administrer une base de données du serveur de rapports (SSRS en mode natif) | Microsoft Docs
ms.custom: ''
ms.date: 08/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], databases
- renaming databases
- report server database
- databases [Reporting Services], administering
- reportservertempdb
- reportserver database
ms.assetid: 97b2e1b5-3869-4766-97b9-9bf206b52262
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: bfb1cb9108af8d3904a4ec679d2c42f11c734ade
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87611574"
---
# <a name="administer-a-report-server-database-ssrs-native-mode"></a><span data-ttu-id="8ca0d-102">Administrer une base de données du serveur de rapports (SSRS en mode natif)</span><span class="sxs-lookup"><span data-stu-id="8ca0d-102">Administer a Report Server Database (SSRS Native Mode)</span></span>
  <span data-ttu-id="8ca0d-103">Un déploiement de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] utilise deux bases de données relationnelles [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] pour le stockage interne.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-103">A [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] deployment uses two [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] relational databases for internal storage.</span></span> <span data-ttu-id="8ca0d-104">Par défaut, les bases de données ont pour nom respectif Reportserver et ReportServerTempdb.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-104">By default, the databases are named ReportServer and ReportServerTempdb.</span></span> <span data-ttu-id="8ca0d-105">La base de données ReportServerTempdb est créée à l'aide de la base de données du serveur de rapports primaire et sert à stocker les données temporaires, les informations de session et les rapports mis en mémoire cache.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-105">ReportServerTempdb is created with the primary report server database and is used to store temporary data, session information, and cached reports.</span></span>  
  
 <span data-ttu-id="8ca0d-106">Dans [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], les tâches d'administration de base de données consistent à sauvegarder et à restaurer les bases de données du serveur de rapports et à gérer les clés de chiffrement qui permettent de chiffrer et de déchiffrer les données sensibles.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-106">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], database administration tasks include backing up and restoring the report server databases and managing the encryption keys that are used to encrypt and decrypt sensitive data.</span></span>  
  
 <span data-ttu-id="8ca0d-107">Pour administrer les bases de données du serveur de rapports, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] met une série d’outils à votre disposition.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-107">To administer the report server databases, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides a variety of tools.</span></span>  
  
-   <span data-ttu-id="8ca0d-108">Pour sauvegarder ou restaurer la base de données du serveur de rapports ou encore la déplacer ou la récupérer, vous pouvez utiliser [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], les commandes [!INCLUDE[tsql](../../includes/tsql-md.md)] ou les utilitaires d’invite de commandes de base de données.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-108">To back up or restore the report server database, move a report server database, or recover a report server database, you can use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], the [!INCLUDE[tsql](../../includes/tsql-md.md)] commands, or the database command prompt utilities.</span></span> <span data-ttu-id="8ca0d-109">Pour obtenir des instructions, consultez [Déplacement des bases de données du serveur de rapports vers un autre ordinateur &#40;SSRS en mode natif&#41;](moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md) dans la documentation en ligne de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-109">For instructions, see [Moving the Report Server Databases to Another Computer &#40;SSRS Native Mode&#41;](moving-the-report-server-databases-to-another-computer-ssrs-native-mode.md) in SQL Server Books Online.</span></span>  
  
-   <span data-ttu-id="8ca0d-110">Pour copier le contenu d'une base de données dans une autre base de données du serveur de rapports, vous pouvez attacher une copie d'une base de données du serveur de rapports et l'utiliser avec une autre instance du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-110">To copy existing database content to another report server database, you can attach a copy of a report server database and use it with a different report server instance.</span></span> <span data-ttu-id="8ca0d-111">Ou encore, vous pouvez créer et exécuter un script qui utilise des appels SOAP pour recréer le contenu du serveur de rapports dans une nouvelle base de données.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-111">Or, you can create and run a script that uses SOAP calls to recreate report server content in a new database.</span></span> <span data-ttu-id="8ca0d-112">Vous pouvez utiliser l’utilitaire **rs** pour exécuter le script.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-112">You can use the **rs** utility to run the script.</span></span>  
  
-   <span data-ttu-id="8ca0d-113">Pour gérer les connexions entre le serveur de rapports et la base de données connexe et pour déterminer quelle base de données utilise une instance de serveur de rapports particulière, utilisez la page Installation de la base de données dans l'outil de configuration de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8ca0d-113">To manage connections between the report server and report server database, and to find out which database is used for a particular report server instance, you can use Database Setup page in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]Configuration tool.</span></span> <span data-ttu-id="8ca0d-114">Pour en savoir plus sur la connexion du serveur de rapports à la base de données du serveur de rapports, consultez [Configurer une connexion à la base de données du serveur de rapports &#40;Gestionnaire de configuration de SSRS&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="8ca0d-114">To learn more about the report server connection to the report server database, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
## <a name="sql-server-login-and-database-permissions"></a><span data-ttu-id="8ca0d-115">Autorisations de compte de connexion et de base de données SQL Server</span><span class="sxs-lookup"><span data-stu-id="8ca0d-115">SQL Server Login and Database Permissions</span></span>  
 <span data-ttu-id="8ca0d-116">Les bases de données du serveur de rapports sont utilisées en interne par le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-116">The report server databases are used internally by the report server.</span></span> <span data-ttu-id="8ca0d-117">Les connexions à une base de données sont opérées par le service Report Server.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-117">Connections to either database are made by the Report Server service.</span></span> <span data-ttu-id="8ca0d-118">Vous devez utiliser l’outil de configuration de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] pour configurer la connexion du serveur de rapports à la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-118">You use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration tool to configure the report server connection to the report server database.</span></span>  
  
 <span data-ttu-id="8ca0d-119">Les informations d’identification de la connexion du serveur de rapports à la base de données peuvent être celles du compte de service, d’un compte d’utilisateur local ou de domaine Windows ou d’un utilisateur de base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="8ca0d-119">Credentials for the report server connection to the database can be the service account, a Windows local or domain user account, or a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database user.</span></span> <span data-ttu-id="8ca0d-120">Vous devez choisir un compte existant pour la connexion ; [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] ne crée pas de comptes à votre place.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-120">You must choose an existing account for the connection; [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] does not create accounts for you.</span></span>  
  
 <span data-ttu-id="8ca0d-121">Une connexion [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] à la base de données du serveur de rapports est créée automatiquement pour le compte que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-121">A [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login to the report server database is created for you automatically for the account you specify.</span></span>  
  
 <span data-ttu-id="8ca0d-122">Les autorisations d'accès à la base de données sont également configurées automatiquement.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-122">Permissions to the database are also configured automatically.</span></span> <span data-ttu-id="8ca0d-123">L'outil de configuration de Reporting Services attribue les rôles `Public` et `RSExecRole` à l'utilisateur du compte ou à l'utilisateur de base de données pour les bases de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-123">The Reporting Services Configuration tool will assign the account or database user to the `Public` and `RSExecRole` roles for the report server databases.</span></span> <span data-ttu-id="8ca0d-124">Le rôle `RSExecRole` fournit les autorisations permettant d'accéder aux tables de base de données et d'exécuter des procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-124">The `RSExecRole` provides permissions for accessing the database tables and for executing stored procedures.</span></span> <span data-ttu-id="8ca0d-125">Le `RSExecRole` est créé dans Master et msdb lorsque vous créez la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-125">The `RSExecRole` is created in master and msdb when you create the report server database.</span></span> <span data-ttu-id="8ca0d-126">`RSExecRole` est un membre du rôle `db_owner` pour les bases de données du serveur de rapports, ce qui permet au serveur de rapports de mettre à jour son propre schéma pour la prise en charge d'un processus de mise à niveau automatique.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-126">The `RSExecRole` is a member of the `db_owner` role for the report server databases, allowing the report server to update its own schema in support of an auto-upgrade process.</span></span>  
  
## <a name="naming-conventions-for-the-report-server-databases"></a><span data-ttu-id="8ca0d-127">Conventions d'affectation des noms pour les bases de données du serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="8ca0d-127">Naming Conventions for the Report Server Databases</span></span>  
 <span data-ttu-id="8ca0d-128">Au moment de créer la base de données primaire, le nom de la base de données doit respecter les règles spécifiées pour les [identificateurs de la base de données](../../relational-databases/databases/database-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="8ca0d-128">When creating the primary database, the name of the database must follow the rules specified for [Database Identifiers](../../relational-databases/databases/database-identifiers.md).</span></span> <span data-ttu-id="8ca0d-129">La base de données temporaire utilise toujours le même nom que la base de données primaire du serveur de rapports mais avec le suffixe Tempdb.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-129">The temporary database name always uses the same name as the primary report server database but with a Tempdb suffix.</span></span> <span data-ttu-id="8ca0d-130">Vous ne pouvez pas choisir un autre nom pour la base de données temporaire.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-130">You cannot choose a different name for the temporary database.</span></span>  
  
 <span data-ttu-id="8ca0d-131">Le changement de nom des bases de données de serveur de rapports n'est pas pris en charge car ces bases de données sont considérées comme des composants internes.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-131">Renaming a report server database is not supported because the report server databases are considered internal components.</span></span> <span data-ttu-id="8ca0d-132">Renommer des bases de données de serveur de rapports entraîne des erreurs.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-132">Renaming the report server databases causes errors to occur.</span></span> <span data-ttu-id="8ca0d-133">Si vous renommez la base de données primaire, un message d'erreur explique que les noms des bases de données ne sont plus synchronisés. Si vous renommez la base de données ReportServerTempdb, l'erreur interne suivante se produit ultérieurement lorsque vous exécutez les rapports :</span><span class="sxs-lookup"><span data-stu-id="8ca0d-133">Specifically, if you rename the primary database, an error message explains that the database names are out of sync. If you rename the ReportServerTempdb database, the following internal error occurs later when you run reports:</span></span>  
  
 <span data-ttu-id="8ca0d-134">« Une erreur interne s'est produite sur le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-134">"An internal error occurred on the report server.</span></span> <span data-ttu-id="8ca0d-135">Consultez le journal des erreurs pour plus d'informations.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-135">See the error log for more details.</span></span> <span data-ttu-id="8ca0d-136">(rsInternalError)</span><span class="sxs-lookup"><span data-stu-id="8ca0d-136">(rsInternalError)</span></span>  
  
 <span data-ttu-id="8ca0d-137">Nom d'objet 'ReportServerTempDB.dbo.PersistedStream' non valide. »</span><span class="sxs-lookup"><span data-stu-id="8ca0d-137">Invalid object name 'ReportServerTempDB.dbo.PersistedStream'."</span></span>  
  
 <span data-ttu-id="8ca0d-138">Cette erreur se produit car le nom ReportServerTempdb est stocké en interne et utilisé par des procédures stockées pour effectuer des opérations internes.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-138">This error occurs because the ReportServerTempdb name is stored internally and used by stored procedures to perform internal operations.</span></span> <span data-ttu-id="8ca0d-139">Renommer la base de données temporaire empêche le bon fonctionnement des procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-139">Renaming the temporary database will prevent the stored procedures from working properly.</span></span>  
  
## <a name="enabling-snapshot-isolation-on-the-report-server-database"></a><span data-ttu-id="8ca0d-140">Activation de l'isolement d'instantané sur la base de données du serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="8ca0d-140">Enabling Snapshot Isolation on the Report Server Database</span></span>  
 <span data-ttu-id="8ca0d-141">Vous ne pouvez pas activer l'isolement d'instantané sur la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-141">You cannot enable snapshot isolation on the report server database.</span></span> <span data-ttu-id="8ca0d-142">Si l'isolement d'instantané est activé, l'erreur suivante s'affiche : « Le rapport sélectionné n'est pas prêt pour être affiché.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-142">If snapshot isolation is turned on, you will encounter the following error: "The selected report is not ready for viewing.</span></span> <span data-ttu-id="8ca0d-143">Le rendu du rapport n'est pas terminé ou son instantané n'est pas disponible ».</span><span class="sxs-lookup"><span data-stu-id="8ca0d-143">The report is still being rendered or a report snapshot is not available."</span></span>  
  
 <span data-ttu-id="8ca0d-144">Si vous n’avez pas intentionnellement activé l’isolement d’instantané, il est possible que l’attribut ait été défini par une autre application ou que l’isolement d’instantané soit activé sur la base de données **model** ; dans ce dernier cas, toutes les nouvelles bases de données héritent du paramètre.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-144">If you did not purposely enable snapshot isolation, the attribute might have been set by another application or the **model** database might have snapshot isolation enabled, causing all new databases to inherit the setting.</span></span>  
  
 <span data-ttu-id="8ca0d-145">Pour désactiver l'isolement d'instantané sur la base de données du serveur de rapports, démarrez Management Studio, ouvrez une nouvelle fenêtre de requête, collez puis exécutez le script suivant :</span><span class="sxs-lookup"><span data-stu-id="8ca0d-145">To turn off snapshot isolation on the report server database, start Management Studio, open a new query window, paste and then run the following script:</span></span>  
  
```  
ALTER DATABASE ReportServer  
SET ALLOW_SNAPSHOT_ISOLATION OFF  
ALTER DATABASE ReportServerTempdb  
SET ALLOW_SNAPSHOT_ISOLATION OFF  
ALTER DATABASE ReportServer  
SET READ_COMMITTED_SNAPSHOT OFF  
ALTER DATABASE ReportServerTempDb  
SET READ_COMMITTED_SNAPSHOT OFF  
```  
  
## <a name="about-database-versions"></a><span data-ttu-id="8ca0d-146">À propos des versions de base de données</span><span class="sxs-lookup"><span data-stu-id="8ca0d-146">About Database Versions</span></span>  
 <span data-ttu-id="8ca0d-147">Dans [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], aucune information explicite n’est disponible sur la version de la base de données.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-147">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], explicit information about the database version is not available.</span></span> <span data-ttu-id="8ca0d-148">Toutefois, comme les versions des bases de données sont toujours synchronisées avec les versions des produits, vous pouvez utiliser les informations de version d'un produit pour savoir quand la version de base de données a changé.</span><span class="sxs-lookup"><span data-stu-id="8ca0d-148">However, because database versions are always synchronized to product versions, you can use product version information to tell when the database version has changed.</span></span> <span data-ttu-id="8ca0d-149">Les informations de version de produit pour [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] sont indiquées par le biais des informations de version de fichier qui s’affichent dans les fichiers journaux, dans les en-têtes de tous les appels SOAP et lorsque vous vous connectez à l’URL du serveur de rapports (par exemple, lorsque vous ouvrez un navigateur sur http://localhost/reportserver) .</span><span class="sxs-lookup"><span data-stu-id="8ca0d-149">Product version information for [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] is indicated through file version information that appears in the log files, in the headers of all SOAP calls, and when you connect to the report server URL (for example, when you open a browser to http://localhost/reportserver).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ca0d-150">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8ca0d-150">See Also</span></span>  
 <span data-ttu-id="8ca0d-151">[Gestionnaire de configuration de Reporting Services &#40;mode natif&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-151">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="8ca0d-152">[Créer une base de données du serveur de rapports en mode natif &#40;Gestionnaire de configuration de SSRS&#41;](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-152">[Create a Native Mode Report Server Database  &#40;SSRS Configuration Manager&#41;](../install-windows/ssrs-report-server-create-a-native-mode-report-server-database.md) </span></span>  
 <span data-ttu-id="8ca0d-153">[Configurer le compte de service Report Server &#40;Gestionnaire de configuration de SSRS&#41;](../install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-153">[Configure the Report Server Service Account &#40;SSRS Configuration Manager&#41;](../install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="8ca0d-154">[Configurer une connexion à la base de données du serveur de rapports &#40;Gestionnaire de configuration de SSRS&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-154">[Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="8ca0d-155">[Créer une base de données du serveur de rapports &#40;Gestionnaire de configuration de SSRS&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-155">[Create a Report Server Database  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="8ca0d-156">[Opérations de sauvegarde et de restauration pour Reporting Services](../install-windows/backup-and-restore-operations-for-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-156">[Backup and Restore Operations for Reporting Services](../install-windows/backup-and-restore-operations-for-reporting-services.md) </span></span>  
 <span data-ttu-id="8ca0d-157">[Base de données du serveur de rapports &#40;SSRS en mode natif&#41;](report-server-database-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-157">[Report Server Database &#40;SSRS Native Mode&#41;](report-server-database-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="8ca0d-158">[Serveur de rapports Reporting Services &#40;mode natif&#41;](reporting-services-report-server-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-158">[Reporting Services Report Server &#40;Native Mode&#41;](reporting-services-report-server-native-mode.md) </span></span>  
 <span data-ttu-id="8ca0d-159">[Stocker des données chiffrées du serveur de rapports &#40;Gestionnaire de configuration de SSRS&#41;](../install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span><span class="sxs-lookup"><span data-stu-id="8ca0d-159">[Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](../install-windows/ssrs-encryption-keys-store-encrypted-report-server-data.md) </span></span>  
 [<span data-ttu-id="8ca0d-160">Configurer et gérer des clés de chiffrement &#40;Gestionnaire de configuration de SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="8ca0d-160">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/ssrs-encryption-keys-manage-encryption-keys.md)  
  
  
