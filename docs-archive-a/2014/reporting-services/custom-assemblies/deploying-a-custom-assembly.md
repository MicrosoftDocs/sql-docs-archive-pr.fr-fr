---
title: Déploiement d’un assembly personnalisé | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services
ms.topic: reference
helpviewer_keywords:
- deploying custom assemblies [Reporting Services]
- custom assemblies [Reporting Services], deploying
- custom assemblies [Reporting Services], updating
- updating custom assemblies
ms.assetid: c6674cd8-0de7-4a5a-9e7c-12ffa49f6fd2
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 3d88e1db844304b5cbb51f4af52b4715ef7e8c1e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87708999"
---
# <a name="deploying-a-custom-assembly"></a><span data-ttu-id="231af-102">Déploiement d'un assembly personnalisé</span><span class="sxs-lookup"><span data-stu-id="231af-102">Deploying a Custom Assembly</span></span>
  <span data-ttu-id="231af-103">Pour déployer un assembly personnalisé dans [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , placez-le dans les dossiers d’application des concepteur de rapports et du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-103">To deploy a custom assembly in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], place the assembly in the application folders of both Report Designer and the report server.</span></span> <span data-ttu-id="231af-104">L'autorisation `Execution` dans [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] est accordée par défaut aux assemblys personnalisés.</span><span class="sxs-lookup"><span data-stu-id="231af-104">By default, custom assemblies are granted `Execution` permission in [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span> <span data-ttu-id="231af-105">Pour accorder des privilèges d’assemblys personnalisés supérieurs à l’autorisation Execute, vous devez modifier le fichier de configuration rssrvpolicy.config pour le serveur de rapports et le fichier de configuration rspreviewpolicy.config pour la fenêtre d’aperçu du Concepteur de rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-105">To grant custom assemblies privileges beyond Execute permission, you will need to edit the rssrvpolicy.config configuration file for the report server and the rspreviewpolicy.config configuration file for the Report Designer preview window.</span></span> <span data-ttu-id="231af-106">Une autre solution consiste à installer votre assembly personnalisé dans le Global Assembly Cache (GAC).</span><span class="sxs-lookup"><span data-stu-id="231af-106">Alternatively, you can install your custom assembly in the global assembly cache (GAC).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="231af-107">Il existe deux modes d'aperçu pour le Générateur de rapports : l'onglet Aperçu et la fenêtre d'aperçu contextuelle, qui s'affiche lorsque votre projet de rapport démarre en mode `DebugLocal`.</span><span class="sxs-lookup"><span data-stu-id="231af-107">There are two preview modes for Report Designer: the Preview tab and the pop-up preview window that is launched when your report project is started in `DebugLocal` mode.</span></span> <span data-ttu-id="231af-108">L'onglet Aperçu exécute toutes les expressions de rapport à l'aide de l'autorisation `FullTrust` définie et n'applique pas de paramètres de stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="231af-108">The Preview tab executes all report expressions using the `FullTrust` permission set and does not apply security policy settings.</span></span> <span data-ttu-id="231af-109">La fenêtre d'aperçu contextuelle a pour but de simuler les fonctionnalités du serveur de rapports ; par conséquent, elle dispose d'un fichier de configuration de stratégie qu'un administrateur ou vous-même devez modifier pour utiliser des assemblys dans le Générateur de rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-109">The pop-up preview window is meant to simulate the report server functionality and therefore has a policy configuration file that you or an administrator must modify to use custom assemblies in Report Designer.</span></span> <span data-ttu-id="231af-110">Cet aperçu contextuel verrouille également l'assembly personnalisé.</span><span class="sxs-lookup"><span data-stu-id="231af-110">This pop-up preview also locks the custom assembly.</span></span> <span data-ttu-id="231af-111">Par conséquent, vous devez fermer la fenêtre d'aperçu afin de modifier ou mettre à jour le code de votre assembly personnalisé.</span><span class="sxs-lookup"><span data-stu-id="231af-111">Therefore, you need to close the preview window in order to modify or update your custom assembly code.</span></span>  
  
###### <a name="to-deploy-a-custom-assembly-in-reporting-services"></a><span data-ttu-id="231af-112">Pour déployer un assembly personnalisé dans Reporting Services</span><span class="sxs-lookup"><span data-stu-id="231af-112">To deploy a custom assembly in Reporting Services</span></span>  
  
1.  <span data-ttu-id="231af-113">Copiez votre assembly personnalisé à partir de votre emplacement de génération vers le dossier bin du serveur de rapports ou le dossier du Générateur de rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-113">Copy your custom assembly from your build location to the report server bin folder or the Report Designer folder.</span></span> <span data-ttu-id="231af-114">L'emplacement par défaut du dossier bin du serveur de rapports est le suivant : %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin.</span><span class="sxs-lookup"><span data-stu-id="231af-114">The default location of the bin folder for the report server is %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin.</span></span> <span data-ttu-id="231af-115">L'emplacement par défaut du Concepteur de rapports est le suivant : %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span><span class="sxs-lookup"><span data-stu-id="231af-115">The default location of the Report Designer is %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span></span>  
  
     <span data-ttu-id="231af-116">Le placement de votre assembly personnalisé dans le dossier Bin du serveur de rapports vous permet de publier des rapports qui font référence à votre assembly personnalisé, et son placement dans le dossier Report Designer vous permet d'exécuter et de déboguer des rapports qui font référence à votre assembly personnalisé dans le Concepteur de rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-116">Placing your custom assembly in the report server bin folder enables you to publish reports that reference your custom assembly, and placing it in the Report Designer folder enables you to run and debug reports that reference your custom assembly in Report Designer.</span></span>  
  
     <span data-ttu-id="231af-117">Si vous devez accorder au code de votre assembly personnalisé des autorisations supérieures aux autorisations d'exécution par défaut :</span><span class="sxs-lookup"><span data-stu-id="231af-117">If you need to grant your custom assembly code permissions beyond the default execute permissions:</span></span>  
  
2.  <span data-ttu-id="231af-118">Ouvrez le fichier de configuration approprié.</span><span class="sxs-lookup"><span data-stu-id="231af-118">Open the appropriate configuration file.</span></span> <span data-ttu-id="231af-119">L'emplacement par défaut du fichier rssrvpolicy.config est : %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer.</span><span class="sxs-lookup"><span data-stu-id="231af-119">The default location of rssrvpolicy.config is %ProgramFiles%\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer.</span></span> <span data-ttu-id="231af-120">L'emplacement par défaut du fichier rspreviewpolicy.config est : %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span><span class="sxs-lookup"><span data-stu-id="231af-120">The default location of rspreviewpolicy.config is %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies.</span></span>  
  
3.  <span data-ttu-id="231af-121">Ajoutez un groupe de codes pour votre assembly personnalisé.</span><span class="sxs-lookup"><span data-stu-id="231af-121">Add a code group for your custom assembly.</span></span> <span data-ttu-id="231af-122">Pour plus d’informations, consultez [Développement sécurisé &#40;Reporting Services&#41;](../extensions/secure-development/secure-development-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="231af-122">For more information, see [Secure Development &#40;Reporting Services&#41;](../extensions/secure-development/secure-development-reporting-services.md).</span></span>  
  
## <a name="updating-custom-assemblies"></a><span data-ttu-id="231af-123">Mise à jour d'assemblys personnalisés</span><span class="sxs-lookup"><span data-stu-id="231af-123">Updating Custom Assemblies</span></span>  
 <span data-ttu-id="231af-124">Au bout d'un certain temps, vous risquez d'avoir besoin de mettre à jour une version d'un assembly personnalisé actuellement référencé par plusieurs rapports publiés.</span><span class="sxs-lookup"><span data-stu-id="231af-124">At some point, you may need to update a version of a custom assembly that is currently being referenced by several published reports.</span></span> <span data-ttu-id="231af-125">Si cet assembly existe déjà dans le répertoire bin du serveur de rapports ou du Générateur de rapports et si le numéro de version de l'assembly est incrémenté ou a changé d'une certaine façon, les rapports actuellement publiés ne fonctionnent plus correctement.</span><span class="sxs-lookup"><span data-stu-id="231af-125">If that assembly already exists in the bin directory of the report server or Report Designer and the version number of the assembly is incremented or changed in some way, the currently published reports will no longer work properly.</span></span> <span data-ttu-id="231af-126">Vous devez mettre à jour la version de l'assembly qui est référencé dans l'élément `CodeModules` de la définition de rapport, puis republier les rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-126">You will need to update the version of the assembly that is referenced in the `CodeModules` element of the report definition and republish the reports.</span></span> <span data-ttu-id="231af-127">Si vous savez que vous allez souvent mettre à jour un assembly personnalisé et que vos rapports actuellement publiés vont avoir besoin de référencer le nouvel assembly, vous pouvez envisager d'utiliser le même numéro de version dans toutes les mises à jour d'un assembly particulier.</span><span class="sxs-lookup"><span data-stu-id="231af-127">If you know that you will frequently update a custom assembly and your currently published reports need to reference the new assembly, you may want to consider using the same version number across all updates of a particular assembly.</span></span>  
  
 <span data-ttu-id="231af-128">Si vous n'avez pas besoin de vos rapports actuellement publiés pour référencer la nouvelle version de l'assembly, vous pouvez déployer votre assembly personnalisé sur le Global Assembly Cache.</span><span class="sxs-lookup"><span data-stu-id="231af-128">If you do not need your currently published reports to reference the new version of the assembly, you can deploy your custom assembly to the global assembly cache.</span></span> <span data-ttu-id="231af-129">Le Global Assembly Cache peut gérer plusieurs versions du même assembly, afin que vos rapports actuels puissent référencer la version antérieure de votre assembly et que vos nouveaux rapports publiés puissent référencer l'assembly mis à jour.</span><span class="sxs-lookup"><span data-stu-id="231af-129">The global assembly cache can maintain multiple versions of the same assembly, so that your current reports can reference the previous version of your assembly and your newly published reports can reference the updated assembly.</span></span> <span data-ttu-id="231af-130">Pourtant, une autre approche consisterait à définir la redirection de liaison du serveur de rapports afin de forcer une redirection de toutes les demandes de l'ancien assembly vers le nouvel assembly.</span><span class="sxs-lookup"><span data-stu-id="231af-130">Yet another approach would be to set the binding redirect of the report server to force a redirect of all requests for the old assembly to the new assembly.</span></span> <span data-ttu-id="231af-131">Il vous faudrait modifier les fichiers Web.config et ReportService.exe.config du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="231af-131">You would need to modify the report server Web.config file and the report server ReportService.exe.config file.</span></span> <span data-ttu-id="231af-132">L'entrée pourrait se présenter de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="231af-132">The entry might look like the following:</span></span>  
  
```  
<configuration>  
   <runtime>  
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
         <dependentAssembly>  
            <assemblyIdentity name="myAssembly"  
                              publicKeyToken="32ab4ba45e0a69a1"  
                              culture="neutral" />  
            <bindingRedirect oldVersion="1.0.0.0"  
                             newVersion="2.0.0.0"/>  
         </dependentAssembly>  
      </assemblyBinding>  
   </runtime>  
</configuration>  
```  
  
## <a name="see-also"></a><span data-ttu-id="231af-133">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="231af-133">See Also</span></span>  
 <span data-ttu-id="231af-134">[Utilisation d’assemblys personnalisés avec des rapports](using-custom-assemblies-with-reports.md) </span><span class="sxs-lookup"><span data-stu-id="231af-134">[Using Custom Assemblies with Reports](using-custom-assemblies-with-reports.md) </span></span>  
 [<span data-ttu-id="231af-135">Utilisation d'assemblys et du Global Assembly Cache</span><span class="sxs-lookup"><span data-stu-id="231af-135">Working with Assemblies and the Global Assembly Cache</span></span>](https://go.microsoft.com/fwlink/?LinkId=63912)  
  
  
