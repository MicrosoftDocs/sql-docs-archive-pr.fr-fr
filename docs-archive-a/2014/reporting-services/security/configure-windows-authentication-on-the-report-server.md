---
title: Configurer une authentification Windows sur le serveur de rapports | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- Windows authentication [Reporting Services]
- Reporting Services, configuration
ms.assetid: 4de9c3dd-0ee7-49b3-88bb-209465ca9d86
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 879c036977f9a34528dbf38e42fa080e72617a14
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87699305"
---
# <a name="configure-windows-authentication-on-the-report-server"></a><span data-ttu-id="4f929-102">Configurer une authentification Windows sur le serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="4f929-102">Configure Windows Authentication on the Report Server</span></span>
  <span data-ttu-id="4f929-103">Par défaut, [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] accepte les demandes qui spécifient l'authentification Negotiate ou NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f929-103">By default, [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] accepts requests that specify Negotiate or NTLM authentication.</span></span> <span data-ttu-id="4f929-104">Si votre déploiement inclut des applications clientes et des navigateurs clients qui utilisent ces fournisseurs de sécurité, vous pouvez utiliser les valeurs par défaut sans configuration supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="4f929-104">If your deployment includes client applications and browsers that use these security providers, you can use the default values without additional configuration.</span></span> <span data-ttu-id="4f929-105">Si vous voulez utiliser un fournisseur de sécurité différent pour la sécurité intégrée de Windows (par exemple, si vous voulez utiliser Kerberos directement), ou si vous avez modifié les valeurs par défaut et que vous voulez restaurer les paramètres d'origine, vous pouvez utiliser les informations de cette rubrique pour spécifier des paramètres d'authentification sur le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4f929-105">If you want to use a different security provider for Windows integrated security (for example, if you want to use Kerberos directly), or if you modified the default values and want to restore the original settings, you can use the information in this topic to specify authentication settings on the report server.</span></span>  
  
 <span data-ttu-id="4f929-106">Pour utiliser la sécurité intégrée de Windows, chaque utilisateur qui a besoin d'un accès à un serveur de rapports doit avoir un compte local ou d'utilisateur de domaine Windows valide, ou être membre d'un compte local ou de groupe de domaine Windows.</span><span class="sxs-lookup"><span data-stu-id="4f929-106">To use Windows integrated security, each user who requires access to a report server must have a valid Windows local or domain user account or be a member of a Windows local or domain group account.</span></span> <span data-ttu-id="4f929-107">Vous pouvez inclure des comptes d'autres domaines tant que ces domaines sont approuvés.</span><span class="sxs-lookup"><span data-stu-id="4f929-107">You can include accounts from other domains as long as those domains are trusted.</span></span> <span data-ttu-id="4f929-108">Les comptes doivent avoir accès à l'ordinateur serveur de rapports, et être ensuite attribués à des rôles pour pouvoir accéder à des opérations du serveur de rapports spécifiques.</span><span class="sxs-lookup"><span data-stu-id="4f929-108">The accounts must have access to the report server computer, and must be subsequently assigned to roles in order to gain access to specific report server operations.</span></span>  
  
 <span data-ttu-id="4f929-109">Les exigences supplémentaires suivantes doivent également être respectées :</span><span class="sxs-lookup"><span data-stu-id="4f929-109">The following additional requirements must also be met:</span></span>  
  
-   <span data-ttu-id="4f929-110">La valeur de `AuthenticationType` dans les fichiers RSeportServer.config doit être `RSWindowsNegotiate`, `RSWindowsKerberos` ou `RSWindowsNTLM`.</span><span class="sxs-lookup"><span data-stu-id="4f929-110">The RSeportServer.config files must have `AuthenticationType` set to `RSWindowsNegotiate`, `RSWindowsKerberos`, or `RSWindowsNTLM`.</span></span> <span data-ttu-id="4f929-111">Par défaut, le fichier RSReportServer.config inclut le paramètre `RSWindowsNegotiate` si le compte de service Report Server est NetworkService ou LocalSystem ; sinon, le paramètre `RSWindowsNTLM` est utilisé.</span><span class="sxs-lookup"><span data-stu-id="4f929-111">By default, the RSReportServer.config file includes the `RSWindowsNegotiate` setting if the Report Server service account is either NetworkService or LocalSystem; otherwise, the `RSWindowsNTLM` setting is used.</span></span> <span data-ttu-id="4f929-112">Vous pouvez ajouter `RSWindowsKerberos` si vous possédez des applications qui utilisent uniquement l'authentification Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-112">You can add `RSWindowsKerberos` if you have applications that only use Kerberos authentication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="4f929-113">`RSWindowsNegotiate` provoquera une erreur d'authentification Kerberos si vous avez configuré le service Report Server pour qu'il s'exécute sous un compte d'utilisateur de domaine alors que vous n'avez pas inscrit un nom de principal du service (SPN) pour ce compte.</span><span class="sxs-lookup"><span data-stu-id="4f929-113">Using `RSWindowsNegotiate` will result in a Kerberos authentication error if you configured the Report Server service to run under a domain user account and you did not register a Service Principal Name (SPN) for the account.</span></span> <span data-ttu-id="4f929-114">Pour plus d'informations, consultez [Résolution des erreurs d'authentification Kerberos lors de la connexion à un serveur de rapports](#proxyfirewallRSWindowsNegotiate) dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4f929-114">For more information, see [Resolving Kerberos Authentication Errors When Connecting to a report server](#proxyfirewallRSWindowsNegotiate) in this topic.</span></span>  
  
-   [!INCLUDE[vstecasp](../../includes/vstecasp-md.md)] <span data-ttu-id="4f929-115">doit être configuré pour l'authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="4f929-115">must be configured for Windows Authentication.</span></span> <span data-ttu-id="4f929-116">Par défaut, les fichiers Web.config pour le service Web Report Server et Gestionnaire de rapports incluent le \<authentication mode="Windows"> paramètre.</span><span class="sxs-lookup"><span data-stu-id="4f929-116">By default, the Web.config files for the Report Server Web service and Report Manager include the \<authentication mode="Windows"> setting.</span></span> <span data-ttu-id="4f929-117">Si vous le remplacez par \<authentication mode="Forms"> , l’authentification Windows pour [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] échouera.</span><span class="sxs-lookup"><span data-stu-id="4f929-117">If you change it to \<authentication mode="Forms">, the Windows Authentication for [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] will fail.</span></span>  
  
-   <span data-ttu-id="4f929-118">Les fichiers Web.config pour le service Web Report Server et Gestionnaire de rapports doivent avoir \<identity impersonate= "true" /> .</span><span class="sxs-lookup"><span data-stu-id="4f929-118">The Web.config files for the Report Server Web service and Report Manager must have \<identity impersonate= "true" />.</span></span>  
  
-   <span data-ttu-id="4f929-119">L'application cliente ou le navigateur client doivent prendre en charge la sécurité intégrée de Windows.</span><span class="sxs-lookup"><span data-stu-id="4f929-119">The client application or browser must support Windows integrated security.</span></span>  
  
 <span data-ttu-id="4f929-120">Pour modifier les paramètres d'authentification du serveur de rapports, modifiez les éléments et valeurs XML dans le fichier RSReportServer.config.</span><span class="sxs-lookup"><span data-stu-id="4f929-120">To change the report server authentication settings, edit the XML elements and values in the RSReportServer.config file.</span></span> <span data-ttu-id="4f929-121">Vous pouvez copier et coller les exemples de cette rubrique pour implémenter des combinaisons spécifiques.</span><span class="sxs-lookup"><span data-stu-id="4f929-121">You can copy and paste the examples in this topic to implement specific combinations.</span></span>  
  
 <span data-ttu-id="4f929-122">Les paramètres par défaut sont satisfaisants si tous les ordinateurs clients et serveurs se trouvent dans le même domaine ou dans un domaine approuvé, et si le serveur de rapports est déployé pour l'accès intranet derrière un pare-feu d'entreprise.</span><span class="sxs-lookup"><span data-stu-id="4f929-122">The default settings work best if all client and server computers are in the same domain or in a trusted domain and the report server is deployed for intranet access behind a corporate firewall.</span></span> <span data-ttu-id="4f929-123">Des domaines approuvés et uniques sont indispensables pour la transmission d'informations d'identification Windows.</span><span class="sxs-lookup"><span data-stu-id="4f929-123">Trusted and single domains are a requirement for passing Windows credentials.</span></span> <span data-ttu-id="4f929-124">Les informations d'identification peuvent être transmises plusieurs fois si vous activez le protocole Kerberos version 5 pour vos serveurs.</span><span class="sxs-lookup"><span data-stu-id="4f929-124">Credentials can be passed more than one time if you enable the Kerberos version 5 protocol for your servers.</span></span> <span data-ttu-id="4f929-125">Dans le cas contraire, elles peuvent être passées une seule fois avant d'expirer.</span><span class="sxs-lookup"><span data-stu-id="4f929-125">Otherwise, credentials can be passed only one time before they expire.</span></span> <span data-ttu-id="4f929-126">Pour plus d’informations sur la configuration des informations d’identification pour plusieurs connexions d’ordinateurs, consultez [Spécifier des informations d’identification et de connexion pour les sources de données de rapport](../report-data/specify-credential-and-connection-information-for-report-data-sources.md).</span><span class="sxs-lookup"><span data-stu-id="4f929-126">For more information about configuring credentials for multiple computer connections, see [Specify Credential and Connection Information for Report Data Sources](../report-data/specify-credential-and-connection-information-for-report-data-sources.md).</span></span>  
  
 <span data-ttu-id="4f929-127">Les instructions suivantes sont destinées à un serveur de rapports en mode natif.</span><span class="sxs-lookup"><span data-stu-id="4f929-127">The following instructions are intended for a native mode report server.</span></span> <span data-ttu-id="4f929-128">Si le serveur de rapports est déployé en mode intégré SharePoint, vous devez utiliser les paramètres d'authentification par défaut qui spécifient la sécurité intégrée de Windows.</span><span class="sxs-lookup"><span data-stu-id="4f929-128">If the report server is deployed in SharePoint integrated mode, you must use the default authentication settings that specify Windows integrated security.</span></span> <span data-ttu-id="4f929-129">Le serveur de rapports utilise des fonctionnalités internes dans l'extension d'authentification Windows par défaut pour prendre en charge les serveurs de rapports en mode intégré SharePoint.</span><span class="sxs-lookup"><span data-stu-id="4f929-129">The report server uses internal features in the default Windows Authentication extension to support report servers in SharePoint integrated mode.</span></span>  
  
## <a name="extended-protection-for-authentication"></a><span data-ttu-id="4f929-130">Protection étendue de l'authentification</span><span class="sxs-lookup"><span data-stu-id="4f929-130">Extended Protection for Authentication</span></span>  
 <span data-ttu-id="4f929-131">À compter de [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], la prise en charge de la protection étendue de l'authentification est disponible.</span><span class="sxs-lookup"><span data-stu-id="4f929-131">Beginning with [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], support for Extended Protection for Authentication is available.</span></span> <span data-ttu-id="4f929-132">La fonctionnalité [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] prend en charge l'utilisation de la liaison de canal et la liaison de service pour améliorer la protection de l'authentification.</span><span class="sxs-lookup"><span data-stu-id="4f929-132">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] feature supports the use of channel binding and service binding to enhance protection of authentication.</span></span> <span data-ttu-id="4f929-133">Les fonctionnalités [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] doivent être utilisées avec un système d'exploitation qui prend en charge la protection étendue.</span><span class="sxs-lookup"><span data-stu-id="4f929-133">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] features need to be used with an operating system that supports Extended Protection.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="4f929-134">pour la protection étendue est déterminée par les paramètres contenus dans le fichier RSReportServer.config.</span><span class="sxs-lookup"><span data-stu-id="4f929-134">configuration for extended protection is determined by settings in the RSReportServer.config file.</span></span> <span data-ttu-id="4f929-135">Le fichier peut être mis à jour en le modifiant ou à l'aide des API WMI.</span><span class="sxs-lookup"><span data-stu-id="4f929-135">The file can be updated by either editing the file or using WMI APIs.</span></span> <span data-ttu-id="4f929-136">Pour plus d’informations, consultez [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md).</span><span class="sxs-lookup"><span data-stu-id="4f929-136">For more information, see [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md).</span></span>  
  
### <a name="to-configure-a-report-server-to-use-windows-integrated-security"></a><span data-ttu-id="4f929-137">Pour configurer un serveur de rapports afin qu'il utilise la sécurité intégrée de Windows</span><span class="sxs-lookup"><span data-stu-id="4f929-137">To configure a report server to use Windows integrated security</span></span>  
  
1.  <span data-ttu-id="4f929-138">Ouvrez RSReportServer.config dans un éditeur de texte.</span><span class="sxs-lookup"><span data-stu-id="4f929-138">Open RSReportServer.config in a text editor.</span></span>  
  
2.  <span data-ttu-id="4f929-139">Recherchez <`Authentication`>.</span><span class="sxs-lookup"><span data-stu-id="4f929-139">Find <`Authentication`>.</span></span>  
  
3.  <span data-ttu-id="4f929-140">Copiez, parmi les structures XML suivantes, celle qui répond le mieux à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="4f929-140">Copy one of the following XML structures that best fits your needs.</span></span> <span data-ttu-id="4f929-141">Vous pouvez spécifier `RSWindowsNegotiate`, `RSWindowsNTLM` et `RSWindowsKerberos` dans n'importe quel ordre.</span><span class="sxs-lookup"><span data-stu-id="4f929-141">You can specify `RSWindowsNegotiate`, `RSWindowsNTLM`, and `RSWindowsKerberos` in any order.</span></span> <span data-ttu-id="4f929-142">Vous devez activer la permanence de l'authentification si vous voulez authentifier la connexion plutôt que chaque demande individuelle.</span><span class="sxs-lookup"><span data-stu-id="4f929-142">You should enable authentication persistence if you want to authenticate the connection rather than each individual request.</span></span> <span data-ttu-id="4f929-143">En cas de permanence de l'authentification, toutes les demandes qui requièrent une authentification seront autorisées pendant la durée de la connexion.</span><span class="sxs-lookup"><span data-stu-id="4f929-143">Under authentication persistence, all requests that require authentication will be allowed for the duration of the connection.</span></span>  
  
     <span data-ttu-id="4f929-144">La première structure XML est la configuration par défaut lorsque le compte de service Report Server est NetworkService ou LocalSystem :</span><span class="sxs-lookup"><span data-stu-id="4f929-144">The first XML structure is the default configuration when the Report Server service account is either NetworkService or LocalSystem:</span></span>  
  
    ```  
    <Authentication>  
          <AuthenticationTypes>  
                 <RSWindowsNegotiate />  
          </AuthenticationTypes>  
          <EnableAuthPersistence>true</EnableAuthPersistence>  
    </Authentication>  
    ```  
  
     <span data-ttu-id="4f929-145">La deuxième structure XML est la configuration par défaut lorsque le compte de service Report Server n'est ni NetworkService ni LocalSystem :</span><span class="sxs-lookup"><span data-stu-id="4f929-145">The second XML structure is the default configuration when the Report Server service account is not NetworkService or LocalSystem:</span></span>  
  
    ```  
    <Authentication>  
          <AuthenticationTypes>  
                 <RSWindowsNTLM />  
          </AuthenticationTypes>  
          <EnableAuthPersistence>true</EnableAuthPersistence>  
    ```  
  
     \</Authentication>  
  
     <span data-ttu-id="4f929-146">La troisième structure XML spécifie tous les packages de sécurité qui sont utilisés dans la sécurité intégrée de Windows :</span><span class="sxs-lookup"><span data-stu-id="4f929-146">The third XML structure specifies all of the security packages that are used in Windows integrated security:</span></span>  
  
    ```  
          <AuthenticationTypes>  
                 <RSWindowsNegotiate />  
                 <RSWindowsKerberos />  
                 <RSWindowsNTLM />  
          </AuthenticationTypes>  
    ```  
  
     <span data-ttu-id="4f929-147">La quatrième structure XML spécifie NTLM uniquement pour les déploiements qui ne prennent pas en charge Kerberos ou pour éviter les erreurs d'authentification Kerberos :</span><span class="sxs-lookup"><span data-stu-id="4f929-147">The fourth XML structure specifies NTLM only for deployments that do not support Kerberos or to work around Kerberos authentication errors:</span></span>  
  
    ```  
          <AuthenticationTypes>  
                 <RSWindowsNTLM />  
          </AuthenticationTypes>  
    ```  
  
4.  <span data-ttu-id="4f929-148">Collez-la sur les entrées existantes pour <`Authentication`>.</span><span class="sxs-lookup"><span data-stu-id="4f929-148">Paste it over the existing entries for <`Authentication`>.</span></span>  
  
     <span data-ttu-id="4f929-149">Notez que vous ne pouvez pas utiliser `Custom` avec les types `RSWindows`.</span><span class="sxs-lookup"><span data-stu-id="4f929-149">Note that you cannot use `Custom` with the `RSWindows` types.</span></span>  
  
5.  <span data-ttu-id="4f929-150">Modifiez comme il convient les paramètres de la protection étendue.</span><span class="sxs-lookup"><span data-stu-id="4f929-150">Modify as appropriate the settings for extended protection.</span></span> <span data-ttu-id="4f929-151">La protection étendue est désactivée par défaut.</span><span class="sxs-lookup"><span data-stu-id="4f929-151">Extended protection is disabled by default.</span></span>  <span data-ttu-id="4f929-152">Si ces entrées ne sont pas présentes, l'ordinateur actuel peut ne pas exécuter une version de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] qui prend en charge la protection étendue.</span><span class="sxs-lookup"><span data-stu-id="4f929-152">If these entries are not present, the current computer may not be running a version of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] which supports extended protection.</span></span> <span data-ttu-id="4f929-153">Pour plus d'informations, consultez [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span><span class="sxs-lookup"><span data-stu-id="4f929-153">For more information, see [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span></span>  
  
    ```  
          <RSWindowsExtendedProtectionLevel>Allow</RSWindowsExtendedProtectionLevel>  
          <RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>  
    ```  
  
6.  <span data-ttu-id="4f929-154">Enregistrez le fichier .</span><span class="sxs-lookup"><span data-stu-id="4f929-154">Save the file.</span></span>  
  
7.  <span data-ttu-id="4f929-155">Si vous avez configuré un déploiement avec montée en puissance parallèle, répétez ces étapes pour d'autres serveurs de rapports du déploiement.</span><span class="sxs-lookup"><span data-stu-id="4f929-155">If you configured a scale-out deployment, repeat these steps for other report servers in the deployment.</span></span>  
  
8.  <span data-ttu-id="4f929-156">Redémarrez le serveur de rapports pour effacer toutes les sessions qui sont actuellement ouvertes.</span><span class="sxs-lookup"><span data-stu-id="4f929-156">Restart the report server to clear any sessions that are currently open.</span></span>  
  
##  <a name="resolving-kerberos-authentication-errors-when-connecting-to-a-report-server"></a><a name="proxyfirewallRSWindowsNegotiate"></a><span data-ttu-id="4f929-157">Résolution des erreurs d’authentification Kerberos lors de la connexion à un serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="4f929-157">Resolving Kerberos Authentication Errors When Connecting to a Report Server</span></span>  
 <span data-ttu-id="4f929-158">Sur un serveur de rapports qui est configuré pour l'authentification Negotiate ou Kerberos, une connexion client au serveur de rapports échouera en cas d'erreur d'authentification Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-158">On a report server that is configured for Negotiate or Kerberos authentication, a client connection to the report server will fail if there is a Kerberos authentication error.</span></span> <span data-ttu-id="4f929-159">Les erreurs d'authentification Kerberos sont connues pour se produire dans les cas suivants :</span><span class="sxs-lookup"><span data-stu-id="4f929-159">Kerberos authentication errors are known to occur when:</span></span>  
  
-   <span data-ttu-id="4f929-160">Le service Report Server s'exécute en tant que compte d'utilisateur de domaine Windows et vous n'avez pas inscrit de nom de principal du service (SPN) pour le compte.</span><span class="sxs-lookup"><span data-stu-id="4f929-160">The Report Server service runs as a Windows domain user account and you did not register a Service Principal Name (SPN) for the account.</span></span>  
  
-   <span data-ttu-id="4f929-161">Le serveur de rapports est configuré avec le paramètre `RSWindowsNegotiate`.</span><span class="sxs-lookup"><span data-stu-id="4f929-161">The report server is configured with the `RSWindowsNegotiate` setting.</span></span>  
  
-   <span data-ttu-id="4f929-162">Le navigateur choisit Kerberos via NTLM dans l'en-tête d'authentification de la demande qu'il envoie au serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4f929-162">The browser chooses Kerberos over NTLM in the authentication header in the request it sends to the report server.</span></span>  
  
 <span data-ttu-id="4f929-163">Vous pouvez détecter l'erreur si vous avez activé l'enregistrement Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-163">You can detect the error if you enabled Kerberos logging.</span></span> <span data-ttu-id="4f929-164">Le fait que vous soyez invité plusieurs fois à entrer les informations d'identification, puis qu'une fenêtre de navigateur vide s'affiche, constitue un autre symptôme de l'erreur.</span><span class="sxs-lookup"><span data-stu-id="4f929-164">Another symptom of the error is that you are prompted for credentials multiple times and then see an empty browser window.</span></span>  
  
 <span data-ttu-id="4f929-165">Vous pouvez vérifier que vous rencontrez une erreur d’authentification Kerberos en supprimant < `RSWindowsNegotiate` /> de votre fichier de configuration et en réessayant la connexion.</span><span class="sxs-lookup"><span data-stu-id="4f929-165">You can confirm that you are encountering a Kerberos authentication error by removing < `RSWindowsNegotiate` /> from your configuration file and reattempting the connection.</span></span>  
  
 <span data-ttu-id="4f929-166">Après avoir confirmé le problème, vous pouvez le résoudre de l'une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="4f929-166">After you confirm the problem, you can address it in the following ways:</span></span>  
  
-   <span data-ttu-id="4f929-167">Inscrivez un nom de principal du service (SPN) pour le service Report Server sous le compte d'utilisateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="4f929-167">Register an SPN for the Report Server service under the domain user account.</span></span> <span data-ttu-id="4f929-168">Pour plus d’informations, consultez [Inscrire un nom de principal du service &#40;SPN&#41; pour un serveur de rapports](../report-server/register-a-service-principal-name-spn-for-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="4f929-168">For more information, see [Register a Service Principal Name &#40;SPN&#41; for a Report Server](../report-server/register-a-service-principal-name-spn-for-a-report-server.md).</span></span>  
  
-   <span data-ttu-id="4f929-169">Changez de compte de service pour qu'il s'exécute sous un compte intégré tel que le compte de service réseau.</span><span class="sxs-lookup"><span data-stu-id="4f929-169">Change the service account to run under a built-in account such as Network Service.</span></span> <span data-ttu-id="4f929-170">Les comptes intégrés mappent le nom de principal du service (SPN) HTTP au nom de principal du service (SPN) hôte, lequel est défini lorsque vous joignez un ordinateur à votre réseau.</span><span class="sxs-lookup"><span data-stu-id="4f929-170">Built-in accounts map HTTP SPN to the Host SPN, which is defined when you join a computer to your network.</span></span> <span data-ttu-id="4f929-171">Pour plus d’informations, consultez [Configurer un compte de service &#40;Gestionnaire de configuration de SSRS&#41;](../../sql-server/install/configure-a-service-account-ssrs-configuration-manager.md).</span><span class="sxs-lookup"><span data-stu-id="4f929-171">For more information, see [Configure a Service Account &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-service-account-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="4f929-172">Utilisez NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f929-172">Use NTLM.</span></span> <span data-ttu-id="4f929-173">NTLM fonctionnera généralement dans les cas où l'authentification Kerberos échoue.</span><span class="sxs-lookup"><span data-stu-id="4f929-173">NTLM will generally work in cases where Kerberos authentication fails.</span></span> <span data-ttu-id="4f929-174">Pour utiliser NTLM, supprimez `RSWindowsNegotiate` du fichier RSReportServer.config et vérifiez que seul `RSWindowsNTLM` est spécifié.</span><span class="sxs-lookup"><span data-stu-id="4f929-174">To use NTLM, remove `RSWindowsNegotiate` from the RSReportServer.config file and verify that only `RSWindowsNTLM` is specified.</span></span> <span data-ttu-id="4f929-175">Si vous choisissez cette approche, vous pouvez continuer à utiliser un compte d'utilisateur de domaine pour le service Report Server même si vous ne définissez pas de nom de principal du service (SPN) pour ce compte.</span><span class="sxs-lookup"><span data-stu-id="4f929-175">If you choose this approach, you can continue to use a domain user account for the Report Server service even if you do not define an SPN for it.</span></span>  
  
#### <a name="logging-information"></a><span data-ttu-id="4f929-176">Informations de journalisation</span><span class="sxs-lookup"><span data-stu-id="4f929-176">Logging information</span></span>  
 <span data-ttu-id="4f929-177">Il existe plusieurs sources d'nformations de journalisation qui peuvent aider à résoudre les problèmes liés à Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-177">There are several sources of logging information that can help resolve Kerberos related issues.</span></span>  
  
##### <a name="user-account-control-attribute"></a><span data-ttu-id="4f929-178">Attribut User-Account-Control</span><span class="sxs-lookup"><span data-stu-id="4f929-178">User-Account-Control Attribute</span></span>  
 <span data-ttu-id="4f929-179">Déterminez si l'attribut défini pour le compte de service [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] est suffisant dans Active Directory.</span><span class="sxs-lookup"><span data-stu-id="4f929-179">Determine if the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service account has the sufficient attribute set in Active Directory.</span></span> <span data-ttu-id="4f929-180">Examinez le fichier journal de trace des services de création de rapports pour rechercher la valeur enregistrée pour l'attribut UserAccountControl.</span><span class="sxs-lookup"><span data-stu-id="4f929-180">Review the reporting services service trace log file to find the value logged for the UserAccountControl attribute.</span></span> <span data-ttu-id="4f929-181">La valeur enregistrée se présente au format décimal.</span><span class="sxs-lookup"><span data-stu-id="4f929-181">The value logged is in decimal form.</span></span> <span data-ttu-id="4f929-182">Vous devez convertir la valeur décimale au format hexadécimal, puis rechercher cette valeur dans la rubrique MSDN qui décrit l'attribut User-Account-Control.</span><span class="sxs-lookup"><span data-stu-id="4f929-182">You need to convert the decimal value to hexadecimal form and then find that value in the MSDN topic describing User-Account-Control Attribute.</span></span>  
  
-   <span data-ttu-id="4f929-183">L'entrée journal de trace des services de création de rapports doit ressembler à l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="4f929-183">The reporting services service trace log entry will look similar to the following:</span></span>  
  
    ```  
    appdomainmanager!DefaultDomain!8f8!01/14/2010-14:42:28:: i INFO: The UserAccountControl value for the service account is 590336  
    ```  
  
-   <span data-ttu-id="4f929-184">Une option de conversion de la valeur décimale au format hexadécimal est pour nous la Calculatrice de [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="4f929-184">One option for converting the value Decimal value to hexadecimal form is to us the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows Calculator.</span></span> <span data-ttu-id="4f929-185">La Calculatrice de Windows prend en charge plusieurs modes qui affichent les options 'Dec' et 'Hex'.</span><span class="sxs-lookup"><span data-stu-id="4f929-185">Windows Calculator supports several modes that show the 'Dec' option and 'Hex' options.</span></span> <span data-ttu-id="4f929-186">Sélectionnez l'option 'Dec', collez ou tapez la valeur décimale trouvée dans le fichier journal, puis sélectionnez l'option 'Hex'.</span><span class="sxs-lookup"><span data-stu-id="4f929-186">Select the 'Dec' option, paste or type in the decimal value you found in the log file and then select the 'Hex' option.</span></span>  
  
-   <span data-ttu-id="4f929-187">Reportez-vous ensuite à la rubrique [User-Account-Control Attribute](https://go.microsoft.com/fwlink/?LinkId=183366) (Attribut User-Account-Control) pour dériver l’attribut pour le compte de service.</span><span class="sxs-lookup"><span data-stu-id="4f929-187">Then refer to the topic [User-Account-Control Attribute](https://go.microsoft.com/fwlink/?LinkId=183366) to derive the attribute for the service account.</span></span>  
  
##### <a name="spns-configured-in-active-directory-for-the-reporting-services-service-account"></a><span data-ttu-id="4f929-188">Noms de principaux du service configurés dans Active Directory pour le compte de service Reporting Services.</span><span class="sxs-lookup"><span data-stu-id="4f929-188">SPNs Configured in Active Directory for the Reporting Services service account.</span></span>  
 <span data-ttu-id="4f929-189">Pour enregistrer les noms de principaux du service dans le fichier journal de trace du service [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , vous pouvez activer temporairement la fonctionnalité de protection étendue [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4f929-189">To log the SPNs in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service trace log file, you can enable the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Extended Protection feature temporarily.</span></span>  
  
-   <span data-ttu-id="4f929-190">Modifiez le fichier de configuration `rsreportserver.config` en définissant les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="4f929-190">Modify the configuration file `rsreportserver.config` by setting the following:</span></span>  
  
    ```  
    <RSWindowsExtendedProtectionLevel>Allow</RSWindowsExtendedProtectionLevel>   
    <RSWindowsExtendedProtectionScenario>Any</RSWindowsExtendedProtectionScenario>  
    ```  
  
-   <span data-ttu-id="4f929-191">Redémarrez le service [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4f929-191">Restart the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service.</span></span>

 <span data-ttu-id="4f929-192">Si vous ne voulez pas continuer à utiliser la protection étendue, rétablissez les valeurs par défaut de configuration et redémarrez le compte de service [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="4f929-192">If you do not want continue using Extended Protection, then set the configuration values back to defaults and restart the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Service account.</span></span>  
  
```  
<RSWindowsExtendedProtectionLevel>Off</RSWindowsExtendedProtectionLevel>  
<RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>  
```  
  
 <span data-ttu-id="4f929-193">Pour plus d’informations, consultez [protection étendue de l’authentification avec Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span><span class="sxs-lookup"><span data-stu-id="4f929-193">For more information see, [Extended Protection for Authentication with Reporting Services](extended-protection-for-authentication-with-reporting-services.md)</span></span>  
  
#### <a name="how-the-browser-chooses-negotiated-kerberos-or-negotiated-ntlm"></a><span data-ttu-id="4f929-194">Comment le navigateur choisit l'authentification Kerberos par négociation ou l'authentification NTLM par négociation</span><span class="sxs-lookup"><span data-stu-id="4f929-194">How the Browser Chooses Negotiated Kerberos or Negotiated NTLM</span></span>  
 <span data-ttu-id="4f929-195">Lorsque vous utilisez Internet Explorer pour vous connecter au serveur de rapports, il spécifie l'authentification Kerberos par négociation ou l'authentification NTLM par négociation sur l'en-tête d'authentification.</span><span class="sxs-lookup"><span data-stu-id="4f929-195">When you use Internet Explorer to connect to the report server, it specifies either Negotiated Kerberos or NTLM on the authentication header.</span></span> <span data-ttu-id="4f929-196">NTLM est utilisé à la place de Kerberos dans les cas suivants :</span><span class="sxs-lookup"><span data-stu-id="4f929-196">NTLM is used instead of Kerberos when:</span></span>  
  
-   <span data-ttu-id="4f929-197">La demande est envoyée à un serveur de rapports local.</span><span class="sxs-lookup"><span data-stu-id="4f929-197">The request is sent to a local report server.</span></span>  
  
-   <span data-ttu-id="4f929-198">La demande est envoyée à une adresse IP du serveur de rapports plutôt qu'à un en-tête d'hôte ou à un nom de serveur.</span><span class="sxs-lookup"><span data-stu-id="4f929-198">The request is sent to an IP address of the report server computer rather than a host header or server name.</span></span>  
  
-   <span data-ttu-id="4f929-199">Le logiciel de pare-feu bloque les ports utilisés pour l'authentification Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-199">Firewall software blocks ports used for Kerberos authentication.</span></span>  
  
-   <span data-ttu-id="4f929-200">Kerberos n'est pas activé pour le système d'exploitation d'un serveur particulier.</span><span class="sxs-lookup"><span data-stu-id="4f929-200">The operating system of a particular server does not have Kerberos enabled.</span></span>  
  
-   <span data-ttu-id="4f929-201">Le domaine inclut des versions antérieures des systèmes d'exploitation client et serveur Windows qui ne prennent pas en charge la fonctionnalité d'authentification Kerberos intégrée aux versions plus récentes du système d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="4f929-201">The domain includes older versions of Windows client and server operating systems that do not support the Kerberos authentication feature built into newer versions of the operating system.</span></span>  
  
 <span data-ttu-id="4f929-202">En outre, Internet Explorer peut choisir l'authentification Kerberos par négociation ou l'authentification NTLM par négociation en fonction de la configuration des paramètres d'URL, de réseau local et de proxy.</span><span class="sxs-lookup"><span data-stu-id="4f929-202">In addition, Internet Explorer might choose either Negotiated Kerberos or NTLM depending on how you configured URL, LAN, and proxy settings.</span></span>  
  
###### <a name="report-server-url"></a><span data-ttu-id="4f929-203">URL du serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="4f929-203">Report Server URL</span></span>  
 <span data-ttu-id="4f929-204">Si l'URL inclut un nom de domaine complet, Internet Explorer sélectionne NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f929-204">If the URL includes a fully qualified domain name, Internet Explorer selects NTLM.</span></span> <span data-ttu-id="4f929-205">Si l'URL spécifie l'hôte local (localhost), Internet Explorer sélectionne NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f929-205">If the URL specifies localhost, Internet Explorer selects NTLM.</span></span> <span data-ttu-id="4f929-206">Si l'URL spécifie le nom réseau de l'ordinateur, Internet Explorer sélectionne l'authentification Negotiate, qui réussira ou échouera suivant qu'il existe, ou non, un nom de principal du service (SPN) pour le compte de service Report Server.</span><span class="sxs-lookup"><span data-stu-id="4f929-206">If the URL specifies the network name of the computer, Internet Explorer selects Negotiate, which will succeed or fail depending on whether an SPN exists for the Report Server service account.</span></span>  
  
###### <a name="lan-and-proxy-settings-on-the-client"></a><span data-ttu-id="4f929-207">Paramètres de réseau local et de proxy sur le client</span><span class="sxs-lookup"><span data-stu-id="4f929-207">LAN and Proxy Settings on the Client</span></span>  
 <span data-ttu-id="4f929-208">Les paramètres de réseau local et de proxy que vous définissez dans Internet Explorer peuvent déterminer si l'authentification NTLM est préférée à Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-208">LAN and proxy settings that you set in Internet Explorer can determine whether NTLM is chosen over Kerberos.</span></span> <span data-ttu-id="4f929-209">Toutefois, étant donné que les paramètres de réseau local et de proxy varient entre plusieurs organisations, il n'est pas possible de déterminer précisément les paramètres exacts qui contribuent aux erreurs d'authentification Kerberos.</span><span class="sxs-lookup"><span data-stu-id="4f929-209">However, because LAN and proxy settings vary across organizations, it is not possible to precisely determine the exact settings that contribute to Kerberos authentication errors.</span></span> <span data-ttu-id="4f929-210">Par exemple, votre organisation peut appliquer des paramètres de proxy qui transforment des URL d'intranet en URL de noms de domaine complets qui se résolvent via des connexions Internet.</span><span class="sxs-lookup"><span data-stu-id="4f929-210">For example, your organization might enforce proxy settings that transform URLs from intranet URLs to fully-qualified domain name URLs that resolve over Internet connections.</span></span> <span data-ttu-id="4f929-211">Si des fournisseurs d'authentification différents sont utilisés pour les types différents d'URL, vous constaterez peut-être que certaines connexions réussissent alors que vous vous attendiez à ce qu'elles échouent.</span><span class="sxs-lookup"><span data-stu-id="4f929-211">If different authentication providers are used for different types of URLs, you might find that some connections succeed when you would have expected them to fail.</span></span>  
  
 <span data-ttu-id="4f929-212">Si vous rencontrez des erreurs de connexion qui sont, selon vous, dues à des échecs d'authentification, vous pouvez essayer des combinaisons différentes de paramètres de réseau local et de proxy pour isoler le problème.</span><span class="sxs-lookup"><span data-stu-id="4f929-212">If you encounter connection errors that you think are due to authentication failures, you can try different combinations of LAN and proxy settings to isolate the problem.</span></span> <span data-ttu-id="4f929-213">Dans Internet Explorer, les paramètres de réseau local et de proxy se trouvent dans la boîte de dialogue **Paramètres du réseau local** , que vous ouvrez en cliquant sur **Paramètres réseau** sous l’onglet **Connexion** d’ **Options Internet**.</span><span class="sxs-lookup"><span data-stu-id="4f929-213">In Internet Explorer, LAN and proxy settings are on the **Local Area Network (LAN) Settings** dialog box, which you open by clicking **LAN settings** on the **Connection** tab of **Internet Options**.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="4f929-214">Ressources externes</span><span class="sxs-lookup"><span data-stu-id="4f929-214">External resources</span></span>  
  
-   <span data-ttu-id="4f929-215">Pour plus d'informations concernant Kerberos et les serveurs de rapports, consultez [Deploying a Business Intelligence Solution Using SharePoint, Reporting Services, and PerformancePoint Monitoring Server with Kerberos (en anglais).](https://go.microsoft.com/fwlink/?LinkID=177751)</span><span class="sxs-lookup"><span data-stu-id="4f929-215">For additional information regarding Kerberos and report servers, see [Deploying a Business Intelligence Solution Using SharePoint, Reporting Services, and PerformancePoint Monitoring Server with Kerberos.](https://go.microsoft.com/fwlink/?LinkID=177751)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4f929-216">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4f929-216">See Also</span></span>  
 <span data-ttu-id="4f929-217">[Authentification avec le serveur de rapports](authentication-with-the-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="4f929-217">[Authentication with the Report Server](authentication-with-the-report-server.md) </span></span>  
 <span data-ttu-id="4f929-218">[Octroi d'autorisations sur un serveur de rapports en mode natif](granting-permissions-on-a-native-mode-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="4f929-218">[Granting Permissions on a Native Mode Report Server](granting-permissions-on-a-native-mode-report-server.md) </span></span>  
 <span data-ttu-id="4f929-219">[Fichier de configuration RSReportServer](../report-server/rsreportserver-config-configuration-file.md) </span><span class="sxs-lookup"><span data-stu-id="4f929-219">[RSReportServer Configuration File](../report-server/rsreportserver-config-configuration-file.md) </span></span>  
 <span data-ttu-id="4f929-220">[Configurer l’authentification de base sur le serveur de rapports](configure-basic-authentication-on-the-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="4f929-220">[Configure Basic Authentication on the Report Server](configure-basic-authentication-on-the-report-server.md) </span></span>  
 <span data-ttu-id="4f929-221">[Configurer l’authentification personnalisée ou par formulaire sur le serveur de rapports](configure-custom-or-forms-authentication-on-the-report-server.md) </span><span class="sxs-lookup"><span data-stu-id="4f929-221">[Configure Custom or Forms Authentication on the Report Server](configure-custom-or-forms-authentication-on-the-report-server.md) </span></span>  
 [<span data-ttu-id="4f929-222">Protection étendue de l'authentification avec Reporting Services</span><span class="sxs-lookup"><span data-stu-id="4f929-222">Extended Protection for Authentication with Reporting Services</span></span>](extended-protection-for-authentication-with-reporting-services.md)  
  
  
