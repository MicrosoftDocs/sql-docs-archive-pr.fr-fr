---
title: Mettre à niveau une base de données du serveur de rapports | Microsoft Docs
ms.custom: ''
ms.date: 08/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- upgrading databases
- report server database
- upgrading Reporting Services
ms.assetid: 4091cf87-9d97-4048-a393-67f1f9207401
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 28e382de505781f4155204fcc652d1308dacce76
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87614389"
---
# <a name="upgrade-a-report-server-database"></a><span data-ttu-id="4ef61-102">Mettre à niveau une base de données du serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="4ef61-102">Upgrade a Report Server Database</span></span>
  <span data-ttu-id="4ef61-103">La base de données du serveur de rapports offre un espace de stockage pour une ou plusieurs instances du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4ef61-103">The report server database provides storage for one or more report server instances.</span></span> <span data-ttu-id="4ef61-104">Comme le schéma de base de données du serveur de rapports peut changer à chaque nouvelle version de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], il est nécessaire que la version de la base de données corresponde à la version de l'instance du serveur de rapports que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="4ef61-104">Because the report server database schema can change with each new release of [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], it is required that the database version match the version of the report server instance you are using.</span></span> <span data-ttu-id="4ef61-105">Dans la plupart des cas, une base de données du serveur de rapports peut être mise à niveau automatiquement sans aucune intervention de votre part.</span><span class="sxs-lookup"><span data-stu-id="4ef61-105">In most cases, a report server database can be upgraded automatically with no specific action on your part.</span></span>  
  
 <span data-ttu-id="4ef61-106">**Mode natif :** En [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] mode natif, la base de données du serveur de rapports est constituée de deux bases de données dont les noms par défaut sont « ReportServer et ReportServerTempDB ».</span><span class="sxs-lookup"><span data-stu-id="4ef61-106">**Native Mode:** In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native mode, the report server database is actually comprised of two database that have default names of "ReportServer and ReportServerTempDB".</span></span>  
  
 <span data-ttu-id="4ef61-107">**Mode SharePoint :** En [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] mode SharePoint, la base de données du serveur de rapports est en fait une collection de bases de données créée pour chaque instance de l' [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] application de service.</span><span class="sxs-lookup"><span data-stu-id="4ef61-107">**SharePoint mode:** In [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)][!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] SharePoint mode the report server database is actually a collection of databases that is created for each instance of the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service application.</span></span>  
  
## <a name="ways-to-upgrade-a-native-mode-report-server-database"></a><span data-ttu-id="4ef61-108">Méthodes de mise à niveau d'une base de données de serveur de rapports en mode natif</span><span class="sxs-lookup"><span data-stu-id="4ef61-108">Ways to Upgrade a Native Mode Report Server Database</span></span>  
 <span data-ttu-id="4ef61-109">La liste suivante identifie toutes les conditions selon lesquelles une base de données du serveur de rapports est mise à niveau :</span><span class="sxs-lookup"><span data-stu-id="4ef61-109">The following list identifies the conditions under which a report server database is upgraded:</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="4ef61-110">met à niveau une instance unique d'un serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4ef61-110">Setup upgrades a single instance of a report server.</span></span> <span data-ttu-id="4ef61-111">Le schéma de base de données du serveur de rapports est mis à niveau automatiquement après le démarrage de service et le serveur de rapports détermine que la version du schéma de base de données ne correspond pas à la version du serveur.</span><span class="sxs-lookup"><span data-stu-id="4ef61-111">The report server database schema is automatically upgraded after service startup and the report server determines that the database schema version does not match the server version.</span></span>  
  
     <span data-ttu-id="4ef61-112">Au démarrage du service, le serveur de rapports vérifie la version du schéma de base de données pour s'assurer qu'elle correspond à la version du serveur.</span><span class="sxs-lookup"><span data-stu-id="4ef61-112">At service startup, the report server checks the database schema version to verify that it matches the server version.</span></span> <span data-ttu-id="4ef61-113">Si la version du schéma de base de données est antérieure, elle est automatiquement mise à niveau vers la version du schéma requise par le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4ef61-113">If the database schema version is an older version, it is automatically upgraded to the schema version that is required by the report server.</span></span> <span data-ttu-id="4ef61-114">La mise à niveau automatique est particulièrement utile si vous avez restauré ou joint une base de données du serveur de rapports plus ancienne.</span><span class="sxs-lookup"><span data-stu-id="4ef61-114">Automatic upgrade is especially useful if you restored or attached an older report server database.</span></span> <span data-ttu-id="4ef61-115">Un message est entré dans le fichier journal de suivi du serveur de rapports, indiquant que la version du schéma de base de données a été mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="4ef61-115">A message is entered in the report server trace log file indicating that the database schema version was upgraded.</span></span>  
  
-   <span data-ttu-id="4ef61-116">Le Gestionnaire de configuration de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] met à niveau une base de données locale ou distante du serveur de rapports lorsque vous sélectionnez une version antérieure à utiliser avec une instance plus récente du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4ef61-116">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager upgrades a local or remote report server database when you select an older version to use with a newer report server instance.</span></span> <span data-ttu-id="4ef61-117">Dans ce cas, vous devez confirmer l'action de mise à niveau avant qu'elle ne se produise.</span><span class="sxs-lookup"><span data-stu-id="4ef61-117">In this case, you must confirm the upgrade action before it happens.</span></span>  
  
     <span data-ttu-id="4ef61-118">Le Gestionnaire de configuration de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] ne fournit plus de bouton Mettre à niveau distinct ni de script de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="4ef61-118">The [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager no longer provides a separate Upgrade button or upgrade script.</span></span> <span data-ttu-id="4ef61-119">Ces fonctionnalités sont obsolètes à compter de la version [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] en raison de la fonction de mise à niveau automatique du service Report Server.</span><span class="sxs-lookup"><span data-stu-id="4ef61-119">Those features are obsolete starting with [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] due to the automatic upgrade feature of the Report Server service.</span></span>  
  
 <span data-ttu-id="4ef61-120">Une fois le schéma mis à niveau, vous ne pouvez pas restaurer la mise à niveau dans une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="4ef61-120">After the schema is updated, you cannot rollback the upgrade to an earlier version.</span></span> <span data-ttu-id="4ef61-121">Pensez toujours à sauvegarder la base de données de serveur de rapports, au cas où vous devriez recréer une précédente installation.</span><span class="sxs-lookup"><span data-stu-id="4ef61-121">Always backup the report server database in case you need to recreate a previous installation.</span></span>  
  
## <a name="how-the-schema-metadata-and-report-server-content-is-updated"></a><span data-ttu-id="4ef61-122">Comment le schéma, les métadonnées et le serveur de rapports sont mis à jour</span><span class="sxs-lookup"><span data-stu-id="4ef61-122">How the Schema, Metadata, and Report Server Content is Updated</span></span>  
 <span data-ttu-id="4ef61-123">La mise à niveau de la base de données de serveur de rapports se déroule en trois étapes :</span><span class="sxs-lookup"><span data-stu-id="4ef61-123">The report server database is upgraded in three stages:</span></span>  
  
1.  <span data-ttu-id="4ef61-124">Le schéma est mis à niveau automatiquement après l'installation et le démarrage du service, ou lorsque vous sélectionnez une base de données du serveur de rapports en mode natif [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dans le Gestionnaire de configuration de [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] , qui est une ancienne version.</span><span class="sxs-lookup"><span data-stu-id="4ef61-124">The schema is upgraded automatically after setup and service startup, or when you select a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Native mode report server database in the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Configuration Manager that is an older version.</span></span> <span data-ttu-id="4ef61-125">De plus, le service Report Server vérifie la version de la base de données au démarrage.</span><span class="sxs-lookup"><span data-stu-id="4ef61-125">In addition, the Report Server service checks the database version at startup.</span></span> <span data-ttu-id="4ef61-126">Si le serveur de rapports est connecté à une base de données qui est une version antérieure, il met à jour la base de données lors du démarrage.</span><span class="sxs-lookup"><span data-stu-id="4ef61-126">If the report server is connected to a database that is an earlier version, the report server will update the database during startup.</span></span>  
  
2.  <span data-ttu-id="4ef61-127">Les descripteurs de sécurité sont mis à niveau lors la première utilisation de la base de données de serveur de rapports après la mise à jour du schéma.</span><span class="sxs-lookup"><span data-stu-id="4ef61-127">Security descriptors are upgraded on first use of the report server database after the schema is updated.</span></span>  
  
3.  <span data-ttu-id="4ef61-128">Les rapports publiés et les instantanés de rapports compilés sont mis à jour lors de la première utilisation.</span><span class="sxs-lookup"><span data-stu-id="4ef61-128">Published reports and compiled report snapshots are updated on first use.</span></span> <span data-ttu-id="4ef61-129">Pour plus d'informations, consultez [Mettre à niveau des rapports](upgrade-reports.md).</span><span class="sxs-lookup"><span data-stu-id="4ef61-129">For more information, see [Upgrade Reports](upgrade-reports.md).</span></span>  
  
 <span data-ttu-id="4ef61-130">Outre la base de données de serveur de rapports, un serveur de rapports utilise également une base de données temporaire.</span><span class="sxs-lookup"><span data-stu-id="4ef61-130">In addition to the report server database, a report server also uses a temporary database.</span></span> <span data-ttu-id="4ef61-131">La base de données temporaire est mise à niveau automatiquement lors de la mise à niveau de la base de données de serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4ef61-131">The temporary database is upgraded automatically when you upgrade the report server database.</span></span>  
  
## <a name="permissions-required-to-upgrade-a-report-server-database"></a><span data-ttu-id="4ef61-132">Autorisations obligatoires pour la mise à niveau d'une base de données du serveur de rapports</span><span class="sxs-lookup"><span data-stu-id="4ef61-132">Permissions required to upgrade a Report Server Database</span></span>  
 <span data-ttu-id="4ef61-133">Si vous mettez à niveau une installation [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] qui inclut une base de données de serveur de rapports, vous pouvez obtenir un message d'erreur si la mise à niveau de base de données est effectuée avec des autorisations insuffisantes.</span><span class="sxs-lookup"><span data-stu-id="4ef61-133">If you are upgrading a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] installation that includes a report server database, you may see an error message if the database upgrade is performed with insufficient permissions.</span></span> <span data-ttu-id="4ef61-134">Par défaut, le programme d'installation utilise le jeton de sécurité de l'utilisateur qui exécute le programme d'installation pour se connecter à l'instance [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] distante et mettre à jour le schéma.</span><span class="sxs-lookup"><span data-stu-id="4ef61-134">By default, Setup uses the security token of the user who is running the Setup program to connect to the remote [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance and update the schema.</span></span> <span data-ttu-id="4ef61-135">Si vous disposez d’autorisations de niveau [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **sysadmin** sur le serveur de base de données qui héberge les bases de données du serveur de rapports, la mise à niveau de la base de données aboutira.</span><span class="sxs-lookup"><span data-stu-id="4ef61-135">If you have [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **sysadmin** permissions on the database server that hosts the report server databases, the database upgrade will succeed.</span></span> <span data-ttu-id="4ef61-136">De même, si vous lancez le programme d’installation à partir de l’invite de commandes et spécifiez les arguments RSUPGRADEDATABASEACCOUNT et RSUPGRADEPASSWORD pour un compte qui possède l’autorisation **sysadmin** permettant de modifier le schéma sur l’ordinateur distant, la mise à niveau de la base de données s’effectuera sans problème.</span><span class="sxs-lookup"><span data-stu-id="4ef61-136">Similarly, if you run Setup from the command prompt and specify the RSUPGRADEDATABASEACCOUNT and RSUPGRADEPASSWORD arguments for an account that has **sysadmin** permission to modify the schema on the remote computer, the database upgrade will succeed.</span></span>  
  
 <span data-ttu-id="4ef61-137">En revanche, si vous ne bénéficiez pas d’une autorisation **sysadmin** concernant la base de données de l’ordinateur distant, la connexion sera refusée et un message d’erreur s’affichera, indiquant que :</span><span class="sxs-lookup"><span data-stu-id="4ef61-137">However, if you do not have **sysadmin** permission to the database on the remote computer, the connection will be refused with the following error:</span></span>  
  
 `"Setup was not able to upgrade the report server database schema. You must update the database schema manually after setup is finished. To update the schema, run the Reporting Services Configuration Manager, open the Database Setup page, re-select the database, and click Apply. The database will be upgraded automatically."`  
  
 <span data-ttu-id="4ef61-138">À ce stade, les fichiers programme du serveur de rapports sont mis à niveau, mais la base de données du serveur de rapports reste au format de la version précédente.</span><span class="sxs-lookup"><span data-stu-id="4ef61-138">At this point, the report server program files will be upgraded, but the report server database will be in the format of the previous version.</span></span> <span data-ttu-id="4ef61-139">Le serveur de rapports n'est pas disponible tant que vous n'avez pas fini le processus de mise à niveau en mettant à niveau la base de données manuellement.</span><span class="sxs-lookup"><span data-stu-id="4ef61-139">The report server will be unavailable until you finish the upgrade process by upgrading the database manually.</span></span>  
  
#### <a name="to-upgrade-a-native-mode-database-with-scripts"></a><span data-ttu-id="4ef61-140">Pour mettre à niveau une base de données en mode natif avec des scripts</span><span class="sxs-lookup"><span data-stu-id="4ef61-140">To upgrade a Native Mode database With Scripts</span></span>  
 <span data-ttu-id="4ef61-141">Vous pouvez utiliser des scripts WMI pour mettre à niveau une base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="4ef61-141">You can use WMI scripts to upgrade a report server database.</span></span> <span data-ttu-id="4ef61-142">Pour plus d’informations, consultez [méthode GenerateDatabaseUpgradeScript &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-generatedatabaseupgradescript.md)</span><span class="sxs-lookup"><span data-stu-id="4ef61-142">For more information, see [GenerateDatabaseUpgradeScript Method &#40;WMI MSReportServer_ConfigurationSetting&#41;](../wmi-provider-library-reference/configurationsetting-method-generatedatabaseupgradescript.md)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4ef61-143">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4ef61-143">See Also</span></span>  
 <span data-ttu-id="4ef61-144">[Gestionnaire de configuration de Reporting Services &#40;mode natif&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="4ef61-144">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="4ef61-145">[Créer une base de données du serveur de rapports &#40;SSRS Configuration Manager&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="4ef61-145">[Create a Report Server Database  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/create-a-report-server-database-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="4ef61-146">[Assistant modification de base de données &#40;le mode natif SSRS&#41;](../../sql-server/install/change-database-wizard-ssrs-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="4ef61-146">[Change Database Wizard &#40;SSRS Native Mode&#41;](../../sql-server/install/change-database-wizard-ssrs-native-mode.md) </span></span>  
 <span data-ttu-id="4ef61-147">[Mettre à niveau et migrer Reporting Services](upgrade-and-migrate-reporting-services.md) </span><span class="sxs-lookup"><span data-stu-id="4ef61-147">[Upgrade and Migrate Reporting Services](upgrade-and-migrate-reporting-services.md) </span></span>  
 [<span data-ttu-id="4ef61-148">Faire migrer une installation Reporting Services &#40;mode natif&#41;</span><span class="sxs-lookup"><span data-stu-id="4ef61-148">Migrate a Reporting Services Installation &#40;Native Mode&#41;</span></span>](migrate-a-reporting-services-installation-native-mode.md)  
  
  
