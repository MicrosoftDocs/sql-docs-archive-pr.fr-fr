---
title: Sauvegarder et restaurer les clés de chiffrement Reporting Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- backing up encryption keys [Reporting Services]
- restoring encryption keys [Reporting Services]
- encryption keys [Reporting Services]
- symmetric keys [Reporting Services]
ms.assetid: 6773d5df-03ef-4781-beb7-9f6825bac979
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: c8e7e61f58632898fc6150210598a671157639a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87710303"
---
# <a name="back-up-and-restore-reporting-services-encryption-keys"></a><span data-ttu-id="3a1a0-102">Sauvegarder et restaurer les clés de chiffrement Reporting Services</span><span class="sxs-lookup"><span data-stu-id="3a1a0-102">Back Up and Restore Reporting Services Encryption Keys</span></span>
  <span data-ttu-id="3a1a0-103">Une part importante de la configuration d'un serveur de rapports est réservée à la création d'une copie de sauvegarde de la clé symétrique utilisée pour le chiffrement d'informations confidentielles.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-103">An important part of report server configuration is creating a backup copy of the symmetric key used for encrypting sensitive information.</span></span> <span data-ttu-id="3a1a0-104">Cet exemplaire de clé sauvegardée est nécessaire dans de nombreuses opérations courantes. Elle vous permet de réutiliser une base de données de serveur de rapports existante dans une nouvelle installation.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-104">A backup copy of the key is required for many routine operations, and enables you to reuse an existing report server database in a new installation.</span></span>  
  
 <span data-ttu-id="3a1a0-105">**[!INCLUDE[applies](../../includes/applies-md.md)]** [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] en mode natif | [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] en mode SharePoint</span><span class="sxs-lookup"><span data-stu-id="3a1a0-105">**[!INCLUDE[applies](../../includes/applies-md.md)]**  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Native Mode | [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] SharePoint mode</span></span>  
  
 <span data-ttu-id="3a1a0-106">La restauration de la copie de sauvegarde de la clé de chiffrement est indispensable lorsque l'un des événements suivants se produit :</span><span class="sxs-lookup"><span data-stu-id="3a1a0-106">It is necessary to restore the backup copy of the encryption key when any of the following events occur:</span></span>  
  
-   <span data-ttu-id="3a1a0-107">Modification effectuée sur le nom du compte de service Windows Report Server ou réinitialisation du mot de passe.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-107">Changing the Report Server Windows service account name or resetting the password.</span></span> <span data-ttu-id="3a1a0-108">Lorsque vous utilisez le Gestionnaire de configuration de Reporting Services, la sauvegarde de la clé est intégrée à une opération de changement de nom du compte de service.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-108">When you use the Reporting Services Configuration Manager, backing up the key is part of a service account name change operation.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="3a1a0-109">La réinitialisation et la modification d'un mot de passe sont deux opérations différentes.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-109">Resetting the password is not the same as changing the password.</span></span> <span data-ttu-id="3a1a0-110">La réinitialisation d'un mot de passe requiert l'autorisation permettant de remplacer des informations de compte sur le contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-110">A password reset requires permission to overwrite account information on the domain controller.</span></span> <span data-ttu-id="3a1a0-111">Cette opération est effectuée par un administrateur système lorsqu'un utilisateur a oublié ou ne connaît pas un mot de passe particulier.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-111">Password resets are performed by a system administrator when you forget or do not know a particular password.</span></span> <span data-ttu-id="3a1a0-112">Seule la réinitialisation d'un mot de passe nécessite la restauration de la clé symétrique.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-112">Only password resets require symmetric key restoration.</span></span> <span data-ttu-id="3a1a0-113">Le changement régulier d'un mot de passe de compte ne vous oblige pas à réinitialiser la clé symétrique.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-113">Periodically changing an account password does not require you to reset the symmetric key.</span></span>  
  
-   <span data-ttu-id="3a1a0-114">Attribution d'un nouveau nom à l'ordinateur ou à l'instance qui héberge le serveur de rapports (une instance de serveur de rapports repose sur un nom d'instance [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ).</span><span class="sxs-lookup"><span data-stu-id="3a1a0-114">Renaming the computer or instance that hosts the report server (a report server instance is based on a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name).</span></span>  
  
-   <span data-ttu-id="3a1a0-115">Migration d'une installation de serveur de rapports ou configuration d'un serveur de rapports afin d'utiliser une base de données de serveur de rapports différente.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-115">Migrating a report server installation or configuring a report server to use a different report server database.</span></span>  
  
-   <span data-ttu-id="3a1a0-116">Récupération d'une installation de serveur de rapports suite à une défaillance matérielle.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-116">Recovering a report server installation due to hardware failure.</span></span>  
  
 <span data-ttu-id="3a1a0-117">Une seule copie de sauvegarde de la clé symétrique est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-117">You only need to back up one copy of the symmetric key.</span></span> <span data-ttu-id="3a1a0-118">Il existe une correspondance unilatérale entre une base de données de serveur de rapports et une clé symétrique.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-118">There is a one-to-one correspondence between a report server database and a symmetric key.</span></span> <span data-ttu-id="3a1a0-119">Bien que vous n'ayez besoin que d'un seul exemplaire de clé sauvegardé, il peut s'avérer nécessaire de restaurer cette clé à plusieurs reprises si vous exécutez plusieurs serveurs de rapports dans un modèle de déploiement évolutif.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-119">Although you only need to back up one copy, you might need to restore the key multiple times if you are running multiple report servers in a scale-out deployment model.</span></span> <span data-ttu-id="3a1a0-120">En effet, chaque instance de serveur de rapports nécessite sa copie de la clé symétrique pour verrouiller et déverrouiller des données dans la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-120">Each report server instance will need its copy of the symmetric key to lock and unlock data in the report server database.</span></span>  
  
  
## <a name="backing-up-the-encryption-keys"></a><span data-ttu-id="3a1a0-121">Sauvegarde des clés de chiffrement</span><span class="sxs-lookup"><span data-stu-id="3a1a0-121">Backing Up the Encryption Keys</span></span>  
 <span data-ttu-id="3a1a0-122">La sauvegarde de la clé symétrique est un processus qui consiste à écrire la clé dans le fichier que vous spécifiez, puis à brouiller ces données à l'aide du mot de passe que vous fournissez.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-122">Backing up the symmetric key is a process that writes the key to a file that you specify, and then scrambles the key using a password that you provide.</span></span> <span data-ttu-id="3a1a0-123">En aucun cas la clé symétrique ne peut être conservée sans être chiffrée, vous devez donc fournir un mot de passe afin de chiffrer la clé au moment de son enregistrement sur un disque.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-123">The symmetric key can never be stored in an unencrypted state so you must provide a password to encrypt the key when you save it to disk.</span></span> <span data-ttu-id="3a1a0-124">Une fois le fichier créé, vous devez le stocker dans un endroit sécurisé et **vous souvenir du mot de passe** qui permet de déverrouiller le fichier.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-124">After the file is created, you must store it in a secure location **and remember the password** that is used to unlock the file.</span></span> <span data-ttu-id="3a1a0-125">Pour sauvegarder la clé symétrique, utilisez les outils suivants :</span><span class="sxs-lookup"><span data-stu-id="3a1a0-125">To backup the symmetric key, you can use the following tools:</span></span>  
  
 <span data-ttu-id="3a1a0-126">**Mode natif :** le Gestionnaire de configuration de Reporting Services ou l'utilitaire **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="3a1a0-126">**Native mode:** Either the Reporting Services Configuration Manager or the **rskeymgmt** utility.</span></span>  
  
 <span data-ttu-id="3a1a0-127">**Mode SharePoint :** pages de l'Administration centrale de SharePoint ou PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-127">**SharePoint mode:** SharePoint Central Administration pages or PowerShell.</span></span>  
  
####  <a name="backup-sharepoint-mode-report-servers"></a><a name="bkmk_backup_sharepoint"></a> <span data-ttu-id="3a1a0-128">Sauvegarde de serveurs de rapports en mode SharePoint</span><span class="sxs-lookup"><span data-stu-id="3a1a0-128">Backup SharePoint Mode Report Servers</span></span>  
 <span data-ttu-id="3a1a0-129">Pour les serveurs de rapports en mode SharePoint, vous pouvez utiliser des commandes PowerShell ou utiliser les pages de gestion pour l'application de service [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="3a1a0-129">For SharePoint mode report servers you can either use PowerShell commands or use the management pages for the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] service application.</span></span> <span data-ttu-id="3a1a0-130">Pour plus d’informations, consultez la section « Gestion des clés » de l’article [Gérer une application de service Reporting Services SharePoint](../manage-a-reporting-services-sharepoint-service-application.md).</span><span class="sxs-lookup"><span data-stu-id="3a1a0-130">For more information, see the "Key Management" section of [Manage a Reporting Services SharePoint Service Application](../manage-a-reporting-services-sharepoint-service-application.md)</span></span>  
  
####  <a name="back-up-encryption-keys--reporting-services-configuration-manager-native-mode"></a><a name="bkmk_backup_configuration_manager"></a> <span data-ttu-id="3a1a0-131">Sauvegarder les clés de chiffrement - Gestionnaire de configuration Reporting Services (mode natif)</span><span class="sxs-lookup"><span data-stu-id="3a1a0-131">Back up encryption keys -Reporting Services Configuration Manager (Native Mode)</span></span>  
  
1.  <span data-ttu-id="3a1a0-132">Démarrez le Gestionnaire de configuration de Reporting Services et connectez-vous à l'instance de serveur de rapports à configurer.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-132">Start the Reporting Services Configuration Manager, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="3a1a0-133">Cliquez sur **Clés de chiffrement**, puis sur **Sauvegarder**.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-133">Click **Encryption Keys**, and then click **Back Up**.</span></span>  
  
3.  <span data-ttu-id="3a1a0-134">Tapez un mot de passe fort.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-134">Type a strong password.</span></span>  
  
4.  <span data-ttu-id="3a1a0-135">Spécifiez un fichier pour contenir la clé stockée.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-135">Specify a file to contain the stored key.</span></span> [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="3a1a0-136">ajoute une extension de fichier .snk au fichier.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-136">appends a .snk file extension to the file.</span></span> <span data-ttu-id="3a1a0-137">Prévoyez de conserver le fichier à part sur un disque, pour qu'il soit indépendant du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-137">Consider storing the file on a disk separate from the report server.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
####  <a name="back-up-encryption-keys--rskeymgmt-native-mode"></a><a name="bkmk_backup_rskeymgmt"></a><span data-ttu-id="3a1a0-138">Sauvegarder des clés de chiffrement-rskeymgmt (mode natif)</span><span class="sxs-lookup"><span data-stu-id="3a1a0-138">Back up encryption keys -rskeymgmt (Native Mode)</span></span>  
  
1.  <span data-ttu-id="3a1a0-139">Exécutez le fichier **rskeymgmt.exe** localement sur l'ordinateur qui héberge le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-139">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="3a1a0-140">Vous devez utiliser l'argument d'extraction `-e` pour copier la clé, fournir un nom de fichier et spécifier un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-140">You must use the `-e` extract argument to copy the key, provide a file name, and specify a password.</span></span> <span data-ttu-id="3a1a0-141">L'exemple suivant illustre les arguments que vous devez spécifier :</span><span class="sxs-lookup"><span data-stu-id="3a1a0-141">The following example illustrates the arguments you must specify:</span></span>  
  
    ```cmd
    rskeymgmt -e -f d:\rsdbkey.snk -p<password>  
    ```  
  
## <a name="restore-encryption-keys"></a><span data-ttu-id="3a1a0-142">Restaurer les clés de chiffrement</span><span class="sxs-lookup"><span data-stu-id="3a1a0-142">Restore Encryption Keys</span></span>  
 <span data-ttu-id="3a1a0-143">La restauration de la clé symétrique remplace la clé existante qui est stockée dans la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-143">Restoring the symmetric key overwrites the existing symmetric key that is stored in the report server database.</span></span> <span data-ttu-id="3a1a0-144">Cette opération permet de remplacer une clé devenue inutilisable par son exemplaire précédemment enregistré sur disquette.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-144">Restoring an encryption key replaces an unusable key with a copy that you previously saved to disk.</span></span> <span data-ttu-id="3a1a0-145">La restauration des clés de chiffrement se traduit par les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="3a1a0-145">Restoring encryption keys results in the following actions:</span></span>  
  
-   <span data-ttu-id="3a1a0-146">La clé symétrique est ouverte à l'aide du fichier de sauvegarde protégé par mot de passe.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-146">The symmetric key is opened from the password protected backup file.</span></span>  
  
-   <span data-ttu-id="3a1a0-147">La clé symétrique est chiffrée à l'aide de la clé publique du service Windows Report Server.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-147">The symmetric key is encrypted using the public key of the Report Server Windows service.</span></span>  
  
-   <span data-ttu-id="3a1a0-148">La clé symétrique chiffrée est stockée dans la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-148">The encrypted symmetric key is stored in the report server database.</span></span>  
  
-   <span data-ttu-id="3a1a0-149">Les données de clé symétrique préalablement stockées (par exemple, des informations de clé déjà présentes dans la base de données du serveur de rapports en raison d'un précédent déploiement) sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-149">The previously stored symmetric key data (for example, key information that was already in the report server database from a previous deployment) is deleted.</span></span>  
  
 <span data-ttu-id="3a1a0-150">Pour restaurer une clé de chiffrement, vous devez posséder un exemplaire de la clé de chiffrement dans un fichier</span><span class="sxs-lookup"><span data-stu-id="3a1a0-150">To restore the encryption key, you must have a copy of the encryption key on file.</span></span> <span data-ttu-id="3a1a0-151">et connaître le mot de passe permettant de déverrouiller l'exemplaire stocké.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-151">You must also know the password that unlocks the stored copy.</span></span> <span data-ttu-id="3a1a0-152">Si vous détenez la clé et le mot de passe, procédez à la restauration en exécutant l'outil de configuration de Reporting Services ou l'utilitaire **rskeymgmt** .</span><span class="sxs-lookup"><span data-stu-id="3a1a0-152">If you have the key and the password, you can run the Reporting Services Configuration tool or **rskeymgmt** utility to restore the key.</span></span> <span data-ttu-id="3a1a0-153">La clé symétrique doit être identique à l'exemplaire qui verrouille et déverrouille les données chiffrées stockées à ce moment-là dans la base de données du serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-153">The symmetric key must be the same one that locks and unlocks encrypted data currently stored in the report server database.</span></span> <span data-ttu-id="3a1a0-154">Si vous restaurez un exemplaire non valide, le serveur de rapports est incapable d'accéder à ces données.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-154">If you restore a copy that is not valid, the report server cannot access the encrypted data currently stored in the report server database.</span></span> <span data-ttu-id="3a1a0-155">Vous serez amené à supprimer toutes les valeurs chiffrées si jamais la restauration d'une clé valide est impossible.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-155">If this occurs, you might need to delete all encrypted values if you cannot restore a valid key.</span></span> <span data-ttu-id="3a1a0-156">Si, pour une raison quelconque, vous ne pouvez pas restaurer la clé de chiffrement (vous ne possédez pas de copie de sauvegarde par exemple), supprimez la clé et le contenu chiffré.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-156">If for some reason you cannot restore the encryption key (for example, if you do not have a backup copy), you must delete the existing key and encrypted content.</span></span> <span data-ttu-id="3a1a0-157">Pour plus d’informations, consultez [Supprimer et recréer des clés de chiffrement &#40;Gestionnaire de configuration de SSRS&#41;](ssrs-encryption-keys-delete-and-re-create-encryption-keys.md).</span><span class="sxs-lookup"><span data-stu-id="3a1a0-157">For more information, see [Delete and Re-create Encryption Keys  &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-delete-and-re-create-encryption-keys.md).</span></span> <span data-ttu-id="3a1a0-158">Pour plus d’informations sur la création de clés symétriques, consultez [Initialiser un serveur de rapports &#40;Gestionnaire de configuration de SSRS&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span><span class="sxs-lookup"><span data-stu-id="3a1a0-158">For more information about creating symmetric keys, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
####  <a name="restore-encryption-keys--reporting-services-configuration-manager-native-mode"></a><a name="bkmk_restore_configuration_manager"></a><span data-ttu-id="3a1a0-159">Restaurer les clés de chiffrement-Gestionnaire de configuration de Reporting Services (mode natif)</span><span class="sxs-lookup"><span data-stu-id="3a1a0-159">Restore encryption keys -Reporting Services Configuration Manager (Native Mode)</span></span>  
  
1.  <span data-ttu-id="3a1a0-160">Démarrez le Gestionnaire de configuration de Reporting Services et connectez-vous à l'instance de serveur de rapports à configurer.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-160">Start the Reporting Services Configuration Manager, and then connect to the report server instance you want to configure.</span></span>  
  
2.  <span data-ttu-id="3a1a0-161">Dans la page clés de chiffrement, cliquez sur **restaurer**.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-161">On the Encryption Keys page, click **Restore**.</span></span>  
  
3.  <span data-ttu-id="3a1a0-162">Sélectionnez le fichier .snk contenant la copie de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-162">Select the .snk file that contains the back up copy.</span></span>  
  
4.  <span data-ttu-id="3a1a0-163">Tapez le mot de passe permettant de déverrouiller le fichier.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-163">Type the password that unlocks the file.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
####  <a name="restore-encryption-keys---rskeymgmt-native-mode"></a><a name="bkmk_restore_rskeymgmt"></a> <span data-ttu-id="3a1a0-164">Restaurer les clés de chiffrement - rskeymgmt (mode natif)</span><span class="sxs-lookup"><span data-stu-id="3a1a0-164">Restore encryption keys - rskeymgmt (Native Mode)</span></span>  
  
1.  <span data-ttu-id="3a1a0-165">Exécutez le fichier **rskeymgmt.exe** localement sur l'ordinateur qui héberge le serveur de rapports.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-165">Run **rskeymgmt.exe** locally on the computer that hosts the report server.</span></span> <span data-ttu-id="3a1a0-166">Utilisez l'argument `-a` pour restaurer les clés.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-166">Use the `-a` argument to restore the keys.</span></span> <span data-ttu-id="3a1a0-167">Vous devez fournir un nom de fichier complet et spécifier un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="3a1a0-167">You must provide a fully-qualified file name and specify a password.</span></span> <span data-ttu-id="3a1a0-168">L'exemple suivant illustre les arguments que vous devez spécifier :</span><span class="sxs-lookup"><span data-stu-id="3a1a0-168">The following example illustrates the arguments you must specify:</span></span>  
  
    ```cmd
    rskeymgmt -a -f d:\rsdbkey.snk -p<password>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="3a1a0-169">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="3a1a0-169">See Also</span></span>  
 [<span data-ttu-id="3a1a0-170">Configurer et gérer des clés de chiffrement &#40;Gestionnaire de configuration de SSRS&#41;</span><span class="sxs-lookup"><span data-stu-id="3a1a0-170">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-manage-encryption-keys.md)  
