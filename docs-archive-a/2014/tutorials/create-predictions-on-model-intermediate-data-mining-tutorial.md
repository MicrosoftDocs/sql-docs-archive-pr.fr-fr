---
title: Création de prédictions sur un modèle Sequence Clustering (Didacticiel intermédiaire sur l’exploration de données) | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 94a8d4f9-a76a-49c5-9785-917010359511
author: minewiskan
ms.author: owend
manager: kfilee
ms.openlocfilehash: 2402c28a564502df9ce12c5e3f97b9d19590cfea
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87599717"
---
# <a name="creating-predictions-on-a-sequence-clustering-model-intermediate-data-mining-tutorial"></a><span data-ttu-id="2bd09-102">Création de prédictions sur un modèle Sequence Clustering (Didacticiel intermédiaire sur l'exploration de données)</span><span class="sxs-lookup"><span data-stu-id="2bd09-102">Creating Predictions on a Sequence Clustering Model (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="2bd09-103">Une fois que vous comprenez mieux le modèle Sequence Clustering en le parcourant dans la visionneuse, vous pouvez créer des requêtes de prédiction à l’aide de Générateur de requêtes de prédiction sous l’onglet **prédiction de modèle d’exploration** de données du concepteur d’exploration de données.</span><span class="sxs-lookup"><span data-stu-id="2bd09-103">After you understand the sequence clustering model better by browsing it in the viewer, you can create prediction queries by using Prediction Query Builder on the **Mining Model Prediction** tab in Data Mining Designer.</span></span> <span data-ttu-id="2bd09-104">Pour créer une prédiction, commencez par sélectionner le modèle Sequence Clustering, puis sélectionnez les données d'entrée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-104">To create a prediction, you first select the sequence clustering model, and then select the input data.</span></span> <span data-ttu-id="2bd09-105">Pour les entrées, vous pouvez utiliser une source de données externe, ou vous pouvez générer une requête singleton et fournir des valeurs dans une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="2bd09-105">For inputs, you can use either an external data source, or you can build a singleton query and provide values in a dialog box.</span></span>  
  
 <span data-ttu-id="2bd09-106">Cette leçon suppose que vous savez comment utiliser le générateur de requêtes de prédiction et souhaitez apprendre à générer des requêtes qui sont spécifiques à un modèle Sequence Clustering.</span><span class="sxs-lookup"><span data-stu-id="2bd09-106">This lesson assumes that you are already familiar with how to use the prediction query builder and want to learn how to build queries that are specific to a sequence clustering model.</span></span> <span data-ttu-id="2bd09-107">Pour obtenir des informations générales sur l’utilisation des Générateur de requêtes de prédiction, consultez [interfaces de requête d’exploration de données](../../2014/analysis-services/data-mining/data-mining-query-tools.md) ou la section du didacticiel sur l’exploration de données de base, création de [prédictions &#40;didacticiel sur l’exploration de données de base&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="2bd09-107">For general information about how to use Prediction Query Builder, see [Data Mining Query Interfaces](../../2014/analysis-services/data-mining/data-mining-query-tools.md) or the section of the Basic Data Mining tutorial, [Creating Predictions &#40;Basic Data Mining Tutorial&#41;](../../2014/tutorials/creating-predictions-basic-data-mining-tutorial.md).</span></span>  
  
## <a name="creating-predictions-on-the-regional-model"></a><span data-ttu-id="2bd09-108">Création de prédictions sur le modèle régional</span><span class="sxs-lookup"><span data-stu-id="2bd09-108">Creating Predictions on the Regional Model</span></span>  
 <span data-ttu-id="2bd09-109">Pour ce scénario, vous commencerez par créer des requêtes de prédiction singleton pour avoir une idée des différences entre les prédictions selon la région.</span><span class="sxs-lookup"><span data-stu-id="2bd09-109">For this scenario, you will first create some singleton prediction queries, to get an idea of how predictions might be different by region.</span></span>  
  
#### <a name="to-create-a-singleton-query-on-a-sequence-clustering-model"></a><span data-ttu-id="2bd09-110">Pour créer une requête singleton sur un modèle Sequence Clustering</span><span class="sxs-lookup"><span data-stu-id="2bd09-110">To create a singleton query on a sequence clustering model</span></span>  
  
1.  <span data-ttu-id="2bd09-111">Cliquez sur l’onglet **prédiction de modèle d’exploration** de données du concepteur d’exploration de données.</span><span class="sxs-lookup"><span data-stu-id="2bd09-111">Click the **Mining Model Prediction** tab of Data Mining Designer.</span></span>  
  
2.  <span data-ttu-id="2bd09-112">Dans le menu colonne du **modèle d’exploration de données** , sélectionnez **requête singleton**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-112">In the **Mining Model** column menu, select **Singleton Query**.</span></span>  
  
     <span data-ttu-id="2bd09-113">Le volet **modèle d’exploration de données** et le volet entrée de **requête singleton** s’affichent.</span><span class="sxs-lookup"><span data-stu-id="2bd09-113">The **Mining Model** pane and **Singleton Query Input** pane appear.</span></span>  
  
3.  <span data-ttu-id="2bd09-114">Dans le volet **modèle d’exploration de données** , cliquez sur Sélectionner un **modèle**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-114">In the **Mining Model** pane, click **Select Model**.</span></span> <span data-ttu-id="2bd09-115">(Vous pouvez ignorer cette étape si le mode Sequence Clustering est déjà sélectionné.)</span><span class="sxs-lookup"><span data-stu-id="2bd09-115">(You can skip this step if the sequence clustering mode is already selected.)</span></span>  
  
     <span data-ttu-id="2bd09-116">La boîte de dialogue **Sélectionner le modèle d’exploration de données** s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="2bd09-116">The **Select Mining Model** dialog box opens.</span></span>  
  
4.  <span data-ttu-id="2bd09-117">Développez le nœud qui représente la structure **d’exploration de données Sequence Clustering avec Region**, puis sélectionnez la **séquence de modèles clustering avec Region**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-117">Expand the node that represents the mining structure **Sequence Clustering with Region**, and select the model **Sequence Clustering with Region**.</span></span> <span data-ttu-id="2bd09-118">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-118">Click **OK**.</span></span> <span data-ttu-id="2bd09-119">Pour le moment, ignorez le volet d'entrée ; vous spécifierez les entrées après avoir configuré les fonctions de prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-119">For now, ignore the input pane; you will specify the inputs after you have set up the prediction functions.</span></span>  
  
5.  <span data-ttu-id="2bd09-120">Dans la grille, cliquez sur la cellule vide sous **source** , puis sélectionnez **fonction de prédiction.**</span><span class="sxs-lookup"><span data-stu-id="2bd09-120">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="2bd09-121">Dans la cellule sous **champ**, sélectionnez **PredictSequence**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-121">In the cell under **Field**, select **PredictSequence**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2bd09-122">Vous pouvez également utiliser la fonction **Predict** .</span><span class="sxs-lookup"><span data-stu-id="2bd09-122">You can also use the **Predict** function.</span></span> <span data-ttu-id="2bd09-123">Dans ce cas, veillez à choisir la version de la fonction **Predict** qui prend comme argument une colonne de table.</span><span class="sxs-lookup"><span data-stu-id="2bd09-123">If you do, be sure to choose the version of the **Predict** function that takes a table column as argument..</span></span>  
  
6.  <span data-ttu-id="2bd09-124">Dans le volet **modèle d’exploration de données** , sélectionnez la table imbriquée et faites-la `v Assoc Seq Line Items` glisser dans la grille vers la zone **critères/argument** de la fonction **PredictSequence** .</span><span class="sxs-lookup"><span data-stu-id="2bd09-124">In the **Mining Model** pane, select the nested table `v Assoc Seq Line Items`, and drag it into the grid, to the **Criteria/Argument** box for the **PredictSequence** function.</span></span>  
  
     <span data-ttu-id="2bd09-125">Le glisser-déplacer des noms de table et de colonne vous permet de générer des instructions complexes sans erreurs de syntaxe.</span><span class="sxs-lookup"><span data-stu-id="2bd09-125">Dragging and dropping table and column names enables you to build complex statements without syntax errors.</span></span> <span data-ttu-id="2bd09-126">Toutefois, elle remplace le contenu actuel de la cellule, qui inclut d’autres arguments facultatifs pour la fonction **PredictSequence** .</span><span class="sxs-lookup"><span data-stu-id="2bd09-126">However, it replaces the current contents of the cell, which include other optional arguments for the **PredictSequence** function.</span></span> <span data-ttu-id="2bd09-127">Pour consulter les autres arguments, vous pouvez ajouter temporairement une deuxième instance de la fonction à la grille pour référence.</span><span class="sxs-lookup"><span data-stu-id="2bd09-127">To view the other arguments, you can temporarily add a second instance of the function to the grid for reference.</span></span>  
  
7.  <span data-ttu-id="2bd09-128">Cliquez sur le bouton **résultat** dans le coin supérieur de la générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-128">Click the **Result** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="2bd09-129">Les résultats attendus contiennent une seule colonne avec l' **expression**d’en-tête.</span><span class="sxs-lookup"><span data-stu-id="2bd09-129">The expected results contain a single column with the heading **Expression**.</span></span> <span data-ttu-id="2bd09-130">La colonne **expression** contient une table imbriquée avec trois colonnes comme suit :</span><span class="sxs-lookup"><span data-stu-id="2bd09-130">The **Expression** column contains a nested table with three columns as follows:</span></span>  
  
|<span data-ttu-id="2bd09-131">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="2bd09-131">$SEQUENCE</span></span>|<span data-ttu-id="2bd09-132">Numéro de ligne</span><span class="sxs-lookup"><span data-stu-id="2bd09-132">Line Number</span></span>|<span data-ttu-id="2bd09-133">Modèle</span><span class="sxs-lookup"><span data-stu-id="2bd09-133">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="2bd09-134">1</span><span class="sxs-lookup"><span data-stu-id="2bd09-134">1</span></span>||<span data-ttu-id="2bd09-135">Mountain-200</span><span class="sxs-lookup"><span data-stu-id="2bd09-135">Mountain-200</span></span>|  
  
 <span data-ttu-id="2bd09-136">Que signifient ces résultats ?</span><span class="sxs-lookup"><span data-stu-id="2bd09-136">What do these results mean?</span></span> <span data-ttu-id="2bd09-137">N'oubliez pas que vous n'avez pas spécifié d'entrées.</span><span class="sxs-lookup"><span data-stu-id="2bd09-137">Remember that you did not specify any inputs.</span></span> <span data-ttu-id="2bd09-138">Par conséquent, la prédiction est élaborée par rapport à la population globale de cas, et Analysis Services retourne la prédiction la plus probable en général.</span><span class="sxs-lookup"><span data-stu-id="2bd09-138">Therefore, the prediction is made against the entire population of cases, and Analysis Services returns the most likely prediction overall.</span></span>  
  
### <a name="adding-inputs-to-a-singleton-prediction-query"></a><span data-ttu-id="2bd09-139">Ajout d'entrées à une requête de prédiction singleton</span><span class="sxs-lookup"><span data-stu-id="2bd09-139">Adding Inputs to a Singleton Prediction Query</span></span>  
 <span data-ttu-id="2bd09-140">Jusqu'à maintenant, vous n'avez pas spécifié d'entrées.</span><span class="sxs-lookup"><span data-stu-id="2bd09-140">Until now, you have not specified any inputs.</span></span> <span data-ttu-id="2bd09-141">Dans la tâche suivante, vous allez utiliser le volet **entrée de requête singleton** pour spécifier des entrées dans la requête.</span><span class="sxs-lookup"><span data-stu-id="2bd09-141">In the next task, you will use the **Singleton Query Input** pane to specify some inputs to the query.</span></span> <span data-ttu-id="2bd09-142">En premier lieu, vous utiliserez [Region] comme une entrée au modèle Sequence Clustering régional pour déterminer si les séquences prédites sont les mêmes pour toutes les régions.</span><span class="sxs-lookup"><span data-stu-id="2bd09-142">First, you will use [Region] as an input to the regional sequence clustering model, to determine whether the predicted sequences are the same for all regions.</span></span> <span data-ttu-id="2bd09-143">Vous apprendrez ensuite comment modifier la requête pour ajouter la probabilité pour chaque prédiction et aplatir les résultats pour faciliter leur affichage.</span><span class="sxs-lookup"><span data-stu-id="2bd09-143">You will then learn how to modify the query to add the probability for each prediction, and flatten the results to make them easier to view.</span></span>  
  
##### <a name="to-generate-predictions-for-a-specific-customer-group"></a><span data-ttu-id="2bd09-144">Pour générer des prédictions pour un groupe de client spécifique</span><span class="sxs-lookup"><span data-stu-id="2bd09-144">To generate predictions for a specific customer group</span></span>  
  
1.  <span data-ttu-id="2bd09-145">Cliquez sur le bouton **conception** dans l’angle supérieur gauche de la générateur de requêtes de prédiction pour revenir à la grille de création de la requête.</span><span class="sxs-lookup"><span data-stu-id="2bd09-145">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="2bd09-146">Dans la boîte de dialogue **entrée de requête singleton** , cliquez sur la zone **valeur** pour `Region` , puis sélectionnez **Europe**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-146">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **Europe**.</span></span>  
  
3.  <span data-ttu-id="2bd09-147">Cliquez sur le bouton **résultat** pour afficher les prédictions pour les clients en Europe.</span><span class="sxs-lookup"><span data-stu-id="2bd09-147">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
4.  <span data-ttu-id="2bd09-148">Cliquez sur le bouton **conception** dans l’angle supérieur gauche de la générateur de requêtes de prédiction pour revenir à la grille de création de la requête.</span><span class="sxs-lookup"><span data-stu-id="2bd09-148">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
5.  <span data-ttu-id="2bd09-149">Dans la boîte de dialogue **entrée de requête singleton** , cliquez sur la zone **valeur** pour `Region` , puis sélectionnez **Amérique du Nord**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-149">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select **North America**.</span></span>  
  
6.  <span data-ttu-id="2bd09-150">Cliquez sur le bouton **résultat** pour afficher les prédictions des clients dans Amérique du Nord.</span><span class="sxs-lookup"><span data-stu-id="2bd09-150">Click the **Result** button to view predictions for customers in North America.</span></span>  
  
### <a name="adding-probabilities-by-using-a-custom-expression"></a><span data-ttu-id="2bd09-151">Ajout des probabilités à l'aide d'une expression personnalisée</span><span class="sxs-lookup"><span data-stu-id="2bd09-151">Adding Probabilities by Using a Custom Expression</span></span>  
 <span data-ttu-id="2bd09-152">Générer la probabilité pour chaque prédiction est légèrement plus compliqué, parce que la probabilité est un attribut de la prédiction et est générée comme une table imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-152">To output the probability for each prediction is slightly more complicated, because the probability is an attribute of the prediction and is output as a nested table.</span></span> <span data-ttu-id="2bd09-153">Si vous connaissez les extensions DMX, vous pouvez modifier facilement la requête pour ajouter une instruction de sous-sélection sur la table imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-153">If you are familiar with Data Mining Extensions (DMX), you can easily alter the query to add a sub-select statement on the nested table.</span></span> <span data-ttu-id="2bd09-154">Toutefois, vous pouvez créer également une instruction de sous-sélection dans le Générateur de requêtes de prédiction en ajoutant une expression personnalisée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-154">However, you can also create a sub-select statement in the Prediction Query Builder by adding a custom expression.</span></span>  
  
##### <a name="to-output-probabilities-for-a-predicted-sequence-by-using-a-custom-expression"></a><span data-ttu-id="2bd09-155">Pour générer des probabilités pour une séquence prédite à l'aide d'une expression personnalisée</span><span class="sxs-lookup"><span data-stu-id="2bd09-155">To output probabilities for a predicted sequence by using a custom expression</span></span>  
  
1.  <span data-ttu-id="2bd09-156">Cliquez sur le bouton **conception** dans l’angle supérieur gauche de la générateur de requêtes de prédiction pour revenir à la grille de création de la requête.</span><span class="sxs-lookup"><span data-stu-id="2bd09-156">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="2bd09-157">Dans la grille, sous **source**, cliquez sur une nouvelle ligne, puis sélectionnez **expression personnalisée**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-157">In the grid, under **Source**, click a new row, and select **Custom Expression**.</span></span>  
  
3.  <span data-ttu-id="2bd09-158">Laissez la zone sous **champ** vide.</span><span class="sxs-lookup"><span data-stu-id="2bd09-158">Leave the box under **Field** blank.</span></span>  
  
4.  <span data-ttu-id="2bd09-159">Pour **alias**, tapez `t` .</span><span class="sxs-lookup"><span data-stu-id="2bd09-159">For **Alias**, type `t`.</span></span>  
  
5.  <span data-ttu-id="2bd09-160">Dans la zone **critères/argument** , tapez l’instruction sub-select complète comme indiqué dans l’exemple de code suivant.</span><span class="sxs-lookup"><span data-stu-id="2bd09-160">In the **Criteria/Argument** box, type the complete sub-select statement as shown in the following code sample.</span></span> <span data-ttu-id="2bd09-161">Veillez à inclure les parenthèses de début et de fin.</span><span class="sxs-lookup"><span data-stu-id="2bd09-161">Be sure to include the starting and ending parentheses.</span></span>  
  
    ```  
    (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))  
    ```  
  
6.  <span data-ttu-id="2bd09-162">Cliquez sur le bouton **résultat** pour afficher les prédictions pour les clients en Europe.</span><span class="sxs-lookup"><span data-stu-id="2bd09-162">Click the **Result** button to view predictions for customers in Europe.</span></span>  
  
 <span data-ttu-id="2bd09-163">Les résultats contiennent maintenant deux tables imbriquées, une avec la prédiction, et une avec la probabilité pour la prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-163">The results now contain two nested tables, one with the prediction, and one with the probability for the prediction.</span></span> <span data-ttu-id="2bd09-164">Si la requête ne fonctionne pas, vous pouvez basculer en mode affichage de conception de requête et examiner l'instruction de requête complète, qui doit être comme suit :</span><span class="sxs-lookup"><span data-stu-id="2bd09-164">If the query does not work, you can switch to query design view and review the complete query statement, which should be as follows:</span></span>  
  
```  
SELECT  
  PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
  ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
FROM  
  [Sequence Clustering with Region]  
NATURAL PREDICTION JOIN  
(SELECT 'Europe' AS [Region]) AS t  
```  
  
### <a name="working-with-results"></a><span data-ttu-id="2bd09-165">Utilisation des résultats</span><span class="sxs-lookup"><span data-stu-id="2bd09-165">Working with Results</span></span>  
 <span data-ttu-id="2bd09-166">En présence d'un grand nombre de tables imbriquées dans les résultats, vous pouvez aplatir les résultats pour faciliter leur affichage.</span><span class="sxs-lookup"><span data-stu-id="2bd09-166">When there are many nested tables in the results, you might want to flatten the results for easier viewing.</span></span> <span data-ttu-id="2bd09-167">Pour cela, vous pouvez modifier la requête manuellement et ajouter le mot clé `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="2bd09-167">To do this, you can manually modify the query and add the `FLATTENED` keyword.</span></span>  
  
##### <a name="to-flatten-nested-rowsets-in-a-prediction-query"></a><span data-ttu-id="2bd09-168">Pour aplatir des ensembles de lignes imbriqués dans une requête de prédiction</span><span class="sxs-lookup"><span data-stu-id="2bd09-168">To flatten nested rowsets in a prediction query</span></span>  
  
1.  <span data-ttu-id="2bd09-169">Cliquez sur le bouton **requête** dans l’angle de la générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-169">Click the **Query** button in the corner of the Prediction Query Builder.</span></span>  
  
     <span data-ttu-id="2bd09-170">La grille se transforme en un volet ouvert où vous pouvez afficher et modifier l'instruction DMX créée par le Générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-170">The grid changes to an open pane where you can view and modify the DMX statement that was created by the Prediction Query Builder.</span></span>  
  
2.  <span data-ttu-id="2bd09-171">Après le mot clé `SELECT`, tapez `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="2bd09-171">After the `SELECT` keyword, type `FLATTENED`.</span></span>  
  
     <span data-ttu-id="2bd09-172">Le texte complet de la requête doit être semblable aux éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="2bd09-172">The complete text of the query should be similar to the following:</span></span>  
  
    ```  
    SELECT FLATTENED  
      PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]),  
      ( (SELECT PredictProbability([Model]) FROM PredictSequence([Sequence Clustering with Region].[v Assoc Seq Line Items]))) as [t]  
    FROM  
      [Sequence Clustering with Region]  
    NATURAL PREDICTION JOIN  
    (SELECT 'Europe' AS [Region]) AS t  
    ```  
  
3.  <span data-ttu-id="2bd09-173">Cliquez sur le bouton **résultats** dans le coin supérieur de la générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-173">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="2bd09-174">Après avoir modifié une requête manuellement, vous ne pourrez pas revenir en mode Conception sans perdre les modifications.</span><span class="sxs-lookup"><span data-stu-id="2bd09-174">After you have manually edited a query, you will not be able to switch back to Design view without losing the changes.</span></span> <span data-ttu-id="2bd09-175">Toutefois, vous pouvez enregistrer sous un fichier texte l'instruction DMX que vous avez créée manuellement, puis repasser en mode Conception.</span><span class="sxs-lookup"><span data-stu-id="2bd09-175">You can, however, save the DMX statement that you created manually to a text file, and then change back to Design view.</span></span> <span data-ttu-id="2bd09-176">Dans ce cas, la requête est restaurée à la dernière version qui était valide en mode Conception.</span><span class="sxs-lookup"><span data-stu-id="2bd09-176">When you do so, the query is reverted to the last version that was valid in Design view.</span></span>  
  
## <a name="creating-predictions-on-the-related-model"></a><span data-ttu-id="2bd09-177">Création de prédictions sur le modèle connexe</span><span class="sxs-lookup"><span data-stu-id="2bd09-177">Creating Predictions on the Related Model</span></span>  
 <span data-ttu-id="2bd09-178">Les exemples précédents ont utilisé une colonne de table de cas, Région, comme entrée à la requête de prédiction singleton, parce que vous souhaitiez savoir si le modèle avait trouvé des différences entre des régions.</span><span class="sxs-lookup"><span data-stu-id="2bd09-178">The previous examples used a case table column, Region, as the input to the singleton prediction query, because you were interested in knowing whether the model had found any differences between regions.</span></span> <span data-ttu-id="2bd09-179">Toutefois, après avoir exploré le modèle, vous avez décidé que les différences ne sont pas assez significatives pour justifier de personnaliser des recommandations de produits par région.</span><span class="sxs-lookup"><span data-stu-id="2bd09-179">However, after exploring the model, you decided that the differences are not strong enough to justify customizing product recommendations by region.</span></span> <span data-ttu-id="2bd09-180">Ce que vous cherchez vraiment à prédire sont les éléments que choisissent les clients.</span><span class="sxs-lookup"><span data-stu-id="2bd09-180">What you are really interested in predicting is the items that customers select.</span></span> <span data-ttu-id="2bd09-181">Par conséquent, dans les requêtes qui suivent, vous utiliserez le modèle Sequence Clustering qui n'inclut pas Région, pour générer des recommandations pour tous les clients.</span><span class="sxs-lookup"><span data-stu-id="2bd09-181">Therefore, in the queries that follow, you will use the sequence clustering model that does not include Region, to generate recommendations for all customers.</span></span>  
  
### <a name="using-nested-table-columns-as-input"></a><span data-ttu-id="2bd09-182">Utilisation de colonnes de table imbriquée comme entrée</span><span class="sxs-lookup"><span data-stu-id="2bd09-182">Using Nested Table Columns as Input</span></span>  
 <span data-ttu-id="2bd09-183">En premier lieu, vous allez créer une requête de prédiction singleton qui prend un élément unique comme entrée et retourne l'élément suivant le plus probable.</span><span class="sxs-lookup"><span data-stu-id="2bd09-183">First you will create a singleton prediction query that takes a single item as input and returns the next most likely item.</span></span> <span data-ttu-id="2bd09-184">Pour obtenir une prédiction de ce type, vous devez utiliser une colonne de table imbriquée comme valeur d'entrée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-184">To get a prediction of this kind, you have to use a nested table column as the input value.</span></span> <span data-ttu-id="2bd09-185">En effet, l'attribut que vous prédisez, Model, fait partie d'une table imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-185">This is because the attribute that you are predicting, Model, is part of a nested table.</span></span> <span data-ttu-id="2bd09-186">Analysis Services fournit la boîte de dialogue entrée de la **table imbriquée** pour vous aider à créer facilement des requêtes de prédiction sur des attributs de tables imbriquées, à l’aide du générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="2bd09-186">Analysis Services provides the **Nested Table Input** dialog box to help you easily create prediction queries on nested table attributes, by using the Prediction Query Builder.</span></span>  
  
##### <a name="to-use-a-nested-table-as-input-to-a-prediction"></a><span data-ttu-id="2bd09-187">Pour utiliser une table imbriquée comme entrée à une prédiction</span><span class="sxs-lookup"><span data-stu-id="2bd09-187">To use a nested table as input to a prediction</span></span>  
  
1.  <span data-ttu-id="2bd09-188">Cliquez sur le bouton **conception** dans l’angle supérieur gauche de la générateur de requêtes de prédiction pour revenir à la grille de création de la requête.</span><span class="sxs-lookup"><span data-stu-id="2bd09-188">Click the **Design** button in the upper left-hand corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="2bd09-189">Dans la boîte de dialogue **entrée de requête singleton** , cliquez sur la zone **valeur** pour `Region` , puis sélectionnez la ligne vide pour effacer l’entrée pour ce champ.</span><span class="sxs-lookup"><span data-stu-id="2bd09-189">In the **Singleton Query Input** dialog box, click the **Value** box for `Region`, and select the empty row to clear the input for this field.</span></span>  
  
3.  <span data-ttu-id="2bd09-190">Dans la boîte de dialogue **entrée de requête singleton** , cliquez sur la zone **valeur** pour `vAssocSeqLineItems` , puis cliquez sur le bouton (...).</span><span class="sxs-lookup"><span data-stu-id="2bd09-190">In the **Singleton Query Input** dialog box, click the **Value** box for `vAssocSeqLineItems`, and then click the (...) button.</span></span>  
  
4.  <span data-ttu-id="2bd09-191">Dans la boîte de dialogue entrée de la **table imbriquée** , cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-191">In the **Nested Table Input** dialog box, click **Add**.</span></span>  
  
5.  <span data-ttu-id="2bd09-192">Dans la nouvelle ligne, cliquez sur la zone sous `Model` , puis sélectionnez Touring Band dans la liste.</span><span class="sxs-lookup"><span data-stu-id="2bd09-192">In the new row, click the box under `Model`, and select Touring Tire from the list.</span></span> <span data-ttu-id="2bd09-193">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-193">Click **OK**.</span></span>  
  
6.  <span data-ttu-id="2bd09-194">Cliquez sur le bouton **résultat** pour afficher les prédictions.</span><span class="sxs-lookup"><span data-stu-id="2bd09-194">Click the **Result** button to view the predictions.</span></span>  
  
 <span data-ttu-id="2bd09-195">Le modèle recommande les éléments suivants pour tous les clients qui choisissent Touring Tire comme premier élément.</span><span class="sxs-lookup"><span data-stu-id="2bd09-195">The model recommends the following next items for all customers who choose the Touring Tire as the first item.</span></span> <span data-ttu-id="2bd09-196">L'exploration du modèle vous a déjà indiqué que les clients achètent fréquemment les produits Touring Tire et Touring Tire Tube en même temps, donc ces recommandations semblent correctes.</span><span class="sxs-lookup"><span data-stu-id="2bd09-196">You already know from exploring the model that customers frequently purchase the products Touring Tire and Touring Tire Tube together, so these recommendations look good.</span></span>  
  
|<span data-ttu-id="2bd09-197">$SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="2bd09-197">$SEQUENCE</span></span>|<span data-ttu-id="2bd09-198">Numéro de ligne</span><span class="sxs-lookup"><span data-stu-id="2bd09-198">Line Number</span></span>|<span data-ttu-id="2bd09-199">Modèle</span><span class="sxs-lookup"><span data-stu-id="2bd09-199">Model</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="2bd09-200">1</span><span class="sxs-lookup"><span data-stu-id="2bd09-200">1</span></span>||<span data-ttu-id="2bd09-201">Touring Tire Tube (Pneu pour vélo de tourisme)</span><span class="sxs-lookup"><span data-stu-id="2bd09-201">Touring Tire Tube</span></span>|  
|<span data-ttu-id="2bd09-202">2</span><span class="sxs-lookup"><span data-stu-id="2bd09-202">2</span></span>||<span data-ttu-id="2bd09-203">Sport-100</span><span class="sxs-lookup"><span data-stu-id="2bd09-203">Sport-100</span></span>|  
|<span data-ttu-id="2bd09-204">3</span><span class="sxs-lookup"><span data-stu-id="2bd09-204">3</span></span>||<span data-ttu-id="2bd09-205">Long-Sleeve Logo Jersey (Pull-over à manches longues)</span><span class="sxs-lookup"><span data-stu-id="2bd09-205">Long-Sleeve Logo Jersey</span></span>|  
  
### <a name="creating-a-bulk-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="2bd09-206">Création d'une requête de prédiction de masse à l'aide des entrées de table imbriquée</span><span class="sxs-lookup"><span data-stu-id="2bd09-206">Creating a Bulk Prediction Query using Nested Table Inputs</span></span>  
 <span data-ttu-id="2bd09-207">Maintenant que vous avez établi que le modèle crée le type des prédictions que vous pouvez utiliser pour faire des recommandations, vous allez créer une requête de prédiction mappée à une source de données externe.</span><span class="sxs-lookup"><span data-stu-id="2bd09-207">Now that you are satisfied that the model creates the kind of predictions that you can use in making recommendations, you will create a prediction query that is mapped to an external data source.</span></span> <span data-ttu-id="2bd09-208">Cette source de données fournit des valeurs qui représentent des produits actuels.</span><span class="sxs-lookup"><span data-stu-id="2bd09-208">That data source will provide values representing current products.</span></span> <span data-ttu-id="2bd09-209">Comme vous souhaitez créer une requête de prédiction qui fournit l'ID du client et une liste des produits comme entrée, vous ajouterez la table des clients comme table de cas, et la table des achats comme table imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-209">Because you are interested in creating a prediction query that provides Customer ID and a list of products as input, you will add the customer table as the case table, and the purchases table as the nested table.</span></span> <span data-ttu-id="2bd09-210">Puis, vous ajouterez des fonctions de prédiction comme vous l'avez fait précédemment pour créer des recommandations.</span><span class="sxs-lookup"><span data-stu-id="2bd09-210">Then you will add prediction functions as you did previously to create recommendations.</span></span>  
  
 <span data-ttu-id="2bd09-211">Il s'agit de la même procédure que vous utilisez pour créer des prédictions pour le scénario d'analyse du panier d'achat de la Leçon 3 ; toutefois, dans un modèle Sequence Clustering, les prédictions font aussi appel à cet ordre comme entrée.</span><span class="sxs-lookup"><span data-stu-id="2bd09-211">This is the same procedure that you use to create predictions for the market basket scenario in Lesson 3; however, in a sequence clustering model predictions also need the order as input.</span></span>  
  
##### <a name="to-create-a-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="2bd09-212">Pour créer une requête de prédiction à l'aide d'entrées de table imbriquée</span><span class="sxs-lookup"><span data-stu-id="2bd09-212">To create a prediction query using nested table inputs</span></span>  
  
1.  <span data-ttu-id="2bd09-213">Dans le volet **modèle d’exploration de données** , sélectionnez le modèle Sequence Clustering, s’il n’est pas déjà sélectionné.</span><span class="sxs-lookup"><span data-stu-id="2bd09-213">In the **Mining Model** pane, select the Sequence Clustering model, if it is not already selected.</span></span>  
  
2.  <span data-ttu-id="2bd09-214">Dans la boîte de dialogue **Sélectionner une ou plusieurs tables d’entrée** , cliquez sur **Sélectionner la table de cas**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-214">In the **Select Input Table(s)** dialog box, click **Select Case Table**.</span></span>  
  
3.  <span data-ttu-id="2bd09-215">Dans la boîte de dialogue **Sélectionner une table** , pour source de données, sélectionnez Orders.</span><span class="sxs-lookup"><span data-stu-id="2bd09-215">In the **Select Table** dialog box, for Data Source, select Orders.</span></span> <span data-ttu-id="2bd09-216">Dans la liste nom de la **table/vue** , sélectionnez vAssocSeqOrders, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-216">In the **Table/View Name** list, select vAssocSeqOrders, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="2bd09-217">Dans la boîte de dialogue **Sélectionner une ou plusieurs tables d’entrée** , cliquez sur **Sélectionner la table imbriquée**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-217">In the **Select Input Table(s)** dialog box, click **Select Nested Table**.</span></span>  
  
5.  <span data-ttu-id="2bd09-218">Dans la boîte de dialogue **Sélectionner une table** , pour **source de données**, sélectionnez Orders.</span><span class="sxs-lookup"><span data-stu-id="2bd09-218">In the **Select Table** dialog box, for **Data Source**, select Orders.</span></span> <span data-ttu-id="2bd09-219">Dans la liste nom de la **table/vue** , sélectionnez vAssocSeqLineItems, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-219">In the **Table/View name** list, select vAssocSeqLineItems, and then click **OK**.</span></span>  
  
     <span data-ttu-id="2bd09-220">Analysis Services va tenter de détecter des relations et de les créer automatiquement si les types de données correspondent et les noms de colonne sont similaires.</span><span class="sxs-lookup"><span data-stu-id="2bd09-220">Analysis Services will try to detect relationships and create them automatically if the data types match and the column names are similar.</span></span> <span data-ttu-id="2bd09-221">Si les relations qu’il crée sont incorrectes, vous pouvez cliquer avec le bouton droit sur la ligne de jointure et sélectionner **modifier les connexions** pour modifier le mappage de colonne, ou vous pouvez cliquer avec le bouton droit sur la ligne de jointure et sélectionner **supprimer** pour supprimer complètement la relation.</span><span class="sxs-lookup"><span data-stu-id="2bd09-221">If the relationships that it creates are wrong, you can right-click the join line and select **Modify Connections** to edit the column mapping, or you can right-click the join line and select **Delete** to remove the relationship completely.</span></span> <span data-ttu-id="2bd09-222">Dans ce cas, comme les tables ont déjà été jointes dans la vue de source de données, ces relations sont ajoutées automatiquement au volet de conception.</span><span class="sxs-lookup"><span data-stu-id="2bd09-222">In this case, because the tables were already joined in the data source view, those relationships are automatically added to the design pane.</span></span>  
  
6.  <span data-ttu-id="2bd09-223">Ajoutez une nouvelle ligne à la grille.</span><span class="sxs-lookup"><span data-stu-id="2bd09-223">Add a new row to the grid.</span></span> <span data-ttu-id="2bd09-224">Pour **source**, sélectionnez vAssocSeqOrders, et pour **champ**, sélectionnez CustomerKey.</span><span class="sxs-lookup"><span data-stu-id="2bd09-224">For **Source**, select vAssocSeqOrders, and for **Field**, select CustomerKey.</span></span>  
  
7.  <span data-ttu-id="2bd09-225">Ajoutez une nouvelle ligne à la grille.</span><span class="sxs-lookup"><span data-stu-id="2bd09-225">Add a new row to the grid.</span></span> <span data-ttu-id="2bd09-226">Pour **source**, sélectionnez **fonction de prédiction**, et pour **champ**, sélectionnez **PredictSequence**.</span><span class="sxs-lookup"><span data-stu-id="2bd09-226">For **Source**, select **Prediction Function**, and for **Field**, select **PredictSequence**.</span></span>  
  
8.  <span data-ttu-id="2bd09-227">Faites glisser vAssocSeqLineItems vers la zone **critères/argument** .</span><span class="sxs-lookup"><span data-stu-id="2bd09-227">Drag vAssocSeqLineItems, into the **Criteria/Argument** box.</span></span> <span data-ttu-id="2bd09-228">Cliquez à la fin de la zone **critères/argument** , puis tapez les arguments suivants : `2` .</span><span class="sxs-lookup"><span data-stu-id="2bd09-228">Click at the end of the **Criteria/Argument** box and then type the following arguments: `2`.</span></span>  
  
     <span data-ttu-id="2bd09-229">Le texte complet de la zone **critères/argument** doit être :`[Sequence Clustering].[v Assoc Seq Line Items],2`</span><span class="sxs-lookup"><span data-stu-id="2bd09-229">The complete text in the **Criteria/Argument** box should be: `[Sequence Clustering].[v Assoc Seq Line Items],2`</span></span>  
  
9. <span data-ttu-id="2bd09-230">Cliquez sur le bouton **résultat** pour afficher les prédictions pour chaque client.</span><span class="sxs-lookup"><span data-stu-id="2bd09-230">Click the **Result** button to view the predictions for each customer.</span></span>  
  
 <span data-ttu-id="2bd09-231">Vous avez terminé le didacticiel sur les modèles Sequence Clustering.</span><span class="sxs-lookup"><span data-stu-id="2bd09-231">You have completed the tutorial on sequence clustering models.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="2bd09-232">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="2bd09-232">Next Steps</span></span>  
 <span data-ttu-id="2bd09-233">Si vous avez terminé toutes les sections du didacticiel sur l' [exploration de données intermédiaire &#40;Analysis Services d’exploration de données&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), l’étape suivante peut consister à apprendre à utiliser des instructions DMX (Data Mining Extensions) pour créer des modèles et générer des prédictions.</span><span class="sxs-lookup"><span data-stu-id="2bd09-233">If you have finished all the sections in the [Intermediate Data Mining Tutorial &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/intermediate-data-mining-tutorial-analysis-services-data-mining.md), the next step might be to learn to use Data Mining Extensions (DMX) statements to build models and generate predictions.</span></span> <span data-ttu-id="2bd09-234">Pour plus d’informations, consultez [création et interrogation de modèles d’exploration de données à l’aide de DMX : didacticiels &#40;Analysis Services-exploration de données&#41;](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span><span class="sxs-lookup"><span data-stu-id="2bd09-234">For more information, see [Creating and Querying Data Mining Models with DMX: Tutorials &#40;Analysis Services - Data Mining&#41;](../../2014/tutorials/create-query-data-mining-models-dmx-tutorials.md).</span></span>  
  
 <span data-ttu-id="2bd09-235">Si vous maîtrisez les concepts de la programmation, vous pouvez utiliser également des objets AMO (Analysis Management Objects) pour utiliser par programme des objets d'exploration de données.</span><span class="sxs-lookup"><span data-stu-id="2bd09-235">If you are familiar with programming concepts, you can also use Analysis Management Objects (AMO) to programmatically work with data mining objects.</span></span> <span data-ttu-id="2bd09-236">Pour plus d’informations, consultez [Classes d’exploration de données AMO](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span><span class="sxs-lookup"><span data-stu-id="2bd09-236">For more information, see [AMO Data Mining Classes](https://docs.microsoft.com/bi-reference/amo/amo-data-mining-classes).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2bd09-237">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2bd09-237">See Also</span></span>  
 <span data-ttu-id="2bd09-238">[Exemples de requêtes de modèle Sequence Clustering](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span><span class="sxs-lookup"><span data-stu-id="2bd09-238">[Sequence Clustering Model Query Examples](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md) </span></span>  
 [<span data-ttu-id="2bd09-239">Contenu du modèle d’exploration de données pour les modèles Sequence Clustering &#40;Analysis Services - Exploration de données&#41;</span><span class="sxs-lookup"><span data-stu-id="2bd09-239">Mining Model Content for Sequence Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](../../2014/analysis-services/data-mining/mining-model-content-for-sequence-clustering-models.md)  
  
  
