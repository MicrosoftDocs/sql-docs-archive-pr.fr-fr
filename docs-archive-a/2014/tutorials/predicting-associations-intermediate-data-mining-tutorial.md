---
title: Prédiction d’associations (didacticiel sur l’exploration de données intermédiaire) | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 9140c5f2-b340-45a6-9c27-d870d15aafea
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: bee5ca4ded1b2fd5cbda0712cb766c825b9d0318
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87600406"
---
# <a name="predicting-associations-intermediate-data-mining-tutorial"></a><span data-ttu-id="a680a-102">Prédiction d'associations (Didacticiel sur l'exploration de données intermédiaire)</span><span class="sxs-lookup"><span data-stu-id="a680a-102">Predicting Associations (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="a680a-103">Après avoir traité les modèles, vous pouvez utiliser les informations sur les associations stockées dans le modèle pour créer des prédictions.</span><span class="sxs-lookup"><span data-stu-id="a680a-103">After the models have been processed, you can use the information about associations stored in the model to create predictions.</span></span> <span data-ttu-id="a680a-104">Dans la dernière tâche de cette leçon, vous apprenez comment générer des requêtes de prédiction sur les modèles d'association que vous avez créés.</span><span class="sxs-lookup"><span data-stu-id="a680a-104">In the final task of this lesson, you learn how to build prediction queries against the association models that you created.</span></span> <span data-ttu-id="a680a-105">Cette leçon suppose que vous savez comment utiliser le Générateur de requêtes de prédiction et que vous souhaitez apprendre à générer des requêtes de prédiction sur des modèles d'association.</span><span class="sxs-lookup"><span data-stu-id="a680a-105">This lesson assumes that you are familiar with how to use the Prediction Query Builder and want to learn how to build prediction queries against association models.</span></span> <span data-ttu-id="a680a-106">Pour plus d’informations sur l’utilisation de la Générateur de requêtes de prédiction, consultez [interfaces de requête d’exploration de données](../../2014/analysis-services/data-mining/data-mining-query-tools.md).</span><span class="sxs-lookup"><span data-stu-id="a680a-106">For more information how to use Prediction Query Builder, see [Data Mining Query Interfaces](../../2014/analysis-services/data-mining/data-mining-query-tools.md).</span></span>  
  
## <a name="creating-a-singleton-prediction-query"></a><span data-ttu-id="a680a-107">Création d'une requête singleton de prédiction</span><span class="sxs-lookup"><span data-stu-id="a680a-107">Creating a Singleton Prediction Query</span></span>  
 <span data-ttu-id="a680a-108">Les requêtes de prédiction sur un modèle d'association peuvent être très utiles :</span><span class="sxs-lookup"><span data-stu-id="a680a-108">Prediction queries on an association model can be very useful:</span></span>  
  
-   <span data-ttu-id="a680a-109">pour recommander des éléments à un client, selon les achats antérieurs ou connexes ;</span><span class="sxs-lookup"><span data-stu-id="a680a-109">Recommend items to a customer, based on prior or related purchases</span></span>  
  
-   <span data-ttu-id="a680a-110">pour rechercher des événements associés ;</span><span class="sxs-lookup"><span data-stu-id="a680a-110">Find related events.</span></span>  
  
-   <span data-ttu-id="a680a-111">pour identifier des relations entre ou au sein de jeux de transactions.</span><span class="sxs-lookup"><span data-stu-id="a680a-111">Identify relationships in or across sets of transactions.</span></span>  
  
 <span data-ttu-id="a680a-112">Pour générer une requête de prédiction, vous sélectionnez d'abord le modèle d'association à utiliser, puis vous spécifiez les données d'entrée.</span><span class="sxs-lookup"><span data-stu-id="a680a-112">To build a prediction query, you first select the association model you want to use, and then you specify the input data.</span></span> <span data-ttu-id="a680a-113">Les entrées peuvent provenir d'une source de données externe, telle qu'une liste de valeurs, ou vous pouvez générer une requête singleton et fournir des valeurs au fur et à mesure.</span><span class="sxs-lookup"><span data-stu-id="a680a-113">Inputs can come from an external data source, such as a list of values, or you can build a singleton query and provide values as you go.</span></span>  
  
 <span data-ttu-id="a680a-114">Pour ce scénario, vous allez d'abord créer des requêtes singleton de prédiction, pour comprendre comment la prédiction fonctionne.</span><span class="sxs-lookup"><span data-stu-id="a680a-114">For this scenario, you will first create some singleton prediction queries, to get an idea of how prediction works.</span></span> <span data-ttu-id="a680a-115">Ensuite, vous allez créer une requête pour les prédictions par lot que vous pourriez utiliser pour faire des recommandations basées sur les achats actuels d'un client.</span><span class="sxs-lookup"><span data-stu-id="a680a-115">Then you will create a query for batch predictions that you could use for making recommendations based on a customer's current purchases.</span></span>  
  
#### <a name="to-create-a-prediction-query-on-an-association-model"></a><span data-ttu-id="a680a-116">Pour créer une requête de prédiction sur un modèle d'association</span><span class="sxs-lookup"><span data-stu-id="a680a-116">To create a prediction query on an association model</span></span>  
  
1.  <span data-ttu-id="a680a-117">Cliquez sur l’onglet **prédiction de modèle d’exploration** de données du concepteur d’exploration de données.</span><span class="sxs-lookup"><span data-stu-id="a680a-117">Click the **Mining Model Prediction** tab of Data Mining Designer.</span></span>  
  
2.  <span data-ttu-id="a680a-118">Dans le volet **modèle d’exploration de données** , cliquez sur Sélectionner un **modèle**.</span><span class="sxs-lookup"><span data-stu-id="a680a-118">In the **Mining Model** pane, click **Select Model**.</span></span> <span data-ttu-id="a680a-119">(Vous pouvez ignorer cette étape et l'étape suivante si le modèle correct est déjà sélectionné.)</span><span class="sxs-lookup"><span data-stu-id="a680a-119">(You can skip this step and the next step if the correct model is already selected.)</span></span>  
  
3.  <span data-ttu-id="a680a-120">Dans la boîte de dialogue **Sélectionner le modèle d’exploration de données** , développez le nœud qui représente l' **Association**de la structure d’exploration de données, puis sélectionnez l' **Association**de modèle.</span><span class="sxs-lookup"><span data-stu-id="a680a-120">In the **Select Mining Model** dialog box, expand the node that represents the mining structure **Association**, and select the model **Association**.</span></span> <span data-ttu-id="a680a-121">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="a680a-121">Click **OK**.</span></span>  
  
     <span data-ttu-id="a680a-122">Pour le moment, vous pouvez ignorer le volet d'entrée.</span><span class="sxs-lookup"><span data-stu-id="a680a-122">For now, you can ignore the input pane.</span></span>  
  
4.  <span data-ttu-id="a680a-123">Dans la grille, cliquez sur la cellule vide sous **source** , puis sélectionnez **fonction de prédiction.**</span><span class="sxs-lookup"><span data-stu-id="a680a-123">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="a680a-124">Dans la cellule sous **champ**, sélectionnez `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="a680a-124">In the cell under **Field**, select `PredictAssociation`.</span></span>  
  
     <span data-ttu-id="a680a-125">Vous pouvez également utiliser la fonction **Predict** pour prédire des associations.</span><span class="sxs-lookup"><span data-stu-id="a680a-125">You can also use the **Predict** function to predict associations.</span></span> <span data-ttu-id="a680a-126">Dans ce cas, veillez à choisir la version de la fonction **Predict** qui prend comme argument une colonne de table.</span><span class="sxs-lookup"><span data-stu-id="a680a-126">If you do, be sure to choose the version of the **Predict** function that takes a table column as argument.</span></span>  
  
5.  <span data-ttu-id="a680a-127">Dans le volet **modèle d’exploration de données** , sélectionnez la table imbriquée et faites-la `vAssocSeqLineItems` glisser dans la grille vers la zone **critères/argument** de la `PredictAssociation` fonction.</span><span class="sxs-lookup"><span data-stu-id="a680a-127">In the **Mining Model** pane, select the nested table `vAssocSeqLineItems`, and drag it into the grid, to the **Criteria/Argument** box for the `PredictAssociation` function.</span></span>  
  
     <span data-ttu-id="a680a-128">Le déplacement des noms de table et de colonne vous permet de générer des instructions complexes sans commettre d'erreur de syntaxe.</span><span class="sxs-lookup"><span data-stu-id="a680a-128">Dragging and dropping table and column names lets you build complex statements without syntax errors.</span></span> <span data-ttu-id="a680a-129">Toutefois, elle remplace le contenu actuel de la cellule, qui inclut d’autres arguments facultatifs pour la `PredictAssociation` fonction.</span><span class="sxs-lookup"><span data-stu-id="a680a-129">However, it replaces the current contents of the cell, which include other optional arguments for the `PredictAssociation` function.</span></span> <span data-ttu-id="a680a-130">Pour consulter les autres arguments, vous pouvez ajouter temporairement une deuxième instance de la fonction à la grille pour référence.</span><span class="sxs-lookup"><span data-stu-id="a680a-130">To view the other arguments, you can temporarily add a second instance of the function to the grid for reference.</span></span>  
  
6.  <span data-ttu-id="a680a-131">Cliquez sur la zone **critères/argument** et tapez le texte suivant après le nom de la table :`,3`</span><span class="sxs-lookup"><span data-stu-id="a680a-131">Click the **Criteria/Argument** box and type the following text after the table name: `,3`</span></span>  
  
     <span data-ttu-id="a680a-132">Le texte complet de la zone **critères/argument** doit être le suivant :</span><span class="sxs-lookup"><span data-stu-id="a680a-132">The complete text in the **Criteria/Argument** box should be as follows:</span></span>  
  
     `[Association].[v Assoc Seq Line Items],3`  
  
7.  <span data-ttu-id="a680a-133">Cliquez sur le bouton **résultats** dans le coin supérieur de la générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="a680a-133">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="a680a-134">Les résultats attendus contiennent une seule colonne avec l' **expression**d’en-tête.</span><span class="sxs-lookup"><span data-stu-id="a680a-134">The expected results contain a single column with the heading **Expression**.</span></span> <span data-ttu-id="a680a-135">La colonne **expression** contient une table imbriquée avec une seule colonne et les trois lignes suivantes.</span><span class="sxs-lookup"><span data-stu-id="a680a-135">The **Expression** column contains a nested table with a single column and the following three rows.</span></span> <span data-ttu-id="a680a-136">Étant donné que vous n'avez pas spécifié de valeur d'entrée, ces prédictions représentent les associations de produits les plus probables pour le modèle dans son ensemble.</span><span class="sxs-lookup"><span data-stu-id="a680a-136">Because you did not specify an input value, these predictions represent the most likely product associations for the model as a whole.</span></span>  
  
|<span data-ttu-id="a680a-137">Modèle</span><span class="sxs-lookup"><span data-stu-id="a680a-137">Model</span></span>|  
|-----------|  
|<span data-ttu-id="a680a-138">Women's Mountain Shorts</span><span class="sxs-lookup"><span data-stu-id="a680a-138">Women's Mountain Shorts</span></span>|  
|<span data-ttu-id="a680a-139">Water Bottle</span><span class="sxs-lookup"><span data-stu-id="a680a-139">Water Bottle</span></span>|  
|<span data-ttu-id="a680a-140">Touring-3000</span><span class="sxs-lookup"><span data-stu-id="a680a-140">Touring-3000</span></span>|  
  
 <span data-ttu-id="a680a-141">Ensuite, vous allez utiliser le volet **entrée de requête singleton** pour spécifier un produit comme entrée de la requête et afficher les produits les plus susceptibles d’être associés à cet élément.</span><span class="sxs-lookup"><span data-stu-id="a680a-141">Next, you will use the **Singleton Query Input** pane to specify a product as input to the query, and view the products that are most likely associated with that item.</span></span>  
  
#### <a name="to-create-a-singleton-prediction-query-with-nested-table-inputs"></a><span data-ttu-id="a680a-142">Pour créer une requête singleton de prédiction avec des entrées de table imbriquée</span><span class="sxs-lookup"><span data-stu-id="a680a-142">To create a singleton prediction query with nested table inputs</span></span>  
  
1.  <span data-ttu-id="a680a-143">Cliquez sur le bouton **conception** dans l’angle de la générateur de requêtes de prédiction pour revenir à la grille de création de la requête.</span><span class="sxs-lookup"><span data-stu-id="a680a-143">Click the **Design** button in the corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="a680a-144">Dans le menu **modèle d’exploration de données** , sélectionnez **requête singleton**.</span><span class="sxs-lookup"><span data-stu-id="a680a-144">On the **Mining Model** menu, select **Singleton Query**.</span></span>  
  
3.  <span data-ttu-id="a680a-145">Dans la boîte de dialogue **modèle d’exploration de données** , sélectionnez le modèle d' **Association** .</span><span class="sxs-lookup"><span data-stu-id="a680a-145">In the **Mining Model** dialog box, select the **Association** model.</span></span>  
  
4.  <span data-ttu-id="a680a-146">Dans la grille, cliquez sur la cellule vide sous **source** , puis sélectionnez **fonction de prédiction.**</span><span class="sxs-lookup"><span data-stu-id="a680a-146">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="a680a-147">Dans la cellule sous **champ**, sélectionnez `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="a680a-147">In the cell under **Field**, select `PredictAssociation`.</span></span>  
  
5.  <span data-ttu-id="a680a-148">Dans le volet **modèle d’exploration de données** , sélectionnez la table imbriquée et faites-la `vAssocSeqLineItems` glisser dans la grille vers la zone **critères/argument** de la `PredictAssociation` fonction.</span><span class="sxs-lookup"><span data-stu-id="a680a-148">In the **Mining Model** pane, select the nested table `vAssocSeqLineItems`, and drag it into the grid, to the **Criteria/Argument** box for the `PredictAssociation` function.</span></span> <span data-ttu-id="a680a-149">Tapez `,3` après le nom de la table imbriquée, comme dans la procédure précédente.</span><span class="sxs-lookup"><span data-stu-id="a680a-149">Type `,3` after the nested table name just as in the previous procedure.</span></span>  
  
6.  <span data-ttu-id="a680a-150">Dans la boîte de dialogue **entrée de requête singleton** , cliquez sur la zone de **valeur** en regard de **vAssocSeqLineItems SEQ Line Items**, puis cliquez sur le bouton **(...)** .</span><span class="sxs-lookup"><span data-stu-id="a680a-150">In the **Singleton Query Input** dialog box, click the **Value** box next to **vAssoc Seq Line Items**, and then click the **(...)** button.</span></span>  
  
7.  <span data-ttu-id="a680a-151">Dans la boîte de dialogue entrée de la **table imbriquée** , sélectionnez `Touring Tire` dans le volet **colonne clé** , puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="a680a-151">In the **Nested Table Input** dialog box, select `Touring Tire` in the **Key column** pane, and then click **Add**.</span></span>  
  
8.  <span data-ttu-id="a680a-152">Cliquez sur le bouton **résultats** .</span><span class="sxs-lookup"><span data-stu-id="a680a-152">Click the **Results** button.</span></span>  
  
 <span data-ttu-id="a680a-153">Les résultats affichent maintenant les prédictions pour les produits les plus probablement associés à Touring Tire.</span><span class="sxs-lookup"><span data-stu-id="a680a-153">The results now show the predictions for products that are most likely associated with the Touring Tire.</span></span>  
  
|<span data-ttu-id="a680a-154">Modèle</span><span class="sxs-lookup"><span data-stu-id="a680a-154">Model</span></span>|  
|-----------|  
|<span data-ttu-id="a680a-155">Touring Tire Tube (Pneu pour vélo de tourisme)</span><span class="sxs-lookup"><span data-stu-id="a680a-155">Touring Tire Tube</span></span>|  
|<span data-ttu-id="a680a-156">Sport-100</span><span class="sxs-lookup"><span data-stu-id="a680a-156">Sport-100</span></span>|  
|<span data-ttu-id="a680a-157">Water Bottle</span><span class="sxs-lookup"><span data-stu-id="a680a-157">Water Bottle</span></span>|  
  
 <span data-ttu-id="a680a-158">Toutefois, vous savez déjà de l'exploration du modèle que le produit Touring Tire Tube est souvent acheté avec le produit Touring Tire ; vous souhaitez plus savoir quels produits vous pouvez recommander aux clients qui achètent ces articles ensemble.</span><span class="sxs-lookup"><span data-stu-id="a680a-158">However, you already know from exploring the model that the Touring Tire Tube is frequently purchased with the Touring Tire; you are more interested in knowing what products you can recommend to customers who purchase these items together.</span></span> <span data-ttu-id="a680a-159">Vous allez modifier la requête afin qu'elle prédise les produits associés en fonction des deux articles contenus dans le panier.</span><span class="sxs-lookup"><span data-stu-id="a680a-159">You will change the query so that it predicts related products based on two items in the basket.</span></span> <span data-ttu-id="a680a-160">Vous allez également modifier la requête afin d'ajouter la probabilité de chaque produit prédit.</span><span class="sxs-lookup"><span data-stu-id="a680a-160">You will also modify the query to add the probability for each predicted product.</span></span>  
  
#### <a name="to-add-inputs-and-probabilities-to-the-singleton-prediction-query"></a><span data-ttu-id="a680a-161">Pour ajouter des entrées et des probabilités à la requête singleton de prédiction</span><span class="sxs-lookup"><span data-stu-id="a680a-161">To add inputs and probabilities to the singleton prediction query</span></span>  
  
1.  <span data-ttu-id="a680a-162">Cliquez sur le bouton **conception** dans l’angle de la générateur de requêtes de prédiction pour revenir à la grille de création de la requête.</span><span class="sxs-lookup"><span data-stu-id="a680a-162">Click the **Design** button in the corner of the Prediction Query Builder to switch back to the query building grid.</span></span>  
  
2.  <span data-ttu-id="a680a-163">Dans la boîte de dialogue **entrée de requête singleton** , cliquez sur la zone de **valeur** en regard de **vAssocSeqLineItems SEQ Line Items**, puis cliquez sur le bouton **(...)** .</span><span class="sxs-lookup"><span data-stu-id="a680a-163">In the **Singleton Query Input** dialog box, click the **Value** box next to **vAssoc Seq Line Items**, and then click the **(...)** button.</span></span>  
  
3.  <span data-ttu-id="a680a-164">Dans le volet **colonne clé** , sélectionnez `Touring Tire` , puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="a680a-164">In the **Key column** pane, select `Touring Tire`, and then click **Add**.</span></span>  
  
4.  <span data-ttu-id="a680a-165">Dans la grille, cliquez sur la cellule vide sous **source** , puis sélectionnez **fonction de prédiction.**</span><span class="sxs-lookup"><span data-stu-id="a680a-165">In the grid, click the empty cell under **Source** and select **Prediction Function.**</span></span> <span data-ttu-id="a680a-166">Dans la cellule sous **champ**, sélectionnez `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="a680a-166">In the cell under **Field**, select `PredictAssociation`.</span></span>  
  
5.  <span data-ttu-id="a680a-167">Dans le volet **modèle d’exploration de données** , sélectionnez la table imbriquée et faites-la `vAssocSeqLineItems` glisser dans la grille vers la zone **critères/argument** de la `PredictAssociation` fonction.</span><span class="sxs-lookup"><span data-stu-id="a680a-167">In the **Mining Model** pane, select the nested table `vAssocSeqLineItems`, and drag it into the grid, to the **Criteria/Argument** box for the `PredictAssociation` function.</span></span> <span data-ttu-id="a680a-168">Tapez `,3` après le nom de la table imbriquée, comme dans la procédure précédente.</span><span class="sxs-lookup"><span data-stu-id="a680a-168">Type `,3` after the nested table name just as in the previous procedure.</span></span>  
  
6.  <span data-ttu-id="a680a-169">Dans la boîte de dialogue entrée de la **table imbriquée** , sélectionnez `Touring Tire Tube` dans le volet **colonne clé** , puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="a680a-169">In the **Nested Table Input** dialog box, select `Touring Tire Tube` in the **Key column** pane, and then click **Add**.</span></span>  
  
7.  <span data-ttu-id="a680a-170">Dans la grille, dans la ligne de la `PredictAssociation` fonction, cliquez sur la zone **critères/argument** , puis modifiez les arguments pour ajouter l’argument, INCLUDE_STATISTICS.</span><span class="sxs-lookup"><span data-stu-id="a680a-170">In the grid, in the row for the `PredictAssociation` function, click the **Criteria/Argument** box, and change the arguments to add the argument, INCLUDE_STATISTICS.</span></span>  
  
     <span data-ttu-id="a680a-171">Le texte complet de la zone **critères/argument** doit être le suivant :</span><span class="sxs-lookup"><span data-stu-id="a680a-171">The complete text in the **Criteria/Argument** box should be as follows:</span></span>  
  
     `[Association].[v Assoc Seq Line Items], INCLUDE_STATISTICS, 3`  
  
8.  <span data-ttu-id="a680a-172">Cliquez sur le bouton **résultats** .</span><span class="sxs-lookup"><span data-stu-id="a680a-172">Click the **Results** button.</span></span>  
  
 <span data-ttu-id="a680a-173">Les résultats indiqués dans la table imbriquée se modifient à présent afin de présenter les prédictions, avec la prise en charge et la probabilité.</span><span class="sxs-lookup"><span data-stu-id="a680a-173">The results in the nested table now change to show the predictions, together with support and probability.</span></span> <span data-ttu-id="a680a-174">Pour plus d’informations sur la façon d’interpréter ces valeurs, consultez [Mining Model Content for Association models &#40;Analysis Services-data mining&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md).</span><span class="sxs-lookup"><span data-stu-id="a680a-174">For more information about how to interpret these values, see [Mining Model Content for Association Models &#40;Analysis Services - Data Mining&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md).</span></span>  
  
|<span data-ttu-id="a680a-175">Modèle</span><span class="sxs-lookup"><span data-stu-id="a680a-175">Model</span></span>|<span data-ttu-id="a680a-176">$SUPPORT</span><span class="sxs-lookup"><span data-stu-id="a680a-176">$SUPPORT</span></span>|<span data-ttu-id="a680a-177">$PROBABILITY</span><span class="sxs-lookup"><span data-stu-id="a680a-177">$PROBABILITY</span></span>|<span data-ttu-id="a680a-178">$ADJUSTEDPROBABILITY</span><span class="sxs-lookup"><span data-stu-id="a680a-178">$ADJUSTEDPROBABILITY</span></span>|  
|-----------|--------------|------------------|--------------------------|  
|<span data-ttu-id="a680a-179">Sport-100</span><span class="sxs-lookup"><span data-stu-id="a680a-179">Sport-100</span></span>|<span data-ttu-id="a680a-180">4334</span><span class="sxs-lookup"><span data-stu-id="a680a-180">4334</span></span>|<span data-ttu-id="a680a-181">0,291...</span><span class="sxs-lookup"><span data-stu-id="a680a-181">0.291...</span></span>|<span data-ttu-id="a680a-182">0,252...</span><span class="sxs-lookup"><span data-stu-id="a680a-182">0.252...</span></span>|  
|<span data-ttu-id="a680a-183">Water Bottle</span><span class="sxs-lookup"><span data-stu-id="a680a-183">Water Bottle</span></span>|<span data-ttu-id="a680a-184">2866</span><span class="sxs-lookup"><span data-stu-id="a680a-184">2866</span></span>|<span data-ttu-id="a680a-185">0,192...</span><span class="sxs-lookup"><span data-stu-id="a680a-185">0.192...</span></span>|<span data-ttu-id="a680a-186">0,175...</span><span class="sxs-lookup"><span data-stu-id="a680a-186">0.175...</span></span>|  
|<span data-ttu-id="a680a-187">Patch Kit</span><span class="sxs-lookup"><span data-stu-id="a680a-187">Patch Kit</span></span>|<span data-ttu-id="a680a-188">2113</span><span class="sxs-lookup"><span data-stu-id="a680a-188">2113</span></span>|<span data-ttu-id="a680a-189">0,142...</span><span class="sxs-lookup"><span data-stu-id="a680a-189">0.142...</span></span>|<span data-ttu-id="a680a-190">0,132</span><span class="sxs-lookup"><span data-stu-id="a680a-190">0.132</span></span>|  
  
## <a name="working-with-results"></a><span data-ttu-id="a680a-191">Utilisation des résultats</span><span class="sxs-lookup"><span data-stu-id="a680a-191">Working with Results</span></span>  
 <span data-ttu-id="a680a-192">En présence d'un grand nombre de tables imbriquées dans les résultats, vous pouvez aplatir les résultats pour faciliter leur affichage.</span><span class="sxs-lookup"><span data-stu-id="a680a-192">When there are many nested tables in the results, you might want to flatten the results for easier viewing.</span></span> <span data-ttu-id="a680a-193">Pour cela, vous pouvez modifier la requête manuellement et ajouter le mot clé `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="a680a-193">To do this, you can manually modify the query and add the `FLATTENED` keyword.</span></span>  
  
#### <a name="to-flatten-nested-rowsets-in-a-prediction-query"></a><span data-ttu-id="a680a-194">Pour aplatir des ensembles de lignes imbriqués dans une requête de prédiction</span><span class="sxs-lookup"><span data-stu-id="a680a-194">To flatten nested rowsets in a prediction query</span></span>  
  
1.  <span data-ttu-id="a680a-195">Cliquez sur le bouton **SQL** dans l’angle de la générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="a680a-195">Click the **SQL** button in the corner of the Prediction Query Builder.</span></span>  
  
     <span data-ttu-id="a680a-196">La grille se transforme en un volet ouvert où vous pouvez afficher et modifier l'instruction DMX créée par le Générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="a680a-196">The grid changes to an open pane where you can view and modify the DMX statement that was created by the Prediction Query Builder.</span></span>  
  
2.  <span data-ttu-id="a680a-197">Après le mot clé `SELECT`, tapez `FLATTENED`.</span><span class="sxs-lookup"><span data-stu-id="a680a-197">After the `SELECT` keyword, type `FLATTENED`.</span></span>  
  
     <span data-ttu-id="a680a-198">Le texte complet de la requête doit se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="a680a-198">The complete text of the query should be as follows:</span></span>  
  
    ```  
    SELECT FLATTENED  
      PredictAssociation([Association].[v Assoc Seq Line Items],INCLUDE_STATISTICS,3)  
    FROM  
      [Association]  
    NATURAL PREDICTION JOIN  
    (SELECT (SELECT 'Touring Tire' AS [Model]  
      UNION SELECT 'Touring Tire Tube' AS [Model]) AS [v Assoc Seq Line Items]) AS t  
    ```  
  
3.  <span data-ttu-id="a680a-199">Cliquez sur le bouton **résultats** dans le coin supérieur de la générateur de requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="a680a-199">Click the **Results** button in the upper corner of the Prediction Query Builder.</span></span>  
  
 <span data-ttu-id="a680a-200">Notez qu'après avoir modifié une requête manuellement, vous ne pouvez pas revenir en mode Conception sans perdre les modifications.</span><span class="sxs-lookup"><span data-stu-id="a680a-200">Note that after you have manually edited a query, you will not be able to switch back to Design view without losing the changes.</span></span> <span data-ttu-id="a680a-201">Si vous souhaitez enregistrer la requête, vous pouvez copier l'instruction DMX que vous avez créée manuellement dans un fichier texte.</span><span class="sxs-lookup"><span data-stu-id="a680a-201">If you wish to save the query, you can copy the DMX statement that you created manually to a text file.</span></span> <span data-ttu-id="a680a-202">Lorsque vous revenez en mode Conception, la requête est restaurée à la dernière version qui était valide en mode Conception.</span><span class="sxs-lookup"><span data-stu-id="a680a-202">When you change back to Design view, the query is reverted to the last version that was valid in Design view.</span></span>  
  
## <a name="creating-multiple-predictions"></a><span data-ttu-id="a680a-203">Création de plusieurs prédictions</span><span class="sxs-lookup"><span data-stu-id="a680a-203">Creating Multiple Predictions</span></span>  
 <span data-ttu-id="a680a-204">Supposons que vous souhaitez déterminer les meilleures prédictions pour des clients individuels, en fonction de leurs achats passés.</span><span class="sxs-lookup"><span data-stu-id="a680a-204">Suppose you want to know the best predictions for individual customers, based on past purchases.</span></span> <span data-ttu-id="a680a-205">Vous pouvez utiliser des données externes en tant qu'entrée de la requête de prédiction, notamment des tables contenant l'ID du client et ses achats les plus récents.</span><span class="sxs-lookup"><span data-stu-id="a680a-205">You can use external data as input to the prediction query, such as tables containing the customer ID and the most recent product purchases.</span></span> <span data-ttu-id="a680a-206">Les conditions requises impliquent que les tables de données soient déjà définies comme une vue de source de données Analysis Services. De plus, les données d'entrée doivent contenir des tables de cas et des tables imbriquées comme celles utilisées dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="a680a-206">The requirements are that the data tables be already defined as an Analysis Services data source view; moreover, the input data must contain case and nested tables like those used in the model.</span></span> <span data-ttu-id="a680a-207">Elles ne doivent pas porter les mêmes noms, mais la structure doit être similaire.</span><span class="sxs-lookup"><span data-stu-id="a680a-207">They need not have the same names, but the structure must be similar.</span></span> <span data-ttu-id="a680a-208">Dans le cadre de ce didacticiel, vous allez utiliser les tables d'origine sur lesquelles l'apprentissage du modèle a été effectué.</span><span class="sxs-lookup"><span data-stu-id="a680a-208">For the purpose of this tutorial, you will use the original tables on which the model was trained.</span></span>  
  
#### <a name="to-change-the-input-method-for-the-prediction-query"></a><span data-ttu-id="a680a-209">Pour modifier la méthode d'entrée pour la requête de prédiction</span><span class="sxs-lookup"><span data-stu-id="a680a-209">To change the input method for the prediction query</span></span>  
  
1.  <span data-ttu-id="a680a-210">Dans le menu **modèle d’exploration de données** , sélectionnez de nouveau **requête singleton** pour effacer la coche.</span><span class="sxs-lookup"><span data-stu-id="a680a-210">In the **Mining Model** menu, select **Singleton Query** again, to clear the check mark.</span></span>  
  
2.  <span data-ttu-id="a680a-211">Un message d'erreur apparaît et stipule que votre requête singleton sera perdue.</span><span class="sxs-lookup"><span data-stu-id="a680a-211">An error message appears warning that your singleton query will be lost.</span></span> <span data-ttu-id="a680a-212">Cliquez sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="a680a-212">Click **Yes**.</span></span>  
  
     <span data-ttu-id="a680a-213">Le nom de la boîte de dialogue d’entrée devient **Sélectionner une ou plusieurs tables d’entrée**.</span><span class="sxs-lookup"><span data-stu-id="a680a-213">The name of the input dialog box changes to **Select Input Table(s)**.</span></span>  
  
 <span data-ttu-id="a680a-214">Comme vous souhaitez créer une requête de prédiction qui fournit l'ID du client et une liste des produits comme entrée, vous ajouterez la table des clients comme table de cas, et la table des achats comme table imbriquée.</span><span class="sxs-lookup"><span data-stu-id="a680a-214">Because you are interested in creating a prediction query that provides Customer ID and a list of products as input, you will add the customer table as the case table, and the purchases table as the nested table.</span></span> <span data-ttu-id="a680a-215">Ensuite, vous ajouterez des fonctions de prédiction pour créer des recommandations.</span><span class="sxs-lookup"><span data-stu-id="a680a-215">Then you will add prediction functions to create recommendations.</span></span>  
  
#### <a name="to-create-a-prediction-query-using-nested-table-inputs"></a><span data-ttu-id="a680a-216">Pour créer une requête de prédiction à l'aide d'entrées de table imbriquée</span><span class="sxs-lookup"><span data-stu-id="a680a-216">To create a prediction query using nested table inputs</span></span>  
  
1.  <span data-ttu-id="a680a-217">Dans le volet Modèle d'exploration de données, sélectionnez le modèle Association avec filtre.</span><span class="sxs-lookup"><span data-stu-id="a680a-217">In the Mining Model pane, select the Association Filtered model.</span></span>  
  
2.  <span data-ttu-id="a680a-218">Dans la boîte de dialogue **Sélectionner une ou plusieurs tables d’entrée** , cliquez sur **Sélectionner la table de cas**.</span><span class="sxs-lookup"><span data-stu-id="a680a-218">In the **Select Input Table(s)** dialog box, click **Select Case Table**.</span></span>  
  
3.  <span data-ttu-id="a680a-219">Dans la boîte de dialogue **Sélectionner une table** , pour **source de données**, sélectionnez AdventureWorksDW2008.</span><span class="sxs-lookup"><span data-stu-id="a680a-219">In the **Select Table** dialog box, for **Data Source**, select AdventureWorksDW2008.</span></span> <span data-ttu-id="a680a-220">Dans la liste nom de la **table/vue** , sélectionnez vAssocSeqOrders, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="a680a-220">In the **Table/View Name** list, select vAssocSeqOrders, and then click **OK**.</span></span>  
  
     <span data-ttu-id="a680a-221">La table vAssocSeqOrders s'ajoute au volet.</span><span class="sxs-lookup"><span data-stu-id="a680a-221">The table vAssocSeqOrders is added to the pane.</span></span>  
  
4.  <span data-ttu-id="a680a-222">Dans la boîte de dialogue **Sélectionner une ou plusieurs tables d’entrée** , cliquez sur **Sélectionner la table imbriquée**.</span><span class="sxs-lookup"><span data-stu-id="a680a-222">In the **Select Input Table(s)** dialog box, click **Select Nested Table**.</span></span>  
  
5.  <span data-ttu-id="a680a-223">Dans la boîte de dialogue **Sélectionner une table** , pour **source de données**, sélectionnez AdventureWorksDW2008.</span><span class="sxs-lookup"><span data-stu-id="a680a-223">In the **Select Table** dialog box, for **Data Source**, select AdventureWorksDW2008.</span></span> <span data-ttu-id="a680a-224">Dans la liste nom de la **table/vue** , sélectionnez vAssocSeqLineItems, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="a680a-224">In the **Table/View name** list, select vAssocSeqLineItems, and then click **OK**.</span></span>  
  
     <span data-ttu-id="a680a-225">La table vAssocSeqLineItems s'ajoute au volet.</span><span class="sxs-lookup"><span data-stu-id="a680a-225">The table vAssocSeqLineItems is added to the pane.</span></span>  
  
6.  <span data-ttu-id="a680a-226">Dans la boîte de dialogue **spécifier la jointure imbriquée** , faites glisser le champ OrderNumber de la table de cas et déposez-le dans le champ OrderNumber de la table imbriquée.</span><span class="sxs-lookup"><span data-stu-id="a680a-226">In the **Specify Nested Join** dialog box, drag the OrderNumber field from the case table and drop it onto the OrderNumber field in the nested table.</span></span>  
  
     <span data-ttu-id="a680a-227">Vous pouvez également cliquer sur **Ajouter une relation** et créer la relation en sélectionnant des colonnes dans une liste.</span><span class="sxs-lookup"><span data-stu-id="a680a-227">You can also click **Add Relationship** and create the relationship by selecting columns from a list.</span></span>  
  
7.  <span data-ttu-id="a680a-228">Dans la boîte de dialogue **spécifier la relation** , vérifiez que les champs OrderNumber sont mappés correctement, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="a680a-228">In the **Specify Relationship** dialog box, verify that the OrderNumber fields are mapped correctly, and then click **OK**.</span></span>  
  
8.  <span data-ttu-id="a680a-229">Cliquez sur **OK** pour fermer la boîte de dialogue **spécifier la jointure imbriquée** .</span><span class="sxs-lookup"><span data-stu-id="a680a-229">Click **OK** to close the **Specify Nested Join** dialog box.</span></span>  
  
     <span data-ttu-id="a680a-230">Les tables de cas et imbriquées sont mises à jour dans le volet de conception pour montrer les jointures qui relient les colonnes de données externes aux colonnes du modèle.</span><span class="sxs-lookup"><span data-stu-id="a680a-230">The case and nested tables are updated in the design pane to show the joins connecting the external data columns to the columns in the model.</span></span> <span data-ttu-id="a680a-231">Si les relations sont incorrectes, vous pouvez cliquer avec le bouton droit sur la ligne de jointure et sélectionner **modifier les connexions** pour modifier le mappage de colonne, ou vous pouvez cliquer avec le bouton droit sur la ligne de jointure et sélectionner **supprimer** pour supprimer complètement la relation.</span><span class="sxs-lookup"><span data-stu-id="a680a-231">If the relationships are wrong, you can right-click the join line and select **Modify Connections** to edit the column mapping, or you can right-click the join line and select **Delete** to remove the relationship completely.</span></span>  
  
9. <span data-ttu-id="a680a-232">Ajoutez une nouvelle ligne à la grille.</span><span class="sxs-lookup"><span data-stu-id="a680a-232">Add a new row to the grid.</span></span> <span data-ttu-id="a680a-233">Pour **source**, sélectionnez la **table vAssocSeqOrders**.</span><span class="sxs-lookup"><span data-stu-id="a680a-233">For **Source**, select **vAssocSeqOrders table**.</span></span> <span data-ttu-id="a680a-234">Pour **champ**, sélectionnez CustomerKey.</span><span class="sxs-lookup"><span data-stu-id="a680a-234">For **Field**, select CustomerKey.</span></span>  
  
10. <span data-ttu-id="a680a-235">Ajoutez une nouvelle ligne à la grille.</span><span class="sxs-lookup"><span data-stu-id="a680a-235">Add a new row to the grid.</span></span> <span data-ttu-id="a680a-236">Pour **source**, sélectionnez la **table vAssocSeqOrders**.</span><span class="sxs-lookup"><span data-stu-id="a680a-236">For **Source**, select **vAssocSeqOrders table**.</span></span> <span data-ttu-id="a680a-237">Pour **champ**, sélectionnez région.</span><span class="sxs-lookup"><span data-stu-id="a680a-237">For **Field**, select Region.</span></span>  
  
11. <span data-ttu-id="a680a-238">Ajoutez une nouvelle ligne à la grille.</span><span class="sxs-lookup"><span data-stu-id="a680a-238">Add a new row to the grid.</span></span> <span data-ttu-id="a680a-239">Pour **source**, sélectionnez **fonction de prédiction**, et pour **champ**, sélectionnez `PredictAssociation` .</span><span class="sxs-lookup"><span data-stu-id="a680a-239">For **Source**, select **Prediction Function**, and for **Field**, select `PredictAssociation`.</span></span>  
  
12. <span data-ttu-id="a680a-240">Faites glisser vAssocSeqLineItems vers la zone **critères/argument** de la `PredictAssociation` ligne.</span><span class="sxs-lookup"><span data-stu-id="a680a-240">Drag vAssocSeqLineItems, into the **Criteria/Argument** box of the `PredictAssociation` row.</span></span> <span data-ttu-id="a680a-241">Cliquez à la fin de la zone **critères/argument** , puis tapez le texte suivant :`INCLUDE_STATISTICS,3`</span><span class="sxs-lookup"><span data-stu-id="a680a-241">Click at the end of the **Criteria/Argument** box and then type the following text: `INCLUDE_STATISTICS,3`</span></span>  
  
     <span data-ttu-id="a680a-242">Le texte complet de la zone **critères/argument** doit être :`[Association].[v Assoc Seq Line Items], INCLUDE_STATISTICS, 3`</span><span class="sxs-lookup"><span data-stu-id="a680a-242">The complete text in the **Criteria/Argument** box should be: `[Association].[v Assoc Seq Line Items], INCLUDE_STATISTICS, 3`</span></span>  
  
13. <span data-ttu-id="a680a-243">Cliquez sur le bouton **résultat** pour afficher les prédictions pour chaque client.</span><span class="sxs-lookup"><span data-stu-id="a680a-243">Click the **Result** button to view the predictions for each customer.</span></span>  
  
 <span data-ttu-id="a680a-244">Vous pouvez essayer de créer une requête de prédiction similaire sur les multiples modèles, pour déterminer si le filtrage modifie les résultats de la prédiction.</span><span class="sxs-lookup"><span data-stu-id="a680a-244">You might try creating a similar prediction query on the multiple models, to see whether filtering changes the prediction results.</span></span> <span data-ttu-id="a680a-245">Pour plus d’informations sur la création de prédictions et d’autres types de requêtes, consultez Exemples de requêtes de [modèle d’association](../../2014/analysis-services/data-mining/association-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="a680a-245">For more information about creating predictions and other types of queries, see [Association Model Query Examples](../../2014/analysis-services/data-mining/association-model-query-examples.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a680a-246">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a680a-246">See Also</span></span>  
 <span data-ttu-id="a680a-247">[Contenu du modèle d’exploration de données pour les modèles d’association &#40;Analysis Services d’exploration de données&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="a680a-247">[Mining Model Content for Association Models &#40;Analysis Services - Data Mining&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md) </span></span>  
 <span data-ttu-id="a680a-248">[PredictAssociation&#41;DMX &#40;](/sql/dmx/predictassociation-dmx) </span><span class="sxs-lookup"><span data-stu-id="a680a-248">[PredictAssociation &#40;DMX&#41;](/sql/dmx/predictassociation-dmx) </span></span>  
 [<span data-ttu-id="a680a-249">Créer une requête de prédiction à l’aide du Générateur de requêtes de prédiction</span><span class="sxs-lookup"><span data-stu-id="a680a-249">Create a Prediction Query Using the Prediction Query Builder</span></span>](../../2014/analysis-services/data-mining/create-a-prediction-query-using-the-prediction-query-builder.md)  
  
  
