---
title: Gestion et architecture du journal des transactions SQL Server 2014 | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
ms.assetid: 4d1a4f97-3fe4-44af-9d4f-f884a6eaa457
author: rothja
ms.author: jroth
ms.openlocfilehash: 8d32950d94bff22d6549c468e8fe8db3f30fd09a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87601804"
---
# <a name="sql-server-2014-transaction-log-architecture-and-management"></a><span data-ttu-id="c0cdc-102">Gestion et architecture du journal des transactions SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="c0cdc-102">SQL Server 2014 Transaction Log Architecture and Management</span></span>

<span data-ttu-id="c0cdc-103">**S’applique à :** SQL Server (à partir de 2008)</span><span class="sxs-lookup"><span data-stu-id="c0cdc-103">**Applies to:** SQL Server (starting with 2008)</span></span>

  <span data-ttu-id="c0cdc-104">Chaque base de données [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] possède un journal des transactions qui enregistre toutes les transactions et les modifications apportées par chacune d'entre elles.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-104">Every [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database has a transaction log that records all transactions and the database modifications that are made by each transaction.</span></span> <span data-ttu-id="c0cdc-105">Le journal des transactions est un composant essentiel de la base de données et, en cas de défaillance du système, vous pouvez en avoir besoin pour rétablir la cohérence de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-105">The transaction log is a critical component of the database and, if there is a system failure, the transaction log might be required to bring your database back to a consistent state.</span></span> <span data-ttu-id="c0cdc-106">Ce guide contient des informations sur l'architecture physique et logique du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-106">This guide provides information about the physical and logical architecture of the transaction log.</span></span> <span data-ttu-id="c0cdc-107">Ces informations pourront vous aider à gérer plus efficacement les journaux des transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-107">Understanding the architecture can improve your effectiveness in managing transaction logs.</span></span>  

  
##  <a name="transaction-log-logical-architecture"></a><a name="Logical_Arch"></a> <span data-ttu-id="c0cdc-108">Architecture logique du journal des transactions</span><span class="sxs-lookup"><span data-stu-id="c0cdc-108">Transaction Log Logical Architecture</span></span>  

 <span data-ttu-id="c0cdc-109">Le journal des transactions de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] fonctionne de façon logique comme s'il s'agissait d'une chaîne d'enregistrements de journal.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-109">The [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] transaction log operates logically as if the transaction log is a string of log records.</span></span> <span data-ttu-id="c0cdc-110">Chacun de ces enregistrements est identifié par un numéro séquentiel dans le journal (LSN).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-110">Each log record is identified by a log sequence number (LSN).</span></span> <span data-ttu-id="c0cdc-111">Chaque nouvel enregistrement est écrit à la fin logique du journal avec un LSN supérieur à celui de l'enregistrement qui le précède.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-111">Each new log record is written to the logical end of the log with an LSN that is higher than the LSN of the record before it.</span></span> <span data-ttu-id="c0cdc-112">Lors de leur création, les enregistrements de journal sont stockés séquentiellement.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-112">Log records are stored in a serial sequence as they are created.</span></span> <span data-ttu-id="c0cdc-113">Chacun d'eux contient l'ID de la transaction à laquelle il appartient.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-113">Each log record contains the ID of the transaction that it belongs to.</span></span> <span data-ttu-id="c0cdc-114">Pour chaque transaction, tous les enregistrements de journal associés sont reliés de façon individuelle dans une chaîne grâce aux pointeurs arrière qui accélèrent la restauration de la transaction.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-114">For each transaction, all log records associated with the transaction are individually linked in a chain using backward pointers that speed the rollback of the transaction.</span></span>  
  
 <span data-ttu-id="c0cdc-115">Les enregistrements de journal relatifs aux modifications de données consignent soit l'opération logique effectuée, soit les images avant/après des données modifiées.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-115">Log records for data modifications record either the logical operation performed or they record the before and after images of the modified data.</span></span> <span data-ttu-id="c0cdc-116">L'image avant est une copie des données avant que l'opération n'ait été effectuée, tandis que l'image après est une copie des données après que l'opération a été effectuée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-116">The before image is a copy of the data before the operation is performed; the after image is a copy of the data after the operation has been performed.</span></span>  
  
 <span data-ttu-id="c0cdc-117">Les étapes pour récupérer une opération dépendent du type de journal d'enregistrement :</span><span class="sxs-lookup"><span data-stu-id="c0cdc-117">The steps to recover an operation depend on the type of log record:</span></span>  
  
-   <span data-ttu-id="c0cdc-118">Opération logique enregistrée</span><span class="sxs-lookup"><span data-stu-id="c0cdc-118">Logical operation logged</span></span>  
  
    -   <span data-ttu-id="c0cdc-119">Si vous repositionnez l'opération logique avant, elle est effectuée à nouveau.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-119">To roll the logical operation forward, the operation is performed again.</span></span>  
  
    -   <span data-ttu-id="c0cdc-120">Si vous annulez l'opération logique, l'opération inverse est effectuée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-120">To roll the logical operation back, the reverse logical operation is performed.</span></span>  
  
-   <span data-ttu-id="c0cdc-121">Image avant et après enregistrées</span><span class="sxs-lookup"><span data-stu-id="c0cdc-121">Before and after image logged</span></span>  
  
    -   <span data-ttu-id="c0cdc-122">Si vous repositionnez l'opération avant, l'image après est appliquée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-122">To roll the operation forward, the after image is applied.</span></span>  
  
    -   <span data-ttu-id="c0cdc-123">Si vous annulez l'opération, l'image avant est appliquée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-123">To roll the operation back, the before image is applied.</span></span>  
  
 <span data-ttu-id="c0cdc-124">De nombreux types d'opérations sont enregistrés dans le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-124">Many types of operations are recorded in the transaction log.</span></span> <span data-ttu-id="c0cdc-125">Ces opérations comprennent :</span><span class="sxs-lookup"><span data-stu-id="c0cdc-125">These operations include:</span></span>  
  
-   <span data-ttu-id="c0cdc-126">Le début et la fin de chaque transaction.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-126">The start and end of each transaction.</span></span>  
  
-   <span data-ttu-id="c0cdc-127">Chaque modification de données (insertion, mise à jour ou suppression).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-127">Every data modification (insert, update, or delete).</span></span> <span data-ttu-id="c0cdc-128">Il s'agit des modifications apportées aux tables, y compris les tables système, par les procédures stockées système ou les instructions DDL (Data Definition Language).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-128">This includes changes by system stored procedures or data definition language (DDL) statements to any table, including system tables.</span></span>  
  
-   <span data-ttu-id="c0cdc-129">Chaque allocation ou désallocation de page et d'étendue.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-129">Every extent and page allocation or deallocation.</span></span>  
  
-   <span data-ttu-id="c0cdc-130">Création ou suppression d'une table ou d'un index.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-130">Creating or dropping a table or index.</span></span>  
  
 <span data-ttu-id="c0cdc-131">Les opérations de restauration sont également consignées dans le journal.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-131">Rollback operations are also logged.</span></span> <span data-ttu-id="c0cdc-132">Chaque transaction réserve de l'espace dans le journal des transactions afin qu'il existe suffisamment d'espace journal pour prendre en charge une restauration déclenchée par une instruction de restauration explicite ou par la détection d'une erreur.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-132">Each transaction reserves space on the transaction log to make sure that enough log space exists to support a rollback that is caused by either an explicit rollback statement or if an error is encountered.</span></span> <span data-ttu-id="c0cdc-133">Le volume d'espace réservé dépend des opérations effectuées dans la transaction, mais il est généralement égal au volume d'espace utilisé pour la journalisation de chaque opération.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-133">The amount of space reserved depends on the operations performed in the transaction, but generally it is equal to the amount of space used to log each operation.</span></span> <span data-ttu-id="c0cdc-134">Cet espace réservé est libéré lorsque la transaction est terminée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-134">This reserved space is freed when the transaction is completed.</span></span>  
  
 <span data-ttu-id="c0cdc-135"> La section du fichier journal comprise entre le premier enregistrement de journal nécessaire à une restauration portant sur l’ensemble de la base de données et la fin du journal représente la partie active du journal, également appelée le *journal actif*.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-135">The section of the log file from the first log record that must be present for a successful database-wide rollback to the last-written log record is called the active part of the log, or the *active log*.</span></span> <span data-ttu-id="c0cdc-136">Cette section est indispensable pour procéder à une récupération complète de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-136">This is the section of the log required to a full recovery of the database.</span></span> <span data-ttu-id="c0cdc-137">Aucune partie de ce journal actif ne peut être tronquée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-137">No part of the active log can ever be truncated.</span></span> <span data-ttu-id="c0cdc-138">Le numéro séquentiel dans le journal (LSN) de ce premier enregistrement est appelé LSN de récupération minimale (*MinLSN*).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-138">The log sequence number (LSN) of this first log record is known as the minimum recovery LSN (*MinLSN*).</span></span>  
  
##  <a name="transaction-log-physical-architecture"></a><a name="physical_arch"></a> <span data-ttu-id="c0cdc-139">Architecture physique du journal des transactions</span><span class="sxs-lookup"><span data-stu-id="c0cdc-139">Transaction Log Physical Architecture</span></span>  

 <span data-ttu-id="c0cdc-140">Le journal des transactions d'une base de données s'étend sur un ou plusieurs fichiers physiques.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-140">The transaction log in a database maps over one or more physical files.</span></span> <span data-ttu-id="c0cdc-141">D'un point de vue conceptuel, le fichier journal est une chaîne d'enregistrements.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-141">Conceptually, the log file is a string of log records.</span></span> <span data-ttu-id="c0cdc-142">D'un point de vue physique, la séquence des enregistrements du journal est stockée de façon efficace dans l'ensemble de fichiers physiques qui implémente le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-142">Physically, the sequence of log records is stored efficiently in the set of physical files that implement the transaction log.</span></span> <span data-ttu-id="c0cdc-143">Chaque base de données doit posséder au moins un fichier journal.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-143">There must be at least one log file for each database.</span></span>  
  
 <span data-ttu-id="c0cdc-144">Le [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] divise chaque fichier journal physique en un certain nombre de fichiers journaux virtuels.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-144">The [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] divides each physical log file internally into a number of virtual log files.</span></span> <span data-ttu-id="c0cdc-145">La taille et le nombre de ces fichiers journaux virtuels sont variables.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-145">Virtual log files have no fixed size, and there is no fixed number of virtual log files for a physical log file.</span></span> <span data-ttu-id="c0cdc-146">Le [!INCLUDE[ssDE](../includes/ssde-md.md)] choisit dynamiquement la taille des fichiers journaux virtuels en créant ou en étendant des fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-146">The [!INCLUDE[ssDE](../includes/ssde-md.md)] chooses the size of the virtual log files dynamically while it is creating or extending log files.</span></span> <span data-ttu-id="c0cdc-147">Le [!INCLUDE[ssDE](../includes/ssde-md.md)] essaie de ne conserver qu’un petit nombre de fichiers virtuels.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-147">The [!INCLUDE[ssDE](../includes/ssde-md.md)] tries to maintain a small number of virtual files.</span></span> <span data-ttu-id="c0cdc-148">Après une extension du fichier journal, la taille des fichiers virtuels est la somme de la taille du journal existant et de la taille du nouvel incrément de fichier.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-148">The size of the virtual files after a log file has been extended is the sum of the size of the existing log and the size of the new file increment.</span></span> <span data-ttu-id="c0cdc-149">La taille et le nombre des fichiers journaux virtuels ne peuvent être ni configurés, ni définis par les administrateurs.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-149">The size or number of virtual log files cannot be configured or set by administrators.</span></span>  
  
 <span data-ttu-id="c0cdc-150">Le seul moment où les fichiers journaux virtuels ont une incidence sur les performances du système est lorsque les valeurs *size* et *growth_increment* des fichiers journaux physiques sont faibles.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-150">The only time virtual log files affect system performance is if the physical log files are defined by small *size* and *growth_increment* values.</span></span> <span data-ttu-id="c0cdc-151">La valeur *size* correspond à la taille initiale du fichier journal et la valeur *growth_increment* correspond à la quantité d’espace ajoutée au fichier chaque fois qu’un espace supplémentaire s’avère nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-151">The *size* value is the initial size for the log file and the *growth_increment* value is the amount of space added to the file every time new space is required.</span></span> <span data-ttu-id="c0cdc-152">Si la taille des fichiers journaux s'accroît par de petits incréments, de nombreux fichiers journaux virtuels vont être créés,</span><span class="sxs-lookup"><span data-stu-id="c0cdc-152">If the log files grow to a large size because of many small increments, they will have many virtual log files.</span></span> <span data-ttu-id="c0cdc-153">ce qui peut ralentir le démarrage de la base de données ainsi que les opérations de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-153">This can slow down database startup and also log backup and restore operations.</span></span> <span data-ttu-id="c0cdc-154">Il est conseillé d’affecter aux fichiers journaux une valeur *size* proche de la taille finale souhaitée et une valeur *growth_increment* relativement importante.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-154">We recommend that you assign log files a *size* value close to the final size required, and also have a relatively large *growth_increment* value.</span></span> <span data-ttu-id="c0cdc-155">Pour plus d’informations sur ces paramètres, consultez [Options de fichiers et de groupes de fichiers ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-155">For more information about these parameters, see [ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span></span>  
  
 <span data-ttu-id="c0cdc-156">Le journal des transactions est un fichier cumulatif.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-156">The transaction log is a wrap-around file.</span></span> <span data-ttu-id="c0cdc-157">Considérons, par exemple, une base de données possédant un fichier journal physique divisé en quatre fichiers journaux virtuels.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-157">For example, consider a database with one physical log file divided into four virtual log files.</span></span> <span data-ttu-id="c0cdc-158">Lors de la création de la base de données, le fichier journal logique commence au début du fichier journal physique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-158">When the database is created, the logical log file begins at the start of the physical log file.</span></span> <span data-ttu-id="c0cdc-159">Les nouveaux enregistrements du journal sont ajoutés à la fin du journal logique, qui s'étend vers la fin du journal physique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-159">New log records are added at the end of the logical log and expand toward the end of the physical log.</span></span> <span data-ttu-id="c0cdc-160">Le fait de tronquer le journal permet de libérer tous les journaux virtuels dont les enregistrements précèdent tous le MinLSN (numéro séquentiel dans le journal minimum).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-160">Log truncation frees any virtual logs whose records all appear in front of the minimum recovery log sequence number (MinLSN).</span></span> <span data-ttu-id="c0cdc-161">Le *MinLSN* est le numéro séquentiel dans le journal du plus ancien enregistrement du journal requis pour une opération de restauration réussie de l’ensemble de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-161">The *MinLSN* is the log sequence number of the oldest log record that is required for a successful database-wide rollback.</span></span> <span data-ttu-id="c0cdc-162">Le journal des transactions de la base de données exemple ressemblerait à celui de l'illustration suivante :</span><span class="sxs-lookup"><span data-stu-id="c0cdc-162">The transaction log in the example database would look similar to the one in the following illustration.</span></span>  
  
 <span data-ttu-id="c0cdc-163">![Fichier journal divisé en quatre fichiers journaux virtuels](media/tranlog3.gif "Fichier journal divisé en quatre fichiers journaux virtuels")</span><span class="sxs-lookup"><span data-stu-id="c0cdc-163">![Log file divided into four virtual log files](media/tranlog3.gif "Log file divided into four virtual log files")</span></span>  
  
 <span data-ttu-id="c0cdc-164">Lorsque la fin du journal logique atteint la fin du fichier journal physique, le nouvel enregistrement du journal revient au début du fichier journal physique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-164">When the end of the logical log reaches the end of the physical log file, the new log records wrap around to the start of the physical log file.</span></span>  
  
 <span data-ttu-id="c0cdc-165">![Inclusion d'enregistrements de journal vers le début du fichier journal](media/tranlog4.gif "Inclusion d'enregistrements de journal vers le début du fichier journal")</span><span class="sxs-lookup"><span data-stu-id="c0cdc-165">![Log records wrap around to start of log file](media/tranlog4.gif "Log records wrap around to start of log file")</span></span>  
  
 <span data-ttu-id="c0cdc-166">Le cycle se répète indéfiniment tant que la fin du journal logique n'a pas atteint le début du journal logique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-166">This cycle repeats endlessly, as long as the end of the logical log never reaches the beginning of the logical log.</span></span> <span data-ttu-id="c0cdc-167">Si les anciens enregistrements du journal sont tronqués suffisamment souvent pour laisser de la place à tous les nouveaux enregistrements créées jusqu'au point de contrôle suivant, le journal ne se remplit jamais.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-167">If the old log records are truncated frequently enough to always leave sufficient room for all the new log records created through the next checkpoint, the log never fills.</span></span> <span data-ttu-id="c0cdc-168">Si la fin du journal logique atteint le début du journal logique, l'une ou l'autre des situations suivantes se produit :</span><span class="sxs-lookup"><span data-stu-id="c0cdc-168">However, if the end of the logical log does reach the start of the logical log, one of two things occurs:</span></span>  
  
-   <span data-ttu-id="c0cdc-169">Si le paramètre FILEGROWTH est activé pour le journal et que l’espace disque est suffisant, le fichier s’étend en fonction de la taille spécifiée dans le paramètre *growth_increment*, les nouveaux enregistrements du journal étant ajoutés à l’extension.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-169">If the FILEGROWTH setting is enabled for the log and space is available on the disk, the file is extended by the amount specified in the *growth_increment* parameter and the new log records are added to the extension.</span></span> <span data-ttu-id="c0cdc-170">Pour plus d’informations sur le paramètre FILEGROWTH, consultez [Options de fichiers et de groupes de fichiers ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-170">For more information about the FILEGROWTH setting, see [ALTER DATABASE File and Filegroup Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-file-and-filegroup-options).</span></span>  
  
-   <span data-ttu-id="c0cdc-171">Si le paramètre FILEGROWTH n’est pas activé ou si l’espace disque réservé au fichier journal est inférieur à la taille spécifiée dans le paramètre *growth_increment*, l’erreur 9002 est générée.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-171">If the FILEGROWTH setting is not enabled, or the disk that is holding the log file has less free space than the amount specified in *growth_increment*, an 9002 error is generated.</span></span>  
  
 <span data-ttu-id="c0cdc-172">Si le journal contient plusieurs fichiers journaux physiques, le journal logique va se déplacer dans tous les fichiers journaux physiques avant de revenir au début du premier fichier journal physique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-172">If the log contains multiple physical log files, the logical log will move through all the physical log files before it wraps back to the start of the first physical log file.</span></span>  
  
### <a name="log-truncation"></a><span data-ttu-id="c0cdc-173">Troncation de journal</span><span class="sxs-lookup"><span data-stu-id="c0cdc-173">Log Truncation</span></span>  

 <span data-ttu-id="c0cdc-174">La troncation du journal est essentielle pour empêcher que le journal se remplisse.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-174">Log truncation is essential to keep the log from filling.</span></span> <span data-ttu-id="c0cdc-175">La troncation du journal supprime les fichiers journaux virtuels inactifs du journal des transactions logique d'une base de données [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] , ce qui libère de l'espace dans le journal logique de façon à ce qu'il soit réutilisé par le journal des transactions physique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-175">Log truncation deletes inactive virtual log files from the logical transaction log of a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database, freeing space in the logical log for reuse by the physical transaction log.</span></span> <span data-ttu-id="c0cdc-176">Si un journal des transactions n'était jamais tronqué, il finirait par occuper tout l'espace disque alloué à ses fichiers journaux physiques.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-176">If a transaction log were never truncated, it would eventually fill all the disk space that is allocated to its physical log files.</span></span> <span data-ttu-id="c0cdc-177">Toutefois, une opération de point de contrôle est requise avant que le journal des transactions puisse être tronqué.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-177">However, before the log can be truncated, a checkpoint operation must occur.</span></span> <span data-ttu-id="c0cdc-178">Un point de contrôle écrit les pages modifiées en mémoire actuelles (appelées pages de modifications) et les informations du journal des transactions de la mémoire vers le disque.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-178">A checkpoint writes the current in-memory modified pages (known as dirty pages) and transaction log information from memory to disk.</span></span> <span data-ttu-id="c0cdc-179">Lorsque le point de contrôle est créé, la partie inactive du journal des transactions est marquée comme réutilisable.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-179">When the checkpoint is performed, the inactive portion of the transaction log is marked as reusable.</span></span> <span data-ttu-id="c0cdc-180">Après cela, elle peut être libérée par troncation du journal.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-180">Thereafter, the inactive portion can be freed by log truncation.</span></span> <span data-ttu-id="c0cdc-181">Pour plus d’informations sur les points de contrôle, consultez [Points de contrôle de base de données &#40;SQL Server&#41;](../relational-databases/logs/database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-181">For more information about checkpoints, see [Database Checkpoints &#40;SQL Server&#41;](../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>  
  
 <span data-ttu-id="c0cdc-182">Les illustrations suivantes montrent un journal des transactions avant et après une troncation.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-182">The following illustrations show a transaction log before and after truncation.</span></span> <span data-ttu-id="c0cdc-183">La première illustration montre un journal des transactions qui n'a jamais été tronqué.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-183">The first illustration shows a transaction log that has never been truncated.</span></span> <span data-ttu-id="c0cdc-184">Actuellement, quatre fichiers journaux virtuels sont utilisés par le journal logique.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-184">Currently, four virtual log files are in use by the logical log.</span></span> <span data-ttu-id="c0cdc-185">Le journal logique commence avant le premier fichier journal virtuel et se termine au journal virtuel 4.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-185">The logical log starts at the front of the first virtual log file and ends at virtual log 4.</span></span> <span data-ttu-id="c0cdc-186">L'enregistrement NSEmin se trouve dans le journal virtuel 3.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-186">The MinLSN record is in virtual log 3.</span></span> <span data-ttu-id="c0cdc-187">Les journaux virtuels 1 et 2 contiennent uniquement des enregistrements de journal inactifs.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-187">Virtual log 1 and virtual log 2 contain only inactive log records.</span></span> <span data-ttu-id="c0cdc-188">Ces enregistrements peuvent être tronqués.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-188">These records can be truncated.</span></span> <span data-ttu-id="c0cdc-189">Le journal virtuel 5 est encore inutilisé et ne fait pas partie du journal logique actuel.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-189">Virtual log 5 is still unused and is not part of the current logical log.</span></span>  
  
 <span data-ttu-id="c0cdc-190">![Journal des transactions avec quatre journaux virtuels](media/tranlog2.gif "Journal des transactions avec quatre journaux virtuels")</span><span class="sxs-lookup"><span data-stu-id="c0cdc-190">![Transaction log with four virtual logs](media/tranlog2.gif "Transaction log with four virtual logs")</span></span>  
  
 <span data-ttu-id="c0cdc-191">La deuxième illustration montre le journal après sa troncation.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-191">The second illustration shows how the log appears after being truncated.</span></span> <span data-ttu-id="c0cdc-192">Les journaux virtuels 1 et 2 ont été libérés en vue de leur réutilisation.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-192">Virtual log 1 and virtual log 2 have been freed for reuse.</span></span> <span data-ttu-id="c0cdc-193">Le journal logique commence désormais au début du journal virtuel 3.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-193">The logical log now starts at the beginning of virtual log 3.</span></span> <span data-ttu-id="c0cdc-194">Le journal virtuel 5 est encore inutilisé et ne fait pas partie du journal logique actuel.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-194">Virtual log 5 is still unused, and it is not part of the current logical log.</span></span>  
  
 <span data-ttu-id="c0cdc-195">![Fichier journal divisé en quatre fichiers journaux virtuels](media/tranlog3.gif "Fichier journal divisé en quatre fichiers journaux virtuels")</span><span class="sxs-lookup"><span data-stu-id="c0cdc-195">![Log file divided into four virtual log files](media/tranlog3.gif "Log file divided into four virtual log files")</span></span>  
  
 <span data-ttu-id="c0cdc-196">La troncation du journal se produit automatiquement après les événements suivants, à moins qu'elle ne soit retardée pour une raison quelconque :</span><span class="sxs-lookup"><span data-stu-id="c0cdc-196">Log truncation occurs automatically after the following events, except when delayed for some reason:</span></span>  
  
-   <span data-ttu-id="c0cdc-197">En mode de récupération simple, après un point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-197">Under the simple recovery model, after a checkpoint.</span></span>  
  
-   <span data-ttu-id="c0cdc-198">En mode de restauration complète ou en mode de récupération utilisant les journaux de transactions, après une sauvegarde du journal, si un point de contrôle s'est produit depuis la dernière sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-198">Under the full recovery model or bulk-logged recovery model, after a log backup, if a checkpoint has occurred since the previous backup.</span></span>  
  
 <span data-ttu-id="c0cdc-199">La troncation du journal peut être retardée pour différents motifs.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-199">Log truncation can be delayed by a variety of factors.</span></span> <span data-ttu-id="c0cdc-200">En cas de retard prolongé de la troncation du journal, le journal des transactions peut se remplir complètement.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-200">In the event of a long delay in log truncation, the transaction log can fill up.</span></span> <span data-ttu-id="c0cdc-201">Pour plus d’informations, consultez [facteurs pouvant retarder la troncation du journal](../relational-databases/logs/the-transaction-log-sql-server.md#FactorsThatDelayTruncation) et [résoudre les problèmes liés à un journal des transactions complet &#40;SQL Server l’erreur 9002&#41;](../relational-databases/logs/troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-201">For information, see [Factors That Can Delay Log Truncation](../relational-databases/logs/the-transaction-log-sql-server.md#FactorsThatDelayTruncation) and [Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;](../relational-databases/logs/troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span></span>  
  
##  <a name="write-ahead-transaction-log"></a><a name="WAL"></a> <span data-ttu-id="c0cdc-202">Journal des transactions à écriture anticipée</span><span class="sxs-lookup"><span data-stu-id="c0cdc-202">Write-Ahead Transaction Log</span></span>  

 <span data-ttu-id="c0cdc-203">Cette section décrit le rôle que joue le journal des transactions à écriture anticipée (journal WAL) au niveau de l'enregistrement sur disque des modifications apportées aux données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-203">This section describes the role of the write-ahead transaction log in recording data modifications to disk.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="c0cdc-204">utilise un journal WAL (write-ahead log) qui garantit qu’aucune modification de données n’est écrite sur le disque avant l’écriture du journal associé sur celui-ci.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-204">uses a write-ahead log (WAL), which guarantees that no data modifications are written to disk before the associated log record is written to disk.</span></span> <span data-ttu-id="c0cdc-205">Ainsi, les propriétés ACID (Atomicité, Cohérence, Isolation et Durabilité) d'une transaction sont conservées.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-205">This maintains the ACID properties for a transaction.</span></span>  
  
 <span data-ttu-id="c0cdc-206">Pour comprendre le fonctionnement du journal à écriture anticipée, il est important que vous sachiez comment les données modifiées sont écrites sur le disque.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-206">To understand how the write-ahead log works, it is important for you to know how modified data is written to disk.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="c0cdc-207">gère un cache des tampons dans lequel il lit les pages de données lorsque celles-ci doivent être extraites.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-207">maintains a buffer cache into which it reads data pages when data must be retrieved.</span></span> <span data-ttu-id="c0cdc-208">Lorsqu’une page est modifiée dans le cache des tampons, elle n’est pas réécrite immédiatement sur le disque ; au lieu de cela, la page est marquée comme *modifiée*.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-208">When a page is modified in the buffer cache, it is not immediately written back to disk; instead, the page is marked as *dirty*.</span></span> <span data-ttu-id="c0cdc-209">Une page peut avoir plusieurs écritures logiques avant son écriture physique sur le disque.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-209">A data page can have more than one logical write made before it is physically written to disk.</span></span> <span data-ttu-id="c0cdc-210">Pour chaque écriture logique, un enregistrement du journal des transactions est inséré dans le cache du journal qui enregistre la modification.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-210">For each logical write, a transaction log record is inserted in the log cache that records the modification.</span></span> <span data-ttu-id="c0cdc-211">L'enregistrement doit être écrit sur le disque avant que la page de modifications associée n'ait été supprimée du cache et écrite sur le disque.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-211">The log records must be written to disk before the associated dirty page is removed from the buffer cache and written to disk.</span></span> <span data-ttu-id="c0cdc-212">Le processus de point de contrôle analyse régulièrement le cache à la recherche de tampons contenant des pages issues d'une base de données spécifiée et écrit toutes les pages de modifications sur le disque.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-212">The checkpoint process periodically scans the buffer cache for buffers with pages from a specified database and writes all dirty pages to disk.</span></span> <span data-ttu-id="c0cdc-213">Les points de contrôle permettent une récupération ultérieure du système en créant un point où toutes les pages de modifications sont effectivement écrites sur le disque.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-213">Checkpoints save time during a later recovery by creating a point at which all dirty pages are guaranteed to have been written to disk.</span></span>  
  
 <span data-ttu-id="c0cdc-214">Le processus d'écriture d'une page de données modifiée, du cache des tampons vers le disque, porte le nom de vidage.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-214">Writing a modified data page from the buffer cache to disk is called flushing the page.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="c0cdc-215">possède une logique qui empêche la suppression d’une page de modifications avant que l’enregistrement du journal associé n’ait été écrit.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-215">has logic that prevents a dirty page from being flushed before the associated log record is written.</span></span> <span data-ttu-id="c0cdc-216">Les enregistrements de journal sont écrits sur le disque lorsque les transactions sont validées.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-216">Log records are written to disk when the transactions are committed.</span></span>  
  
##  <a name="transaction-log-backups"></a><a name="Backups"></a><span data-ttu-id="c0cdc-217">Sauvegardes du journal des transactions</span><span class="sxs-lookup"><span data-stu-id="c0cdc-217">Transaction Log Backups</span></span>  

 <span data-ttu-id="c0cdc-218">Cette section présente les concepts sur la sauvegarde et la restauration (application) des journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-218">This section presents concepts about how to back up and restore (apply) transaction logs.</span></span> <span data-ttu-id="c0cdc-219">En mode de récupération complète et en mode de récupération utilisant les journaux de transactions, la sauvegarde régulière des journaux de transactions (*sauvegardes des journaux*) est indispensable pour pouvoir récupérer les données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-219">Under the full and bulk-logged recovery models, taking routine backups of transaction logs (*log backups*) is necessary for recovering data.</span></span> <span data-ttu-id="c0cdc-220">Sauvegardez le journal pendant l'exécution d'une sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-220">You can back up the log while any full backup is running.</span></span> <span data-ttu-id="c0cdc-221">Pour plus d’informations sur les modes de récupération, consultez [Sauvegarde et restauration des bases de données SQL Server](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-221">For more information about recovery models, see [Back Up and Restore of SQL Server Databases](../relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases.md).</span></span>  
  
 <span data-ttu-id="c0cdc-222">Avant de pouvoir créer la première sauvegarde du journal, vous devez créer une sauvegarde complète, telle qu'une sauvegarde de base de données ou la première d'une série de sauvegardes de fichiers.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-222">Before you can create the first log backup, you must create a full backup, such as a database backup or the first in a set of file backups.</span></span> <span data-ttu-id="c0cdc-223">La restauration d'une base de données à l'aide seulement de sauvegardes de fichiers peut être complexe.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-223">Restoring a database by using only file backups can become complex.</span></span> <span data-ttu-id="c0cdc-224">Par conséquent, nous vous recommandons de commencer par une sauvegarde de base de données complète dès que possible.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-224">Therefore, we recommend that you start with a full database backup when you can.</span></span> <span data-ttu-id="c0cdc-225">Puis, sauvegardez le journal des transactions régulièrement.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-225">Thereafter, backing up the transaction log regularly is necessary.</span></span> <span data-ttu-id="c0cdc-226">Vous pouvez ainsi réduire les risques de perte de travail mais aussi permettre la troncation du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-226">This not only minimizes work-loss exposure but also enables truncation of the transaction log.</span></span> <span data-ttu-id="c0cdc-227">En général, le journal des transactions est tronqué après chaque sauvegarde de journal conventionnelle.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-227">Typically, the transaction log is truncated after every conventional log backup.</span></span>  
  
 <span data-ttu-id="c0cdc-228">Nous vous recommandons d'effectuer des sauvegardes de journaux suffisamment fréquentes pour répondre à vos besoins, en particulier votre tolérance des pertes de données comme celles causées par un lecteur de journal endommagé.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-228">We recommend taking frequent enough log backups to support your business requirements, specifically your tolerance for work loss such as might be caused by a damaged log drive.</span></span> <span data-ttu-id="c0cdc-229">La fréquence appropriée des sauvegardes de journaux dépend de votre gestion des risques liés aux pertes de données et du nombre de sauvegardes de journaux qu'il vous est possible de stocker, gérer et potentiellement restaurer.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-229">The appropriate frequency for taking log backups depends on your tolerance for work-loss exposure balanced by how many log backups you can store, manage, and, potentially, restore.</span></span> <span data-ttu-id="c0cdc-230">Réaliser une sauvegarde de journal tous les 15 à 30 minutes peut être suffisant.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-230">Taking a log backup every 15 to 30 minutes might be enough.</span></span> <span data-ttu-id="c0cdc-231">Si vos besoins nécessitent de minimiser les risques de perte de travail, vous devez envisager des sauvegardes de journaux plus fréquentes.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-231">If your business requires that you minimize work-loss exposure, consider taking log backups more frequently.</span></span> <span data-ttu-id="c0cdc-232">Une meilleure fréquence pour les sauvegardes de fichiers journaux offre l'avantage d'augmenter la fréquence de la troncation des journaux qui produit des fichiers journaux plus petits.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-232">More frequent log backups have the added advantage of increasing the frequency of log truncation, resulting in smaller log files.</span></span>  
  
 <span data-ttu-id="c0cdc-233">Pour limiter le nombre des sauvegardes de fichiers journaux à restaurer, il est essentiel de sauvegarder vos données régulièrement.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-233">To limit the number of log backups that you need to restore, it is essential to routinely back up your data.</span></span> <span data-ttu-id="c0cdc-234">Vous pouvez, par exemple, planifier une sauvegarde complète hebdomadaire et des sauvegardes différentielles quotidiennes de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-234">For example, you might schedule a weekly full database backup and daily differential database backups.</span></span>  
  
### <a name="the-log-chain"></a><span data-ttu-id="c0cdc-235">Séquence de journaux de transactions consécutifs</span><span class="sxs-lookup"><span data-stu-id="c0cdc-235">The Log Chain</span></span>  

 <span data-ttu-id="c0cdc-236">Une séquence continue de sauvegardes de journaux s’appelle une *séquence de journaux de transactions consécutifs*.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-236">A continuous sequence of log backups is called a *log chain*.</span></span> <span data-ttu-id="c0cdc-237">Une séquence de journaux de transactions consécutifs commence par une sauvegarde complète de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-237">A log chain starts with a full backup of the database.</span></span> <span data-ttu-id="c0cdc-238">Généralement, une nouvelle séquence de journaux de transactions consécutifs ne démarre que lorsque la base de données est sauvegardée pour la première fois ou après que le mode de récupération simple est remplacé par le mode de récupération complète ou le mode de récupération utilisant les journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-238">Usually, a new log chain is only started when the database is backed up for the first time or after the recovery model is switched from simple recovery to full or bulk-logged recovery.</span></span> <span data-ttu-id="c0cdc-239">Si vous ne choisissez pas de remplacer les jeux de sauvegarde existants lors de la création d'une sauvegarde complète de base de données, la séquence de journaux de transactions consécutifs existante reste intacte.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-239">Unless you choose to overwrite existing backup sets when creating a full database backup, the existing log chain remains intact.</span></span> <span data-ttu-id="c0cdc-240">Grâce à la séquence de journaux de transactions consécutifs intacte, vous pouvez restaurer votre base de données à partir d'une sauvegarde complète de base de données du support de sauvegarde, suivie de toutes les sauvegardes de fichiers journaux suivantes jusqu'à votre point de récupération.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-240">With the log chain intact, you can restore your database from any full database backup in the media set, followed by all subsequent log backups up through your recovery point.</span></span> <span data-ttu-id="c0cdc-241">Le point de récupération peut être la fin de la dernière sauvegarde de fichier journal ou un point de récupération spécifique dans chacune des sauvegardes de fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-241">The recovery point could be the end of the last log backup or a specific recovery point in any of the log backups.</span></span> <span data-ttu-id="c0cdc-242">Pour plus d’informations, consultez [Sauvegardes du journal des transactions &#40;SQL Server&#41;](../relational-databases/backup-restore/transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-242">For more information, see [Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/transaction-log-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="c0cdc-243">Pour restaurer une base de données jusqu'au point d'échec, la séquence de journaux de transactions consécutifs doit être intacte.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-243">To restore a database up to the point of failure, the log chain must be intact.</span></span> <span data-ttu-id="c0cdc-244">Autrement dit, la séquence ininterrompue des sauvegardes des journaux de transactions doit aller jusqu'au point de défaillance.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-244">That is, an unbroken sequence of transaction log backups must extend up to the point of failure.</span></span> <span data-ttu-id="c0cdc-245">Le point de commencement de cette séquence du journal dépend du type des sauvegardes de données que vous restaurez : base de données, partielle ou fichiers.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-245">Where this sequence of log must start depends on the type of data backups you are restoring: database, partial, or file.</span></span> <span data-ttu-id="c0cdc-246">Pour une sauvegarde partielle ou de base de données, la séquence des sauvegardes des journaux doit s'étendre à partir de la fin d'une sauvegarde partielle ou de base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-246">For a database or partial backup, the sequence of log backups must extend from the end of a database or partial backup.</span></span> <span data-ttu-id="c0cdc-247">Pour un jeu de sauvegardes de fichiers, la séquence des sauvegardes des journaux doit s'étendre à partir du début d'un jeu complet de sauvegardes de fichiers.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-247">For a set of file backups, the sequence of log backups must extend from the start of a full set of file backups.</span></span> <span data-ttu-id="c0cdc-248">Pour plus d’informations, consultez [Appliquer les sauvegardes du journal de transactions &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-248">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span></span>  
  
### <a name="restore-log-backups"></a><span data-ttu-id="c0cdc-249">Restaurer des sauvegardes du journal</span><span class="sxs-lookup"><span data-stu-id="c0cdc-249">Restore Log Backups</span></span>  

 <span data-ttu-id="c0cdc-250">La restauration d'une sauvegarde de journal restaure par progression les modifications enregistrées dans le journal des transactions, afin de recréer l'état exact de la base de données qui existait au début de la sauvegarde du journal.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-250">Restoring a log backup rolls forward the changes that were recorded in the transaction log to re-create the exact state of the database at the time the log backup operation started.</span></span> <span data-ttu-id="c0cdc-251">Lorsque vous restaurez une base de données, vous devez restaurer les sauvegardes des journaux créées à la suite de la sauvegarde complète de base de données que vous restaurez ou à partir de la première sauvegarde de fichiers que vous restaurez.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-251">When you restore a database, you will have to restore the log backups that were created after the full database backup that you restore, or from the start of the first file backup that you restore.</span></span> <span data-ttu-id="c0cdc-252">En règle générale, vous devez restaurer une série de sauvegardes de journaux jusqu'au point de récupération, après avoir restauré les données les plus récentes ou une sauvegarde différentielle.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-252">Typically, after you restore the most recent data or differential backup, you must restore a series of log backups until you reach your recovery point.</span></span> <span data-ttu-id="c0cdc-253">Ensuite, vous récupérez la base de données.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-253">Then, you recover the database.</span></span> <span data-ttu-id="c0cdc-254">Cette opération restaure toutes les transactions qui n'étaient pas terminées au début de la récupération et place la base de données en ligne.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-254">This rolls back all transactions that were incomplete when the recovery started and brings the database online.</span></span> <span data-ttu-id="c0cdc-255">Une fois la base de données récupérée, vous ne pouvez plus restaurer des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-255">After the database has been recovered, you cannot restore any more backups.</span></span> <span data-ttu-id="c0cdc-256">Pour plus d’informations, consultez [Appliquer les sauvegardes du journal de transactions &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="c0cdc-256">For more information, see [Apply Transaction Log Backups &#40;SQL Server&#41;](../relational-databases/backup-restore/apply-transaction-log-backups-sql-server.md).</span></span>  
  
## <a name="additional-reading"></a><span data-ttu-id="c0cdc-257">Lectures supplémentaires</span><span class="sxs-lookup"><span data-stu-id="c0cdc-257">Additional Reading</span></span>  

 <span data-ttu-id="c0cdc-258">Pour plus d'informations sur le journal des transactions, nous vous recommandons de lire les articles et les ouvrages suivants.</span><span class="sxs-lookup"><span data-stu-id="c0cdc-258">We recommend the following articles and books for additional information about the transaction log.</span></span>  
  
 [<span data-ttu-id="c0cdc-259">Fonctionnement de la journalisation et de la récupération dans SQL Server de Paul Randall</span><span class="sxs-lookup"><span data-stu-id="c0cdc-259">Understanding Logging and Recovery in SQL Server by Paul Randall</span></span>](https://technet.microsoft.com/magazine/2009.02.logging.aspx)  
  
 [<span data-ttu-id="c0cdc-260">Gestion du journal des transactions SQL Server de Tony Davis et Gail Shaw</span><span class="sxs-lookup"><span data-stu-id="c0cdc-260">SQL Server Transaction Log Management by Tony Davis and Gail Shaw</span></span>](http://www.simple-talk.com/books/sql-books/sql-server-transaction-log-management-by-tony-davis-and-gail-shaw/)  
  
  
