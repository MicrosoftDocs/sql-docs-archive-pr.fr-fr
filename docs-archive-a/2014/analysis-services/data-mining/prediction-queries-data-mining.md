---
title: Requêtes de prédiction (exploration de données) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: e5e6686c-1360-480e-8c0d-8a56204fbed9
author: minewiskan
ms.author: owend
ms.openlocfilehash: 543055aaed5d8991ed2c913a6ae46575c774e216
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87703452"
---
# <a name="prediction-queries-data-mining"></a><span data-ttu-id="9f549-102">Prediction Queries (Data Mining)</span><span class="sxs-lookup"><span data-stu-id="9f549-102">Prediction Queries (Data Mining)</span></span>
  <span data-ttu-id="9f549-103">Un projet d'exploration de données type a pour objectif d'utiliser le modèle d'exploration de données pour faire des prédictions.</span><span class="sxs-lookup"><span data-stu-id="9f549-103">The goal of a typical data mining project is to use the mining model to make predictions.</span></span> <span data-ttu-id="9f549-104">Par exemple, vous pouvez prédire le temps d'inactivité prévu d'un certain cluster de serveurs, ou générer un score qui indique si des segments de clients sont susceptibles de répondre à une campagne de publicité.</span><span class="sxs-lookup"><span data-stu-id="9f549-104">For example, you might want to predict the amount of expected downtime for a certain cluster of servers, or generate a score that indicates whether segments of customers are likely to respond to an advertising campaign.</span></span> <span data-ttu-id="9f549-105">Pour effectuer toutes ces tâches, vous devez créer une requête de prédiction.</span><span class="sxs-lookup"><span data-stu-id="9f549-105">To do all these things, you would create a prediction query.</span></span>  
  
 <span data-ttu-id="9f549-106">Fonctionnellement, il existe différents types de requêtes de prédiction prises en charge dans SQL Server, selon le type d'entrée de la requête :</span><span class="sxs-lookup"><span data-stu-id="9f549-106">Functionally, there are different types of prediction queries supported in SQL Server, depending on the type of inputs to the query:</span></span>  
  
|<span data-ttu-id="9f549-107">Type de requête</span><span class="sxs-lookup"><span data-stu-id="9f549-107">Query Type</span></span>|<span data-ttu-id="9f549-108">Options de requête</span><span class="sxs-lookup"><span data-stu-id="9f549-108">Query Options</span></span>|  
|----------------|-------------------|  
|<span data-ttu-id="9f549-109">Requêtes de prédiction singleton</span><span class="sxs-lookup"><span data-stu-id="9f549-109">Singleton prediction queries</span></span>|<span data-ttu-id="9f549-110">Utilisez une requête singleton lorsque vous souhaitez prédire des résultats pour un nouveau cas unique, ou plusieurs nouveaux cas.</span><span class="sxs-lookup"><span data-stu-id="9f549-110">Use a singleton query when you want to predict outcomes for a single new case, or multiple new cases.</span></span> <span data-ttu-id="9f549-111">Vous fournissez les valeurs d'entrée directement dans la requête, et la requête est exécutée en tant que session unique.</span><span class="sxs-lookup"><span data-stu-id="9f549-111">You provide the input values directly in the query, and the query is executed as a single session.</span></span>|  
|<span data-ttu-id="9f549-112">Prédictions par lot</span><span class="sxs-lookup"><span data-stu-id="9f549-112">Batch predictions</span></span>|<span data-ttu-id="9f549-113">Utilisez les prédictions par lot lorsque vous disposez de données externes que vous souhaitez alimenter dans le modèle, à utiliser comme base pour les prédictions.</span><span class="sxs-lookup"><span data-stu-id="9f549-113">Use batch predictions when you have external data that you want to feed into the model, to use as the basis for predictions.</span></span> <span data-ttu-id="9f549-114">Pour effectuer des prédictions pour un jeu complet de données, mappez les données de la source externe aux colonnes du modèle, puis spécifiez le type de données prédictives que vous souhaitez générer.</span><span class="sxs-lookup"><span data-stu-id="9f549-114">To make predictions for an entire set of data, you map the data in the external source to the columns in the model, and then specify the type of predictive data you want to output.</span></span><br /><br /> <span data-ttu-id="9f549-115">La requête pour le dataset entier est exécutée au cours d'une même session, ce qui rend cette option beaucoup plus efficace que l'envoi de plusieurs requêtes répétées.</span><span class="sxs-lookup"><span data-stu-id="9f549-115">The query for the entire dataset is executed in a single session, making this option much more efficient than sending multiple repeated queries.</span></span>|  
|<span data-ttu-id="9f549-116">Prédictions de série chronologique</span><span class="sxs-lookup"><span data-stu-id="9f549-116">Time Series predictions</span></span>|<span data-ttu-id="9f549-117">Utilisez une requête de série chronologique lorsque vous souhaitez prédire une valeur sur un certain nombre d'étapes futures.</span><span class="sxs-lookup"><span data-stu-id="9f549-117">Use a time series query when you want to predict a value over some number of future steps.</span></span> <span data-ttu-id="9f549-118">L'exploration de données SQL Server fournit également les fonctionnalités suivantes dans les requêtes de série chronologique :</span><span class="sxs-lookup"><span data-stu-id="9f549-118">SQL Server Data Mining also provides the following functionality in time series queries:</span></span><br /><br /> <span data-ttu-id="9f549-119">Vous pouvez étendre un modèle existant en ajoutant de nouvelles données dans le cadre de la requête, puis élaborer des prédictions basées sur la série composite.</span><span class="sxs-lookup"><span data-stu-id="9f549-119">You can extend an existing model by adding new data as part of the query, and make predictions based on the composite series.</span></span><br /><br /> <span data-ttu-id="9f549-120">Vous pouvez appliquer un modèle existant à une nouvelle série de données en utilisant l'option REPLACE_MODEL_CASES.</span><span class="sxs-lookup"><span data-stu-id="9f549-120">You can apply an existing model to a new data series by using the REPLACE_MODEL_CASES option.</span></span><br /><br /> <span data-ttu-id="9f549-121">Vous pouvez effectuer une prédiction croisée.</span><span class="sxs-lookup"><span data-stu-id="9f549-121">You can perform cross-prediction.</span></span>|  
  
 <span data-ttu-id="9f549-122">Les sections suivantes décrivent la syntaxe générale des requêtes de prédiction, les différents types de requêtes de prédiction et la manière d'utiliser les résultats des requêtes de prédiction.</span><span class="sxs-lookup"><span data-stu-id="9f549-122">The following sections describe the general syntax of prediction queries, the different types of prediction queries, and how to work with the results of prediction queries.</span></span>  
  
 [<span data-ttu-id="9f549-123">Conception d'une requête de prédiction de base</span><span class="sxs-lookup"><span data-stu-id="9f549-123">Basic Prediction Query Design</span></span>](#bkmk_PredQuery)  
  
-   [<span data-ttu-id="9f549-124">Ajout de fonctions de prédiction</span><span class="sxs-lookup"><span data-stu-id="9f549-124">Adding Prediction Functions</span></span>](#bkmk_PredFunc)  
  
-   [<span data-ttu-id="9f549-125">Requêtes singleton</span><span class="sxs-lookup"><span data-stu-id="9f549-125">Singleton Queries</span></span>](#bkmk_SingletonQuery)  
  
-   [<span data-ttu-id="9f549-126">Requêtes de prédiction par lot</span><span class="sxs-lookup"><span data-stu-id="9f549-126">Batch Prediction Queries</span></span>](#bkmk_BatchQuery)  
  
 [<span data-ttu-id="9f549-127">Utilisation des résultats de requêtes</span><span class="sxs-lookup"><span data-stu-id="9f549-127">Working with the Results of Queries</span></span>](#bkmk_WorkResults)  
  
##  <a name="basic-prediction-query-design"></a><a name="bkmk_PredQuery"></a><span data-ttu-id="9f549-128">Conception de requête de prédiction de base</span><span class="sxs-lookup"><span data-stu-id="9f549-128">Basic Prediction Query Design</span></span>  
 <span data-ttu-id="9f549-129">Lorsque vous créez une prédiction, vous fournissez en général des nouvelles données et vous demandez au modèle de générer une prédiction basée sur ces nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="9f549-129">When you create a prediction, you typically provide some piece of new data and ask the model to generate a prediction based on the new data.</span></span>  
  
-   <span data-ttu-id="9f549-130">Dans une requête de prédiction par lot, vous mappez le modèle à une source externe de données à l'aide d'une *jointure de prédiction*.</span><span class="sxs-lookup"><span data-stu-id="9f549-130">In a batch prediction query, you map the model to an external source of data by using a *prediction join*.</span></span>  
  
-   <span data-ttu-id="9f549-131">Dans une requête de prédiction singleton, tapez une ou plusieurs valeurs à utiliser comme entrées.</span><span class="sxs-lookup"><span data-stu-id="9f549-131">In a singleton prediction query, you type one or more values to use as inputs.</span></span> <span data-ttu-id="9f549-132">Vous pouvez créer plusieurs prédictions à l'aide d'une requête de prédiction singleton.</span><span class="sxs-lookup"><span data-stu-id="9f549-132">You can create multiple predictions using a singleton prediction query.</span></span> <span data-ttu-id="9f549-133">Toutefois, si vous devez créer un grand nombre de prédictions, les performances sont meilleures si vous utilisez une requête par lot.</span><span class="sxs-lookup"><span data-stu-id="9f549-133">However, if you need to create many predictions, performance is better when you use a batch query.</span></span>  
  
 <span data-ttu-id="9f549-134">Les requêtes de prédiction singleton et par lot utilisent la syntaxe PREDICTION JOIN pour définir les nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="9f549-134">Both singleton and batch prediction queries use the PREDICTION JOIN syntax to define the new data.</span></span> <span data-ttu-id="9f549-135">La différence réside dans la façon dont la partie entrée de la jointure de prédiction est spécifiée.</span><span class="sxs-lookup"><span data-stu-id="9f549-135">The difference is in how the input side of the prediction join is specified.</span></span>  
  
-   <span data-ttu-id="9f549-136">Dans une requête de prédiction par lot, les données proviennent d'une source de données externe spécifiée selon la syntaxe OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="9f549-136">In a batch prediction query, the data comes from an external data source that is specified by using the OPENQUERY syntax.</span></span>  
  
-   <span data-ttu-id="9f549-137">Dans une requête de prédiction singleton, les données sont incluses dans le cadre de la requête.</span><span class="sxs-lookup"><span data-stu-id="9f549-137">In a singleton prediction query, the data is supplied inline as part of the query.</span></span>  
  
 <span data-ttu-id="9f549-138">Pour les modèles de série chronologique, les données d'entrée ne sont pas toujours nécessaires ; il est possible d'effectuer des prédictions en utilisant uniquement les données figurant déjà dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="9f549-138">For time series models, input data is not always required; it is possible to make predictions using just the data already in the model.</span></span> <span data-ttu-id="9f549-139">Toutefois, si vous spécifiez de nouvelles données d'entrée, vous devez décider si vous allez utiliser les nouvelles données pour mettre à jour et étendre le modèle, ou remplacer la série d'origine de données utilisée dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="9f549-139">However, if you do specify new input data, you must decide whether you will use the new data to update and extend the model, or to replace the original series of data that was used in the model.</span></span>  <span data-ttu-id="9f549-140">Pour plus d'informations sur ces options, consultez [Time Series Model Query Examples](time-series-model-query-examples.md).</span><span class="sxs-lookup"><span data-stu-id="9f549-140">For more information about these options, see [Time Series Model Query Examples](time-series-model-query-examples.md).</span></span>  
  
###  <a name="adding-prediction-functions"></a><a name="bkmk_PredFunc"></a><span data-ttu-id="9f549-141">Ajout de fonctions de prédiction</span><span class="sxs-lookup"><span data-stu-id="9f549-141">Adding Prediction Functions</span></span>  
 <span data-ttu-id="9f549-142">Outre la prédiction d'une valeur, vous pouvez personnaliser une requête de prédiction en vue de retourner plusieurs types d'informations en rapport avec la prédiction.</span><span class="sxs-lookup"><span data-stu-id="9f549-142">In addition to predicting a value, you can customize a prediction query to return various kinds of information that are related to the prediction.</span></span> <span data-ttu-id="9f549-143">Par exemple, si la prédiction crée une liste de produits à recommander à un client, vous souhaiterez peut-être également retourner la probabilité de chaque prédiction, afin de pouvoir les classer et présenter uniquement les meilleures recommandations à l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9f549-143">For example, if the prediction creates a list of products to recommend to a customer, you might also want to return the probability for each prediction, so that you can rank them and present only the top recommendations to the user.</span></span>  
  
 <span data-ttu-id="9f549-144">Pour cela, vous ajoutez des *fonctions de prédiction* à la requête.</span><span class="sxs-lookup"><span data-stu-id="9f549-144">To do this, you add *prediction functions* to the query.</span></span> <span data-ttu-id="9f549-145">Chaque type de modèle ou de requête prend en charge des fonctions spécifiques.</span><span class="sxs-lookup"><span data-stu-id="9f549-145">Each model or query type supports specific functions.</span></span> <span data-ttu-id="9f549-146">Par exemple, les modèles de clustering prennent en charge des fonctions de prédiction spéciales qui fournissent des détails supplémentaires sur les clusters créés par le modèle, tandis que les modèles de série chronologique comportent des fonctions qui calculent les différences au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="9f549-146">For example, clustering models support special prediction functions that provide extra detail about the clusters created by the model, whereas time series models have functions that calculate differences over time.</span></span> <span data-ttu-id="9f549-147">Il existe aussi des fonctions de prédiction générales qui fonctionnent avec la plupart des types de modèles.</span><span class="sxs-lookup"><span data-stu-id="9f549-147">There are also general prediction functions that work with almost all model types.</span></span> <span data-ttu-id="9f549-148">Pour obtenir la liste des fonctions de prédiction prises en charge dans les différents types de requête, consultez cette rubrique dans la référence DMX : [Fonctions de prédiction générales &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span><span class="sxs-lookup"><span data-stu-id="9f549-148">For a list of the prediction functions supported in different types of queries, see this topic the DMX reference:  [General Prediction Functions &#40;DMX&#41;](/sql/dmx/general-prediction-functions-dmx).</span></span>  
  
###  <a name="creating-singleton-prediction-queries"></a><a name="bkmk_SingletonQuery"></a><span data-ttu-id="9f549-149">Création de requêtes de prédiction Singleton</span><span class="sxs-lookup"><span data-stu-id="9f549-149">Creating Singleton Prediction Queries</span></span>  
 <span data-ttu-id="9f549-150">Une requête de prédiction singleton est utile lorsque vous souhaitez créer des prédictions rapides en temps réel.</span><span class="sxs-lookup"><span data-stu-id="9f549-150">A singleton prediction query is useful when you want to create quick predictions in real time.</span></span> <span data-ttu-id="9f549-151">Un scénario courant consiste à obtenir des informations à partir d'un client, probablement à l'aide d'un formulaire sur un site Web, puis à soumettre ces données comme entrée à une requête de prédiction singleton.</span><span class="sxs-lookup"><span data-stu-id="9f549-151">A common scenario might be that you have obtained information from a customer, perhaps by using a form on a Web site, and you want to submit that data as the input to a singleton prediction query.</span></span> <span data-ttu-id="9f549-152">Par exemple, lorsqu'un client choisit un produit dans une liste, vous pouvez utiliser cette sélection comme entrée à une requête qui prédit les meilleurs produits à recommander.</span><span class="sxs-lookup"><span data-stu-id="9f549-152">For example, when a customer chooses a product from a list, you could use that selection as the input to a query that predicts the best products to recommend.</span></span>  
  
 <span data-ttu-id="9f549-153">Les requêtes de prédiction singleton ne requièrent pas une table séparée qui contient l'entrée.</span><span class="sxs-lookup"><span data-stu-id="9f549-153">Singleton prediction queries do not require a separate table that contains input.</span></span> <span data-ttu-id="9f549-154">À la place, vous fournissez une ou plusieurs lignes de valeurs comme entrée pour le modèle, et la ou les prédictions sont retournées en temps réel.</span><span class="sxs-lookup"><span data-stu-id="9f549-154">Instead, you provide one or multiple rows of values as input to the model, and the prediction or predictions are returned in real time.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="9f549-155">Malgré le nom, les requêtes de prédiction Singleton ne font pas seulement des prédictions uniques. vous pouvez générer plusieurs prédictions pour chaque ensemble d’entrées.</span><span class="sxs-lookup"><span data-stu-id="9f549-155">Despite the name, singleton prediction queries do not just make single predictions-you can generate multiple predictions for each set of inputs.</span></span> <span data-ttu-id="9f549-156">Pour fournir plusieurs cas d'entrée, créez une instruction SELECT pour chaque cas d'entrée et associez-la à l'opérateur UNION.</span><span class="sxs-lookup"><span data-stu-id="9f549-156">You provide multiple input cases by creating a SELECT statement for each input case and combining them with the UNION operator.</span></span>  
  
 <span data-ttu-id="9f549-157">Lorsque vous créez une requête de prédiction singleton, vous devez fournir les nouvelles données au modèle sous la forme d'une jointure PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="9f549-157">When you create a singleton prediction query, you must provide the new data to the model in the form of a PREDICTION JOIN.</span></span> <span data-ttu-id="9f549-158">Cela signifie que bien que vous n'effectuiez pas le mappage à une table réelle, vous devez vous assurer que les nouvelles données correspondent aux colonnes existantes dans le modèle d'exploration de données.</span><span class="sxs-lookup"><span data-stu-id="9f549-158">This means that even though you are not mapping to an actual table, you must make sure that the new data matches the existing columns in the mining model.</span></span> <span data-ttu-id="9f549-159">Si les nouvelles colonnes de données et les nouvelles données correspondent exactement, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] mappera les colonnes pour vous.</span><span class="sxs-lookup"><span data-stu-id="9f549-159">If the new data columns and the new data match exactly, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] will map the columns for you.</span></span> <span data-ttu-id="9f549-160">On parle alors d'une jointure *NATURAL PREDICTION JOIN*.</span><span class="sxs-lookup"><span data-stu-id="9f549-160">This is called a *NATURAL PREDICTION JOIN*.</span></span> <span data-ttu-id="9f549-161">Toutefois, si les colonnes ne correspondent pas, ou si les nouvelles données ne contiennent pas les mêmes types et quantités de données que le modèle, vous devez spécifier les colonnes du modèle qui seront mappées aux nouvelles données ou spécifier les valeurs manquantes.</span><span class="sxs-lookup"><span data-stu-id="9f549-161">However, if the columns do not match, or if the new data does not contain the same kind and amount of data that is in the model, you must specify which columns in the model map to the new data, or specify the missing values.</span></span>  
  
###  <a name="batch-prediction-queries"></a><a name="bkmk_BatchQuery"></a><span data-ttu-id="9f549-162">Requêtes de prédiction par lot</span><span class="sxs-lookup"><span data-stu-id="9f549-162">Batch Prediction Queries</span></span>  
 <span data-ttu-id="9f549-163">Une requête de prédiction par lot est utile lorsque vous disposez de données externes à utiliser lors de l'élaboration de prédictions.</span><span class="sxs-lookup"><span data-stu-id="9f549-163">A batch prediction query is useful when you have external data that you want to use in making predictions.</span></span> <span data-ttu-id="9f549-164">Par exemple, vous pouvez avoir créé un modèle qui classe les clients par catégorie selon leur activité en ligne et leur historique d'achat.</span><span class="sxs-lookup"><span data-stu-id="9f549-164">For example, you might have built a model that categorizes customers by their online activity and purchasing history.</span></span> <span data-ttu-id="9f549-165">Vous pouvez appliquer ce modèle à une liste de prospects récemment acquis, pour créer des projections pour les ventes ou pour identifier les cibles des campagnes proposées.</span><span class="sxs-lookup"><span data-stu-id="9f549-165">You could apply that model to a list of newly acquired leads, to create projections for sales, or to identify targets for proposed campaigns.</span></span>  
  
 <span data-ttu-id="9f549-166">Lorsque vous effectuez une jointure de prédiction, vous devez mapper les colonnes du modèle aux colonnes dans la nouvelle source de données.</span><span class="sxs-lookup"><span data-stu-id="9f549-166">When you perform a prediction join, you must map the columns the model to the columns in the new data source.</span></span> <span data-ttu-id="9f549-167">Par conséquent, la source de données que vous choisissez pour une entrée doit correspondre à des données qui sont quelque peu similaires aux données dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="9f549-167">Therefore, the data source that you choose for an input must data that is somewhat similar to the data in the model.</span></span> <span data-ttu-id="9f549-168">Les nouvelles informations ne doivent pas nécessairement correspondre exactement, et elles peuvent être incomplètes.</span><span class="sxs-lookup"><span data-stu-id="9f549-168">The new information does not have to match exactly, and can be incomplete.</span></span> <span data-ttu-id="9f549-169">Par exemple, supposons que l'apprentissage du modèle a été effectué en utilisant des informations sur le revenu et l'âge, mais que la liste de clients que vous utilisez pour les prédictions comporte l'âge mais rien sur le revenu.</span><span class="sxs-lookup"><span data-stu-id="9f549-169">For example, suppose the model was trained using information about income and age, but the customer list you are using for predictions has age but nothing about income.</span></span> <span data-ttu-id="9f549-170">Dans ce scénario, vous pouvez mapper les nouvelles données au modèle et créer une prédiction pour chaque client.</span><span class="sxs-lookup"><span data-stu-id="9f549-170">In this scenario, you could still map the new data to the model and create a prediction for each customer.</span></span> <span data-ttu-id="9f549-171">Toutefois, si le revenu était un prédicteur important pour le modèle, l'absence d'informations complètes affecte la qualité des prédictions.</span><span class="sxs-lookup"><span data-stu-id="9f549-171">However, if income was an important predictor for the model, the lack of complete information would affect the quality of predictions.</span></span>  
  
 <span data-ttu-id="9f549-172">Pour obtenir de meilleurs résultats, vous devez joindre autant de colonnes correspondantes que possible entre les nouvelles données et le modèle.</span><span class="sxs-lookup"><span data-stu-id="9f549-172">To get the best results, you should join as many of the matching columns as possible between the new data and the model.</span></span> <span data-ttu-id="9f549-173">Toutefois, la requête réussira même s'il n'y a pas de correspondances.</span><span class="sxs-lookup"><span data-stu-id="9f549-173">However, the query will succeed even if there are no matches.</span></span> <span data-ttu-id="9f549-174">Si aucune colonne n'est jointe, la requête retournera la prédiction marginale, qui est équivalente à l'instruction `SELECT <predictable-column> FROM <model>` sans clause PREDICTION JOIN.</span><span class="sxs-lookup"><span data-stu-id="9f549-174">If no columns are joined, the query will return the marginal prediction, which is equivalent to the statement `SELECT <predictable-column> FROM <model>` without a PREDICTION JOIN clause.</span></span>  
  
 <span data-ttu-id="9f549-175">Une fois que vous avez correctement mappé toutes les colonnes appropriées, exécutez la requête ; [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] effectue des prédictions pour chaque ligne dans les nouvelles données en fonction des schémas dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="9f549-175">After you have successfully mapped all relevant columns, you run the query, and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] makes predictions for each row in the new data based on patterns in the model.</span></span> <span data-ttu-id="9f549-176">Vous pouvez enregistrer les résultats dans une nouvelle table dans la vue de source de données qui contient les données externes, ou vous pouvez copier et coller les données si vous utilisez [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] ou [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9f549-176">You can save the results back to a new table in the data source view that contains the external data, or you can copy and paste the data is you are using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="9f549-177">Si vous utilisez le concepteur de [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], la source de données externe doit d’abord être définie comme vue de source de données.</span><span class="sxs-lookup"><span data-stu-id="9f549-177">If you use the designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], the external data source must first be defined as a data source view.</span></span>  
  
 <span data-ttu-id="9f549-178">Si vous utilisez DMX pour créer une jointure de prédiction, vous pouvez spécifier la source de données externe en utilisant les commandes OPENQUERY, OPENROWSET ou SHAPE.</span><span class="sxs-lookup"><span data-stu-id="9f549-178">If you use DMX to create a prediction join, you can specify the external data source by using the OPENQUERY, OPENROWSET, or SHAPE commands.</span></span> <span data-ttu-id="9f549-179">La méthode d'accès aux données par défaut dans les modèles DMX est OPENQUERY.</span><span class="sxs-lookup"><span data-stu-id="9f549-179">The default data access method in the DMX templates is OPENQUERY.</span></span> <span data-ttu-id="9f549-180">Pour plus d’informations sur ces méthodes, consultez [&#60;source data query&#62;](/sql/dmx/source-data-query).</span><span class="sxs-lookup"><span data-stu-id="9f549-180">For information about these methods, see [&#60;source data query&#62;](/sql/dmx/source-data-query).</span></span>  
  
###  <a name="predictions-in-time-series-mining-models"></a><a name="bkmk_TSQuery"></a><span data-ttu-id="9f549-181">Prédictions dans les modèles d’exploration de données de série chronologique</span><span class="sxs-lookup"><span data-stu-id="9f549-181">Predictions in Time Series Mining Models</span></span>  
 <span data-ttu-id="9f549-182">Les modèles de série chronologique sont différents d'autres types de modèles ; vous pouvez soit utiliser le modèle tel quel afin de créer des prédictions, ou vous pouvez fournir de nouvelles données au modèle pour mettre à jour le modèle et créer des prédictions basées sur les tendances récentes.</span><span class="sxs-lookup"><span data-stu-id="9f549-182">Time series models are different from other models types; you can either use the model as it is to create predictions, or you can provide new data to the model to update the model and create predictions based on recent trends.</span></span> <span data-ttu-id="9f549-183">Si vous ajoutez de nouvelles données, vous pouvez spécifier la façon dont elles doivent être utilisées.</span><span class="sxs-lookup"><span data-stu-id="9f549-183">If you add new data, you can specify the way the new data should be used.</span></span>  
  
-   <span data-ttu-id="9f549-184">L'*extension des cas de modèles* signifie que vous ajoutez les nouvelles données dans la série existante de données dans le modèle de série chronologique.</span><span class="sxs-lookup"><span data-stu-id="9f549-184">*Extending the model cases* means that you add the new data onto the existing series of data in the time series model.</span></span> <span data-ttu-id="9f549-185">Dorénavant, les prédictions sont basées sur les nouvelles séries combinées.</span><span class="sxs-lookup"><span data-stu-id="9f549-185">Henceforth, predictions are based on the new, combined series.</span></span> <span data-ttu-id="9f549-186">Cette option est appropriée si vous souhaitez simplement ajouter quelques points de données à un modèle existant.</span><span class="sxs-lookup"><span data-stu-id="9f549-186">This option is good when you want to simply add a few data points to an existing model.</span></span>  
  
     <span data-ttu-id="9f549-187">Par exemple, supposons que vous ayez un modèle de série chronologique existant dont l'apprentissage a été effectué sur les chiffres des ventes de l'année précédente.</span><span class="sxs-lookup"><span data-stu-id="9f549-187">For example, suppose that you have an existing time series model that has been trained on the sales data from the previous year.</span></span> <span data-ttu-id="9f549-188">Après avoir collecté plusieurs mois de nouveaux chiffres de ventes, vous décidez de mettre à jour vos prévisions de ventes pour l'année actuelle.</span><span class="sxs-lookup"><span data-stu-id="9f549-188">After you have collected several months of new sales data, you decide to update your sales forecasts for the current year.</span></span> <span data-ttu-id="9f549-189">Vous pouvez créer une jointure de prédiction qui met à jour le modèle en ajoutant de nouvelles données et qui étend le modèle pour faire de nouvelles prédictions.</span><span class="sxs-lookup"><span data-stu-id="9f549-189">You can create a prediction join that updates the model by adding new data and extends the model to make new predictions.</span></span>  
  
-   <span data-ttu-id="9f549-190">*Remplacer les cas de modèle* signifie que vous conservez le modèle ayant fait l'objet d'un apprentissage, mais vous remplacez les cas sous-jacents par un nouveau jeu de données de cas.</span><span class="sxs-lookup"><span data-stu-id="9f549-190">*Replacing the model cases* means that you keep the trained model, but replace the underlying cases with a new set of case data.</span></span> <span data-ttu-id="9f549-191">Cette option est utile lorsque vous souhaitez conserver la tendance dans le modèle, mais l'appliquer à un ensemble différent de données.</span><span class="sxs-lookup"><span data-stu-id="9f549-191">This option is useful when you want to keep the trend in the model, but apply it to a different set of data.</span></span>  
  
     <span data-ttu-id="9f549-192">Par exemple, votre modèle d'origine a pu faire l'objet d'un apprentissage sur un ensemble de données avec des volumes de ventes très élevés ; lorsque vous remplacez les données sous-jacentes par une nouvelle série (peut-être d'un magasin avec un volume de ventes inférieur), vous conservez la tendance, mais les prédictions commencent à partir des valeurs de la série de remplacement.</span><span class="sxs-lookup"><span data-stu-id="9f549-192">For example, your original model might have been trained on a set of data with very high sales volumes; when you replace the underlying data with a new series (perhaps from a store with lower sales volume), you preserve the trend, but the predictions begin from the values in the replacement series.</span></span>  
  
 <span data-ttu-id="9f549-193">Quelle que soit l'approche que vous utilisez, le point de départ pour les prédictions est toujours la fin de la série d'origine.</span><span class="sxs-lookup"><span data-stu-id="9f549-193">Regardless of which approach you use, the starting point for predictions is always the end of the original series.</span></span>  
  
 <span data-ttu-id="9f549-194">Pour plus d’informations sur la création de jointures de prédiction sur des modèles de série chronologique, consultez [Time Series Model Query Examples](time-series-model-query-examples.md) ou [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span><span class="sxs-lookup"><span data-stu-id="9f549-194">For more information about how to create prediction joins on time series models, see [Time Series Model Query Examples](time-series-model-query-examples.md) or [PredictTimeSeries &#40;DMX&#41;](/sql/dmx/predicttimeseries-dmx).</span></span>  
  
##  <a name="working-with-the-results-of-a-prediction-query"></a><a name="bkmk_WorkResults"></a><span data-ttu-id="9f549-195">Utilisation des résultats d’une requête de prédiction</span><span class="sxs-lookup"><span data-stu-id="9f549-195">Working with the Results of a Prediction Query</span></span>  
 <span data-ttu-id="9f549-196">Les options pour enregistrer les résultats d'une requête de prédiction d'exploration de données sont différentes selon la façon dont vous créez la requête.</span><span class="sxs-lookup"><span data-stu-id="9f549-196">Your options for saving the results of a data mining prediction query are different depending on how you create the query.</span></span>  
  
-   <span data-ttu-id="9f549-197">Lorsque vous générez une requête à l'aide du Générateur de requêtes de prédiction dans [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ou [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], vous pouvez enregistrer les résultats d'une requête de prédiction dans une source de données [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] existante.</span><span class="sxs-lookup"><span data-stu-id="9f549-197">When you build a query using Prediction Query Builder in either [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can save the results of a prediction query to an existing [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] data source.</span></span> <span data-ttu-id="9f549-198">Pour plus d’informations, consultez [Afficher et enregistrer les résultats d’une requête de prédiction](view-and-save-the-results-of-a-prediction-query.md).</span><span class="sxs-lookup"><span data-stu-id="9f549-198">For more information, see [View and Save the Results of a Prediction Query](view-and-save-the-results-of-a-prediction-query.md).</span></span>  
  
-   <span data-ttu-id="9f549-199">Lorsque vous créez des requêtes de prédiction en utilisant DMX dans le volet de requête de [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], vous pouvez utiliser les options de résultat de la requête pour enregistrer les résultats dans un fichier, ou dans le volet de résultats de la requête au format texte ou dans une grille.</span><span class="sxs-lookup"><span data-stu-id="9f549-199">When you create prediction queries using DMX in the Query pane of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you can use the query output options to save the results to a file, or to the Query Results pane as text or in a grid.</span></span> <span data-ttu-id="9f549-200">Pour plus d’informations, consultez [Éditeurs de texte et de requête &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="9f549-200">For more information, see [Query and Text Editors &#40;SQL Server Management Studio&#41;](../../relational-databases/scripting/query-and-text-editors-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="9f549-201">Lorsque vous exécutez une requête de prédiction à l'aide des composants Integration Services, les tâches permettent d'écrire les résultats dans une base de données à l'aide d'un gestionnaire de connexions ADO.NET disponible ou du gestionnaire de connexions OLEDB.</span><span class="sxs-lookup"><span data-stu-id="9f549-201">When you run a prediction query using the Integration Services components, the tasks provides the ability to write the results to a database by using an available ADO.NET connection manager or OLEDB connection manager.</span></span> <span data-ttu-id="9f549-202">Pour plus d’informations, consultez [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span><span class="sxs-lookup"><span data-stu-id="9f549-202">For more information, see [Data Mining Query Task](../../integration-services/control-flow/data-mining-query-task.md).</span></span>  
  
 <span data-ttu-id="9f549-203">Il est important de comprendre que les résultats d'une requête de prédiction sont différents des résultats d'une requête sur une base de données relationnelle, qui retourne toujours une seule ligne de valeurs associées.</span><span class="sxs-lookup"><span data-stu-id="9f549-203">It is important to understand that the results of a prediction query are not like the results of a query on a relational database, which always returns a single row of related values.</span></span> <span data-ttu-id="9f549-204">Chaque fonction de prédiction DMX que vous ajoutez à une requête retourne son propre ensemble de lignes.</span><span class="sxs-lookup"><span data-stu-id="9f549-204">Each DMX prediction function that you add to a query returns its own rowset.</span></span> <span data-ttu-id="9f549-205">Par conséquent, lorsque vous faites une prédiction sur un cas unique, le résultat peut être une valeur prédite avec plusieurs colonnes de tables imbriquées contenant des détails supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="9f549-205">Therefore, when you make a prediction on a single case, the result might be a predicted value together with several columns of nested tables containing additional detail.</span></span>  
  
 <span data-ttu-id="9f549-206">Si vous combinez plusieurs fonctions dans une requête, les résultats sont regroupés dans un ensemble de lignes hiérarchique.</span><span class="sxs-lookup"><span data-stu-id="9f549-206">If you combine multiple functions in one query, the return results are combined as a hierarchical rowset.</span></span> <span data-ttu-id="9f549-207">Par exemple, supposons que vous utilisez un modèle de série chronologique pour prédire les valeurs futures du montant des ventes et la quantité de ventes, à l'aide d'une requête telle que cette instruction DMX :</span><span class="sxs-lookup"><span data-stu-id="9f549-207">For example, say you use a time series model to predict future values for sales amount and sales quantity, using a query such as this DMX statement:</span></span>  
  
```  
SELECT  
  PredictTimeSeries([Forecasting].[Amount]) as [PredictedAmount]  
, PredictTimeSeries([Forecasting].[Quantity]) as [PredictedQty]  
FROM  
  [Forecasting]  
  
```  
  
 <span data-ttu-id="9f549-208">Les résultats de cette requête sont deux colonnes, une pour chaque série prédite, où chaque ligne contient une table imbriquée avec les valeurs prédites :</span><span class="sxs-lookup"><span data-stu-id="9f549-208">The results of this query are two columns, one for each predicted series, where each row contains a nested table with the predicted values:</span></span>  
  
 <span data-ttu-id="9f549-209">**PredictedAmount**</span><span class="sxs-lookup"><span data-stu-id="9f549-209">**PredictedAmount**</span></span>  
  
|<span data-ttu-id="9f549-210">$TIME</span><span class="sxs-lookup"><span data-stu-id="9f549-210">$TIME</span></span>|<span data-ttu-id="9f549-211">Montant</span><span class="sxs-lookup"><span data-stu-id="9f549-211">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="9f549-212">201101</span><span class="sxs-lookup"><span data-stu-id="9f549-212">201101</span></span>|<span data-ttu-id="9f549-213">172067.11</span><span class="sxs-lookup"><span data-stu-id="9f549-213">172067.11</span></span>|  
  
|<span data-ttu-id="9f549-214">$TIME</span><span class="sxs-lookup"><span data-stu-id="9f549-214">$TIME</span></span>|<span data-ttu-id="9f549-215">Montant</span><span class="sxs-lookup"><span data-stu-id="9f549-215">Amount</span></span>|  
|-----------|------------|  
|<span data-ttu-id="9f549-216">201102</span><span class="sxs-lookup"><span data-stu-id="9f549-216">201102</span></span>|<span data-ttu-id="9f549-217">363390.68</span><span class="sxs-lookup"><span data-stu-id="9f549-217">363390.68</span></span>|  
  
 <span data-ttu-id="9f549-218">**PredictedQty**</span><span class="sxs-lookup"><span data-stu-id="9f549-218">**PredictedQty**</span></span>  
  
|<span data-ttu-id="9f549-219">$TIME</span><span class="sxs-lookup"><span data-stu-id="9f549-219">$TIME</span></span>|<span data-ttu-id="9f549-220">Quantité</span><span class="sxs-lookup"><span data-stu-id="9f549-220">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="9f549-221">201101</span><span class="sxs-lookup"><span data-stu-id="9f549-221">201101</span></span>|<span data-ttu-id="9f549-222">77</span><span class="sxs-lookup"><span data-stu-id="9f549-222">77</span></span>|  
  
|<span data-ttu-id="9f549-223">$TIME</span><span class="sxs-lookup"><span data-stu-id="9f549-223">$TIME</span></span>|<span data-ttu-id="9f549-224">Quantité</span><span class="sxs-lookup"><span data-stu-id="9f549-224">Quantity</span></span>|  
|-----------|--------------|  
|<span data-ttu-id="9f549-225">201102</span><span class="sxs-lookup"><span data-stu-id="9f549-225">201102</span></span>|<span data-ttu-id="9f549-226">260</span><span class="sxs-lookup"><span data-stu-id="9f549-226">260</span></span>|  
  
 <span data-ttu-id="9f549-227">Si votre fournisseur ne peut pas gérer d'ensembles de lignes hiérarchiques, vous pouvez aplatir les résultats en utilisant le mot clé FLATTEN dans la requête de prédiction.</span><span class="sxs-lookup"><span data-stu-id="9f549-227">If your provider cannot handle hierarchical rowsets, you can flatten the results by using the FLATTEN keyword in the prediction query.</span></span> <span data-ttu-id="9f549-228">Pour plus d’informations et des exemples d’ensembles de lignes aplatis, consultez [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span><span class="sxs-lookup"><span data-stu-id="9f549-228">For more information, including examples of flattened rowsets, see [SELECT &#40;DMX&#41;](/sql/dmx/select-dmx).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9f549-229">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="9f549-229">See Also</span></span>  
 <span data-ttu-id="9f549-230">[Requêtes de contenu &#40;l’exploration de données&#41;](content-queries-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="9f549-230">[Content Queries &#40;Data Mining&#41;](content-queries-data-mining.md) </span></span>  
 [<span data-ttu-id="9f549-231">Requêtes de définition des données &#40;Exploration de données&#41;</span><span class="sxs-lookup"><span data-stu-id="9f549-231">Data Definition Queries &#40;Data Mining&#41;</span></span>](data-definition-queries-data-mining.md)  
  
  
