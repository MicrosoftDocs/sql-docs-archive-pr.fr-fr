---
title: Définition d’une relation plusieurs-à-plusieurs | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 7bebb174-148c-4cbb-a285-2f6d536a16d5
author: minewiskan
ms.author: owend
ms.openlocfilehash: fb4e18831ae23b8cf1f0702b357672f7520478a8
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87698795"
---
# <a name="defining-a-many-to-many-relationship"></a><span data-ttu-id="6d7b8-102">Définition d’une relation plusieurs-à-plusieurs</span><span class="sxs-lookup"><span data-stu-id="6d7b8-102">Defining a Many-to-Many Relationship</span></span>
  <span data-ttu-id="6d7b8-103">Lorsque vous définissez une dimension, chaque fait est joint généralement à un et un seul membre de dimension, tandis qu'un même membre de dimension peut être associé à plusieurs faits différents.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-103">When you define a dimension, typically each fact joins to one and only one dimension member, whereas a single dimension member can be associated with many different facts.</span></span> <span data-ttu-id="6d7b8-104">Par exemple, chaque client peut avoir plusieurs commandes mais chaque commande se rapporte à un seul client.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-104">For example, each customer can have many orders but each order belongs to a single customer.</span></span> <span data-ttu-id="6d7b8-105">Dans la terminologie des bases de données relationnelles, on parle de *relation un-à-plusieurs*.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-105">In relational database terminology, this is referred to as a *one-to-many relationship*.</span></span> <span data-ttu-id="6d7b8-106">Cependant, un seul fait peut parfois être joint à plusieurs membres de dimension.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-106">However, sometimes a single fact can join to multiple dimension members.</span></span> <span data-ttu-id="6d7b8-107">Dans la terminologie des bases de données relationnelles, on parle de *relation plusieurs-à-plusieurs*.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-107">In relational database terminology, this is referred to as a *many-to-many relationship*.</span></span> <span data-ttu-id="6d7b8-108">Par exemple, l'achat d'un client peut être motivé par plusieurs raisons et un même motif d'achat peut être associé à plusieurs achats.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-108">For example, a customer may have multiple reasons for making a purchase, and a purchase reason can be associated with multiple purchases.</span></span> <span data-ttu-id="6d7b8-109">Une table de jointure sert à définir les motifs de vente relatifs à chaque achat.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-109">A join table is used to define the sales reasons that relate to each purchase.</span></span> <span data-ttu-id="6d7b8-110">Une dimension Sales Reason créée à partir de relations de ce type aura par conséquent plusieurs membres associés à une seule transaction de vente.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-110">A Sales Reason dimension constructed from such relationships would then have multiple members that relate to a single sales transaction.</span></span> <span data-ttu-id="6d7b8-111">Les dimensions plusieurs-à-plusieurs étendent le modèle dimensionnel au-delà du schéma en étoile classique et prend en charge les analyses complexes lorsque les dimensions ne sont pas reliées directement à une table de faits.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-111">Many-to-many dimensions expand the dimensional model beyond the classic star schema and support complex analytics when dimensions are not directly related to a fact table.</span></span>

 <span data-ttu-id="6d7b8-112">Dans [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], les relations plusieurs-à-plusieurs entre une dimension et un groupe de mesures se définissent en spécifiant une table de faits intermédiaire qui est jointe à la table de dimension.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-112">In [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)], you define a many-to-many relationship between a dimension and a measure group by specifying an intermediate fact table that is joined to the dimension table.</span></span> <span data-ttu-id="6d7b8-113">0Une table de faits intermédiaire est jointe, à son tour, à une table de dimension intermédiaire à laquelle la table de faits est jointe.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-113">An intermediate fact table is joined, in turn, to an intermediate dimension table to which the fact table is joined.</span></span> <span data-ttu-id="6d7b8-114">Les relations plusieurs-à-plusieurs entre la table de faits intermédiaire et les tables de dimension dans la relation et la dimension intermédiaire créent les relations plusieurs-à-plusieurs entre les membres de la dimension principale et les mesures du groupe de mesures qui sont spécifiées par la relation.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-114">The many-to-many relationships between the intermediate fact table and both the dimension tables in the relationship and the intermediate dimension creates the many-to-many relationships between members of the primary dimension and measures in the measure group that is specified by the relationship.</span></span> <span data-ttu-id="6d7b8-115">Afin de définir une relation plusieurs-à-plusieurs entre une dimension et un groupe de mesures par le biais d'un groupe de mesures intermédiaire, ce groupe doit partager une ou plusieurs dimensions avec le groupe de mesures d'origine.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-115">In order to define a many-to-many relationship between a dimension and a measure group through an intermediate measure group, the intermediate measure group must share one or more dimensions with the original measure group.</span></span>

 <span data-ttu-id="6d7b8-116">Dans une dimension plusieurs à plusieurs, les valeurs sont des sommes distinctes, ce qui signifie qu'elles ne s'agrègent pas plus d'une fois au membre Tous.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-116">With a many-to-many dimension, values are distinct summed, which means that they do not aggregate more than once to the All member.</span></span>

> [!NOTE]
>  <span data-ttu-id="6d7b8-117">Pour pouvoir prendre en charge une relation de dimension plusieurs-à-plusieurs, une relation de clé primaire-clé étrangère doit être définie dans la vue de source de données entre toutes les tables impliquées.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-117">In order to support a many-to-many dimension relationship, a primary key-foreign key relationship must be defined in the data source view between all the tables that are involved.</span></span> <span data-ttu-id="6d7b8-118">Si vous ne procédez pas ainsi, vous ne pourrez pas sélectionner le groupe de mesures intermédiaire correct pour établir la relation sous l’onglet **Utilisation de la dimension** du Concepteur de cube.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-118">Otherwise, you will not be able to select the correct intermediate measure group when you establish the relationship in the **Dimension Usage** tab of Cube Designer.</span></span>

 <span data-ttu-id="6d7b8-119">Pour plus d’informations, consultez [Relations de dimension](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md)et [Définir une relation plusieurs à plusieurs et les propriétés d’une relation plusieurs à plusieurs](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span><span class="sxs-lookup"><span data-stu-id="6d7b8-119">For more information, see [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md), and [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md).</span></span>

 <span data-ttu-id="6d7b8-120">Au cours des tâches de cette rubrique, vous allez définir la dimension Sales Reasons et le groupe de mesures Sales Reasons et définir ensuite une relation plusieurs-à-plusieurs entre la dimension Sales Reasons et le groupe de mesures Internet Sales par le biais du groupe de mesures Sales Reasons.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-120">In the tasks in this topic, you define the Sales Reasons dimension and the Sales Reasons measure group, and you define a many-to-many relationship between the Sales Reasons dimension and the Internet Sales measure group through the Sales Reasons measure group.</span></span>

## <a name="adding-required-tables-to-the-data-source-view"></a><span data-ttu-id="6d7b8-121">Ajout des tables requises dans la vue de source de données</span><span class="sxs-lookup"><span data-stu-id="6d7b8-121">Adding Required Tables to the Data Source View</span></span>

1.  <span data-ttu-id="6d7b8-122">Ouvrez le Concepteur de vues de source de données pour la vue de source de données **Adventure Works DW 2012** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-122">Open Data Source View Designer for the **Adventure Works DW 2012** data source view.</span></span>

2.  <span data-ttu-id="6d7b8-123">Cliquez avec le bouton droit n’importe où dans le volet **bibliothèque de diagrammes** , cliquez sur **nouveau diagramme**, puis spécifiez `Internet Sales Order Reasons` comme nom pour ce nouveau diagramme.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-123">Right-click anywhere in the **Diagram Organizer** pane, click **New Diagram**, and specify `Internet Sales Order Reasons` as the name for this new diagram.</span></span>

3.  <span data-ttu-id="6d7b8-124">Faites glisser la table **InternetSales** du volet **Tables** vers le volet **Diagramme** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-124">Drag the **InternetSales** table to the **Diagram** pane from the **Tables** pane.</span></span>

4.  <span data-ttu-id="6d7b8-125">Cliquez avec le bouton droit dans le volet **Diagramme** et choisissez **Ajouter/Supprimer des tables**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-125">Right-click anywhere in the **Diagram** pane, and then click **Add/Remove Tables**.</span></span>

5.  <span data-ttu-id="6d7b8-126">Dans la boîte de dialogue **Ajouter/supprimer des tables** , ajoutez la table **DimSalesReason** et la table **FactInternetSalesReason** à la liste **Objets inclus** , puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-126">In the **Add/Remove Tables** dialog box, add the **DimSalesReason** table and the **FactInternetSalesReason** table to the **Included objects** list, and then click **OK**.</span></span>

     <span data-ttu-id="6d7b8-127">Notez que les relations clé primaire/clé étrangère entre les tables impliquées sont établies automatiquement, car ces relations sont définies dans la base de données relationnelle sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-127">Notice that the primary key-foreign key relationships between the tables that are involved are established automatically because those relationships are defined in the underlying relational database.</span></span> <span data-ttu-id="6d7b8-128">Si ces relations n'étaient pas définies dans la base de données relationnelles, il vous faudrait les définir dans la vue de source de données.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-128">If these relationships were not defined in the underlying relational database, you would have to define them in the data source view.</span></span>

6.  <span data-ttu-id="6d7b8-129">Dans le menu **Format** , pointez sur **Disposition automatique**, puis cliquez sur **Diagramme**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-129">On the **Format** menu, point to **Auto Layout**, and then click **Diagram**.</span></span>

7.  <span data-ttu-id="6d7b8-130">Dans la Fenêtre Propriétés, remplacez la propriété **FriendlyName** de la table **DimSalesReason** par `SalesReason` , puis remplacez la propriété **FriendlyName** de la table **FactInternetSalesReason** par `InternetSalesReason` .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-130">In the Properties window, change the **FriendlyName** property of the **DimSalesReason** table to `SalesReason`, and then change the **FriendlyName** property of the **FactInternetSalesReason** table to `InternetSalesReason`.</span></span>

8.  <span data-ttu-id="6d7b8-131">Dans le volet **Tables** , développez **InternetSalesReason (dbo.FactInternetSalesReason)**, sélectionnez **SalesOrderNumber**, puis vérifiez la propriété **DataType** pour cette colonne de données dans la fenêtre des propriétés.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-131">In the **Tables** pane, expand **InternetSalesReason (dbo.FactInternetSalesReason)**, click **SalesOrderNumber**, and then review the **DataType** property for this data column in the Properties window.</span></span>

     <span data-ttu-id="6d7b8-132">Notez que le type de données de la colonne **SalesOrderNumber** est un type de données chaîne.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-132">Notice that the data type for the **SalesOrderNumber** column is a string data type.</span></span>

9. <span data-ttu-id="6d7b8-133">Passez en revue les types de données des autres colonnes de la `InternetSalesReason` table.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-133">Review the data types for the other columns in the `InternetSalesReason` table.</span></span>

     <span data-ttu-id="6d7b8-134">Notez que les types de données des deux autres colonnes dans cette table sont des types de données numériques.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-134">Notice that the data types for the other two columns in this table are numeric data types.</span></span>

10. <span data-ttu-id="6d7b8-135">Dans le volet **Tables** , cliquez avec le bouton droit sur **InternetSalesReason (dbo.FactInternetSalesReason)** et choisissez **Explorer les données**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-135">In the **Tables** pane, right-click **InternetSalesReason (dbo.FactInternetSalesReason)**, and then click **Explore Data**.</span></span>

     <span data-ttu-id="6d7b8-136">Notez que, pour chaque numéro de ligne de chaque commande, une valeur clé identifie la raison de la vente pour l'achat correspondant à ce poste, comme montré dans l'illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-136">Notice that, for each line number within each order, a key value identifies the sales reason for the purchase of that line item, as shown in the following image.</span></span>

     <span data-ttu-id="6d7b8-137">![Valeur clé pour identifier un motif de vente pour les achats](../../2014/tutorials/media/l5-many-to-many-1.gif "Valeur clé pour identifier un motif de vente pour les achats")</span><span class="sxs-lookup"><span data-stu-id="6d7b8-137">![Key value to identify sales reason for purchases](../../2014/tutorials/media/l5-many-to-many-1.gif "Key value to identify sales reason for purchases")</span></span>

## <a name="defining-the-intermediate-measure-group"></a><span data-ttu-id="6d7b8-138">Définition du groupe de mesures intermédiaire</span><span class="sxs-lookup"><span data-stu-id="6d7b8-138">Defining the Intermediate Measure Group</span></span>

1.  <span data-ttu-id="6d7b8-139">Affichez le Concepteur de cube pour le cube du didacticiel [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , puis cliquez sur l’onglet **Structure de cube** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-139">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Cube Structure** tab.</span></span>

2.  <span data-ttu-id="6d7b8-140">Cliquez dans le volet **Mesures** et choisissez **Nouveau groupe de mesures**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-140">Right-click anywhere in the **Measures** pane, and then click **New Measure Group**.</span></span> <span data-ttu-id="6d7b8-141">Pour plus d’informations, consultez [Création de mesures et de groupes de mesures dans les modèles multidimensionnels](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span><span class="sxs-lookup"><span data-stu-id="6d7b8-141">For more information, see [Create Measures and Measure Groups in Multidimensional Models](multidimensional-models/create-measures-and-measure-groups-in-multidimensional-models.md).</span></span>

3.  <span data-ttu-id="6d7b8-142">Dans la boîte de dialogue **nouveau groupe de mesures** , sélectionnez `InternetSalesReason` dans la liste **Sélectionnez une table dans la vue de source de données** , puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-142">In the **New Measure Group** dialog box, select `InternetSalesReason` in the **Select a table from the data source view** list, and then click **OK**.</span></span>

     <span data-ttu-id="6d7b8-143">Notez que le groupe de mesures **Internet Sales Reason** apparaît maintenant dans le volet **Mesures** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-143">Notice that the **Internet Sales Reason** measure group now appears in the **Measures** pane.</span></span>

4.  <span data-ttu-id="6d7b8-144">Développez le groupe de mesures **Internet Sales Reason** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-144">Expand the **Internet Sales Reason** measure group.</span></span>

     <span data-ttu-id="6d7b8-145">Notez qu’une seule mesure est définie pour ce nouveau groupe de mesures, la mesure **Internet Sales Reason Count** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-145">Notice that only a single measure is defined for this new measure group, the **Internet Sales Reason Count** measure.</span></span>

5.  <span data-ttu-id="6d7b8-146">Sélectionnez **Internet Sales Reason Count** et vérifiez les propriétés de cette mesure dans la fenêtre des propriétés.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-146">Select **Internet Sales Reason Count** and review the properties of this measure in the Properties window.</span></span>

     <span data-ttu-id="6d7b8-147">Notez que la propriété **AggregateFunction** de cette mesure est définie comme **Count** , et non **Sum**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-147">Notice that the **AggregateFunction** property for this measure is defined as **Count** instead of **Sum**.</span></span> [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]<span data-ttu-id="6d7b8-148">a choisi **Count** , car le type de données sous-jacent est un type de données String.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-148">chose **Count** because the underlying data type is a string data type.</span></span> <span data-ttu-id="6d7b8-149">Les deux autres colonnes dans la table de faits sous-jacente n'ont pas été sélectionnées en tant que mesures car [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] a détecté qu'il s'agissait de clés numériques et non de mesures en tant que telles.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-149">The other two columns in the underlying fact table were not selected as measures because [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] detected them as numeric keys instead of as actual measures.</span></span> <span data-ttu-id="6d7b8-150">Pour plus d’informations, consultez [Définir le comportement semi-additif](multidimensional-models/define-semiadditive-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="6d7b8-150">For more information, see [Define Semiadditive Behavior](multidimensional-models/define-semiadditive-behavior.md).</span></span>

6.  <span data-ttu-id="6d7b8-151">Dans la fenêtre des propriétés, remplacez la propriété **Visible** de la mesure **Internet Sales Reason Count** par **False**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-151">In the Properties window, change the **Visible** property of the **Internet Sales Reason Count** measure to **False**.</span></span>

     <span data-ttu-id="6d7b8-152">Cette mesure sera utilisée uniquement pour joindre la dimension Sales Reason, que vous allez définir ensuite, au groupe de mesures Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-152">This measure will only be used to join the Sales Reason dimension that you will define next to the Internet Sales measure group.</span></span> <span data-ttu-id="6d7b8-153">Les utilisateurs n'exploreront pas cette mesure directement.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-153">Users will not browse this measure directly.</span></span>

     <span data-ttu-id="6d7b8-154">L’illustration suivante montre les propriétés de la mesure **Internet Sales Reason Count** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-154">The following image shows the properties for the **Internet Sales Reason Count** measure.</span></span>

     <span data-ttu-id="6d7b8-155">![Propriétés de la mesure Internet Sales Reason Count](../../2014/tutorials/media/l5-many-to-many-2.gif "Propriétés de la mesure Internet Sales Reason Count")</span><span class="sxs-lookup"><span data-stu-id="6d7b8-155">![Properties for Internet Sales Reason Count measure](../../2014/tutorials/media/l5-many-to-many-2.gif "Properties for Internet Sales Reason Count measure")</span></span>

## <a name="defining-the-many-to-many-dimension"></a><span data-ttu-id="6d7b8-156">Définition d'une dimension plusieurs-à-plusieurs</span><span class="sxs-lookup"><span data-stu-id="6d7b8-156">Defining the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="6d7b8-157">Dans l’Explorateur de solutions, cliquez avec le bouton droit sur **Dimensions**, puis cliquez sur **Nouvelle dimension**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-157">In Solution Explorer, right-click **Dimensions**, and then click **New Dimension**.</span></span>

2.  <span data-ttu-id="6d7b8-158">Dans la page **Assistant Dimension** , cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-158">On the **Welcome to the Dimension Wizard** page, click **Next**.</span></span>

3.  <span data-ttu-id="6d7b8-159">Dans la page **Sélectionner la méthode de création** , vérifiez que l’option **Utiliser une table existante** est sélectionnée, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-159">On the **Select Creation Method** page, verify that the **Use an existing table** option is selected, and then click **Next**.</span></span>

4.  <span data-ttu-id="6d7b8-160">Dans la page **Spécifier des informations sur la source** , vérifiez que la vue de source des données [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-160">On the **Specify Source Information** page, verify that the [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] DW 2012 data source view is selected.</span></span>

5.  <span data-ttu-id="6d7b8-161">Dans la liste **table principale** , sélectionnez `SalesReason` .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-161">In the **Main table** list, select `SalesReason`.</span></span>

6.  <span data-ttu-id="6d7b8-162">Dans la liste **Colonnes clés** , vérifiez que **SalesReasonKey** apparaît.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-162">In the **Key columns** list, verify that **SalesReasonKey** is listed.</span></span>

7.  <span data-ttu-id="6d7b8-163">Dans la liste **Colonne de nom** , sélectionnez **SalesReasonName**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-163">In the **Name column** list, select **SalesReasonName**.</span></span>

8.  <span data-ttu-id="6d7b8-164">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-164">Click **Next**.</span></span>

9. <span data-ttu-id="6d7b8-165">Dans la page **Sélectionner les attributs de la dimension** , l’attribut **Sales Reason Key** est sélectionné automatiquement car c’est l’attribut de clé.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-165">On the **Select Dimension Attributes** page, the **Sales Reason Key** attribute is automatically selected because it is the key attribute.</span></span> <span data-ttu-id="6d7b8-166">Activez la case à cocher en regard de l’attribut **Sales Reason Reason type** , remplacez son nom par `Sales Reason Type` , puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-166">Select the check box beside the **Sales Reason Reason Type** attribute, change its name to `Sales Reason Type`, and then click **Next**.</span></span>

10. <span data-ttu-id="6d7b8-167">Dans la page **Fin de l’Assistant** , cliquez sur **Terminer** pour créer la dimension Sales Reason.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-167">On the **Completing the Wizard** page, click **Finish** to create the Sales Reason dimension.</span></span>

11. <span data-ttu-id="6d7b8-168">Dans le menu **Fichier**, cliquez sur **Enregistrer tout**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-168">On the **File** menu, click **Save All**.</span></span>

12. <span data-ttu-id="6d7b8-169">Dans le volet **attributs** du concepteur de dimensions pour la dimension **Sales Reason** , sélectionnez **Sales Reason Key**, puis remplacez la propriété **Name** de la fenêtre Propriétés par`Sales Reason.`</span><span class="sxs-lookup"><span data-stu-id="6d7b8-169">In the **Attributes** pane of the Dimension Designer for the **Sales Reason** dimension, select **Sales Reason Key**, and then change the **Name** property in the Properties window to `Sales Reason.`</span></span>

13. <span data-ttu-id="6d7b8-170">Dans le volet **hiérarchies** du concepteur de dimensions, créez une hiérarchie utilisateur **Sales Reasons** qui contient le `Sales Reason Type` niveau et le niveau **Sales Reason** , dans cet ordre.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-170">In the **Hierarchies** pane of the Dimension Designer, create a **Sales Reasons** user hierarchy that contains the `Sales Reason Type` level and the **Sales Reason** level, in that order.</span></span>

14. <span data-ttu-id="6d7b8-171">Dans la Fenêtre Propriétés, définissez `All Sales Reasons` comme valeur pour la propriété **AllMemberName** de la hiérarchie Sales Reasons.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-171">In the Properties window, define `All Sales Reasons` as the value for the **AllMemberName** property of the Sales Reasons hierarchy.</span></span>

15. <span data-ttu-id="6d7b8-172">Définissez `All Sales Reasons` comme valeur pour la propriété **AttributeAllMemberName** de la dimension Sales Reason.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-172">Define `All Sales Reasons` as the value for **AttributeAllMemberName** property of the Sales Reason dimension.</span></span>

16. <span data-ttu-id="6d7b8-173">Pour ajouter la dimension créée récemment au cube du didacticiel [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] comme dimension du cube, basculez vers le **Concepteur de cube**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-173">To add the newly created dimension to the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube as a cube dimension, switch to **Cube Designer**.</span></span> <span data-ttu-id="6d7b8-174">Sous l’onglet **Structure de cube** , cliquez avec le bouton droit dans le volet **Dimensions** et sélectionnez **Ajouter une dimension de cube**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-174">On the **Cube Structure** tab, right-click in the **Dimensions** pane and select **Add Cube Dimension**.</span></span>

17. <span data-ttu-id="6d7b8-175">Dans la boîte de dialogue **Ajouter une dimension de cube** , sélectionnez **Sales Reason** puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-175">In the **Add Cube Dimension** dialog box, select **Sales Reason** and then click **OK**.</span></span>

18. <span data-ttu-id="6d7b8-176">Dans le menu **Fichier**, cliquez sur **Enregistrer tout**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-176">On the **File** menu, click **Save All**.</span></span>

## <a name="defining-the-many-to-many-relationship"></a><span data-ttu-id="6d7b8-177">Définition d'une relation plusieurs-à-plusieurs</span><span class="sxs-lookup"><span data-stu-id="6d7b8-177">Defining the Many to Many Relationship</span></span>

1.  <span data-ttu-id="6d7b8-178">Affichez le Concepteur de cube pour le cube du didacticiel [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , puis cliquez sur l’onglet **Utilisation de la dimension** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-178">Switch to Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click the **Dimension Usage** tab.</span></span>

     <span data-ttu-id="6d7b8-179">Notez que la dimension **Sales Reason** est liée par une relation régulière au groupe de mesures **Internet Sales Reason** , mais qu’elle n’est liée par aucune relation aux groupes de mesures **Internet Sales** ou **Reseller Sales** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-179">Notice that the **Sales Reason** dimension has a regular relationship defined with the **Internet Sales Reason** measure group, but has no relationship defined with the **Internet Sales** or **Reseller Sales** measure groups.</span></span> <span data-ttu-id="6d7b8-180">Notez aussi que la dimension **Internet Sales Order Details** est liée par une relation régulière à la dimension **Internet Sales Reason** , qui de son côté a une **Relation de fait** avec le groupe de mesures **Internet Sales** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-180">Notice also that the **Internet Sales Order Details** dimension has a regular relationship defined with the **Internet Sales Reason** dimension, which in turn has a **Fact Relationship** with the **Internet Sales** measure group.</span></span> <span data-ttu-id="6d7b8-181">Si cette dimension n’était pas présente (ou une autre dimension avec une relation dont sont absents les groupes de mesures **Internet Sales Reason** et **Internet Sales** ), vous ne pourriez pas définir la relation plusieurs-à-plusieurs.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-181">If this dimension was not present (or another dimension with a relationship with both the **Internet Sales Reason** and the **Internet Sales** measure group were not present), you would not be able to define the many-to-many relationship.</span></span>

2.  <span data-ttu-id="6d7b8-182">Cliquez sur la cellule à l’intersection de la dimension **Sales Reason** et du groupe de mesures **Internet Sales** , puis cliquez sur le bouton Parcourir (**…**).</span><span class="sxs-lookup"><span data-stu-id="6d7b8-182">Click the cell at the intersection of the **Internet Sales** measure group and the **Sales Reason** dimension and then click the browse button (**...**).</span></span>

3.  <span data-ttu-id="6d7b8-183">Dans la boîte de dialogue **Définir une relation** , sélectionnez **Plusieurs à plusieurs** dans la liste **Sélectionnez un type de relation** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-183">In the **Define Relationship** dialog box, select **Many-to-Many** in the **Select relationship type** list.</span></span>

     <span data-ttu-id="6d7b8-184">Vous devez définir le groupe de mesures intermédiaire qui lie la dimension Sales Reason au groupe de mesures Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-184">You have to define the intermediate measure group that connects the Sales Reason dimension to the Internet Sales measure group.</span></span>

4.  <span data-ttu-id="6d7b8-185">Dans la liste **Groupe de mesures intermédiaire** , sélectionnez **Internet Sales Reason**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-185">In the **Intermediate measure group** list, select **Internet Sales Reason**.</span></span>

     <span data-ttu-id="6d7b8-186">L’illustration suivante montre les modifications apportées dans la boîte de dialogue **Définir une relation** .</span><span class="sxs-lookup"><span data-stu-id="6d7b8-186">The following image shows the changes in the **Define Relationship** dialog box.</span></span>

     <span data-ttu-id="6d7b8-187">![Boîte de dialogue définir une relation](../../2014/tutorials/media/l5-many-to-many-3.gif "Boîte de dialogue Définir une relation")</span><span class="sxs-lookup"><span data-stu-id="6d7b8-187">![Define Relationship dialog box](../../2014/tutorials/media/l5-many-to-many-3.gif "Define Relationship dialog box")</span></span>

5.  <span data-ttu-id="6d7b8-188">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-188">Click **OK**.</span></span>

     <span data-ttu-id="6d7b8-189">Notez l'icône plusieurs-à-plusieurs qui représente la relation entre la dimension Sales Reason et le groupe de mesures Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-189">Notice the many-to-many icon that represents the relationship between the Sales Reason dimension and the Internet Sales measure group.</span></span>

## <a name="browsing-the-cube-and-the-many-to-many-dimension"></a><span data-ttu-id="6d7b8-190">Exploration du cube et de la dimension plusieurs-à-plusieurs</span><span class="sxs-lookup"><span data-stu-id="6d7b8-190">Browsing the Cube and the Many-to-Many Dimension</span></span>

1.  <span data-ttu-id="6d7b8-191">Dans le menu **Générer** , cliquez sur **Déployer Analysis Services Tutorial**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-191">On the **Build** menu, click **Deploy Analysis Services Tutorial**.</span></span>

2.  <span data-ttu-id="6d7b8-192">Une fois le déploiement terminé, affichez l’onglet **Navigateur** dans le Concepteur de cube pour le cube du didacticiel [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] , puis cliquez sur **Reconnexion**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-192">When deployment has successfully completed, switch to the **Browser** tab in Cube Designer for the [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] Tutorial cube, and then click **Reconnect**.</span></span>

3.  <span data-ttu-id="6d7b8-193">Ajoutez la mesure **Internet Sales-Sales Amount** dans la zone des données du volet Données.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-193">Add the **Internet Sales-Sales Amount** measure to the data area of the data pane.</span></span>

4.  <span data-ttu-id="6d7b8-194">Ajoutez la hiérarchie définir par l’utilisateur **Sales Reasons** de la dimension **Sales Reason** vers la zone de ligne du volet de données.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-194">Add the **Sales Reasons** user-defined hierarchy from the **Sales Reason** dimension to the row area of the data pane.</span></span>

5.  <span data-ttu-id="6d7b8-195">Dans le volet Métadonnées, développez **Customer**, **Location**, **Customer Geography**, **Members**, **All Customers**et **Australia**, cliquez avec le bouton droit sur **Queensland**, puis cliquez sur **Ajouter au filtre**.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-195">In the metadata pane, expand **Customer**, expand **Location**, expand **Customer Geography**, expand **Members**, expand **All Customers**, expand **Australia**, right-click **Queensland**, and then click **Add to Filter**.</span></span>

6.  <span data-ttu-id="6d7b8-196">Développez chaque membre du `Sales Reason Type` niveau pour passer en revue les valeurs en dollars associées à chaque raison pour laquelle un client de Queensland a donné son achat d’un [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] produit sur Internet.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-196">Expand each member of the `Sales Reason Type` level to review the dollar values that are associated with each reason a customer in Queensland gave for their purchase of an [!INCLUDE[ssSampleDBCoShort](../includes/sssampledbcoshort-md.md)] product over the Internet.</span></span>

     <span data-ttu-id="6d7b8-197">Notez que la somme des totaux associés à chaque raison de vente est supérieure au total des ventes.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-197">Notice that the totals that are associated with each sales reason add up to more than the total sales.</span></span> <span data-ttu-id="6d7b8-198">Cela s'explique par le fait que certains clients ont cité plusieurs raisons pour leur achat.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-198">This is because some customers cited multiple reasons for their purchase.</span></span>

     <span data-ttu-id="6d7b8-199">L’illustration suivante montre le volet **Filtre** et le volet **Données** du Concepteur de cube.</span><span class="sxs-lookup"><span data-stu-id="6d7b8-199">The following image shows the **Filter** pane and **Data** pane of Cube Designer.</span></span>

     <span data-ttu-id="6d7b8-200">![Volets Filtre et Données du Concepteur de cube](../../2014/tutorials/media/l5-many-to-many-5.gif "Volets Filtre et Données du Concepteur de cube")</span><span class="sxs-lookup"><span data-stu-id="6d7b8-200">![Filter and Data panes of Cube Designer](../../2014/tutorials/media/l5-many-to-many-5.gif "Filter and Data panes of Cube Designer")</span></span>

## <a name="next-task-in-lesson"></a><span data-ttu-id="6d7b8-201">Tâche suivante de la leçon</span><span class="sxs-lookup"><span data-stu-id="6d7b8-201">Next Task in Lesson</span></span>
 [<span data-ttu-id="6d7b8-202">Définition de la granularité des dimensions dans un groupe de mesures</span><span class="sxs-lookup"><span data-stu-id="6d7b8-202">Defining Dimension Granularity within a Measure Group</span></span>](lesson-5-4-defining-dimension-granularity-within-a-measure-group.md)

## <a name="see-also"></a><span data-ttu-id="6d7b8-203">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6d7b8-203">See Also</span></span>
 <span data-ttu-id="6d7b8-204">[Utiliser des diagrammes dans le concepteur de vue de source de données &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [relations de dimension](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [définissent une relation plusieurs-à-plusieurs et des propriétés de relation plusieurs-à-plusieurs](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span><span class="sxs-lookup"><span data-stu-id="6d7b8-204">[Work with Diagrams in Data Source View Designer &#40;Analysis Services&#41;](multidimensional-models/work-with-diagrams-in-data-source-view-designer-analysis-services.md) [Dimension Relationships](multidimensional-models-olap-logical-cube-objects/dimension-relationships.md) [Define a Many-to-Many Relationship and Many-to-Many Relationship Properties](multidimensional-models/define-a-many-to-many-relationship-and-many-to-many-relationship-properties.md)</span></span>


