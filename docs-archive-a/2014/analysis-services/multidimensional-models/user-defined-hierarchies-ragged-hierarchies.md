---
title: Hiérarchies déséquilibrées | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- ragged hierarchies [Analysis Services]
ms.assetid: e40a5788-7ede-4b0f-93ab-46ca33d0cace
author: minewiskan
ms.author: owend
ms.openlocfilehash: 02cbb24b7ae80facf0ddbb1495fccc8f848df377
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87707928"
---
# <a name="ragged-hierarchies"></a><span data-ttu-id="05283-102">Hiérarchies déséquilibrées</span><span class="sxs-lookup"><span data-stu-id="05283-102">Ragged Hierarchies</span></span>
  <span data-ttu-id="05283-103">Une hiérarchie déséquilibrée est une hiérarchie définie par l'utilisateur qui a un nombre de niveaux impair.</span><span class="sxs-lookup"><span data-stu-id="05283-103">A ragged hierarchy is a user-defined hierarchy that has an uneven number of levels.</span></span> <span data-ttu-id="05283-104">Voici quelques exemples : un organigramme où un responsable hiérarchique a comme subordonnés directs des cadres du service et des non cadres, ou des hiérarchies avec des attributs Country-Region-City, où certaines villes n'ont pas d'état (State) ou de province (Province) parent, notamment Washington D.C., l’État de la Cité du Vatican ou New Dehli.</span><span class="sxs-lookup"><span data-stu-id="05283-104">Common examples include an organizational chart where a high-level manager has both departmental managers and non-managers as direct reports, or geographic hierarchies composed of Country-Region-City, where some cities lack a parent State or Province, such as Washington D.C., Vatican City, or New Delhi.</span></span>  
  
 <span data-ttu-id="05283-105">Pour la plupart des hiérarchies dans une dimension, chaque niveau a le même nombre de membres au-dessus de lui que tout autre membre au même niveau.</span><span class="sxs-lookup"><span data-stu-id="05283-105">For most hierarchies in a dimension, each level has the same number of members above it as any other member at the same level.</span></span> <span data-ttu-id="05283-106">Dans une hiérarchie déséquilibrée, en revanche, le membre parent logique d'au moins un membre ne figure pas dans le niveau immédiatement supérieur à ce membre.</span><span class="sxs-lookup"><span data-stu-id="05283-106">A ragged hierarchy is different in that the logical parent of at least one member is not in the level immediately above the member.</span></span> <span data-ttu-id="05283-107">En pareil cas, la hiérarchie descend à des niveaux différents pour des chemins d'extraction différents.</span><span class="sxs-lookup"><span data-stu-id="05283-107">When this occurs, the hierarchy descends to different levels for different drilldown paths.</span></span> <span data-ttu-id="05283-108">Dans une application cliente, cela peut rendre les chemins d'extraction inutilement compliqués.</span><span class="sxs-lookup"><span data-stu-id="05283-108">In a client application, this can make drilldown paths unnecessarily complicated.</span></span>  
  
 <span data-ttu-id="05283-109">Les applications clientes varient dans la manière de gérer une hiérarchie déséquilibrée.</span><span class="sxs-lookup"><span data-stu-id="05283-109">Client applications vary in how well they handle a ragged hierarchy.</span></span> <span data-ttu-id="05283-110">S'il existe des hiérarchies déséquilibrées dans votre modèle, vous devrez effectuer un travail supplémentaire pour obtenir le comportement de rendu attendu.</span><span class="sxs-lookup"><span data-stu-id="05283-110">If ragged hierarchies exist in your model, be prepared to do a little extra work to get the rendering behavior you expect.</span></span>  
  
 <span data-ttu-id="05283-111">Dans un premier temps, vérifiez la façon dont l'application cliente gère le chemin d'extraction.</span><span class="sxs-lookup"><span data-stu-id="05283-111">As a first step, check the client application to see how it handles the drilldown path.</span></span> <span data-ttu-id="05283-112">Par exemple, Excel répète les noms parents en tant qu'espaces réservés pour les valeurs manquantes.</span><span class="sxs-lookup"><span data-stu-id="05283-112">For example, Excel repeats the parent names as placeholders for missing values.</span></span> <span data-ttu-id="05283-113">Pour afficher ce comportement, créez un tableau croisé dynamique à l'aide de la dimension Sales Territory dans le modèle multidimensionnel Adventure Works.</span><span class="sxs-lookup"><span data-stu-id="05283-113">To see this behavior yourself, build a PivotTable using the Sales Territory dimension in the Adventure Works multidimensional model.</span></span> <span data-ttu-id="05283-114">Dans un tableau croisé dynamique avec les attributs Group, Country et Region pour Sales Territory, vous constaterez que les pays pour lesquels il manque une valeur de région obtiennent un espace réservé, dans ce cas une répétition du parent au-dessus (le nom du pays).</span><span class="sxs-lookup"><span data-stu-id="05283-114">In a PivotTable having the Sales Territory attributes Group, Country, and Region, you will see that countries missing a region value will get a placeholder, in this case a repeat of the parent above it (Country name).</span></span> <span data-ttu-id="05283-115">Ce comportement dérive de la propriété de chaîne de connexion MDX Compatibility=1 qui est fixe dans Excel.</span><span class="sxs-lookup"><span data-stu-id="05283-115">This behavior derives from the MDX Compatibility=1 connection string property that is fixed within Excel.</span></span> <span data-ttu-id="05283-116">Si le client ne fournit pas naturellement les comportements d'extraction dont vous avez besoin, vous pouvez définir les propriétés du modèle pour modifier au moins certains de ces comportements.</span><span class="sxs-lookup"><span data-stu-id="05283-116">If the client does not naturally provide the drill-down behaviors you are looking for, you can set properties in the model to change at least some of those behaviors.</span></span>  
  
 <span data-ttu-id="05283-117">Cette rubrique contient les sections suivantes :</span><span class="sxs-lookup"><span data-stu-id="05283-117">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="05283-118">Approches pour modifier la navigation d’exploration dans une hiérarchie déséquilibrée</span><span class="sxs-lookup"><span data-stu-id="05283-118">Approaches for modifying drilldown navigation in a ragged hierarchy</span></span>](#bkmk_approach)  
  
-   [<span data-ttu-id="05283-119">Définir HideMemberIf pour masquer les membres dans une hiérarchie normale</span><span class="sxs-lookup"><span data-stu-id="05283-119">Set HideMemberIf to hide members in a regular hierarchy</span></span>](#bkmk_Hide)  
  
-   [<span data-ttu-id="05283-120">Définir la compatibilité MDX pour déterminer le mode de représentation des espaces réservés dans les applications clientes</span><span class="sxs-lookup"><span data-stu-id="05283-120">Set MDX Compatibility to determine how placeholders are represented in client applications</span></span>](#bkmk_Mdx)  
  
##  <a name="approaches-for-modifying-drilldown-navigation-in-a-ragged-hierarchy"></a><a name="bkmk_approach"></a> <span data-ttu-id="05283-121">Approches pour modifier la navigation d'exploration dans une hiérarchie déséquilibrée</span><span class="sxs-lookup"><span data-stu-id="05283-121">Approaches for modifying drilldown navigation in a ragged hierarchy</span></span>  
 <span data-ttu-id="05283-122">La présence d'une hiérarchie déséquilibrée est un problème lorsque la navigation d'extraction ne retourne pas les valeurs attendues ou est perçue comme une utilisation maladroite.</span><span class="sxs-lookup"><span data-stu-id="05283-122">The presence of a ragged hierarchy becomes a problem when drilldown navigation does not return expected values or is perceived as awkward to use.</span></span> <span data-ttu-id="05283-123">Pour résoudre les problèmes de navigation qui résultent de hiérarchies déséquilibrées, considérez ces options :</span><span class="sxs-lookup"><span data-stu-id="05283-123">To fix navigation problems that result from ragged hierarchies, consider these options:</span></span>  
  
-   <span data-ttu-id="05283-124">Utilisez une hiérarchie régulière, mais définissez la propriété `HideMemberIf` sur chaque niveau afin de spécifier si un niveau manquant est visualisé par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="05283-124">Use a regular hierarchy but set the `HideMemberIf` property on each level to specify whether a missing level is visualized to the user.</span></span> <span data-ttu-id="05283-125">Lorsque vous définissez `HideMemberIf`, vous devez également définir `MDXCompatibility` dans la chaîne de connexion pour remplacer les comportements de navigation par défaut.</span><span class="sxs-lookup"><span data-stu-id="05283-125">When setting `HideMemberIf`, you should also set `MDXCompatibility` on the connection string to override default navigation behaviors.</span></span> <span data-ttu-id="05283-126">Les instructions de définition de ces propriétés sont fournies dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="05283-126">Instructions for setting these properties are in this topic.</span></span>  
  
-   <span data-ttu-id="05283-127">Créez une hiérarchie parent-enfant qui gère explicitement les membres de niveau.</span><span class="sxs-lookup"><span data-stu-id="05283-127">Create a parent-child hierarchy that explicitly manages the level members.</span></span> <span data-ttu-id="05283-128">Pour une présentation de la technique, consultez [Hiérarchie déséquilibrée dans SSAS (billet de blog)](http://dwbi1.wordpress.com/2011/03/30/ragged-hierarchy-in-ssas/).</span><span class="sxs-lookup"><span data-stu-id="05283-128">For an illustration of the technique, see [Ragged Hierarchy in SSAS (blog post)](http://dwbi1.wordpress.com/2011/03/30/ragged-hierarchy-in-ssas/).</span></span> <span data-ttu-id="05283-129">Pour plus d’informations dans la documentation en ligne de, consultez [hiérarchie parent-enfant](parent-child-dimension.md).</span><span class="sxs-lookup"><span data-stu-id="05283-129">For more information in Books Online, see [Parent-Child Hierarchy](parent-child-dimension.md).</span></span> <span data-ttu-id="05283-130">Les inconvénients liés à la création d'une hiérarchie parent-enfant résident dans le fait que vous ne pouvez en avoir qu'une seule par dimension, ce qui entraîne généralement une baisse des performances lors du calcul des agrégations pour les membres intermédiaires.</span><span class="sxs-lookup"><span data-stu-id="05283-130">Downsides to creating a parent-child hierarchy are that you can only have one per dimension, and you typically incur a performance penalty when calculating aggregations for intermediate members.</span></span>  
  
 <span data-ttu-id="05283-131">Si votre dimension contient plusieurs hiérarchies déséquilibrées, vous devez utiliser la première approche, en définissant `HideMemberIf`.</span><span class="sxs-lookup"><span data-stu-id="05283-131">If your dimension contains more than one ragged hierarchy, you should use the first approach, setting `HideMemberIf`.</span></span> <span data-ttu-id="05283-132">Les développeurs BI qui ont une expérience pratique des hiérarchies déséquilibrées vont plus loin et recommandent d'apporter des modifications supplémentaires aux tables de données physiques, en créant des tables distinctes pour chaque niveau.</span><span class="sxs-lookup"><span data-stu-id="05283-132">BI Developers with practical experience in working with ragged hierarchies go further in advocating for additional changes in the physical data tables, creating separate tables for each level.</span></span> <span data-ttu-id="05283-133">Pour plus d’informations sur cette technique, consultez [le cube financier SSAS de Martin Mason-part 1a-divisible Hierarchies (blog)](http://martinmason.wordpress.com/2012/03/03/the-ssas-financial-cubepart-1aragged-hierarchies-cont/) .</span><span class="sxs-lookup"><span data-stu-id="05283-133">See [Martin Mason's the SSAS Financial Cube-Part 1a-Ragged Hierarchies (blog)](http://martinmason.wordpress.com/2012/03/03/the-ssas-financial-cubepart-1aragged-hierarchies-cont/) for details about this technique.</span></span>  
  
##  <a name="set-hidememberif-to-hide-members-in-a-regular-hierarchy"></a><a name="bkmk_Hide"></a> <span data-ttu-id="05283-134">Définition de HideMemberIf pour masquer les membres dans une hiérarchie normale</span><span class="sxs-lookup"><span data-stu-id="05283-134">Set HideMemberIf to hide members in a regular hierarchy</span></span>  
 <span data-ttu-id="05283-135">Dans la table d'une dimension déséquilibrée, les membres manquants peuvent être représentés de différentes manières.</span><span class="sxs-lookup"><span data-stu-id="05283-135">In a ragged dimension's table, the logically missing members can be represented in different ways.</span></span> <span data-ttu-id="05283-136">Les espaces réservés des cellules de table peuvent être des valeurs NULL ou des chaînes vides, ou bien la même valeur que leurs parents.</span><span class="sxs-lookup"><span data-stu-id="05283-136">The table cells can contain nulls or empty strings, or they can contain the same value as their parent to serve as a placeholder.</span></span> <span data-ttu-id="05283-137">La représentation des espaces réservés est déterminée par l'état d'espace réservé de membres enfants, conformément à la propriété `HideMemberIf`, et par la propriété de chaîne de connexion `MDX Compatibility` pour l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="05283-137">The representation of placeholders is determined by the placeholder status of child members, as determined by the `HideMemberIf` property, and the `MDX Compatibility` connection string property for the client application.</span></span>  
  
 <span data-ttu-id="05283-138">Pour les applications clientes qui autorisent l'affichage de hiérarchies déséquilibrées, vous pouvez utiliser ces propriétés de façon à masquer les membres manquants.</span><span class="sxs-lookup"><span data-stu-id="05283-138">For client applications that support the display of ragged hierarchies, you can use these properties to hide logically missing members.</span></span>  
  
1.  <span data-ttu-id="05283-139">Dans SSDT, double-cliquez sur une dimension pour l'ouvrir dans le Concepteur de dimensions.</span><span class="sxs-lookup"><span data-stu-id="05283-139">In SSDT, double-click a dimension to open it in Dimension Designer.</span></span> <span data-ttu-id="05283-140">Le premier onglet, Structure de dimension, affiche les hiérarchies d'attribut dans le volet Hiérarchies.</span><span class="sxs-lookup"><span data-stu-id="05283-140">The first tab, Dimension Structure, shows attribute hierarchies in the Hierarchies pane.</span></span>  
  
2.  <span data-ttu-id="05283-141">Cliquez avec le bouton droit sur un membre de la hiérarchie et choisissez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="05283-141">Right-click a member within the hierarchy and select **Properties**.</span></span> <span data-ttu-id="05283-142">Définissez `HideMemberIf` sur l'une des valeurs décrites ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="05283-142">Set `HideMemberIf` to one of the values described below.</span></span>  
  
    |<span data-ttu-id="05283-143">Paramètre de HideMemberIf</span><span class="sxs-lookup"><span data-stu-id="05283-143">HideMemberIf Setting</span></span>|<span data-ttu-id="05283-144">Description</span><span class="sxs-lookup"><span data-stu-id="05283-144">Description</span></span>|  
    |--------------------------|-----------------|  
    |`Never`|<span data-ttu-id="05283-145">Les membres de ce niveau ne sont jamais masqués.</span><span class="sxs-lookup"><span data-stu-id="05283-145">Level members are never hidden.</span></span> <span data-ttu-id="05283-146">Valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="05283-146">This is the default value.</span></span>|  
    |<span data-ttu-id="05283-147">**OnlyChildWithNoName**</span><span class="sxs-lookup"><span data-stu-id="05283-147">**OnlyChildWithNoName**</span></span>|<span data-ttu-id="05283-148">Un membre de ce niveau est masqué quand il est le seul enfant de son parent et qu'il a pour nom la valeur NULL ou une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="05283-148">A level member is hidden when it is the only child of its parent and its name is null or an empty string.</span></span>|  
    |<span data-ttu-id="05283-149">**OnlyChildWithParentName**</span><span class="sxs-lookup"><span data-stu-id="05283-149">**OnlyChildWithParentName**</span></span>|<span data-ttu-id="05283-150">Un membre de ce niveau est masqué quand il est le seul enfant de son parent et qu'il porte le même nom que son parent.</span><span class="sxs-lookup"><span data-stu-id="05283-150">A level member is hidden when it is the only child of its parent and its name is the same as the name of its parent.</span></span>|  
    |<span data-ttu-id="05283-151">**NoName**</span><span class="sxs-lookup"><span data-stu-id="05283-151">**NoName**</span></span>|<span data-ttu-id="05283-152">Un membre de ce niveau est masqué lorsque son nom est vide.</span><span class="sxs-lookup"><span data-stu-id="05283-152">A level member is hidden when its name is empty.</span></span>|  
    |<span data-ttu-id="05283-153">**ParentName**</span><span class="sxs-lookup"><span data-stu-id="05283-153">**ParentName**</span></span>|<span data-ttu-id="05283-154">Un membre de ce niveau est masqué quand son nom est identique à celui de son parent.</span><span class="sxs-lookup"><span data-stu-id="05283-154">A level member is hidden when its name is identical to that of its parent.</span></span>|  
  
##  <a name="set-mdx-compatibility-to-determine-how-placeholders-are-represented-in-client-applications"></a><a name="bkmk_Mdx"></a><span data-ttu-id="05283-155">Définir la compatibilité MDX pour déterminer le mode de représentation des espaces réservés dans les applications clientes</span><span class="sxs-lookup"><span data-stu-id="05283-155">Set MDX Compatibility to determine how placeholders are represented in client applications</span></span>  
 <span data-ttu-id="05283-156">Après avoir défini `HideMemberIf` sur un niveau hiérarchique, vous devez également définir la propriété `MDX Compatibility` dans la chaîne de connexion envoyée depuis l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="05283-156">After setting `HideMemberIf` on a hierarchy level, you should also set the `MDX Compatibility` property in the connection string sent from the client application.</span></span> <span data-ttu-id="05283-157">Le paramètre `MDX Compatibility` détermine si `HideMemberIf` est utilisé.</span><span class="sxs-lookup"><span data-stu-id="05283-157">The `MDX Compatibility` setting determines whether the `HideMemberIf` is used.</span></span>  
  
|<span data-ttu-id="05283-158">Paramètre de compatibilité MDX</span><span class="sxs-lookup"><span data-stu-id="05283-158">MDX Compatibility Setting</span></span>|<span data-ttu-id="05283-159">Description</span><span class="sxs-lookup"><span data-stu-id="05283-159">Description</span></span>|<span data-ttu-id="05283-160">Usage</span><span class="sxs-lookup"><span data-stu-id="05283-160">Usage</span></span>|  
|-------------------------------|-----------------|-----------|  
|<span data-ttu-id="05283-161">**1**</span><span class="sxs-lookup"><span data-stu-id="05283-161">**1**</span></span>|<span data-ttu-id="05283-162">Afficher une valeur d'espace réservé.</span><span class="sxs-lookup"><span data-stu-id="05283-162">Show a placeholder value.</span></span>|<span data-ttu-id="05283-163">Il s'agit de la valeur par défaut utilisée par Excel, SSDT et SSMS.</span><span class="sxs-lookup"><span data-stu-id="05283-163">This is the default used by Excel, SSDT, and SSMS.</span></span> <span data-ttu-id="05283-164">Elle indique au serveur de retourner les valeurs d'espace réservé lors de l'exploration de niveaux vides dans une hiérarchie déséquilibrée.</span><span class="sxs-lookup"><span data-stu-id="05283-164">It instructs the server to return placeholder values when drilling down empty levels in a ragged hierarchy.</span></span> <span data-ttu-id="05283-165">Si vous cliquez sur la valeur d'espace réservé, vous pouvez continuer à explorer le bas de la hiérarchie pour obtenir les nœuds enfants (feuille).</span><span class="sxs-lookup"><span data-stu-id="05283-165">If you click the placeholder value, you can continue down to get to the child (leaf) nodes.</span></span><br /><br /> <span data-ttu-id="05283-166">Excel détient la chaîne de connexion utilisée pour la connexion à Analysis Services et définit toujours `MDX Compatibility` sur 1 pour chaque nouvelle connexion.</span><span class="sxs-lookup"><span data-stu-id="05283-166">Excel owns the connection string used to connect to Analysis Services, and it always sets `MDX Compatibility` to 1 on each new connection.</span></span> <span data-ttu-id="05283-167">Ce comportement préserve la compatibilité descendante.</span><span class="sxs-lookup"><span data-stu-id="05283-167">This behavior preserves backward compatibility.</span></span>|  
|<span data-ttu-id="05283-168">**2**</span><span class="sxs-lookup"><span data-stu-id="05283-168">**2**</span></span>|<span data-ttu-id="05283-169">Masquez une valeur d'espace réservé (valeur Null ou dupliquée du niveau parent), mais affichez d'autres niveaux et nœuds avec des valeurs pertinentes.</span><span class="sxs-lookup"><span data-stu-id="05283-169">Hide a placeholder value (either a null value or a duplicate of the parent level), but show other levels and nodes having relevant values.</span></span>|<span data-ttu-id="05283-170">`MDX Compatibility`=2 est généralement considéré comme le paramètre privilégié pour les hiérarchies déséquilibrées.</span><span class="sxs-lookup"><span data-stu-id="05283-170">`MDX Compatibility`=2 is typically viewed as the preferred setting in terms of ragged hierarchies.</span></span> <span data-ttu-id="05283-171">Un rapport [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] et certaines applications clientes tierces peuvent rendre ce paramètre persistant.</span><span class="sxs-lookup"><span data-stu-id="05283-171">A [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] report and some third-party client applications can persist this setting.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="05283-172">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="05283-172">See Also</span></span>  
 <span data-ttu-id="05283-173">[Créer des hiérarchies définies par l’utilisateur](user-defined-hierarchies-create.md) </span><span class="sxs-lookup"><span data-stu-id="05283-173">[Create User-Defined Hierarchies](user-defined-hierarchies-create.md) </span></span>  
 <span data-ttu-id="05283-174">[Hiérarchies utilisateur](../multidimensional-models-olap-logical-dimension-objects/user-hierarchies.md) </span><span class="sxs-lookup"><span data-stu-id="05283-174">[User Hierarchies](../multidimensional-models-olap-logical-dimension-objects/user-hierarchies.md) </span></span>  
 <span data-ttu-id="05283-175">[Hiérarchie parent-enfant](parent-child-dimension.md) </span><span class="sxs-lookup"><span data-stu-id="05283-175">[Parent-Child Hierarchy](parent-child-dimension.md) </span></span>  
 [<span data-ttu-id="05283-176">Propriétés des chaînes de connexion &#40;Analysis Services&#41;</span><span class="sxs-lookup"><span data-stu-id="05283-176">Connection String Properties &#40;Analysis Services&#41;</span></span>](https://docs.microsoft.com/analysis-services/instances/connection-string-properties-analysis-services)  
  
  
