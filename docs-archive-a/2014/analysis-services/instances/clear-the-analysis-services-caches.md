---
title: Effacer les caches de Analysis Services | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 6bf66fdd-6a03-4cea-b7e2-eb676ff276ff
author: minewiskan
ms.author: owend
ms.openlocfilehash: e4890dd322406dcf48bc6b8eca89f292cfe132a3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87697323"
---
# <a name="clear-the-analysis-services-caches"></a><span data-ttu-id="9e19c-102">Effacer les caches Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9e19c-102">Clear the Analysis Services Caches</span></span>
  <span data-ttu-id="9e19c-103">Analysis Services met en cache des données pour optimiser les performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="9e19c-103">Analysis Services caches data to boost query performance.</span></span> <span data-ttu-id="9e19c-104">Cette rubrique fournit des recommandations pour l'utilisation de la commande XMLA ClearCache en vue d'effacer des caches qui ont été créés en réponse à une requête MDX.</span><span class="sxs-lookup"><span data-stu-id="9e19c-104">This topic provides recommendations for using the XMLA ClearCache command to clear caches that were created in response to an MDX query.</span></span> <span data-ttu-id="9e19c-105">Les effets de l'exécution de la commande ClearCache varient selon que vous utilisez un modèle tabulaire ou multidimensionnel.</span><span class="sxs-lookup"><span data-stu-id="9e19c-105">The effects of running ClearCache vary depending on whether you are using a tabular or multidimensional model.</span></span>  
  
 <span data-ttu-id="9e19c-106">**À quel moment effacer le cache pour des modèles MDX**</span><span class="sxs-lookup"><span data-stu-id="9e19c-106">**When to clear the cache for multidimensional models**</span></span>  
  
 <span data-ttu-id="9e19c-107">Pour les bases de données multidimensionnelles, Analysis Services génère des caches dans le moteur de formule en évaluant un calcul, et dans le moteur de stockage pour les résultats des requêtes de dimension et des requêtes de groupe de mesures.</span><span class="sxs-lookup"><span data-stu-id="9e19c-107">For multidimensional databases, Analysis Services builds caches in the formula engine when evaluating a calculation, and in the storage engine for the results of dimension queries and measure group queries.</span></span> <span data-ttu-id="9e19c-108">Les requêtes de groupe de mesures se produisent lorsque le moteur de formule a besoin de données de mesure pour une coordonnée de cellule ou un sous-cube.</span><span class="sxs-lookup"><span data-stu-id="9e19c-108">Measure group queries occur when the formula engine needs measure data for a cell coordinate or subcube.</span></span> <span data-ttu-id="9e19c-109">Les requêtes de dimension se produisent en interrogeant des hiérarchies non naturelles et en appliquant des fonctionnalités autoexist.</span><span class="sxs-lookup"><span data-stu-id="9e19c-109">Dimension queries occur when querying unnatural hierarchies and when applying autoexists.</span></span>  
  
 <span data-ttu-id="9e19c-110">L'effacement du cache est recommandé lors du test des performances.</span><span class="sxs-lookup"><span data-stu-id="9e19c-110">Clearing the cache is recommended when conducting performance testing.</span></span> <span data-ttu-id="9e19c-111">En effaçant le cache entre les tests, vous garantissez que la mise en cache ne biaise aucun résultat de test qui mesure l'impact d'une modification de conception de requête.</span><span class="sxs-lookup"><span data-stu-id="9e19c-111">By clearing the cache between test runs, you ensure that caching does not skew any test results that measure the impact of a query design change.</span></span>  
  
 <span data-ttu-id="9e19c-112">**À quel moment effacer le cache pour des modèles tabulaires**</span><span class="sxs-lookup"><span data-stu-id="9e19c-112">**When to clear the cache for tabular models**</span></span>  
  
 <span data-ttu-id="9e19c-113">Les modèles tabulaires sont généralement stockés en mémoire, où les agrégations et d'autres calculs sont effectués au moment de l'exécution d'une requête.</span><span class="sxs-lookup"><span data-stu-id="9e19c-113">Tabular models are generally stored in memory, where aggregations and other calculations are performed at the time a query is executed.</span></span> <span data-ttu-id="9e19c-114">Ainsi, la commande ClearCache a un effet limité sur des modèles tabulaires.</span><span class="sxs-lookup"><span data-stu-id="9e19c-114">As such, the ClearCache command has a limited effect on tabular models.</span></span> <span data-ttu-id="9e19c-115">Pour un modèle tabulaire, des données peuvent être ajoutées dans les caches Analysis Services, si des requêtes MDX sont exécutées sur celui-ci.</span><span class="sxs-lookup"><span data-stu-id="9e19c-115">For a tabular model, data may be added to the Analysis Services caches if MDX queries are run against it.</span></span> <span data-ttu-id="9e19c-116">En particulier, les mesures DAX référencées par des opérations MDX et autoexist peuvent mettre en cache des résultats dans le cache de formule et le cache de dimension, respectivement.</span><span class="sxs-lookup"><span data-stu-id="9e19c-116">In particular, DAX measures referenced by MDX and autoexists operations can cache results in the formula cache and dimension cache respectively.</span></span> <span data-ttu-id="9e19c-117">Notez toutefois, que ces hiérarchies non naturelles et les requêtes de groupe de mesures ne mettent pas en cache des résultats dans le moteur de stockage.</span><span class="sxs-lookup"><span data-stu-id="9e19c-117">Note however, that unnatural hierarchies and measure group queries do not cache results in the storage engine.</span></span> <span data-ttu-id="9e19c-118">De plus, il est important de noter que les requêtes DAX ne mettent pas en cache des résultats dans le moteur de formule et le moteur de stockage.</span><span class="sxs-lookup"><span data-stu-id="9e19c-118">Additionally, it is important to recognize that DAX queries do not cache results in the formula and storage engine.</span></span> <span data-ttu-id="9e19c-119">Dans la mesure où les caches existent en raison de requêtes MDX, l'exécution de la commande ClearCache sur un modèle tabulaire invalidera des données en mémoire cache du système.</span><span class="sxs-lookup"><span data-stu-id="9e19c-119">To the extent that caches exist as a result of MDX queries, running ClearCache against a tabular model will invalidate any cached data from the system.</span></span>  
  
 <span data-ttu-id="9e19c-120">L'exécution de la commande ClearCache efface également les caches en mémoire dans le moteur d'analyse en mémoire xVelocity (VertiPaq).</span><span class="sxs-lookup"><span data-stu-id="9e19c-120">Running ClearCache will also clear in-memory caches in the xVelocity in-memory analytics engine (VertiPaq).</span></span> <span data-ttu-id="9e19c-121">Le moteur xVelocity gère un petit ensemble de résultats mis en cache.</span><span class="sxs-lookup"><span data-stu-id="9e19c-121">The xVelocity engine maintains a small set of cached results.</span></span> <span data-ttu-id="9e19c-122">L'exécution de la commande ClearCache invalidera ces caches dans le moteur xVelocity.</span><span class="sxs-lookup"><span data-stu-id="9e19c-122">Running ClearCache will invalidate these caches in the xVelocity engine.</span></span>  
  
 <span data-ttu-id="9e19c-123">Enfin, l'exécution de la commande ClearCache supprimera également les données résiduelles conservées dans la mémoire lorsqu'un modèle tabulaire est reconfiguré pour le mode `DirectQuery`.</span><span class="sxs-lookup"><span data-stu-id="9e19c-123">Finally, running ClearCache will also remove residual data that is left in memory when a tabular model is reconfigured for `DirectQuery` mode.</span></span> <span data-ttu-id="9e19c-124">Cela est particulièrement important si le modèle contient des données sensibles qui sont soumises à des contrôles étroits.</span><span class="sxs-lookup"><span data-stu-id="9e19c-124">This is particularly important if the model contains sensitive data that is subject to tight controls.</span></span> <span data-ttu-id="9e19c-125">Dans ce cas, l'exécution de la commande ClearCache est une mesure de précaution que vous pouvez prendre pour garantir que des données sensibles existent uniquement à l'emplacement prévu.</span><span class="sxs-lookup"><span data-stu-id="9e19c-125">In this case, running ClearCache is a precautionary action that you can take to ensure that sensitive data exists only where you expect it to be.</span></span> <span data-ttu-id="9e19c-126">L'effacement manuel du cache est nécessaire si vous utilisez [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] pour déployer le modèle et pour modifier le mode de requête.</span><span class="sxs-lookup"><span data-stu-id="9e19c-126">Clearing the cache manually is necessary if you are using [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] to deploy the model and change the query mode.</span></span> <span data-ttu-id="9e19c-127">À l'inverse, l'utilisation de [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] pour spécifier `DirectQuery` sur le modèle et les partitions permet d'effacer automatiquement le cache lorsque vous basculez le modèle pour utiliser ce mode de requête.</span><span class="sxs-lookup"><span data-stu-id="9e19c-127">In contrast, using [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] to specify `DirectQuery` on the model and partitions will automatically clear the cache when you switch the model to use that query mode.</span></span>  
  
 <span data-ttu-id="9e19c-128">Comparées aux recommandations pour effacer les caches de modèles multidimensionnels lors du test des performances, il n'y a aucune recommandation étendue pour effacer les caches de modèles tabulaires.</span><span class="sxs-lookup"><span data-stu-id="9e19c-128">Compared with recommendations for clearing multidimensional model caches during performance testing, there is no broad recommendation for clearing tabular model caches.</span></span> <span data-ttu-id="9e19c-129">Si vous ne gérer pas le déploiement d'un modèle tabulaire qui contient des données sensibles, il n'y a aucune tâche administrative spécifique qui demande d'effacer le cache.</span><span class="sxs-lookup"><span data-stu-id="9e19c-129">If you are not managing the deployment of a tabular model that contains sensitive data, there is no specific administrative task that calls for clearing the cache.</span></span>  
  
## <a name="clear-the-cache-for-analysis-services-models"></a><span data-ttu-id="9e19c-130">Effacer le cache pour des modèles Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9e19c-130">Clear the cache for Analysis Services models</span></span>  
 <span data-ttu-id="9e19c-131">Pour effacer le cache, utilisez XMLA et [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9e19c-131">To clear the cache, use XMLA and [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="9e19c-132">Vous pouvez effacer le cache au niveau de la base de données, du cube, de la dimension, de la table ou du groupe de mesures.</span><span class="sxs-lookup"><span data-stu-id="9e19c-132">You can clear the cache at the database, cube, dimension or table, or measure group level.</span></span> <span data-ttu-id="9e19c-133">Les étapes suivantes pour effacer le cache au niveau de la base de données appliquent aux modèles MDX et aux modèles tabulaires.</span><span class="sxs-lookup"><span data-stu-id="9e19c-133">The following steps for clearing the cache at the database level apply to both multidimensional models and tabular models.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9e19c-134">Un test rigoureux des performances peut nécessiter une approche plus complète pour effacer le cache.</span><span class="sxs-lookup"><span data-stu-id="9e19c-134">Rigorous performance testing might require a more comprehensive approach to clearing the cache.</span></span> <span data-ttu-id="9e19c-135">Pour savoir comment vider les caches Analysis Services et du système de fichiers, consultez la section sur l'effacement des caches dans le [Guide des opérations SQL Server 2008 R2 Analysis Services](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span><span class="sxs-lookup"><span data-stu-id="9e19c-135">For instructions on how to flush Analysis Services and file system caches, see the section on clearing caches in the [SQL Server 2008 R2 Analysis Services Operations Guide](https://go.microsoft.com/fwlink/?linkID=https://go.microsoft.com/fwlink/?LinkID=225539).</span></span>  
  
 <span data-ttu-id="9e19c-136">Pour les modèles MDX et tabulaires, l'effacement de certains de ces caches peut être un processus en deux étapes qui consiste à invalider le cache lorsque la commande ClearCache s'exécute, puis à vider le cache lors de la réception de la requête suivante.</span><span class="sxs-lookup"><span data-stu-id="9e19c-136">For both multidimensional and tabular models, clearing some of these caches can be a two-step process that consists of invalidating the cache when ClearCache executes, followed by emptying the cache when the next query is received.</span></span> <span data-ttu-id="9e19c-137">Une réduction de la consommation de mémoire n'est évidente qu'après que le cache a été réellement vidé.</span><span class="sxs-lookup"><span data-stu-id="9e19c-137">A reduction in memory consumption will be evident only after the cache is actually emptied.</span></span>  
  
 <span data-ttu-id="9e19c-138">L'effacement du cache requiert la fourniture d'un identificateur d'objet à l'instruction `ClearCache` dans une requête XMLA.</span><span class="sxs-lookup"><span data-stu-id="9e19c-138">Clearing the cache requires that you provide an object identifier to the `ClearCache` statement in an XMLA query.</span></span> <span data-ttu-id="9e19c-139">La première étape de cette rubrique explique comment obtenir un identificateur d'objet.</span><span class="sxs-lookup"><span data-stu-id="9e19c-139">The first step in this topic explains how to get an object identifier.</span></span>  
  
#### <a name="step-1-get-the-object-identifier"></a><span data-ttu-id="9e19c-140">Étape 1 : obtenir l'identificateur d'objet</span><span class="sxs-lookup"><span data-stu-id="9e19c-140">Step 1: Get the object identifier</span></span>  
  
1.  <span data-ttu-id="9e19c-141">Dans [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], cliquez avec le bouton droit sur un objet, sélectionnez **Propriétés**et copiez la valeur de la propriété ID dans le volet **Propriétés** .</span><span class="sxs-lookup"><span data-stu-id="9e19c-141">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click an object, select **Properties**, and copy the value from the ID property in the **Properties** pane.</span></span> <span data-ttu-id="9e19c-142">Cette approche fonctionne pour la base de données, le cube, la dimension ou la table.</span><span class="sxs-lookup"><span data-stu-id="9e19c-142">This approach works for the database, cube, dimension, or table.</span></span>  
  
2.  <span data-ttu-id="9e19c-143">Pour obtenir l’ID d’un groupe de mesures, cliquez avec le bouton droit sur le groupe de mesures et sélectionnez **Générer un script du groupe de mesures en tant que**.</span><span class="sxs-lookup"><span data-stu-id="9e19c-143">To get the measure group ID, right-click the measure group and select **Script Measure Group As**.</span></span> <span data-ttu-id="9e19c-144">Choisissez **Create** ou **Alter**, et envoyez la requête dans une fenêtre.</span><span class="sxs-lookup"><span data-stu-id="9e19c-144">Choose either **Create** or **Alter**, and send the query to a window.</span></span> <span data-ttu-id="9e19c-145">L'ID du groupe de mesures sera visible dans la définition de l'objet.</span><span class="sxs-lookup"><span data-stu-id="9e19c-145">The ID of the measure group will be visible in the object definition.</span></span> <span data-ttu-id="9e19c-146">Copiez l'ID de la définition d'objet.</span><span class="sxs-lookup"><span data-stu-id="9e19c-146">Copy the ID of the object definition.</span></span>  
  
#### <a name="step-2-run-the-query"></a><span data-ttu-id="9e19c-147">Étape 2 : exécuter la requête</span><span class="sxs-lookup"><span data-stu-id="9e19c-147">Step 2: Run the query</span></span>  
  
1.  <span data-ttu-id="9e19c-148">Dans [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], cliquez avec le bouton droit sur une base de données, pointez sur **Nouvelle requête**, puis sélectionnez **XMLA**.</span><span class="sxs-lookup"><span data-stu-id="9e19c-148">In [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], right-click a database, point to **New Query**, and select **XMLA**.</span></span>  
  
2.  <span data-ttu-id="9e19c-149">Copiez l'exemple de code suivant dans une fenêtre de requête XMLA.</span><span class="sxs-lookup"><span data-stu-id="9e19c-149">Copy the following code example into the XMLA query window.</span></span> <span data-ttu-id="9e19c-150">Remplacez `DatabaseID` par l'ID de la base de données sur la connexion actuelle.</span><span class="sxs-lookup"><span data-stu-id="9e19c-150">Change `DatabaseID` to the ID of the database on the current connection.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID> Adventure Works DW Multidimensional</DatabaseID>  
      </Object>  
    </ClearCache>  
  
    ```  
  
     <span data-ttu-id="9e19c-151">Ou bien, vous pouvez spécifier un chemin d'accès d'un objet enfant, tel qu'un groupe de mesures, pour effacer le cache uniquement pour cet objet.</span><span class="sxs-lookup"><span data-stu-id="9e19c-151">Alternatively, you can specify a path of a child object, such as a measure group, to clear the cache for just that object.</span></span>  
  
    ```  
    <ClearCache xmlns="https://schemas.microsoft.com/analysisservices/2003/engine">  
      <Object>  
        <DatabaseID>Adventure Works DW Multidimensional</DatabaseID>  
            <CubeID>Adventure Works</CubeID>  
            <MeasureGroupID>Fact Currency Rate</MeasureGroupID>  
      </Object>  
    </ClearCache>  
    ```  
  
3.  <span data-ttu-id="9e19c-152">Appuyez sur F5 pour exécuter la requête.</span><span class="sxs-lookup"><span data-stu-id="9e19c-152">Press F5 to execute the query.</span></span> <span data-ttu-id="9e19c-153">Le résultat suivant s’affiche :</span><span class="sxs-lookup"><span data-stu-id="9e19c-153">You should see the following result:</span></span>  
  
    ```  
    <return xmlns="urn:schemas-microsoft-com:xml-analysis">  
      <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty" />  
    </return>  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="9e19c-154">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="9e19c-154">See Also</span></span>  
 <span data-ttu-id="9e19c-155">[Écrire des scripts pour les tâches d’administration dans Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="9e19c-155">[Script Administrative Tasks in Analysis Services](../script-administrative-tasks-in-analysis-services.md) </span></span>  
 [<span data-ttu-id="9e19c-156">Monitor an Analysis Services Instance</span><span class="sxs-lookup"><span data-stu-id="9e19c-156">Monitor an Analysis Services Instance</span></span>](monitor-an-analysis-services-instance.md)  
  
  
