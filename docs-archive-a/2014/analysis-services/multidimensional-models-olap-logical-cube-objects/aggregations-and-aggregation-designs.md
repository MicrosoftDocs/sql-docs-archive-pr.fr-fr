---
title: Agrégations et conceptions d’agrégation | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- aggregations [Analysis Services], about aggregations
- storage [Analysis Services], aggregations
- Storage Design Wizard
- data summary [Analysis Services]
- data storage [Analysis Services]
- storing data [Analysis Services], aggregations
- aggregations [Analysis Services]
ms.assetid: 35bd8589-39fa-4e0b-b28f-5a07d70da0a2
author: minewiskan
ms.author: owend
ms.openlocfilehash: c56e80482ef71e8041f8518ae9901691a1809990
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87700416"
---
# <a name="aggregations-and-aggregation-designs"></a><span data-ttu-id="1209a-102">Agrégations et conceptions d'agrégation</span><span class="sxs-lookup"><span data-stu-id="1209a-102">Aggregations and Aggregation Designs</span></span>
  <span data-ttu-id="1209a-103">Un objet <xref:Microsoft.AnalysisServices.AggregationDesign> définit un ensemble de définitions d'agrégation qu'il est possible de partager sur plusieurs partitions.</span><span class="sxs-lookup"><span data-stu-id="1209a-103">An <xref:Microsoft.AnalysisServices.AggregationDesign> object defines a set of aggregation definitions that can be shared across multiple partitions.</span></span>  
  
 <span data-ttu-id="1209a-104">Un objet <xref:Microsoft.AnalysisServices.Aggregation> représente le résumé des données d'un groupe de mesures à une certaine granularité des dimensions.</span><span class="sxs-lookup"><span data-stu-id="1209a-104">An <xref:Microsoft.AnalysisServices.Aggregation> object represents the summarization of measure group data at certain granularity of the dimensions.</span></span>  
  
 <span data-ttu-id="1209a-105">Un objet <xref:Microsoft.AnalysisServices.Aggregation> simple est composé des informations de base et des dimensions.</span><span class="sxs-lookup"><span data-stu-id="1209a-105">A simple <xref:Microsoft.AnalysisServices.Aggregation> object is composed of: basic information and dimensions.</span></span> <span data-ttu-id="1209a-106">Les informations de base incluent le nom de l'agrégation, l'ID, les annotations et une description.</span><span class="sxs-lookup"><span data-stu-id="1209a-106">Basic information includes the name of the aggregation, the ID, annotations, and a description.</span></span> <span data-ttu-id="1209a-107">Les dimensions sont une collection d'objets <xref:Microsoft.AnalysisServices.AggregationDimension> qui contiennent la liste des attributs de granularité de la dimension.</span><span class="sxs-lookup"><span data-stu-id="1209a-107">The dimensions are a collection of <xref:Microsoft.AnalysisServices.AggregationDimension> objects that contain the list of granularity attributes for the dimension.</span></span>  
  
 <span data-ttu-id="1209a-108">Les agrégations sont des données de synthèse précalculées à partir de cellules feuilles.</span><span class="sxs-lookup"><span data-stu-id="1209a-108">Aggregations are precalculated summaries of data from leaf cells.</span></span> <span data-ttu-id="1209a-109">Elles améliorent les temps de réponse aux requêtes en préparant les réponses avant que les questions ne soient posées.</span><span class="sxs-lookup"><span data-stu-id="1209a-109">Aggregations improve query response time by preparing the answers before the questions are asked.</span></span> <span data-ttu-id="1209a-110">Par exemple, lorsqu'une table de faits du Data Warehouse contient des centaines de milliers de lignes, une requête demandant le total des ventes hebdomadaires pour une ligne de produit particulière peut prendre beaucoup de temps si toutes les lignes de la table de faits doivent être analysées et additionnées au moment de la requête pour calculer la réponse.</span><span class="sxs-lookup"><span data-stu-id="1209a-110">For example, when a data warehouse fact table contains hundreds of thousands of rows, a query requesting the weekly sales totals for a particular product line can take a long time to answer if all the rows in the fact table have to be scanned and summed at query time to compute the answer.</span></span> <span data-ttu-id="1209a-111">En revanche, la réponse peut être presque immédiate si les données de synthèse fournies en réponse à cette requête ont été précalculées.</span><span class="sxs-lookup"><span data-stu-id="1209a-111">However, the response can be almost immediate if the summarization data to answer this query has been precalculated.</span></span> <span data-ttu-id="1209a-112">Dans la technologie OLAP, ce calcul préalable des données de synthèse a lieu durant le traitement et constitue le facteur essentiel pour offrir des réponses rapides.</span><span class="sxs-lookup"><span data-stu-id="1209a-112">This precalculation of summary data occurs during processing and is the foundation for the rapid response times of OLAP technology.</span></span>  
  
 <span data-ttu-id="1209a-113">La technologie OLAP a recours à des cubes pour organiser les données de synthèse en structures multidimensionnelles.</span><span class="sxs-lookup"><span data-stu-id="1209a-113">Cubes are the way that OLAP technology organizes summary data into multidimensional structures.</span></span> <span data-ttu-id="1209a-114">Les dimensions et leurs hiérarchies d'attributs reflètent les requêtes qu'il est possible de lancer sur un cube.</span><span class="sxs-lookup"><span data-stu-id="1209a-114">Dimensions and their hierarchies of attributes reflect the queries that can be asked of the cube.</span></span> <span data-ttu-id="1209a-115">Dans la structure multidimensionnelle du cube, les agrégations sont stockées dans des cellules définies par des coordonnées spécifiées par les dimensions.</span><span class="sxs-lookup"><span data-stu-id="1209a-115">Aggregations are stored in the multidimensional structure in cells at coordinates specified by the dimensions.</span></span> <span data-ttu-id="1209a-116">Par exemple, la question « Quelles furent les ventes du produit X en 1998 pour la région Nord-Ouest? »</span><span class="sxs-lookup"><span data-stu-id="1209a-116">For example, the question "What were the sales of product X in 1998 for the Northwest region?"</span></span> <span data-ttu-id="1209a-117">implique trois dimensions (produit, temps et géographie) et une mesure (ventes).</span><span class="sxs-lookup"><span data-stu-id="1209a-117">involves three dimensions (Product, Time, and Geography) and one measure (Sales).</span></span> <span data-ttu-id="1209a-118">La valeur figurant dans la cellule du cube qui se trouve aux coordonnées spécifiées (produit X, 1998, Nord-Ouest) correspond à la réponse. Il s'agit d'une valeur numérique unique.</span><span class="sxs-lookup"><span data-stu-id="1209a-118">The value of the cell in the cube at the specified coordinates (product X, 1998, Northwest) is the answer, a single numeric value.</span></span>  
  
 <span data-ttu-id="1209a-119">D'autres types de questions peuvent retourner plusieurs valeurs.</span><span class="sxs-lookup"><span data-stu-id="1209a-119">Other questions may return multiple values.</span></span> <span data-ttu-id="1209a-120">Par exemple « Quelles furent les ventes d'équipements par trimestre et par région pour l'année 1998 ? »</span><span class="sxs-lookup"><span data-stu-id="1209a-120">For example, "How much were the sales of hardware products by quarter by region for 1998?"</span></span> <span data-ttu-id="1209a-121">Les requêtes de ce type renvoient des ensembles de cellules dont les coordonnées répondent aux critères spécifiés.</span><span class="sxs-lookup"><span data-stu-id="1209a-121">Such queries return sets of cells from the coordinates that satisfy the specified conditions.</span></span> <span data-ttu-id="1209a-122">Le nombre de cellules renvoyées par cette requête dépend du nombre d'éléments au niveau Équipement de la dimension Produit, des quatre trimestres de l'année 1998 et du nombre de régions dans la dimension Géographie.</span><span class="sxs-lookup"><span data-stu-id="1209a-122">The number of cells returned by the query depends on the number of items in the Hardware level of the Product dimension, the four quarters in 1998, and the number of regions in the Geography dimension.</span></span> <span data-ttu-id="1209a-123">Si toutes les données de synthèse ont été précalculées dans des agrégations, le temps de réponse à la requête dépend uniquement du temps nécessaire à l'extraction des cellules spécifiées.</span><span class="sxs-lookup"><span data-stu-id="1209a-123">If all summary data has been precalculated into aggregations, the response time of the query will depend only on the time that is required to extract the specified cells.</span></span> <span data-ttu-id="1209a-124">Aucun calcul ni lecture des données de la table de faits ne sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="1209a-124">No calculation or reading of data from the fact table is required.</span></span>  
  
 <span data-ttu-id="1209a-125">Bien que le calcul préalable de toutes les agrégations possibles dans un cube permette d'obtenir les temps de réponse les plus rapides pour toutes les requêtes, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] peut facilement calculer certaines valeurs agrégées à partir d'autres agrégations précalculées.</span><span class="sxs-lookup"><span data-stu-id="1209a-125">Although precalculation of all possible aggregations in a cube might provide the fastest possible response time for all queries, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can easily calculate some aggregrated values from other precalculated aggregations.</span></span> <span data-ttu-id="1209a-126">De plus, le calcul de toutes les agrégations possibles nécessite un temps de traitement et une capacité de stockage non négligeables.</span><span class="sxs-lookup"><span data-stu-id="1209a-126">Additionally, calculating all possible aggregations requires significant processing time and storage.</span></span> <span data-ttu-id="1209a-127">Par conséquent, il est nécessaire de trouver un compromis entre les besoins de stockage et le pourcentage d'agrégations possibles qui sont précalculées.</span><span class="sxs-lookup"><span data-stu-id="1209a-127">Therefore, there is a tradeoff between storage requirements and the percentage of possible aggregations that are precalculated.</span></span> <span data-ttu-id="1209a-128">Si aucune agrégation n'est précalculée (0 %), le temps de traitement et l'espace de stockage requis pour un cube sont réduits au minimum, mais le temps de réponse aux requêtes peut être long car pour répondre à chaque requête, les données nécessaires doivent être extraites des cellules feuilles puis agrégées au moment de la requête.</span><span class="sxs-lookup"><span data-stu-id="1209a-128">If no aggregations are precalculated (0%), the amount of required processing time and storage space for a cube is minimized, but query response time may be slow because the data required to answer each query must be retrieved from the leaf cells and then aggregated at query time to answer each query.</span></span> <span data-ttu-id="1209a-129">Par exemple, afficher un seul résultat en réponse à la première question posée plus haut, « Quelles ont été les ventes du produit X en 1998 pour la région Nord-Ouest ? », peut impliquer la lecture de plusieurs milliers de lignes de données, l'extraction de la valeur de la colonne utilisée pour fournir la mesure Ventes pour chacune d'elle et enfin le calcul de la somme.</span><span class="sxs-lookup"><span data-stu-id="1209a-129">For example, returning a single number that answers the question asked earlier ("What were the sales of product X in 1998 for the Northwest region") might require reading thousands of rows of data, extracting the value of the column used to provide the Sales measure from each row, and then calculating the sum.</span></span> <span data-ttu-id="1209a-130">En outre, la durée nécessaire à la récupération de ces données dépend du mode de stockage choisi pour les données MOLAP, HOLAP ou ROLAP.</span><span class="sxs-lookup"><span data-stu-id="1209a-130">Moreover, the length of time required to retrieve that data will very depending on the storage mode chosen for the data-MOLAP, HOLAP, or ROLAP.</span></span>  
  
## <a name="designing-aggregations"></a><span data-ttu-id="1209a-131">Conception d'agrégations</span><span class="sxs-lookup"><span data-stu-id="1209a-131">Designing Aggregations</span></span>  
 [!INCLUDE[msCoName](../../includes/msconame-md.md)]<span data-ttu-id="1209a-132">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] intègre un algorithme complexe permettant de sélectionner des agrégations pour le précalcul afin que d’autres agrégations puissent être calculées rapidement à partir des valeurs précalculées.</span><span class="sxs-lookup"><span data-stu-id="1209a-132">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] incorporates a sophisticated algorithm to select aggregations for precalculation so that other aggregations can be quickly computed from the precalculated values.</span></span> <span data-ttu-id="1209a-133">Par exemple, si les agrégations font l'objet d'un calcul préalable pour le niveau Month d'une hiérarchie Time, le calcul d'un niveau Quarter nécessite seulement la synthèse de trois nombres qui peuvent être calculés rapidement à la demande.</span><span class="sxs-lookup"><span data-stu-id="1209a-133">For example, if the aggregations are precalculated for the Month level of a Time hierarchy, the calculation for a Quarter level requires only the summarization of three numbers, which can be quickly computed on demand.</span></span> <span data-ttu-id="1209a-134">Cette technique permet d'économiser du temps de traitement et de réduire les besoins de stockage avec un impact minimal sur les temps de réponse aux requêtes.</span><span class="sxs-lookup"><span data-stu-id="1209a-134">This technique saves processing time and reduces storage requirements, with minimal effect on query response time.</span></span>  
  
 <span data-ttu-id="1209a-135">L'Assistant Conception d'agrégation fournit des options qui permettent de désigner un mode de stockage et des contraintes de pourcentage dans l'algorithme et d'aboutir ainsi à un compromis satisfaisant entre les temps de réponse et les besoins de stockage.</span><span class="sxs-lookup"><span data-stu-id="1209a-135">The Aggregation Design Wizard provides options for you to specify storage and percentage constraints on the algorithm to achieve a satisfactory tradeoff between query response time and storage requirements.</span></span> <span data-ttu-id="1209a-136">Cependant, l'algorithme de cet assistant suppose que toutes les requêtes possibles sont également probables.</span><span class="sxs-lookup"><span data-stu-id="1209a-136">However, the Aggregation Design Wizard's algorithm assumes that all possible queries are equally likely.</span></span> <span data-ttu-id="1209a-137">L'Assistant Optimisation de l'utilisation vous permet d'affiner la structure des agrégations pour un groupe de mesures en analysant les requêtes qui ont été soumises par les applications clientes.</span><span class="sxs-lookup"><span data-stu-id="1209a-137">The Usage-Based Optimization Wizard lets you adjust the aggregation design for a measure group by analyzing the queries that have been submitted by client applications.</span></span> <span data-ttu-id="1209a-138">En utilisant cet Assistant pour ajuster l'agrégation d'un cube, vous pouvez accélérer les réponses aux requêtes fréquentes et ralentir les réponses aux requêtes plus rares, sans trop affecter l'espace de stockage nécessaire au cube.</span><span class="sxs-lookup"><span data-stu-id="1209a-138">By using the wizard to tune a cube's aggregation you can increase responsiveness to frequent queries and decrease responsiveness to infrequent queries without significantly affecting the storage needed for the cube.</span></span>  
  
 <span data-ttu-id="1209a-139">Les agrégations sont conçues à l'aide des Assistants, mais elles ne sont véritablement calculées qu''au moment où la partition pour laquelle elles sont conçues est traitée.</span><span class="sxs-lookup"><span data-stu-id="1209a-139">Aggregations are designed by using the wizards but are not actually calculated until the partition for which the aggregations are designed is processed.</span></span> <span data-ttu-id="1209a-140">Après avoir créé l'agrégation, si la structure du cube change ou si des données sont ajoutées ou modifiées dans les tables sources du cube, vous devez généralement recréer les agrégations du cube et retraiter ce dernier.</span><span class="sxs-lookup"><span data-stu-id="1209a-140">After the aggregation has been created, if the structure of a cube ever changes, or if data is added to or changed in a cube's source tables, it is usually necessary to review the cube's aggregations and process the cube again.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1209a-141">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="1209a-141">See Also</span></span>  
 [<span data-ttu-id="1209a-142">Traitement et modes de stockage des partitions</span><span class="sxs-lookup"><span data-stu-id="1209a-142">Partition Storage Modes and Processing</span></span>](partitions-partition-storage-modes-and-processing.md)  
  
  
