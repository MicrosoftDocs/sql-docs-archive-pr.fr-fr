---
title: Fonctions définies par l’utilisateur | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- user-defined functions [SQL Server], components
- user-defined functions [SQL Server], about user-defined functions
ms.assetid: d7ddafab-f5a6-44b0-81d5-ba96425aada4
author: rothja
ms.author: jroth
ms.openlocfilehash: c7e4b1a77f2fe5a13e21d8b3fe59e37931669b30
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87599840"
---
# <a name="user-defined-functions"></a><span data-ttu-id="0a129-102">Fonctions définies par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-102">User-Defined Functions</span></span>
  <span data-ttu-id="0a129-103">À l'instar des fonctions dans les langages de programmation, les fonctions définies par l'utilisateur de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sont des routines qui acceptent des paramètres, exécutent une action, par exemple un calcul complexe, et retournent le résultat de cette action sous forme de valeur.</span><span class="sxs-lookup"><span data-stu-id="0a129-103">Like functions in programming languages, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] user-defined functions are routines that accept parameters, perform an action, such as a complex calculation, and return the result of that action as a value.</span></span> <span data-ttu-id="0a129-104">La valeur retournée peut être une valeur scalaire unique ou un jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="0a129-104">The return value can either be a single scalar value or a result set.</span></span>  
  
 <span data-ttu-id="0a129-105">**Dans cette rubrique**</span><span class="sxs-lookup"><span data-stu-id="0a129-105">**In This Topic**</span></span>  
  
 [<span data-ttu-id="0a129-106">Avantages des fonctions définies par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-106">User-defined Function Benefits</span></span>](#Benefits)  
  
 [<span data-ttu-id="0a129-107">Types de fonctions</span><span class="sxs-lookup"><span data-stu-id="0a129-107">Types of Functions</span></span>](#FunctionTypes)  
  
 [<span data-ttu-id="0a129-108">Instructions</span><span class="sxs-lookup"><span data-stu-id="0a129-108">Guidelines</span></span>](#Guidelines)  
  
 [<span data-ttu-id="0a129-109">Instructions valides dans une fonction</span><span class="sxs-lookup"><span data-stu-id="0a129-109">Valid Statements in a Function</span></span>](#ValidStatements)  
  
 [<span data-ttu-id="0a129-110">Fonctions liées à un schéma</span><span class="sxs-lookup"><span data-stu-id="0a129-110">Schema Bound Functions</span></span>](#SchemaBound)  
  
 [<span data-ttu-id="0a129-111">Spécification des paramètres</span><span class="sxs-lookup"><span data-stu-id="0a129-111">Specifying Parameters</span></span>](#Parameters)  
  
 [<span data-ttu-id="0a129-112">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="0a129-112">Related Tasks</span></span>](#Tasks)  
  
##  <a name="user-defined-function-benefits"></a><a name="Benefits"></a><span data-ttu-id="0a129-113">Avantages des fonctions définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-113">User-defined Function Benefits</span></span>  
 <span data-ttu-id="0a129-114">Les avantages de l'utilisation des fonctions définies par l'utilisateur dans [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="0a129-114">The benefits of using user-defined functions in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] are:</span></span>  
  
-   <span data-ttu-id="0a129-115">Elles permettent d'utiliser la programmation modulaire.</span><span class="sxs-lookup"><span data-stu-id="0a129-115">They allow modular programming.</span></span>  
  
     <span data-ttu-id="0a129-116">Vous pouvez créer la fonction une fois, la stocker dans la base de données et l'appeler autant de fois que vous le voulez dans votre programme.</span><span class="sxs-lookup"><span data-stu-id="0a129-116">You can create the function once, store it in the database, and call it any number of times in your program.</span></span> <span data-ttu-id="0a129-117">Les fonctions définies par l'utilisateur sont modifiables indépendamment du code source du programme.</span><span class="sxs-lookup"><span data-stu-id="0a129-117">User-defined functions can be modified independently of the program source code.</span></span>  
  
-   <span data-ttu-id="0a129-118">Leur exécution est plus rapide.</span><span class="sxs-lookup"><span data-stu-id="0a129-118">They allow faster execution.</span></span>  
  
     <span data-ttu-id="0a129-119">De la même façon que les procédures stockées, les fonctions [!INCLUDE[tsql](../../includes/tsql-md.md)] définies par l'utilisateur réduisent le coût de compilation du code [!INCLUDE[tsql](../../includes/tsql-md.md)] en mettant en cache les plans pour les réutiliser au cours d'exécutions répétées.</span><span class="sxs-lookup"><span data-stu-id="0a129-119">Similar to stored procedures, [!INCLUDE[tsql](../../includes/tsql-md.md)] user-defined functions reduce the compilation cost of [!INCLUDE[tsql](../../includes/tsql-md.md)] code by caching the plans and reusing them for repeated executions.</span></span> <span data-ttu-id="0a129-120">La fonction définie par l'utilisateur n'a donc pas besoin d'être réanalysée et réoptimisée à chaque utilisation, ce qui réduit nettement les durées d'exécution.</span><span class="sxs-lookup"><span data-stu-id="0a129-120">This means the user-defined function does not need to be reparsed and reoptimized with each use resulting in much faster execution times.</span></span>  
  
     <span data-ttu-id="0a129-121">Les fonctions CLR offrent des avantages considérables en termes de performance par rapport aux fonctions [!INCLUDE[tsql](../../includes/tsql-md.md)] pour ce qui concerne les tâches de calcul, la manipulation de chaînes et la logique métier.</span><span class="sxs-lookup"><span data-stu-id="0a129-121">CLR functions offer significant performance advantage over [!INCLUDE[tsql](../../includes/tsql-md.md)] functions for computational tasks, string manipulation, and business logic.</span></span> <span data-ttu-id="0a129-122">Les fonctions [!INCLUDE[tsql](../../includes/tsql-md.md)] sont plus adaptées à une logique intensive d'accès aux données.</span><span class="sxs-lookup"><span data-stu-id="0a129-122">[!INCLUDE[tsql](../../includes/tsql-md.md)] functions are better suited for data-access intensive logic.</span></span>  
  
-   <span data-ttu-id="0a129-123">Elles permettent une réduction du trafic sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="0a129-123">They can reduce network traffic.</span></span>  
  
     <span data-ttu-id="0a129-124">Une opération qui filtre des données en fonction d'une contrainte complexe qui ne peut pas être exprimée dans une même expression scalaire peut être exprimée sous forme de fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-124">An operation that filters data based on some complex constraint that cannot be expressed in a single scalar expression can be expressed as a function.</span></span> <span data-ttu-id="0a129-125">La fonction peut ensuite être appelée dans la clause WHERE pour réduire le nombre de lignes envoyées aux clients.</span><span class="sxs-lookup"><span data-stu-id="0a129-125">The function can then invoked in the WHERE clause to reduce the number or rows sent to the client.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="0a129-126">Les fonctions [!INCLUDE[tsql](../../includes/tsql-md.md)] définies par l'utilisateur figurant dans les requêtes peuvent être exécutées uniquement sur un thread (plan d'exécution en série).</span><span class="sxs-lookup"><span data-stu-id="0a129-126">[!INCLUDE[tsql](../../includes/tsql-md.md)] user-defined functions in queries can only be executed on a single thread (serial execution plan).</span></span>  
  
##  <a name="types-of-functions"></a><a name="FunctionTypes"></a><span data-ttu-id="0a129-127">Types de fonctions</span><span class="sxs-lookup"><span data-stu-id="0a129-127">Types of Functions</span></span>  
 <span data-ttu-id="0a129-128">Fonction scalaire</span><span class="sxs-lookup"><span data-stu-id="0a129-128">Scalar Function</span></span>  
 <span data-ttu-id="0a129-129">Les fonctions scalaires définies par l'utilisateur retournent une valeur de donnée unique dont le type est défini dans la clause RETURNS.</span><span class="sxs-lookup"><span data-stu-id="0a129-129">User-defined scalar functions return a single data value of the type defined in the RETURNS clause.</span></span> <span data-ttu-id="0a129-130">Une fonction scalaire incluse ne contient pas de corps ; la valeur scalaire est le résultat d'une instruction unique.</span><span class="sxs-lookup"><span data-stu-id="0a129-130">For an inline scalar function, there is no function body; the scalar value is the result of a single statement.</span></span> <span data-ttu-id="0a129-131">Le corps d'une fonction scalaire à instructions multiples, défini dans un bloc BEGIN...END, contient une série d'instructions [!INCLUDE[tsql](../../includes/tsql-md.md)] qui retournent la valeur unique.</span><span class="sxs-lookup"><span data-stu-id="0a129-131">For a multistatement scalar function, the function body, defined in a BEGIN...END block, contains a series of [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that return the single value.</span></span> <span data-ttu-id="0a129-132">Le type de retour peut être n'importe quel type de données à l'exception de `text`, `ntext`, `image`, `cursor` et `timestamp`.</span><span class="sxs-lookup"><span data-stu-id="0a129-132">The return type can be any data type except `text`, `ntext`, `image`, `cursor`, and `timestamp`.</span></span>  
  
 <span data-ttu-id="0a129-133">Fonction table</span><span class="sxs-lookup"><span data-stu-id="0a129-133">Table-Valued Functions</span></span>  
 <span data-ttu-id="0a129-134">Les fonctions table définies par l'utilisateur retournent un type de données `table`.</span><span class="sxs-lookup"><span data-stu-id="0a129-134">User-defined table-valued functions return a `table` data type.</span></span> <span data-ttu-id="0a129-135">Une fonction table incluse ne contient pas de corps ; la table est le jeu de résultats d'une instruction SELECT unique.</span><span class="sxs-lookup"><span data-stu-id="0a129-135">For an inline table-valued function, there is no function body; the table is the result set of a single SELECT statement.</span></span>  
  
 <span data-ttu-id="0a129-136">Fonctions système</span><span class="sxs-lookup"><span data-stu-id="0a129-136">System Functions</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="0a129-137">fournit de nombreuses fonctions système que vous pouvez utiliser pour effectuer diverses opérations.</span><span class="sxs-lookup"><span data-stu-id="0a129-137">provides many system functions that you can use to perform a variety of operations.</span></span> <span data-ttu-id="0a129-138">Elles ne peuvent pas être modifiées.</span><span class="sxs-lookup"><span data-stu-id="0a129-138">They cannot be modified.</span></span> <span data-ttu-id="0a129-139">Pour plus d’informations, consultez [Fonctions intégrées &#40;Transact-SQL&#41;](/sql/t-sql/functions/functions), [Fonctions stockées système &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/system-functions-for-transact-sql) et [Fonctions et vues de gestion dynamique &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/system-dynamic-management-views).</span><span class="sxs-lookup"><span data-stu-id="0a129-139">For more information, see [Built-in Functions &#40;Transact-SQL&#41;](/sql/t-sql/functions/functions), [System Stored Functions &#40;Transact-SQL&#41;](/sql/relational-databases/system-functions/system-functions-for-transact-sql), and [Dynamic Management Views and Functions &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/system-dynamic-management-views).</span></span>  
  
##  <a name="guidelines"></a><a name="Guidelines"></a> <span data-ttu-id="0a129-140">Instructions</span><span class="sxs-lookup"><span data-stu-id="0a129-140">Guidelines</span></span>  
 <span data-ttu-id="0a129-141">Les erreurs [!INCLUDE[tsql](../../includes/tsql-md.md)] qui provoquent l’annulation d’une instruction et la poursuite avec l’instruction suivante dans le module (comme les déclencheurs ou les procédures stockées) sont traitées différemment à l’intérieur d’une fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-141">[!INCLUDE[tsql](../../includes/tsql-md.md)] errors that cause a statement to be canceled and continue with the next statement in the module (such as triggers or stored procedures) are treated differently inside a function.</span></span> <span data-ttu-id="0a129-142">Dans les fonctions, ces erreurs provoquent l'arrêt de l'exécution de la fonction,</span><span class="sxs-lookup"><span data-stu-id="0a129-142">In functions, such errors cause the execution of the function to stop.</span></span> <span data-ttu-id="0a129-143">lequel provoque à son tour l'annulation de l'instruction qui a invoqué la fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-143">This in turn causes the statement that invoked the function to be canceled.</span></span>  
  
 <span data-ttu-id="0a129-144">Les instructions contenues dans un bloc BEGIN...END ne peuvent pas avoir d'effets secondaires.</span><span class="sxs-lookup"><span data-stu-id="0a129-144">The statements in a BEGIN...END block cannot have any side effects.</span></span> <span data-ttu-id="0a129-145">Les effets secondaires d'une fonction sont toutes les modifications définitives de l'état d'une ressource dont la portée s'étend hors de la fonction, comme la modification d'une table de base de données.</span><span class="sxs-lookup"><span data-stu-id="0a129-145">Function side effects are any permanent changes to the state of a resource that has a scope outside the function such as a modification to a database table.</span></span> <span data-ttu-id="0a129-146">Les instructions d'une fonction ne peuvent modifier que les objets locaux de cette fonction, tels les variables ou les curseurs locaux.</span><span class="sxs-lookup"><span data-stu-id="0a129-146">The only changes that can be made by the statements in the function are changes to objects local to the function, such as local cursors or variables.</span></span> <span data-ttu-id="0a129-147">Les modifications apportées aux tables de base de données, les opérations portant sur des curseurs non locaux par rapport à la fonction, l'envoi de courrier électronique, les tentatives de modification de catalogue et la génération d'un jeu de résultats retourné à l'utilisateur sont autant d'actions qui ne peuvent pas être exécutées dans une fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-147">Modifications to database tables, operations on cursors that are not local to the function, sending e-mail, attempting a catalog modification, and generating a result set that is returned to the user are examples of actions that cannot be performed in a function.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="0a129-148">Si une instruction CREATE FUNCTION produit des effets secondaires contre des ressources qui n'existent pas lorsque l'instruction CREATE FUNCTION est publiée, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] exécute l'instruction.</span><span class="sxs-lookup"><span data-stu-id="0a129-148">If a CREATE FUNCTION statement produces side effects against resources that do not exist when the CREATE FUNCTION statement is issued, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] executes the statement.</span></span> <span data-ttu-id="0a129-149">Toutefois, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] n'exécute pas la fonction lorsqu'elle est appelée.</span><span class="sxs-lookup"><span data-stu-id="0a129-149">However, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] does not execute the function when it is invoked.</span></span>  
  
 <span data-ttu-id="0a129-150">Le nombre d'exécutions effectives d'une fonction spécifiée dans une requête peut varier d'un plan d'exécution de l'optimiseur à l'autre.</span><span class="sxs-lookup"><span data-stu-id="0a129-150">The number of times that a function specified in a query is actually executed can vary between execution plans built by the optimizer.</span></span> <span data-ttu-id="0a129-151">C'est par exemple le cas d'une fonction invoquée par une sous-requête dans une clause WHERE.</span><span class="sxs-lookup"><span data-stu-id="0a129-151">An example is a function invoked by a subquery in a WHERE clause.</span></span> <span data-ttu-id="0a129-152">Le nombre d'exécutions de la sous-requête et de sa fonction peut varier en fonction du chemin d'accès choisi par l'optimiseur.</span><span class="sxs-lookup"><span data-stu-id="0a129-152">The number of times the subquery and its function is executed can vary with different access paths chosen by the optimizer.</span></span>  
  
##  <a name="valid-statements-in-a-function"></a><a name="ValidStatements"></a><span data-ttu-id="0a129-153">Instructions valides dans une fonction</span><span class="sxs-lookup"><span data-stu-id="0a129-153">Valid Statements in a Function</span></span>  
 <span data-ttu-id="0a129-154">Les types d'instructions valides dans une fonction sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="0a129-154">The types of statements that are valid in a function include:</span></span>  
  
-   <span data-ttu-id="0a129-155">les instructions DECLARE permettant de définir des curseurs et des variables de données locaux de la fonction ;</span><span class="sxs-lookup"><span data-stu-id="0a129-155">DECLARE statements can be used to define data variables and cursors that are local to the function.</span></span>  
  
-   <span data-ttu-id="0a129-156">les affectations de valeurs à des objets locaux de la fonction, comme l'attribution de valeurs à des variables locales scalaires ou de table à l'aide de SET ;</span><span class="sxs-lookup"><span data-stu-id="0a129-156">Assignments of values to objects local to the function, such as using SET to assign values to scalar and table local variables.</span></span>  
  
-   <span data-ttu-id="0a129-157">les opérations de curseur faisant référence à des curseurs locaux déclarés, ouverts, fermés et désalloués dans la fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-157">Cursor operations that reference local cursors that are declared, opened, closed, and deallocated in the function.</span></span> <span data-ttu-id="0a129-158">Les instructions FETCH qui retournent des données au client ne sont pas autorisées</span><span class="sxs-lookup"><span data-stu-id="0a129-158">FETCH statements that return data to the client are not allowed.</span></span> <span data-ttu-id="0a129-159">(seules celles qui affectent des valeurs à des variables locales à l'aide de la clause INTO le sont) ;</span><span class="sxs-lookup"><span data-stu-id="0a129-159">Only FETCH statements that assign values to local variables using the INTO clause are allowed.</span></span>  
  
-   <span data-ttu-id="0a129-160">les instructions de contrôle de flux, à l'exception des instructions TRY...CATCH ;</span><span class="sxs-lookup"><span data-stu-id="0a129-160">Control-of-flow statements except TRY...CATCH statements.</span></span>  
  
-   <span data-ttu-id="0a129-161">les instructions SELECT contenant des listes de sélection avec des expressions qui affectent des valeurs à des variables locales de la fonction ;</span><span class="sxs-lookup"><span data-stu-id="0a129-161">SELECT statements containing select lists with expressions that assign values to variables that are local to the function.</span></span>  
  
-   <span data-ttu-id="0a129-162">les instructions UPDATE, INSERT et DELETE modifiant les variables table locales de la fonction ;</span><span class="sxs-lookup"><span data-stu-id="0a129-162">UPDATE, INSERT, and DELETE statements modifying table variables that are local to the function.</span></span>  
  
-   <span data-ttu-id="0a129-163">les instructions EXECUTE appelant une procédure stockée étendue.</span><span class="sxs-lookup"><span data-stu-id="0a129-163">EXECUTE statements calling an extended stored procedure.</span></span>  
  
### <a name="built-in-system-functions"></a><span data-ttu-id="0a129-164">Fonctions système intégrées</span><span class="sxs-lookup"><span data-stu-id="0a129-164">Built-in System Functions</span></span>  
 <span data-ttu-id="0a129-165">Les fonctions intégrées non déterministes suivantes peuvent être utilisées dans les fonctions Transact-SQL définies par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-165">The following nondeterministic built-in functions can be used in Transact-SQL user-defined functions.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="0a129-166">CURRENT_TIMESTAMP</span><span class="sxs-lookup"><span data-stu-id="0a129-166">CURRENT_TIMESTAMP</span></span>|<span data-ttu-id="0a129-167">@@MAX_CONNECTIONS</span><span class="sxs-lookup"><span data-stu-id="0a129-167">@@MAX_CONNECTIONS</span></span>|  
|<span data-ttu-id="0a129-168">GET_TRANSMISSION_STATUS</span><span class="sxs-lookup"><span data-stu-id="0a129-168">GET_TRANSMISSION_STATUS</span></span>|<span data-ttu-id="0a129-169">@@PACK_RECEIVED</span><span class="sxs-lookup"><span data-stu-id="0a129-169">@@PACK_RECEIVED</span></span>|  
|<span data-ttu-id="0a129-170">GETDATE</span><span class="sxs-lookup"><span data-stu-id="0a129-170">GETDATE</span></span>|<span data-ttu-id="0a129-171">@@PACK_SENT</span><span class="sxs-lookup"><span data-stu-id="0a129-171">@@PACK_SENT</span></span>|  
|<span data-ttu-id="0a129-172">GETUTCDATE</span><span class="sxs-lookup"><span data-stu-id="0a129-172">GETUTCDATE</span></span>|<span data-ttu-id="0a129-173">@@PACKET_ERRORS</span><span class="sxs-lookup"><span data-stu-id="0a129-173">@@PACKET_ERRORS</span></span>|  
|<span data-ttu-id="0a129-174">@@CONNECTIONS</span><span class="sxs-lookup"><span data-stu-id="0a129-174">@@CONNECTIONS</span></span>|<span data-ttu-id="0a129-175">@@TIMETICKS</span><span class="sxs-lookup"><span data-stu-id="0a129-175">@@TIMETICKS</span></span>|  
|<span data-ttu-id="0a129-176">@@CPU_BUSY</span><span class="sxs-lookup"><span data-stu-id="0a129-176">@@CPU_BUSY</span></span>|<span data-ttu-id="0a129-177">@@TOTAL_ERRORS</span><span class="sxs-lookup"><span data-stu-id="0a129-177">@@TOTAL_ERRORS</span></span>|  
|<span data-ttu-id="0a129-178">@@DBTS</span><span class="sxs-lookup"><span data-stu-id="0a129-178">@@DBTS</span></span>|<span data-ttu-id="0a129-179">@@TOTAL_READ</span><span class="sxs-lookup"><span data-stu-id="0a129-179">@@TOTAL_READ</span></span>|  
|<span data-ttu-id="0a129-180">@@IDLE</span><span class="sxs-lookup"><span data-stu-id="0a129-180">@@IDLE</span></span>|<span data-ttu-id="0a129-181">@@TOTAL_WRITE</span><span class="sxs-lookup"><span data-stu-id="0a129-181">@@TOTAL_WRITE</span></span>|  
|<span data-ttu-id="0a129-182">@@IO_BUSY</span><span class="sxs-lookup"><span data-stu-id="0a129-182">@@IO_BUSY</span></span>||  
  
 <span data-ttu-id="0a129-183">Les fonctions intégrées non déterministes suivantes ne peuvent pas être utilisées dans les fonctions Transact-SQL définies par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-183">The following nondeterministic built-in functions cannot be used in Transact-SQL user-defined functions.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="0a129-184">NEWID</span><span class="sxs-lookup"><span data-stu-id="0a129-184">NEWID</span></span>|<span data-ttu-id="0a129-185">RAND</span><span class="sxs-lookup"><span data-stu-id="0a129-185">RAND</span></span>|  
|<span data-ttu-id="0a129-186">NEWSEQUENTIALID</span><span class="sxs-lookup"><span data-stu-id="0a129-186">NEWSEQUENTIALID</span></span>|<span data-ttu-id="0a129-187">TEXTPTR</span><span class="sxs-lookup"><span data-stu-id="0a129-187">TEXTPTR</span></span>|  
  
 <span data-ttu-id="0a129-188">Pour obtenir la liste des fonctions système intégrées déterministes et non déterministes, consultez [Fonctions déterministes et non déterministes](../user-defined-functions/deterministic-and-nondeterministic-functions.md).</span><span class="sxs-lookup"><span data-stu-id="0a129-188">For a list of deterministic and nondeterministic built-in system functions, see [Deterministic and Nondeterministic Functions](../user-defined-functions/deterministic-and-nondeterministic-functions.md).</span></span>  
  
##  <a name="schema-bound-functions"></a><a name="SchemaBound"></a><span data-ttu-id="0a129-189">Fonctions liées au schéma</span><span class="sxs-lookup"><span data-stu-id="0a129-189">Schema-Bound Functions</span></span>  
 <span data-ttu-id="0a129-190">L'instruction CREATE FUNCTION prend en charge une clause SCHEMABINDING qui lie la fonction au schéma de tout objet auquel elle fait référence, tel qu'une table, une vue ou une fonction définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-190">CREATE FUNCTION supports a SCHEMABINDING clause that binds the function to the schema of any objects it references, such as tables, views, and other user-defined functions.</span></span> <span data-ttu-id="0a129-191">Toute tentative de modification (ALTER) ou de suppression (DROP) d'un objet référencé par une fonction liée au schéma est vouée à l'échec.</span><span class="sxs-lookup"><span data-stu-id="0a129-191">An attempt to alter or drop any object referenced by a schema-bound function fails.</span></span>  
  
 <span data-ttu-id="0a129-192">Les conditions suivantes doivent être respectées pour que la clause SCHEMABINDING puisse être spécifiée dans CREATE FUNCTION :</span><span class="sxs-lookup"><span data-stu-id="0a129-192">These conditions must be met before you can specify SCHEMABINDING in CREATE FUNCTION:</span></span>  
  
-   <span data-ttu-id="0a129-193">Toutes les vues et fonctions définies par l'utilisateur référencées par la fonction doivent être liées au schéma.</span><span class="sxs-lookup"><span data-stu-id="0a129-193">All views and user-defined functions referenced by the function must be schema-bound.</span></span>  
  
-   <span data-ttu-id="0a129-194">Tous les objets référencés par la fonction doivent figurer dans la même base de données que la fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-194">All objects referenced by the function must be in the same database as the function.</span></span> <span data-ttu-id="0a129-195">Les objets doivent être référencés à l'aide de noms à une ou deux composantes.</span><span class="sxs-lookup"><span data-stu-id="0a129-195">The objects must be referenced using either one-part or two-part names.</span></span>  
  
-   <span data-ttu-id="0a129-196">Vous devez posséder l'autorisation REFERENCES sur tous les objets (tables, vues et fonctions définies par l'utilisateur) référencés dans la fonction.</span><span class="sxs-lookup"><span data-stu-id="0a129-196">You must have REFERENCES permission on all objects (tables, views, and user-defined functions) referenced in the function.</span></span>  
  
 <span data-ttu-id="0a129-197">Vous pouvez utiliser l'instruction ALTER FUNCTION pour supprimer la liaison au schéma.</span><span class="sxs-lookup"><span data-stu-id="0a129-197">You can use ALTER FUNCTION to remove the schema binding.</span></span> <span data-ttu-id="0a129-198">Cette instruction doit redéfinir la fonction sans spécifier WITH SCHEMABINDING.</span><span class="sxs-lookup"><span data-stu-id="0a129-198">The ALTER FUNCTION statement should redefine the function without specifying WITH SCHEMABINDING.</span></span>  
  
##  <a name="specifying-parameters"></a><a name="Parameters"></a><span data-ttu-id="0a129-199">Spécification des paramètres</span><span class="sxs-lookup"><span data-stu-id="0a129-199">Specifying Parameters</span></span>  
 <span data-ttu-id="0a129-200">Une fonction définie par l'utilisateur accepte ou n'accepte pas de paramètres d'entrée et retourne une valeur scalaire ou une table.</span><span class="sxs-lookup"><span data-stu-id="0a129-200">A user-defined function takes zero or more input parameters and returns either a scalar value or a table.</span></span> <span data-ttu-id="0a129-201">Une fonction peut comprendre jusqu'à 1 024 paramètres d'entrée.</span><span class="sxs-lookup"><span data-stu-id="0a129-201">A function can have a maximum of 1024 input parameters.</span></span> <span data-ttu-id="0a129-202">Lorsqu'un des paramètres de la fonction possède une valeur par défaut, le mot clé DEFAULT doit être spécifié lors de l'appel de la fonction afin d'obtenir la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="0a129-202">When a parameter of the function has a default value, the keyword DEFAULT must be specified when calling the function to get the default value.</span></span> <span data-ttu-id="0a129-203">Ce comportement est différent de celui des paramètres avec valeurs par défaut des procédures stockées définies par l'utilisateur pour lesquelles l'omission du paramètre implique également la prise en compte de la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="0a129-203">This behavior is different from parameters with default values in user-defined stored procedures in which omitting the parameter also implies the default value.</span></span> <span data-ttu-id="0a129-204">Les fonctions définies par l'utilisateur ne prennent pas en charge les paramètres de sortie.</span><span class="sxs-lookup"><span data-stu-id="0a129-204">User-defined functions do not support output parameters.</span></span>  
  
##  <a name="related-tasks"></a><a name="Tasks"></a> <span data-ttu-id="0a129-205">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="0a129-205">Related Tasks</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="0a129-206">**Description de la tâche**</span><span class="sxs-lookup"><span data-stu-id="0a129-206">**Task Description**</span></span>|<span data-ttu-id="0a129-207">**Rubrique**</span><span class="sxs-lookup"><span data-stu-id="0a129-207">**Topic**</span></span>|  
|<span data-ttu-id="0a129-208">Décrit comment créer une fonction Transact-SQL définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-208">Describes how to create a Transact-SQL user-defined function.</span></span>|[<span data-ttu-id="0a129-209">Créer des fonctions définies par l’utilisateur &#40;moteur de base de données&#41;</span><span class="sxs-lookup"><span data-stu-id="0a129-209">Create User-defined Functions &#40;Database Engine&#41;</span></span>](../user-defined-functions/create-user-defined-functions-database-engine.md)|  
|<span data-ttu-id="0a129-210">Décrit comment créer une fonction CLR.</span><span class="sxs-lookup"><span data-stu-id="0a129-210">Describes how create a CLR function.</span></span>|[<span data-ttu-id="0a129-211">Créer des fonctions CLR</span><span class="sxs-lookup"><span data-stu-id="0a129-211">Create CLR Functions</span></span>](../user-defined-functions/create-clr-functions.md)|  
|<span data-ttu-id="0a129-212">Décrit comment créer une fonction d'agrégation définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-212">Describes how to create a user-defined aggregate function</span></span>|[<span data-ttu-id="0a129-213">Créer des agrégats définis par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-213">Create User-defined Aggregates</span></span>](../user-defined-functions/create-user-defined-aggregates.md)|  
|<span data-ttu-id="0a129-214">Décrit comment modifier une fonction Transact-SQL définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-214">Describes how to modify a Transact-SQL user-defined function.</span></span>|[<span data-ttu-id="0a129-215">Modifier les fonctions définies par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-215">Modify User-defined Functions</span></span>](../user-defined-functions/user-defined-functions.md)|  
|<span data-ttu-id="0a129-216">Décrit comment supprimer une fonction définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-216">Describes how to delete a user-defined function.</span></span>|[<span data-ttu-id="0a129-217">Supprimer des fonctions définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-217">Delete User-defined Functions</span></span>](../user-defined-functions/delete-user-defined-functions.md)|  
|<span data-ttu-id="0a129-218">Décrit comment exécuter une fonction définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-218">Describes how to execute a user-defined function.</span></span>|[<span data-ttu-id="0a129-219">Exécuter des fonctions définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-219">Execute User-defined Functions</span></span>](../user-defined-functions/execute-user-defined-functions.md)|  
|<span data-ttu-id="0a129-220">Décrit comment renommer une fonction définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-220">Describes how to rename a user-defined function</span></span>|[<span data-ttu-id="0a129-221">Renommer des fonctions définies par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-221">Rename User-defined Functions</span></span>](../user-defined-functions/rename-user-defined-functions.md)|  
|<span data-ttu-id="0a129-222">Décrit comment afficher la définition d'une fonction définie par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0a129-222">Describes how to view the definition of a user-defined function.</span></span>|[<span data-ttu-id="0a129-223">Afficher des fonctions définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a129-223">View User-defined Functions</span></span>](view-user-defined-functions.md)|  
  
  
