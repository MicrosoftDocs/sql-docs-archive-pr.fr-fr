---
title: Rôles d’applications | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- application roles [SQL Server], about application roles
- principals [SQL Server], application roles
- credentials [SQL Server], roles
- application roles [SQL Server]
- roles [SQL Server], application
- permissions [SQL Server], roles
- users [SQL Server], application roles
- authentication [SQL Server], roles
- groups [SQL Server], roles
ms.assetid: dca18b8a-ca03-4b7f-9a46-8474d5b66f76
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: f2fcc7b1e333bb42a00675da5bb9fd559d1c34f1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87602019"
---
# <a name="application-roles"></a><span data-ttu-id="dd324-102">Rôles d’application</span><span class="sxs-lookup"><span data-stu-id="dd324-102">Application Roles</span></span>
  <span data-ttu-id="dd324-103">Un rôle d'application est un principal de base de données qui permet à une application de s'exécuter avec ses propres autorisations de type utilisateur.</span><span class="sxs-lookup"><span data-stu-id="dd324-103">An application role is a database principal that enables an application to run with its own, user-like permissions.</span></span> <span data-ttu-id="dd324-104">Vous pouvez utiliser les rôles d'application pour permettre l'accès à des données spécifiques aux utilisateurs qui se connectent via une application spécifique.</span><span class="sxs-lookup"><span data-stu-id="dd324-104">You can use application roles to enable access to specific data to only those users who connect through a particular application.</span></span> <span data-ttu-id="dd324-105">À la différence des rôles de base de données, les rôles d'application ne contiennent pas de membres et sont inactifs par défaut.</span><span class="sxs-lookup"><span data-stu-id="dd324-105">Unlike database roles, application roles contain no members and are inactive by default.</span></span> <span data-ttu-id="dd324-106">Les rôles d'application fonctionnent avec les deux modes d'authentification.</span><span class="sxs-lookup"><span data-stu-id="dd324-106">Application roles work with both authentication modes.</span></span> <span data-ttu-id="dd324-107">Les rôles d’application sont activés grâce à **sp_setapprole**qui nécessite un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="dd324-107">Application roles are enabled by using **sp_setapprole**, which requires a password.</span></span> <span data-ttu-id="dd324-108">Les rôles d’application étant un principal au niveau des bases de données, ils peuvent uniquement accéder à d’autres bases de données par le biais des autorisations accordées dans ces bases de données à **invité**.</span><span class="sxs-lookup"><span data-stu-id="dd324-108">Because application roles are a database-level principal, they can access other databases only through permissions granted in those databases to **guest**.</span></span> <span data-ttu-id="dd324-109">Toute base de données où **invité** a été désactivé est donc inaccessible aux rôles d’application des autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="dd324-109">Therefore, any database in which **guest** has been disabled will be inaccessible to application roles in other databases.</span></span>  
  
 <span data-ttu-id="dd324-110">Dans [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], les rôles d'application ne peuvent pas accéder à des métadonnées au niveau serveur, car ils ne sont pas associés à un principal au niveau serveur</span><span class="sxs-lookup"><span data-stu-id="dd324-110">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], application roles cannot access server-level metadata because they are not associated with a server-level principal.</span></span> <span data-ttu-id="dd324-111">Pour désactiver cette restriction et permettre ainsi aux rôles d'application d'accéder aux métadonnées de niveau serveur, définissez l'indicateur global 4616.</span><span class="sxs-lookup"><span data-stu-id="dd324-111">To disable this restriction and thereby allow application roles to access server-level metadata, set the global flag 4616.</span></span> <span data-ttu-id="dd324-112">Pour plus d’informations, consultez [Indicateurs de trace &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql) et [DBCC TRACEON &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="dd324-112">For more information, see [Trace Flags &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql) and [DBCC TRACEON &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-transact-sql).</span></span>  
  
## <a name="connecting-with-an-application-role"></a><span data-ttu-id="dd324-113">Connexion avec un rôle d'application</span><span class="sxs-lookup"><span data-stu-id="dd324-113">Connecting with an Application Role</span></span>  
 <span data-ttu-id="dd324-114">Les étapes suivantes composent le processus par lequel un rôle d'application fait basculer les contextes de sécurité :</span><span class="sxs-lookup"><span data-stu-id="dd324-114">The following steps make up the process by which an application role switches security contexts:</span></span>  
  
1.  <span data-ttu-id="dd324-115">Un utilisateur exécute une application cliente.</span><span class="sxs-lookup"><span data-stu-id="dd324-115">A user executes a client application.</span></span>  
  
2.  <span data-ttu-id="dd324-116">L'application cliente se connecte à une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sous le nom de cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="dd324-116">The client application connects to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] as the user.</span></span>  
  
3.  <span data-ttu-id="dd324-117">L’application exécute ensuite la procédure stockée **sp_setapprole** avec un mot de passe uniquement connu pour l’application.</span><span class="sxs-lookup"><span data-stu-id="dd324-117">The application then executes the **sp_setapprole** stored procedure with a password known only to the application.</span></span>  
  
4.  <span data-ttu-id="dd324-118">Si le nom et le mot de passe du rôle d'application sont valides, le rôle d'application est activé.</span><span class="sxs-lookup"><span data-stu-id="dd324-118">If the application role name and password are valid, the application role is enabled.</span></span>  
  
5.  <span data-ttu-id="dd324-119">À ce stade, la connexion perd les autorisations de l'utilisateur et adopte les autorisations du rôle d'application.</span><span class="sxs-lookup"><span data-stu-id="dd324-119">At this point the connection loses the permissions of the user and assumes the permissions of the application role.</span></span>  
  
 <span data-ttu-id="dd324-120">Les autorisations acquises via le rôle d'application restent effectives pendant la durée de la connexion.</span><span class="sxs-lookup"><span data-stu-id="dd324-120">The permissions acquired through the application role remain in effect for the duration of the connection.</span></span>  
  
 <span data-ttu-id="dd324-121">Dans les versions précédentes de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], lorsqu'un utilisateur a démarré un rôle d'application, il peut récupérer son contexte de sécurité initial uniquement en se déconnectant de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]et en s'y reconnectant.</span><span class="sxs-lookup"><span data-stu-id="dd324-121">In earlier versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], the only way for a user to reacquire its original security context after starting an application role is to disconnect and reconnect to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="dd324-122">À partir de [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], **sp_setapprole** a une option qui crée un cookie.</span><span class="sxs-lookup"><span data-stu-id="dd324-122">Beginning with [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], **sp_setapprole** has an option that creates a cookie.</span></span> <span data-ttu-id="dd324-123">Le cookie contient des informations de contexte avant que le rôle d'application soit activé.</span><span class="sxs-lookup"><span data-stu-id="dd324-123">The cookie contains context information before the application role is enabled.</span></span> <span data-ttu-id="dd324-124">Le cookie peut être utilisé par **sp_unsetapprole** pour rétablir la session à son contexte d’origine.</span><span class="sxs-lookup"><span data-stu-id="dd324-124">The cookie can be used by **sp_unsetapprole** to revert the session to its original context.</span></span> <span data-ttu-id="dd324-125">Pour obtenir des informations sur cette nouvelle option et un exemple, consultez [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="dd324-125">For information about this new option and an example, see [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="dd324-126">L’option **encrypt** d’ODBC n’est pas prise en charge par **SqlClient**.</span><span class="sxs-lookup"><span data-stu-id="dd324-126">The ODBC **encrypt** option is not supported by **SqlClient**.</span></span> <span data-ttu-id="dd324-127">Lorsque vous transmettez des informations confidentielles sur un réseau, utilisez le protocole SSL (Secure Sockets Layer) ou IPsec pour chiffrer le canal.</span><span class="sxs-lookup"><span data-stu-id="dd324-127">When you are transmitting confidential information over a network, use Secure Sockets Layer (SSL) or IPsec to encrypt the channel.</span></span> <span data-ttu-id="dd324-128">Si vous devez conserver des informations d'identification dans l'application cliente, chiffrez-les à l'aide des fonctions API de chiffrement.</span><span class="sxs-lookup"><span data-stu-id="dd324-128">If you must persist credentials in the client application, encrypt the credentials by using the crypto API functions.</span></span> <span data-ttu-id="dd324-129">Dans [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] et les versions ultérieures, le paramètre *password* est stocké sous la forme d’un hachage unidirectionnel.</span><span class="sxs-lookup"><span data-stu-id="dd324-129">In [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] and later versions, the parameter *password* is stored as a one-way hash.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="dd324-130">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="dd324-130">Related Tasks</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="dd324-131">Créer un rôle d'application.</span><span class="sxs-lookup"><span data-stu-id="dd324-131">Create an application role.</span></span>|<span data-ttu-id="dd324-132">[Créer un rôle d’application](create-an-application-role.md) et [CREATE APPLICATION ROLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-application-role-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="dd324-132">[Create an Application Role](create-an-application-role.md) and [CREATE APPLICATION ROLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-application-role-transact-sql)</span></span>|  
|<span data-ttu-id="dd324-133">Modifier un rôle d'application.</span><span class="sxs-lookup"><span data-stu-id="dd324-133">Alter an application role.</span></span>|[<span data-ttu-id="dd324-134">ALTER APPLICATION ROLE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="dd324-134">ALTER APPLICATION ROLE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-application-role-transact-sql)|  
|<span data-ttu-id="dd324-135">Supprimer un rôle d'application.</span><span class="sxs-lookup"><span data-stu-id="dd324-135">Delete an application role.</span></span>|[<span data-ttu-id="dd324-136">DROP APPLICATION ROLE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="dd324-136">DROP APPLICATION ROLE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-application-role-transact-sql)|  
|<span data-ttu-id="dd324-137">Utilisation d'un rôle d'application.</span><span class="sxs-lookup"><span data-stu-id="dd324-137">Using an application role.</span></span>|[<span data-ttu-id="dd324-138">sp_setapprole &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="dd324-138">sp_setapprole &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql)|  
  
## <a name="see-also"></a><span data-ttu-id="dd324-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="dd324-139">See Also</span></span>  
 [<span data-ttu-id="dd324-140">Sécurisation de SQL Server</span><span class="sxs-lookup"><span data-stu-id="dd324-140">Securing SQL Server</span></span>](../securing-sql-server.md)  
  
  
