---
title: SQL Server Audit (moteur de base de données) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
f1_keywords:
- audit
helpviewer_keywords:
- SQL Server Audit
- audits [SQL Server], SQL Server Audit
ms.assetid: 0c1fca2e-f22b-4fe8-806f-c87806664f00
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: 2f4f291e5dc4aaa8a240757713cc65bd2a6a8230
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87602022"
---
# <a name="sql-server-audit-database-engine"></a><span data-ttu-id="68b83-102">SQL Server Audit (moteur de base de données)</span><span class="sxs-lookup"><span data-stu-id="68b83-102">SQL Server Audit (Database Engine)</span></span>
  <span data-ttu-id="68b83-103">L'*audit* d'une instance de [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] ou d'une base de données individuelle implique le suivi et la journalisation des événements qui se produisent sur le [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="68b83-103">*Auditing* an instance of the [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] or an individual database involves tracking and logging events that occur on the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> <span data-ttu-id="68b83-104">L'audit[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] vous permet de créer des audits de serveur, qui peuvent contenir des spécifications d'audit de serveur pour les événements de niveau serveur, ainsi que des spécifications d'audit de base de données pour les événements de niveau base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-104">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit lets you create server audits, which can contain server audit specifications for server level events, and database audit specifications for database level events.</span></span> <span data-ttu-id="68b83-105">Les événements audités peuvent être écrits dans les journaux d’événements ou les fichiers d’audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-105">Audited events can be written to the event logs or to audit files.</span></span>  
  
 <span data-ttu-id="68b83-106">Il existe plusieurs niveaux d'audit pour [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], selon les spécifications de normes pour votre installation.</span><span class="sxs-lookup"><span data-stu-id="68b83-106">There are several levels of auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], depending on government or standards requirements for your installation.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="68b83-107">Audit fournit les outils et processus nécessaires pour activer, stocker et afficher les audits sur différents objets de serveur et de base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-107">Audit provides the tools and processes you must have to enable, store, and view audits on various server and database objects.</span></span>  
  
 <span data-ttu-id="68b83-108">Vous pouvez enregistrer des groupes d'actions d'audit du serveur par instance, et des groupes d'actions d'audit de base de données ou des actions d'audit de base de données par base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-108">You can record server audit action groups per-instance, and either database audit action groups or database audit actions per database.</span></span> <span data-ttu-id="68b83-109">L'événement d'audit se produit chaque fois que l'action pouvant être auditée est rencontrée.</span><span class="sxs-lookup"><span data-stu-id="68b83-109">The audit event will occur every time that the auditable action is encountered.</span></span>  
  
 <span data-ttu-id="68b83-110">Toutes les éditions de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prennent en charge les audits de niveau serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-110">All editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] support server level audits.</span></span> <span data-ttu-id="68b83-111">Les audits de niveau base de données sont limités aux éditions Enterprise, Developer et Evaluation.</span><span class="sxs-lookup"><span data-stu-id="68b83-111">Database level auditing is limited to Enterprise, Developer, and Evaluation editions.</span></span> <span data-ttu-id="68b83-112">Pour plus d’informations, consultez [fonctionnalités prises en charge par les éditions de SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-112">For more information, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="sql-server-audit-components"></a><span data-ttu-id="68b83-113">Composants de SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="68b83-113">SQL Server Audit Components</span></span>  
 <span data-ttu-id="68b83-114">Un *audit* correspond à la combinaison de plusieurs éléments au sein d'un package unique pour un groupe spécifique d'actions de serveur ou d'actions de base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-114">An *audit* is the combination of several elements into a single package for a specific group of server actions or database actions.</span></span> <span data-ttu-id="68b83-115">Les composants d'audit de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] se combinent de façon à produire une sortie appelée audit, tout comme une définition de rapport combinée à des graphiques et des éléments de données produit un rapport.</span><span class="sxs-lookup"><span data-stu-id="68b83-115">The components of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit combine to produce an output that is called an audit, just as a report definition combined with graphics and data elements produces a report.</span></span>  
  
 <span data-ttu-id="68b83-116">L’audit de[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] utilise des *événements étendus* pour aider à créer un audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-116">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit uses *Extended Events* to help create an audit.</span></span> <span data-ttu-id="68b83-117">Pour plus d'informations sur les événements étendus, consultez [événements étendus](../../extended-events/extended-events.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-117">For more information about Extended Events, see [Extended Events](../../extended-events/extended-events.md).</span></span>  
  
### <a name="sql-server-audit"></a><span data-ttu-id="68b83-118">SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="68b83-118">SQL Server Audit</span></span>  
 <span data-ttu-id="68b83-119">L’objet *Audit SQL Server* recueille une seule instance des actions et des groupes d’actions au niveau du serveur ou de la base de données à surveiller.</span><span class="sxs-lookup"><span data-stu-id="68b83-119">The *SQL Server Audit* object collects a single instance of server or database-level actions and groups of actions to monitor.</span></span> <span data-ttu-id="68b83-120">L'audit s'effectue au niveau de l'instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-120">The audit is at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance level.</span></span> <span data-ttu-id="68b83-121">Vous pouvez exécuter plusieurs audits par instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-121">You can have multiple audits per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="68b83-122">Lorsque vous définissez un audit, vous spécifiez l'emplacement de sortie des résultats.</span><span class="sxs-lookup"><span data-stu-id="68b83-122">When you define an audit, you specify the location for the output of the results.</span></span> <span data-ttu-id="68b83-123">Il s'agit de la destination de l'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-123">This is the audit destination.</span></span> <span data-ttu-id="68b83-124">L'audit est créé dans un état *désactivé* et ne s'exécute pas automatiquement pour contrôler les actions.</span><span class="sxs-lookup"><span data-stu-id="68b83-124">The audit is created in a *disabled* state, and does not automatically audit any actions.</span></span> <span data-ttu-id="68b83-125">Les données d'audit sont transmises vers la destination de l'audit lorsque ce dernier est activé.</span><span class="sxs-lookup"><span data-stu-id="68b83-125">After the audit is enabled, the audit destination receives data from the audit.</span></span>  
  
### <a name="server-audit-specification"></a><span data-ttu-id="68b83-126">Spécification de l'audit du serveur</span><span class="sxs-lookup"><span data-stu-id="68b83-126">Server Audit Specification</span></span>  
 <span data-ttu-id="68b83-127">L'objet *Spécification de l'audit du serveur* appartient à un audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-127">The *Server Audit Specification* object belongs to an audit.</span></span> <span data-ttu-id="68b83-128">Vous pouvez créer une spécification d'audit de serveur par audit, car tous deux sont créés au niveau de la portée de l'instance [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-128">You can create one server audit specification per audit, because both are created at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance scope.</span></span>  
  
 <span data-ttu-id="68b83-129">La spécification de l'audit du serveur recueille de nombreux groupes d'actions au niveau du serveur déclenchées par la fonctionnalité Événements étendus.</span><span class="sxs-lookup"><span data-stu-id="68b83-129">The server audit specification collects many server-level action groups raised by the Extended Events feature.</span></span> <span data-ttu-id="68b83-130">Vous pouvez inclure des *groupes d'actions d'audit* dans une spécification de l'audit du serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-130">You can include *audit action groups* in a server audit specification.</span></span> <span data-ttu-id="68b83-131">Les groupes d'actions d'audit constituent des groupes d'actions prédéfinis, qui sont les événements atomiques qui se produisent dans le [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span><span class="sxs-lookup"><span data-stu-id="68b83-131">Audit action groups are predefined groups of actions, which are atomic events occurring in the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> <span data-ttu-id="68b83-132">Ces actions sont envoyées à l'audit, qui les enregistre dans la cible.</span><span class="sxs-lookup"><span data-stu-id="68b83-132">These actions are sent to the audit, which records them in the target.</span></span>  
  
 <span data-ttu-id="68b83-133">Les groupes d’actions d’audit au niveau du serveur sont décrits dans la rubrique [Actions et groupes d’actions SQL Server Audit](sql-server-audit-action-groups-and-actions.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-133">Server-level audit action groups are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="database-audit-specification"></a><span data-ttu-id="68b83-134">Spécification de l'audit de la base de données</span><span class="sxs-lookup"><span data-stu-id="68b83-134">Database Audit Specification</span></span>  
 <span data-ttu-id="68b83-135">L'objet *Spécification de l'audit de la base de données* appartient également à un audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-135">The *Database Audit Specification* object also belongs to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit.</span></span> <span data-ttu-id="68b83-136">Vous pouvez créer une spécification de l'audit de la base de données par base de données [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] par audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-136">You can create one database audit specification per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database per audit.</span></span>  
  
 <span data-ttu-id="68b83-137">La spécification de l'audit de la base de données recueille des actions d'audit au niveau de la base de données déclenchées par la fonctionnalité Événements étendus.</span><span class="sxs-lookup"><span data-stu-id="68b83-137">The database audit specification collects database-level audit actions raised by the Extended Events feature.</span></span> <span data-ttu-id="68b83-138">Vous pouvez ajouter des groupes d’actions d’audit ou des événements d’audit à une spécification de l’audit de la base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-138">You can add either audit action groups or audit events to a database audit specification.</span></span> <span data-ttu-id="68b83-139">*Les événements d’audit* sont les opérations atomiques qui peuvent être auditées par le moteur [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-139">*Audit events* are the atomic actions that can be audited by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] engine.</span></span> <span data-ttu-id="68b83-140">Les*groupes d'actions d'audit* sont des groupes d'actions prédéfinis.</span><span class="sxs-lookup"><span data-stu-id="68b83-140">*Audit action groups* are predefined groups of actions.</span></span> <span data-ttu-id="68b83-141">Tous deux sont à la portée de la base de données [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-141">Both are at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database scope.</span></span> <span data-ttu-id="68b83-142">Ces actions sont envoyées à l'audit, qui les enregistre dans la cible.</span><span class="sxs-lookup"><span data-stu-id="68b83-142">These actions are sent to the audit, which records them in the target.</span></span> <span data-ttu-id="68b83-143">N'incluez pas d'objets dans l'étendue du serveur, tels que les vues système, dans une spécification d'audit de base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68b83-143">Do not include server-scoped objects, such as the system views, in a user database audit specification.</span></span>  
  
 <span data-ttu-id="68b83-144">Les actions d’audit et les groupes d’actions d’audit au niveau de la base de données sont décrits dans la rubrique [Actions et groupes d’actions SQL Server Audit](sql-server-audit-action-groups-and-actions.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-144">Database-level audit action groups and audit actions are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="target"></a><span data-ttu-id="68b83-145">Cible</span><span class="sxs-lookup"><span data-stu-id="68b83-145">Target</span></span>  
 <span data-ttu-id="68b83-146">Les résultats d'un audit sont envoyés à une cible, qui peut être un fichier, le journal des événements de sécurité de Windows ou le journal des événements d'applications de Windows.</span><span class="sxs-lookup"><span data-stu-id="68b83-146">The results of an audit are sent to a target, which can be a file, the Windows Security event log, or the Windows Application event log.</span></span> <span data-ttu-id="68b83-147">Les journaux doivent être examinés et archivés périodiquement afin de s'assurer que la cible dispose d'un espace suffisant pour écrire des enregistrements supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="68b83-147">Logs must be reviewed and archived periodically to make sure that the target has sufficient space to write additional records.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="68b83-148">Tout utilisateur authentifié peut lire et écrire dans le journal des événements d'applications de Windows.</span><span class="sxs-lookup"><span data-stu-id="68b83-148">Any authenticated user can read and write to the Windows Application event log.</span></span> <span data-ttu-id="68b83-149">Celui-ci requiert des autorisations inférieures au journal des événements de sécurité de Windows et il est moins sécurisé.</span><span class="sxs-lookup"><span data-stu-id="68b83-149">The Application event log requires lower permissions than the Windows Security event log and is less secure than the Windows Security event log.</span></span>  
  
 <span data-ttu-id="68b83-150">L'écriture dans le journal de sécurité de Windows requiert l'ajout du compte de service [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] à la stratégie **Générer des audits de sécurité** .</span><span class="sxs-lookup"><span data-stu-id="68b83-150">Writing to the Windows Security log requires the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account to be added to the **Generate security audits** policy.</span></span> <span data-ttu-id="68b83-151">Par défaut, les comptes Système Local, Service local et Service réseau font partie de cette stratégie.</span><span class="sxs-lookup"><span data-stu-id="68b83-151">By default, the Local System, Local Service, and Network Service are part of this policy.</span></span> <span data-ttu-id="68b83-152">Ce paramètre peut être configuré à l'aide du composant logiciel enfichable de stratégie de sécurité (secpol.msc).</span><span class="sxs-lookup"><span data-stu-id="68b83-152">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="68b83-153">En outre, la stratégie de sécurité **Auditer l'accès aux objets** doit être activée pour **Succès** et **Échec**.</span><span class="sxs-lookup"><span data-stu-id="68b83-153">Additionally, the **Audit object access** security policy must be enabled for both **Success** and **Failure**.</span></span> <span data-ttu-id="68b83-154">Ce paramètre peut être configuré à l'aide du composant logiciel enfichable de stratégie de sécurité (secpol.msc).</span><span class="sxs-lookup"><span data-stu-id="68b83-154">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="68b83-155">Dans [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] ou Windows Server 2008, vous pouvez définir la stratégie **générée** par l’application plus granulaire à partir de la ligne de commande à l’aide du programme de stratégie d’audit ( `AuditPol.exe)` .</span><span class="sxs-lookup"><span data-stu-id="68b83-155">In [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] or Windows Server 2008, you can set the more granular **application generated** policy from the command line by using the audit policy program (`AuditPol.exe)`.</span></span> <span data-ttu-id="68b83-156">Pour plus d’informations sur les étapes permettant d’activer l’écriture dans le journal de sécurité de Windows, consultez [Écrire des événements d’audit SQL Server dans le journal de sécurité](write-sql-server-audit-events-to-the-security-log.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-156">For more information about the steps to enable writing to the Windows Security log, see [Write SQL Server Audit Events to the Security Log](write-sql-server-audit-events-to-the-security-log.md).</span></span> <span data-ttu-id="68b83-157">Pour en savoir plus sur le programme Auditpol.exe, consultez l’article 921469 de la Base de connaissances : [Comment faire pour utiliser la stratégie de groupe pour configurer des paramètres d'audit de sécurité détaillés](https://support.microsoft.com/kb/921469/).</span><span class="sxs-lookup"><span data-stu-id="68b83-157">For more information about the Auditpol.exe program, see Knowledge Base article 921469, [How to use Group Policy to configure detailed security auditing](https://support.microsoft.com/kb/921469/).</span></span> <span data-ttu-id="68b83-158">Les journaux des événements de Windows sont communs à l'ensemble du système d'exploitation Windows.</span><span class="sxs-lookup"><span data-stu-id="68b83-158">The Windows event logs are global to the Windows operating system.</span></span> <span data-ttu-id="68b83-159">Pour plus d'informations sur les journaux des événements de Windows, consultez [Vue d'ensemble de l'observateur d'événements](https://go.microsoft.com/fwlink/?LinkId=101455).</span><span class="sxs-lookup"><span data-stu-id="68b83-159">For more information about the Windows event logs, see [Event Viewer Overview](https://go.microsoft.com/fwlink/?LinkId=101455).</span></span> <span data-ttu-id="68b83-160">Si vous avez besoin d'autorisations plus précises sur l'audit, utilisez la cible de fichier binaire.</span><span class="sxs-lookup"><span data-stu-id="68b83-160">If you need more precise permissions on the audit, use the binary file target.</span></span>  
  
 <span data-ttu-id="68b83-161">Lorsque vous enregistrez des informations d'audit dans un fichier, pour éviter toute falsification, vous pouvez limiter l'accès à l'emplacement du fichier des façons suivantes :</span><span class="sxs-lookup"><span data-stu-id="68b83-161">When you are saving audit information to a file, to help prevent tampering, you can restrict access to the file location in the following ways:</span></span>  
  
-   <span data-ttu-id="68b83-162">Le compte de service [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] doit posséder des autorisations d'accès en lecture et en écriture.</span><span class="sxs-lookup"><span data-stu-id="68b83-162">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Service Account must have both Read and Write permission.</span></span>  
  
-   <span data-ttu-id="68b83-163">Les administrateurs d'audit ont généralement besoin des autorisations d'accès en lecture et en écriture.</span><span class="sxs-lookup"><span data-stu-id="68b83-163">Audit Administrators typically require Read and Write permission.</span></span> <span data-ttu-id="68b83-164">Cela suppose que ces administrateurs sont des comptes Windows pour l'administration des fichiers d'audit, par exemple leur copie sur des partages différents, leur sauvegarde, entre autres.</span><span class="sxs-lookup"><span data-stu-id="68b83-164">This assumes that the Audit Administrators are Windows accounts for administration of audit files, such as: copying them to different shares, backing them up, and so on.</span></span>  
  
-   <span data-ttu-id="68b83-165">Les lecteurs d'audit qui sont autorisés à lire les fichiers d'audit doivent disposer de l'autorisation d'accès en lecture.</span><span class="sxs-lookup"><span data-stu-id="68b83-165">Audit Readers that are authorized to read audit files must have Read permission.</span></span>  
  
 <span data-ttu-id="68b83-166">Même lorsque le [!INCLUDE[ssDE](../../../includes/ssde-md.md)] écrit dans un fichier, d'autres utilisateurs Windows peuvent lire le fichier d'audit s'ils en ont l'autorisation.</span><span class="sxs-lookup"><span data-stu-id="68b83-166">Even when the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] is writing to a file, other Windows users can read the audit file if they have permission.</span></span> <span data-ttu-id="68b83-167">Le [!INCLUDE[ssDE](../../../includes/ssde-md.md)] n'applique pas de verrou exclusif qui empêche les opérations de lecture.</span><span class="sxs-lookup"><span data-stu-id="68b83-167">The [!INCLUDE[ssDE](../../../includes/ssde-md.md)] does not take an exclusive lock that prevents read operations.</span></span>  
  
 <span data-ttu-id="68b83-168">Dans la mesure où le [!INCLUDE[ssDE](../../../includes/ssde-md.md)] peut accéder au fichier, les connexions [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] qui possèdent l'autorisation CONTROL SERVER peuvent utiliser le [!INCLUDE[ssDE](../../../includes/ssde-md.md)] pour accéder aux fichiers d'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-168">Because the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] can access the file, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] logins that have CONTROL SERVER permission can use the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] to access the audit files.</span></span> <span data-ttu-id="68b83-169">Pour enregistrer tout utilisateur qui lit le fichier d'audit, définissez un audit sur master.sys.fn_get_audit_file.</span><span class="sxs-lookup"><span data-stu-id="68b83-169">To record any user that is reading the audit file, define an audit on master.sys.fn_get_audit_file.</span></span> <span data-ttu-id="68b83-170">Vous enregistrez ainsi les connexions avec l'autorisation CONTROL SERVER qui ont accédé au fichier d'audit par le biais de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="68b83-170">This records the logins with CONTROL SERVER permission that have accessed the audit file through [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="68b83-171">Si un administrateur d'audit copie le fichier à un autre emplacement (entre autres, à des fins d'archivage), les listes de contrôle d'accès du nouvel emplacement doivent disposer uniquement des autorisations suivantes :</span><span class="sxs-lookup"><span data-stu-id="68b83-171">If an Audit Administrator copies the file to a different location (for archive purposes, and so on), the ACLs on the new location should be reduced to the following permissions:</span></span>  
  
-   <span data-ttu-id="68b83-172">Administrateur d’audit - Lecture/Écriture</span><span class="sxs-lookup"><span data-stu-id="68b83-172">Audit Administrator - Read / Write</span></span>  
  
-   <span data-ttu-id="68b83-173">Lecteur d’audit - Lecture</span><span class="sxs-lookup"><span data-stu-id="68b83-173">Audit Reader - Read</span></span>  
  
 <span data-ttu-id="68b83-174">Nous conseillons de générer des rapports d'audit à partir d'une instance distincte de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], telle une instance de [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)], accessible uniquement aux administrateurs ou lecteurs d'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-174">We recommend that you generate audit reports from a separate instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], such as an instance of [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)], to which only Audit Administrators or Audit Readers have access.</span></span> <span data-ttu-id="68b83-175">En utilisant une instance distincte du [!INCLUDE[ssDE](../../../includes/ssde-md.md)] pour la création de rapports, vous pouvez mieux empêcher les utilisateurs non autorisés d'obtenir un accès à l'enregistrement d'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-175">By using a separate instance of the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] for reporting, you can help prevent unauthorized users from obtaining access to the audit record.</span></span>  
  
 <span data-ttu-id="68b83-176">Vous pouvez offrir une protection supplémentaire contre tout accès non autorisé en chiffrant le dossier dans lequel le fichier d'audit est stocké à l'aide du chiffrement de lecteur BitLocker Windows ou du système de fichiers EFS Windows.</span><span class="sxs-lookup"><span data-stu-id="68b83-176">You can offer additional protection against unauthorized access by encrypting the folder in which the audit file is stored by using Windows BitLocker Drive Encryption or Windows Encrypting File System.</span></span>  
  
 <span data-ttu-id="68b83-177">Pour plus d'informations sur les enregistrements d'audit qui sont écrits dans la cible, consultez [SQL Server Audit Records](sql-server-audit-records.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-177">For more information about the audit records that are written to the target, see [SQL Server Audit Records](sql-server-audit-records.md).</span></span>  
  
## <a name="overview-of-using-sql-server-audit"></a><span data-ttu-id="68b83-178">Vue d'ensemble de l'utilisation de SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="68b83-178">Overview of Using SQL Server Audit</span></span>  
 <span data-ttu-id="68b83-179">Vous pouvez utiliser [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] ou [!INCLUDE[tsql](../../../includes/tsql-md.md)] pour définir un audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-179">You can use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] to define an audit.</span></span> <span data-ttu-id="68b83-180">Une fois l'audit créé et activé, la cible reçoit des entrées.</span><span class="sxs-lookup"><span data-stu-id="68b83-180">After the audit is created and enabled, the target will receive entries.</span></span>  
  
 <span data-ttu-id="68b83-181">Vous pouvez lire les journaux des événements de Windows à l'aide de l'utilitaire **Observateur d'événements** de Windows.</span><span class="sxs-lookup"><span data-stu-id="68b83-181">You can read the Windows event logs by using the **Event Viewer** utility in Windows.</span></span> <span data-ttu-id="68b83-182">Si la cible est un fichier, vous pouvez utiliser la **Visionneuse du fichier journal** dans [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] ou la fonction [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) pour lire le fichier journal.</span><span class="sxs-lookup"><span data-stu-id="68b83-182">For file targets, you can use either the **Log File Viewer** in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or the [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) function to read the target file.</span></span>  
  
 <span data-ttu-id="68b83-183">Voici le processus général employé pour créer et utiliser un audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-183">The general process for creating and using an audit is as follows.</span></span>  
  
1.  <span data-ttu-id="68b83-184">Créez un audit et définissez la cible.</span><span class="sxs-lookup"><span data-stu-id="68b83-184">Create an audit and define the target.</span></span>  
  
2.  <span data-ttu-id="68b83-185">Créez une spécification de l'audit du serveur ou une spécification de l'audit de la base de données mappée à l'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-185">Create either a server audit specification or database audit specification that maps to the audit.</span></span> <span data-ttu-id="68b83-186">Activez la spécification d'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-186">Enable the audit specification.</span></span>  
  
3.  <span data-ttu-id="68b83-187">Activez l'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-187">Enable the audit.</span></span>  
  
4.  <span data-ttu-id="68b83-188">Lisez les événements d’audit à l’aide de l’ **Observateur d’événements**Windows, de la **Visionneuse du fichier journal**ou de la fonction fn_get_audit_file.</span><span class="sxs-lookup"><span data-stu-id="68b83-188">Read the audit events by using the Windows **Event Viewer**, **Log File Viewe**r, or the fn_get_audit_file function.</span></span>  
  
 <span data-ttu-id="68b83-189">Pour plus d'informations, consultez [Créer un audit du serveur et une spécification d’audit du serveur](create-a-server-audit-and-server-audit-specification.md) et [Créer une spécification de l’audit du serveur et de la base de données](create-a-server-audit-and-database-audit-specification.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-189">For more information, see [Create a Server Audit and Server Audit Specification](create-a-server-audit-and-server-audit-specification.md) and [Create a Server Audit and Database Audit Specification](create-a-server-audit-and-database-audit-specification.md).</span></span>  
  
## <a name="considerations"></a><span data-ttu-id="68b83-190">Considérations</span><span class="sxs-lookup"><span data-stu-id="68b83-190">Considerations</span></span>  
 <span data-ttu-id="68b83-191">En cas d'échec pendant le lancement de l'audit, le serveur ne démarre pas.</span><span class="sxs-lookup"><span data-stu-id="68b83-191">In the case of a failure during audit initiation, the server will not start.</span></span> <span data-ttu-id="68b83-192">Dans ce cas, vous pouvez démarrer le serveur en saisissant l’option **-f** sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="68b83-192">In this case, the server can be started by using the **-f** option at the command line.</span></span>  
  
 <span data-ttu-id="68b83-193">Lorsqu'un échec de l'audit provoque l'arrêt ou empêche le démarrage du serveur car l'instruction ON_FAILURE=SHUTDOWN est spécifiée pour l'audit, l'événement MSG_AUDIT_FORCED_SHUTDOWN est écrit dans le journal.</span><span class="sxs-lookup"><span data-stu-id="68b83-193">When an audit failure causes the server to shut down or not to start because ON_FAILURE=SHUTDOWN is specified for the audit, the MSG_AUDIT_FORCED_SHUTDOWN event will be written to the log.</span></span> <span data-ttu-id="68b83-194">Étant donné que l'arrêt se produit lors de la première rencontre de ce paramètre, l'événement est écrit une seule fois.</span><span class="sxs-lookup"><span data-stu-id="68b83-194">Because the shutdown will occur on the first encounter of this setting, the event will be written one time.</span></span> <span data-ttu-id="68b83-195">Cet événement est écrit après le message d'échec d'audit qui provoque l'arrêt.</span><span class="sxs-lookup"><span data-stu-id="68b83-195">This event is written after the failure message for the audit causing the shutdown.</span></span> <span data-ttu-id="68b83-196">Un administrateur peut contourner les arrêts provoqués par l’audit en démarrant [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en mode mono-utilisateur, à l’aide de l’indicateur **-m**.</span><span class="sxs-lookup"><span data-stu-id="68b83-196">An administrator can bypass audit-induced shutdowns by starting [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in Single User mode using the **-m** flag.</span></span> <span data-ttu-id="68b83-197">Un démarrage en mode mono-utilisateur rétrograde les audits pour lesquels ON_FAILURE=SHUTDOWN est spécifié pour s'exécuter dans cette session comme ON_FAILURE=CONTINUE.</span><span class="sxs-lookup"><span data-stu-id="68b83-197">If you start in Single User mode, you will downgrade any audit where ON_FAILURE=SHUTDOWN is specified to run in that session as ON_FAILURE=CONTINUE.</span></span> <span data-ttu-id="68b83-198">Quand [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] est démarré à l’aide de l’indicateur **-m**, le message MSG_AUDIT_SHUTDOWN_BYPASSED est écrit dans le journal des erreurs.</span><span class="sxs-lookup"><span data-stu-id="68b83-198">When [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is started by using the **-m** flag, the MSG_AUDIT_SHUTDOWN_BYPASSED message will be written to the error log.</span></span>  
  
 <span data-ttu-id="68b83-199">Pour plus d’informations sur les options de démarrage de service, consultez [Options de démarrage du service moteur de base de données](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-199">For more information about service startup options, see [Database Engine Service Startup Options](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span></span>  
  
### <a name="attaching-a-database-with-an-audit-defined"></a><span data-ttu-id="68b83-200">Attachement d'une base de données avec un audit défini</span><span class="sxs-lookup"><span data-stu-id="68b83-200">Attaching a Database with an Audit Defined</span></span>  
 <span data-ttu-id="68b83-201">L'attachement d'une base de données qui a une spécification d'audit et spécifie un GUID qui n'existe pas sur le serveur génère une spécification d'audit *orpheline* .</span><span class="sxs-lookup"><span data-stu-id="68b83-201">Attaching a database that has an audit specification and specifies a GUID that does not exist on the server will cause an *orphaned* audit specification.</span></span> <span data-ttu-id="68b83-202">Étant donné qu'il n'existe pas d'audit avec un GUID correspondant sur l'instance de serveur, aucun événement d'audit n'est enregistré.</span><span class="sxs-lookup"><span data-stu-id="68b83-202">Because an audit with a matching GUID does not exist on the server instance, no audit events will be recorded.</span></span> <span data-ttu-id="68b83-203">Pour remédier à cette situation, utilisez la commande ALTER DATABASE AUDIT SPECIFICATION pour connecter la spécification d'audit orpheline à un audit du serveur existant.</span><span class="sxs-lookup"><span data-stu-id="68b83-203">To correct this situation, use the ALTER DATABASE AUDIT SPECIFICATION command to connect the orphaned audit specification to an existing server audit.</span></span> <span data-ttu-id="68b83-204">Ou utilisez la commande CREATE SERVER AUDIT pour créer un nouvel audit de serveur avec le GUID spécifié.</span><span class="sxs-lookup"><span data-stu-id="68b83-204">Or, use the CREATE SERVER AUDIT command to create a new server audit with the specified GUID.</span></span>  
  
 <span data-ttu-id="68b83-205">Vous pouvez attacher une base de données pour laquelle une spécification d'audit est définie à une autre édition de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] qui ne prend pas en charge l'audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , telle que [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] , mais les événements d'audit ne seront pas enregistrés.</span><span class="sxs-lookup"><span data-stu-id="68b83-205">You can attach a database that has an audit specification defined on it to another edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that does not support [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit, such as [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] but it will not record audit events.</span></span>  
  
### <a name="database-mirroring-and-sql-server-audit"></a><span data-ttu-id="68b83-206">Mise en miroir de bases de données et SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="68b83-206">Database Mirroring and SQL Server Audit</span></span>  
 <span data-ttu-id="68b83-207">Une base de données qui possède une spécification d'audit définie et qui utilise la mise en miroir de bases de données inclut la spécification de l'audit de la base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-207">A database that has a database audit specification defined and that uses database mirroring will include the database audit specification.</span></span> <span data-ttu-id="68b83-208">Pour fonctionner correctement sur l'instance SQL en miroir, les éléments suivants doivent être configurés :</span><span class="sxs-lookup"><span data-stu-id="68b83-208">To work correctly on the mirrored SQL instance, the following items must be configured:</span></span>  
  
-   <span data-ttu-id="68b83-209">Le serveur miroir doit avoir un audit avec le même GUID afin de permettre à la spécification de l'audit de la base de données d'écrire des enregistrements d'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-209">The mirror server must have an audit with the same GUID to enable the database audit specification to write audit records.</span></span> <span data-ttu-id="68b83-210">Vous pouvez configurer ce paramètre à l’aide de la commande CREATe AUDIT WITH GUID `=` \* \<GUID from source Server Audit*> .</span><span class="sxs-lookup"><span data-stu-id="68b83-210">This can be configured by using the command CREATE AUDIT WITH GUID`=`\*\<GUID from source Server Audit*>.</span></span>  
  
-   <span data-ttu-id="68b83-211">Si la cible est un fichier binaire, le compte de service de serveur miroir doit avoir des autorisations appropriées pour l'emplacement où le journal d'audit est écrit.</span><span class="sxs-lookup"><span data-stu-id="68b83-211">For binary file targets, the mirror server service account must have appropriate permissions to the location where the audit trail is being written.</span></span>  
  
-   <span data-ttu-id="68b83-212">Si la cible est le journal des événements Windows, la stratégie de sécurité sur l'ordinateur où le serveur miroir se trouve doit autoriser l'accès du compte de service au journal des événements de sécurité ou des applications.</span><span class="sxs-lookup"><span data-stu-id="68b83-212">For Windows event log targets, the security policy on the computer where the mirror server is located must allow for service account access to the security or application event log.</span></span>  
  
### <a name="auditing-administrators"></a><span data-ttu-id="68b83-213">Administrateurs d'audit</span><span class="sxs-lookup"><span data-stu-id="68b83-213">Auditing Administrators</span></span>  
 <span data-ttu-id="68b83-214">Les membres du `sysadmin` rôle serveur fixe sont identifiés comme utilisateur **dbo** dans chaque base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-214">Members of the `sysadmin` fixed server role are identified as the **dbo** user in each database.</span></span> <span data-ttu-id="68b83-215">Pour auditer les actions des administrateurs, auditez les actions de l'utilisateur **dbo** .</span><span class="sxs-lookup"><span data-stu-id="68b83-215">To audit actions of the administrators, audit the actions of the **dbo** user.</span></span>  
  
## <a name="creating-and-managing-audits-with-transact-sql"></a><span data-ttu-id="68b83-216">Création et gestion d'audits avec Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="68b83-216">Creating and Managing Audits with Transact-SQL</span></span>  
 <span data-ttu-id="68b83-217">Vous pouvez utiliser des instructions DDL, des vues et fonctions de gestion dynamique et des affichages catalogue pour implémenter tous les aspects de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-217">You can use DDL statements, dynamic management views and functions, and catalog views to implement all aspects of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>  
  
### <a name="data-definition-language-statements"></a><span data-ttu-id="68b83-218">Instructions DDL (Data Definition Language)</span><span class="sxs-lookup"><span data-stu-id="68b83-218">Data Definition Language Statements</span></span>  
 <span data-ttu-id="68b83-219">Vous pouvez utiliser les instructions DDL suivantes pour créer, modifier et supprimer des spécifications d'audit :</span><span class="sxs-lookup"><span data-stu-id="68b83-219">You can use the following DDL statements to create, alter, and drop audit specifications:</span></span>  
  
|||  
|-|-|  
|[<span data-ttu-id="68b83-220">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="68b83-220">ALTER AUTHORIZATION</span></span>](/sql/t-sql/statements/alter-authorization-transact-sql)|[<span data-ttu-id="68b83-221">CREATE SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="68b83-221">CREATE SERVER AUDIT</span></span>](/sql/t-sql/statements/create-server-audit-transact-sql)|  
|[<span data-ttu-id="68b83-222">ALTER DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="68b83-222">ALTER DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-database-audit-specification-transact-sql)|[<span data-ttu-id="68b83-223">CREATE SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="68b83-223">CREATE SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-server-audit-specification-transact-sql)|  
|[<span data-ttu-id="68b83-224">ALTER SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="68b83-224">ALTER SERVER AUDIT</span></span>](/sql/t-sql/statements/alter-server-audit-specification-transact-sql)|[<span data-ttu-id="68b83-225">DROP DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="68b83-225">DROP DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-database-encryption-key-transact-sql)|  
|[<span data-ttu-id="68b83-226">ALTER SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="68b83-226">ALTER SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-server-audit-transact-sql)|[<span data-ttu-id="68b83-227">DROP SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="68b83-227">DROP SERVER AUDIT</span></span>](/sql/t-sql/statements/drop-server-audit-transact-sql)|  
|[<span data-ttu-id="68b83-228">CREATE DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="68b83-228">CREATE DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-database-audit-specification-transact-sql)|[<span data-ttu-id="68b83-229">DROP SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="68b83-229">DROP SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-server-audit-specification-transact-sql)|  
  
### <a name="dynamic-views-and-functions"></a><span data-ttu-id="68b83-230">Fonctions et vues dynamiques</span><span class="sxs-lookup"><span data-stu-id="68b83-230">Dynamic Views and Functions</span></span>  
 <span data-ttu-id="68b83-231">Le tableau suivant répertorie les vues et fonctions dynamiques que vous pouvez utiliser pour l'audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-231">The following table lists the dynamic views and function that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Auditing.</span></span>  
  
|<span data-ttu-id="68b83-232">Fonctions et vues dynamiques</span><span class="sxs-lookup"><span data-stu-id="68b83-232">Dynamic views and functions</span></span>|<span data-ttu-id="68b83-233">Description</span><span class="sxs-lookup"><span data-stu-id="68b83-233">Description</span></span>|  
|---------------------------------|-----------------|  
|[<span data-ttu-id="68b83-234">sys.dm_audit_actions</span><span class="sxs-lookup"><span data-stu-id="68b83-234">sys.dm_audit_actions</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-actions-transact-sql)|<span data-ttu-id="68b83-235">Retourne une ligne pour chaque action d'audit qui peut être signalée dans le journal d'audit et chaque groupe d'actions d'audit qui peut être configuré dans le cadre de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-235">Returns a row for every audit action that can be reported in the audit log and every audit action group that can be configured as part of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>|  
|[<span data-ttu-id="68b83-236">sys.dm_server_audit_status</span><span class="sxs-lookup"><span data-stu-id="68b83-236">sys.dm_server_audit_status</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-server-audit-status-transact-sql)|<span data-ttu-id="68b83-237">Fournit des informations sur l'état actuel de l'audit.</span><span class="sxs-lookup"><span data-stu-id="68b83-237">Provides information about the current state of the audit.</span></span>|  
|[<span data-ttu-id="68b83-238">sys.dm_audit_class_type_map</span><span class="sxs-lookup"><span data-stu-id="68b83-238">sys.dm_audit_class_type_map</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-class-type-map-transact-sql)|<span data-ttu-id="68b83-239">Retourne une table qui mappe le champ class_type dans le journal d'audit au champ class_desc dans sys.dm_audit_actions.</span><span class="sxs-lookup"><span data-stu-id="68b83-239">Returns a table that maps the class_type field in the audit log to the class_desc field in sys.dm_audit_actions.</span></span>|  
|[<span data-ttu-id="68b83-240">fn_get_audit_file</span><span class="sxs-lookup"><span data-stu-id="68b83-240">fn_get_audit_file</span></span>](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql)|<span data-ttu-id="68b83-241">Retourne des informations à partir d'un fichier d'audit créé par un audit du serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-241">Returns information from an audit file created by a server audit.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="68b83-242">Affichages catalogue</span><span class="sxs-lookup"><span data-stu-id="68b83-242">Catalog Views</span></span>  
 <span data-ttu-id="68b83-243">Le tableau suivant répertorie les affichages catalogue que vous pouvez utiliser pour l'audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-243">The following table lists the catalog views that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] auditing.</span></span>  
  
|<span data-ttu-id="68b83-244">Affichages catalogue</span><span class="sxs-lookup"><span data-stu-id="68b83-244">Catalog views</span></span>|<span data-ttu-id="68b83-245">Description</span><span class="sxs-lookup"><span data-stu-id="68b83-245">Description</span></span>|  
|-------------------|-----------------|  
|[<span data-ttu-id="68b83-246">sys.database_ audit_specifications</span><span class="sxs-lookup"><span data-stu-id="68b83-246">sys.database_ audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specifications-transact-sql)|<span data-ttu-id="68b83-247">Contient des informations sur les spécifications de l'audit de la base de données dans un audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sur une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-247">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="68b83-248">sys.database_audit_specification_details</span><span class="sxs-lookup"><span data-stu-id="68b83-248">sys.database_audit_specification_details</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specification-details-transact-sql)|<span data-ttu-id="68b83-249">Contient des informations sur les spécifications de l’audit de la base de données dans un audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sur une instance de serveur, pour toutes les bases de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-249">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance for all databases.</span></span>|  
|[<span data-ttu-id="68b83-250">sys.server_audits</span><span class="sxs-lookup"><span data-stu-id="68b83-250">sys.server_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audits-transact-sql)|<span data-ttu-id="68b83-251">Contient une ligne pour chaque audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] dans une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-251">Contains one row for each [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit in a server instance.</span></span>|  
|[<span data-ttu-id="68b83-252">sys.server_audit_specifications</span><span class="sxs-lookup"><span data-stu-id="68b83-252">sys.server_audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specifications-transact-sql)|<span data-ttu-id="68b83-253">Contient des informations à propos des spécifications de l'audit du serveur dans un audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sur une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-253">Contains information about the server audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="68b83-254">sys.server_audit_specifications_details</span><span class="sxs-lookup"><span data-stu-id="68b83-254">sys.server_audit_specifications_details</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specification-details-transact-sql)|<span data-ttu-id="68b83-255">Contient des informations sur les détails (actions) d’une spécification de l’audit du serveur dans un audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sur une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-255">Contains information about the server audit specification details (actions) in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="68b83-256">sys.server_file_audits</span><span class="sxs-lookup"><span data-stu-id="68b83-256">sys.server_file_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-file-audits-transact-sql)|<span data-ttu-id="68b83-257">Contient les informations détaillées des magasins à propos du type d'audit de fichier dans un audit [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] sur une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="68b83-257">Contains stores extended information about the file audit type in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="68b83-258">Autorisations</span><span class="sxs-lookup"><span data-stu-id="68b83-258">Permissions</span></span>  
 <span data-ttu-id="68b83-259">Chaque fonctionnalité et commande pour [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit a des spécifications d'autorisation individuelles.</span><span class="sxs-lookup"><span data-stu-id="68b83-259">Each feature and command for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit has individual permission requirements.</span></span>  
  
 <span data-ttu-id="68b83-260">Pour créer, modifier ou supprimer un audit du serveur ou une spécification de l'audit du serveur, les principaux du serveur requièrent l'autorisation ALTER ANY SERVER AUDIT ou CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="68b83-260">To create, alter, or drop a Server Audit or Server Audit Specification, server principals require the ALTER ANY SERVER AUDIT or the CONTROL SERVER permission.</span></span> <span data-ttu-id="68b83-261">Pour créer, modifier ou supprimer une spécification de l'audit de la base de données, les principaux de la base de données requièrent l'autorisation ALTER ANY DATABASE AUDIT, ou l'autorisation ALTER ou CONTROL sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-261">To create, alter, or drop a Database Audit Specification, database principals require the ALTER ANY DATABASE AUDIT permission or the ALTER or CONTROL permission on the database.</span></span> <span data-ttu-id="68b83-262">De plus, les principaux doivent soit avoir l'autorisation de se connecter à la base de données, soit disposer des autorisations ALTER ANY SERVER AUDIT ou CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="68b83-262">In addition, principals must have permission to connect to the database, or ALTER ANY SERVER AUDIT or CONTROL SERVER permissions.</span></span>  
  
 <span data-ttu-id="68b83-263">Sauf indication contraire, la consultation des affichages catalogue nécessite qu'un principal dispose de l'un des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="68b83-263">Unless otherwise specified, viewing catalog views requires a principal to have one of the following:</span></span>  
  
-   <span data-ttu-id="68b83-264">appartenance au rôle serveur fixe sysadmin ;</span><span class="sxs-lookup"><span data-stu-id="68b83-264">Membership in the sysadmin fixed server role.</span></span>  
  
-   <span data-ttu-id="68b83-265">autorisation CONTROL SERVER ;</span><span class="sxs-lookup"><span data-stu-id="68b83-265">The CONTROL SERVER permission.</span></span>  
  
-   <span data-ttu-id="68b83-266">autorisation VIEW SERVER STATE ;</span><span class="sxs-lookup"><span data-stu-id="68b83-266">The VIEW SERVER STATE permission.</span></span>  
  
-   <span data-ttu-id="68b83-267">autorisation ALTER ANY AUDIT ;</span><span class="sxs-lookup"><span data-stu-id="68b83-267">The ALTER ANY AUDIT permission.</span></span>  
  
-   <span data-ttu-id="68b83-268">autorisation VIEW AUDIT STATE (donne uniquement au principal l'accès à l'affichage catalogue sys.server_audits).</span><span class="sxs-lookup"><span data-stu-id="68b83-268">The VIEW AUDIT STATE permission (gives only the principal access to the sys.server_audits catalog view).</span></span>  
  
 <span data-ttu-id="68b83-269">Un principal doit avoir l'autorisation VIEW SERVER STATE ou ALTER ANY AUDIT pour utiliser les vues de gestion dynamique.</span><span class="sxs-lookup"><span data-stu-id="68b83-269">A principal must have the VIEW SERVER STATE or ALTER ANY AUDIT permission to use the Dynamic Management Views.</span></span>  
  
 <span data-ttu-id="68b83-270">Pour plus d’informations sur l’octroi de droits et d’autorisations, consultez [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="68b83-270">For more information about how to grant rights and permissions, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="68b83-271">Les principaux dans le rôle sysadmin peuvent falsifier tout composant d'audit et ceux dans le rôle db_owner peuvent falsifier les spécifications d'audit dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-271">Principals in the sysadmin role can tamper with any audit component and those in the db_owner role can tamper with audit specifications in a database.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="68b83-272">Audit s'assure qu'une ouverture de session qui crée ou modifie une spécification d'audit possède au moins l'autorisation ALTER ANY DATABASE AUDIT.</span><span class="sxs-lookup"><span data-stu-id="68b83-272">Audit will validate that a logon that creates or alters an audit specification has at least the ALTER ANY DATABASE AUDIT permission.</span></span> <span data-ttu-id="68b83-273">Toutefois, aucune validation n'est effectuée lorsque vous attachez une base de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-273">However, it does no validation when you attach a database.</span></span> <span data-ttu-id="68b83-274">Vous devez supposer que toutes les spécifications de l'audit de la base de données sont aussi dignes de confiance que les principaux dans le rôle sysadmin ou db_owner.</span><span class="sxs-lookup"><span data-stu-id="68b83-274">You should assume all Database Audit Specifications are only as trustworthy as those principals in the sysadmin or db_owner role.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="68b83-275">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="68b83-275">Related Tasks</span></span>  
 [<span data-ttu-id="68b83-276">Créer un audit du serveur et une spécification d’audit du serveur</span><span class="sxs-lookup"><span data-stu-id="68b83-276">Create a Server Audit and Server Audit Specification</span></span>](create-a-server-audit-and-server-audit-specification.md)  
  
 [<span data-ttu-id="68b83-277">Créer une spécification de l’audit du serveur et de la base de données</span><span class="sxs-lookup"><span data-stu-id="68b83-277">Create a Server Audit and Database Audit Specification</span></span>](create-a-server-audit-and-database-audit-specification.md)  
  
 [<span data-ttu-id="68b83-278">Afficher un journal d’audit SQL Server</span><span class="sxs-lookup"><span data-stu-id="68b83-278">View a SQL Server Audit Log</span></span>](view-a-sql-server-audit-log.md)  
  
 [<span data-ttu-id="68b83-279">Écrire des événements d’audit SQL Server dans le journal de sécurité</span><span class="sxs-lookup"><span data-stu-id="68b83-279">Write SQL Server Audit Events to the Security Log</span></span>](write-sql-server-audit-events-to-the-security-log.md)  
  
## <a name="topics-closely-related-to-auditing"></a><span data-ttu-id="68b83-280">Rubriques étroitement associées à l'audit</span><span class="sxs-lookup"><span data-stu-id="68b83-280">Topics Closely Related to Auditing</span></span>  
 [<span data-ttu-id="68b83-281">Propriétés du serveur &#40;page Sécurité&#41;</span><span class="sxs-lookup"><span data-stu-id="68b83-281">Server Properties &#40;Security Page&#41;</span></span>](../../../database-engine/configure-windows/server-properties-security-page.md)  
 <span data-ttu-id="68b83-282">Explique comment activer l'audit de connexion pour [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="68b83-282">Explains how to turn on login auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="68b83-283">Les enregistrements d'audit sont stockés dans le journal des applications Windows.</span><span class="sxs-lookup"><span data-stu-id="68b83-283">The audit records are stored in the Windows application log.</span></span>  
  
 [<span data-ttu-id="68b83-284">Mode d’audit C2 (option de configuration de serveur)</span><span class="sxs-lookup"><span data-stu-id="68b83-284">c2 audit mode Server Configuration Option</span></span>](../../../database-engine/configure-windows/c2-audit-mode-server-configuration-option.md)  
 <span data-ttu-id="68b83-285">Explique le mode d'audit de compatibilité de sécurité C2 dans [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="68b83-285">Explains the C2 security compliance auditing mode in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 [<span data-ttu-id="68b83-286">Catégorie d’événements d’audit de sécurité &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="68b83-286">Security Audit Event Category &#40;SQL Server Profiler&#41;</span></span>](../../../relational-databases/event-classes/security-audit-event-category-sql-server-profiler.md)  
 <span data-ttu-id="68b83-287">Explique les événements d'audit que vous pouvez utiliser dans [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="68b83-287">Explains the audit events you can use in [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="68b83-288">Pour en savoir plus, voir [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="68b83-288">For more information, see [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span></span>  
  
 [<span data-ttu-id="68b83-289">Trace SQL</span><span class="sxs-lookup"><span data-stu-id="68b83-289">SQL Trace</span></span>](../../sql-trace/sql-trace.md)  
 <span data-ttu-id="68b83-290">Explique comment utiliser Trace SQL à partir de vos propres applications pour créer des traces manuellement au lieu d’utiliser [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler.</span><span class="sxs-lookup"><span data-stu-id="68b83-290">Explains how SQL Trace can be used from within your own applications to create traces manually, instead of using [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler.</span></span>  
  
 [<span data-ttu-id="68b83-291">Déclencheurs DDL</span><span class="sxs-lookup"><span data-stu-id="68b83-291">DDL Triggers</span></span>](../../triggers/ddl-triggers.md)  
 <span data-ttu-id="68b83-292">Explique comment utiliser des déclencheurs DDL (Data Definition Language) pour effectuer le suivi des modifications de vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="68b83-292">Explains how you can use Data Definition Language (DDL) triggers to track changes to your databases.</span></span>  
  
 [<span data-ttu-id="68b83-293">Microsoft TechNet - TechCenter SQL Server : Sécurité et protection SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="68b83-293">Microsoft TechNet: SQL Server TechCenter: SQL Server 2005 Security and Protection</span></span>](https://go.microsoft.com/fwlink/?LinkId=101152)  
 <span data-ttu-id="68b83-294">Fournit des informations à jour sur la sécurité de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="68b83-294">Provides up-to-date information about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="68b83-295">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="68b83-295">See Also</span></span>  
 <span data-ttu-id="68b83-296">[Actions et groupes d’actions SQL Server Audit](sql-server-audit-action-groups-and-actions.md) </span><span class="sxs-lookup"><span data-stu-id="68b83-296">[SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md) </span></span>  
 [<span data-ttu-id="68b83-297">Enregistrements SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="68b83-297">SQL Server Audit Records</span></span>](sql-server-audit-records.md)  
  
  
