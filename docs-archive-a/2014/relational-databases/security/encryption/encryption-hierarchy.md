---
title: Hiérarchie de chiffrement | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- encryption [SQL Server], hierarchies
- cryptography [SQL Server], hierarchies
- encryption keys [SQL Server]
- security [SQL Server], encryption
- hierarchies [SQL Server], encryption
ms.assetid: 96c276d5-1bba-4e95-b678-10f059f1fbcf
author: jaszymas
ms.author: jaszymas
ms.openlocfilehash: d38bb83c2f6a2487e547c4686be5c65bc012e33e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709052"
---
# <a name="encryption-hierarchy"></a><span data-ttu-id="ef03c-102">Hiérarchie de chiffrement</span><span class="sxs-lookup"><span data-stu-id="ef03c-102">Encryption Hierarchy</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="ef03c-103">chiffre les données avec un chiffrement hiérarchique et une infrastructure de gestion des clés.</span><span class="sxs-lookup"><span data-stu-id="ef03c-103">encrypts data with a hierarchical encryption and key management infrastructure.</span></span> <span data-ttu-id="ef03c-104">Chaque couche chiffre la couche qui se trouve en dessous d'elle à l'aide d'une combinaison de certificats, de clés asymétriques et de clés symétriques.</span><span class="sxs-lookup"><span data-stu-id="ef03c-104">Each layer encrypts the layer below it by using a combination of certificates, asymmetric keys, and symmetric keys.</span></span> <span data-ttu-id="ef03c-105">Les clés asymétriques et les clés symétriques peuvent être stockées hors de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] dans un module de gestion de clés extensible (EKM, Extensible Key Management).</span><span class="sxs-lookup"><span data-stu-id="ef03c-105">Asymmetric keys and symmetric keys can be stored outside of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in an Extensible Key Management (EKM) module.</span></span>  
  
 <span data-ttu-id="ef03c-106">L'illustration suivante montre que chaque couche de la hiérarchie de chiffrement chiffre la couche qui se trouve en dessous d'elle, et affiche les configurations de chiffrement les plus communes.</span><span class="sxs-lookup"><span data-stu-id="ef03c-106">The following illustration shows that each layer of the encryption hierarchy encrypts the layer beneath it, and displays the most common encryption configurations.</span></span> <span data-ttu-id="ef03c-107">L'accès au sommet de la hiérarchie est généralement protégé par un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="ef03c-107">The access to the start of the hierarchy is usually protected by a password.</span></span>  
  
 <span data-ttu-id="ef03c-108">![Affiche des combinaisons de chiffrement dans une pile.](../../../database-engine/media/encryption-hierarchy-stack.gif "Affiche des combinaisons de chiffrement dans une pile.")</span><span class="sxs-lookup"><span data-stu-id="ef03c-108">![Displays some encryption combinations in a stack.](../../../database-engine/media/encryption-hierarchy-stack.gif "Displays some encryption combinations in a stack.")</span></span>  
  
 <span data-ttu-id="ef03c-109">Gardez en mémoire les concepts suivants :</span><span class="sxs-lookup"><span data-stu-id="ef03c-109">Keep in mind the following concepts:</span></span>  
  
-   <span data-ttu-id="ef03c-110">Pour optimiser les performances, chiffrez les données en utilisant des clés symétriques plutôt que des certificats ou des clés asymétriques.</span><span class="sxs-lookup"><span data-stu-id="ef03c-110">For best performance, encrypt data using symmetric keys instead of certificates or asymmetric keys.</span></span>  
  
-   <span data-ttu-id="ef03c-111">Les clés principales de base de données sont protégées par la clé principale du service.</span><span class="sxs-lookup"><span data-stu-id="ef03c-111">Database master keys are protected by the Service Master Key.</span></span> <span data-ttu-id="ef03c-112">La clé principale du service est créée par le programme d'installation de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] et est chiffrée avec l'API de protection des données (DPAPI) Windows.</span><span class="sxs-lookup"><span data-stu-id="ef03c-112">The Service Master Key is created by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup and is encrypted with the Windows Data Protection API (DPAPI).</span></span>  
  
-   <span data-ttu-id="ef03c-113">D'autres hiérarchies de chiffrement avec des couches supplémentaires sont possibles.</span><span class="sxs-lookup"><span data-stu-id="ef03c-113">Other encryption hierarchies stacking additional layers are possible.</span></span>  
  
-   <span data-ttu-id="ef03c-114">Un module Gestion de clés extensible (EKM) maintient les clés symétriques ou asymétriques hors de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ef03c-114">An Extensible Key Management (EKM) module holds symmetric or asymmetric keys outside of SQL Server.</span></span>  
  
-   <span data-ttu-id="ef03c-115">Le chiffrement transparent des données (TDE, Transparent Data Encryption) doit utiliser une clé symétrique appelée la clé de chiffrement de base de données qui est protégée soit par un certificat qui est lui-même protégé par la clé principale de base de données de la base de données MASTER, soit par une clé asymétrique stockée dans un module EKM.</span><span class="sxs-lookup"><span data-stu-id="ef03c-115">Transparent Data Encryption (TDE) must use a symmetric key called the database encryption key which is protected by either a certificate protected by the database master key of the master database, or by an asymmetric key stored in an EKM.</span></span>  
  
-   <span data-ttu-id="ef03c-116">La clé principale du service et toutes les clés principales de base de données sont protégées par des clés symétriques.</span><span class="sxs-lookup"><span data-stu-id="ef03c-116">The Service Master Key and all Database Master Keys are symmetric keys.</span></span>  
  
 <span data-ttu-id="ef03c-117">L'illustration suivante montre les mêmes informations de manière différente.</span><span class="sxs-lookup"><span data-stu-id="ef03c-117">The following illustration shows the same information in an alternative manner.</span></span>  
  
 <span data-ttu-id="ef03c-118">![Affiche des combinaisons de chiffrement dans une roue.](../../../database-engine/media/encryption-hierarchy-wheel.gif "Affiche des combinaisons de chiffrement dans une roue.")</span><span class="sxs-lookup"><span data-stu-id="ef03c-118">![Displays some encryption combinations in a wheel.](../../../database-engine/media/encryption-hierarchy-wheel.gif "Displays some encryption combinations in a wheel.")</span></span>  
  
 <span data-ttu-id="ef03c-119">Ce diagramme illustre les concepts supplémentaires suivants :</span><span class="sxs-lookup"><span data-stu-id="ef03c-119">This diagram illustrates the following additional concepts:</span></span>  
  
-   <span data-ttu-id="ef03c-120">Dans cette illustration, les flèches indiquent des hiérarchies de chiffrement communes.</span><span class="sxs-lookup"><span data-stu-id="ef03c-120">In this illustration, arrows indicate common encryption hierarchies.</span></span>  
  
-   <span data-ttu-id="ef03c-121">Les clés symétriques et asymétriques du module EKM peuvent protéger l'accès aux clés symétriques et asymétriques stockées dans [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ef03c-121">Symmetric and asymmetric keys in the EKM can protect access to the symmetric and asymmetric keys stored in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ef03c-122">La ligne en pointillés associée à EKM indique que les clés du module EKM pourraient remplacer les clés symétriques et asymétriques stockées dans [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ef03c-122">The dotted line associated with EKM indicates that keys in the EKM could replace the symmetric and asymmetric keys stored in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="encryption-mechanisms"></a><span data-ttu-id="ef03c-123">Mécanismes de chiffrement</span><span class="sxs-lookup"><span data-stu-id="ef03c-123">Encryption Mechanisms</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="ef03c-124">fournit les mécanismes de chiffrement suivants :</span><span class="sxs-lookup"><span data-stu-id="ef03c-124">provides the following mechanisms for encryption:</span></span>  
  
-   [!INCLUDE[tsql](../../../includes/tsql-md.md)] <span data-ttu-id="ef03c-125">fonctions</span><span class="sxs-lookup"><span data-stu-id="ef03c-125">functions</span></span>  
  
-   <span data-ttu-id="ef03c-126">Clés asymétriques</span><span class="sxs-lookup"><span data-stu-id="ef03c-126">Asymmetric keys</span></span>  
  
-   <span data-ttu-id="ef03c-127">Clés symétriques</span><span class="sxs-lookup"><span data-stu-id="ef03c-127">Symmetric keys</span></span>  
  
-   <span data-ttu-id="ef03c-128">Certificats</span><span class="sxs-lookup"><span data-stu-id="ef03c-128">Certificates</span></span>  
  
-   <span data-ttu-id="ef03c-129">chiffrement transparent des données</span><span class="sxs-lookup"><span data-stu-id="ef03c-129">Transparent Data Encryption</span></span>  
  
### <a name="transact-sql-functions"></a><span data-ttu-id="ef03c-130">Fonctions Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="ef03c-130">Transact-SQL Functions</span></span>  
 <span data-ttu-id="ef03c-131">Des éléments individuels peuvent être chiffrés dès leur insertion ou mise à jour à l’aide de fonctions [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ef03c-131">Individual items can be encrypted as they are inserted or updated using [!INCLUDE[tsql](../../../includes/tsql-md.md)] functions.</span></span> <span data-ttu-id="ef03c-132">Pour plus d’informations, consultez [ENCRYPTBYPASSPHRASE &#40;Transact-SQL&#41;](/sql/t-sql/functions/encryptbypassphrase-transact-sql) et [DECRYPTBYPASSPHRASE &#40;Transact-SQL&#41;](/sql/t-sql/functions/decryptbypassphrase-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="ef03c-132">For more information, see [ENCRYPTBYPASSPHRASE &#40;Transact-SQL&#41;](/sql/t-sql/functions/encryptbypassphrase-transact-sql) and [DECRYPTBYPASSPHRASE &#40;Transact-SQL&#41;](/sql/t-sql/functions/decryptbypassphrase-transact-sql).</span></span>  
  
### <a name="certificates"></a><span data-ttu-id="ef03c-133">Certificats</span><span class="sxs-lookup"><span data-stu-id="ef03c-133">Certificates</span></span>  
 <span data-ttu-id="ef03c-134">Un certificat de clé publique, généralement appelé simplement un certificat, est une instruction signée numériquement qui lie la valeur d'une clé publique à l'identité de la personne, de la machine ou du service qui contient la clé privée correspondante.</span><span class="sxs-lookup"><span data-stu-id="ef03c-134">A public key certificate, usually just called a certificate, is a digitally-signed statement that binds the value of a public key to the identity of the person, device, or service that holds the corresponding private key.</span></span> <span data-ttu-id="ef03c-135">Les certificats sont émis et signés par une autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="ef03c-135">Certificates are issued and signed by a certification authority (CA).</span></span> <span data-ttu-id="ef03c-136">L'entité qui reçoit un certificat d'une autorité de certification est le sujet de ce certificat.</span><span class="sxs-lookup"><span data-stu-id="ef03c-136">The entity that receives a certificate from a CA is the subject of that certificate.</span></span> <span data-ttu-id="ef03c-137">En général, les certificats contiennent les informations suivantes.</span><span class="sxs-lookup"><span data-stu-id="ef03c-137">Typically, certificates contain the following information.</span></span>  
  
-   <span data-ttu-id="ef03c-138">Clé publique du sujet.</span><span class="sxs-lookup"><span data-stu-id="ef03c-138">The public key of the subject.</span></span>  
  
-   <span data-ttu-id="ef03c-139">Informations identifiant le sujet, par exemple son nom et son adresse de messagerie.</span><span class="sxs-lookup"><span data-stu-id="ef03c-139">The identifier information of the subject, such as the name and e-mail address.</span></span>  
  
-   <span data-ttu-id="ef03c-140">Période de validité.</span><span class="sxs-lookup"><span data-stu-id="ef03c-140">The validity period.</span></span> <span data-ttu-id="ef03c-141">Il s'agit de la durée pendant laquelle le certificat est valide.</span><span class="sxs-lookup"><span data-stu-id="ef03c-141">This is the length of time that the certificate is considered valid.</span></span>  
  
     <span data-ttu-id="ef03c-142">Un certificat n’est valide que pour la durée spécifiée dans celui-ci. Chaque certificat contient les dates **Valide à partir du** et **Valide jusqu’au** .</span><span class="sxs-lookup"><span data-stu-id="ef03c-142">A certificate is valid only for the period of time specified within it; every certificate contains **Valid From** and **Valid To** dates.</span></span> <span data-ttu-id="ef03c-143">Ces dates définissent les limites de la période de validité.</span><span class="sxs-lookup"><span data-stu-id="ef03c-143">These dates set the boundaries of the validity period.</span></span> <span data-ttu-id="ef03c-144">Lorsque la période de validité d'un certificat est dépassée, un nouveau certificat doit être demandé par le sujet du certificat expiré.</span><span class="sxs-lookup"><span data-stu-id="ef03c-144">When the validity period for a certificate has passed, a new certificate must be requested by the subject of the now-expired certificate.</span></span>  
  
-   <span data-ttu-id="ef03c-145">Des informations identifiant l'émetteur.</span><span class="sxs-lookup"><span data-stu-id="ef03c-145">Issuer identifier information.</span></span>  
  
-   <span data-ttu-id="ef03c-146">Signature numérique de l'émetteur.</span><span class="sxs-lookup"><span data-stu-id="ef03c-146">The digital signature of the issuer.</span></span>  
  
     <span data-ttu-id="ef03c-147">Cette signature atteste de la validité du lien entre la clé publique et les informations identifiant le sujet.</span><span class="sxs-lookup"><span data-stu-id="ef03c-147">This signature attests to the validity of the binding between the public key and the identifier information of the subject.</span></span> <span data-ttu-id="ef03c-148">(Le processus de signature numérique des informations implique la transformation de celles-ci, ainsi que la présence d'informations secrètes connues de l'expéditeur dans une balise nommée signature.)</span><span class="sxs-lookup"><span data-stu-id="ef03c-148">(The process of digitally signing information entails transforming the information, as well as some secret information held by the sender, into a tag called a signature.)</span></span>  
  
 <span data-ttu-id="ef03c-149">Le principal avantage des certificats est le fait que les hôtes ne sont pas tenus de conserver un jeu de mots de passe pour les sujets individuels.</span><span class="sxs-lookup"><span data-stu-id="ef03c-149">A primary benefit of certificates is that they relieve hosts of the need to maintain a set of passwords for individual subjects.</span></span> <span data-ttu-id="ef03c-150">Il leur suffit de placer leur confiance dans un émetteur de certificats, qui peut ensuite signer un nombre illimité de certificats.</span><span class="sxs-lookup"><span data-stu-id="ef03c-150">Instead, the host merely establishes trust in a certificate issuer, which may then sign an unlimited number of certificates.</span></span>  
  
 <span data-ttu-id="ef03c-151">Lorsqu'un hôte, tel qu'un serveur Web sécurisé, désigne un émetteur en tant qu'autorité racine approuvée, l'hôte approuve implicitement les stratégies que l'émetteur a utilisées pour établir les liaisons des certificats qu'il émet.</span><span class="sxs-lookup"><span data-stu-id="ef03c-151">When a host, such as a secure Web server, designates an issuer as a trusted root authority, the host implicitly trusts the policies that the issuer has used to establish the bindings of certificates it issues.</span></span> <span data-ttu-id="ef03c-152">En fait, l'hôte fait confiance à l'émetteur en ce qui concerne la vérification de l'identité du sujet du certificat.</span><span class="sxs-lookup"><span data-stu-id="ef03c-152">In effect, the host trusts that the issuer has verified the identity of the certificate subject.</span></span> <span data-ttu-id="ef03c-153">Un hôte désigne un émetteur en tant qu'autorité racine de confiance en plaçant le certificat auto-signé de l'émetteur contenant sa clé publique dans le magasin de certificats de l'autorité de certification racine de confiance de l'ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="ef03c-153">A host designates an issuer as a trusted root authority by putting the self-signed certificate of the issuer, which contains the public key of the issuer, into the trusted root certification authority certificate store of the host computer.</span></span> <span data-ttu-id="ef03c-154">Les Autorités de certification intermédiaires ou secondaires ne sont approuvées que si elles ont un chemin d'accès de certification valide à partir d'une Autorité de certification racine de confiance.</span><span class="sxs-lookup"><span data-stu-id="ef03c-154">Intermediate or subordinate certification authorities are trusted only if they have a valid certification path from a trusted root certification authority.</span></span>  
  
 <span data-ttu-id="ef03c-155">L'émetteur peut révoquer un certificat avant qu'il n'expire.</span><span class="sxs-lookup"><span data-stu-id="ef03c-155">The issuer can revoke a certificate before it expires.</span></span> <span data-ttu-id="ef03c-156">La révocation annule la liaison de la clé publique à l'identité qui est déclarée dans le certificat.</span><span class="sxs-lookup"><span data-stu-id="ef03c-156">Revocation cancels the binding of a public key to an identity that is asserted in the certificate.</span></span> <span data-ttu-id="ef03c-157">Chaque émetteur gère une liste de révocation de certificats qui peut être utilisée par des programmes lors de la vérification de la validité de n'importe quel certificat.</span><span class="sxs-lookup"><span data-stu-id="ef03c-157">Each issuer maintains a certificate revocation list that can be used by programs when they are checking the validity of any given certificate.</span></span>  
  
 <span data-ttu-id="ef03c-158">Les certificats auto-signés créés par [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] respectent la norme X.509 et prennent en charge les champs X.509 v1.</span><span class="sxs-lookup"><span data-stu-id="ef03c-158">The self-signed certificates created by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] follow the X.509 standard and support the X.509 v1 fields.</span></span>  
  
### <a name="asymmetric-keys"></a><span data-ttu-id="ef03c-159">Clés asymétriques</span><span class="sxs-lookup"><span data-stu-id="ef03c-159">Asymmetric Keys</span></span>  
 <span data-ttu-id="ef03c-160">Une clé asymétrique se compose d'une clé privée et de la clé publique correspondante.</span><span class="sxs-lookup"><span data-stu-id="ef03c-160">An asymmetric key is made up of a private key and the corresponding public key.</span></span> <span data-ttu-id="ef03c-161">Chaque clé peut déchiffrer les données chiffrées par l'autre.</span><span class="sxs-lookup"><span data-stu-id="ef03c-161">Each key can decrypt data encrypted by the other.</span></span> <span data-ttu-id="ef03c-162">Le chiffrement et le déchiffrement asymétriques sont relativement gourmands en ressources, mais ils fournissent un niveau de sécurité supérieur à celui du chiffrement symétrique.</span><span class="sxs-lookup"><span data-stu-id="ef03c-162">Asymmetric encryption and decryption are relatively resource-intensive, but they provide a higher level of security than symmetric encryption.</span></span> <span data-ttu-id="ef03c-163">Une clé asymétrique peut être utilisée pour chiffrer une clé symétrique en vue d'un stockage dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="ef03c-163">An asymmetric key can be used to encrypt a symmetric key for storage in a database.</span></span>  
  
### <a name="symmetric-keys"></a><span data-ttu-id="ef03c-164">Clés symétriques</span><span class="sxs-lookup"><span data-stu-id="ef03c-164">Symmetric Keys</span></span>  
 <span data-ttu-id="ef03c-165">Une clé symétrique est une clé qui est utilisée pour le chiffrement et le déchiffrement.</span><span class="sxs-lookup"><span data-stu-id="ef03c-165">A symmetric key is one key that is used for both encryption and decryption.</span></span> <span data-ttu-id="ef03c-166">Une clé symétrique permet d'effectuer un chiffrement et un déchiffrement rapides, particulièrement adaptés à l'utilisation courante des données sensibles de la base de données.</span><span class="sxs-lookup"><span data-stu-id="ef03c-166">Encryption and decryption by using a symmetric key is fast, and suitable for routine use with sensitive data in the database.</span></span>  
  
### <a name="transparent-data-encryption"></a><span data-ttu-id="ef03c-167">chiffrement transparent des données</span><span class="sxs-lookup"><span data-stu-id="ef03c-167">Transparent Data Encryption</span></span>  
 <span data-ttu-id="ef03c-168">Le chiffrement transparent des données est un cas spécial de chiffrement à l'aide d'une clé symétrique.</span><span class="sxs-lookup"><span data-stu-id="ef03c-168">Transparent Data Encryption (TDE) is a special case of encryption using a symmetric key.</span></span> <span data-ttu-id="ef03c-169">L'ensemble de la base de données est chiffré à l'aide de cette clé symétrique, appelée clé de chiffrement de base de données.</span><span class="sxs-lookup"><span data-stu-id="ef03c-169">TDE encrypts an entire database using that symmetric key called the database encryption key.</span></span> <span data-ttu-id="ef03c-170">La clé de chiffrement de base de données est protégée par d'autres clés ou certificats qui sont eux-mêmes protégés par la clé principale de base de données ou par une clé asymétrique stockée dans un module EKM.</span><span class="sxs-lookup"><span data-stu-id="ef03c-170">The database encryption key is protected by other keys or certificates which are protected either by the database master key or by an asymmetric key stored in an EKM module.</span></span> <span data-ttu-id="ef03c-171">Pour plus d’informations, consultez [Transparent Data Encryption &#40;TDE&#41;](transparent-data-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="ef03c-171">For more information, see [Transparent Data Encryption &#40;TDE&#41;](transparent-data-encryption.md).</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="ef03c-172">Contenu associé</span><span class="sxs-lookup"><span data-stu-id="ef03c-172">Related Content</span></span>  
 [<span data-ttu-id="ef03c-173">Sécurisation de SQL Server</span><span class="sxs-lookup"><span data-stu-id="ef03c-173">Securing SQL Server</span></span>](../securing-sql-server.md)  
  
 [<span data-ttu-id="ef03c-174">Fonctions de sécurité &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="ef03c-174">Security Functions &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/functions/security-functions-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="ef03c-175">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ef03c-175">See Also</span></span>  
 <span data-ttu-id="ef03c-176">[Hiérarchie des autorisations &#40;Moteur de base de données&#41;](../permissions-hierarchy-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="ef03c-176">[Permissions Hierarchy &#40;Database Engine&#41;](../permissions-hierarchy-database-engine.md) </span></span>  
 [<span data-ttu-id="ef03c-177">Éléments sécurisables</span><span class="sxs-lookup"><span data-stu-id="ef03c-177">Securables</span></span>](../securables.md)  
  
  
