---
title: Repères de plan | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- TEMPLATE plan guide
- SQL plan guides
- OPTIMIZE FOR query hint
- RECOMPILE query hint
- OBJECT plan guide
- plan guides [SQL Server], about plan guides
- OPTION clause
- plan guides [SQL Server]
- USE PLAN query hint
ms.assetid: bfc97632-c14c-4768-9dc5-a9c512f6b2bd
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c97682163313a56acb8521174fa8d4012a69b529
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87611741"
---
# <a name="plan-guides"></a><span data-ttu-id="274be-102">Repères de plan</span><span class="sxs-lookup"><span data-stu-id="274be-102">Plan Guides</span></span>
  <span data-ttu-id="274be-103">Les repères de plan vous permettent d'optimiser les performances des requêtes lorsque vous ne pouvez pas ou ne souhaitez pas modifier directement le texte de la requête réelle dans [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="274be-103">Plan guides let you optimize the performance of queries when you cannot or do not want to directly change the text of the actual query in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="274be-104">Les repères de plan influencent l'optimisation des requêtes en attachant des indicateurs de requête ou un plan fixe de requête à celles-ci.</span><span class="sxs-lookup"><span data-stu-id="274be-104">Plan guides influence the optimization of queries by attaching query hints or a fixed query plan to them.</span></span> <span data-ttu-id="274be-105">Les repères de plan s'avèrent utiles lorsqu'un petit sous-ensemble de requêtes d'une application de base de données fournie par un tiers ne fonctionne pas comme prévu.</span><span class="sxs-lookup"><span data-stu-id="274be-105">Plan guides can be useful when a small subset of queries in a database application provided by a third-party vendor are not performing as expected.</span></span> <span data-ttu-id="274be-106">Dans le repère de plan, vous spécifiez l'instruction Transact-SQL que vous voulez optimiser et une clause OPTION contenant les indicateurs de requête ou un plan de requête spécifique à utiliser pour optimiser la requête.</span><span class="sxs-lookup"><span data-stu-id="274be-106">In the plan guide, you specify the Transact-SQL statement that you want optimized and either an OPTION clause that contains the query hints you want to use or a specific query plan you want to use to optimize the query.</span></span> <span data-ttu-id="274be-107">Lorsque la requête s'exécute, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] fait correspondre l'instruction Transact-SQL au repère de plan et attache la clause OPTION à la requête au moment de l'exécution ou fait appel au plan de requête spécifié.</span><span class="sxs-lookup"><span data-stu-id="274be-107">When the query executes, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] matches the Transact-SQL statement to the plan guide and attaches the OPTION clause to the query at run time or uses the specified query plan.</span></span>  
  
 <span data-ttu-id="274be-108">Le nombre total de repères de plan que vous pouvez créer est uniquement tributaire des ressources système disponibles.</span><span class="sxs-lookup"><span data-stu-id="274be-108">The total number of plan guides you can create is limited only by available system resources.</span></span> <span data-ttu-id="274be-109">Toutefois, les repères de plan doivent se limiter au traitement des requêtes critiques ciblées à des fins d'amélioration ou de stabilisation des performances.</span><span class="sxs-lookup"><span data-stu-id="274be-109">Nevertheless, plan guides should be limited to mission-critical queries that are targeted for improved or stabilized performance.</span></span> <span data-ttu-id="274be-110">Les repères de plan ne doivent pas influencer la majeure partie de la charge de requête d'une application déployée.</span><span class="sxs-lookup"><span data-stu-id="274be-110">Plan guides should not be used to influence most of the query load of a deployed application.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="274be-111">Les repères de plan ne peuvent pas être utilisés dans toutes les éditions de [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="274be-111">Plan guides cannot be used in every edition of [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="274be-112">Pour obtenir une liste des fonctionnalités prises en charge par les éditions de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], consultez [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span><span class="sxs-lookup"><span data-stu-id="274be-112">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span> <span data-ttu-id="274be-113">Les repères de plan sont visibles dans n'importe quelle édition.</span><span class="sxs-lookup"><span data-stu-id="274be-113">Plan guides are visible in any edition.</span></span> <span data-ttu-id="274be-114">En outre, vous pouvez attacher une base de données qui contient des repères de plan à n'importe quelle édition.</span><span class="sxs-lookup"><span data-stu-id="274be-114">You can also attach a database that contains plan guides to any edition.</span></span> <span data-ttu-id="274be-115">Les repères de plan demeurent intacts lorsque vous restaurez ou attachez une base de données à une version mise à niveau de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="274be-115">Plan guides remain intact when you restore or attach a database to an upgraded version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="types-of-plan-guides"></a><span data-ttu-id="274be-116">Types de repères de plan</span><span class="sxs-lookup"><span data-stu-id="274be-116">Types of Plan Guides</span></span>  
 <span data-ttu-id="274be-117">Il est possible de créer les types de repères de plan suivants.</span><span class="sxs-lookup"><span data-stu-id="274be-117">The following types of plan guides can be created.</span></span>  
  
 <span data-ttu-id="274be-118">OBJECT, repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-118">OBJECT plan guide</span></span>  
 <span data-ttu-id="274be-119">Un repère de plan OBJECT correspond à des requêtes qui s'exécutent dans le contexte de procédures stockées [!INCLUDE[tsql](../../includes/tsql-md.md)] , de fonctions scalaires définies par l'utilisateur, de fonctions table à instructions multiples définies par l'utilisateur et de déclencheurs DML.</span><span class="sxs-lookup"><span data-stu-id="274be-119">An OBJECT plan guide matches queries that execute in the context of [!INCLUDE[tsql](../../includes/tsql-md.md)] stored procedures, scalar user-defined functions, multi-statement table-valued user-defined functions, and DML triggers.</span></span>  
  
 <span data-ttu-id="274be-120">Supposons que la procédure stockée suivante, qui accepte le paramètre `@Country`_`region` , figure dans une application de base de données déployée dans la base de données [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="274be-120">Suppose the following stored procedure, which takes the `@Country`_`region` parameter, is in a database application that is deployed against the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database:</span></span>  
  
```  
CREATE PROCEDURE Sales.GetSalesOrderByCountry (@Country_region nvarchar(60))  
AS  
BEGIN  
    SELECT *  
    FROM Sales.SalesOrderHeader AS h, Sales.Customer AS c,   
        Sales.SalesTerritory AS t  
    WHERE h.CustomerID = c.CustomerID  
        AND c.TerritoryID = t.TerritoryID  
        AND CountryRegionCode = @Country_region  
END;  
```  
  
 <span data-ttu-id="274be-121">Supposons que cette procédure stockée a été compilée et optimisée pour `@Country`_`region = N'AU'` (Australie).</span><span class="sxs-lookup"><span data-stu-id="274be-121">Assume that this stored procedure has been compiled and optimized for `@Country`_`region = N'AU'` (Australia).</span></span> <span data-ttu-id="274be-122">Toutefois, comme il y a relativement peu de commandes client qui proviennent d'Australie, les performances diminuent lorsque la requête s'exécute à l'aide de valeurs de paramètre de pays contenant plus de commandes client.</span><span class="sxs-lookup"><span data-stu-id="274be-122">However, because there are relatively few sales orders that originate from Australia, performance decreases when the query executes using parameter values of countries with more sales orders.</span></span> <span data-ttu-id="274be-123">Dans la mesure où les États-Unis constituent le pays qui arrive en première position en termes de commandes remportées, un plan de requête généré pour `@Country`\_`region = N'US'` obtiendrait de meilleures performances pour toutes les valeurs possibles du paramètre `@Country`\_`region` .</span><span class="sxs-lookup"><span data-stu-id="274be-123">Because the most sales orders originate in the United States, a query plan that is generated for `@Country`\_`region = N'US'` would likely perform better for all possible values of the `@Country`\_`region` parameter.</span></span>  
  
 <span data-ttu-id="274be-124">Vous pouvez résoudre ce problème en modifiant la procédure stockée pour ajouter l'indicateur de requête `OPTIMIZE FOR` à la requête.</span><span class="sxs-lookup"><span data-stu-id="274be-124">You could address this problem by modifying the stored procedure to add the `OPTIMIZE FOR` query hint to the query.</span></span> <span data-ttu-id="274be-125">Toutefois, étant donné que la procédure stockée se trouve dans une application déployée, vous ne pouvez pas modifier directement le code de cette dernière.</span><span class="sxs-lookup"><span data-stu-id="274be-125">However, because the stored procedure is in a deployed application, you cannot directly modify the application code.</span></span> <span data-ttu-id="274be-126">Vous pouvez en revanche créer le repère de plan suivant dans la base de données [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="274be-126">Instead, you can create the following plan guide in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span>  
  
```  
sp_create_plan_guide   
@name = N'Guide1',  
@stmt = N'SELECT *FROM Sales.SalesOrderHeader AS h,  
        Sales.Customer AS c,  
        Sales.SalesTerritory AS t  
        WHERE h.CustomerID = c.CustomerID   
            AND c.TerritoryID = t.TerritoryID  
            AND CountryRegionCode = @Country_region',  
@type = N'OBJECT',  
@module_or_batch = N'Sales.GetSalesOrderByCountry',  
@params = NULL,  
@hints = N'OPTION (OPTIMIZE FOR (@Country_region = N''US''))';  
```  
  
 <span data-ttu-id="274be-127">Lorsque la requête spécifiée dans l'instruction `sp_create_plan_guide` s'exécute, elle est modifiée avant l'optimisation de façon à inclure la clause `OPTIMIZE FOR (@Country = N''US'')` .</span><span class="sxs-lookup"><span data-stu-id="274be-127">When the query specified in the `sp_create_plan_guide` statement executes, the query is modified before optimization to include the `OPTIMIZE FOR (@Country = N''US'')` clause.</span></span>  
  
 <span data-ttu-id="274be-128">Repère de plan SQL</span><span class="sxs-lookup"><span data-stu-id="274be-128">SQL plan guide</span></span>  
 <span data-ttu-id="274be-129">Un repère de plan SQL correspond à des requêtes qui s'exécutent dans le contexte de lots et d'instructions [!INCLUDE[tsql](../../includes/tsql-md.md)] autonomes ne faisant pas partie d'un objet de base de données.</span><span class="sxs-lookup"><span data-stu-id="274be-129">An SQL plan guide matches queries that execute in the context of stand-alone [!INCLUDE[tsql](../../includes/tsql-md.md)] statements and batches that are not part of a database object.</span></span> <span data-ttu-id="274be-130">Les repères de plan SQL peuvent également être employés pour les requêtes paramétrables au format spécifié.</span><span class="sxs-lookup"><span data-stu-id="274be-130">SQL-based plan guides can also be used to match queries that parameterize to a specified form.</span></span> <span data-ttu-id="274be-131">Les repères de plan SQL s'appliquent aux instructions et aux lots [!INCLUDE[tsql](../../includes/tsql-md.md)] autonomes.</span><span class="sxs-lookup"><span data-stu-id="274be-131">SQL plan guides apply to stand-alone [!INCLUDE[tsql](../../includes/tsql-md.md)] statements and batches.</span></span> <span data-ttu-id="274be-132">Le plus souvent, ces instructions sont envoyées par une application à l’aide de la procédure stockée système [sp_executesql](/sql/relational-databases/system-stored-procedures/sp-executesql-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="274be-132">Frequently, these statements are submitted by an application by using the [sp_executesql](/sql/relational-databases/system-stored-procedures/sp-executesql-transact-sql) system stored procedure.</span></span> <span data-ttu-id="274be-133">Imaginons par exemple le traitement autonome suivant :</span><span class="sxs-lookup"><span data-stu-id="274be-133">For example, consider the following stand-alone batch:</span></span>  
  
```  
SELECT TOP 1 * FROM Sales.SalesOrderHeader ORDER BY OrderDate DESC;  
```  
  
 <span data-ttu-id="274be-134">Pour empêcher la génération d'un plan d'exécution parallèle sur cette requête, créez le repère de plan suivant et affectez à l'indicateur de requête `MAXDOP` la valeur `1` dans le paramètre `@hints` .</span><span class="sxs-lookup"><span data-stu-id="274be-134">To prevent a parallel execution plan from being generated on this query, create the following plan guide and set the `MAXDOP` query hint to `1` in the `@hints` parameter.</span></span>  
  
```  
sp_create_plan_guide   
@name = N'Guide2',   
@stmt = N'SELECT TOP 1 * FROM Sales.SalesOrderHeader ORDER BY OrderDate DESC',  
@type = N'SQL',  
@module_or_batch = NULL,   
@params = NULL,   
@hints = N'OPTION (MAXDOP 1)';  
```  
  
> [!IMPORTANT]  
>  <span data-ttu-id="274be-135">Les valeurs fournies pour les arguments `@module_or_batch` et `@params` de l'instruction `sp_create_plan guide` doivent correspondre au texte correspondant soumis dans la requête réelle.</span><span class="sxs-lookup"><span data-stu-id="274be-135">The values that are supplied for the `@module_or_batch` and `@params` arguments of the `sp_create_plan guide` statement must match the corresponding text submitted in the actual query.</span></span> <span data-ttu-id="274be-136">Pour plus d’informations, consultez [sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) et [Utiliser le Générateur de profils SQL Server pour créer et tester des repères de plan](plan-guides.md).</span><span class="sxs-lookup"><span data-stu-id="274be-136">For more information, see [sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) and [Use SQL Server Profiler to Create and Test Plan Guides](plan-guides.md).</span></span>  
  
 <span data-ttu-id="274be-137">Les repères de plan SQL peuvent aussi être créés sur des requêtes paramétrables au même format lorsque l'option de base de données PARAMETERIZATION a la valeur FORCED ou lorsqu'un repère de plan TEMPLATE est créé pour spécifier qu'une classe de requête est paramétrable.</span><span class="sxs-lookup"><span data-stu-id="274be-137">SQL plan guides can also be created on queries that parameterize to the same form when the PARAMETERIZATION database option is SET to FORCED, or when a TEMPLATE plan guide is created specifying that a parameterized class of queries.</span></span>  
  
 <span data-ttu-id="274be-138">TEMPLATE, repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-138">TEMPLATE plan guide</span></span>  
 <span data-ttu-id="274be-139">Un repère de plan TEMPLATE correspond à des requêtes autonomes paramétrables au format spécifié.</span><span class="sxs-lookup"><span data-stu-id="274be-139">A TEMPLATE plan guide matches stand-alone queries that parameterize to a specified form.</span></span> <span data-ttu-id="274be-140">Il s'emploie pour remplacer l'option de base de données PARAMETERIZATION par une classe de requêtes.</span><span class="sxs-lookup"><span data-stu-id="274be-140">These plan guides are used to override the current PARAMETERIZATION database SET option of a database for a class of queries.</span></span>  
  
 <span data-ttu-id="274be-141">Vous pouvez créer un repère de plan TEMPLATE dans l'une des circonstances suivantes :</span><span class="sxs-lookup"><span data-stu-id="274be-141">You can create a TEMPLATE plan guide in either of the following situations:</span></span>  
  
-   <span data-ttu-id="274be-142">lorsque l'option de base de données PARAMETERIZATION est définie à FORCED, mais qu'il y a des requêtes que vous voulez compiler selon les règles du paramétrage simple ;</span><span class="sxs-lookup"><span data-stu-id="274be-142">The PARAMETERIZATION database option is SET to FORCED, but there are queries you want compiled according to the rules of simple parameterization.</span></span>  
  
-   <span data-ttu-id="274be-143">lorsque l'option de base de données PARAMETERIZATION est définie à SIMPLE (l'option par défaut), mais que vous voulez appliquer une tentative de paramétrage forcé à une classe de requêtes.</span><span class="sxs-lookup"><span data-stu-id="274be-143">The PARAMETERIZATION database option is SET to SIMPLE (the default setting), but you want forced parameterization to be tried on a class of queries.</span></span>  
  
## <a name="plan-guide-matching-requirements"></a><span data-ttu-id="274be-144">Paramétrage de la mise en correspondance du repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-144">Plan Guide Matching Requirements</span></span>  
 <span data-ttu-id="274be-145">Les repères de plan sont limités à la base de données dans laquelle ils sont créés.</span><span class="sxs-lookup"><span data-stu-id="274be-145">Plan guides are scoped to the database in which they are created.</span></span> <span data-ttu-id="274be-146">Par conséquent, seuls les repères de plan existant dans la base de données qui est active lors de l'exécution d'une requête peuvent être mis en correspondance avec cette requête.</span><span class="sxs-lookup"><span data-stu-id="274be-146">Therefore, only plan guides that are in the database that is current when a query executes can be matched to the query.</span></span> <span data-ttu-id="274be-147">Supposons que [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] est la base de données active et que la requête suivante est exécutée :</span><span class="sxs-lookup"><span data-stu-id="274be-147">For example, if [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] is the current database and the following query executes:</span></span>  
  
 `SELECT FirstName, LastName FROM Person.Person;`  
  
 <span data-ttu-id="274be-148">Seuls les repères de plan de la base de données [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] peuvent être mis en correspondance avec cette requête.</span><span class="sxs-lookup"><span data-stu-id="274be-148">Only plan guides in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database are eligible to be matched to this query.</span></span> <span data-ttu-id="274be-149">Supposons maintenant que [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] est la base de données active et que les instructions suivantes sont exécutées :</span><span class="sxs-lookup"><span data-stu-id="274be-149">However, if [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] is the current database and the following statements are run:</span></span>  
  
 `USE DB1;`  
  
 `SELECT FirstName, LastName FROM Person.Person;`  
  
 <span data-ttu-id="274be-150">Seuls les repères de plan de `DB1` peuvent être mis en correspondance avec la requête, car celle-ci s'exécute dans le contexte de `DB1`.</span><span class="sxs-lookup"><span data-stu-id="274be-150">Only plan guides in `DB1` are eligible to be matched to the query because the query is executing in the context of `DB1`.</span></span>  
  
 <span data-ttu-id="274be-151">Pour les repères de plan basés sur SQL ou TEMPLATE, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] fait correspondre les valeurs des arguments @module_or_batch et @params avec une requête en comparant les deux valeurs caractère par caractère.</span><span class="sxs-lookup"><span data-stu-id="274be-151">For SQL- or TEMPLATE-based plan guides, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] matches the values for the @module_or_batch and @params arguments to a query by comparing the two values character by character.</span></span> <span data-ttu-id="274be-152">Cela signifie que vous devez fournir le texte exactement tel que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] le reçoit dans le traitement réel.</span><span class="sxs-lookup"><span data-stu-id="274be-152">This means you must provide the text exactly as [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives it in the actual batch.</span></span>  
  
 <span data-ttu-id="274be-153">Quand @type= 'SQL' et que @module_or_batch a la valeur NULL, la valeur définie pour de @module_or_batch est celle de @stmt. Autrement dit, la valeur de *statement_text* doit être fournie dans un format identique (au caractère près) à celui utilisé lors de son envoi à [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="274be-153">When @type = 'SQL' and @module_or_batch is set to NULL, the value of @module_or_batch is set to the value of @stmt. This means that the value for *statement_text* must be provided in the identical format, character-for-character, as it is submitted to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="274be-154">Aucune conversion interne n'est effectuée pour faciliter cette correspondance.</span><span class="sxs-lookup"><span data-stu-id="274be-154">No internal conversion is performed to facilitate this match.</span></span>  
  
 <span data-ttu-id="274be-155">Lorsqu'un repère de plan normal (SQL ou OBJECT) et un repère de plan TEMPLATE peuvent s'appliquer tous les deux à une instruction, seul le repère de plan normal est utilisé.</span><span class="sxs-lookup"><span data-stu-id="274be-155">When both a regular (SQL or OBJECT) plan guide and a TEMPLATE plan guide can apply to a statement, only the regular plan guide will be used.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="274be-156">Le traitement qui contient l’instruction sur laquelle vous souhaitez créer un repère de plan ne peut pas contenir une instruction de *base de données* USE.</span><span class="sxs-lookup"><span data-stu-id="274be-156">The batch that contains the statement on which you want to create a plan guide cannot contain a USE *database* statement.</span></span>  
  
## <a name="plan-guide-effect-on-the-plan-cache"></a><span data-ttu-id="274be-157">Effet du repère de plan sur le cache du plan</span><span class="sxs-lookup"><span data-stu-id="274be-157">Plan Guide Effect on the Plan Cache</span></span>  
 <span data-ttu-id="274be-158">La création d'un repère de plan sur un module supprime le plan de requête pour ce module du cache du plan.</span><span class="sxs-lookup"><span data-stu-id="274be-158">Creating a plan guide on a module removes the query plan for that module from the plan cache.</span></span> <span data-ttu-id="274be-159">La création d'un repère de plan de type OBJET ou SQL sur un lot supprime le plan de requête pour un lot qui a la même valeur de hachage.</span><span class="sxs-lookup"><span data-stu-id="274be-159">Creating a plan guide of type OBJECT or SQL on a batch removes the query plan for a batch that has the same hash value.</span></span> <span data-ttu-id="274be-160">La création d'un repère de plan de type TEMPLATE supprime tous les lots comprenant une instruction unique du cache du plan dans cette base de données.</span><span class="sxs-lookup"><span data-stu-id="274be-160">Creating a plan guide of type TEMPLATE removes all single-statement batches from the plan cache within that database.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="274be-161">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="274be-161">Related Tasks</span></span>  
  
|<span data-ttu-id="274be-162">Tâche</span><span class="sxs-lookup"><span data-stu-id="274be-162">Task</span></span>|<span data-ttu-id="274be-163">Rubrique</span><span class="sxs-lookup"><span data-stu-id="274be-163">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="274be-164">Explique comment créer un repère de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-164">Describes how to create a plan guide.</span></span>|[<span data-ttu-id="274be-165">Créer un repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-165">Create a New Plan Guide</span></span>](create-a-new-plan-guide.md)|  
|<span data-ttu-id="274be-166">Explique comment créer un repère de plan pour les requêtes paramétrables.</span><span class="sxs-lookup"><span data-stu-id="274be-166">Describes how to create a plan guide for parameterized queries.</span></span>|[<span data-ttu-id="274be-167">Créer un repère de plan pour les requêtes paramétrables</span><span class="sxs-lookup"><span data-stu-id="274be-167">Create a Plan Guide for Parameterized Queries</span></span>](create-a-plan-guide-for-parameterized-queries.md)|  
|<span data-ttu-id="274be-168">Explique comment contrôler le comportement du paramétrage de requête à l'aide de repères de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-168">Describes how to control query parameterization behavior by using plan guides.</span></span>|[<span data-ttu-id="274be-169">Spécifier le comportement du paramétrage de requêtes grâce aux repères de plan</span><span class="sxs-lookup"><span data-stu-id="274be-169">Specify Query Parameterization Behavior by Using Plan Guides</span></span>](specify-query-parameterization-behavior-by-using-plan-guides.md)|  
|<span data-ttu-id="274be-170">Explique comment inclure un plan de requête fixe dans un repère de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-170">Describes how to include a fixed query plan in a plan guide.</span></span>|[<span data-ttu-id="274be-171">Appliquer un plan de requête fixe à un repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-171">Apply a Fixed Query Plan to a Plan Guide</span></span>](apply-a-fixed-query-plan-to-a-plan-guide.md)|  
|<span data-ttu-id="274be-172">Explique comment spécifier des indicateurs de requête dans un repère de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-172">Describes how to specify query hints in a plan guide.</span></span>|[<span data-ttu-id="274be-173">Attacher des indicateurs de requête à un repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-173">Attach Query Hints to a Plan Guide</span></span>](attach-query-hints-to-a-plan-guide.md)|  
|<span data-ttu-id="274be-174">Explique comment afficher les propriétés d'un repère de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-174">Describes how to view plan guide properties.</span></span>|[<span data-ttu-id="274be-175">Afficher les propriétés du repère de plan</span><span class="sxs-lookup"><span data-stu-id="274be-175">View Plan Guide Properties</span></span>](view-plan-guide-properties.md)|  
|<span data-ttu-id="274be-176">Explique comment utiliser SQL Server Profiler pour créer et tester des repères de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-176">Describes how to use SQL Server Profiler to create and test plan guides.</span></span>|[<span data-ttu-id="274be-177">Utiliser SQL Server Profiler pour créer et tester des repères de plan</span><span class="sxs-lookup"><span data-stu-id="274be-177">Use SQL Server Profiler to Create and Test Plan Guides</span></span>](plan-guides.md)|  
|<span data-ttu-id="274be-178">Explique comment valider des repères de plan.</span><span class="sxs-lookup"><span data-stu-id="274be-178">Describes how to validate plan guides.</span></span>|[<span data-ttu-id="274be-179">Valider des repères de plan après la mise à niveau</span><span class="sxs-lookup"><span data-stu-id="274be-179">Validate Plan Guides After Upgrade</span></span>](validate-plan-guides-after-upgrade.md)|  
  
## <a name="see-also"></a><span data-ttu-id="274be-180">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="274be-180">See Also</span></span>  
 <span data-ttu-id="274be-181">[sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="274be-181">[sp_create_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-transact-sql) </span></span>  
 <span data-ttu-id="274be-182">[sp_create_plan_guide_from_handle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-from-handle-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="274be-182">[sp_create_plan_guide_from_handle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-create-plan-guide-from-handle-transact-sql) </span></span>  
 <span data-ttu-id="274be-183">[sp_control_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-control-plan-guide-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="274be-183">[sp_control_plan_guide &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-control-plan-guide-transact-sql) </span></span>  
 <span data-ttu-id="274be-184">[sys.plan_guides &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-plan-guides-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="274be-184">[sys.plan_guides &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-plan-guides-transact-sql) </span></span>  
 [<span data-ttu-id="274be-185">sys.fn_validate_plan_guide &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="274be-185">sys.fn_validate_plan_guide &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/sys-fn-validate-plan-guide-transact-sql)  
  
  
