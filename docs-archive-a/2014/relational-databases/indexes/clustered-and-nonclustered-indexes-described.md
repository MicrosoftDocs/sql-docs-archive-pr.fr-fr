---
title: Description des index cluster et non-cluster | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- query optimizer [SQL Server], index usage
- index concepts [SQL Server]
ms.assetid: b7d6b323-728d-4763-a987-92e6292f6f7a
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c9eb51a24000b8af4a466fe4330644a722ad325b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87708328"
---
# <a name="clustered-and-nonclustered-indexes-described"></a><span data-ttu-id="5f20f-102">Description des index cluster et non-cluster</span><span class="sxs-lookup"><span data-stu-id="5f20f-102">Clustered and Nonclustered Indexes Described</span></span>
  <span data-ttu-id="5f20f-103">Un index est une structure sur disque associée à une table ou une vue qui accélère l'extraction des lignes de la table ou de la vue.</span><span class="sxs-lookup"><span data-stu-id="5f20f-103">An index is an on-disk structure associated with a table or view that speeds retrieval of rows from the table or view.</span></span> <span data-ttu-id="5f20f-104">Il contient des clés créées à partir d'une ou plusieurs colonnes de la table ou de la vue.</span><span class="sxs-lookup"><span data-stu-id="5f20f-104">An index contains keys built from one or more columns in the table or view.</span></span> <span data-ttu-id="5f20f-105">Ces clés sont stockées dans une structure (B-tree) qui permet à [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] de trouver rapidement et efficacement la ou les lignes associées aux valeurs de clé.</span><span class="sxs-lookup"><span data-stu-id="5f20f-105">These keys are stored in a structure (B-tree) that enables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to find the row or rows associated with the key values quickly and efficiently.</span></span>  
  
 <span data-ttu-id="5f20f-106">Une table ou une vue peut comporter les types d'index suivants :</span><span class="sxs-lookup"><span data-stu-id="5f20f-106">A table or view can contain the following types of indexes:</span></span>  
  
-   <span data-ttu-id="5f20f-107">Cluster</span><span class="sxs-lookup"><span data-stu-id="5f20f-107">Clustered</span></span>  
  
    -   <span data-ttu-id="5f20f-108">Les index cluster trient et stockent les lignes de données de la table ou la vue en fonction de leurs valeurs de clé.</span><span class="sxs-lookup"><span data-stu-id="5f20f-108">Clustered indexes sort and store the data rows in the table or view based on their key values.</span></span> <span data-ttu-id="5f20f-109">Ce sont les colonnes incluses dans la définition de l'index.</span><span class="sxs-lookup"><span data-stu-id="5f20f-109">These are the columns included in the index definition.</span></span> <span data-ttu-id="5f20f-110">Il n'y a qu'un index cluster par table car les lignes de données ne peuvent être triées que dans un seul ordre.</span><span class="sxs-lookup"><span data-stu-id="5f20f-110">There can be only one clustered index per table, because the data rows themselves can be sorted in only one order.</span></span>  
  
    -   <span data-ttu-id="5f20f-111">Le seul moment où les lignes de données d'une table sont stockées dans l'ordre de tri se produit lorsque la table contient un index cluster.</span><span class="sxs-lookup"><span data-stu-id="5f20f-111">The only time the data rows in a table are stored in sorted order is when the table contains a clustered index.</span></span> <span data-ttu-id="5f20f-112">Lorsqu'une table possède un index cluster, elle est appelée table cluster.</span><span class="sxs-lookup"><span data-stu-id="5f20f-112">When a table has a clustered index, the table is called a clustered table.</span></span> <span data-ttu-id="5f20f-113">En l'absence de cet index, ses lignes de données sont stockées dans une structure désordonnée nommée segment.</span><span class="sxs-lookup"><span data-stu-id="5f20f-113">If a table has no clustered index, its data rows are stored in an unordered structure called a heap.</span></span>  
  
-   <span data-ttu-id="5f20f-114">Non-cluster</span><span class="sxs-lookup"><span data-stu-id="5f20f-114">Nonclustered</span></span>  
  
    -   <span data-ttu-id="5f20f-115">Les index non-cluster possèdent une structure distincte de celle des lignes de données.</span><span class="sxs-lookup"><span data-stu-id="5f20f-115">Nonclustered indexes have a structure separate from the data rows.</span></span> <span data-ttu-id="5f20f-116">Un index non-cluster contient les valeurs de clé de l'index non-cluster et chaque entrée de valeur de clé dispose d'un pointeur vers les lignes de données qui contient la valeur de clé.</span><span class="sxs-lookup"><span data-stu-id="5f20f-116">A nonclustered index contains the nonclustered index key values and each key value entry has a pointer to the data row that contains the key value.</span></span>  
  
    -   <span data-ttu-id="5f20f-117">Le pointeur situé entre une ligne d'un index non-cluster et une ligne de données est appelé un localisateur de ligne.</span><span class="sxs-lookup"><span data-stu-id="5f20f-117">The pointer from an index row in a nonclustered index to a data row is called a row locator.</span></span> <span data-ttu-id="5f20f-118">La structure d'un localisateur de ligne varie selon que les pages de données sont stockées dans un segment de mémoire ou dans une table cluster.</span><span class="sxs-lookup"><span data-stu-id="5f20f-118">The structure of the row locator depends on whether the data pages are stored in a heap or a clustered table.</span></span> <span data-ttu-id="5f20f-119">Pour un segment de mémoire, un localisateur de ligne est un pointeur vers la ligne.</span><span class="sxs-lookup"><span data-stu-id="5f20f-119">For a heap, a row locator is a pointer to the row.</span></span> <span data-ttu-id="5f20f-120">Pour une table cluster, le localisateur de ligne est la clé de l'index cluster.</span><span class="sxs-lookup"><span data-stu-id="5f20f-120">For a clustered table, the row locator is the clustered index key.</span></span>  
  
    -   <span data-ttu-id="5f20f-121">Vous pouvez ajouter des colonnes sans clé au niveau du nœud terminal de l'index non cluster pour contourner des limites de clé d'index existantes, colonnes de 900 octets et de 16 clés, et exécuter des requêtes indexées totalement couvertes.</span><span class="sxs-lookup"><span data-stu-id="5f20f-121">You can add nonkey columns to the leaf level of the nonclustered index to by-pass existing index key limits, 900 bytes and 16 key columns, and execute fully covered, indexed, queries.</span></span> <span data-ttu-id="5f20f-122">Pour plus d’informations, consultez [Créer des index avec colonnes incluses](create-indexes-with-included-columns.md).</span><span class="sxs-lookup"><span data-stu-id="5f20f-122">For more information, see [Create Indexes with Included Columns](create-indexes-with-included-columns.md).</span></span>  
  
 <span data-ttu-id="5f20f-123">Tant les index cluster que les index non-cluster peuvent être uniques.</span><span class="sxs-lookup"><span data-stu-id="5f20f-123">Both clustered and nonclustered indexes can be unique.</span></span> <span data-ttu-id="5f20f-124">En d'autres termes, deux lignes ne peuvent pas avoir la même valeur de clé d'index.</span><span class="sxs-lookup"><span data-stu-id="5f20f-124">This means no two rows can have the same value for the index key.</span></span> <span data-ttu-id="5f20f-125">Dans le cas contraire, l'index n'est pas unique et plusieurs lignes peuvent partager la même valeur de clé.</span><span class="sxs-lookup"><span data-stu-id="5f20f-125">Otherwise, the index is not unique and multiple rows can share the same key value.</span></span> <span data-ttu-id="5f20f-126">Pour plus d’informations, consultez [Créer des index uniques](create-unique-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="5f20f-126">For more information, see [Create Unique Indexes](create-unique-indexes.md).</span></span>  
  
 <span data-ttu-id="5f20f-127">Les index d'une table ou d'une vue sont automatiquement conservés à chaque fois que les données de la table sont modifiées.</span><span class="sxs-lookup"><span data-stu-id="5f20f-127">Indexes are automatically maintained for a table or view whenever the table data is modified.</span></span>  
  
 <span data-ttu-id="5f20f-128">Pour connaître d’autres types d’index destinés à des usages spéciaux, consultez [Index](indexes.md) .</span><span class="sxs-lookup"><span data-stu-id="5f20f-128">See [Indexes](indexes.md) for additional types of special purpose indexes.</span></span>  
  
## <a name="indexes-and-constraints"></a><span data-ttu-id="5f20f-129">Index et contraintes</span><span class="sxs-lookup"><span data-stu-id="5f20f-129">Indexes and Constraints</span></span>  
 <span data-ttu-id="5f20f-130">Des index sont automatiquement créés lorsque les contraintes PRIMARY KEY et UNIQUE sont définies sur les colonnes de la table.</span><span class="sxs-lookup"><span data-stu-id="5f20f-130">Indexes are automatically created when PRIMARY KEY and UNIQUE constraints are defined on table columns.</span></span> <span data-ttu-id="5f20f-131">Par exemple, lorsque vous créez une table et déterminez une colonne particulière qui sera la clé primaire, le [!INCLUDE[ssDE](../../includes/ssde-md.md)] crée automatiquement une contrainte PRIMARY KEY et un index sur cette colonne.</span><span class="sxs-lookup"><span data-stu-id="5f20f-131">For example, when you create a table and identify a particular column to be the primary key, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a PRIMARY KEY constraint and index on that column.</span></span> <span data-ttu-id="5f20f-132">Pour plus d’informations, consultez [Supprimer des clés primaires](../tables/create-primary-keys.md) et [Créer des clés primaires](../tables/create-unique-constraints.md).</span><span class="sxs-lookup"><span data-stu-id="5f20f-132">For more information, see [Create Primary Keys](../tables/create-primary-keys.md) and [Create Unique Constraints](../tables/create-unique-constraints.md).</span></span>  
  
## <a name="how-indexes-are-used-by-the-query-optimizer"></a><span data-ttu-id="5f20f-133">Utilisation des index par l'optimiseur de requête</span><span class="sxs-lookup"><span data-stu-id="5f20f-133">How Indexes Are Used by the Query Optimizer</span></span>  
 <span data-ttu-id="5f20f-134">Les index bien conçus peuvent réduire les opérations d'E/S disque et consommer moins de ressources système, améliorant ainsi les performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="5f20f-134">Well-designed indexes can reduce disk I/O operations and consume fewer system resources therefore improving query performance.</span></span> <span data-ttu-id="5f20f-135">Les index peuvent être utiles pour diverses requêtes qui contiennent les instructions SELECT, UPDATE, DELETE ou MERGE.</span><span class="sxs-lookup"><span data-stu-id="5f20f-135">Indexes can be helpful for a variety of queries that contain SELECT, UPDATE, DELETE, or MERGE statements.</span></span> <span data-ttu-id="5f20f-136">Supposons la requête `SELECT Title, HireDate FROM HumanResources.Employee WHERE EmployeeID = 250` dans la base de données [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5f20f-136">Consider the query `SELECT Title, HireDate FROM HumanResources.Employee WHERE EmployeeID = 250` in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="5f20f-137">Lorsque cette requête est exécutée, l'optimiseur de requête évalue chaque méthode disponible d'extraction des données et opte pour la plus efficace d'entre elles.</span><span class="sxs-lookup"><span data-stu-id="5f20f-137">When this query is executed, the query optimizer evaluates each available method for retrieving the data and selects the most efficient method.</span></span> <span data-ttu-id="5f20f-138">La méthode peut être une analyse de table ou l'analyse d'un ou plusieurs index s'ils existent.</span><span class="sxs-lookup"><span data-stu-id="5f20f-138">The method may be a table scan, or may be scanning one or more indexes if they exist.</span></span>  
  
 <span data-ttu-id="5f20f-139">Lors d'une analyse de table, l'optimiseur de requête lit toutes les lignes de la table et extrait celles qui répondent aux critères de la requête.</span><span class="sxs-lookup"><span data-stu-id="5f20f-139">When performing a table scan, the query optimizer reads all the rows in the table, and extracts the rows that meet the criteria of the query.</span></span> <span data-ttu-id="5f20f-140">Une analyse de table génère de nombreuses opérations d'E/S disque et peut consommer une grande quantité de ressources.</span><span class="sxs-lookup"><span data-stu-id="5f20f-140">A table scan generates many disk I/O operations and can be resource intensive.</span></span> <span data-ttu-id="5f20f-141">Toutefois, l'analyse d'une table peut être la méthode la plus efficace si par exemple le jeu des résultats de la requête représente un pourcentage élevé de lignes de la table.</span><span class="sxs-lookup"><span data-stu-id="5f20f-141">However, a table scan could be the most efficient method if, for example, the result set of the query is a high percentage of rows from the table.</span></span>  
  
 <span data-ttu-id="5f20f-142">Lorsque l'optimiseur de requête utilise un index, il recherche les colonnes de clé d'index et l'emplacement de stockage des lignes visées par la requête, puis extrait les lignes correspondantes à partir de cet emplacement.</span><span class="sxs-lookup"><span data-stu-id="5f20f-142">When the query optimizer uses an index, it searches the index key columns, finds the storage location of the rows needed by the query and extracts the matching rows from that location.</span></span> <span data-ttu-id="5f20f-143">En général, une recherche dans un index est beaucoup plus rapide qu'une recherche dans la table car contrairement à une table, un index contient souvent très peu de colonnes par ligne et les lignes sont triées.</span><span class="sxs-lookup"><span data-stu-id="5f20f-143">Generally, searching the index is much faster than searching the table because unlike a table, an index frequently contains very few columns per row and the rows are in sorted order.</span></span>  
  
 <span data-ttu-id="5f20f-144">L'optimiseur de requête sélectionne en général la méthode la plus efficace lors de l'exécution des requêtes.</span><span class="sxs-lookup"><span data-stu-id="5f20f-144">The query optimizer typically selects the most efficient method when executing queries.</span></span> <span data-ttu-id="5f20f-145">Toutefois, si aucun index n'est disponible, l'optimiseur de requête doit utiliser une analyse de table.</span><span class="sxs-lookup"><span data-stu-id="5f20f-145">However, if no indexes are available, the query optimizer must use a table scan.</span></span> <span data-ttu-id="5f20f-146">Votre tâche consiste à concevoir et à créer les index les mieux adaptés à votre environnement, de sorte que l'optimiseur de requête possède une sélection d'index garantissant un choix efficace.</span><span class="sxs-lookup"><span data-stu-id="5f20f-146">Your task is to design and create indexes that are best suited to your environment so that the query optimizer has a selection of efficient indexes from which to select.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="5f20f-147">contient [l’Assistant Paramétrage du moteur de base de données](../performance/database-engine-tuning-advisor.md) , qui facilite l’analyse de l’environnement de votre base de données et la sélection des index appropriés.</span><span class="sxs-lookup"><span data-stu-id="5f20f-147">provides the [Database Engine Tuning Advisor](../performance/database-engine-tuning-advisor.md) to help with the analysis of your database environment and in the selection of appropriate indexes.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="5f20f-148">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="5f20f-148">Related Tasks</span></span>  
 [<span data-ttu-id="5f20f-149">Créer des index cluster</span><span class="sxs-lookup"><span data-stu-id="5f20f-149">Create Clustered Indexes</span></span>](create-clustered-indexes.md)  
  
 [<span data-ttu-id="5f20f-150">Créez des index non-cluster</span><span class="sxs-lookup"><span data-stu-id="5f20f-150">Create Nonclustered Indexes</span></span>](create-nonclustered-indexes.md)  
  
  
