---
title: Comparaison du stockage des tables sur disque et du stockage des tables optimisées en mémoire | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: eacf443c-001a-445f-ad1c-5f5a45eca6f4
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 47cf84427b2f4f26a29f732575530b384d9c4fc9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87708371"
---
# <a name="comparing-disk-based-table-storage-to-memory-optimized-table-storage"></a><span data-ttu-id="327b7-102">Comparaison du stockage des tables sur disque et du stockage des tables optimisées en mémoire</span><span class="sxs-lookup"><span data-stu-id="327b7-102">Comparing Disk-Based Table Storage to Memory-Optimized Table Storage</span></span>
  
  
|<span data-ttu-id="327b7-103">Catégories</span><span class="sxs-lookup"><span data-stu-id="327b7-103">Categories</span></span>|<span data-ttu-id="327b7-104">Table sur disque</span><span class="sxs-lookup"><span data-stu-id="327b7-104">Disk-based Table</span></span>|<span data-ttu-id="327b7-105">Table mémoire optimisée durable</span><span class="sxs-lookup"><span data-stu-id="327b7-105">Durable Memory-Optimized Table</span></span>|  
|----------------|-----------------------|-------------------------------------|  
|<span data-ttu-id="327b7-106">DDL</span><span class="sxs-lookup"><span data-stu-id="327b7-106">DDL</span></span>|<span data-ttu-id="327b7-107">Les informations de métadonnées sont stockées dans les tables système dans le groupe de fichiers primaire de la base de données, et sont accessibles via les affichages catalogue.</span><span class="sxs-lookup"><span data-stu-id="327b7-107">Metadata information is stored in system tables in the primary filegroup of the database and is accessible through catalog views.</span></span>|<span data-ttu-id="327b7-108">Les informations de métadonnées sont stockées dans les tables système dans le groupe de fichiers primaire de la base de données, et sont accessibles via les affichages catalogue.</span><span class="sxs-lookup"><span data-stu-id="327b7-108">Metadata information is stored in system tables in the primary filegroup of the database and is accessible through catalog views.</span></span>|  
|<span data-ttu-id="327b7-109">Structure</span><span class="sxs-lookup"><span data-stu-id="327b7-109">Structure</span></span>|<span data-ttu-id="327b7-110">Les lignes sont stockées dans des pages de 8 Ko.</span><span class="sxs-lookup"><span data-stu-id="327b7-110">Rows are stored in 8K pages.</span></span> <span data-ttu-id="327b7-111">Une page stocke uniquement les lignes de la même table.</span><span class="sxs-lookup"><span data-stu-id="327b7-111">A page stores only rows from the same table.</span></span>|<span data-ttu-id="327b7-112">Les lignes sont stockées en tant que lignes individuelles.</span><span class="sxs-lookup"><span data-stu-id="327b7-112">Rows are stored as individual rows.</span></span> <span data-ttu-id="327b7-113">Il n'y a aucune structure de page.</span><span class="sxs-lookup"><span data-stu-id="327b7-113">There is no page structure.</span></span> <span data-ttu-id="327b7-114">Deux lignes consécutives dans un fichier de données peuvent appartenir à des tables mémoire optimisées différentes.</span><span class="sxs-lookup"><span data-stu-id="327b7-114">Two consecutive rows in a data file can belong to different memory-optimized tables.</span></span>|  
|<span data-ttu-id="327b7-115">Index</span><span class="sxs-lookup"><span data-stu-id="327b7-115">Indexes</span></span>|<span data-ttu-id="327b7-116">Les index sont stockés dans une structure de page semblable aux lignes de données.</span><span class="sxs-lookup"><span data-stu-id="327b7-116">Indexes are stored in a page structure similar to data rows.</span></span>|<span data-ttu-id="327b7-117">Seule la définition d'index est conservée (pas les lignes d'index).</span><span class="sxs-lookup"><span data-stu-id="327b7-117">Only the index definition is persisted (not index rows).</span></span> <span data-ttu-id="327b7-118">Les index sont conservés en mémoire et sont régénérés lorsque la table mémoire optimisée est chargée lors du redémarrage d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="327b7-118">Indexes are maintained in-memory and are regenerated when the memory-optimized table is loaded into memory as part of restarting a database.</span></span> <span data-ttu-id="327b7-119">Étant donné que les lignes d'index ne sont pas conservées, aucune journalisation n'a lieu pour les modifications d'index.</span><span class="sxs-lookup"><span data-stu-id="327b7-119">Since index rows are not persisted, no logging is done for index changes.</span></span>|  
|<span data-ttu-id="327b7-120">Opération DML</span><span class="sxs-lookup"><span data-stu-id="327b7-120">DML operation</span></span>|<span data-ttu-id="327b7-121">La première étape est la recherche de la page, puis son chargement dans le pool de mémoires tampons.</span><span class="sxs-lookup"><span data-stu-id="327b7-121">The first step is to find the page and then load it into buffer-pool.</span></span><br /><br /> <span data-ttu-id="327b7-122">Insérer</span><span class="sxs-lookup"><span data-stu-id="327b7-122">Insert</span></span><br /> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="327b7-123">insère la ligne dans la page selon le classement des lignes s'il s'agit d'un index cluster.</span><span class="sxs-lookup"><span data-stu-id="327b7-123">inserts the row on the page accounting for row ordering in case of clustered index.</span></span><br /><br /> <span data-ttu-id="327b7-124">DELETE</span><span class="sxs-lookup"><span data-stu-id="327b7-124">Delete</span></span><br /> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="327b7-125">recherche la ligne à supprimer dans la page et la marque comme supprimée.</span><span class="sxs-lookup"><span data-stu-id="327b7-125">locates the row to be deleted on the page and marks it deleted.</span></span><br /><br /> <span data-ttu-id="327b7-126">Update</span><span class="sxs-lookup"><span data-stu-id="327b7-126">Update</span></span><br /> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="327b7-127">recherche la ligne dans la page.</span><span class="sxs-lookup"><span data-stu-id="327b7-127">locates the row on the page.</span></span> <span data-ttu-id="327b7-128">La mise à jour est effectuée sur place pour les colonnes non-clés.</span><span class="sxs-lookup"><span data-stu-id="327b7-128">The update is done in-place for non-key columns.</span></span> <span data-ttu-id="327b7-129">La mise à jour de la colonne clé est effectuée par une opération de suppression et d'insertion.</span><span class="sxs-lookup"><span data-stu-id="327b7-129">Key-column update is done by a delete and insert operation.</span></span><br /><br /> <span data-ttu-id="327b7-130">Une fois l'opération DML terminée, les pages concernées sont vidées sur le disque dans le cadre de la stratégie du pool de mémoires tampons, du point de contrôle ou de la validation des transactions pour les opérations avec une journalisation minime.</span><span class="sxs-lookup"><span data-stu-id="327b7-130">After the DML operation completes, the affected pages are flushed to disk as part of buffer pool policy, checkpoint or transaction commit for minimally-logged operations.</span></span> <span data-ttu-id="327b7-131">Les opérations de lecture/écriture sur les pages entraînent des E/S superflues.</span><span class="sxs-lookup"><span data-stu-id="327b7-131">Both read/write operations on pages leads to unnecessary I/O.</span></span>|<span data-ttu-id="327b7-132">Pour les tables mémoire optimisées, les opérations DML sont effectuées directement en mémoire puisque les données résident dans la mémoire.</span><span class="sxs-lookup"><span data-stu-id="327b7-132">For memory-optimized tables, since the data resides in memory, the DML operations are done directly in memory.</span></span> <span data-ttu-id="327b7-133">Un thread d'arrière-plan lit les enregistrements du journal des tables mémoire optimisées et les rend persistants dans les fichiers de données et delta.</span><span class="sxs-lookup"><span data-stu-id="327b7-133">There is a background thread that reads the log records for memory-optimized tables and persist them into data and delta files.</span></span> <span data-ttu-id="327b7-134">Une mise à jour génère une nouvelle version de ligne.</span><span class="sxs-lookup"><span data-stu-id="327b7-134">An update generates a new row version.</span></span> <span data-ttu-id="327b7-135">Mais une mise à jour est journalisée comme une suppression suivie d'une insertion.</span><span class="sxs-lookup"><span data-stu-id="327b7-135">But an update is logged as a delete followed by an insert.</span></span>|  
|<span data-ttu-id="327b7-136">Fragmentation des données</span><span class="sxs-lookup"><span data-stu-id="327b7-136">Data Fragmentation</span></span>|<span data-ttu-id="327b7-137">La manipulation des données fragmente les données et aboutit à des pages partiellement remplies et à des pages logiquement consécutives qui ne sont pas contiguës sur le disque.</span><span class="sxs-lookup"><span data-stu-id="327b7-137">Data manipulation fragments data leading to partially filled pages and logically consecutive pages that are not contiguous on disk.</span></span> <span data-ttu-id="327b7-138">Ceci dégrade les performances d'accès aux données et vous oblige à défragmenter des données.</span><span class="sxs-lookup"><span data-stu-id="327b7-138">This degrades data access performance and requires you to defragment data.</span></span>|<span data-ttu-id="327b7-139">Les données mémoire optimisées ne sont pas stockées dans des pages, par conséquent, il n'y a pas de fragmentation de données.</span><span class="sxs-lookup"><span data-stu-id="327b7-139">Memory-optimized data is not stored in pages so there is no data fragmentation.</span></span> <span data-ttu-id="327b7-140">Toutefois, à mesure que des lignes sont mises à jour/supprimées, les fichiers de données et delta doivent être compactés.</span><span class="sxs-lookup"><span data-stu-id="327b7-140">However, as rows are updated and deleted, the data and delta files need to be compacted.</span></span> <span data-ttu-id="327b7-141">Cette opération est effectuée par un thread d'arrière-plan MERGE basé sur une stratégie de fusion.</span><span class="sxs-lookup"><span data-stu-id="327b7-141">This is done by a background MERGE thread based on a merge policy.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="327b7-142">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="327b7-142">See Also</span></span>  
 [<span data-ttu-id="327b7-143">Création et gestion du stockage des objets à mémoire optimisée</span><span class="sxs-lookup"><span data-stu-id="327b7-143">Creating and Managing Storage for Memory-Optimized Objects</span></span>](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
