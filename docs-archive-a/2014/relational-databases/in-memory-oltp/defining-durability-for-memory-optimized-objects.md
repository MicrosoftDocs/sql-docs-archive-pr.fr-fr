---
title: Définition de la durabilité des objets mémoire optimisés | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 0fe85fbf-8e8d-4983-96fd-d04b3c7d6d65
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 325f50a74ea75270dd62fc3564200c59255dc6cb
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87602827"
---
# <a name="defining-durability-for-memory-optimized-objects"></a><span data-ttu-id="3bb99-102">Définition de la durabilité des objets mémoire optimisés</span><span class="sxs-lookup"><span data-stu-id="3bb99-102">Defining Durability for Memory-Optimized Objects</span></span>
  <span data-ttu-id="3bb99-103">L'OLTP en mémoire garantit l'atomicité complète, la cohérence, l'isolation et les propriétés de durabilité complète (ACID).</span><span class="sxs-lookup"><span data-stu-id="3bb99-103">In-Memory OLTP guarantees full atomicity, consistency, isolation, and full durability (ACID) properties.</span></span> <span data-ttu-id="3bb99-104">Dans le contexte de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et des tables mémoire optimisées, la durabilité fournit les garanties suivantes :</span><span class="sxs-lookup"><span data-stu-id="3bb99-104">Durability in the context of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and memory-optimized tables provides following guarantees:</span></span>  
  
 <span data-ttu-id="3bb99-105">Durabilité transactionnelle</span><span class="sxs-lookup"><span data-stu-id="3bb99-105">Transactional Durability</span></span>  
 <span data-ttu-id="3bb99-106">Lorsque vous validez une transaction à durabilité complète ayant effectué des modifications (DDL ou DML) dans une table mémoire optimisée, les modifications apportées à une table durable mémoire optimisée sont conservées.</span><span class="sxs-lookup"><span data-stu-id="3bb99-106">When you commit a fully durable transaction that made (DDL or DML) changes to a memory-optimized table, the changes made to a durable memory-optimized table are permanent.</span></span>  
  
 <span data-ttu-id="3bb99-107">Lorsque vous validez une transaction durable retardée pour une table mémoire optimisée, la transaction devient durable uniquement après que le journal de transactions en mémoire a été enregistré sur le disque.</span><span class="sxs-lookup"><span data-stu-id="3bb99-107">When you commit a delayed durable transaction to a memory-optimized table, the transaction becomes durable only after the in-memory transaction log is saved to disk.</span></span>  
  
 <span data-ttu-id="3bb99-108">Durabilité au redémarrage</span><span class="sxs-lookup"><span data-stu-id="3bb99-108">Restart Durability</span></span>  
 <span data-ttu-id="3bb99-109">Lorsque [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] redémarre après un incident ou un arrêt programmé, les tables durables mémoire optimisées sont réinstanciées afin d'être restaurées à l'état précédant l'incident ou l'arrêt programmé.</span><span class="sxs-lookup"><span data-stu-id="3bb99-109">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restarts after a crash or planned shutdown, the memory-optimized durable tables are reinstantiated to restore them to the state before the shutdown or crash.</span></span>  
  
 <span data-ttu-id="3bb99-110">Durabilité en cas de défaillance du support</span><span class="sxs-lookup"><span data-stu-id="3bb99-110">Media Failure Durability</span></span>  
 <span data-ttu-id="3bb99-111">Si un disque endommagé ou corrompu contient une ou plusieurs copies persistantes d'objets durables mémoire optimisés, la fonctionnalité de sauvegarde et de restauration de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restaure les tables mémoire optimisées sur le nouveau support.</span><span class="sxs-lookup"><span data-stu-id="3bb99-111">If a failed or corrupt disk contains one or more persisted copies of durable memory-optimized objects, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore feature restores memory-optimized tables on the new media.</span></span>  
  
 <span data-ttu-id="3bb99-112">Il existe deux options de durabilité pour les tables mémoire optimisées :</span><span class="sxs-lookup"><span data-stu-id="3bb99-112">There are two durability options for memory-optimized tables:</span></span>  
  
 <span data-ttu-id="3bb99-113">SCHEMA_ONLY (table non durable)</span><span class="sxs-lookup"><span data-stu-id="3bb99-113">SCHEMA_ONLY (non-durable table)</span></span>  
 <span data-ttu-id="3bb99-114">Cette option garantit la durabilité du schéma de la table, y compris les index.</span><span class="sxs-lookup"><span data-stu-id="3bb99-114">This option ensures durability of the table schema, including indexes.</span></span> <span data-ttu-id="3bb99-115">Lorsque [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est redémarré, la table non durable est recréée, mais démarre sans données</span><span class="sxs-lookup"><span data-stu-id="3bb99-115">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is restarted, the non-durable table is recreated, but starts with no data.</span></span> <span data-ttu-id="3bb99-116">(contrairement à une table dans tempdb, où ni la table ni ses données sont conservées au redémarrage). Selon un scénario classique, pour créer une table non durable, il faut stocker les données temporaires, comme une table de mise en lots pour un processus ETL.</span><span class="sxs-lookup"><span data-stu-id="3bb99-116">(This is unlike a table in tempdb, where both the table and its data are lost upon restart.) A typical scenario for creating a non-durable table is to store transient data, such as a staging table for an ETL process.</span></span> <span data-ttu-id="3bb99-117">Avec une durabilité SCHEMA_ONLY, il n'y a pas de journalisation ni de point de contrôle des transactions, ce qui peut considérablement réduire les opérations d'E/S.</span><span class="sxs-lookup"><span data-stu-id="3bb99-117">A SCHEMA_ONLY durability avoids both transaction logging and checkpoint, which can significantly reduce I/O operations.</span></span>  
  
 <span data-ttu-id="3bb99-118">SCHEMA_AND_DATA (table durable)</span><span class="sxs-lookup"><span data-stu-id="3bb99-118">SCHEMA_AND_DATA (durable table)</span></span>  
 <span data-ttu-id="3bb99-119">Cette option fournit la durabilité du schéma et des données.</span><span class="sxs-lookup"><span data-stu-id="3bb99-119">This option provides durability of both schema and data.</span></span> <span data-ttu-id="3bb99-120">Le niveau de durabilité des données varie selon que vous choisissez de valider une transaction avec une durabilité complète ou avec durabilité retardée.</span><span class="sxs-lookup"><span data-stu-id="3bb99-120">The level of data durability depends on whether you commit a transaction as fully durable or with delayed durability.</span></span> <span data-ttu-id="3bb99-121">Les transactions à durabilité complète offrent la même garantie de durabilité pour le schéma et les données qu'une table sur disque.</span><span class="sxs-lookup"><span data-stu-id="3bb99-121">Fully durable transactions provide the same durability guarantee for data and schema, similar to a disk-based table.</span></span> <span data-ttu-id="3bb99-122">La durabilité retardée améliore les performances, mais peut entraîner une perte de données en cas d'incident ou de basculement du serveur.</span><span class="sxs-lookup"><span data-stu-id="3bb99-122">Delayed durability will improve performance but can potentially result in data loss in case of a server crash or fail over.</span></span> <span data-ttu-id="3bb99-123">(Pour plus d’informations sur la durabilité retardée, consultez [Contrôler la durabilité d’une transaction](../logs/control-transaction-durability.md).)</span><span class="sxs-lookup"><span data-stu-id="3bb99-123">(For more information about delayed durability, see [Control Transaction Durability](../logs/control-transaction-durability.md).)</span></span>  
  
 <span data-ttu-id="3bb99-124">Le schéma de la table mémoire optimisée est persistant, comme dans les tables sur disque, dans le groupe de fichiers primaire d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="3bb99-124">The schema of the memory-optimized table is persisted, similar to disk-based tables, in the primary file group of a database.</span></span>  
  
 <span data-ttu-id="3bb99-125">Les données des tables durables mémoire optimisées sont stockées dans des paires de fichiers de données et de fichiers delta.</span><span class="sxs-lookup"><span data-stu-id="3bb99-125">Data in durable memory-optimized tables is saved in data and delta file pairs.</span></span>  
  
 <span data-ttu-id="3bb99-126">Les index définis dans les tables mémoire optimisées sont persistants uniquement dans les métadonnées, mais pas dans le stockage.</span><span class="sxs-lookup"><span data-stu-id="3bb99-126">The indexes defined in memory-optimized tables persist only in metadata, not in storage.</span></span> <span data-ttu-id="3bb99-127">Les structures d'index sont générées lors du chargement des tables mémoire optimisées.</span><span class="sxs-lookup"><span data-stu-id="3bb99-127">Index structures are generated as part of loading memory-optimized tables.</span></span>  
  
 <span data-ttu-id="3bb99-128">Les lignes sont supprimées explicitement par une instruction DELETE, ou indirectement par une instruction UPDATE.</span><span class="sxs-lookup"><span data-stu-id="3bb99-128">Rows are deleted either explicitly by a DELETE statement or indirectly by an UPDATE statement.</span></span> <span data-ttu-id="3bb99-129">Une opération de mise à jour (UPDATE) équivaut à une suppression suivie d'une insertion.</span><span class="sxs-lookup"><span data-stu-id="3bb99-129">An UPDATE operation is executed as a delete followed by an insert.</span></span> <span data-ttu-id="3bb99-130">Lorsqu'une ligne est supprimée, aucune modification n'est apportée au fichier de données, mais une nouvelle ligne, identifiant la ligne supprimée, est ajoutée au fichier delta correspondant.</span><span class="sxs-lookup"><span data-stu-id="3bb99-130">When a row is deleted, no change is made to a data file but a new row, identifying the deleted row, is appended to the corresponding delta file.</span></span>  
  
 <span data-ttu-id="3bb99-131">Lors des opérations de récupération et de restauration, le moteur de l'OLTP en mémoire lit les fichiers delta et de données pour charger les données dans la mémoire physique.</span><span class="sxs-lookup"><span data-stu-id="3bb99-131">During recovery or restore operations, the In-Memory OLTP engine reads data and delta files for loading into physical memory.</span></span> <span data-ttu-id="3bb99-132">Le temps de chargement est déterminé par les facteurs suivants :</span><span class="sxs-lookup"><span data-stu-id="3bb99-132">The load time is determined by:</span></span>  
  
-   <span data-ttu-id="3bb99-133">Quantité de données à charger.</span><span class="sxs-lookup"><span data-stu-id="3bb99-133">The amount of data to load.</span></span>  
  
-   <span data-ttu-id="3bb99-134">Bande passante d'E/S séquentielle.</span><span class="sxs-lookup"><span data-stu-id="3bb99-134">Sequential I/O bandwidth.</span></span>  
  
-   <span data-ttu-id="3bb99-135">Degré de parallélisme, déterminé par le nombre de conteneurs de fichiers et de noyaux de processeur.</span><span class="sxs-lookup"><span data-stu-id="3bb99-135">Degree of parallelism, determined by number of file containers and processor cores.</span></span>  
  
-   <span data-ttu-id="3bb99-136">Nombre d'enregistrements de journal dans la partie active du journal devant être restaurés par progression.</span><span class="sxs-lookup"><span data-stu-id="3bb99-136">The amount of log records in the active portion of the log that need to be redone.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3bb99-137">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="3bb99-137">See Also</span></span>  
 [<span data-ttu-id="3bb99-138">Création et gestion du stockage des objets à mémoire optimisée</span><span class="sxs-lookup"><span data-stu-id="3bb99-138">Creating and Managing Storage for Memory-Optimized Objects</span></span>](creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
