---
title: Conditions requises pour l’utilisation des tables optimisées en mémoire | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 47d9a7e8-c597-4b95-a58a-dcf66df8e572
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: ecb9d388fd0e1362bb8844e874cd89162912e93e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87707556"
---
# <a name="requirements-for-using-memory-optimized-tables"></a><span data-ttu-id="bf7f6-102">Conditions requises pour l'utilisation des tables optimisées en mémoire</span><span class="sxs-lookup"><span data-stu-id="bf7f6-102">Requirements for Using Memory-Optimized Tables</span></span>
  <span data-ttu-id="bf7f6-103">Outre la [Configuration matérielle et logicielle requise pour l’installation de SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md), les conditions suivantes sont requises pour utiliser l’OLTP en mémoire :</span><span class="sxs-lookup"><span data-stu-id="bf7f6-103">In addition to the [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md), the following are requirements to use In-Memory OLTP:</span></span>  
  
-   <span data-ttu-id="bf7f6-104">Édition 64 bits Enterprise, Developer ou Evaluation de [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bf7f6-104">64-bit Enterprise, Developer, or Evaluation edition of [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)].</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="bf7f6-105">nécessite une quantité de mémoire suffisante pour contenir les données des tables et des index optimisés en mémoire.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-105">needs enough memory to hold the data in memory-optimized tables and indexes.</span></span> <span data-ttu-id="bf7f6-106">Pour prendre en compte les versions de ligne, vous devez disposer d'une quantité de mémoire deux fois plus importante que la taille prévue pour les tables et les index optimisés en mémoire.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-106">To account for row versions, you should provide an amount of memory that is two times the expected size of memory-optimized tables and indexes.</span></span> <span data-ttu-id="bf7f6-107">Mais le volume réel de mémoire nécessaire dépendra de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-107">But the actual amount of memory needed will depend on your workload.</span></span> <span data-ttu-id="bf7f6-108">Vous devez surveiller votre utilisation de la mémoire et l'ajuster selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-108">You should monitor your memory usage and make adjustments as needed.</span></span> <span data-ttu-id="bf7f6-109">La taille des données dans les tables optimisées en mémoire ne doit pas dépasser le pourcentage autorisé pour le pool.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-109">The size of data in memory-optimized tables must not exceed the allowed percentage of the pool.</span></span> <span data-ttu-id="bf7f6-110">Pour découvrir la taille d’une table optimisée en mémoire, consultez [sys. dm_db_xtp_table_memory_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-xtp-table-memory-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="bf7f6-110">To discover the size of a memory-optimized table, see [sys.dm_db_xtp_table_memory_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-xtp-table-memory-stats-transact-sql).</span></span>  
  
     <span data-ttu-id="bf7f6-111">Si la base de données contient des tables sur disque, vous devez prévoir suffisamment de mémoire pour le pool de mémoires tampons et le traitement des requêtes sur ces tables.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-111">If you have disk-based tables in the database, you need to provide enough memory for the buffer pool and query processing on those tables.</span></span>  
  
     <span data-ttu-id="bf7f6-112">Il est important de déterminer la quantité de mémoire requise par votre application OLTP en mémoire.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-112">It is important to know how much memory your In-Memory OLTP application will require.</span></span> <span data-ttu-id="bf7f6-113">Pour plus d’informations, consultez [Estimer les besoins en mémoire des tables mémoire optimisées](memory-optimized-tables.md) .</span><span class="sxs-lookup"><span data-stu-id="bf7f6-113">See [Estimate Memory Requirements for Memory-Optimized Tables](memory-optimized-tables.md) for more information.</span></span>  
  
-   <span data-ttu-id="bf7f6-114">L'espace disque disponible doit correspondre au double de la taille de vos tables optimisées en mémoire durables.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-114">Free disk space for that is two times the size of your durable memory-optimized tables.</span></span>  
  
-   <span data-ttu-id="bf7f6-115">Un processeur doit prendre en charge l’instruction **cmpxchg16b** pour pouvoir utiliser la fonction OLTP en mémoire.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-115">A processor needs to support the instruction **cmpxchg16b** to use In-Memory OLTP.</span></span> <span data-ttu-id="bf7f6-116">Tous les processeurs 64 bits modernes prennent en charge l’instruction **cmpxchg16b**.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-116">All modern 64-bit processors support **cmpxchg16b**.</span></span>  
  
     <span data-ttu-id="bf7f6-117">Si vous utilisez une application hôte de machine virtuelle et que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] affiche une erreur provoquée par un processeur plus ancien, vérifiez si l'application dispose d'une option de configuration permettant d'autoriser **cmpxchg16b**.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-117">If you are using a VM host application and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] displays an error caused by an older processor, see if the application has a configuration option to allow **cmpxchg16b**.</span></span> <span data-ttu-id="bf7f6-118">Si ce n’est pas le cas, vous pouvez utiliser Hyper-V, qui prend en charge l’instruction **cmpxchg16b** sans qu’il ne soit nécessaire de modifier une option de configuration.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-118">If not, you could use Hyper-V, which supports **cmpxchg16b** without needing to modify a configuration option.</span></span>  
  
-   <span data-ttu-id="bf7f6-119">Pour installer l'OLTP en mémoire, sélectionnez **Services Moteur de base de données** lorsque vous installez [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="bf7f6-119">To install In-Memory OLTP, select **Database Engine Services** when you install [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
     <span data-ttu-id="bf7f6-120">Pour installer la génération de rapports (en[déterminant si une table ou une procédure stockée doit être migrée vers l’OLTP en mémoire](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md)) et [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] (pour gérer l’OLTP en mémoire via l' [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] Explorateur d’objets), sélectionnez **outils de gestion-de base** ou outils de **gestion-avancé lors de** l’installation de [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bf7f6-120">To install report generation ([Determining if a Table or Stored Procedure Should Be Ported to In-Memory OLTP](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md)) and [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] (to manage In-Memory OLTP via [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] Object Explorer), select **Management Tools-Basic** or **Management Tools-Advanced** when you install [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
## <a name="important-notes-on-using-hek_2"></a><span data-ttu-id="bf7f6-121">Notes importantes lors de l'utilisation de l' [!INCLUDE[hek_2](../../../includes/hek-2-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bf7f6-121">Important Notes on Using [!INCLUDE[hek_2](../../../includes/hek-2-md.md)]</span></span>  
  
-   <span data-ttu-id="bf7f6-122">La taille totale en mémoire des tables durables dans une base de données ne doit pas dépasser 250 Go.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-122">The total in-memory size of all durable tables in a database should not exceed 250 GB.</span></span> <span data-ttu-id="bf7f6-123">Pour plus d’informations, consultez [durabilité pour les tables optimisées en mémoire](durability-for-memory-optimized-tables.md).</span><span class="sxs-lookup"><span data-stu-id="bf7f6-123">For more information, see [Durability for Memory-Optimized Tables](durability-for-memory-optimized-tables.md).</span></span>  
  
-   <span data-ttu-id="bf7f6-124">Cette version de l' [!INCLUDE[hek_2](../../../includes/hek-2-md.md)] cible des systèmes avec 2 ou 4 sockets et moins de 60 cœurs.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-124">This release of [!INCLUDE[hek_2](../../../includes/hek-2-md.md)] is targeted to perform optimally on systems with 2 or 4 sockets and fewer than 60 cores.</span></span>  
  
-   <span data-ttu-id="bf7f6-125">Les fichiers de point de contrôle ne doivent pas être supprimés manuellement.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-125">Checkpoint files must not be manually deleted.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="bf7f6-126">effectue automatiquement l'opération de garbage collection sur les fichiers de point de contrôle inutiles.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-126">automatically performs garbage collection on unneeded checkpoint files.</span></span> <span data-ttu-id="bf7f6-127">Pour plus d’informations, consultez la discussion sur la fusion de fichiers de données et delta dans [durabilité pour les tables optimisées en mémoire](durability-for-memory-optimized-tables.md).</span><span class="sxs-lookup"><span data-stu-id="bf7f6-127">For more information, see the discussion on merging data and delta files in [Durability for Memory-Optimized Tables](durability-for-memory-optimized-tables.md).</span></span>  
  
-   <span data-ttu-id="bf7f6-128">Dans cette première version de l'OLTP en mémoire (dans [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]), la seule façon de supprimer un groupe de fichiers optimisé en mémoire consiste à supprimer la base de données.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-128">In this first release of In-Memory OLTP (in [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]), the only way to remove a memory-optimized filegroup is to drop the database.</span></span>  
  
-   <span data-ttu-id="bf7f6-129">Si vous tentez de supprimer une large plage de lignes qui fait simultanément l'objet d'une charge de travail d'insertion ou de mise à jour, la suppression échouera probablement.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-129">If you attempt to delete a large batch of rows while there is a concurrent insert or update workload affecting the range of rows you are trying to delete, the delete will likely fail.</span></span> <span data-ttu-id="bf7f6-130">Pour éviter ce problème, vous devez arrêter la charge de travail d'insertion ou de mise à jour avant d'effectuer la suppression.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-130">The workaround is to stop the insert or update workload before doing the delete.</span></span> <span data-ttu-id="bf7f6-131">Sinon, vous pouvez aussi décomposer la transaction en transactions plus petites, qui sont moins susceptibles d'être perturbées par une charge de travail simultanée.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-131">Alternatively, you could configure the transaction into smaller transactions, which would be less likely to be disrupted by a concurrent workload.</span></span> <span data-ttu-id="bf7f6-132">Comme avec toutes les opérations d'écriture sur les tables optimisées en mémoire, utilisez la logique de nouvelle tentative ([Guidelines for Retry Logic for Transactions on Memory-Optimized Tables](../../database-engine/guidelines-for-retry-logic-for-transactions-on-memory-optimized-tables.md)).</span><span class="sxs-lookup"><span data-stu-id="bf7f6-132">As with all write operations on memory-optimized tables, use retry logic ([Guidelines for Retry Logic for Transactions on Memory-Optimized Tables](../../database-engine/guidelines-for-retry-logic-for-transactions-on-memory-optimized-tables.md)).</span></span>  
  
-   <span data-ttu-id="bf7f6-133">Si vous créez une ou plusieurs bases de données avec des tables optimisées en mémoire, vous devez activer l'initialisation instantanée de fichiers (accordez au compte de démarrage du service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] le droit de l'utilisateur SE_MANAGE_VOLUME_NAME) pour l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="bf7f6-133">If you create one or more databases with memory-optimized tables, you should enable Instant File Initialization (grant the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service startup account the SE_MANAGE_VOLUME_NAME user right) for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="bf7f6-134">Faute d'initialisation instantanée, les fichiers de stockage optimisés en mémoire (fichiers de données et delta) seront initialisés à la création, ce qui peut avoir un impact négatif sur les performances de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-134">Without Instant File Initialization, memory-optimized storage files (data and delta files) will be initialized upon creation, which can have negative impact on the performance of your workload.</span></span> <span data-ttu-id="bf7f6-135">Pour plus d'informations sur l'initialisation instantanée de fichiers, consultez [Initialisation des fichiers de base de données](../databases/database-instant-file-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="bf7f6-135">For more information about Instant File Initialization, see [Database File Initialization](../databases/database-instant-file-initialization.md).</span></span> <span data-ttu-id="bf7f6-136">Pour plus d'informations sur la façon d'activer l'initialisation instantanée de fichiers, consultez [Comment et pourquoi activer l'initialisation instantanée de fichiers](https://blogs.msdn.com/b/sql_pfe_blog/archive/2009/12/23/how-and-why-to-enable-instant-file-initialization.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf7f6-136">For information on how to enable Instant File Initialization, see [How and Why to Enable Instant File Initialization](https://blogs.msdn.com/b/sql_pfe_blog/archive/2009/12/23/how-and-why-to-enable-instant-file-initialization.aspx).</span></span>  
  
## <a name="did-this-article-help-you-were-listening"></a><span data-ttu-id="bf7f6-137">Cet article vous a-t-il été utile ?</span><span class="sxs-lookup"><span data-stu-id="bf7f6-137">Did this Article Help You?</span></span> <span data-ttu-id="bf7f6-138">Nous sommes à l’écoute</span><span class="sxs-lookup"><span data-stu-id="bf7f6-138">We're Listening</span></span>  
 <span data-ttu-id="bf7f6-139">Quels renseignements souhaitez-vous obtenir ? Avez-vous trouvé ce que vous cherchiez ?</span><span class="sxs-lookup"><span data-stu-id="bf7f6-139">What information are you looking for, and did you find it?</span></span> <span data-ttu-id="bf7f6-140">Nous écoutons vos commentaires afin d’améliorer le contenu.</span><span class="sxs-lookup"><span data-stu-id="bf7f6-140">We're listening to your feedback to improve the content.</span></span> <span data-ttu-id="bf7f6-141">Veuillez envoyer vos commentaires à [sqlfeedback@microsoft.com](mailto:sqlfeedback@microsoft.com?subject=Your%20feedback%20about%20the%20Requirements%20for%20Using%20Memory-Optimized%20Tables%20page) .</span><span class="sxs-lookup"><span data-stu-id="bf7f6-141">Please submit your comments to [sqlfeedback@microsoft.com](mailto:sqlfeedback@microsoft.com?subject=Your%20feedback%20about%20the%20Requirements%20for%20Using%20Memory-Optimized%20Tables%20page).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bf7f6-142">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bf7f6-142">See Also</span></span>  
 [<span data-ttu-id="bf7f6-143">OLTP en mémoire &#40;Optimisation en mémoire&#41;</span><span class="sxs-lookup"><span data-stu-id="bf7f6-143">In-Memory OLTP &#40;In-Memory Optimization&#41;</span></span>](in-memory-oltp-in-memory-optimization.md)  
  
  
