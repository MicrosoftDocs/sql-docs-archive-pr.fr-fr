---
title: Contraintes uniques et contraintes de validation | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- constraints [SQL Server], Visual Database Tools
- Visual Database Tools [SQL Server], constraints
ms.assetid: 637098af-2567-48f8-90f4-b41df059833e
author: stevestein
ms.author: sstein
ms.openlocfilehash: 205e4ae3d6f89f10a933bf357d1eeda458852584
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87695484"
---
# <a name="unique-constraints-and-check-constraints"></a><span data-ttu-id="c98d1-102">Contraintes uniques et contraintes de validation</span><span class="sxs-lookup"><span data-stu-id="c98d1-102">Unique Constraints and Check Constraints</span></span>
  <span data-ttu-id="c98d1-103">Les contraintes UNIQUE et CHECK sont deux types de contraintes qui peuvent être utilisées pour appliquer l'intégrité des données à des tables [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c98d1-103">UNIQUE constraints and CHECK constraints are two types of constraints that can be used to enforce data integrity in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] tables.</span></span> <span data-ttu-id="c98d1-104">Ce sont des objets de base de données importants.</span><span class="sxs-lookup"><span data-stu-id="c98d1-104">These are important database objects.</span></span>  
  
 <span data-ttu-id="c98d1-105">Cette rubrique contient les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="c98d1-105">This topic contains the following sections.</span></span>  
  
 [<span data-ttu-id="c98d1-106">Contraintes UNIQUE</span><span class="sxs-lookup"><span data-stu-id="c98d1-106">UNIQUE Constraints</span></span>](#Unique)  
  
 [<span data-ttu-id="c98d1-107">Contraintes CHECK</span><span class="sxs-lookup"><span data-stu-id="c98d1-107">CHECK Constraints</span></span>](#Check)  
  
 [<span data-ttu-id="c98d1-108">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="c98d1-108">Related Tasks</span></span>](#Tasks)  
  
##  <a name="unique-constraints"></a><a name="Unique"></a> <span data-ttu-id="c98d1-109">Contraintes UNIQUE</span><span class="sxs-lookup"><span data-stu-id="c98d1-109">UNIQUE Constraints</span></span>  
 <span data-ttu-id="c98d1-110">Les contraintes sont des règles que [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] applique automatiquement.</span><span class="sxs-lookup"><span data-stu-id="c98d1-110">Constraints are rules that the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] enforces for you.</span></span> <span data-ttu-id="c98d1-111">par exemple, vous pouvez utiliser des contraintes UNIQUE pour garantir qu'aucune valeur en double n'est entrée dans des colonnes spécifiques ne faisant pas partie d'une clé primaire.</span><span class="sxs-lookup"><span data-stu-id="c98d1-111">For example, you can use UNIQUE constraints to make sure that no duplicate values are entered in specific columns that do not participate in a primary key.</span></span> <span data-ttu-id="c98d1-112">Bien qu'une contrainte UNIQUE et une contrainte PRIMARY KEY assurent l'unicité, il est préférable d'avoir recours à une contrainte UNIQUE au lieu d'une contrainte PRIMARY KEY lorsque vous voulez assurer l'unicité d'une colonne (ou d'une combinaison de colonnes) qui n'est pas la clé primaire.</span><span class="sxs-lookup"><span data-stu-id="c98d1-112">Although both a UNIQUE constraint and a PRIMARY KEY constraint enforce uniqueness, use a UNIQUE constraint instead of a PRIMARY KEY constraint when you want to enforce the uniqueness of a column, or combination of columns, that is not the primary key.</span></span>  
  
 <span data-ttu-id="c98d1-113">À la différence des contraintes PRIMARY KEY, les contraintes UNIQUE autorisent la valeur NULL.</span><span class="sxs-lookup"><span data-stu-id="c98d1-113">Unlike PRIMARY KEY constraints, UNIQUE constraints allow for the value NULL.</span></span> <span data-ttu-id="c98d1-114">Cependant, comme pour toute valeur participant à une contrainte UNIQUE, une seule valeur NULL est autorisée par colonne.</span><span class="sxs-lookup"><span data-stu-id="c98d1-114">However, as with any value participating in a UNIQUE constraint, only one null value is allowed per column.</span></span> <span data-ttu-id="c98d1-115">Une contrainte UNIQUE peut être référencée par une contrainte FOREIGN KEY.</span><span class="sxs-lookup"><span data-stu-id="c98d1-115">A UNIQUE constraint can be referenced by a FOREIGN KEY constraint.</span></span>  
  
 <span data-ttu-id="c98d1-116">Lorsque vous ajoutez une contrainte UNIQUE à une ou plusieurs colonnes dans la table, par défaut, le [!INCLUDE[ssDE](../../includes/ssde-md.md)] examine les données existantes dans les colonnes pour s'assurer que toutes les valeurs sont uniques.</span><span class="sxs-lookup"><span data-stu-id="c98d1-116">When a UNIQUE constraint is added to an existing column or columns in the table, by default, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] examines the existing data in the columns to make sure all values are unique.</span></span> <span data-ttu-id="c98d1-117">Si une contrainte UNIQUE est ajoutée à une colonne qui comporte des valeurs dupliquées, le [!INCLUDE[ssDE](../../includes/ssde-md.md)] retourne une erreur et n’ajoute pas la contrainte.</span><span class="sxs-lookup"><span data-stu-id="c98d1-117">If a UNIQUE constraint is added to a column that has duplicated values, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error and does not add the constraint.</span></span>  
  
 <span data-ttu-id="c98d1-118">Le [!INCLUDE[ssDE](../../includes/ssde-md.md)] crée automatiquement un index UNIQUE pour appliquer l’impératif d’unicité de la contrainte UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="c98d1-118">The [!INCLUDE[ssDE](../../includes/ssde-md.md)] automatically creates a UNIQUE index to enforce the uniqueness requirement of the UNIQUE constraint.</span></span> <span data-ttu-id="c98d1-119">Dès lors, en cas de tentative d’insertion d’une ligne dupliquée, le [!INCLUDE[ssDE](../../includes/ssde-md.md)] retourne un message d’erreur indiquant que la contrainte UNIQUE a été violée et n’ajoute pas la ligne à la table.</span><span class="sxs-lookup"><span data-stu-id="c98d1-119">Therefore, if an attempt to insert a duplicate row is made, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] returns an error message that states the UNIQUE constraint has been violated and does not add the row to the table.</span></span> <span data-ttu-id="c98d1-120">Sauf si un index cluster est explicitement spécifié, un index non-cluster unique est créé par défaut pour assurer l'application de la contrainte UNIQUE.</span><span class="sxs-lookup"><span data-stu-id="c98d1-120">Unless a clustered index is explicitly specified, a unique, nonclustered index is created by default to enforce the UNIQUE constraint.</span></span>  
  
##  <a name="check-constraints"></a><a name="Check"></a> <span data-ttu-id="c98d1-121">Contraintes CHECK</span><span class="sxs-lookup"><span data-stu-id="c98d1-121">CHECK Constraints</span></span>  
 <span data-ttu-id="c98d1-122">Les contraintes CHECK assurent l'intégrité de domaine en limitant les valeurs acceptées par une ou plusieurs colonnes.</span><span class="sxs-lookup"><span data-stu-id="c98d1-122">CHECK constraints enforce domain integrity by limiting the values that are accepted by one or more columns.</span></span> <span data-ttu-id="c98d1-123">Vous pouvez créer une contrainte CHECK avec n'importe quelle expression logique (booléenne) qui retourne TRUE ou FALSE sur la base des opérateurs logiques.</span><span class="sxs-lookup"><span data-stu-id="c98d1-123">You can create a CHECK constraint with any logical (Boolean) expression that returns TRUE or FALSE based on the logical operators.</span></span> <span data-ttu-id="c98d1-124">Par exemple, il est possible de limiter la plage de valeurs d'une colonne **salary** en créant une contrainte CHECK qui autorise uniquement les données comprises entre 15 000 $ et 100 000 $.</span><span class="sxs-lookup"><span data-stu-id="c98d1-124">For example, the range of values for a **salary** column can be limited by creating a CHECK constraint that allows for only data that ranges from $15,000 through $100,000.</span></span> <span data-ttu-id="c98d1-125">De cette façon, il est impossible d'entrer des salaires non compris dans cette fourchette de salaires normaux.</span><span class="sxs-lookup"><span data-stu-id="c98d1-125">This prevents salaries from being entered beyond the regular salary range.</span></span> <span data-ttu-id="c98d1-126">L'expression logique est la suivante : `salary >= 15000 AND salary <= 100000`.</span><span class="sxs-lookup"><span data-stu-id="c98d1-126">The logical expression would be the following: `salary >= 15000 AND salary <= 100000`.</span></span>  
  
 <span data-ttu-id="c98d1-127">Vous pouvez appliquer plusieurs contraintes CHECK à une seule colonne.</span><span class="sxs-lookup"><span data-stu-id="c98d1-127">You can apply multiple CHECK constraints to a single column.</span></span> <span data-ttu-id="c98d1-128">Vous pouvez aussi appliquer une seule contrainte CHECK à plusieurs colonnes en la créant au niveau de la table.</span><span class="sxs-lookup"><span data-stu-id="c98d1-128">You can also apply a single CHECK constraint to multiple columns by creating it at the table level.</span></span> <span data-ttu-id="c98d1-129">Ainsi, vous pouvez utiliser une contrainte CHECK sur plusieurs colonnes pour confirmer que les lignes comportant la valeur **USA** dans leur colonne **country_region** possèdent également une valeur à deux caractères dans leur colonne **state** .</span><span class="sxs-lookup"><span data-stu-id="c98d1-129">For example, a multiple-column CHECK constraint could be used to confirm that any row with a **country_region** column value of **USA** also has a two-character value in the **state** column.</span></span> <span data-ttu-id="c98d1-130">Cela permet de vérifier plusieurs conditions au même emplacement.</span><span class="sxs-lookup"><span data-stu-id="c98d1-130">This allows for multiple conditions to be checked in one location.</span></span>  
  
 <span data-ttu-id="c98d1-131">Les contraites CHECK sont similaires aux contraintes FOREIGN KEY dans la mesure où elles contrôlent les valeurs qui sont placées dans une colonne.</span><span class="sxs-lookup"><span data-stu-id="c98d1-131">CHECK constraints are similar to FOREIGN KEY constraints in that they control the values that are put in a column.</span></span> <span data-ttu-id="c98d1-132">Leur différence réside dans la manière dont elles déterminent les valeurs considérées comme valides : les contraintes FOREIGN KEY obtiennent la liste des valeurs valides d'une autre table, tandis que les contraintes CHECK déterminent ces valeurs sur la base d'une expression logique.</span><span class="sxs-lookup"><span data-stu-id="c98d1-132">The difference is in how they determine which values are valid: FOREIGN KEY constraints obtain the list of valid values from another table, while CHECK constraints determine the valid values from a logical expression.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="c98d1-133">Les contraintes qui incluent une conversion de type de données implicite ou explicite peuvent causer l'échec de certaines opérations.</span><span class="sxs-lookup"><span data-stu-id="c98d1-133">Constraints that include implicit or explicit data type conversion may cause certain operations to fail.</span></span> <span data-ttu-id="c98d1-134">Par exemple, ces contraintes définies sur des tables qui sont les sources d'une commutation de partition peuvent causer l'échec d'une opération ALTER TABLE...SWITCH.</span><span class="sxs-lookup"><span data-stu-id="c98d1-134">For example, such constraints defined on tables that are sources of partition switching may cause an ALTER TABLE...SWITCH operation to fail.</span></span> <span data-ttu-id="c98d1-135">Évitez les conversions de types de données dans les définitions des contraintes.</span><span class="sxs-lookup"><span data-stu-id="c98d1-135">Avoid data type conversion in constraint definitions.</span></span>  
  
### <a name="limitations-of-check-constraints"></a><span data-ttu-id="c98d1-136">Limitations des contraintes CHECK</span><span class="sxs-lookup"><span data-stu-id="c98d1-136">Limitations of CHECK Constraints</span></span>  
 <span data-ttu-id="c98d1-137">Les contraintes CHECK rejettent les valeurs qui donnent FALSE.</span><span class="sxs-lookup"><span data-stu-id="c98d1-137">CHECK constraints reject values that evaluate to FALSE.</span></span> <span data-ttu-id="c98d1-138">Comme les valeurs nulles donnent UNKNOWN, il se peut que leur présence dans les expressions supplante une contrainte.</span><span class="sxs-lookup"><span data-stu-id="c98d1-138">Because null values evaluate to UNKNOWN, their presence in expressions may override a constraint.</span></span> <span data-ttu-id="c98d1-139">Par exemple, supposons que vous placez une contrainte sur une `int` colonne MaColonne en spécifiant que **MaColonne** peut contenir uniquement la valeur 10 (**MaColonne = 10**). **MyColumn**</span><span class="sxs-lookup"><span data-stu-id="c98d1-139">For example, suppose you place a constraint on an `int` column **MyColumn** specifying that **MyColumn** can contain only the value 10 (**MyColumn=10**).</span></span> <span data-ttu-id="c98d1-140">Si vous insérez la valeur NULL dans **MyColumn**, le [!INCLUDE[ssDE](../../includes/ssde-md.md)] insère NULL et ne retourne pas d'erreur.</span><span class="sxs-lookup"><span data-stu-id="c98d1-140">If you insert the value NULL into **MyColumn**, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] inserts NULL and does not return an error.</span></span>  
  
 <span data-ttu-id="c98d1-141">Une contrainte CHECK retourne TRUE lorsque la condition qu'elle vérifie n'est pas FALSE pour une ligne quelconque de la table.</span><span class="sxs-lookup"><span data-stu-id="c98d1-141">A CHECK constraint returns TRUE when the condition it is checking is not FALSE for any row in the table.</span></span> <span data-ttu-id="c98d1-142">Une contrainte CHECK s'exécute au niveau de la ligne.</span><span class="sxs-lookup"><span data-stu-id="c98d1-142">A CHECK constraint works at the row level.</span></span> <span data-ttu-id="c98d1-143">Si une table venant d'être créée ne comporte aucune ligne, les éventuelles contraintes CHECK sur cette table sont considérées comme valides.</span><span class="sxs-lookup"><span data-stu-id="c98d1-143">If a table that has just been created does not have any rows, any CHECK constraint on this table is considered valid.</span></span> <span data-ttu-id="c98d1-144">Cette situation peut produire des résultats inattendus, comme l'illustre l'exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="c98d1-144">This situation can produce unexpected results, as in the following example.</span></span>  
  
```  
CREATE TABLE CheckTbl (col1 int, col2 int);  
GO  
CREATE FUNCTION CheckFnctn()  
RETURNS int  
AS   
BEGIN  
   DECLARE @retval int  
   SELECT @retval = COUNT(*) FROM CheckTbl  
   RETURN @retval  
END;  
GO  
ALTER TABLE CheckTbl  
ADD CONSTRAINT chkRowCount CHECK (dbo.CheckFnctn() >= 1 );  
GO  
```  
  
 <span data-ttu-id="c98d1-145">La contrainte `CHECK` ajoutée spécifie que la table `CheckTbl`doit contenir au moins une ligne.</span><span class="sxs-lookup"><span data-stu-id="c98d1-145">The `CHECK` constraint being added specifies that there must be at least one row in table `CheckTbl`.</span></span> <span data-ttu-id="c98d1-146">Toutefois, comme la table ne contient aucune ligne par rapport à laquelle vérifier la condition de cette contrainte, l'instruction ALTER TABLE réussit.</span><span class="sxs-lookup"><span data-stu-id="c98d1-146">However, because there are no rows in the table against which to check the condition of this constraint, the ALTER TABLE statement succeeds.</span></span>  
  
 <span data-ttu-id="c98d1-147">Les contraintes CHECK ne sont pas validées pendant les instructions DELETE.</span><span class="sxs-lookup"><span data-stu-id="c98d1-147">CHECK constraints are not validated during DELETE statements.</span></span> <span data-ttu-id="c98d1-148">Par conséquent, l'exécution d'instructions DELETE sur des tables avec certains types de contraintes de vérification peuvent produire des résultats inattendus.</span><span class="sxs-lookup"><span data-stu-id="c98d1-148">Therefore, executing DELETE statements on tables with certain types of check constraints may produce unexpected results.</span></span> <span data-ttu-id="c98d1-149">Imaginons, par exemple, les instructions suivantes exécutées sur la table `CheckTbl`.</span><span class="sxs-lookup"><span data-stu-id="c98d1-149">For example, consider the following statements executed on table `CheckTbl`.</span></span>  
  
```  
INSERT INTO CheckTbl VALUES (10, 10);  
GO  
DELETE CheckTbl WHERE col1 = 10;  
```  
  
 <span data-ttu-id="c98d1-150">L'instruction `DELETE` aboutit, même si la contrainte `CHECK` spécifie que la table `CheckTbl` doit comporter au moins `1` ligne.</span><span class="sxs-lookup"><span data-stu-id="c98d1-150">The `DELETE` statement succeeds, even though the `CHECK` constraint specifies that table `CheckTbl` must have at least `1` row.</span></span>  
  
##  <a name="related-tasks"></a><a name="Tasks"></a> <span data-ttu-id="c98d1-151">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="c98d1-151">Related Tasks</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c98d1-152">Si la table est publiée pour réplication, vous devez apporter vos modifications au schéma à l’aide de l’instruction Transact-SQL [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) ou de SMO (SQL Server Management Objects).</span><span class="sxs-lookup"><span data-stu-id="c98d1-152">If the table is published for replication, you must make schema changes using the Transact-SQL statement [ALTER TABLE](/sql/t-sql/statements/alter-table-transact-sql) or SQL Server Management Objects (SMO).</span></span> <span data-ttu-id="c98d1-153">Lorsque les modifications sont apportées au diagramme à l’aide du Concepteur de tables ou du Concepteur de diagrammes de base de données, celui-ci tente d’abandonner la table et de la recréer.</span><span class="sxs-lookup"><span data-stu-id="c98d1-153">When schema changes are made using the Table Designer or the Database Diagram Designer, it attempts to drop and recreate the table.</span></span> <span data-ttu-id="c98d1-154">Toutefois, il est impossible d'abandonner les objets publiés, par conséquent les modifications du schéma échoueront.</span><span class="sxs-lookup"><span data-stu-id="c98d1-154">You cannot drop published objects, therefore the schema change will fail.</span></span>  
  
|<span data-ttu-id="c98d1-155">Tâche</span><span class="sxs-lookup"><span data-stu-id="c98d1-155">Task</span></span>|<span data-ttu-id="c98d1-156">Rubrique</span><span class="sxs-lookup"><span data-stu-id="c98d1-156">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="c98d1-157">Décrit comment créer une contrainte unique.</span><span class="sxs-lookup"><span data-stu-id="c98d1-157">Describes how to create a unique constraint.</span></span>|[<span data-ttu-id="c98d1-158">Créer des contraintes uniques</span><span class="sxs-lookup"><span data-stu-id="c98d1-158">Create Unique Constraints</span></span>](../tables/create-unique-constraints.md)|  
|<span data-ttu-id="c98d1-159">Décrit comment modifier une contrainte unique.</span><span class="sxs-lookup"><span data-stu-id="c98d1-159">Describes how to modify a unique constraint.</span></span>|[<span data-ttu-id="c98d1-160">Modifier des contraintes uniques</span><span class="sxs-lookup"><span data-stu-id="c98d1-160">Modify Unique Constraints</span></span>](../tables/modify-unique-constraints.md)|  
|<span data-ttu-id="c98d1-161">Décrit comment supprimer une contrainte unique.</span><span class="sxs-lookup"><span data-stu-id="c98d1-161">Describes how to delete a unique constraint.</span></span>|[<span data-ttu-id="c98d1-162">Supprimer des contraintes uniques</span><span class="sxs-lookup"><span data-stu-id="c98d1-162">Delete Unique Constraints</span></span>](../tables/delete-unique-constraints.md)|  
|<span data-ttu-id="c98d1-163">Décrit comment désactiver une contrainte de validation lorsque l'Agent de réplication insère ou met à jour les données dans votre table.</span><span class="sxs-lookup"><span data-stu-id="c98d1-163">Describes how to disable a check constraint when a replication agent inserts or updates data in your table.</span></span>|[<span data-ttu-id="c98d1-164">Désactiver des contraintes de validation pour la réplication</span><span class="sxs-lookup"><span data-stu-id="c98d1-164">Disable Check Constraints for Replication</span></span>](../tables/disable-check-constraints-for-replication.md)|  
|<span data-ttu-id="c98d1-165">Décrit comment désactiver une contrainte de validation lorsque vous ajoutez, mettez à jour ou supprimez des données dans une table.</span><span class="sxs-lookup"><span data-stu-id="c98d1-165">Describes how to disable a check constraint when data is added to, updated in, or deleted from a table.</span></span>|[<span data-ttu-id="c98d1-166">Désactiver des contraintes de validation avec des instructions INSERT et UPDATE</span><span class="sxs-lookup"><span data-stu-id="c98d1-166">Disable Check Constraints with INSERT and UPDATE Statements</span></span>](../tables/disable-check-constraints-with-insert-and-update-statements.md)|  
|<span data-ttu-id="c98d1-167">Décrit comment modifier l'expression de contrainte ou les options qui activent ou désactivent la contrainte pour des conditions spécifiques.</span><span class="sxs-lookup"><span data-stu-id="c98d1-167">Describes how to change the constraint expression or the options that enable or disable the constraint for specific conditions.</span></span>|[<span data-ttu-id="c98d1-168">Modifier des contraintes de validation</span><span class="sxs-lookup"><span data-stu-id="c98d1-168">Modify Check Constraints</span></span>](../tables/modify-check-constraints.md)|  
|<span data-ttu-id="c98d1-169">Décrit comment supprimer une contrainte de validation.</span><span class="sxs-lookup"><span data-stu-id="c98d1-169">Describes how to delete a check constraint.</span></span>|[<span data-ttu-id="c98d1-170">Supprimer des contraintes de validation</span><span class="sxs-lookup"><span data-stu-id="c98d1-170">Delete Check Constraints</span></span>](../tables/delete-check-constraints.md)|  
|<span data-ttu-id="c98d1-171">Décrit comment afficher les propriétés d'une contrainte de validation.</span><span class="sxs-lookup"><span data-stu-id="c98d1-171">Describes how to view the properties of a check constraint.</span></span>|[<span data-ttu-id="c98d1-172">Contraintes uniques et contraintes de validation</span><span class="sxs-lookup"><span data-stu-id="c98d1-172">Unique Constraints and Check Constraints</span></span>](../tables/unique-constraints-and-check-constraints.md)|  
  
  
