---
title: Sauvegarder et restaurer des bases de données système (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- system databases [SQL Server], backing up and restoring
- restoring system databases [SQL Server]
- backing up [SQL Server], system databases
- database backups [SQL Server], system databases
- servers [SQL Server], backup
ms.assetid: aef0c4fa-ba67-413d-9359-1a67682fdaab
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 51ccf1aeadcf4ab9a662cdd629a812d3ee4b82aa
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87614689"
---
# <a name="back-up-and-restore-of-system-databases-sql-server"></a><span data-ttu-id="a4d22-102">Sauvegarder et restaurer des bases de données système (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="a4d22-102">Back Up and Restore of System Databases (SQL Server)</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="a4d22-103">assure la maintenance d’un jeu de bases de données au niveau système, les*bases de données système*, qui sont essentielles au fonctionnement d’une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="a4d22-103">maintains a set of system-level databases, s*ystem databases*, which are essential for the operation of a server instance.</span></span> <span data-ttu-id="a4d22-104">Il est nécessaire de sauvegarder plusieurs bases de données système après chaque mise à jour importante.</span><span class="sxs-lookup"><span data-stu-id="a4d22-104">Several of the system databases must be backed up after every significant update.</span></span> <span data-ttu-id="a4d22-105">Les bases de données système qui doivent toujours êtres sauvegardées sont les suivantes : **msdb**, **master**, et **model**.</span><span class="sxs-lookup"><span data-stu-id="a4d22-105">The system databases that you must always back up include **msdb**, **master**, and **model**.</span></span> <span data-ttu-id="a4d22-106">Si une base de données utilise la réplication sur l'instance de serveur, vous devez également sauvegarder la base de données système **distribution** .</span><span class="sxs-lookup"><span data-stu-id="a4d22-106">If any database uses replication on the server instance, there is a **distribution** system database that you must also back up.</span></span> <span data-ttu-id="a4d22-107">La sauvegarde de ces bases de données système permet de restaurer et de récupérer le système [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en cas d'incident système, comme le dysfonctionnement du disque dur.</span><span class="sxs-lookup"><span data-stu-id="a4d22-107">Backups of these system databases let you restore and recover the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system in the event of system failure, such as the loss of a hard disk.</span></span>  
  
 <span data-ttu-id="a4d22-108">Le tableau suivant récapitule l'ensemble des bases de données système :</span><span class="sxs-lookup"><span data-stu-id="a4d22-108">The following table summarizes all of the system databases.</span></span>  
  
|<span data-ttu-id="a4d22-109">Base de données système</span><span class="sxs-lookup"><span data-stu-id="a4d22-109">System database</span></span>|<span data-ttu-id="a4d22-110">Description</span><span class="sxs-lookup"><span data-stu-id="a4d22-110">Description</span></span>|<span data-ttu-id="a4d22-111">Des sauvegardes sont-elles nécessaires ?</span><span class="sxs-lookup"><span data-stu-id="a4d22-111">Are backups required?</span></span>|<span data-ttu-id="a4d22-112">mode de récupération</span><span class="sxs-lookup"><span data-stu-id="a4d22-112">Recovery model</span></span>|<span data-ttu-id="a4d22-113">Commentaires</span><span class="sxs-lookup"><span data-stu-id="a4d22-113">Comments</span></span>|  
|---------------------|-----------------|---------------------------|--------------------|--------------|  
|[<span data-ttu-id="a4d22-114">master</span><span class="sxs-lookup"><span data-stu-id="a4d22-114">master</span></span>](../databases/master-database.md)|<span data-ttu-id="a4d22-115">Base de données qui contient l'intégralité des informations système relatives à un système [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a4d22-115">The database that records all of the system level information for a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] system.</span></span>|<span data-ttu-id="a4d22-116">Oui</span><span class="sxs-lookup"><span data-stu-id="a4d22-116">Yes</span></span>|<span data-ttu-id="a4d22-117">Simple</span><span class="sxs-lookup"><span data-stu-id="a4d22-117">Simple</span></span>|<span data-ttu-id="a4d22-118">Sauvegardez la base de données **master** aussi souvent que nécessaire pour protéger suffisamment les données en fonction de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="a4d22-118">Back up **master** as often as necessary to protect the data sufficiently for your business needs.</span></span> <span data-ttu-id="a4d22-119">Nous vous recommandons de définir une planification de sauvegarde régulière complétée d'une sauvegarde supplémentaire après une mise à jour substantielle.</span><span class="sxs-lookup"><span data-stu-id="a4d22-119">We recommend a regular backup schedule, which you can supplement with an additional backup after a substantial update.</span></span>|  
|[<span data-ttu-id="a4d22-120">model</span><span class="sxs-lookup"><span data-stu-id="a4d22-120">model</span></span>](../databases/model-database.md)|<span data-ttu-id="a4d22-121">Modèle de toutes les bases de données créées dans l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a4d22-121">The template for all databases that are created on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|<span data-ttu-id="a4d22-122">Oui</span><span class="sxs-lookup"><span data-stu-id="a4d22-122">Yes</span></span>|<span data-ttu-id="a4d22-123">Configurable par l’utilisateur<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="a4d22-123">User configurable<sup>1</sup></span></span>|<span data-ttu-id="a4d22-124">Sauvegardez la base de données **model** aussi souvent que nécessaire en fonction de vos besoins ; par exemple, immédiatement après avoir personnalisé ses options de base de données.</span><span class="sxs-lookup"><span data-stu-id="a4d22-124">Back up **model** only when necessary for your business needs; for example, immediately after customizing its database options.</span></span><br /><br /> <span data-ttu-id="a4d22-125">**Bonne pratique :** Nous recommandons d’effectuer uniquement des sauvegardes complètes de **mode**, selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="a4d22-125">**Best practice:** We recommend that you create only full database backups of **model**, as required.</span></span> <span data-ttu-id="a4d22-126">Étant donné que **mode** est petit et change rarement, il n'est pas nécessaire de sauvegarder le journal.</span><span class="sxs-lookup"><span data-stu-id="a4d22-126">Because **model** is small and rarely changes, backing up the log is unnecessary.</span></span>|  
|[<span data-ttu-id="a4d22-127">msdb</span><span class="sxs-lookup"><span data-stu-id="a4d22-127">msdb</span></span>](../databases/msdb-database.md)|<span data-ttu-id="a4d22-128">La base de données est utilisée par l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] pour planifier les alertes et les travaux et pour enregistrer les opérateurs.</span><span class="sxs-lookup"><span data-stu-id="a4d22-128">The database used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent for scheduling alerts and jobs, and for recording operators.</span></span> <span data-ttu-id="a4d22-129">La base de données**msdb** contient aussi les tables d'historique, telles que les tables d'historique de restauration et de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="a4d22-129">**msdb** also contains history tables such as the backup and restore history tables.</span></span>|<span data-ttu-id="a4d22-130">Oui</span><span class="sxs-lookup"><span data-stu-id="a4d22-130">Yes</span></span>|<span data-ttu-id="a4d22-131">Simple (par défaut)</span><span class="sxs-lookup"><span data-stu-id="a4d22-131">Simple (default)</span></span>|<span data-ttu-id="a4d22-132">Sauvegardez la base de données **msdb** chaque fois qu'elle est mise à jour.</span><span class="sxs-lookup"><span data-stu-id="a4d22-132">Back up **msdb** whenever it is updated.</span></span>|  
|<span data-ttu-id="a4d22-133">[Resource](../databases/resource-database.md) (RDB)</span><span class="sxs-lookup"><span data-stu-id="a4d22-133">[Resource](../databases/resource-database.md) (RDB)</span></span>|<span data-ttu-id="a4d22-134">Base de données en lecture seule qui contient les copies de tous les objets système fournis avec [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="a4d22-134">A read-only database that contains copies of all system objects that ship with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|<span data-ttu-id="a4d22-135">Non</span><span class="sxs-lookup"><span data-stu-id="a4d22-135">No</span></span>|-|<span data-ttu-id="a4d22-136">La base de données **Resource** réside dans le fichier mssqlsystemresource.mdf, qui contient uniquement du code.</span><span class="sxs-lookup"><span data-stu-id="a4d22-136">The **Resource** database resides in the mssqlsystemresource.mdf file, which contains only code.</span></span> <span data-ttu-id="a4d22-137">Par conséquent, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ne peut pas sauvegarder la base de données **Resource** .</span><span class="sxs-lookup"><span data-stu-id="a4d22-137">Therefore, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot back up the **Resource** database.</span></span><br /><br /> <span data-ttu-id="a4d22-138">Remarque : Vous pouvez effectuer une sauvegarde sur fichiers ou sur disque sur le fichier mssqlsystemresource.mdf en le traitant comme s’il s’agissait d’un fichier binaire (.exe) plutôt que d’un fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="a4d22-138">Note: You can perform a file-based or a disk-based backup on the mssqlsystemresource.mdf file by treating the file as if it were a binary (.exe) file, instead of a database file.</span></span> <span data-ttu-id="a4d22-139">Toutefois, vous ne pouvez pas utiliser la restauration [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sur les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="a4d22-139">But you cannot use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restore on the backups.</span></span> <span data-ttu-id="a4d22-140">La restauration d’une copie de sauvegarde du fichier mssqlsystemresource.mdf peut uniquement être effectuée manuellement et vous devez alors veiller à ne pas remplacer la version actuelle de la base de données **Resource** par une version obsolète ou potentiellement instable.</span><span class="sxs-lookup"><span data-stu-id="a4d22-140">Restoring a backup copy of mssqlsystemresource.mdf can only be done manually, and you must be careful not to overwrite the current **Resource** database with an out-of-date or potentially insecure version.</span></span>|  
|[<span data-ttu-id="a4d22-141">tempdb</span><span class="sxs-lookup"><span data-stu-id="a4d22-141">tempdb</span></span>](../databases/tempdb-database.md)|<span data-ttu-id="a4d22-142">Espace de travail qui contient les ensembles de résultats temporaires et intermédiaires.</span><span class="sxs-lookup"><span data-stu-id="a4d22-142">A workspace for holding temporary or intermediate result sets.</span></span> <span data-ttu-id="a4d22-143">Cette base de données est recréée chaque fois qu'une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] démarre.</span><span class="sxs-lookup"><span data-stu-id="a4d22-143">This database is re-created every time an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is started.</span></span> <span data-ttu-id="a4d22-144">Lors de l'arrêt de l'instance du serveur, toutes les données dans **tempdb** sont supprimées définitivement.</span><span class="sxs-lookup"><span data-stu-id="a4d22-144">When the server instance is shut down, any data in **tempdb** is deleted permanently.</span></span>|<span data-ttu-id="a4d22-145">Non</span><span class="sxs-lookup"><span data-stu-id="a4d22-145">No</span></span>|<span data-ttu-id="a4d22-146">Simple</span><span class="sxs-lookup"><span data-stu-id="a4d22-146">Simple</span></span>|<span data-ttu-id="a4d22-147">Vous ne pouvez pas sauvegarder la base de données système **tempdb** .</span><span class="sxs-lookup"><span data-stu-id="a4d22-147">You cannot back up the **tempdb** system database.</span></span>|  
|[<span data-ttu-id="a4d22-148">Configurer la distribution</span><span class="sxs-lookup"><span data-stu-id="a4d22-148">Configure Distribution</span></span>](../replication/configure-distribution.md)|<span data-ttu-id="a4d22-149">Base de données qui existe uniquement si le serveur est configuré comme serveur de distribution de réplication.</span><span class="sxs-lookup"><span data-stu-id="a4d22-149">A database that exists only if the server is configured as a replication Distributor.</span></span> <span data-ttu-id="a4d22-150">Cette base de données contient les métadonnées et les données historiques de tous les types de réplications, ainsi que les transactions de la réplication transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="a4d22-150">This database stores metadata and history data for all types of replication, and transactions for transactional replication.</span></span>|<span data-ttu-id="a4d22-151">Oui</span><span class="sxs-lookup"><span data-stu-id="a4d22-151">Yes</span></span>|<span data-ttu-id="a4d22-152">Simple</span><span class="sxs-lookup"><span data-stu-id="a4d22-152">Simple</span></span>|<span data-ttu-id="a4d22-153">Pour savoir quand vous devez sauvegarder la base de données **distribution** , consultez [Sauvegarder et restaurer des bases de données répliquées](../replication/administration/back-up-and-restore-replicated-databases.md).</span><span class="sxs-lookup"><span data-stu-id="a4d22-153">For information about when to back up the **distribution** database, see [Back Up and Restore Replicated Databases](../replication/administration/back-up-and-restore-replicated-databases.md).</span></span>|  
  
 <span data-ttu-id="a4d22-154"><sup>1</sup> pour connaître le mode de récupération actuel du modèle, consultez [afficher ou modifier le mode de récupération d’une base de données &#40;SQL Server&#41;](view-or-change-the-recovery-model-of-a-database-sql-server.md) ou [sys. databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="a4d22-154"><sup>1</sup> To learn the current recovery model of the model, see [View or Change the Recovery Model of a Database &#40;SQL Server&#41;](view-or-change-the-recovery-model-of-a-database-sql-server.md) or [sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql).</span></span>  
  
## <a name="limitations-on-restoring-system-databases"></a><span data-ttu-id="a4d22-155">Limitations sur la restauration des bases de données système</span><span class="sxs-lookup"><span data-stu-id="a4d22-155">Limitations on Restoring System Databases</span></span>  
  
-   <span data-ttu-id="a4d22-156">Les bases de données système peuvent être restaurées uniquement à partir de sauvegardes créées dans la version de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dans laquelle s'exécute actuellement l'instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="a4d22-156">System databases can be restored only from backups that are created on the version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that the server instance is currently running.</span></span> <span data-ttu-id="a4d22-157">Par exemple, pour restaurer une base de données système sur une instance de serveur qui s’exécute sur [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1.</span><span class="sxs-lookup"><span data-stu-id="a4d22-157">For example, to restore a system database on a server instance that is running on [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1.</span></span>  
  
-   <span data-ttu-id="a4d22-158">Pour restaurer une base de données, l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] doit être active.</span><span class="sxs-lookup"><span data-stu-id="a4d22-158">To restore any database, the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be running.</span></span> <span data-ttu-id="a4d22-159">Pour pouvoir démarrer une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , la base de données **master** doit être accessible et partiellement utilisable.</span><span class="sxs-lookup"><span data-stu-id="a4d22-159">Startup of an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] requires that the **master** database is accessible and at least partly usable.</span></span> <span data-ttu-id="a4d22-160">Si la base de données **master** devient inutilisable, vous pouvez la ramener à un état utilisable de deux manières :</span><span class="sxs-lookup"><span data-stu-id="a4d22-160">If **master** becomes unusable, you can return the database to a usable state in either of the following ways:</span></span>  
  
    -   <span data-ttu-id="a4d22-161">en restaurant la base de données **master** depuis une sauvegarde actuelle.</span><span class="sxs-lookup"><span data-stu-id="a4d22-161">Restore **master** from a current database backup.</span></span>  
  
         <span data-ttu-id="a4d22-162">Si vous pouvez démarrer l'instance du serveur, vous pouvez restaurer la base de données **master** depuis une sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="a4d22-162">If you can start the server instance, you should be able to restore **master** from a full database backup.</span></span>  
  
    -   <span data-ttu-id="a4d22-163">Recréez complètement la base de données **master** .</span><span class="sxs-lookup"><span data-stu-id="a4d22-163">Rebuild **master** completely.</span></span>  
  
         <span data-ttu-id="a4d22-164">Si la base de données **master** est gravement endommagée et ne vous permet pas de démarrer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], vous devez recréer la base de données **master**.</span><span class="sxs-lookup"><span data-stu-id="a4d22-164">If severe damage to **master** prevents you from starting [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must rebuild **master**.</span></span> <span data-ttu-id="a4d22-165">Pour plus d’informations, consultez [Reconstruire des bases de données système](../databases/system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="a4d22-165">For more information, see [Rebuild System Databases](../databases/system-databases.md).</span></span>  
  
        > [!IMPORTANT]  
        >  <span data-ttu-id="a4d22-166">Lorsque vous recréez la base de données **master** , vous recréez toutes les bases de données système.</span><span class="sxs-lookup"><span data-stu-id="a4d22-166">Rebuilding **master** rebuilds all of the system databases.</span></span>  
  
-   <span data-ttu-id="a4d22-167">Dans certains cas, les problèmes de récupération de la base de données model peuvent nécessiter la reconstruction des bases de données système ou le remplacement des fichiers mdf et ldf de la base de données model.</span><span class="sxs-lookup"><span data-stu-id="a4d22-167">Under some circumstances, problems recovering the model database may require rebuilding the system databases or replacing the mdf and ldf files for the model database.</span></span> <span data-ttu-id="a4d22-168">Pour plus d’informations, consultez [Reconstruire des bases de données système](../databases/system-databases.md).</span><span class="sxs-lookup"><span data-stu-id="a4d22-168">For more information, see [Rebuild System Databases](../databases/system-databases.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="a4d22-169">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="a4d22-169">Related Tasks</span></span>  
  
-   [<span data-ttu-id="a4d22-170">Créer une sauvegarde complète de base de données &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="a4d22-170">Create a Full Database Backup &#40;SQL Server&#41;</span></span>](create-a-full-database-backup-sql-server.md)  
  
-   [<span data-ttu-id="a4d22-171">Restaurations complètes de bases de données &#40;mode de récupération simple&#41;</span><span class="sxs-lookup"><span data-stu-id="a4d22-171">Complete Database Restores &#40;Simple Recovery Model&#41;</span></span>](complete-database-restores-simple-recovery-model.md)  
  
-   [<span data-ttu-id="a4d22-172">Restaurer la base de données MASTER &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="a4d22-172">Restore the master Database &#40;Transact-SQL&#41;</span></span>](restore-the-master-database-transact-sql.md)  
  
-   [<span data-ttu-id="a4d22-173">Afficher ou modifier le mode de récupération d’une base de données &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="a4d22-173">View or Change the Recovery Model of a Database &#40;SQL Server&#41;</span></span>](view-or-change-the-recovery-model-of-a-database-sql-server.md)  
  
-   [<span data-ttu-id="a4d22-174">Déplacer des bases de données système</span><span class="sxs-lookup"><span data-stu-id="a4d22-174">Move System Databases</span></span>](../databases/move-system-databases.md)  
  
## <a name="see-also"></a><span data-ttu-id="a4d22-175">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a4d22-175">See Also</span></span>  
 <span data-ttu-id="a4d22-176">[Base de données de distribution](../../relational-databases/replication/distribution-database.md) </span><span class="sxs-lookup"><span data-stu-id="a4d22-176">[Distribution Database](../../relational-databases/replication/distribution-database.md) </span></span>  
 <span data-ttu-id="a4d22-177">[Base de données master](../databases/master-database.md) </span><span class="sxs-lookup"><span data-stu-id="a4d22-177">[master Database](../databases/master-database.md) </span></span>  
 <span data-ttu-id="a4d22-178">[Base de données msdb](../databases/msdb-database.md) </span><span class="sxs-lookup"><span data-stu-id="a4d22-178">[msdb Database](../databases/msdb-database.md) </span></span>  
 <span data-ttu-id="a4d22-179">[Base de données model](../databases/model-database.md) </span><span class="sxs-lookup"><span data-stu-id="a4d22-179">[model Database](../databases/model-database.md) </span></span>  
 <span data-ttu-id="a4d22-180">[Base de données Resource](../databases/resource-database.md) </span><span class="sxs-lookup"><span data-stu-id="a4d22-180">[Resource Database](../databases/resource-database.md) </span></span>  
 [<span data-ttu-id="a4d22-181">Base de données tempdb</span><span class="sxs-lookup"><span data-stu-id="a4d22-181">tempdb Database</span></span>](../databases/tempdb-database.md)  
  
  
