---
title: Jeux de supports, familles de supports et jeux de sauvegarde (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- media sets [SQL Server], about media sets
- backup media [SQL Server], about backup media
- backups [SQL Server], media sets
- media sets [SQL Server]
- media headers [SQL Server]
- backup sets [SQL Server], about backup sets
- backup media [SQL Server], media sets
- backups [SQL Server], media families
- backup media [SQL Server], media families
- media families [SQL Server]
- backups [SQL Server], backup sets
- backup sets [SQL Server]
ms.assetid: 2b8f19a2-ee9d-4120-b194-fbcd2076a489
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 853451ea5a7c43cd073fdf75703b3c4651b442d0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87612439"
---
# <a name="media-sets-media-families-and-backup-sets-sql-server"></a><span data-ttu-id="77ac2-102">Jeux de supports, familles de supports et jeux de sauvegarde (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="77ac2-102">Media Sets, Media Families, and Backup Sets (SQL Server)</span></span>
  <span data-ttu-id="77ac2-103">Cette rubrique présente la terminologie de base des supports de sauvegarde propre aux sauvegardes et restaurations dans [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Cette rubrique s'adresse aux lecteurs qui font leurs premiers pas dans [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="77ac2-103">This topic introduces the basic backup-media terminology of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore and is intended for readers who are new to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="77ac2-104">Cette rubrique décrit le format utilisé par [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] pour les supports de sauvegarde, la correspondance entre le support de sauvegarde et les unités de sauvegarde, l'organisation des sauvegardes sur le support de sauvegarde, et plusieurs considérations relatives aux jeux de supports et aux familles de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-104">This topic describes the format that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses for backup media, the correspondence between backup media and backup devices, the organization of backups on backup media, and several considerations for media sets and media families.</span></span> <span data-ttu-id="77ac2-105">La rubrique décrit également les étapes de l'initialisation ou la mise en forme du support de sauvegarde avant de l'utiliser pour la première fois ou de remplacer un jeu de supports ancien par un nouveau, comment remplacer d'anciens jeux de sauvegarde dans un jeu de supports, et comment ajouter de nouveaux jeux de sauvegarde à un jeu de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-105">The topic also describes the steps initializing or formatting backup media before you use it for the first time or replace an old media set with a new media set, how to overwrite old backup sets in a media set, and how to append new backup sets to a media set.</span></span>

> [!NOTE]
>  <span data-ttu-id="77ac2-106">Pour plus d’informations sur la sauvegarde SQL Server dans le service de stockage d’objets BLOB Azure, consultez, [SQL Server sauvegarde et restauration avec le service de stockage d’objets BLOB Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md).</span><span class="sxs-lookup"><span data-stu-id="77ac2-106">For more information on SQL Server backup to the Azure Blob storage service,, see, [SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md).</span></span>


##  <a name="terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="77ac2-107">Termes et définitions</span><span class="sxs-lookup"><span data-stu-id="77ac2-107">Terms and Definitions</span></span>
 <span data-ttu-id="77ac2-108">jeu de supports Ensemble ordonné de supports de sauvegarde (bandes ou fichiers disque) sur lequel une ou plusieurs opérations de sauvegarde ont été écrites en utilisant un type et un nombre fixes d'unités de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-108">media set An ordered collection of backup media, tapes or disk files, to which one or more backup operations have written using a fixed type and number of backup devices.</span></span>

 <span data-ttu-id="77ac2-109">famille de supports Sauvegardes créées sur une seule unité qui n'est pas mise en miroir ou sur un ensemble d'unités en miroir dans un jeu de supports</span><span class="sxs-lookup"><span data-stu-id="77ac2-109">media family Backups created on a single nonmirrored device or a set of mirrored devices in a media set</span></span>

 <span data-ttu-id="77ac2-110">jeu de sauvegarde Contenu de sauvegarde ajouté à un jeu de supports par une opération de sauvegarde réussie.</span><span class="sxs-lookup"><span data-stu-id="77ac2-110">backup set The backup content that is added to a media set by a successful backup operation.</span></span>


##  <a name="overview-of-media-sets-media-families-and-backup-sets"></a><a name="OvMediaSetsFamiliesBackupSets"></a><span data-ttu-id="77ac2-111">Vue d’ensemble des jeux de supports, familles de supports et jeux de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-111">Overview of Media Sets, Media Families, and Backup Sets</span></span>
 <span data-ttu-id="77ac2-112">Les sauvegardes d'un ou de plusieurs supports de sauvegarde constituent un seul jeu de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-112">The backups on a set of one or more backup media compose a single media set.</span></span> <span data-ttu-id="77ac2-113">Un *jeu de supports* est un ensemble ordonné de *supports de sauvegarde*, de bandes, de fichiers disque ou d’objets blob Azure auxquels une ou plusieurs opérations de sauvegarde ont été appliquées en utilisant un type et un nombre fixes d’unités de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-113">A *media set* is an ordered collection of *backup media*, tapes or disk files, or Azure Blobs, to which one or more backup operations have written using a fixed type and number of backup devices.</span></span> <span data-ttu-id="77ac2-114">Un jeu de supports donné utilise des lecteurs de bandes, lecteurs de disque ou objets blob Azure, mais pas une combinaison de deux ou plus.</span><span class="sxs-lookup"><span data-stu-id="77ac2-114">A given media set uses tape drives, or disk drives or Azure blobs, but not a combination of two or more.</span></span> <span data-ttu-id="77ac2-115">Par exemple, les unités de sauvegarde associées à un support de sauvegarde peuvent être les trois lecteurs de bandes `\\.\TAPE0`, `\\.\TAPE1`et `\\.\TAPE2`.</span><span class="sxs-lookup"><span data-stu-id="77ac2-115">For example, the backup devices associated with a media set might be three tape drives named `\\.\TAPE0`, `\\.\TAPE1`, and `\\.\TAPE2`.</span></span> <span data-ttu-id="77ac2-116">Ce support de sauvegarde contient uniquement des bandes, en commençant avec au minimum trois bandes (une par lecteur).</span><span class="sxs-lookup"><span data-stu-id="77ac2-116">That media set contains only tapes, starting with a minimum of three tapes (one per drive).</span></span> <span data-ttu-id="77ac2-117">Le type et le nombre d'unités de sauvegarde sont établis lors de la création d'un support de sauvegarde ; il n'est pas possible de les modifier.</span><span class="sxs-lookup"><span data-stu-id="77ac2-117">The type and number of backup devices are established when a media set is created, and they cannot be changed.</span></span> <span data-ttu-id="77ac2-118">Cependant, si nécessaire, il est possible de remplacer entre les opérations de sauvegarde et de restauration une unité donnée par une unité du même type.</span><span class="sxs-lookup"><span data-stu-id="77ac2-118">However, if necessary, between backup and restore operations a given device can be replaced with a device of the same type.</span></span>

 <span data-ttu-id="77ac2-119">Un jeu de supports est créé sur le support de sauvegarde en formatant le support au cours d'une opération de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-119">A media set is created on the backup media during a backup operation by formatting the backup media.</span></span> <span data-ttu-id="77ac2-120">Pour plus d'informations, consultez [Création d'un jeu de supports](#CreatingMediaSet), plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="77ac2-120">For more information, see [Creating a New Media Set](#CreatingMediaSet), later in this topic.</span></span> <span data-ttu-id="77ac2-121">Après le formatage, chaque fichier ou bande contient un en-tête de support pour le jeu de supports et est prêt à recevoir le contenu de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-121">After formatting, each file or tape contains a media header for the media set and is ready to receive backup content.</span></span> <span data-ttu-id="77ac2-122">Lorsque l'en-tête est en place, l'opération de sauvegarde se poursuit pour sauvegarder les données spécifiées sur le support de sauvegarde de toutes les unités de sauvegarde spécifiées pour l'opération.</span><span class="sxs-lookup"><span data-stu-id="77ac2-122">With the header in place, the backup operation proceeds to back up the specified data to the backup media on all of the backup devices specified for the operation.</span></span>

> [!NOTE]
>  <span data-ttu-id="77ac2-123">Il est possible de mettre en miroir les supports de sauvegarde pour la protection contre les volumes de sauvegarde endommagés (bande ou fichier sur disque).</span><span class="sxs-lookup"><span data-stu-id="77ac2-123">Media sets can be mirrored to protect against a damaged media volume (a tape or disk file).</span></span> <span data-ttu-id="77ac2-124">Pour plus d'informations, consultez [Jeux de supports de sauvegarde en miroir &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="77ac2-124">For more information, see [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span></span>

 [!INCLUDE[ssEnterpriseEd10](../../includes/sskatmai-md.md)]<span data-ttu-id="77ac2-125">ou version ultérieure peut lire les sauvegardes compressées.</span><span class="sxs-lookup"><span data-stu-id="77ac2-125">or later can read compressed backups.</span></span> <span data-ttu-id="77ac2-126">Pour plus d’informations, consultez [Compression de sauvegardes &#40;SQL Server&#41;](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="77ac2-126">For more information, see [Backup Compression &#40;SQL Server&#41;](backup-compression-sql-server.md).</span></span>


### <a name="media-families"></a><span data-ttu-id="77ac2-127">Familles de supports</span><span class="sxs-lookup"><span data-stu-id="77ac2-127">Media Families</span></span>
 <span data-ttu-id="77ac2-128">Les sauvegardes créées sur une seule unité qui n'est pas mise en miroir ou sur un ensemble d'unités en miroir dans un jeu de supports constituent une *famille de supports*.</span><span class="sxs-lookup"><span data-stu-id="77ac2-128">Backups created on a single nonmirrored device or a set of mirrored devices in a media set constitute a *media family*.</span></span> <span data-ttu-id="77ac2-129">Le nombre d'unités de sauvegarde utilisées pour le support de sauvegarde détermine le nombre de familles de supports d'un support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-129">The number of backup devices used for the media set determines the number of media families in a media set.</span></span> <span data-ttu-id="77ac2-130">Si, par exemple, un support de sauvegarde utilise deux unités de sauvegarde qui ne sont pas mises en miroir, il contient deux familles de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-130">For example, if a media set uses two nonmirrored backup devices, the media set contains two media families.</span></span>

> [!NOTE]
>  <span data-ttu-id="77ac2-131">Dans un support de sauvegarde en miroir, chaque famille de support est mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="77ac2-131">In a mirrored media set, each media family is mirrored.</span></span> <span data-ttu-id="77ac2-132">Par exemple, si six unités de sauvegarde sont utilisées pour formater un support de sauvegarde, il y a trois familles de supports contenant chacune deux copies équivalentes des données de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-132">For example, if six backup devices are used to format a media set, where two mirrors are used, there are three media families, each containing two equivalent copies of backup data.</span></span> <span data-ttu-id="77ac2-133">Pour plus d’informations sur les jeux de supports en miroir, consultez [Jeux de supports de sauvegarde en miroir &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="77ac2-133">For more information about mirrored media sets, see [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md).</span></span>

 <span data-ttu-id="77ac2-134">Chaque bande ou disque d'une famille de supports est affecté à un *numéro de séquence de support*.</span><span class="sxs-lookup"><span data-stu-id="77ac2-134">Each tape or disk in a media family is assigned a *media sequence number*.</span></span> <span data-ttu-id="77ac2-135">Le numéro de séquence de support d'un disque est toujours 1.</span><span class="sxs-lookup"><span data-stu-id="77ac2-135">The media sequence number of a disk is always 1.</span></span> <span data-ttu-id="77ac2-136">Dans une famille de supports sur bande, ce numéro de séquence est 1 pour la bande initiale, 2 pour la deuxième bande, etc.</span><span class="sxs-lookup"><span data-stu-id="77ac2-136">In a tape media family, the sequence number of the initial tape is 1, the sequence number of the second tape is 2, and so forth.</span></span> <span data-ttu-id="77ac2-137">Pour plus d'informations, consultez [Utilisation des jeux et familles de supports](#ConsiderationsForMediaSetFamilies).</span><span class="sxs-lookup"><span data-stu-id="77ac2-137">For more information, see [Using Media Sets and Families](#ConsiderationsForMediaSetFamilies).</span></span>

#### <a name="the-media-header"></a><span data-ttu-id="77ac2-138">En-tête de support</span><span class="sxs-lookup"><span data-stu-id="77ac2-138">The Media Header</span></span>
 <span data-ttu-id="77ac2-139">Chaque volume de support de sauvegarde (fichier sur disque ou bande) contient un en-tête de support créé par la première opération de sauvegarde qui utilise la bande (ou le disque).</span><span class="sxs-lookup"><span data-stu-id="77ac2-139">Every volume of backup media (disk file or tape) contains a media header that is created when by the first backup operation that uses the tape (or disk).</span></span> <span data-ttu-id="77ac2-140">Cet en-tête reste intact jusqu'à ce que le support soit reformaté.</span><span class="sxs-lookup"><span data-stu-id="77ac2-140">That header remains intact until the media is reformatted.</span></span>

 <span data-ttu-id="77ac2-141">L'en-tête de support contient toutes les informations indispensables à l'identification du support (fichier sur disque ou bande) et son emplacement dans la famille de supports à laquelle il appartient.</span><span class="sxs-lookup"><span data-stu-id="77ac2-141">The media header contains all of the information required to identify the media (disk file or tape) and its place within the media family to which it belongs.</span></span> <span data-ttu-id="77ac2-142">Ces informations incluent :</span><span class="sxs-lookup"><span data-stu-id="77ac2-142">This information includes:</span></span>

-   <span data-ttu-id="77ac2-143">Nom du support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-143">The name of the media.</span></span>

     <span data-ttu-id="77ac2-144">Le nom du support est facultatif, mais nous recommandons l'utilisation de noms cohérents qui identifient clairement votre support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-144">The media name is optionally, but we recommend consistently using media names that clearly identify your media.</span></span> <span data-ttu-id="77ac2-145">Le nom d'un support est affecté par toute personne qui formate le support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-145">A media name is assigned by whoever formats the media.</span></span>

-   <span data-ttu-id="77ac2-146">Numéro d'identification unique du support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-146">The unique identification number of the media set.</span></span>

-   <span data-ttu-id="77ac2-147">Nombre de familles de supports contenues dans le support de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-147">The number of media families in the media set.</span></span>

-   <span data-ttu-id="77ac2-148">Le numéro de séquence de la famille de supports contient ce support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-148">The sequence number of the media family containing this media.</span></span>

-   <span data-ttu-id="77ac2-149">Numéro d'identification unique de la famille de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-149">The unique identification number for the media family.</span></span>

-   <span data-ttu-id="77ac2-150">Numéro de séquence de ce support dans la famille.</span><span class="sxs-lookup"><span data-stu-id="77ac2-150">The sequence number of this media in the media family.</span></span> <span data-ttu-id="77ac2-151">Pour un fichier sur disque, cette valeur est toujours égale à 1.</span><span class="sxs-lookup"><span data-stu-id="77ac2-151">For a disk file, this value is always 1.</span></span>

-   <span data-ttu-id="77ac2-152">Si la description du support contient une étiquette de support MTF ou une description du support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-152">Whether the media description contains an MTF media label or a media description.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="77ac2-153">Tous les supports utilisés pour une opération de sauvegarde ou de restauration utilisent un format de sauvegarde standard appelé [!INCLUDE[msCoName](../../includes/ssnoversion-md.md)] préserve toute étiquette de support MTF écrite par une autre application, mais n’écrit pas d’étiquettes de support MTF.</span><span class="sxs-lookup"><span data-stu-id="77ac2-153">All media that is used for a backup or restore operation use a standard backup format called [!INCLUDE[msCoName](../../includes/ssnoversion-md.md)] preserves any MTF media label written by another application but does not write MTF media labels.</span></span>

-   <span data-ttu-id="77ac2-154">Étiquette au format de bande [!INCLUDE[msCoName](../../../includes/msconame-md.md)] ou description du support au format texte libre.</span><span class="sxs-lookup"><span data-stu-id="77ac2-154">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Tape Format media label or the media description (in free-form text).</span></span>

-   <span data-ttu-id="77ac2-155">Nom du logiciel de sauvegarde qui a écrit l'étiquette du support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-155">The name of the backup software that wrote the label.</span></span>

-   <span data-ttu-id="77ac2-156">Numéro d'identification unique du fournisseur du logiciel qui a formaté le support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-156">The unique vendor identification number of the software vendor that formatted the media.</span></span>

-   <span data-ttu-id="77ac2-157">Date et heure de création de l'étiquette.</span><span class="sxs-lookup"><span data-stu-id="77ac2-157">The date and time the label was written.</span></span>

-   <span data-ttu-id="77ac2-158">Nombre de miroirs dans le jeu (1 à 4) ; 1 indique une unité non mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="77ac2-158">The number of mirrors in the set (1-4); 1 indicates an unmirrored device.</span></span>

 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="77ac2-159">peut traiter des supports formatés par des versions [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]antérieures.</span><span class="sxs-lookup"><span data-stu-id="77ac2-159">can process media formatted by earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>

### <a name="backup-sets"></a><span data-ttu-id="77ac2-160">Jeux de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-160">Backup Sets</span></span>
 <span data-ttu-id="77ac2-161">Une sauvegarde réussie ajoute un seul *jeu de sauvegarde* au jeu de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-161">A successful backup operation adds a single *backup set* to the media set.</span></span> <span data-ttu-id="77ac2-162">Le jeu de sauvegarde est décrit selon le support de sauvegarde auquel appartient la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-162">The backup set is described in terms of the media set to which the backup belongs.</span></span> <span data-ttu-id="77ac2-163">Si le support de sauvegarde se compose d'une seule famille de supports, celle-ci contient tout le jeu de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-163">If the backup media consists of only one media family, that family contains the entire backup set.</span></span> <span data-ttu-id="77ac2-164">Si le support de sauvegarde se compose de plusieurs familles de supports, le jeu de sauvegarde est réparti entre elles.</span><span class="sxs-lookup"><span data-stu-id="77ac2-164">If the backup media consists of multiple media families, the backup set is distributed among them.</span></span> <span data-ttu-id="77ac2-165">Sur chaque support, le jeu de sauvegarde contient un en-tête qui le décrit.</span><span class="sxs-lookup"><span data-stu-id="77ac2-165">On each medium, the backup set contains a header that describes the backup set.</span></span>

 <span data-ttu-id="77ac2-166">L'exemple suivant illustre une instruction [!INCLUDE[tsql](../../includes/tsql-md.md)] qui crée un support de sauvegarde nommé `MyAdvWorks_MediaSet_1` pour la base de données [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] en utilisant trois lecteurs de bandes comme unités de sauvegarde :</span><span class="sxs-lookup"><span data-stu-id="77ac2-166">The following example shows a [!INCLUDE[tsql](../../includes/tsql-md.md)] statement that creates a media set called `MyAdvWorks_MediaSet_1` for the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database using three tape drives as backup devices:</span></span>

```
BACKUP DATABASE AdventureWorks2012
TO TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
WITH 
   FORMAT,
   MEDIANAME = 'MyAdvWorks_MediaSet_1'
```

 <span data-ttu-id="77ac2-167">Lorsqu'elle réussit, la sauvegarde a pour résultat un nouveau support de sauvegarde qui contient un nouvel en-tête et un jeu de sauvegarde réparti sur les trois bandes.</span><span class="sxs-lookup"><span data-stu-id="77ac2-167">If successful, this backup operation results in a new media set containing a new media header and one backup set spread across three tapes.</span></span> <span data-ttu-id="77ac2-168">La figure ci-dessous illustre ces résultats :</span><span class="sxs-lookup"><span data-stu-id="77ac2-168">The following figure illustrates these results:</span></span>

 <span data-ttu-id="77ac2-169">![En-tête de support et premier jeu de sauvegarde sur 3 bandes](../../database-engine/media/bnr-mediaset-new.gif "En-tête de support et premier jeu de sauvegarde sur 3 bandes")</span><span class="sxs-lookup"><span data-stu-id="77ac2-169">![Media header and first backup set on 3 tapes](../../database-engine/media/bnr-mediaset-new.gif "Media header and first backup set on 3 tapes")</span></span>

 <span data-ttu-id="77ac2-170">Généralement, après la création d'un support de sauvegarde, les sauvegardes suivantes, l'une après l'autre, ajoutent leurs jeux de sauvegarde au support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-170">Typically, after a media set is created, subsequent backup operations, one after another, append their backup sets to the media set.</span></span> <span data-ttu-id="77ac2-171">Tous les supports utilisés par un jeu de sauvegarde forment le support, quel que soit le nombre de supports ou d'unités de sauvegarde concernés.</span><span class="sxs-lookup"><span data-stu-id="77ac2-171">All of the media used by a backup set make up the media set, regardless of the number of media or backup devices involved.</span></span> <span data-ttu-id="77ac2-172">Les jeux de sauvegarde sont numérotés consécutivement par leur position dans le support de sauvegarde, ce qui permet de spécifier le jeu de sauvegarde à restaurer.</span><span class="sxs-lookup"><span data-stu-id="77ac2-172">Backup sets are sequentially numbered by their position in the media set, allowing you to specify which backup set to restore.</span></span>

 <span data-ttu-id="77ac2-173">Chaque sauvegarde sur un support doit écrire sur le même nombre et le même type d'unités de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-173">Every backup operation to a media set must write to the same number and type of backup devices.</span></span> <span data-ttu-id="77ac2-174">Avec plusieurs unités, comme avec le premier jeu de sauvegarde, le contenu de chaque sauvegarde suivante est réparti sur les supports de sauvegarde de toutes les unités.</span><span class="sxs-lookup"><span data-stu-id="77ac2-174">With multiple devices, as with the first backup set, the content of every subsequent backup set is distributed among the backup media on all of the devices.</span></span> <span data-ttu-id="77ac2-175">Pour continuer avec l'exemple ci-dessus, une deuxième sauvegarde (différentielle) ajoute les informations au même support de sauvegarde :</span><span class="sxs-lookup"><span data-stu-id="77ac2-175">To continue the above example, a second backup operation (a differential backup) appends information to the same media set:</span></span>

```
BACKUP DATABASE AdventureWorks2012
TO TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
WITH 
   NOINIT,
   MEDIANAME = 'AdventureWorksMediaSet1',
   DIFFERENTIAL
```

> [!NOTE]
>  <span data-ttu-id="77ac2-176">NOINIT est l'option par défaut, mais elle indiquée pour des raisons de clarté.</span><span class="sxs-lookup"><span data-stu-id="77ac2-176">The NOINIT option is the default, but is included for clarity.</span></span>

 <span data-ttu-id="77ac2-177">Si la deuxième sauvegarde réussit, elle écrit le deuxième jeu de sauvegarde sur le support de sauvegarde en répartissant ainsi le contenu de la sauvegarde :</span><span class="sxs-lookup"><span data-stu-id="77ac2-177">If the second backup operation succeeds, it writes a second backup set to the media set, with the following distribution of backup content:</span></span>

 <span data-ttu-id="77ac2-178">![Deuxième jeu de sauvegarde réparti sur 3 bandes de jeux de supports](../../database-engine/media/bnr-mediaset-appendedto.gif "Deuxième jeu de sauvegarde réparti sur 3 bandes de jeux de supports")</span><span class="sxs-lookup"><span data-stu-id="77ac2-178">![Second backup set spread across 3 media-set tapes](../../database-engine/media/bnr-mediaset-appendedto.gif "Second backup set spread across 3 media-set tapes")</span></span>

 <span data-ttu-id="77ac2-179">Au cours de la restauration de sauvegardes, vous pouvez utiliser l'option FILE pour spécifier les sauvegardes à utiliser.</span><span class="sxs-lookup"><span data-stu-id="77ac2-179">When you are restoring backups, you can use you the FILE option to specify which backups you want to use.</span></span> <span data-ttu-id="77ac2-180">L’exemple suivant illustre l’utilisation des clauses FILE **=** _backup_set_file_number_ lors de la restauration d’une sauvegarde complète de la base de données [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] suivie d’une sauvegarde différentielle sur le même jeu de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-180">The following example shows the use of FILE **=**_backup_set_file_number_ clauses when restoring a full database backup of the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database followed by a differential database backup on the same media set.</span></span> <span data-ttu-id="77ac2-181">Le jeu de supports fait appel à trois bandes de sauvegardes qui figurent sur les lecteurs de bande `\\.\tape0`, `tape1`, et `tape2`.</span><span class="sxs-lookup"><span data-stu-id="77ac2-181">The media set uses three backup tapes, which are on tape drives `\\.\tape0`, `tape1`, and `tape2`.</span></span>

```
RESTORE DATABASE AdventureWorks2012 FROM TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2'
   WITH 
   MEDIANAME = 'AdventureWorksMediaSet1',
   FILE=1, 
   NORECOVERY;
RESTORE DATABASE AdventureWorks2012 FROM TAPE = '\\.\tape0', TAPE = '\\.\tape1', TAPE = '\\.\tape2' 
   WITH 
   MEDIANAME = 'AdventureWorksMediaSet1',
   FILE=2, 
   RECOVERY;
GO
```

 <span data-ttu-id="77ac2-182">Pour plus d’informations sur les tables d’historique qui conservent les informations sur les jeux de supports, familles de supports et jeux de sauvegarde, consultez [Historique de sauvegarde et informations d’en-tête &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="77ac2-182">For information about the history tables that store information about media sets and their media families and backup sets, see [Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md).</span></span>

 <span data-ttu-id="77ac2-183">Le nombre de supports de sauvegarde d'un support de sauvegarde dépend de plusieurs facteurs :</span><span class="sxs-lookup"><span data-stu-id="77ac2-183">The number of backup media in a media set depends on several factors:</span></span>

-   <span data-ttu-id="77ac2-184">Nombre d'unités de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-184">Number of backup devices</span></span>

-   <span data-ttu-id="77ac2-185">Type des unités de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-185">Type of backup devices</span></span>

-   <span data-ttu-id="77ac2-186">Nombre de jeux de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-186">Number of backup sets</span></span>

##  <a name="using-media-sets-and-families"></a><a name="ConsiderationsForMediaSetFamilies"></a><span data-ttu-id="77ac2-187">Utilisation des jeux de supports et des familles</span><span class="sxs-lookup"><span data-stu-id="77ac2-187">Using Media Sets and Families</span></span>
 <span data-ttu-id="77ac2-188">Cette section aborde plusieurs considérations concernant l'utilisation des jeux de supports et des familles de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-188">This section discusses several considerations for using media sets and media families.</span></span>



###  <a name="creating-a-new-media-set"></a><a name="CreatingMediaSet"></a><span data-ttu-id="77ac2-189">Création d’un nouveau support de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-189">Creating a New Media Set</span></span>
 <span data-ttu-id="77ac2-190">Pour créer un jeu de supports, vous devez formater le support destinataire (une ou plusieurs bandes ou un ou plusieurs fichiers disque).</span><span class="sxs-lookup"><span data-stu-id="77ac2-190">To create a new media set, you must format the backup media (one or more tapes or disk files).</span></span> <span data-ttu-id="77ac2-191">Le processus de formatage modifie le support destinataire de la sauvegarde comme suit :</span><span class="sxs-lookup"><span data-stu-id="77ac2-191">The formatting process changes the backup media as follows:</span></span>

1.  <span data-ttu-id="77ac2-192">Suppression de l'ancien en-tête (s'il en existait un), du contenu antérieur du support destinataire de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-192">Deletes the old header (if any), effectively deleting the previous contents of the backup media.</span></span>

     <span data-ttu-id="77ac2-193">Le formatage d'une unité de bande supprime la totalité du contenu antérieur de la bande actuellement montée.</span><span class="sxs-lookup"><span data-stu-id="77ac2-193">Formatting a tape device deletes all previous contents of the currently mounted tape.</span></span> <span data-ttu-id="77ac2-194">Le formatage d'un disque n'affecte que le fichier spécifié pour l'opération de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-194">Formatting a disk affects only the file that you specify for the backup operation</span></span>

2.  <span data-ttu-id="77ac2-195">Écriture d'un nouvel en-tête de support sur le support de sauvegarde (bande ou fichier disque) de chaque unité de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-195">Writes a new media header on the backup media (tape or disk file) on each of the backup devices.</span></span>


###  <a name="backing-up-to-an-existing-media-set"></a><a name="UseExistingMediaSet"></a><span data-ttu-id="77ac2-196">Sauvegarde sur un jeu de supports existant</span><span class="sxs-lookup"><span data-stu-id="77ac2-196">Backing Up to an Existing Media Set</span></span>
 <span data-ttu-id="77ac2-197">Pour effectuer une sauvegarde sur un jeu de supports existant, vous disposez des deux options suivantes :</span><span class="sxs-lookup"><span data-stu-id="77ac2-197">When you are backing up to an existing media set, you have the following two options:</span></span>

-   <span data-ttu-id="77ac2-198">Ajouter au jeu de sauvegarde existant.</span><span class="sxs-lookup"><span data-stu-id="77ac2-198">Append to the existing backup set.</span></span>

     <span data-ttu-id="77ac2-199">Pour que l'espace disponible soit utilisé au mieux, les nouveaux jeux de sauvegarde sont généralement ajoutés au support de sauvegarde existant.</span><span class="sxs-lookup"><span data-stu-id="77ac2-199">To make the best possible use of the available space, new backup sets typically are appended to existing media set.</span></span> <span data-ttu-id="77ac2-200">L'ajout au jeu de sauvegarde préserve toute sauvegarde antérieure.</span><span class="sxs-lookup"><span data-stu-id="77ac2-200">Appending to the backup preserves any prior backups.</span></span> <span data-ttu-id="77ac2-201">Pour plus d'informations, consultez [Ajout aux jeux de sauvegarde existants](#Appending), plus loin dans cette section.</span><span class="sxs-lookup"><span data-stu-id="77ac2-201">For more information, see [Appending to Existing Backup Sets](#Appending), later in this section.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="77ac2-202">L'ajout, qui est le comportement par défaut de l'instruction BACKUP, peut être explicitement spécifié à l'aide de l'option NOINIT.</span><span class="sxs-lookup"><span data-stu-id="77ac2-202">Appending, which is the default behavior of the BACKUP, can be explicitly specified by using the NOINIT option.</span></span>

-   <span data-ttu-id="77ac2-203">Remplacer tous les jeux de sauvegarde existants par la sauvegarde actuelle, sans toucher à l'en-tête de support actuel.</span><span class="sxs-lookup"><span data-stu-id="77ac2-203">Overwrite all existing backup sets with the current backup, leaving the current media header in place.</span></span>

     [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="77ac2-204">comporte des protections destinées à vous empêcher de remplacer accidentellement un support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-204">backup has safeguards to prevent you from accidentally overwriting media.</span></span> <span data-ttu-id="77ac2-205">Toutefois, la sauvegarde peut remplacer automatiquement les jeux de sauvegarde qui ont atteint une date d'expiration prédéfinie.</span><span class="sxs-lookup"><span data-stu-id="77ac2-205">However, backup can automatically overwrite backup sets that have reached a predefined expiration date.</span></span>

     <span data-ttu-id="77ac2-206">Pour les en-têtes de bande, il peut être judicieux de les laisser en place.</span><span class="sxs-lookup"><span data-stu-id="77ac2-206">For tape headers, leaving the header in place can make sense.</span></span> <span data-ttu-id="77ac2-207">Pour plus d'informations, consultez [Remplacement des jeux de sauvegarde](#Overwriting), plus loin dans cette section.</span><span class="sxs-lookup"><span data-stu-id="77ac2-207">For more information, see [Overwriting Backup Sets](#Overwriting), later in this section.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="77ac2-208">Le remplacement des jeux de sauvegarde existants est spécifié à l'aide de l'option INIT de l'instruction BACKUP.</span><span class="sxs-lookup"><span data-stu-id="77ac2-208">Overwriting existing backup sets is specified by using the INIT option of the BACKUP statement.</span></span>

####  <a name="appending-to-existing-backup-sets"></a><a name="Appending"></a><span data-ttu-id="77ac2-209">Ajout à des jeux de sauvegarde existants</span><span class="sxs-lookup"><span data-stu-id="77ac2-209">Appending to Existing Backup Sets</span></span>
 <span data-ttu-id="77ac2-210">Les sauvegardes effectuées à des moments différents, à partir de bases de données identiques ou différentes, peuvent être stockées sur le même support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-210">Backups performed at different times from the same or different databases can be stored on the same media.</span></span> <span data-ttu-id="77ac2-211">En ajoutant un autre jeu de sauvegarde au support existant, le contenu précédent du support reste intact, et la nouvelle sauvegarde est écrite à la fin de la dernière sauvegarde du support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-211">By appending another backup set to existing media, the previous contents of the media remain intact, and the new backup is written after the end of the last backup on the media.</span></span>

 <span data-ttu-id="77ac2-212">Par défaut, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ajoute toujours les nouvelles sauvegardes en fin de support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-212">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] always appends new backups to media.</span></span> <span data-ttu-id="77ac2-213">L'ajout ne peut avoir lieu qu'à la fin du support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-213">Appending can occur only at the end of the media.</span></span> <span data-ttu-id="77ac2-214">Par exemple, lorsqu'un support contient cinq jeux de sauvegardes, il n'est pas possible d'ignorer les trois premiers jeux de sauvegardes pour écraser le quatrième avec un nouveau jeu de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-214">For example, if a media volume contains five backup sets, it is not possible to skip the first three backup sets to overwrite the fourth backup set with a new backup set.</span></span>

 <span data-ttu-id="77ac2-215">Si vous utilisez BACKUP WITH NOREWIND pour une sauvegarde sur bande, celle-ci sera conservée ouverte à la fin de l’opération.</span><span class="sxs-lookup"><span data-stu-id="77ac2-215">If you use BACKUP WITH NOREWIND for a tape backup, the tape will be left open at the end of the operation.</span></span> <span data-ttu-id="77ac2-216">Cela vous permet d’exécuter d’autres sauvegardes sur la bande sans devoir la rembobiner, puis de repartir en avant pour retrouver le dernier jeu de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-216">This allows you to append further backups to the tape without rewinding the tape and then scanning forward again to find the last backup set.</span></span> <span data-ttu-id="77ac2-217">Vous pouvez trouver la liste des lecteurs de bandes ouverts dans la vue de gestion dynamique **sys.dm_io_backup_tapes** ; pour plus d’informations, consultez [sys.dm_io_backup_tapes &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-io-backup-tapes-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="77ac2-217">You can find the list of open tape drives in the **sys.dm_io_backup_tapes** dynamic management view; for more information, see [sys.dm_io_backup_tapes &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-io-backup-tapes-transact-sql).</span></span>

 <span data-ttu-id="77ac2-218">Les sauvegardes Microsoft Windows et [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] peuvent partager le même support, mais elles ne sont pas interopérables.</span><span class="sxs-lookup"><span data-stu-id="77ac2-218">Microsoft Windows backups and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups can share the same media, but they are not interoperable.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="77ac2-219">ne peut sauvegarder les données Windows.</span><span class="sxs-lookup"><span data-stu-id="77ac2-219">backup cannot back up Windows data.</span></span>

> [!IMPORTANT]
>  [!INCLUDE[ssEnterpriseEd10](../../includes/sskatmai-md.md)]<span data-ttu-id="77ac2-220">ou les versions ultérieures peuvent lire des sauvegardes compressées.</span><span class="sxs-lookup"><span data-stu-id="77ac2-220">or later versions can read compressed backups.</span></span> <span data-ttu-id="77ac2-221">Pour plus d’informations, consultez [Compression de sauvegardes &#40;SQL Server&#41;](backup-compression-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="77ac2-221">For more information, see [Backup Compression &#40;SQL Server&#41;](backup-compression-sql-server.md).</span></span>


####  <a name="overwriting-backup-sets"></a><a name="Overwriting"></a><span data-ttu-id="77ac2-222">Remplacement des jeux de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-222">Overwriting Backup Sets</span></span>
 <span data-ttu-id="77ac2-223">Le remplacement des jeux de sauvegarde existants est spécifié à l'aide de l'option INIT de l'instruction BACKUP.</span><span class="sxs-lookup"><span data-stu-id="77ac2-223">Overwriting of existing backup sets is specified by using the INIT option of the BACKUP statement.</span></span> <span data-ttu-id="77ac2-224">Cette option remplace tous les jeux de sauvegarde sur le support et conserve l'en-tête de support, s'il existe.</span><span class="sxs-lookup"><span data-stu-id="77ac2-224">This option overwrites all the backup sets on the media and preserve the media header, if any.</span></span> <span data-ttu-id="77ac2-225">S'il n'existe aucun en-tête de support, elle en crée un.</span><span class="sxs-lookup"><span data-stu-id="77ac2-225">If no media header exists, one is created.</span></span>

 <span data-ttu-id="77ac2-226">Pour les en-têtes de bande, il peut être judicieux de les laisser en place.</span><span class="sxs-lookup"><span data-stu-id="77ac2-226">For tape headers, leaving the header in place can make sense.</span></span> <span data-ttu-id="77ac2-227">Pour les supports de sauvegarde sur disque, seuls les fichiers utilisés par les unités de sauvegarde spécifiées dans l'opération de sauvegarde sont remplacés. Les autres fichiers du disque ne sont pas concernés.</span><span class="sxs-lookup"><span data-stu-id="77ac2-227">For disk backup media, only the files used by the backup devices specified in the backup operation are overwritten; other files on the disk are unaffected.</span></span> <span data-ttu-id="77ac2-228">Lors du remplacement des sauvegardes, l'en-tête de support existant est conservé et la nouvelle sauvegarde est créée comme étant la première sauvegarde sur l'unité de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-228">When overwriting backups, any existing media header is preserved, and the new backup is created as the first backup on the backup device.</span></span> <span data-ttu-id="77ac2-229">S'il n'existe pas d'en-tête, un en-tête de support valide avec un nom et une description de support est automatiquement écrit.</span><span class="sxs-lookup"><span data-stu-id="77ac2-229">If there is no existing media header, a valid media header with an associated media name and media description is written automatically.</span></span> <span data-ttu-id="77ac2-230">Si l'en-tête de support existant n'est pas valide, l'opération de sauvegarde s'arrête.</span><span class="sxs-lookup"><span data-stu-id="77ac2-230">If the existing media header is invalid, the backup operation terminates.</span></span> <span data-ttu-id="77ac2-231">Si le support est vide, le nouvel en-tête de support est généré avec les options éventuelles MEDIANAME, MEDIAPASSWORD et MEDIADESCRIPTION.</span><span class="sxs-lookup"><span data-stu-id="77ac2-231">If the media is empty, the new media header is generated with the given MEDIANAME, MEDIAPASSWORD, and MEDIADESCRIPTION, if any.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="77ac2-232">À compter de [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], l'option MEDIAPASSWORD est suspendue pour la création de sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="77ac2-232">Beginning with [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], the MEDIAPASSWORD option is discontinued for creating backups.</span></span> <span data-ttu-id="77ac2-233">Toutefois, vous pouvez toujours restaurer les sauvegardes créées avec les mots de passe.</span><span class="sxs-lookup"><span data-stu-id="77ac2-233">However, you can still restore backups created with passwords.</span></span>

 <span data-ttu-id="77ac2-234">Un support de sauvegarde n'est pas remplacé lorsque l'une des conditions ci-dessous est remplie :</span><span class="sxs-lookup"><span data-stu-id="77ac2-234">Backup media is not overwritten if either of the following conditions exists:</span></span>

-   <span data-ttu-id="77ac2-235">Toutes les sauvegardes présentes sur le support ne sont pas encore arrivées à expiration.</span><span class="sxs-lookup"><span data-stu-id="77ac2-235">The existing backups on the media have not expired.</span></span> <span data-ttu-id="77ac2-236">(Si l'option SKIP est spécifiée, l'expiration n'est pas vérifiée.)</span><span class="sxs-lookup"><span data-stu-id="77ac2-236">(If SKIP is specified, expiration is not checked.)</span></span>

     <span data-ttu-id="77ac2-237">La date d'expiration précise que la sauvegarde expire et qu'elle peut être remplacée par une autre sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-237">The expiration date specifies the date that the backup expires and can be overwritten by another backup.</span></span> <span data-ttu-id="77ac2-238">Vous pouvez préciser la date d'expiration lors de la création d'une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-238">You can specify the expiration date when a backup is created.</span></span> <span data-ttu-id="77ac2-239">Par défaut, la date d’expiration est déterminée par la définition de l’option **media retention** avec **sp_configure**.</span><span class="sxs-lookup"><span data-stu-id="77ac2-239">By default, the expiration date is determined by the **media retention** option set with **sp_configure**.</span></span> <span data-ttu-id="77ac2-240">Pour plus d'informations, consultez [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="77ac2-240">For more information, see [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql).</span></span>

-   <span data-ttu-id="77ac2-241">Le nom du support, fourni le cas échéant, ne correspond pas au nom du support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-241">The media name, if provided, does not match the name on the backup media.</span></span>

     <span data-ttu-id="77ac2-242">Le nom du support est un nom descriptif utilisé pour identifier facilement le support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-242">The media name is a descriptive name used for easy identification of the media.</span></span>

 <span data-ttu-id="77ac2-243">Cependant, vous pouvez ignorer ces contrôles de façon explicite si vous êtes sûr de vouloir remplacer le support existant, par exemple si vous savez que les sauvegardes sur bande ne vous sont plus utiles.</span><span class="sxs-lookup"><span data-stu-id="77ac2-243">If you are sure you want to overwrite the existing media (for example, if you know that the backups on the tape are no longer needed), you can explicitly skip these checks.</span></span>

 <span data-ttu-id="77ac2-244">Si le support de sauvegarde est protégé par mot de passe Microsoft Windows, Microsoft SQL Server n'écrit pas dessus.</span><span class="sxs-lookup"><span data-stu-id="77ac2-244">If the backup media is password protected by Microsoft Windows, Microsoft SQL Server does not write to the media.</span></span> <span data-ttu-id="77ac2-245">Pour remplacer un support protégé par mot de passe, vous devez le réinitialiser.</span><span class="sxs-lookup"><span data-stu-id="77ac2-245">To overwrite media that is password protected, you must reinitialize the media.</span></span>


###  <a name="sequence-numbers"></a><a name="SequenceNumbers"></a><span data-ttu-id="77ac2-246">Numéros de séquence</span><span class="sxs-lookup"><span data-stu-id="77ac2-246">Sequence Numbers</span></span>
 <span data-ttu-id="77ac2-247">L'ordre est important pour l'utilisation de plusieurs familles de supports dans un jeu de supports ou de plusieurs supports de sauvegarde dans une même famille.</span><span class="sxs-lookup"><span data-stu-id="77ac2-247">The correct order is important for multiple media families within a media set or multiple backup media within a media family.</span></span> <span data-ttu-id="77ac2-248">Par conséquent, la sauvegarde attribue des numéros de séquence comme suit :</span><span class="sxs-lookup"><span data-stu-id="77ac2-248">Therefore, backup assigns sequence numbers in the following ways:</span></span>

-   <span data-ttu-id="77ac2-249">Familles de supports séquentielles dans un support de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="77ac2-249">Sequential media families within a media set</span></span>

     <span data-ttu-id="77ac2-250">Dans un support de sauvegarde, les familles sont numérotées séquentiellement en fonction de leur position dans le support.</span><span class="sxs-lookup"><span data-stu-id="77ac2-250">Within a media set, the media families are numbered sequentially according to their position in the media set.</span></span> <span data-ttu-id="77ac2-251">Le numéro de la famille de supports est enregistré dans la colonne **family_sequence_number** de la table **backupmediafamily** .</span><span class="sxs-lookup"><span data-stu-id="77ac2-251">The media-family number is recorded in the **family_sequence_number** column of the **backupmediafamily** table.</span></span>

-   <span data-ttu-id="77ac2-252">Supports physiques dans une famille de supports</span><span class="sxs-lookup"><span data-stu-id="77ac2-252">Physical media within a media family</span></span>

     <span data-ttu-id="77ac2-253">Un numéro de séquence de support indique l'ordre du support physique dans une famille de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-253">A media sequence number indicates the order of the physical media within a media family.</span></span> <span data-ttu-id="77ac2-254">Le premier numéro est 1 pour le premier support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-254">The sequence number is 1 for the initial backup media.</span></span> <span data-ttu-id="77ac2-255">Ce support de sauvegarde est référencé par le chiffre 1, le deuxième support (première bande de sauvegarde consécutive) par le chiffre 2 et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="77ac2-255">This is tagged with 1; the second (the first continuation tape) is tagged with 2; and so on.</span></span> <span data-ttu-id="77ac2-256">Lorsque la sauvegarde est restaurée, les numéros de séquence des supports garantissent que l'opérateur qui effectue la restauration de la sauvegarde monte le support approprié dans l'ordre approprié.</span><span class="sxs-lookup"><span data-stu-id="77ac2-256">When the backup set is restored, the media sequence numbers make sure that the operator restoring the backup mounts the correct media in the correct order.</span></span>

###  <a name="multiple-devices"></a><a name="MultipleDevices"></a> <span data-ttu-id="77ac2-257">Plusieurs unités</span><span class="sxs-lookup"><span data-stu-id="77ac2-257">Multiple Devices</span></span>
 <span data-ttu-id="77ac2-258">Lorsque vous utilisez plusieurs lecteurs de bandes ou fichiers disque, vous devez tenir compte des considérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="77ac2-258">When you use multiple tape drives or disk files, the following considerations apply:</span></span>

-   <span data-ttu-id="77ac2-259">Pour la sauvegarde :</span><span class="sxs-lookup"><span data-stu-id="77ac2-259">For backup:</span></span>

     <span data-ttu-id="77ac2-260">Le support de sauvegarde complet, créé par une opération de sauvegarde, doit être utilisé par toutes les opérations de sauvegarde suivantes.</span><span class="sxs-lookup"><span data-stu-id="77ac2-260">The complete media set that is created by a backup operation must be used by all subsequent backup operations.</span></span> <span data-ttu-id="77ac2-261">Par exemple, lorsqu'un support de sauvegarde est créé à l'aide de deux unités de sauvegarde sur bande, toutes les opérations de sauvegarde suivantes, impliquant le même support de sauvegarde, devront utiliser deux unités de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-261">For example, if a media set was created by using two tape backup devices, all subsequent backup operations that involve the same media set must use two backup devices.</span></span>

-   <span data-ttu-id="77ac2-262">Pour la restauration :</span><span class="sxs-lookup"><span data-stu-id="77ac2-262">For restore:</span></span>

     <span data-ttu-id="77ac2-263">Pour une restauration à partir d'une sauvegarde de disque et pour une restauration en ligne, vous devez monter simultanément toutes les familles de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-263">For any restore from disk backups and for any online restore, all the all media families must be concurrently mounted.</span></span> <span data-ttu-id="77ac2-264">Pour une restauration hors connexion à partir d'une sauvegarde sur bande, vous pouvez traiter les familles de supports avec moins d'unités de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="77ac2-264">For an offline restore from tape backups, you can process the media families from fewer backup devices.</span></span> <span data-ttu-id="77ac2-265">Chaque famille de supports doit être complètement traitée avant de démarrer le traitement d'une autre famille de supports.</span><span class="sxs-lookup"><span data-stu-id="77ac2-265">Each media family must be processed completely before starting to process another media family.</span></span> <span data-ttu-id="77ac2-266">Les familles de supports sont toujours traitées en parallèle, sauf si la restauration a lieu sur une seule unité.</span><span class="sxs-lookup"><span data-stu-id="77ac2-266">Media families are always processed in parallel, unless they are being restored with a single device.</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="77ac2-267">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="77ac2-267">Related Tasks</span></span>
 <span data-ttu-id="77ac2-268">**Pour créer un jeu de supports**</span><span class="sxs-lookup"><span data-stu-id="77ac2-268">**To create a new media set**</span></span>

-   <span data-ttu-id="77ac2-269">[Créer une sauvegarde complète de base de données &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (option **Sauvegarder sur un nouveau support de sauvegarde et effacer tous les jeux de sauvegarde existants**)</span><span class="sxs-lookup"><span data-stu-id="77ac2-269">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Back up to a new media set, and erase all existing backup sets** option)</span></span>

-   <span data-ttu-id="77ac2-270">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (option FORMAT)</span><span class="sxs-lookup"><span data-stu-id="77ac2-270">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (FORMAT option)</span></span>

-   <xref:Microsoft.SqlServer.Management.Smo.Backup.FormatMedia%2A>

 <span data-ttu-id="77ac2-271">**Pour ajouter une nouvelle sauvegarde à un support existant**</span><span class="sxs-lookup"><span data-stu-id="77ac2-271">**To append a new backup to existing media**</span></span>

-   <span data-ttu-id="77ac2-272">[Créer une sauvegarde complète de base de données &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (option **Ajouter au jeu de sauvegarde existant**)</span><span class="sxs-lookup"><span data-stu-id="77ac2-272">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Append to the existing backup set** option)</span></span>

-   <span data-ttu-id="77ac2-273">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (option NOINIT)</span><span class="sxs-lookup"><span data-stu-id="77ac2-273">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (NOINIT option)</span></span>

 <span data-ttu-id="77ac2-274">**Pour remplacer des jeux de sauvegarde existants**</span><span class="sxs-lookup"><span data-stu-id="77ac2-274">**To overwrite existing backup sets**</span></span>

-   <span data-ttu-id="77ac2-275">[Créer une sauvegarde complète de base de données &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (option **Remplacer tous les jeux de sauvegarde existants**)</span><span class="sxs-lookup"><span data-stu-id="77ac2-275">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) (**Overwrite all existing backup sets** option)</span></span>

-   <span data-ttu-id="77ac2-276">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (option INIT)</span><span class="sxs-lookup"><span data-stu-id="77ac2-276">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) (INIT option)</span></span>

 <span data-ttu-id="77ac2-277">**Pour définir la date d'expiration**</span><span class="sxs-lookup"><span data-stu-id="77ac2-277">**To set the expiration date**</span></span>

-   [<span data-ttu-id="77ac2-278">Définir la date d’expiration d’une sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="77ac2-278">Set the Expiration Date on a Backup &#40;SQL Server&#41;</span></span>](set-the-expiration-date-on-a-backup-sql-server.md)

 <span data-ttu-id="77ac2-279">**Pour afficher la séquence des supports et les numéros de séquence des familles**</span><span class="sxs-lookup"><span data-stu-id="77ac2-279">**To view the media sequence and family sequence numbers**</span></span>

-   [<span data-ttu-id="77ac2-280">Afficher les propriétés et le contenu d’une unité de sauvegarde logique &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="77ac2-280">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)

-   <span data-ttu-id="77ac2-281">[backupmediafamily &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/backupmediafamily-transact-sql) (colonne **family_sequence_number**)</span><span class="sxs-lookup"><span data-stu-id="77ac2-281">[backupmediafamily &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/backupmediafamily-transact-sql) (**family_sequence_number** column)</span></span>

 <span data-ttu-id="77ac2-282">**Pour afficher les jeux de sauvegarde sur une unité de sauvegarde spécifique**</span><span class="sxs-lookup"><span data-stu-id="77ac2-282">**To view the backup sets on a particular backup device**</span></span>

-   [<span data-ttu-id="77ac2-283">Afficher les fichiers de données et les fichiers journaux dans un jeu de sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="77ac2-283">View the Data and Log Files in a Backup Set &#40;SQL Server&#41;</span></span>](view-the-data-and-log-files-in-a-backup-set-sql-server.md)

-   [<span data-ttu-id="77ac2-284">Afficher les propriétés et le contenu d’une unité de sauvegarde logique &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="77ac2-284">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)

-   [<span data-ttu-id="77ac2-285">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="77ac2-285">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)

 <span data-ttu-id="77ac2-286">**Pour lire l'en-tête du support sur une unité de sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="77ac2-286">**To read the media header of the media on a backup device**</span></span>

-   [<span data-ttu-id="77ac2-287">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="77ac2-287">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)


## <a name="see-also"></a><span data-ttu-id="77ac2-288">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="77ac2-288">See Also</span></span>
 <span data-ttu-id="77ac2-289">[Sauvegarder et restaurer des bases de données SQL Server des](back-up-and-restore-of-sql-server-databases.md) [Erreurs de support possibles lors de la sauvegarde et de la restauration &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) [l’historique des sauvegardes et les informations d’en-tête &#40;](backup-history-and-header-information-sql-server.md) SQL Server&#41;les jeux [de](/sql/t-sql/statements/restore-statements-rewindonly-transact-sql) [supports de sauvegarde en miroir &#40;](mirrored-backup-media-sets-sql-server.md) [SQL Server&#41;Transact](/sql/t-sql/statements/backup-transact-sql) -SQL &#40;&#41;[&#40;Transact-](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) [SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="77ac2-289">[Back Up and Restore of SQL Server Databases](back-up-and-restore-of-sql-server-databases.md) [Possible Media Errors During Backup and Restore &#40;SQL Server&#41;](possible-media-errors-during-backup-and-restore-sql-server.md) [Backup History and Header Information &#40;SQL Server&#41;](backup-history-and-header-information-sql-server.md) [Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) [BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) [RESTORE REWINDONLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-rewindonly-transact-sql) [sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)</span></span>


