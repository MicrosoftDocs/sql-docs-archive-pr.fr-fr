---
title: Sauvegardes différentielles (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- differential backups
- differential backups, about
ms.assetid: 123bb7af-1367-4bde-bfcb-76d36799b905
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 5c057e0d41cb46adef0ec1e01c3406190db900e4
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87613478"
---
# <a name="differential-backups-sql-server"></a><span data-ttu-id="21958-102">Sauvegardes différentielles (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="21958-102">Differential Backups (SQL Server)</span></span>
  <span data-ttu-id="21958-103">Cette rubrique relative à la sauvegarde et à la restauration concerne toutes les bases de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="21958-103">This backup and restore topic is relevant for all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases.</span></span>  
  
 <span data-ttu-id="21958-104">une sauvegarde différentielle est basée sur la sauvegarde de données complète précédente la plus récente.</span><span class="sxs-lookup"><span data-stu-id="21958-104">A differential backup is based on the most recent, previous full data backup.</span></span> <span data-ttu-id="21958-105">Une sauvegarde différentielle enregistre uniquement les modifications effectuées depuis la toute dernière sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="21958-105">A differential backup captures only the data that has changed since that full backup.</span></span> <span data-ttu-id="21958-106">La sauvegarde complète sur laquelle une sauvegarde différentielle est basée s'appelle la *base* de la différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-106">The full backup upon which a differential backup is based is known as the *base* of the differential.</span></span> <span data-ttu-id="21958-107">Les sauvegardes complètes, à l'exception des sauvegardes de copie uniquement, peuvent servir de base à une série de sauvegardes différentielles, y compris les sauvegardes de base de données, partielles et de fichiers.</span><span class="sxs-lookup"><span data-stu-id="21958-107">Full backups, except for copy-only backups, can serve as the base for a series of differential backups, including database backups, partial backups, and file backups.</span></span> <span data-ttu-id="21958-108">La sauvegarde de base d'une sauvegarde différentielle de fichiers peut faire partie d'une sauvegarde complète, d'une sauvegarde de fichiers ou d'une sauvegarde partielle.</span><span class="sxs-lookup"><span data-stu-id="21958-108">The base backup for a file differential backup can be contained within a full backup, a file backup, or a partial backup.</span></span>  
  
  
##  <a name="benefits"></a><a name="Benefits"></a> <span data-ttu-id="21958-109">Avantages</span><span class="sxs-lookup"><span data-stu-id="21958-109">Benefits</span></span>  
  
-   <span data-ttu-id="21958-110">La création d'une sauvegarde différentielle peut être très rapide par rapport à la création d'une sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="21958-110">Creating a differential backups can be very fast compared to creating a full backup.</span></span> <span data-ttu-id="21958-111">Une sauvegarde différentielle enregistre uniquement les modifications effectuées depuis la toute dernière sauvegarde complète sur laquelle la sauvegarde différentielle est basée.</span><span class="sxs-lookup"><span data-stu-id="21958-111">A differential backup records only the data that has changed since the full backup upon the differential backup is based.</span></span> <span data-ttu-id="21958-112">Cela facilite la réalisation de sauvegardes des données fréquentes et réduit ainsi le risque de perte de données.</span><span class="sxs-lookup"><span data-stu-id="21958-112">This facilitates taking frequent data backups, which decrease the risk of data loss.</span></span> <span data-ttu-id="21958-113">Toutefois, avant de restaurer une sauvegarde différentielle, vous devez restaurer la base associée.</span><span class="sxs-lookup"><span data-stu-id="21958-113">However, before you restore a differential backup, you must restore its base.</span></span> <span data-ttu-id="21958-114">Par conséquent, la restauration à partir d'une sauvegarde différentielle nécessitera plus de mesures et de temps que la restauration à partir d'une sauvegarde complète, car deux fichiers de sauvegarde sont requis.</span><span class="sxs-lookup"><span data-stu-id="21958-114">Therefore restoring from a differential backup will necessarily take more steps and time than restoring from a full backup because two backup files are required.</span></span>  
  
-   <span data-ttu-id="21958-115">Les sauvegardes différentielles sont particulièrement utiles dans les cas où un sous-ensemble de base de données est modifié plus fréquemment que le reste de la base de données.</span><span class="sxs-lookup"><span data-stu-id="21958-115">Differential database backups are especially useful if a subset of a database is modified more frequently than the rest of the database.</span></span> <span data-ttu-id="21958-116">En pareil cas, les sauvegardes différentielles vous permettent d'effectuer des sauvegardes régulières sans les contraintes liées aux sauvegardes complètes.</span><span class="sxs-lookup"><span data-stu-id="21958-116">In these cases, differential database backups enable you back up frequently without the overhead of full database backups.</span></span>  
  
-   <span data-ttu-id="21958-117">En mode de récupération complète, l'utilisation des sauvegardes différentielles peut réduire le nombre de sauvegardes de journaux à restaurer.</span><span class="sxs-lookup"><span data-stu-id="21958-117">Under the full recovery model, using differential backups can reduce the number of log backups that you have to restore.</span></span>  
  
##  <a name="overview-of-differential-backups"></a><a name="Overview"></a> <span data-ttu-id="21958-118">Vue d'ensemble des sauvegardes différentielles</span><span class="sxs-lookup"><span data-stu-id="21958-118">Overview of Differential Backups</span></span>  
 <span data-ttu-id="21958-119">Une sauvegarde différentielle capture l’état de toutes les *extensions* (collections de huit pages physiquement contiguës) qui ont changé entre la création de la base différentielle et celle de la sauvegarde différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-119">A differential backup captures the state of any *extents* (collections of eight physically contiguous pages) that have changed between when the differential base was created and the when differential backup is created.</span></span> <span data-ttu-id="21958-120">Cela signifie que la taille d'une sauvegarde différentielle donnée dépend de la quantité de données qui a changé depuis la base.</span><span class="sxs-lookup"><span data-stu-id="21958-120">This means that the size of a given differential backup depends on the amount of data that has changed since the base.</span></span> <span data-ttu-id="21958-121">De manière générale, plus une base est ancienne, plus une nouvelle sauvegarde différentielle est volumineuse.</span><span class="sxs-lookup"><span data-stu-id="21958-121">Generally, the older a base is, the larger a new differential backup will be.</span></span> <span data-ttu-id="21958-122">Dans une série de sauvegardes différentielles, une extension fréquemment mise à jour contiendra probablement des données différentes dans chaque sauvegarde différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-122">In a series of differential backups, a frequently updated extent is likely to contain different data in each differential backup.</span></span>  
  
 <span data-ttu-id="21958-123">La figure ci-dessous illustre le fonctionnement d'une sauvegarde différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-123">The following illustration shows how a differential backup works.</span></span> <span data-ttu-id="21958-124">La figure montre 24 extensions de données, dont six ont changé.</span><span class="sxs-lookup"><span data-stu-id="21958-124">The figure shows 24 data extents, 6 of which have changed.</span></span> <span data-ttu-id="21958-125">La sauvegarde différentielle contient seulement ces six extensions de données.</span><span class="sxs-lookup"><span data-stu-id="21958-125">The differential backup contains only these 6 data extents.</span></span> <span data-ttu-id="21958-126">L'opération de sauvegarde différentielle s'appuie sur une page bitmap qui contient un bit pour chaque extension.</span><span class="sxs-lookup"><span data-stu-id="21958-126">The differential backup operation relies on a bitmap page that contains a bit for every extent.</span></span> <span data-ttu-id="21958-127">Pour chaque extension mise à jour depuis la base, le bit a la valeur 1 dans le bitmap.</span><span class="sxs-lookup"><span data-stu-id="21958-127">For each extent updated since the base, the bit is set to 1 in the bitmap.</span></span>  
  
 <span data-ttu-id="21958-128">![La bitmap différentielle identifie les étendues modifiées](../../database-engine/media/bnr-how-diff-backups-work.gif "La bitmap différentielle identifie les étendues modifiées")</span><span class="sxs-lookup"><span data-stu-id="21958-128">![Differential bitmap identifies changed extents](../../database-engine/media/bnr-how-diff-backups-work.gif "Differential bitmap identifies changed extents")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="21958-129">Une sauvegarde de copie seule ne met pas à jour la bitmap différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-129">The differential bitmap is not updated by a copy-only backup.</span></span> <span data-ttu-id="21958-130">Par conséquent, une sauvegarde de copie seule n'affecte pas les sauvegardes différentielles ultérieures.</span><span class="sxs-lookup"><span data-stu-id="21958-130">Therefore, a copy-only backup does not affect subsequent differential backups.</span></span>  
  
 <span data-ttu-id="21958-131">Une sauvegarde différentielle effectuée peu de temps après sa base est généralement beaucoup plus petite que la base différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-131">A differential backup that is taken fairly soon after its base is usually significantly smaller than the differential base.</span></span> <span data-ttu-id="21958-132">Vous gagnez ainsi du temps de sauvegarde et de l'espace de stockage.</span><span class="sxs-lookup"><span data-stu-id="21958-132">This saves storage space and backup time.</span></span> <span data-ttu-id="21958-133">En revanche, au gré des modifications apportées à la base de données, la différence entre cette dernière et une base différentielle spécifique augmente avec le temps.</span><span class="sxs-lookup"><span data-stu-id="21958-133">However, as a database changes over time, the difference between the database and a specific differential base increases.</span></span> <span data-ttu-id="21958-134">Plus le temps écoulé entre une sauvegarde différentielle et sa base augmente, plus la taille de la sauvegarde différentielle peut être importante.</span><span class="sxs-lookup"><span data-stu-id="21958-134">The longer the time between a differential backup and its base, the larger the differential backup is likely to be.</span></span> <span data-ttu-id="21958-135">Au bout du compte, cela signifie que la taille des sauvegardes différentielles peut atteindre celle de la base différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-135">This means that the differential backups can eventually approach the differential base in size.</span></span> <span data-ttu-id="21958-136">Une sauvegarde différentielle considérable perd les avantages d'une sauvegarde plus rapide et plus réduite.</span><span class="sxs-lookup"><span data-stu-id="21958-136">A large differential backup loses the advantages of a faster and smaller backup.</span></span>  
  
 <span data-ttu-id="21958-137">À mesure que la taille des sauvegardes différentielles augmente, la restauration d'une sauvegarde différentielle peut accroître considérablement le temps nécessaire à la restauration d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="21958-137">As the differential backups increase in size, restoring a differential backup can significantly increase the time that is required to restore a database.</span></span> <span data-ttu-id="21958-138">Nous vous recommandons donc d'effectuer une nouvelle sauvegarde complète selon une périodicité fixe pour établir une nouvelle base différentielle des données.</span><span class="sxs-lookup"><span data-stu-id="21958-138">Therefore, we recommend that you take a new full backup at set intervals to establish a new differential base for the data.</span></span> <span data-ttu-id="21958-139">Par exemple, vous pouvez effectuer une sauvegarde complète hebdomadaire de la base de données dans son entier (soit une sauvegarde complète de la base de données), puis des séries régulières de sauvegardes de bases de données différentielles au cours de la semaine.</span><span class="sxs-lookup"><span data-stu-id="21958-139">For example, you might take a weekly full backup of the whole database (that is, a full database backup) followed by a regular series of differential database backups during the week.</span></span>  
  
 <span data-ttu-id="21958-140">Au moment de la restauration, pour pouvoir restaurer une sauvegarde différentielle, vous devez restaurer sa base.</span><span class="sxs-lookup"><span data-stu-id="21958-140">At restore time, before you restore a differential backup, you must restore its base.</span></span> <span data-ttu-id="21958-141">Ensuite, pour amener la base de données jusqu'au stade de la création de la sauvegarde différentielle, il vous suffit de restaurer la sauvegarde différentielle la plus récente.</span><span class="sxs-lookup"><span data-stu-id="21958-141">Then, restore only the most recent differential backup to bring the database forward to the time when that differential backup was created.</span></span> <span data-ttu-id="21958-142">En règle générale, vous restaurez la sauvegarde complète la plus récente suivie de la sauvegarde différentielle la plus récente qui est basée sur cette sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="21958-142">Typically, you would restore the most recent full backup followed by the most recent differential backup that is based on that full backup.</span></span>  
  
## <a name="differential-backups-of-databases-with-memory-optimized-tables"></a><span data-ttu-id="21958-143">Sauvegardes différentielles de bases de données avec des tables mémoire optimisées</span><span class="sxs-lookup"><span data-stu-id="21958-143">Differential Backups of Databases with Memory-Optimized Tables</span></span>  
 <span data-ttu-id="21958-144">Pour plus d’informations sur les sauvegardes différentielles et les bases de données avec les tables optimisées en mémoire, consultez [Sauvegarde d’une base de données avec des tables optimisées en mémoire](../in-memory-oltp/memory-optimized-tables.md).</span><span class="sxs-lookup"><span data-stu-id="21958-144">For information about differential backups and databases with memory-optimized tables, see [Backing Up a Database with Memory-Optimized Tables](../in-memory-oltp/memory-optimized-tables.md).</span></span>  
  
##  <a name="differential-backups-of-read-only-databases"></a><a name="ReadOnlyDbs"></a> <span data-ttu-id="21958-145">Sauvegardes différentielles des bases de données en lecture seule</span><span class="sxs-lookup"><span data-stu-id="21958-145">Differential Backups of Read-Only Databases</span></span>  
 <span data-ttu-id="21958-146">Pour les bases de données en lecture seule, les sauvegardes complètes utilisées seules sont plus aisées à gérer que lorsqu'elles sont utilisées avec des sauvegardes différentielles.</span><span class="sxs-lookup"><span data-stu-id="21958-146">For read-only databases, full backups used alone are easier to manage than when they are used with differential backups.</span></span> <span data-ttu-id="21958-147">Lorsqu'une base de données est en lecture seule, les opérations de sauvegarde et les autres opérations ne peuvent pas modifier les métadonnées contenues dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="21958-147">When a database is read-only, backup and other operations cannot change the metadata that is contained in the file.</span></span> <span data-ttu-id="21958-148">Ainsi, les métadonnées nécessaires à une sauvegarde différentielle, telles que le numéro séquentiel dans le journal de début de la sauvegarde différentielle (LSN de base différentiel), sont stockées dans la base de données **master** .</span><span class="sxs-lookup"><span data-stu-id="21958-148">Therefore, metadata that is required by a differential backup, such as the log sequence number at which the differential backup begins (the differential base LSN) is stored in the **master** database.</span></span> <span data-ttu-id="21958-149">Si la base différentielle s'effectue lorsque la base de données est en lecture seule, la bitmap différentielle indique un nombre de modifications qui est supérieur au nombre réel depuis la sauvegarde de base.</span><span class="sxs-lookup"><span data-stu-id="21958-149">If the differential base is taken when the database is read-only, the differential bitmap indicates more changes than have actually occurred since the base backup.</span></span> <span data-ttu-id="21958-150">Les données supplémentaires sont lues par la sauvegarde mais ne sont pas écrites dans celle-ci, car **differential_base_lsn** stocké dans la table système [backupset](/sql/relational-databases/system-tables/backupset-transact-sql) sert à déterminer si les données ont changé depuis la base.</span><span class="sxs-lookup"><span data-stu-id="21958-150">The extra data is read by backup, but is not written to the backup, because the **differential_base_lsn** stored in the [backupset](/sql/relational-databases/system-tables/backupset-transact-sql) system table is used to determine whether the data has actually changed since the base.</span></span>  
  
 <span data-ttu-id="21958-151">Lorsqu'une base de données en lecture seule est reconstruite, restaurée ou détachée et rattachée, les informations de base différentielle sont perdues.</span><span class="sxs-lookup"><span data-stu-id="21958-151">When a read-only database is rebuilt, restored, or detached and attached, the differential-base information is lost.</span></span> <span data-ttu-id="21958-152">Cela tient au fait que la base de données **master** n'est pas synchronisée avec la base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="21958-152">This occurs because the **master** database is not synchronized with the user database.</span></span> <span data-ttu-id="21958-153">Le [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] ne peut pas détecter, ni éviter ce problème.</span><span class="sxs-lookup"><span data-stu-id="21958-153">The [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] cannot detect or prevent this problem.</span></span> <span data-ttu-id="21958-154">Les sauvegardes différentielles suivantes ne reposent pas sur la dernière sauvegarde complète et peuvent fournir des résultats inattendus.</span><span class="sxs-lookup"><span data-stu-id="21958-154">Any later differential backups are not based on the most recent full backup and could provide unexpected results.</span></span> <span data-ttu-id="21958-155">Pour créer une base différentielle, nous vous recommandons de créer une sauvegarde complète de la base de données.</span><span class="sxs-lookup"><span data-stu-id="21958-155">To establish a new differential base, we recommend that you create a full database backup.</span></span>  
  
### <a name="best-practices-for-using-differential-backups-with-a-read-only-database"></a><span data-ttu-id="21958-156">Méthodes recommandées pour l'utilisation des sauvegardes différentielles avec une base de données en lecture seule</span><span class="sxs-lookup"><span data-stu-id="21958-156">Best Practices for Using Differential Backups with a Read-Only Database</span></span>  
 <span data-ttu-id="21958-157">Après avoir créé une sauvegarde complète d’une base de données en lecture seule, sauvegardez la base de données **master** si vous voulez créer ensuite une sauvegarde différentielle.</span><span class="sxs-lookup"><span data-stu-id="21958-157">After you create a full database backup of a read-only database, if you intend to create a subsequent differential backup, back up the **master** database.</span></span>  
  
 <span data-ttu-id="21958-158">Si vous perdez la base de données **master** , restaurez-la avant de restaurer une sauvegarde différentielle d'une base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="21958-158">If the **master** database is lost, restore it before you restore any differential backup of a user database.</span></span>  
  
 <span data-ttu-id="21958-159">Si vous détachez et attachez une base de données en lecture seule pour laquelle vous envisagez ensuite d’utiliser des sauvegardes différentielles, créez dès que possible une sauvegarde complète de la base de données en lecture seule et de la base de données **master** .</span><span class="sxs-lookup"><span data-stu-id="21958-159">If you detach and attach a read-only database for which you plan to later use differential backups, as soon as it is practical, take a full database backup of both the read-only database and of the **master** database.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="21958-160">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="21958-160">Related Tasks</span></span>  
  
-   [<span data-ttu-id="21958-161">Créer une sauvegarde différentielle de base de données &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="21958-161">Create a Differential Database Backup &#40;SQL Server&#41;</span></span>](create-a-differential-database-backup-sql-server.md)  
  
-   [<span data-ttu-id="21958-162">Restaurer une sauvegarde différentielle de base de données &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="21958-162">Restore a Differential Database Backup &#40;SQL Server&#41;</span></span>](restore-a-differential-database-backup-sql-server.md)  
  
  
## <a name="see-also"></a><span data-ttu-id="21958-163"> Voir aussi</span><span class="sxs-lookup"><span data-stu-id="21958-163">See Also</span></span>  
 <span data-ttu-id="21958-164">[Vue d’ensemble de la sauvegarde &#40;SQL Server&#41;](backup-overview-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="21958-164">[Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md) </span></span>  
 <span data-ttu-id="21958-165">[Sauvegardes complètes de bases de données &#40;SQL Server&#41;](full-database-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="21958-165">[Full Database Backups &#40;SQL Server&#41;](full-database-backups-sql-server.md) </span></span>  
 <span data-ttu-id="21958-166">[Restaurations complètes de bases de données &#40;mode de récupération complète&#41;](complete-database-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="21958-166">[Complete Database Restores &#40;Full Recovery Model&#41;](complete-database-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="21958-167">[Restaurations complètes de bases de données &#40;mode de récupération simple&#41;](complete-database-restores-simple-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="21958-167">[Complete Database Restores &#40;Simple Recovery Model&#41;](complete-database-restores-simple-recovery-model.md) </span></span>  
 [<span data-ttu-id="21958-168">Sauvegardes des journaux de transactions &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="21958-168">Transaction Log Backups &#40;SQL Server&#41;</span></span>](transaction-log-backups-sql-server.md)  
  
  
