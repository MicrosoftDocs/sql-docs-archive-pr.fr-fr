---
title: Historique de sauvegarde et informations d’en-tête (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- backup headers [SQL Server]
- history tables [SQL Server]
- file restores [SQL Server], status information
- backup sets [SQL Server], status information
- listing backed up databases
- status information [SQL Server], backups
- backing up [SQL Server], viewing backup sets
- restoring [SQL Server], history tables
- restoring databases [SQL Server], status information
- backups [SQL Server], status information
- headers [SQL Server]
- media headers [SQL Server]
- backup history tables [SQL Server]
- viewing backup information
- restoring files [SQL Server], viewing backup information
- restoring databases [SQL Server], history tables
- displaying backup information
- restoring files [SQL Server], status information
- historical information [SQL Server], backups
- database restores [SQL Server], history tables
- restore history tables [SQL Server]
- listing backed up files
ms.assetid: 799b9934-0ec2-4f43-960b-5c9653f18374
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: ff1e75cc88e51de75af32bcd9d48860be52d5861
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87710683"
---
# <a name="backup-history-and-header-information-sql-server"></a><span data-ttu-id="4c940-102">Historique de sauvegarde et informations d'en-tête (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4c940-102">Backup History and Header Information (SQL Server)</span></span>
  <span data-ttu-id="4c940-103">Un historique complet de toutes les opérations de restauration et de sauvegarde [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sur une instance de serveur est stocké dans la base de données **msdb** .</span><span class="sxs-lookup"><span data-stu-id="4c940-103">A complete history of all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup and restore operations on a server instance is stored in the **msdb** database.</span></span> <span data-ttu-id="4c940-104">Cette rubrique présente les tables d'historique de sauvegarde et de restauration, ainsi que les instructions [!INCLUDE[tsql](../../includes/tsql-md.md)] servant à accéder à l'historique de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-104">This topic introduces the backup and restore history tables and also the [!INCLUDE[tsql](../../includes/tsql-md.md)] statements that are used to access backup history.</span></span> <span data-ttu-id="4c940-105">Elle explique également dans quels cas il est utile d'afficher la liste des fichiers journaux de base de données et de transactions et dans quelles circonstances utiliser les informations d'en-tête de support ou les informations d'en-tête de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-105">The topic also discusses when listing database and transaction log files is useful and when to use media-header information compared to when to use backup-header information.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4c940-106">Pour minimiser le risque de perdre les modifications apportées récemment à votre historique de sauvegarde et de restauration, sauvegardez fréquemment **msdb** .</span><span class="sxs-lookup"><span data-stu-id="4c940-106">To manage the risk of losing recent changes to your backup and restore history, back up **msdb** frequently.</span></span> <span data-ttu-id="4c940-107">Pour plus d’informations sur les bases de données système que vous devez sauvegarder, consultez [Sauvegarder et restaurer des bases de données système &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="4c940-107">For information about which of the system databases you must back up, see [Back Up and Restore of System Databases &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md).</span></span>  
  
 <span data-ttu-id="4c940-108">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="4c940-108">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="4c940-109">Tables d'historique de sauvegarde et de restauration</span><span class="sxs-lookup"><span data-stu-id="4c940-109">Backup and Restore History Tables</span></span>](#BnRHistoryTables)  
  
-   [<span data-ttu-id="4c940-110">Instructions Transact-SQL permettant d'accéder à l'historique de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-110">Transact-SQL Statements for Accessing Backup History</span></span>](#TsqlStatementsForBackupHistory)  
  
-   [<span data-ttu-id="4c940-111">Fichiers journaux de base de données et de transactions</span><span class="sxs-lookup"><span data-stu-id="4c940-111">Database and Transaction Log Files</span></span>](#ListDbTlogFiles)  
  
-   [<span data-ttu-id="4c940-112">Informations d'en-tête de support</span><span class="sxs-lookup"><span data-stu-id="4c940-112">Media-Header Information</span></span>](#MediaHeader)  
  
-   [<span data-ttu-id="4c940-113">Informations d'en-tête de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-113">Backup-Header Information</span></span>](#BackupHeader)  
  
-   [<span data-ttu-id="4c940-114">Comparaison des informations d'en-tête de support et d'en-tête de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-114">Comparison of Media-Header and Backup-Header Information</span></span>](#CompareMediaHeaderBackupHeader)  
  
-   [<span data-ttu-id="4c940-115">Vérification de la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-115">Backup Verification</span></span>](#Verification)  
  
-   [<span data-ttu-id="4c940-116">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="4c940-116">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="backup-and-restore-history-tables"></a><a name="BnRHistoryTables"></a> <span data-ttu-id="4c940-117">Tables d'historique de sauvegarde et de restauration</span><span class="sxs-lookup"><span data-stu-id="4c940-117">Backup and Restore History Tables</span></span>  
 <span data-ttu-id="4c940-118">Cette section présente les tables d'historique qui stockent les métadonnées de restauration et de sauvegarde dans la base de données système **msdb** .</span><span class="sxs-lookup"><span data-stu-id="4c940-118">This section introduces the history tables that store backup and restore metadata in the **msdb** system database.</span></span>  
  
|<span data-ttu-id="4c940-119">Table d’historique</span><span class="sxs-lookup"><span data-stu-id="4c940-119">History table</span></span>|<span data-ttu-id="4c940-120">Description</span><span class="sxs-lookup"><span data-stu-id="4c940-120">Description</span></span>|  
|-------------------|-----------------|  
|[<span data-ttu-id="4c940-121">backupfile</span><span class="sxs-lookup"><span data-stu-id="4c940-121">backupfile</span></span>](/sql/relational-databases/system-tables/backupfile-transact-sql)|<span data-ttu-id="4c940-122">Cette table contient une ligne pour chaque fichier de données ou fichier journal sauvegardé.</span><span class="sxs-lookup"><span data-stu-id="4c940-122">Contains one row for each data or log file that is backed up.</span></span>|  
|[<span data-ttu-id="4c940-123">backupfilegroup</span><span class="sxs-lookup"><span data-stu-id="4c940-123">backupfilegroup</span></span>](/sql/relational-databases/system-tables/backupfilegroup-transact-sql)|<span data-ttu-id="4c940-124">Contient une ligne pour chaque groupe de fichiers d'un jeu de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-124">Contains a row for each filegroup in a backup set.</span></span>|  
|[<span data-ttu-id="4c940-125">backupmediafamily</span><span class="sxs-lookup"><span data-stu-id="4c940-125">backupmediafamily</span></span>](/sql/relational-databases/system-tables/backupmediafamily-transact-sql)|<span data-ttu-id="4c940-126">Cette table contient une ligne pour chaque famille de supports de sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="4c940-126">Contains one row for each media family.</span></span> <span data-ttu-id="4c940-127">Si une famille de supports réside dans un support de sauvegarde miroir, elle a une ligne distincte pour chaque miroir du support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-127">If a media family resides in a mirrored media set, the family has a separate row for each mirror in the media set.</span></span>|  
|[<span data-ttu-id="4c940-128">backupmediaset</span><span class="sxs-lookup"><span data-stu-id="4c940-128">backupmediaset</span></span>](/sql/relational-databases/system-tables/backupmediaset-transact-sql)|<span data-ttu-id="4c940-129">Contient une ligne pour chaque support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-129">Contains one row for each backup media set.</span></span>|  
|[<span data-ttu-id="4c940-130">backupset</span><span class="sxs-lookup"><span data-stu-id="4c940-130">backupset</span></span>](/sql/relational-databases/system-tables/backupset-transact-sql)|<span data-ttu-id="4c940-131">Contient une ligne pour chaque jeu de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-131">Contains a row for each backup set.</span></span>|  
|[<span data-ttu-id="4c940-132">restorefile</span><span class="sxs-lookup"><span data-stu-id="4c940-132">restorefile</span></span>](/sql/relational-databases/system-tables/restorefile-transact-sql)|<span data-ttu-id="4c940-133">Contient une ligne pour chaque fichier restauré.</span><span class="sxs-lookup"><span data-stu-id="4c940-133">Contains one row for each restored file.</span></span> <span data-ttu-id="4c940-134">Sont inclus les fichiers restaurés indirectement par nom de groupe de fichiers.</span><span class="sxs-lookup"><span data-stu-id="4c940-134">This includes files restored indirectly by filegroup name.</span></span>|  
|[<span data-ttu-id="4c940-135">restorefilegroup</span><span class="sxs-lookup"><span data-stu-id="4c940-135">restorefilegroup</span></span>](/sql/relational-databases/system-tables/restorefilegroup-transact-sql)|<span data-ttu-id="4c940-136">Contient une ligne par groupe de fichiers restaurés.</span><span class="sxs-lookup"><span data-stu-id="4c940-136">Contains one row for each restored filegroup.</span></span>|  
|[<span data-ttu-id="4c940-137">restorehistory</span><span class="sxs-lookup"><span data-stu-id="4c940-137">restorehistory</span></span>](/sql/relational-databases/system-tables/restorehistory-transact-sql)|<span data-ttu-id="4c940-138">Contient une ligne par opération de restauration.</span><span class="sxs-lookup"><span data-stu-id="4c940-138">Contains one row for each restore operation.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="4c940-139">Lorsqu'une restauration est effectuée, les tables d'historique de sauvegarde et les tables d'historique de restauration sont modifiées.</span><span class="sxs-lookup"><span data-stu-id="4c940-139">When a restore is performed, backup history tables and restore history tables are modified.</span></span>  
  
##  <a name="transact-sql-statements-for-accessing-backup-history"></a><a name="TsqlStatementsForBackupHistory"></a> <span data-ttu-id="4c940-140">Instructions Transact-SQL permettant d'accéder à l'historique de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-140">Transact-SQL Statements for Accessing Backup History</span></span>  
 <span data-ttu-id="4c940-141">Les instructions d'information de restauration correspondent aux informations stockées dans certaines tables d'historique de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-141">The restore information statements correspond with information stored in certain backup history tables.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="4c940-142">Les instructions Transact-SQL RESTORE FILELISTONLY, RESTORE HEADERONLY, RESTORE LABELONLY et RESTORE VERIFYONLY nécessitent l'autorisation CREATE DATABASE.</span><span class="sxs-lookup"><span data-stu-id="4c940-142">The RESTORE FILELISTONLY, RESTORE HEADERONLY, RESTORE LABELONLY, and RESTORE VERIFYONLY Transact-SQL statements require CREATE DATABASE permission.</span></span> <span data-ttu-id="4c940-143">Cette nécessité sécurise vos fichiers de sauvegarde et protège vos informations de sauvegarde de façon plus complète que dans les versions précédentes.</span><span class="sxs-lookup"><span data-stu-id="4c940-143">This requirement secures your backup files and protects your backup information more fully than in previous versions.</span></span> <span data-ttu-id="4c940-144">Pour plus d’informations sur cette autorisation, consultez [Autorisations de base de données GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-database-permissions-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="4c940-144">For information about this permission, see [GRANT Database Permissions &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-database-permissions-transact-sql).</span></span>  
  
|<span data-ttu-id="4c940-145">Instructions d'information</span><span class="sxs-lookup"><span data-stu-id="4c940-145">Information statement</span></span>|<span data-ttu-id="4c940-146">Table d'historique de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-146">Backup history table</span></span>|<span data-ttu-id="4c940-147">Description</span><span class="sxs-lookup"><span data-stu-id="4c940-147">Description</span></span>|  
|---------------------------|--------------------------|-----------------|  
|[<span data-ttu-id="4c940-148">RESTORE FILELISTONLY</span><span class="sxs-lookup"><span data-stu-id="4c940-148">RESTORE FILELISTONLY</span></span>](/sql/t-sql/statements/restore-statements-filelistonly-transact-sql)|[<span data-ttu-id="4c940-149">backupfile</span><span class="sxs-lookup"><span data-stu-id="4c940-149">backupfile</span></span>](/sql/relational-databases/system-tables/backupfile-transact-sql)|<span data-ttu-id="4c940-150">Renvoie un ensemble de résultats qui contient une liste des fichiers journaux et des fichiers de la base de données contenus dans le jeu de sauvegardes spécifié.</span><span class="sxs-lookup"><span data-stu-id="4c940-150">Returns a result set that has a list of the database and log files that are contained in the specified backup set.</span></span><br /><br /> <span data-ttu-id="4c940-151">Pour plus d'informations, consultez « Liste des fichiers de base de données et du journal des transactions », plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-151">For more information, see "Listing Database and Transaction Log Files," later in this topic.</span></span>|  
|[<span data-ttu-id="4c940-152">RESTORE HEADERONLY</span><span class="sxs-lookup"><span data-stu-id="4c940-152">RESTORE HEADERONLY</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)|[<span data-ttu-id="4c940-153">backupset</span><span class="sxs-lookup"><span data-stu-id="4c940-153">backupset</span></span>](/sql/relational-databases/system-tables/backupset-transact-sql)|<span data-ttu-id="4c940-154">Récupère toutes les informations d'en-tête de sauvegarde pour tous les jeux de sauvegardes d'une unité de sauvegarde particulière.</span><span class="sxs-lookup"><span data-stu-id="4c940-154">Retrieves all the backup header information for all backup sets on a particular backup device.</span></span> <span data-ttu-id="4c940-155">L'exécution de RESTORE HEADERONLY aboutit à un ensemble de résultats.</span><span class="sxs-lookup"><span data-stu-id="4c940-155">The result from executing RESTORE HEADERONLY is a result set.</span></span><br /><br /> <span data-ttu-id="4c940-156">Pour plus d'informations, consultez « Affichage des informations de l'en-tête de sauvegarde » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-156">For more information, see "Viewing the Backup-Header Information," later in this topic.</span></span>|  
|[<span data-ttu-id="4c940-157">RESTORE LABELONLY</span><span class="sxs-lookup"><span data-stu-id="4c940-157">RESTORE LABELONLY</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)|[<span data-ttu-id="4c940-158">backupmediaset</span><span class="sxs-lookup"><span data-stu-id="4c940-158">backupmediaset</span></span>](/sql/relational-databases/system-tables/backupmediaset-transact-sql)|<span data-ttu-id="4c940-159">Renvoie un ensemble de résultats contenant des informations relatives au support de sauvegarde d'une unité de sauvegarde spécifiée.</span><span class="sxs-lookup"><span data-stu-id="4c940-159">Returns a result set that contains information about the backup media on a specified backup device.</span></span><br /><br /> <span data-ttu-id="4c940-160">Pour plus d'informations, consultez « Affichage des informations de l'en-tête du support » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-160">For more information, see "Viewing the Media-Header Information," later in this topic.</span></span>|  
  
##  <a name="database-and-transaction-log-files"></a><a name="ListDbTlogFiles"></a> <span data-ttu-id="4c940-161">Fichiers journaux de base de données et de transactions</span><span class="sxs-lookup"><span data-stu-id="4c940-161">Database and Transaction Log Files</span></span>  
 <span data-ttu-id="4c940-162">Les informations affichées dans la liste des fichiers journaux de base de données et de transactions d'une sauvegarde comprennent le nom logique, le nom physique, le type de fichier (base de données ou journal), l'appartenance à un groupe de fichiers, la taille de fichier (en octets), la taille de fichier maximale autorisée et la taille de croissance de fichier prédéfinie (en octets).</span><span class="sxs-lookup"><span data-stu-id="4c940-162">Information that is displayed when the database and transaction log files are listed in a backup includes the logical name, physical name, file type (database or log), filegroup membership, file size (in bytes), the maximum allowed file size, and the predefined file growth size (in bytes).</span></span> <span data-ttu-id="4c940-163">Ces informations sont utiles, dans les cas suivants, pour déterminer les noms des fichiers dans une sauvegarde de base de données avant de la restaurer lorsque :</span><span class="sxs-lookup"><span data-stu-id="4c940-163">This information is useful, in the following situations, to determine the names of the files in a database backup before you restore the database backup:</span></span>  
  
-   <span data-ttu-id="4c940-164">vous avez perdu une unité de disque contenant un ou plusieurs fichiers pour une base de données ;</span><span class="sxs-lookup"><span data-stu-id="4c940-164">You have lost a disk drive that contains one or more of the files for a database.</span></span>  
  
     <span data-ttu-id="4c940-165">Vous pouvez dresser une liste des fichiers de la sauvegarde de la base de données pour déterminer les fichiers affectés et les restaurer sur une unité différente lors de la restauration de l'intégralité de la base de données ou ne restaurer que ces fichiers et appliquer toutes les sauvegardes du journal des transactions créées depuis la dernière sauvegarde de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4c940-165">You can list the files in the database backup to determine which files were affected, and then restore those files onto a different drive when you restore the whole database; or restore just those files and apply any transaction log backups created since the database was backed up.</span></span>  
  
-   <span data-ttu-id="4c940-166">vous restaurez une base de données d'un serveur vers un autre, mais la structure du répertoire et le mappage du disque n'existent pas sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="4c940-166">You are restoring a database from one server onto another server, but the directory structure and drive mapping does not exist on the server.</span></span>  
  
     <span data-ttu-id="4c940-167">L'énumération des fichiers dans la sauvegarde vous permet de déterminer les fichiers qui sont affectés.</span><span class="sxs-lookup"><span data-stu-id="4c940-167">Listing the files in the backup let you determine which files are affected.</span></span> <span data-ttu-id="4c940-168">La sauvegarde peut par exemple contenir un fichier à restaurer sur le lecteur E alors que le serveur de destination n'a pas de lecteur E. Le fichier doit être déplacé vers un autre emplacement, tel que le lecteur Z quand le fichier est restauré.</span><span class="sxs-lookup"><span data-stu-id="4c940-168">For example, the backup contains a file that it has to restore to drive E, but the destination server does not have a drive E. The file must be relocated to another location, such as drive Z, when the file is restored.</span></span>  
  
##  <a name="media-header-information"></a><a name="MediaHeader"></a> <span data-ttu-id="4c940-169">Informations d'en-tête de support</span><span class="sxs-lookup"><span data-stu-id="4c940-169">Media-Header Information</span></span>  
 <span data-ttu-id="4c940-170">L'affichage de l'en-tête de support présente les informations relatives au support lui-même et non pas aux sauvegardes se trouvant sur le support.</span><span class="sxs-lookup"><span data-stu-id="4c940-170">Viewing the media header displays information about the media itself, instead of about the backups on the media.</span></span> <span data-ttu-id="4c940-171">Les informations d'en-tête de support affichées comprennent le nom du support, sa description, le nom du logiciel utilisé pour créer l'en-tête de support et la date à laquelle l'en-tête de support a été écrit.</span><span class="sxs-lookup"><span data-stu-id="4c940-171">Media header information that is displayed includes the media name, description, name of the software that created the media header, and the date the media header was written.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4c940-172">L'affichage de l'en-tête de support est rapide.</span><span class="sxs-lookup"><span data-stu-id="4c940-172">Viewing the media header is quick.</span></span>  
  
 <span data-ttu-id="4c940-173">Pour plus d’informations, consultez [Comparaison des informations d’en-tête de support et d’en-tête de sauvegarde](#CompareMediaHeaderBackupHeader), plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-173">For more information, see [Comparison of Media-Header and Backup-Header Information](#CompareMediaHeaderBackupHeader), later in this topic.</span></span>  
  
##  <a name="backup-header-information"></a><a name="BackupHeader"></a> <span data-ttu-id="4c940-174">Informations d'en-tête de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-174">Backup-Header Information</span></span>  
 <span data-ttu-id="4c940-175">L'affichage de l'en-tête de sauvegarde présente les informations relatives à tous les jeux de sauvegarde [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ou non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , qui se trouvent sur le support.</span><span class="sxs-lookup"><span data-stu-id="4c940-175">Viewing the backup header displays information about all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup sets on the media.</span></span> <span data-ttu-id="4c940-176">Les informations qui sont affichées comprennent les types de périphériques de sauvegardes utilisés, les types de sauvegarde (par exemple base de données, transaction, fichier ou base de données différentielle) et les informations de date/heure de début et de fin de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-176">Information that is displayed includes the types of backup devices that are used, the types of backup (for example, database, transaction, file, or differential database), and backup start and stop date/time information.</span></span> <span data-ttu-id="4c940-177">Ces informations sont utiles lorsque vous devez déterminer le jeu de sauvegarde à restaurer sur la bande ou les sauvegardes contenues sur le support.</span><span class="sxs-lookup"><span data-stu-id="4c940-177">This information is useful when you have to determine which backup set on the tape to restore, or the backups that are contained on the media.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4c940-178">L'affichage des informations d'en-tête de sauvegarde peut prendre du temps pour les bandes de grande capacité car la totalité du support doit être balayée pour pouvoir afficher les informations concernant chaque sauvegarde du support.</span><span class="sxs-lookup"><span data-stu-id="4c940-178">Viewing backup header information can take a long time for high-capacity tapes, because the whole media must be scanned to display information about each backup on the media.</span></span>  
  
 <span data-ttu-id="4c940-179">Pour plus d’informations, consultez [Comparaison des informations d’en-tête de support et d’en-tête de sauvegarde](#CompareMediaHeaderBackupHeader), plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-179">For more information, see [Comparison of Media-Header and Backup-Header Information](#CompareMediaHeaderBackupHeader), later in this topic.</span></span>  
  
### <a name="which-backup-set-to-restore"></a><span data-ttu-id="4c940-180">Quel jeu de sauvegarde restaurer</span><span class="sxs-lookup"><span data-stu-id="4c940-180">Which Backup Set to Restore</span></span>  
 <span data-ttu-id="4c940-181">Vous pouvez utiliser les informations de l'en-tête de sauvegarde pour identifier le jeu de sauvegarde à restaurer.</span><span class="sxs-lookup"><span data-stu-id="4c940-181">You can use information in the backup header to identify which backup set to restore.</span></span> <span data-ttu-id="4c940-182">Le moteur de base de données numérote chaque jeu de sauvegarde sur le support de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-182">The Database Engine numbers each backup set on the backup media.</span></span> <span data-ttu-id="4c940-183">Cela vous permet d'identifier le jeu de sauvegarde à restaurer à l'aide de sa position sur le support.</span><span class="sxs-lookup"><span data-stu-id="4c940-183">This lets you identify the backup set you want to restore by using its position on the media.</span></span> <span data-ttu-id="4c940-184">Par exemple, le support suivant contient trois jeux de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-184">For example, the following media contains three backup sets.</span></span>  
  
 <span data-ttu-id="4c940-185">![Support de sauvegarde contenant des jeux de sauvegarde SQL Server](../../database-engine/media/bnr-media-backup-sets.gif "Support de sauvegarde contenant des jeux de sauvegarde SQL Server")</span><span class="sxs-lookup"><span data-stu-id="4c940-185">![Backup media containing SQL Server backup sets](../../database-engine/media/bnr-media-backup-sets.gif "Backup media containing SQL Server backup sets")</span></span>  
  
 <span data-ttu-id="4c940-186">Pour restaurer un jeu de sauvegarde spécifique, précisez le numéro d'ordre de ce jeu.</span><span class="sxs-lookup"><span data-stu-id="4c940-186">To restore a specific backup set, specify the position number of the backup set you want to restore.</span></span> <span data-ttu-id="4c940-187">Par exemple, pour restaurer le deuxième jeu de sauvegarde, spécifiez 2 comme jeu de sauvegarde à restaurer.</span><span class="sxs-lookup"><span data-stu-id="4c940-187">For example, to restore the second backup set, specify 2 as the backup set to restore.</span></span>  
  
##  <a name="comparison-of-media-header-and-backup-header-information"></a><a name="CompareMediaHeaderBackupHeader"></a> <span data-ttu-id="4c940-188">Comparaison des informations d'en-tête de support et d'en-tête de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-188">Comparison of Media-Header and Backup-Header Information</span></span>  
 <span data-ttu-id="4c940-189">La tableau suivant donne un exemple des différences entre l’affichage des informations de l’en-tête de sauvegarde et de l’en-tête de support.</span><span class="sxs-lookup"><span data-stu-id="4c940-189">The following illustration provides an example of the differences between viewing backup-header and media-header information.</span></span> <span data-ttu-id="4c940-190">L'obtention de l'en-tête de support ne nécessite que la récupération des informations au début de la bande.</span><span class="sxs-lookup"><span data-stu-id="4c940-190">Obtaining the media header requires retrieving information from only the start of the tape.</span></span> <span data-ttu-id="4c940-191">L'obtention de l'en-tête de sauvegarde nécessite d'analyser la bande entière pour examiner l'en-tête de chaque jeu de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-191">Obtaining the backup header requires scanning the whole tape to look at the header of every backup set.</span></span>  
  
 <span data-ttu-id="4c940-192">![Jeu de supports contenant trois jeux de sauvegarde SQL Server](../../database-engine/media/bnr-media-label.gif "Jeu de supports contenant trois jeux de sauvegarde SQL Server")</span><span class="sxs-lookup"><span data-stu-id="4c940-192">![Media set containing three SQL Server backup sets](../../database-engine/media/bnr-media-label.gif "Media set containing three SQL Server backup sets")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="4c940-193">Si vous utilisez des jeux de supports ayant plusieurs familles de supports, l'en-tête de support et le jeu de sauvegarde sont écrits sur toutes les familles.</span><span class="sxs-lookup"><span data-stu-id="4c940-193">When you use media sets that have multiple media families, the media header and backup set are written to all media families.</span></span> <span data-ttu-id="4c940-194">Par conséquent, il suffit de fournir une seule famille de supports pour ces opérations de rapport.</span><span class="sxs-lookup"><span data-stu-id="4c940-194">Therefore, you only have to provide a single media family for these reporting operations.</span></span>  
  
 <span data-ttu-id="4c940-195">Pour plus d'informations sur l'affichage de l'en-tête de support, consultez « Affichage des informations de l'en-tête du support » plus haut dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-195">For information about how to view the media-header, see "Viewing the Media-Header Information," earlier in this topic.</span></span>  
  
 <span data-ttu-id="4c940-196">Pour plus d'informations sur l'affichage des informations d'en-tête de sauvegarde pour tous les jeux de sauvegardes d'une unité de sauvegarde, consultez « Informations d'en-tête de sauvegarde » plus haut dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="4c940-196">For information about how to view the backup header information for all backup sets on a backup device, see "Viewing the Backup-Header Information," earlier in this topic.</span></span>  
  
##  <a name="backup-verification"></a><a name="Verification"></a> <span data-ttu-id="4c940-197">Vérification de la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="4c940-197">Backup Verification</span></span>  
 <span data-ttu-id="4c940-198">Bien qu'elle ne soit pas obligatoire, la vérification d'une sauvegarde est une pratique utile.</span><span class="sxs-lookup"><span data-stu-id="4c940-198">Although not required, verifying a backup is a useful practice.</span></span> <span data-ttu-id="4c940-199">Cette opération porte sur l'intégrité physique de la sauvegarde ; elle permet de s'assurer que tous les fichiers de la sauvegarde sont lisibles et exploitables et que vous pouvez restaurer la sauvegarde en cas de besoin.</span><span class="sxs-lookup"><span data-stu-id="4c940-199">Verifying a backup checks that the backup is intact physically, to ensure that all the files in the backup are readable and can be restored, and that you can restore your backup in the event you need to use it.</span></span> <span data-ttu-id="4c940-200">Notez que la vérification ne porte pas sur la structure des données de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-200">It is important to understand that verifying a backup does not verify the structure of the data on the backup.</span></span> <span data-ttu-id="4c940-201">Cependant, si la sauvegarde a été créée à l'aide de WITH CHECKSUMS, sa vérification à l'aide de WITH CHECKSUMS peut fournir une bonne indication de la fiabilité des données de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="4c940-201">However, if the backup was created using WITH CHECKSUMS, verifying the backup using WITH CHECKSUMS can provide a good indication of the reliability of the data on the backup.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="4c940-202">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="4c940-202">Related Tasks</span></span>  
 <span data-ttu-id="4c940-203">**Pour supprimer les anciennes lignes des tables d'historique de sauvegarde et de restauration**</span><span class="sxs-lookup"><span data-stu-id="4c940-203">**To delete old rows from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="4c940-204">sp_delete_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-204">sp_delete_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-backuphistory-transact-sql)  
  
 <span data-ttu-id="4c940-205">**Pour supprimer toutes les lignes relatives à une base de données spécifique dans les tables d'historique de sauvegarde et de restauration**</span><span class="sxs-lookup"><span data-stu-id="4c940-205">**To delete all rows for a specific database from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="4c940-206">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-206">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-database-backuphistory-transact-sql)  
  
 <span data-ttu-id="4c940-207">**Pour afficher les données et les fichiers journaux dans un jeu de sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="4c940-207">**To view the data and log files in a backup set**</span></span>  
  
-   [<span data-ttu-id="4c940-208">RESTORE FILELISTONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-208">RESTORE FILELISTONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-filelistonly-transact-sql)  
  
-   <span data-ttu-id="4c940-209"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadFileList%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="4c940-209"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadFileList%2A> (SMO)</span></span>  
  
 <span data-ttu-id="4c940-210">**Pour afficher les informations d'en-tête de support**</span><span class="sxs-lookup"><span data-stu-id="4c940-210">**To view media header information**</span></span>  
  
-   [<span data-ttu-id="4c940-211">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-211">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)  
  
-   [<span data-ttu-id="4c940-212">Afficher les propriétés et le contenu d’une unité de sauvegarde logique &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-212">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   [<span data-ttu-id="4c940-213">Afficher le contenu d’un fichier ou d’une bande de sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-213">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   <span data-ttu-id="4c940-214"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="4c940-214"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="4c940-215">**Pour afficher les informations d'en-tête de sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="4c940-215">**To view backup header information**</span></span>  
  
-   [<span data-ttu-id="4c940-216">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-216">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)  
  
-   [<span data-ttu-id="4c940-217">Afficher le contenu d’un fichier ou d’une bande de sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-217">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   [<span data-ttu-id="4c940-218">Afficher les propriétés et le contenu d’une unité de sauvegarde logique &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-218">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   <span data-ttu-id="4c940-219"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="4c940-219"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="4c940-220">**Pour supprimer les anciennes lignes des tables d'historique de sauvegarde et de restauration**</span><span class="sxs-lookup"><span data-stu-id="4c940-220">**To delete old rows from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="4c940-221">sp_delete_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-221">sp_delete_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-backuphistory-transact-sql)  
  
 <span data-ttu-id="4c940-222">**Pour supprimer toutes les lignes relatives à une base de données spécifique dans les tables d'historique de sauvegarde et de restauration**</span><span class="sxs-lookup"><span data-stu-id="4c940-222">**To delete all rows for a specific database from backup and restore history tables**</span></span>  
  
-   [<span data-ttu-id="4c940-223">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-223">sp_delete_database_backuphistory &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-delete-database-backuphistory-transact-sql)  
  
 <span data-ttu-id="4c940-224">**Pour afficher les informations d'en-tête de support**</span><span class="sxs-lookup"><span data-stu-id="4c940-224">**To view media header information**</span></span>  
  
-   [<span data-ttu-id="4c940-225">RESTORE LABELONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-225">RESTORE LABELONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-labelonly-transact-sql)  
  
-   [<span data-ttu-id="4c940-226">Afficher les propriétés et le contenu d’une unité de sauvegarde logique &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-226">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   [<span data-ttu-id="4c940-227">Afficher le contenu d’un fichier ou d’une bande de sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-227">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   <span data-ttu-id="4c940-228"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="4c940-228"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadMediaHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="4c940-229">**Pour afficher les informations d'en-tête de sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="4c940-229">**To view backup header information**</span></span>  
  
-   [<span data-ttu-id="4c940-230">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-230">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)  
  
-   [<span data-ttu-id="4c940-231">Afficher le contenu d’un fichier ou d’une bande de sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-231">View the Contents of a Backup Tape or File &#40;SQL Server&#41;</span></span>](view-the-contents-of-a-backup-tape-or-file-sql-server.md)  
  
-   [<span data-ttu-id="4c940-232">Afficher les propriétés et le contenu d’une unité de sauvegarde logique &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-232">View the Properties and Contents of a Logical Backup Device &#40;SQL Server&#41;</span></span>](view-the-properties-and-contents-of-a-logical-backup-device-sql-server.md)  
  
-   <span data-ttu-id="4c940-233"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="4c940-233"><xref:Microsoft.SqlServer.Management.Smo.Restore.ReadBackupHeader%2A> (SMO)</span></span>  
  
 <span data-ttu-id="4c940-234">**Pour afficher les fichiers dans un jeu de sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="4c940-234">**To view the files in a backup set**</span></span>  
  
-   [<span data-ttu-id="4c940-235">Afficher les fichiers de données et les fichiers journaux dans un jeu de sauvegarde &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-235">View the Data and Log Files in a Backup Set &#40;SQL Server&#41;</span></span>](view-the-data-and-log-files-in-a-backup-set-sql-server.md)  
  
-   [<span data-ttu-id="4c940-236">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-236">RESTORE HEADERONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-headeronly-transact-sql)  
  
 <span data-ttu-id="4c940-237">**Pour vérifier une sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="4c940-237">**To verify a backup**</span></span>  
  
-   [<span data-ttu-id="4c940-238">RESTORE VERIFYONLY &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-238">RESTORE VERIFYONLY &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-verifyonly-transact-sql)  
  
-   <span data-ttu-id="4c940-239"><xref:Microsoft.SqlServer.Management.Smo.Restore.SqlVerify%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="4c940-239"><xref:Microsoft.SqlServer.Management.Smo.Restore.SqlVerify%2A> (SMO)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4c940-240">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="4c940-240">See Also</span></span>  
 <span data-ttu-id="4c940-241">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="4c940-241">[BACKUP &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-transact-sql) </span></span>  
 <span data-ttu-id="4c940-242">[Jeux de supports, familles de supports et jeux de sauvegarde &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4c940-242">[Media Sets, Media Families, and Backup Sets &#40;SQL Server&#41;](media-sets-media-families-and-backup-sets-sql-server.md) </span></span>  
 <span data-ttu-id="4c940-243">[Unités de sauvegarde &#40;SQL Server&#41;](backup-devices-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4c940-243">[Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md) </span></span>  
 <span data-ttu-id="4c940-244">[Jeux de supports de sauvegarde en miroir &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="4c940-244">[Mirrored Backup Media Sets &#40;SQL Server&#41;](mirrored-backup-media-sets-sql-server.md) </span></span>  
 [<span data-ttu-id="4c940-245">Erreurs de support possibles pendant les opérations de sauvegarde et de restauration &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="4c940-245">Possible Media Errors During Backup and Restore &#40;SQL Server&#41;</span></span>](possible-media-errors-during-backup-and-restore-sql-server.md)  
  
  
