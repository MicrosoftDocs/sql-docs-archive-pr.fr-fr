---
title: Sauvegardes du journal des transactions (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- backing up [SQL Server], transaction logs
- transaction log backups [SQL Server], creating
- log backups [SQL Server[
- transaction log backups [SQL Server], sequencing
ms.assetid: f4a44a35-0f44-4a42-91d5-d73ac658a3b0
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 752447d6c38a2df0fcbdce72fbba12edd7a9eeb3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87703019"
---
# <a name="transaction-log-backups-sql-server"></a><span data-ttu-id="1c590-102">Sauvegardes du journal des transactions (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="1c590-102">Transaction Log Backups (SQL Server)</span></span>
  <span data-ttu-id="1c590-103">Cette rubrique s'applique uniquement aux bases de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] employant le mode de récupération complète ou le mode de récupération utilisant les journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="1c590-103">This topic is relevant only for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases that are using the full or bulk-logged recovery models.</span></span> <span data-ttu-id="1c590-104">Cette rubrique décrit la sauvegarde du journal des transactions d'une base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="1c590-104">This topic discusses backing up the transaction log of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span>  
  
 <span data-ttu-id="1c590-105">Vous devez au moins avoir créé une sauvegarde complète pour pouvoir créer des sauvegardes de journaux.</span><span class="sxs-lookup"><span data-stu-id="1c590-105">Minimally, you must have created at least one full backup before you can create any log backups.</span></span> <span data-ttu-id="1c590-106">Après cela, le journal des transactions peut être sauvegardé à tout moment, à moins qu'il ne soit déjà en cours de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="1c590-106">After that, the transaction log can be backed up at any time unless the log is already being backed up.</span></span> <span data-ttu-id="1c590-107">Nous vous recommandons d'effectuer des sauvegardes de journaux fréquemment, à la fois pour réduire les risques de perte de travail et pour tronquer le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="1c590-107">We recommend that you take log backups frequently, both to minimize work loss exposure and to truncate the transaction log.</span></span> <span data-ttu-id="1c590-108">En règle générale, un administrateur de base de données crée une sauvegarde complète de base de données de temps en temps, par exemple chaque semaine et, éventuellement, crée une série de sauvegardes de base de données différentielles à un intervalle plus court, par exemple tous les jours.</span><span class="sxs-lookup"><span data-stu-id="1c590-108">Typically, a database administrator creates a full database backup occasionally, such as weekly, and, optionally, creates a series of differential database backup at a shorter interval, such as daily.</span></span> <span data-ttu-id="1c590-109">Indépendamment des sauvegardes de base de données, l'administrateur de base de données sauvegarde le journal des transactions à intervalles fréquents, par exemple toutes les 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="1c590-109">Independently of the database backups, the database administrator backs up the transaction log at frequent intervals, such as every 10 minutes.</span></span> <span data-ttu-id="1c590-110">Pour un type donné de sauvegarde, l'intervalle optimal varie en fonction de divers facteurs tels que l'importance des données, la taille de la base de données et la charge de travail du serveur.</span><span class="sxs-lookup"><span data-stu-id="1c590-110">For a given type of backup, the optimal interval depends on factors such as the importance of the data, the size of the database, and the workload of the server.</span></span>  
  
 <span data-ttu-id="1c590-111">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="1c590-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="1c590-112">Fonctionnement d’une séquence de sauvegardes de journaux</span><span class="sxs-lookup"><span data-stu-id="1c590-112">How a Sequence of Log Backups Works</span></span>](#LogBackupSequence)  
  
-   [<span data-ttu-id="1c590-113">Recommandations</span><span class="sxs-lookup"><span data-stu-id="1c590-113">Recommendations</span></span>](#Recommendations)  
  
-   [<span data-ttu-id="1c590-114">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="1c590-114">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="1c590-115">Contenu connexe</span><span class="sxs-lookup"><span data-stu-id="1c590-115">Related Content</span></span>](#RelatedContent)  
  
##  <a name="how-a-sequence-of-log-backups-works"></a><a name="LogBackupSequence"></a><span data-ttu-id="1c590-116">Fonctionnement d’une séquence de sauvegardes de journaux</span><span class="sxs-lookup"><span data-stu-id="1c590-116">How a Sequence of Log Backups Works</span></span>  
 <span data-ttu-id="1c590-117">La séquence de sauvegarde des journaux des transactions ( *séquence de journaux* ) ne dépend pas des sauvegardes de données.</span><span class="sxs-lookup"><span data-stu-id="1c590-117">The sequence of transaction log backups *log chain* is independent of data backups.</span></span> <span data-ttu-id="1c590-118">Supposons, par exemple, que la séquence des événements est la suivante.</span><span class="sxs-lookup"><span data-stu-id="1c590-118">For example, assume the following sequence of events.</span></span>  
  
|<span data-ttu-id="1c590-119">Temps</span><span class="sxs-lookup"><span data-stu-id="1c590-119">Time</span></span>|<span data-ttu-id="1c590-120">Événement</span><span class="sxs-lookup"><span data-stu-id="1c590-120">Event</span></span>|  
|----------|-----------|  
|<span data-ttu-id="1c590-121">8h00</span><span class="sxs-lookup"><span data-stu-id="1c590-121">8:00 A.M.</span></span>|<span data-ttu-id="1c590-122">Sauvegarde de la base de données.</span><span class="sxs-lookup"><span data-stu-id="1c590-122">Back up database.</span></span>|  
|<span data-ttu-id="1c590-123">Midi</span><span class="sxs-lookup"><span data-stu-id="1c590-123">Noon</span></span>|<span data-ttu-id="1c590-124">Sauvegarde du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="1c590-124">Back up transaction log.</span></span>|  
|<span data-ttu-id="1c590-125">16h00</span><span class="sxs-lookup"><span data-stu-id="1c590-125">4:00 P.M.</span></span>|<span data-ttu-id="1c590-126">Sauvegarde du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="1c590-126">Back up transaction log.</span></span>|  
|<span data-ttu-id="1c590-127">18h00</span><span class="sxs-lookup"><span data-stu-id="1c590-127">6:00 P.M.</span></span>|<span data-ttu-id="1c590-128">Sauvegarde de la base de données.</span><span class="sxs-lookup"><span data-stu-id="1c590-128">Back up database.</span></span>|  
|<span data-ttu-id="1c590-129">20h00</span><span class="sxs-lookup"><span data-stu-id="1c590-129">8:00 P.M.</span></span>|<span data-ttu-id="1c590-130">Sauvegarde du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="1c590-130">Back up transaction log.</span></span>|  
  
 <span data-ttu-id="1c590-131">La sauvegarde du journal des transactions créée à 20h00</span><span class="sxs-lookup"><span data-stu-id="1c590-131">The transaction log backup created at 8:00 P.M.</span></span> <span data-ttu-id="1c590-132">contient les enregistrements du journal des transactions effectués de 16H00</span><span class="sxs-lookup"><span data-stu-id="1c590-132">contains transaction log records from 4:00 P.M.</span></span> <span data-ttu-id="1c590-133">à 20h00, ce qui couvre le moment de la création de la sauvegarde complète intervenant à 18H00.</span><span class="sxs-lookup"><span data-stu-id="1c590-133">through 8:00 P.M., spanning the time when the full database backup was created at 6:00 P.M.</span></span> <span data-ttu-id="1c590-134">La séquence des sauvegardes du journal des transactions est continue depuis la sauvegarde complète de la base de données initiale créée à 08H00</span><span class="sxs-lookup"><span data-stu-id="1c590-134">The sequence of transaction log backups is continuous from the initial full database backup created at 8:00 A.M.</span></span> <span data-ttu-id="1c590-135">jusqu'à la dernière sauvegarde du journal des transactions effectuée à 20H00.</span><span class="sxs-lookup"><span data-stu-id="1c590-135">to the last transaction log backup created at 8:00 P.M.</span></span> <span data-ttu-id="1c590-136">Pour plus d’informations sur l’application de ces sauvegardes du journal, reportez-vous à l’exemple cité dans [Appliquer les sauvegardes du journal de transactions &#40;SQL Server&#41;](transaction-log-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="1c590-136">For information about how to apply these log backups, see the example in [Apply Transaction Log Backups &#40;SQL Server&#41;](transaction-log-backups-sql-server.md).</span></span>  
  
##  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="1c590-137">Recommandations</span><span class="sxs-lookup"><span data-stu-id="1c590-137">Recommendations</span></span>  
  
-   <span data-ttu-id="1c590-138">Si un journal des transactions est endommagé, vous perdez alors les travaux réalisés depuis la sauvegarde valide la plus récente.</span><span class="sxs-lookup"><span data-stu-id="1c590-138">If a transaction log is damaged, work that is performed since the most recent valid backup is lost.</span></span> <span data-ttu-id="1c590-139">Par conséquent, nous vous recommandons vivement de placer vos fichiers journaux sur une unité de stockage à tolérance de pannes.</span><span class="sxs-lookup"><span data-stu-id="1c590-139">Therefore we strongly recommend that you put your log files on fault-tolerant storage.</span></span>  
  
-   <span data-ttu-id="1c590-140">Si une base de données est endommagée ou si vous êtes sur le point de restaurer la base de données, nous vous recommandons de créer une [sauvegarde de la fin du journal](tail-log-backups-sql-server.md) pour vous permettre de restaurer la base de données au moment actuel.</span><span class="sxs-lookup"><span data-stu-id="1c590-140">If a database is damaged or you are about to restore the database, we recommend that you create a [tail-log backup](tail-log-backups-sql-server.md) to enable you to restore the database to the current point in time.</span></span>  
  
-   <span data-ttu-id="1c590-141">Par défaut, chaque opération de sauvegarde réussie ajoute une entrée au journal des erreurs [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et au journal des événements système.</span><span class="sxs-lookup"><span data-stu-id="1c590-141">By default, every successful backup operation adds an entry in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error log and in the system event log.</span></span> <span data-ttu-id="1c590-142">Si vous sauvegardez très fréquemment le journal, ces messages de réussite peuvent rapidement s'accumuler, créer des journaux d'erreurs très volumineux et compliquer la recherche d'autres messages.</span><span class="sxs-lookup"><span data-stu-id="1c590-142">If back up the log very frequently, these success messages accumulate quickly, resulting in huge error logs that can make finding other messages difficult.</span></span> <span data-ttu-id="1c590-143">Dans de tels cas, vous pouvez supprimer ces entrées de journal en utilisant l'indicateur de trace 3226 si aucun de vos scripts ne dépend de ces entrées.</span><span class="sxs-lookup"><span data-stu-id="1c590-143">In such cases you can suppress these log entries by using trace flag 3226 if none of your scripts depend on those entries.</span></span> <span data-ttu-id="1c590-144">Pour plus d’informations, consultez [Indicateurs de trace &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="1c590-144">For more information, see [Trace Flags &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-traceon-trace-flags-transact-sql).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="1c590-145">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="1c590-145">Related Tasks</span></span>  
 <span data-ttu-id="1c590-146">**Pour créer une sauvegarde du journal des transactions**</span><span class="sxs-lookup"><span data-stu-id="1c590-146">**To create a transaction log backup**</span></span>  
  
-   [<span data-ttu-id="1c590-147">Sauvegarder un journal des transactions &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="1c590-147">Back Up a Transaction Log &#40;SQL Server&#41;</span></span>](back-up-a-transaction-log-sql-server.md)  
  
-   <span data-ttu-id="1c590-148"><xref:Microsoft.SqlServer.Management.Smo.Backup.SqlBackup%2A> (SMO)</span><span class="sxs-lookup"><span data-stu-id="1c590-148"><xref:Microsoft.SqlServer.Management.Smo.Backup.SqlBackup%2A> (SMO)</span></span>  
  
 <span data-ttu-id="1c590-149">Pour planifier des travaux de sauvegarde, consultez [Use the Maintenance Plan Wizard](../maintenance-plans/use-the-maintenance-plan-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="1c590-149">To schedule backup jobs, see [Use the Maintenance Plan Wizard](../maintenance-plans/use-the-maintenance-plan-wizard.md).</span></span>  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="1c590-150">Contenu associé</span><span class="sxs-lookup"><span data-stu-id="1c590-150">Related Content</span></span>  
 <span data-ttu-id="1c590-151">Aucun.</span><span class="sxs-lookup"><span data-stu-id="1c590-151">None.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1c590-152">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="1c590-152">See Also</span></span>  
 <span data-ttu-id="1c590-153">[Journal des transactions &#40;SQL Server&#41;](../logs/the-transaction-log-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="1c590-153">[The Transaction Log &#40;SQL Server&#41;](../logs/the-transaction-log-sql-server.md) </span></span>  
 <span data-ttu-id="1c590-154">[Sauvegarde et restauration des bases de données SQL Server](back-up-and-restore-of-sql-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="1c590-154">[Back Up and Restore of SQL Server Databases](back-up-and-restore-of-sql-server-databases.md) </span></span>  
 <span data-ttu-id="1c590-155">[Sauvegardes de la fin du journal &#40;SQL Server&#41;](tail-log-backups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="1c590-155">[Tail-Log Backups &#40;SQL Server&#41;](tail-log-backups-sql-server.md) </span></span>  
 [<span data-ttu-id="1c590-156">Appliquer les sauvegardes du journal de transactions &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="1c590-156">Apply Transaction Log Backups &#40;SQL Server&#41;</span></span>](transaction-log-backups-sql-server.md)  
  
  
