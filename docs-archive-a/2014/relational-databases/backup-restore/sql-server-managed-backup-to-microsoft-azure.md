---
title: SQL Server la gestion de sauvegarde sur Azure | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: afa01165-39e0-4efe-ac0e-664edb8599fd
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 8fbe94eace1244b4e5f37b60848d47b69ecc8144
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87612985"
---
# <a name="sql-server-managed--backup-to-azure"></a><span data-ttu-id="d8e73-102">SQL Server la gestion de sauvegarde sur Azure</span><span class="sxs-lookup"><span data-stu-id="d8e73-102">SQL Server Managed  Backup to Azure</span></span>
  [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="d8e73-103">gère et automatise les sauvegardes SQL Server dans le service de stockage d’objets BLOB Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e73-103">manages and automates SQL Server backups to the Azure Blob storage service.</span></span> <span data-ttu-id="d8e73-104">La stratégie de sauvegarde utilisée par la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] est basée sur la période de rétention et la charge de travail transactionnelle sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-104">The backup strategy used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is based on the retention period and the transaction workload on the database.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="d8e73-105">prend en charge la restauration limitée dans le temps pour la période de rétention spécifiée.</span><span class="sxs-lookup"><span data-stu-id="d8e73-105">supports point in time restore for the retention time period specified.</span></span>   
<span data-ttu-id="d8e73-106">La [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] peut être activée au niveau de la base de données ou au niveau de l'instance pour gérer toutes les bases de données sur l'instance de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d8e73-106">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] can be enabled at the database level or at the instance level to manage all the databases on the instance of SQL Server.</span></span> <span data-ttu-id="d8e73-107">Les SQL Server peuvent s’exécuter localement ou dans des environnements hébergés comme la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e73-107">The SQL Server can be running on-premises or in hosted environments like the Azure virtual machine.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="d8e73-108">est recommandé pour les SQL Server s’exécutant sur des machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e73-108">is recommended for SQL Server running on Azure Virtual Machines.</span></span>  
  
## <a name="benefits-of-automating-sql-server-backup-using-ss_smartbackup"></a><span data-ttu-id="d8e73-109">Avantages de l'automatisation de la sauvegarde SQL Server à l'aide de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]</span><span class="sxs-lookup"><span data-stu-id="d8e73-109">Benefits of Automating SQL Server Backup Using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]</span></span>  
  
-   <span data-ttu-id="d8e73-110">Actuellement, l'automatisation des sauvegardes pour plusieurs bases de données requiert le développement d'une stratégie de sauvegarde, l'écriture d'un code personnalisé et la planification des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="d8e73-110">Currently automating backups for multiple databases requires developing a backup strategy, writing custom code, and scheduling backups.</span></span> <span data-ttu-id="d8e73-111">La [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] exige uniquement que vous indiquiez les paramètres de période de rétention et l'emplacement de stockage.</span><span class="sxs-lookup"><span data-stu-id="d8e73-111">Using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], you only are required provide the retention period settings and the storage location.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="d8e73-112">planifie, exécute et gère les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="d8e73-112">schedules, performs and maintains the backups.</span></span>  
  
     <span data-ttu-id="d8e73-113">La [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] peut être configurée au niveau de la base de données, ou avec les paramètres par défaut d'une instance de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d8e73-113">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] can be configured at the database level or at configured with default settings for an instance of SQL Server.</span></span> <span data-ttu-id="d8e73-114">L’automatisation de la sauvegarde à l’aide [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] de présente les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="d8e73-114">Automating backup using [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] has the following benefits:</span></span>  
  
    -   <span data-ttu-id="d8e73-115">En définissant les valeurs par défaut au niveau de l'instance, vous pouvez appliquer les paramètres de la stratégie à n'importe quelle base de données créée par la suite, supprimer le risque d'avoir de nouvelles bases de données non sauvegardées et de perte de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-115">By setting the defaults at the instance level, you can apply these settings to any database created thereafter, thus removing the risk of new databases not being backed up and data loss.</span></span>  
  
    -   <span data-ttu-id="d8e73-116">L'option d'activation de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] et la configuration de la période de rétention au niveau de la base de données vous permettent de remplacer le jeu de paramètres par défaut au niveau de l'instance.</span><span class="sxs-lookup"><span data-stu-id="d8e73-116">The option of enabling [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] and setting the retention period at the database level, allows you to override the default settings set at the instance level.</span></span> <span data-ttu-id="d8e73-117">Vous pouvez ainsi avoir un contrôle plus granulaire sur la récupération d'une base de données spécifique.</span><span class="sxs-lookup"><span data-stu-id="d8e73-117">This allows you to have more granular control on the recoverability for a specific database.</span></span>  
  
-   <span data-ttu-id="d8e73-118">Avec la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], vous n'avez pas besoin de spécifier le type ou la fréquence des sauvegardes pour une base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-118">With [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)], you do not have to specify the type or frequency of the backups for a database.</span></span>  <span data-ttu-id="d8e73-119">Vous spécifiez la période de rétention et [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] détermine le type et la fréquence des sauvegardes d’une base de données qui stocke les sauvegardes sur le service de stockage d’objets BLOB Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e73-119">You specify the retention period, and [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] determines the type and frequency of backups for a database stores the backups on Azure Blob storage service.</span></span> <span data-ttu-id="d8e73-120">Pour plus d’informations sur l’ensemble de critères que [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] utilise pour créer la stratégie de sauvegarde, consultez la section [composants et concepts](#Concepts) de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="d8e73-120">For more details on the set of criteria that [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] uses to create the backup strategy,, see the [Components and Concepts](#Concepts) section in this topic.</span></span>  
  
-   <span data-ttu-id="d8e73-121">Lorsque l'utilisation du chiffrement est configurée, vous disposez d'une protection supplémentaire pour les données de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="d8e73-121">When configured to use encryption, you have additional security for the backup data.</span></span> <span data-ttu-id="d8e73-122">Pour plus d’informations, consultez [chiffrement de sauvegarde](backup-encryption.md) .</span><span class="sxs-lookup"><span data-stu-id="d8e73-122">For more information, see [Backup Encryption](backup-encryption.md)</span></span>  
  
 <span data-ttu-id="d8e73-123">Pour plus d’informations sur les avantages de l’utilisation du stockage d’objets BLOB Azure pour les [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sauvegardes, consultez [SQL Server la sauvegarde et la restauration avec le service de stockage d’objets BLOB Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md)</span><span class="sxs-lookup"><span data-stu-id="d8e73-123">For more details on the benefits of using Azure Blob storage for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups, see [SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md)</span></span>  
  
## <a name="terms-and-definitions"></a><span data-ttu-id="d8e73-124">Termes et définitions</span><span class="sxs-lookup"><span data-stu-id="d8e73-124">Terms and Definitions</span></span>  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]  
 <span data-ttu-id="d8e73-125">Une fonctionnalité SQL Server qui automatise la sauvegarde de bases de données et administre les sauvegardes en fonction de la période de rétention.</span><span class="sxs-lookup"><span data-stu-id="d8e73-125">A SQL Server feature that automates database backup and maintains the backups based on the retention period.</span></span>  
  
 <span data-ttu-id="d8e73-126">Période de rétention</span><span class="sxs-lookup"><span data-stu-id="d8e73-126">Retention Period</span></span>  
 <span data-ttu-id="d8e73-127">La période de rétention est utilisée par la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] pour déterminer les fichiers de sauvegarde qui doivent être retenus dans le stockage pour restaurer une base de données à un point précis dans le temps au cours d'une période spécifiée.</span><span class="sxs-lookup"><span data-stu-id="d8e73-127">The retention period is used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] to determine what backup files should be retained in the storage in order to recover a database to a point in time within the time frame specified.</span></span>  <span data-ttu-id="d8e73-128">Les valeurs prises en charge s'échelonnent sur une plage de 1 à 30 jours.</span><span class="sxs-lookup"><span data-stu-id="d8e73-128">The supported values are in the range of 1-30 days.</span></span>  
  
 <span data-ttu-id="d8e73-129">Séquence de journaux de transactions consécutifs</span><span class="sxs-lookup"><span data-stu-id="d8e73-129">Log Chain</span></span>  
 <span data-ttu-id="d8e73-130">Une séquence continue de sauvegardes de journaux s'appelle une séquence de journaux de transactions consécutifs.</span><span class="sxs-lookup"><span data-stu-id="d8e73-130">A continuous sequence of log backups is called a log chain.</span></span> <span data-ttu-id="d8e73-131">Une séquence de journaux de transactions consécutifs commence par une sauvegarde complète de la base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-131">A log chain starts with a full backup of the database.</span></span>  
  
##  <a name="requirements-concepts-and-components"></a><a name="Concepts"></a><span data-ttu-id="d8e73-132">Spécifications, concepts et composants</span><span class="sxs-lookup"><span data-stu-id="d8e73-132">Requirements, Concepts, and Components</span></span>  
  
  
###  <a name="permissions"></a><a name="Security"></a> <span data-ttu-id="d8e73-133">Autorisations</span><span class="sxs-lookup"><span data-stu-id="d8e73-133">Permissions</span></span>  
 <span data-ttu-id="d8e73-134">Transact-SQL est l'interface principale utilisée pour configurer et surveiller la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-134">Transact-SQL is the main interface used to configure and monitor [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="d8e73-135">En général, pour exécuter les procédures stockées de configuration, **db_backupoperator** rôle de base de données avec les autorisations **ALTER ANY CREDENTIAL** et les `EXECUTE` autorisations sur **sp_delete_backuphistory** procédure stockée sont requis.</span><span class="sxs-lookup"><span data-stu-id="d8e73-135">In general, to run the configuration stored procedures, **db_backupoperator** database role with **ALTER ANY CREDENTIAL** permissions, and `EXECUTE` permissions on **sp_delete_backuphistory** stored procedure is required.</span></span>  <span data-ttu-id="d8e73-136">Les procédures stockées et les fonctions utilisées pour passer en revue les informations nécessitent généralement des autorisations `Execute` sur la procédure stockée et `Select` sur la fonction, respectivement.</span><span class="sxs-lookup"><span data-stu-id="d8e73-136">Stored procedures and functions used to review information typically require `Execute` permissions on the stored procedure and `Select` on the function respectively.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prereqs"></a> <span data-ttu-id="d8e73-137">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="d8e73-137">Prerequisites</span></span>  
 <span data-ttu-id="d8e73-138">**Configuration requise :**</span><span class="sxs-lookup"><span data-stu-id="d8e73-138">**Prerequisites:**</span></span>  
  
 <span data-ttu-id="d8e73-139">Le **service stockage Azure** est utilisé par [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] pour stocker les fichiers de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="d8e73-139">**Azure Storage service** is used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] to store the backup files.</span></span>    <span data-ttu-id="d8e73-140">Les concepts, la structure et la configuration requise pour la création d’un compte de stockage Azure sont expliqués en détail dans la section [Introduction aux composants clés et aux concepts](sql-server-backup-to-url.md#intorkeyconcepts) de la rubrique **SQL Server sauvegarde vers une URL** .</span><span class="sxs-lookup"><span data-stu-id="d8e73-140">The concepts, structure, and requirements for creating an Azure storage account is explained in detail in the [Introduction to Key Components and Concepts](sql-server-backup-to-url.md#intorkeyconcepts) section of the **SQL Server Backup to URL** topic.</span></span>  
  
 <span data-ttu-id="d8e73-141">Les informations **d’identification SQL** sont utilisées pour stocker les informations requises pour l’authentification auprès du compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e73-141">**SQL Credential** is used to store the information required to authenticate to the Azure storage account.</span></span> <span data-ttu-id="d8e73-142">L'objet contenant les informations d'identification SQL stocke le nom du compte et les informations de la clé d'accès.</span><span class="sxs-lookup"><span data-stu-id="d8e73-142">The SQL Credential object stores the account name and the access key information.</span></span> <span data-ttu-id="d8e73-143">Pour plus d’informations, consultez la section [Introduction to Key Components and concepts](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) dans la rubrique **SQL Server Backup to URL** .</span><span class="sxs-lookup"><span data-stu-id="d8e73-143">For more information, see the [Introduction to Key Components and Concepts](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) section in the **SQL Server Backup to URL** topic.</span></span> <span data-ttu-id="d8e73-144">Pour obtenir une procédure pas à pas sur la façon de créer des informations d’identification SQL pour stocker les informations d’authentification Azure Storage, consultez la [leçon 2 : créer des informations d’identification de SQL Server](../../tutorials/lesson-2-create-a-sql-server-credential.md).</span><span class="sxs-lookup"><span data-stu-id="d8e73-144">For a walkthrough on how to create a SQL Credential to store Azure Storage authentication information, see [Lesson 2: Create a SQL Server Credential](../../tutorials/lesson-2-create-a-sql-server-credential.md).</span></span>  
  
###  <a name="concepts-and-key-components"></a><a name="Concepts_Components"></a><span data-ttu-id="d8e73-145">Concepts et composants clés</span><span class="sxs-lookup"><span data-stu-id="d8e73-145">Concepts and Key Components</span></span>  
 <span data-ttu-id="d8e73-146">La [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] est une fonctionnalité qui gère les opérations de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="d8e73-146">The [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is a feature that manages the backup operations.</span></span> <span data-ttu-id="d8e73-147">Elle stocke les métadonnées dans la base de données **msdb** et utilise des travaux système pour écrire des sauvegardes complètes de la base de données et du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="d8e73-147">It stores the metadata in the **msdb** database and uses system jobs to write full database and transaction log backups.</span></span>  
  
#### <a name="components"></a><span data-ttu-id="d8e73-148">Components</span><span class="sxs-lookup"><span data-stu-id="d8e73-148">Components</span></span>  
 <span data-ttu-id="d8e73-149">Transact-SQL est l'interface principale utilisée pour interagir avec la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-149">Transact-SQL is the main interface to interact with [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="d8e73-150">Les procédures stockées système sont utilisées pour activer, configurer et surveiller la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-150">System stored procedures are used for enabling, configuring, and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="d8e73-151">Les fonctions système sont utilisées pour récupérer des paramètres de configuration existants, des valeurs de paramètre et des informations sur le fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="d8e73-151">System functions are used to retrieve existing configuration settings, parameter values, and backup file information.</span></span> <span data-ttu-id="d8e73-152">Les événements étendus sont utilisés pour exposer des erreurs et des avertissements.</span><span class="sxs-lookup"><span data-stu-id="d8e73-152">Extended events are used to surface errors and warnings.</span></span> <span data-ttu-id="d8e73-153">Les mécanismes d'alerte sont activés via les travaux SQL Agent et la gestion basées sur des stratégies SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d8e73-153">Alert mechanisms are enabled through SQL Agent jobs and SQL Server Policy Based Management.</span></span> <span data-ttu-id="d8e73-154">Voici la liste des objets et la description de leurs fonctionnalités en relation à la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-154">The following is a list of the objects and a description of its functionality in relation to [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>  
  
 <span data-ttu-id="d8e73-155">Des applets de commande PowerShell sont également disponibles pour configurer la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-155">PowerShell cmdlets are also available to configure [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="d8e73-156">SQL Server Management Studio prend en charge la restauration de sauvegardes créées par la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] à l'aide de la tâche **Restaurer la base de données** .</span><span class="sxs-lookup"><span data-stu-id="d8e73-156">SQL Server Management Studio supports restoring backups created by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] by using the **Restore Database** task</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="d8e73-157">Objet système</span><span class="sxs-lookup"><span data-stu-id="d8e73-157">System Object</span></span>|<span data-ttu-id="d8e73-158">Description</span><span class="sxs-lookup"><span data-stu-id="d8e73-158">Description</span></span>|  
|<span data-ttu-id="d8e73-159">**MSDB**</span><span class="sxs-lookup"><span data-stu-id="d8e73-159">**MSDB**</span></span>|<span data-ttu-id="d8e73-160">Stocke les métadonnées et l'historique de toutes les sauvegardes créées par la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-160">Stores the metadata, backup history for all the backups created by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|  
|<span data-ttu-id="d8e73-161">[smart_admin. set_db_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451013(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="d8e73-161">[smart_admin.set_db_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451013(v=sql.120).aspx)</span></span>|<span data-ttu-id="d8e73-162">Procédures stockées système pour activer et configurer la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] pour une base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-162">System stored procedure for enabling and configuring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for a database.</span></span>|  
|<span data-ttu-id="d8e73-163">[smart_admin. set_instance_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451009(v=sql.120).aspx)</span><span class="sxs-lookup"><span data-stu-id="d8e73-163">[smart_admin.set_instance_backup &#40;Transact-SQL&#41;](https://msdn.microsoft.com/library/dn451009(v=sql.120).aspx)</span></span>|<span data-ttu-id="d8e73-164">Procédure stockée système pour activer et configurer les paramètres par défaut [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] de l’instance SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d8e73-164">System stored procedure for enabling and configuring default settings [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for the SQL Server instance.</span></span>|  
|[<span data-ttu-id="d8e73-165">smart_admin. sp_ backup_master_switch &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-165">smart_admin.sp_ backup_master_switch &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-master-switch-transact-sql)|<span data-ttu-id="d8e73-166">Procédures stockées système pour interrompre et reprendre la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-166">System stored procedure to pause and resume [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|  
|[<span data-ttu-id="d8e73-167">smart_admin. sp_set_parameter &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-167">smart_admin.sp_set_parameter &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-set-parameter-transact-sql)|<span data-ttu-id="d8e73-168">Procédures stockées système pour activer et configurer la surveillance pour la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-168">System stored procedure to enable and configure monitoring for [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="d8e73-169">Exemples : activer les événements étendus, les paramètres de courrier électronique pour les notifications.</span><span class="sxs-lookup"><span data-stu-id="d8e73-169">Examples: enabling extended events, mail settings for notifications.</span></span>|  
|[<span data-ttu-id="d8e73-170">smart_admin. sp_backup_on_demand &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-170">smart_admin.sp_backup_on_demand &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-backup-on-demand-transact-sql)|<span data-ttu-id="d8e73-171">Procédure stockée système utilisée pour effectuer une sauvegarde ad hoc d’une base de données qui est activée pour utiliser [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] sans rompre la séquence de journaux.</span><span class="sxs-lookup"><span data-stu-id="d8e73-171">System stored procedure that is used to perform an ad-hoc backup for a database that is enabled to use [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] without breaking the log chain.</span></span>|  
|[<span data-ttu-id="d8e73-172">smart_admin. fn_backup_db_config &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-172">smart_admin.fn_backup_db_config &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-backup-db-config-transact-sql)|<span data-ttu-id="d8e73-173">Fonction système qui retourne l' [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] état actuel et les valeurs de configuration pour une base de données, ou pour toutes les bases de données sur l’instance.</span><span class="sxs-lookup"><span data-stu-id="d8e73-173">System function that returns the current [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] status and configuration values for a database, or for all the databases on the instance.</span></span>|  
|[<span data-ttu-id="d8e73-174">smart_admin. fn_is_master_switch_on &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-174">smart_admin.fn_is_master_switch_on &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-is-master-switch-on-transact-sql)|<span data-ttu-id="d8e73-175">Fonction système qui retourne l'état du commutateur principal.</span><span class="sxs-lookup"><span data-stu-id="d8e73-175">System function that returns the status of the master switch.</span></span>|  
|[<span data-ttu-id="d8e73-176">smart_admin. sp_get_backup_diagnostics &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-176">smart_admin.sp_get_backup_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/managed-backup-sp-get-backup-diagnostics-transact-sql)|<span data-ttu-id="d8e73-177">Procédure stockée système utilisée pour retourner les événements enregistrés par les événements étendus.</span><span class="sxs-lookup"><span data-stu-id="d8e73-177">System stored procedure used to return the events logged by Extended Events.</span></span>|  
|[<span data-ttu-id="d8e73-178">smart_admin. fn_get_parameter &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-178">smart_admin.fn_get_parameter &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-parameter-transact-sql)|<span data-ttu-id="d8e73-179">Fonction système qui retourne les valeurs actuelles des paramètres système de la sauvegarde comme les paramètres de surveillance et de courrier électronique pour les alertes.</span><span class="sxs-lookup"><span data-stu-id="d8e73-179">System function that returns the current values for backup system settings such as monitoring and mail settings for alerts.</span></span>|  
|[<span data-ttu-id="d8e73-180">smart_admin. fn_available_backups &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-180">smart_admin.fn_available_backups &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-available-backups-transact-sql)|<span data-ttu-id="d8e73-181">Procédure stockée utilisée pour récupérer les sauvegardes disponibles pour une base de données spécifiée ou pour toutes les bases de données dans une instance.</span><span class="sxs-lookup"><span data-stu-id="d8e73-181">Stored Procedure used to retrieve available backups for a specified database or for all the databases in an instance.</span></span>|  
|[<span data-ttu-id="d8e73-182">smart_admin. fn_get_current_xevent_settings &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-182">smart_admin.fn_get_current_xevent_settings &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-current-xevent-settings-transact-sql)|<span data-ttu-id="d8e73-183">Fonction système qui retourne les paramètres actuels des événements étendus.</span><span class="sxs-lookup"><span data-stu-id="d8e73-183">System function that returns the current extended event settings.</span></span>|  
|[<span data-ttu-id="d8e73-184">smart_admin. fn_get_health_status &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d8e73-184">smart_admin.fn_get_health_status &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-functions/managed-backup-fn-get-health-status-transact-sql)|<span data-ttu-id="d8e73-185">Fonction système qui retourne le décompte agrégé des erreurs enregistrées par les événements étendus pour une période spécifiée.</span><span class="sxs-lookup"><span data-stu-id="d8e73-185">System function that returns the aggregated counts of errors logged by Extended Events for a specified period.</span></span>|  
|[<span data-ttu-id="d8e73-186">Surveiller la sauvegarde managée de SQL Server vers Azure</span><span class="sxs-lookup"><span data-stu-id="d8e73-186">Monitor SQL Server Managed Backup to Azure</span></span>](sql-server-managed-backup-to-microsoft-azure.md)|<span data-ttu-id="d8e73-187">Événements étendus pour la surveillance, notifications par message électronique des erreurs et avertissements, gestion basée sur une stratégie SQL Server pour la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-187">Extended Events for monitoring, email notification of errors and warnings, SQL Server Policy Based Management for [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span></span>|  
  
#### <a name="backup-strategy"></a><span data-ttu-id="d8e73-188">Stratégie de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="d8e73-188">Backup Strategy</span></span>  
 <span data-ttu-id="d8e73-189">**Stratégie de sauvegarde utilisée par [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] :**</span><span class="sxs-lookup"><span data-stu-id="d8e73-189">**Backup Strategy used by [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]:**</span></span>  
  
 <span data-ttu-id="d8e73-190">Le type des sauvegardes planifiées et leur fréquence sont déterminés en fonction de la charge de travail de la base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-190">The type of backups scheduled and the backup frequency is determined based on the workload of the database.</span></span> <span data-ttu-id="d8e73-191">Les paramètres de période de rétention sont utilisés pour déterminer la période pendant laquelle un fichier de sauvegarde doit être retenu dans le stockage et la capacité à restaurer une base de données à un point précis dans le temps au cours de la période de rétention.</span><span class="sxs-lookup"><span data-stu-id="d8e73-191">The retention period settings are used to determine the length of time a backup file should be retained in the storage and the ability to recover the database to a point-in-time within the retention period.</span></span>  
  
 <span data-ttu-id="d8e73-192">**Conventions d'affectation des noms du conteneur et des fichiers de sauvegarde**</span><span class="sxs-lookup"><span data-stu-id="d8e73-192">**Backup Container and File Naming Conventions:**</span></span>  
  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]<span data-ttu-id="d8e73-193">nomme le conteneur de stockage Azure à l’aide du nom d’instance SQL Server pour toutes les bases de données, à l’exception des bases de données de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d8e73-193">names the Azure storage container using the SQL Server Instance Name for all databases except availability databases.</span></span>  <span data-ttu-id="d8e73-194">Pour les bases de données de disponibilité, le GUID du groupe de disponibilité est utilisé pour nommer le conteneur de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e73-194">For availability databases, the Availability Group GUID is used to name the Azure storage container.</span></span>  
  
 <span data-ttu-id="d8e73-195">Le fichier de sauvegarde pour les bases de données non disponibles est nommé à l’aide de la Convention suivante : le nom est créé en utilisant les 40 premiers caractères du nom de la base de données, le GUID de la base de données sans le caractère « - » et l’horodateur.</span><span class="sxs-lookup"><span data-stu-id="d8e73-195">The backup file for non availability databases are named using the following convention: The name is created using the first 40 characters of the database name, the database GUID without the '-', and the timestamp.</span></span> <span data-ttu-id="d8e73-196">Le caractère de soulignement est inséré entre les segments comme délimiteurs.</span><span class="sxs-lookup"><span data-stu-id="d8e73-196">The underscore character is inserted between segments as separators.</span></span> <span data-ttu-id="d8e73-197">L'extension **.bak** est utilisée pour le fichier en cas de sauvegarde complète et l'extension **.log** est utilisée pour les sauvegardes de journal.</span><span class="sxs-lookup"><span data-stu-id="d8e73-197">The **.bak** file extension is used for full backup and **.log** for log backups.</span></span> <span data-ttu-id="d8e73-198">Pour les bases de données d'un groupe de disponibilité, en plus de la convention d'attribution de noms décrite ci-dessus, le GUID de la base de données du groupe de disponibilité est ajouté après les 40 caractères du nom de la base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-198">For Avaialbility Group databases, in addition to the file naming convention described above, the Availability Group database GUID is added after the 40 characters of the database name.</span></span> <span data-ttu-id="d8e73-199">La valeur du GUID de la base de données du groupe de disponibilité est la valeur de group_database_id dans sys.databases.</span><span class="sxs-lookup"><span data-stu-id="d8e73-199">The Availability Group database GUID value is the value for group_database_id in sys.databases.</span></span>  
  
 <span data-ttu-id="d8e73-200">**Sauvegarde complète de base de données :** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] agent planifie une sauvegarde de base de données complète si l’une des conditions suivantes est vraie.</span><span class="sxs-lookup"><span data-stu-id="d8e73-200">**Full Database Backup:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] agent schedules a full database backup if any of the following is true.</span></span>  
  
-   <span data-ttu-id="d8e73-201">La [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] est activée sur une base de données pour la première fois, ou la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] est activée avec les paramètres par défaut au niveau de l'instance.</span><span class="sxs-lookup"><span data-stu-id="d8e73-201">A database is [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] enabled for the first time, or when [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is enabled with default settings at the instance level.</span></span>  
  
-   <span data-ttu-id="d8e73-202">La taille du journal depuis la dernière sauvegarde de base de données complète est égale ou supérieure à 1 Go.</span><span class="sxs-lookup"><span data-stu-id="d8e73-202">The log growth since last full database backup is equal to or larger than 1 GB.</span></span>  
  
-   <span data-ttu-id="d8e73-203">L'intervalle maximum d'une semaine est dépassé depuis la dernière sauvegarde de base de données complète.</span><span class="sxs-lookup"><span data-stu-id="d8e73-203">The maximum time interval of one week has passed since the last full database backup.</span></span>  
  
-   <span data-ttu-id="d8e73-204">La séquence de journaux de transactions consécutifs est rompue.</span><span class="sxs-lookup"><span data-stu-id="d8e73-204">The log chain is broken.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="d8e73-205">vérifie périodiquement si la séquence de journaux de transactions consécutifs est intacte en comparant le premier et le dernier LSN des fichiers de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="d8e73-205">periodically checks to see whether the log chain is intact by comparing the first and last LSNs of the backup files.</span></span> <span data-ttu-id="d8e73-206">Si la séquence de journaux de transactions consécutifs est rompue pour un motif quelconque, la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] planifie une sauvegarde de base de données complète.</span><span class="sxs-lookup"><span data-stu-id="d8e73-206">If there is break in the log chain for any reason, [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] schedules a full database backup.</span></span> <span data-ttu-id="d8e73-207">Le motif le plus fréquent d'une rupture de la séquence de journaux de transactions consécutifs est le plus souvent une commande de sauvegarde émise à l'aide de Transact-SQL ou via la tâche de sauvegarde dans SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="d8e73-207">The most common reason for log chain breaks is probably a backup command issued using Transact-SQL or through the Backup task in SQL Server Management Studio.</span></span>  <span data-ttu-id="d8e73-208">D'autres scénarios communs sont la suppression accidentelle des fichiers journaux de sauvegarde ou le remplacement accidentel des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="d8e73-208">Other common scenarios include accidental deletion of the backup log files, or accidental overwrites of backups.</span></span>  
  
 <span data-ttu-id="d8e73-209">**Sauvegarde du journal des transactions :** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] planifie une sauvegarde de journal si l’une des conditions suivantes est vraie :</span><span class="sxs-lookup"><span data-stu-id="d8e73-209">**Transaction Log Backup:** [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] schedules a log backup if any of the following is true:</span></span>  
  
-   <span data-ttu-id="d8e73-210">L'historique des sauvegardes de journaux est introuvable.</span><span class="sxs-lookup"><span data-stu-id="d8e73-210">There is no log backup history that can be found.</span></span> <span data-ttu-id="d8e73-211">Cela se produit habituellement lorsque la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] est activée la première fois.</span><span class="sxs-lookup"><span data-stu-id="d8e73-211">This is usually true when [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] is enabled for the first time.</span></span>  
  
-   <span data-ttu-id="d8e73-212">L'espace du journal des transactions utilisé dépasse 5 Mo.</span><span class="sxs-lookup"><span data-stu-id="d8e73-212">The transaction log space used is 5 MB or larger.</span></span>  
  
-   <span data-ttu-id="d8e73-213">L'intervalle maximum de 2 heures est dépassé depuis la dernière sauvegarde de journal.</span><span class="sxs-lookup"><span data-stu-id="d8e73-213">The maximum time interval of 2 hours since the last log backup is reached.</span></span>  
  
-   <span data-ttu-id="d8e73-214">Lorsque la sauvegarde du journal des transactions traîne derrière une sauvegarde complète de la base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-214">Any time the transaction log backup is lagging behind a full database backup.</span></span> <span data-ttu-id="d8e73-215">Le but est de conserver la séquence de journaux de transactions consécutifs avant la sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="d8e73-215">The goal is to keep the log chain ahead of full backup.</span></span>  
  
#### <a name="retention-period-settings"></a><span data-ttu-id="d8e73-216">Paramètres de période de rétention</span><span class="sxs-lookup"><span data-stu-id="d8e73-216">Retention Period Settings</span></span>  
 <span data-ttu-id="d8e73-217">Lorsque vous configurez la sauvegarde, vous devez définir la période de rétention en jours : 1 jour minimum et 30 jours maximum.</span><span class="sxs-lookup"><span data-stu-id="d8e73-217">When enabling backup you must set the retention period in days: The minimum is 1 day, and maximum is 30 days.</span></span>  
  
 [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="d8e73-218">, en fonction des paramètres de la période de rétention, évalue la capacité à restaurer une base de données à un point précis dans le temps au cours de la période de rétention pour déterminer quels sont les fichiers de sauvegarde à conserver et quels sont ceux à supprimer.</span><span class="sxs-lookup"><span data-stu-id="d8e73-218">based on the retention period settings, assesses the ability to recover to a point in time in the specified time, to determine what backup files to keep and identifying the backup files to delete.</span></span> <span data-ttu-id="d8e73-219">Le paramètre backup_finish_date de la sauvegarde est utilisé pour déterminer et vérifier la durée spécifiée dans les paramètres de la période de rétention.</span><span class="sxs-lookup"><span data-stu-id="d8e73-219">The backup_finish_date of the backup is used to determine and match the time specified by the retention period settings.</span></span>  
  
#### <a name="important-considerations"></a><span data-ttu-id="d8e73-220">Éléments importants à prendre en considération</span><span class="sxs-lookup"><span data-stu-id="d8e73-220">Important Considerations</span></span>  
 <span data-ttu-id="d8e73-221">Certains éléments doivent être pris en considération, car ils ont un impact important sur les opérations de [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-221">There are some considerations that are important to understand their impact on [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] operations.</span></span> <span data-ttu-id="d8e73-222">Ils sont répertoriés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="d8e73-222">They are listed below:</span></span>  
  
-   <span data-ttu-id="d8e73-223">Pour une base de données, si un travail de sauvegarde complète de base de données est en cours, la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] attend la fin du travail avant d'effectuer une autre sauvegarde complète de la même base de données.</span><span class="sxs-lookup"><span data-stu-id="d8e73-223">For a database, if there is an existing full database backup job running, then [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] waits for the current job to be completed before doing another full database backup for the same database.</span></span> <span data-ttu-id="d8e73-224">De même, une seule sauvegarde de journal de transactions peut être exécutée à la fois.</span><span class="sxs-lookup"><span data-stu-id="d8e73-224">Similarly, only one transaction log backup can be running at a given time.</span></span> <span data-ttu-id="d8e73-225">Toutefois, une sauvegarde de base de données complète et une sauvegarde de journal peuvent s'exécuter simultanément.</span><span class="sxs-lookup"><span data-stu-id="d8e73-225">However, a full database backup and a transaction log backup can run concurrently.</span></span> <span data-ttu-id="d8e73-226">Les échecs sont enregistrés en tant qu'événements étendus.</span><span class="sxs-lookup"><span data-stu-id="d8e73-226">Failures are logged as Extended Events.</span></span>  
  
-   <span data-ttu-id="d8e73-227">Si plus de 10 sauvegardes de base de données complètes sont planifiées simultanément, un avertissement est généré au moyen du canal de débogage des événements étendus.</span><span class="sxs-lookup"><span data-stu-id="d8e73-227">If more than 10 concurrent full database backups are scheduled, a warning is issued through the debug channel of Extended Events.</span></span> [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="d8e73-228">met alors en file d'attente les bases de données qui restent à sauvegarder, jusqu'à ce que toutes les sauvegardes soient planifiées et terminées.</span><span class="sxs-lookup"><span data-stu-id="d8e73-228">then maintains a priority queue for the remaining databases that require a backup until the all backups are scheduled and completed.</span></span>  
  
###  <a name="support-limitations"></a><span data-ttu-id="d8e73-229">Limitations de la prise en charge <a name="support_limits"></a></span><span class="sxs-lookup"><span data-stu-id="d8e73-229"><a name="support_limits"></a> Support Limitations</span></span>  
 <span data-ttu-id="d8e73-230">Voici quelques limitations spécifiques à [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="d8e73-230">The following are some limitations specific to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]:</span></span>  
  
-   <span data-ttu-id="d8e73-231">L'agent de [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] prend en charge les sauvegardes complètes de base de données et les sauvegardes de fichier journal uniquement.</span><span class="sxs-lookup"><span data-stu-id="d8e73-231">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] agent supports database backups only: Full and Log Backups.</span></span>  <span data-ttu-id="d8e73-232">La sauvegarde automatique de fichier n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="d8e73-232">File backup automation is not supported.</span></span>  
  
-   <span data-ttu-id="d8e73-233">Les opérations de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] sont actuellement prises en charge à l'aide de Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="d8e73-233">[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] operations are currently supported using Transact-SQL.</span></span> <span data-ttu-id="d8e73-234">La surveillance et le dépannage peuvent être effectués à l'aide d'événements étendus.</span><span class="sxs-lookup"><span data-stu-id="d8e73-234">Monitoring and troubleshooting can be done by using Extended Events.</span></span> <span data-ttu-id="d8e73-235">La prise en charge de PowerShell et SMO est limitée à la configuration des paramètres par défaut du stockage et de la période de rétention pour une instance de SQL Server, et à la surveillance de l'état de la sauvegarde et de l'état d'intégrité général en fonction des stratégies de gestion basée sur des stratégies SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d8e73-235">PowerShell and SMO support is limited to configuring storage and retention period default settings for an instance of SQL Server, and monitoring the backup status and overall health based on SQL Server Policy Based Management policies.</span></span>  
  
-   <span data-ttu-id="d8e73-236">Les bases de données système ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="d8e73-236">System Databases are not supported.</span></span>  
  
-   <span data-ttu-id="d8e73-237">Le service de stockage d’objets BLOB Azure est la seule option de stockage de sauvegarde prise en charge.</span><span class="sxs-lookup"><span data-stu-id="d8e73-237">Azure Blob Storage service is the only supported backup storage option.</span></span> <span data-ttu-id="d8e73-238">Les sauvegardes sur disque ou sur bande ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="d8e73-238">Backups to disk or tape are not supported.</span></span>  
  
-   <span data-ttu-id="d8e73-239">Actuellement, la taille de fichier maximale autorisée pour un objet blob de pages dans le stockage Azure est de 1 to.</span><span class="sxs-lookup"><span data-stu-id="d8e73-239">Currently, the maximum file size allowed for a Page Blob in Azure Storage is 1 TB.</span></span> <span data-ttu-id="d8e73-240">Les fichiers de sauvegarde d'une taille supérieure à 1 To échouent.</span><span class="sxs-lookup"><span data-stu-id="d8e73-240">Backup files larger than 1 TB will fail.</span></span> <span data-ttu-id="d8e73-241">Afin d'éviter cette situation, nous vous recommandons, pour les bases de données de grande taille, d'utiliser la compression et de tester la taille du fichier de sauvegarde avant de configurer la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-241">In order to avoid this situation, we recommend that for large databases, use compression and test the backup file size prior to setting up [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="d8e73-242">Vous pouvez effectuer un test en sauvegardant sur un disque local ou en sauvegardant manuellement sur le stockage Azure à l’aide de l' `BACKUP TO URL` instruction Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="d8e73-242">You can either test by backing up to a local disk or manually backing up to Azure storage using `BACKUP TO URL` Transact-SQL statement.</span></span> <span data-ttu-id="d8e73-243">Pour plus d’informations, consultez [SQL Server Backup to URL](sql-server-backup-to-url.md).</span><span class="sxs-lookup"><span data-stu-id="d8e73-243">For more information, see [SQL Server Backup to URL](sql-server-backup-to-url.md).</span></span>  
  
-   <span data-ttu-id="d8e73-244">Modèles de récupération : seules les bases de données en mode de récupération complète ou en mode de récupération utilisant les journaux de transactions sont prises en charge.</span><span class="sxs-lookup"><span data-stu-id="d8e73-244">Recovery Models: Only databases set to Full or Bulk-logged model are supported.</span></span>  <span data-ttu-id="d8e73-245">Les bases de données utilisant le mode de récupération simple ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="d8e73-245">Databases set to simple recovery model are not supported.</span></span>  
  
-   [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] <span data-ttu-id="d8e73-246">peut avoir d'autres limitations lorsqu'elle est configurée avec d'autres technologies prenant en charge la sauvegarde, la haute disponibilité ou la récupération d'urgence.</span><span class="sxs-lookup"><span data-stu-id="d8e73-246">may have some limitations when it is configured with other technologies supporting backup, high availability, or disaster recovery.</span></span> <span data-ttu-id="d8e73-247">Pour plus d’informations, consultez [SQL Server la gestion de sauvegarde sur Azure : interopérabilité et coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md).</span><span class="sxs-lookup"><span data-stu-id="d8e73-247">For more information, see [SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="d8e73-248">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="d8e73-248">Related Tasks</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="d8e73-249">**Descriptions des tâches**</span><span class="sxs-lookup"><span data-stu-id="d8e73-249">**Task descriptions**</span></span>|<span data-ttu-id="d8e73-250">**Rubrique**</span><span class="sxs-lookup"><span data-stu-id="d8e73-250">**Topic**</span></span>|  
|<span data-ttu-id="d8e73-251">Tâches de base telles que la configuration de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] pour une base de données, ou la configuration des paramètres par défaut au niveau de l'instance, la désactivation de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] au niveau de l'instance ou de la base de données, l'interruption et la reprise de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-251">Basic tasks like configuring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for a database, or configuring default settings at the instance level, disabling [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] at instance or database level, pausing and restarting [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="d8e73-252">Sauvegarde managée SQL Server sur Azure : Paramètres de conservation et de stockage</span><span class="sxs-lookup"><span data-stu-id="d8e73-252">SQL Server Managed Backup to Azure - Retention and Storage Settings</span></span>](../../database-engine/sql-server-managed-backup-to-windows-azure-retention-and-storage-settings.md)|  
|<span data-ttu-id="d8e73-253">**Didacticiel :** Instructions pas à pas pour la configuration et la surveillance [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="d8e73-253">**Tutorial:** Step by Step instructions to configuring and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="d8e73-254">Configuration de la sauvegarde managée SQL Server sur Azure</span><span class="sxs-lookup"><span data-stu-id="d8e73-254">Setting up SQL Server Managed Backup to Azure</span></span>](enable-sql-server-managed-backup-to-microsoft-azure.md)|  
|<span data-ttu-id="d8e73-255">**Didacticiel :** Instructions pas à pas pour la configuration et la surveillance [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] des bases de données dans le groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d8e73-255">**Tutorial:** Step by Step instructions to configuring and monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] for databases in Availability Group.</span></span>|[<span data-ttu-id="d8e73-256">Configuration de la sauvegarde managée de SQL Server sur Azure pour les groupes de disponibilité</span><span class="sxs-lookup"><span data-stu-id="d8e73-256">Setting up SQL Server Managed Backup to Azure for Availability Groups</span></span>](../../database-engine/setting-up-sql-server-managed-backup-to-windows-azure-for-availability-groups.md)|  
|<span data-ttu-id="d8e73-257">Outils, concepts et tâches relatifs à la surveillance de la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-257">Tools and Concepts and tasks related to monitoring [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)] .</span></span>|[<span data-ttu-id="d8e73-258">Surveiller la sauvegarde managée de SQL Server vers Azure</span><span class="sxs-lookup"><span data-stu-id="d8e73-258">Monitor SQL Server Managed Backup to Azure</span></span>](sql-server-managed-backup-to-microsoft-azure.md)|  
|<span data-ttu-id="d8e73-259">Outils et étapes pour dépanner la [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d8e73-259">Tools and steps to troubleshooting [!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)].</span></span>|[<span data-ttu-id="d8e73-260">Résolution des problèmes SQL Server la gestion de sauvegarde sur Azure</span><span class="sxs-lookup"><span data-stu-id="d8e73-260">Troubleshooting SQL Server Managed  Backup to Azure</span></span>](../../database-engine/troubleshooting-sql-server-managed-backup-to-windows-azure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="d8e73-261">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d8e73-261">See Also</span></span>  
 <span data-ttu-id="d8e73-262">[SQL Server la sauvegarde et la restauration avec le service de stockage d’objets BLOB Azure](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) </span><span class="sxs-lookup"><span data-stu-id="d8e73-262">[SQL Server Backup and Restore with Azure Blob Storage Service](sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service.md) </span></span>  
 <span data-ttu-id="d8e73-263">[SQL Server la sauvegarde vers l’URL](sql-server-backup-to-url.md) </span><span class="sxs-lookup"><span data-stu-id="d8e73-263">[SQL Server Backup to URL](sql-server-backup-to-url.md) </span></span>  
 <span data-ttu-id="d8e73-264">[SQL Server la gestion de sauvegarde sur Azure : interopérabilité et coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) </span><span class="sxs-lookup"><span data-stu-id="d8e73-264">[SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) </span></span>  
 [<span data-ttu-id="d8e73-265">Résolution des problèmes SQL Server la gestion de sauvegarde sur Azure</span><span class="sxs-lookup"><span data-stu-id="d8e73-265">Troubleshooting SQL Server Managed  Backup to Azure</span></span>](../../database-engine/troubleshooting-sql-server-managed-backup-to-windows-azure.md)  
  
  
