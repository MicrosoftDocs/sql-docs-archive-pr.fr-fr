---
title: Instructions et limitations de codes XML (SQLXML 4,0) | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- updategrams [SQLXML], about updategrams
ms.assetid: b5231859-14e2-4276-bc17-db2817b6f235
author: rothja
ms.author: jroth
ms.openlocfilehash: 6e01e366edc2889691862de639f69220ac4bb439
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87700872"
---
# <a name="guidelines-and-limitations-of-xml-updategrams-sqlxml-40"></a><span data-ttu-id="bce3e-102">Règles et limitations des codes de mise à jour XML (SQLXML 4.0)</span><span class="sxs-lookup"><span data-stu-id="bce3e-102">Guidelines and Limitations of XML Updategrams (SQLXML 4.0)</span></span>
  <span data-ttu-id="bce3e-103">Tenez compte des éléments suivants lorsque vous utilisez des codes de mise à jour (updategrams) XML :</span><span class="sxs-lookup"><span data-stu-id="bce3e-103">Remember the following when using XML updategrams:</span></span>  
  
-   <span data-ttu-id="bce3e-104">Si vous utilisez un mise à jour pour une opération d’insertion avec une seule paire de **\<before>** blocs et **\<after>** , le **\<before>** bloc peut être omis.</span><span class="sxs-lookup"><span data-stu-id="bce3e-104">If you are using an updategram for an insert operation with only a single pair of **\<before>** and **\<after>** blocks, the **\<before>** block can be omitted.</span></span> <span data-ttu-id="bce3e-105">À l’inverse, dans le cas d’une opération de suppression, le **\<after>** bloc peut être omis.</span><span class="sxs-lookup"><span data-stu-id="bce3e-105">Conversely, in case of a delete operation, the **\<after>** block can be omitted.</span></span>  
  
-   <span data-ttu-id="bce3e-106">Si vous utilisez un mise à jour avec plusieurs **\<before>** blocs et **\<after>** dans la **\<sync>** balise, les blocs **\<before>** et les **\<after>** blocs doivent être spécifiés pour former **\<before>** et les **\<after>** paires.</span><span class="sxs-lookup"><span data-stu-id="bce3e-106">If you are using an updategram with multiple **\<before>** and **\<after>** blocks in the **\<sync>** tag, both **\<before>** blocks and **\<after>** blocks must be specified to form **\<before>** and **\<after>** pairs.</span></span>  
  
-   <span data-ttu-id="bce3e-107">Les mises à jour dans un code de mise à jour sont appliquées à la vue XML fournie avec le schéma XML.</span><span class="sxs-lookup"><span data-stu-id="bce3e-107">The updates in an updategram are applied to the XML view that is provided by the XML schema.</span></span> <span data-ttu-id="bce3e-108">Par conséquent, pour que le mappage par défaut soit un succès, vous devez spécifier le nom du fichier de schéma dans le code de mise à jour ou, si le nom de fichier n'est pas fourni, les noms d'élément et d'attribut doivent correspondre aux noms de table et de colonne dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="bce3e-108">Therefore, for the default mapping to succeed either you must specify the schema file name in the updategram or, if the file name is not provided, the element and attribute names must match the table and column names in the database.</span></span>  
  
-   <span data-ttu-id="bce3e-109">SQLXML 4.0 nécessite que toutes les valeurs de colonne dans un code de mise à jour soient explicitement mappées dans le schéma (XDR ou XSD) fourni pour composer la vue XML de ses éléments enfants.</span><span class="sxs-lookup"><span data-stu-id="bce3e-109">SQLXML 4.0 requires that all column values in an updategram must be explicitly mapped in the schema (either XDR or XSD) provided to compose the XML view for its child elements.</span></span> <span data-ttu-id="bce3e-110">Ce comportement diffère des versions antérieures de SQLXML dans lesquelles la valeur d'une colonne non mappée dans le schéma était autorisée si elle appartenait implicitement à la clé étrangère dans une annotation `sql:relationship`.</span><span class="sxs-lookup"><span data-stu-id="bce3e-110">This behavior differs from earlier versions of SQLXML, which allowed a value for a column not mapped in the schema if it was implied as part of the foreign Key in a `sql:relationship` annotation.</span></span> <span data-ttu-id="bce3e-111">Notez que ce changement n'affecte pas la propagation des valeurs de clé primaire dans les éléments enfants qui a toujours lieu dans SQLXML 4.0 si aucune valeur n'est explicitement spécifiée pour l'élément enfant.</span><span class="sxs-lookup"><span data-stu-id="bce3e-111">(Note that this change does not affect propagation of primary key values to child elements, which still occurs for SQLXML 4.0 if no value is explicitly specified for the child element.</span></span>  
  
-   <span data-ttu-id="bce3e-112">Si vous utilisez un mise à jour pour modifier des données dans une colonne binaire (telle que le [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] `image` type de données), vous devez fournir un schéma de mappage dans lequel le [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] type de données (par exemple, `sql:datatype="image"` ) et le type de données XML (par exemple, `dt:type="binhex"` ou `dt:type="binbase64` ) doivent être spécifiés.</span><span class="sxs-lookup"><span data-stu-id="bce3e-112">If you are using an updategram to modify data in a binary column (such as the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] `image` data type), you must provide a mapping schema in which the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] data type (for example, `sql:datatype="image"`) and the XML data type (for example, `dt:type="binhex"` or `dt:type="binbase64`) must be specified.</span></span> <span data-ttu-id="bce3e-113">Les données de la colonne binaire doivent être spécifiées dans le code de mise à jour ; l'annotation `sql:url-encode` spécifiée dans le schéma de mappage est ignorée par le code de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="bce3e-113">The data for the binary column must be specified in the updategram; the `sql:url-encode` annotation that is specified in the mapping schema is ignored by the updategram.</span></span>  
  
-   <span data-ttu-id="bce3e-114">Lorsque vous écrivez un schéma XSD, si la valeur que vous spécifiez pour l'annotation `sql:relation` ou `sql:field` inclut un caractère spécial, tel qu'un espace (par exemple, dans le nom de la table « Détails des commandes »), cette valeur doit apparaître entre crochets (par exemple, « [Détails des commandes] »).</span><span class="sxs-lookup"><span data-stu-id="bce3e-114">When you are writing an XSD schema, if the value you specify for the `sql:relation` or `sql:field` annotation includes a special character, such as a space character (for example, in the "Order Details" table name), this value must be enclosed in brackets (for example, "[Order Details]").</span></span>  
  
-   <span data-ttu-id="bce3e-115">Lors de l'utilisation de codes de mise à jour, les relations de chaîne ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="bce3e-115">When using updategrams, chain relationships are not supported.</span></span> <span data-ttu-id="bce3e-116">Par exemple, si les tables A et C sont liées par une relation de chaîne qui utilise la table B, l'erreur suivante survient lorsque vous tentez d'exécuter le code de mise à jour :</span><span class="sxs-lookup"><span data-stu-id="bce3e-116">For example, if tables A and C are related through a chain relationship that uses table B, the following error will occur when attempting to run and execute the updategram:</span></span>  
  
    ```  
    There is an inconsistency in the schema provided.  
    ```  
  
     <span data-ttu-id="bce3e-117">Même si le schéma et le code de mise à jour à la fois apparaissent corrects et formés comme il se doit, cette erreur se produira s'il existe une relation de chaîne.</span><span class="sxs-lookup"><span data-stu-id="bce3e-117">Even if both schema and updategram are otherwise correct and validly formed, this error will occur if a chain relationship is present.</span></span>  
  
-   <span data-ttu-id="bce3e-118">Les codes de mise à jour n'autorisent pas le passage de données de type `image` en guise de paramètres lors des mises à jour.</span><span class="sxs-lookup"><span data-stu-id="bce3e-118">Updategrams do not permit the passing of `image` type data as parameters during updates.</span></span>  
  
-   <span data-ttu-id="bce3e-119">Les types d’objets BLOB (Binary Large Object) tels que `text/ntext` et les images ne doivent pas être utilisés dans le **\<before>** bloc dans lors de l’utilisation de codes, car cela les inclura pour une utilisation dans le contrôle d’accès concurrentiel.</span><span class="sxs-lookup"><span data-stu-id="bce3e-119">Binary large object (BLOB) types like `text/ntext` and images should not be used in the **\<before>** block in when working with updategrams, because this will include them for use in concurrency control.</span></span> <span data-ttu-id="bce3e-120">Cela peut entraîner des problèmes avec [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] en raison des limitations sur la comparaison pour les types BLOB.</span><span class="sxs-lookup"><span data-stu-id="bce3e-120">This can cause problems with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] because of the limitations on comparison for BLOB types.</span></span> <span data-ttu-id="bce3e-121">Par exemple, le mot clé LIKE est utilisé dans la clause WHERE pour effectuer une comparaison entre les colonnes du type de données `text` ; toutefois, les comparaisons échouent dans le cas de types BLOB lorsque la taille des données dépasse 8 Ko.</span><span class="sxs-lookup"><span data-stu-id="bce3e-121">For example, the LIKE keyword is used in the WHERE clause for comparing between columns of the `text` data type; however, comparisons will fail in the case of BLOB types where the size of the data is greater than 8K.</span></span>  
  
-   <span data-ttu-id="bce3e-122">Les caractères spéciaux dans les données `ntext` peuvent entraîner des problèmes avec SQLXML 4.0 en raison des limitations sur la comparaison pour les types BLOB.</span><span class="sxs-lookup"><span data-stu-id="bce3e-122">Special characters in `ntext` data can cause problems with SQLXML 4.0 because of the limitations on comparison for BLOB types.</span></span> <span data-ttu-id="bce3e-123">Par exemple, l’utilisation de « [Serializable] » dans le **\<before>** bloc d’un codes lorsqu’il est utilisé dans le contrôle d’accès concurrentiel d’une colonne de `ntext` type échoue avec la description d’erreur SQLOLEDB suivante :</span><span class="sxs-lookup"><span data-stu-id="bce3e-123">For example, the use of "[Serializable]" in the **\<before>** block of an updategrams when used in concurrency checking of a column of `ntext` type will fail with the following SQLOLEDB error description:</span></span>  
  
    ```  
    Empty update, no updatable rows found   Transaction aborted  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="bce3e-124">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bce3e-124">See Also</span></span>  
 [<span data-ttu-id="bce3e-125">Considérations sur la sécurité mise à jour &#40;SQLXML 4,0&#41;</span><span class="sxs-lookup"><span data-stu-id="bce3e-125">Updategram Security Considerations &#40;SQLXML 4.0&#41;</span></span>](../security/updategram-security-considerations-sqlxml-4-0.md)  
  
  
