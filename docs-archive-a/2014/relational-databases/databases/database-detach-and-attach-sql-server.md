---
title: Attacher et détacher une base de données (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- upgrading databases
- databases [SQL Server], detaching
- detach database [SQL Server]
- databases [SQL Server], attaching
- removing databases
- transaction logs [SQL Server], detaching
- databases [SQL Server], removing
- restoring [SQL Server], attached databases
- transaction logs [SQL Server], attaching
- differential backups, after detaching
- moving databases
- attach database [SQL Server]
- detaching databases [SQL Server]
- differential base [SQL Server]
- attaching databases [SQL Server]
- databases [SQL Server], moving
ms.assetid: d0de0639-bc54-464e-98b1-6af22a27eb86
author: stevestein
ms.author: sstein
ms.openlocfilehash: 54eeeec995e390b71ce8871b680c26138fc88783
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87604566"
---
# <a name="database-detach-and-attach-sql-server"></a><span data-ttu-id="7e254-102">Attacher et détacher une base de données (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="7e254-102">Database Detach and Attach (SQL Server)</span></span>
  <span data-ttu-id="7e254-103">Les données et les journaux de transactions d'une base de données peuvent être détachés, puis rattachés à la même instance ou à une autre instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7e254-103">The data and transaction log files of a database can be detached and then reattached to the same or another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7e254-104">Le détachement et l'attachement d'une base de données sont utiles pour transférer la base de données dans une instance différente de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sur le même ordinateur ou pour la déplacer.</span><span class="sxs-lookup"><span data-stu-id="7e254-104">Detaching and attaching a database is useful if you want to change the database to a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on the same computer or to move the database.</span></span>  
  
 <span data-ttu-id="7e254-105">Le format de stockage sur disque de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est le même dans les environnements 64 bits et 32 bits.</span><span class="sxs-lookup"><span data-stu-id="7e254-105">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on-disk storage format is the same in the 64-bit and 32-bit environments.</span></span> <span data-ttu-id="7e254-106">Par conséquent, l'attachement fonctionne sur les environnements 32 bits et 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7e254-106">Therefore, attach works across 32-bit and 64-bit environments.</span></span>  <span data-ttu-id="7e254-107">Une base de données détachée d'une instance de serveur s'exécutant dans un environnement peut être attachée à une instance de serveur qui s'exécute dans un autre environnement.</span><span class="sxs-lookup"><span data-stu-id="7e254-107">A database detached from a server instance running in one environment can be attached on a server instance that runs in another environment.</span></span>  
  
  
  
##  <a name="security"></a><a name="Security"></a> <span data-ttu-id="7e254-108">Sécurité</span><span class="sxs-lookup"><span data-stu-id="7e254-108">Security</span></span>  
 <span data-ttu-id="7e254-109">Les autorisations d'accès au fichier sont définies au cours de plusieurs opérations de base de données, notamment le détachement ou l'attachement d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-109">File access permissions are set during a number of database operations, including detaching or attaching a database.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7e254-110">Nous vous recommandons de ne pas attacher ni restaurer de bases de données provenant de sources inconnues ou non approuvées.</span><span class="sxs-lookup"><span data-stu-id="7e254-110">We recommend that you do not attach or restore databases from unknown or untrusted sources.</span></span> <span data-ttu-id="7e254-111">Ces bases de données peuvent contenir du code malveillant susceptible d'exécuter du code [!INCLUDE[tsql](../../includes/tsql-md.md)] indésirable ou de provoquer des erreurs en modifiant le schéma ou la structure physique des bases de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-111">Such databases could contain malicious code that might execute unintended [!INCLUDE[tsql](../../includes/tsql-md.md)] code or cause errors by modifying the schema or the physical database structure.</span></span> <span data-ttu-id="7e254-112">Avant d’utiliser une base de données issue d’une source inconnue ou non approuvée, exécutez [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) sur la base de données sur un serveur autre qu’un serveur de production et examinez également le code, notamment les procédures stockées ou le code défini par l’utilisateur, de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-112">Before you use a database from an unknown or untrusted source, run [DBCC CHECKDB](/sql/t-sql/database-console-commands/dbcc-checkdb-transact-sql) on the database on a nonproduction server and also examine the code, such as stored procedures or other user-defined code, in the database.</span></span>  
  
##  <a name="detaching-a-database"></a><a name="DetachDb"></a> <span data-ttu-id="7e254-113">Détachement d'une base de données</span><span class="sxs-lookup"><span data-stu-id="7e254-113">Detaching a Database</span></span>  
 <span data-ttu-id="7e254-114">Détacher une base de données consiste à la supprimer de l'instance [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sans toucher à ses fichiers de données et à ses journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="7e254-114">Detaching a database removes it from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] but leaves the database intact within its data files and transaction log files.</span></span> <span data-ttu-id="7e254-115">Ces fichiers peuvent ensuite servir à rattacher la base de données à n'importe quelle instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], y compris le serveur d'où la base de données a été détachée.</span><span class="sxs-lookup"><span data-stu-id="7e254-115">These files can then be used to attach the database to any instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], including the server from which the database was detached.</span></span>  
  
 <span data-ttu-id="7e254-116">Une base de données ne peut pas être détachée si l'une des conditions suivantes est vraie :</span><span class="sxs-lookup"><span data-stu-id="7e254-116">You cannot detach a database if any of the following are true:</span></span>  
  
-   <span data-ttu-id="7e254-117">La base de données est répliquée et publiée.</span><span class="sxs-lookup"><span data-stu-id="7e254-117">The database is replicated and published.</span></span> <span data-ttu-id="7e254-118">Si elle est répliquée, la base de données ne doit pas être publiée.</span><span class="sxs-lookup"><span data-stu-id="7e254-118">If replicated, the database must be unpublished.</span></span> <span data-ttu-id="7e254-119">Avant de pouvoir la détacher, vous devez désactiver la publication en exécutant [sp_replicationdboption](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7e254-119">Before you can detach it, you must disable publishing by running [sp_replicationdboption](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="7e254-120">Si vous ne pouvez pas utiliser **sp_replicationdboption**, vous pouvez supprimer la réplication en exécutant [sp_removedbreplication](/sql/relational-databases/system-stored-procedures/sp-removedbreplication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7e254-120">If you cannot use **sp_replicationdboption**, you can remove replication by running [sp_removedbreplication](/sql/relational-databases/system-stored-procedures/sp-removedbreplication-transact-sql).</span></span>  
  
-   <span data-ttu-id="7e254-121">Un instantané existe sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-121">A database snapshot exists on the database.</span></span>  
  
     <span data-ttu-id="7e254-122">Avant de pouvoir détacher la base de données, vous devez supprimer tous ses instantanés.</span><span class="sxs-lookup"><span data-stu-id="7e254-122">Before you can detach the database, you must drop all of its snapshots.</span></span> <span data-ttu-id="7e254-123">Pour plus d’informations, consultez [Supprimer un instantané de base de données &#40;Transact-SQL&#41;](drop-a-database-snapshot-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-123">For more information, see [Drop a Database Snapshot &#40;Transact-SQL&#41;](drop-a-database-snapshot-transact-sql.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="7e254-124">Un instantané de base de données ne peut pas être détaché ni attaché.</span><span class="sxs-lookup"><span data-stu-id="7e254-124">A database snapshot cannot be detached or attached.</span></span>  
  
-   <span data-ttu-id="7e254-125">La base de données est en cours de mise en miroir dans une session de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-125">The database is being mirrored in a database mirroring session.</span></span>  
  
     <span data-ttu-id="7e254-126">La base de données ne peut pas être détachée tant que la session n'est pas interrompue.</span><span class="sxs-lookup"><span data-stu-id="7e254-126">The database cannot be detached unless the session is terminated.</span></span> <span data-ttu-id="7e254-127">Pour plus d’informations, consultez [Suppression d’une mise en miroir des bases de données &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-127">For more information, see [Removing Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>  
  
-   <span data-ttu-id="7e254-128">La base de données est suspecte.</span><span class="sxs-lookup"><span data-stu-id="7e254-128">The database is suspect.</span></span> <span data-ttu-id="7e254-129">Une base de données suspecte ne peut pas être détachée ; avant de pouvoir le faire, vous devez la mettre en mode urgence.</span><span class="sxs-lookup"><span data-stu-id="7e254-129">A suspect database cannot be detached; before you can detach it, you must put it into emergency mode.</span></span> <span data-ttu-id="7e254-130">Pour plus d’informations sur la manière de mettre une base de données en mode urgence, consultez [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7e254-130">For more information about how to put a database into emergency mode, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
-   <span data-ttu-id="7e254-131">La base de données est une base de données système.</span><span class="sxs-lookup"><span data-stu-id="7e254-131">The database is a system database.</span></span>  
  
### <a name="backup-and-restore-and-detach"></a><span data-ttu-id="7e254-132">Sauvegarde et restauration et détachement</span><span class="sxs-lookup"><span data-stu-id="7e254-132">Backup and Restore and Detach</span></span>  
 <span data-ttu-id="7e254-133">Le détachement d'une base de données en lecture seule provoque la perte des informations relatives aux bases différentielles des sauvegardes différentielles.</span><span class="sxs-lookup"><span data-stu-id="7e254-133">Detaching a read-only database loses information about the differential bases of differential backups.</span></span> <span data-ttu-id="7e254-134">Pour plus d’informations, consultez [Sauvegardes différentielles &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-134">For more information, see [Differential Backups &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span></span>  
  
### <a name="responding-to-detach-errors"></a><span data-ttu-id="7e254-135">Réponse aux erreurs de détachement</span><span class="sxs-lookup"><span data-stu-id="7e254-135">Responding to Detach Errors</span></span>  
 <span data-ttu-id="7e254-136">Les erreurs générées à l'occasion du détachement d'une base de données peuvent empêcher la fermeture correcte de la base de données et la reconstruction du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="7e254-136">Errors produced while detaching a database can prevent the database from closing cleanly and the transaction log from being rebuilt.</span></span> <span data-ttu-id="7e254-137">Si vous obtenez un message d'erreur, procédez comme suit pour corriger le problème :</span><span class="sxs-lookup"><span data-stu-id="7e254-137">If you receive an error message, perform the following corrective actions:</span></span>  
  
1.  <span data-ttu-id="7e254-138">Rattachez tous les fichiers associés à la base de données, en plus du fichier primaire.</span><span class="sxs-lookup"><span data-stu-id="7e254-138">Reattach all files associated with the database, not just the primary file.</span></span>  
  
2.  <span data-ttu-id="7e254-139">Résolvez le problème à l'origine de l'affichage du message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="7e254-139">Resolve the problem that caused the error message.</span></span>  
  
3.  <span data-ttu-id="7e254-140">Détachez la base de données de nouveau.</span><span class="sxs-lookup"><span data-stu-id="7e254-140">Detach the database again.</span></span>  
  
##  <a name="attaching-a-database"></a><a name="AttachDb"></a> <span data-ttu-id="7e254-141">Attachement d'une base de données</span><span class="sxs-lookup"><span data-stu-id="7e254-141">Attaching a Database</span></span>  
 <span data-ttu-id="7e254-142">Vous pouvez attacher une base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] copiée ou détachée.</span><span class="sxs-lookup"><span data-stu-id="7e254-142">You can attach a copied or detached [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="7e254-143">Lorsque vous attachez une [!INCLUDE[ssVersion2005](../../includes/sscurrent-md.md)] instance de serveur, les fichiers catalogue sont attachés à partir de leur emplacement précédent avec les autres fichiers de base de données, le même que dans [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="7e254-143">When you attach a [!INCLUDE[ssVersion2005](../../includes/sscurrent-md.md)] server instance, the catalog files are attached from their previous location along with the other database files, the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="7e254-144">Pour plus d’informations, consultez [Mise à niveau de la fonction de recherche en texte intégral](../search/upgrade-full-text-search.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-144">For more information, see [Upgrade Full-Text Search](../search/upgrade-full-text-search.md).</span></span>  
  
 <span data-ttu-id="7e254-145">Lorsque vous attachez une base de données, tous les fichiers de données (fichiers MDF et NDF) doivent être disponibles.</span><span class="sxs-lookup"><span data-stu-id="7e254-145">When you attach a database, all data files (MDF and NDF files) must be available.</span></span> <span data-ttu-id="7e254-146">Si un fichier de données possède un chemin différent de celui qui existait lorsque la base de données a été créée pour la première fois ou attachée pour la dernière fois, vous devez spécifier le chemin actuel du fichier.</span><span class="sxs-lookup"><span data-stu-id="7e254-146">If any data file has a different path from when the database was first created or last attached, you must specify the current path of the file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7e254-147">Si le fichier de données primaires attaché est en lecture seule, le [!INCLUDE[ssDE](../../includes/ssde-md.md)] suppose que la base de données est en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="7e254-147">If the primary data file being attached is read-only, the [!INCLUDE[ssDE](../../includes/ssde-md.md)] assumes that the database is read-only.</span></span>  
  
 <span data-ttu-id="7e254-148">Lorsqu’une base de données chiffrée est attachée pour la première fois à une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , le propriétaire de la base de données doit ouvrir la clé principale de la base de données en exécutant l’instruction suivante : ouvrir le DÉchiffrement de la clé principale par mot de passe = **' *`password`* '**.</span><span class="sxs-lookup"><span data-stu-id="7e254-148">When an encrypted database is first attached to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the database owner must open the master key of the database by executing the following statement: OPEN MASTER KEY DECRYPTION BY PASSWORD = **'*`password`*'**.</span></span> <span data-ttu-id="7e254-149">Nous vous recommandons d'activer le déchiffrement automatique de la clé principale en exécutant l'instruction suivante : ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY.</span><span class="sxs-lookup"><span data-stu-id="7e254-149">We recommend that you enable automatic decryption of the master key by executing the following statement: ALTER MASTER KEY ADD ENCRYPTION BY SERVICE MASTER KEY.</span></span> <span data-ttu-id="7e254-150">Pour plus d’informations, consultez [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) et [ALTER MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7e254-150">For more information, see [CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) and [ALTER MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-master-key-transact-sql).</span></span>  
  
 <span data-ttu-id="7e254-151">Les conditions requises pour attacher des fichiers journaux dépendent en partie des autorisations de lecture-écriture ou de lecture seule de la base de données. Elles sont exposées ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="7e254-151">The requirement for attaching log files depends partly on whether the database is read-write or read-only, as follows:</span></span>  
  
-   <span data-ttu-id="7e254-152">Pour une base de données en lecture-écriture, vous pouvez généralement attacher un fichier journal dans un nouvel emplacement.</span><span class="sxs-lookup"><span data-stu-id="7e254-152">For a read-write database, you can usually attach a log file in a new location.</span></span> <span data-ttu-id="7e254-153">Toutefois, dans certains cas, le rattachement d'une base de données nécessite ses fichiers journaux existants.</span><span class="sxs-lookup"><span data-stu-id="7e254-153">However, in some cases, reattaching a database requires its existing log files.</span></span> <span data-ttu-id="7e254-154">Par conséquent, il est important de toujours conserver tous les fichiers journaux détachés tant que la base de données n'a pas été attachée sans eux.</span><span class="sxs-lookup"><span data-stu-id="7e254-154">Therefore, it is important to always keep all the detached log files until the database has been successfully attached without them.</span></span>  
  
     <span data-ttu-id="7e254-155">Si une base de données en lecture-écriture possède un seul fichier journal dont vous ne précisez pas le nouvel emplacement, l'opération d'attachement le recherche dans son emplacement précédent.</span><span class="sxs-lookup"><span data-stu-id="7e254-155">If a read-write database has a single log file and you do not specify a new location for the log file, the attach operation looks in the old location for the file.</span></span> <span data-ttu-id="7e254-156">S'il est trouvé, l'ancien fichier journal est utilisé, que la base de données ait été fermée correctement ou non.</span><span class="sxs-lookup"><span data-stu-id="7e254-156">If it is found, the old log file is used, regardless of whether the database was shut down cleanly.</span></span> <span data-ttu-id="7e254-157">Toutefois, si l'ancien fichier journal n'est pas trouvé et si la base de données a été fermée correctement sans séquence de journaux de transactions active, l'opération d'attachement tente de créer un nouveau fichier journal pour la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-157">However, if the old log file is not found and if the database was shut down cleanly and has no active log chain, the attach operation attempts to build a new log file for the database.</span></span>  
  
-   <span data-ttu-id="7e254-158">Si le fichier de données primaire en cours d’attachement est en lecture seule, le [!INCLUDE[ssDE](../../includes/ssnoversion-md.md)] ne peut pas mettre à jour l’emplacement du journal stocké dans le fichier primaire.</span><span class="sxs-lookup"><span data-stu-id="7e254-158">If the primary data file being attached is read-only, the [!INCLUDE[ssDE](../../includes/ssnoversion-md.md)] cannot update the log location stored in the primary file.</span></span>  
  
  
  
###  <a name="metadata-changes-on-attaching-a-database"></a><a name="Metadata"></a> <span data-ttu-id="7e254-159">Modifications des métadonnées lors de l'attachement d'une base de données</span><span class="sxs-lookup"><span data-stu-id="7e254-159">Metadata Changes on Attaching a Database</span></span>  
 <span data-ttu-id="7e254-160">Lorsqu'une base de données en lecture seule est détachée puis rattachée, les informations de sauvegarde sur la base différentielle active sont perdues.</span><span class="sxs-lookup"><span data-stu-id="7e254-160">When a read-only database is detached and then reattached, the backup information about the current differential base is lost.</span></span> <span data-ttu-id="7e254-161">La *base différentielle* est la sauvegarde complète la plus récente de toutes les données de la base de données ou d'un sous-ensemble des fichiers ou groupes de fichiers de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-161">The *differential base* is the most recent full backup of all the data in the database or in a subset of the files or filegroups of the database.</span></span> <span data-ttu-id="7e254-162">Sans les informations de sauvegarde de la base, la base de données **MASTER** est désynchronisée par rapport à la base de données en lecture seule ; ainsi, les sauvegardes différentielles effectuées ultérieurement peuvent produire des résultats inattendus.</span><span class="sxs-lookup"><span data-stu-id="7e254-162">Without the base-backup information, the **master** database becomes unsynchronized with the read-only database, so differential backups taken thereafter may provide unexpected results.</span></span> <span data-ttu-id="7e254-163">C'est la raison pour laquelle, si vous utilisez des sauvegardes différentielles avec une base de données en lecture seule, vous devez établir une nouvelle base différentielle en effectuant une sauvegarde complète après le rattachement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-163">Therefore, if you are using differential backups with a read-only database, you should establish a new differential base by taking a full backup after you reattach the database.</span></span> <span data-ttu-id="7e254-164">Pour plus d’informations sur les sauvegardes différentielles, consultez [Sauvegardes différentielles &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-164">For information about differential backups, see [Differential Backups &#40;SQL Server&#41;](../backup-restore/differential-backups-sql-server.md).</span></span>  
  
 <span data-ttu-id="7e254-165">À l'attachement, la base de données démarre.</span><span class="sxs-lookup"><span data-stu-id="7e254-165">On attach, database startup occurs.</span></span> <span data-ttu-id="7e254-166">En général, l'attachement d'une base de données la place dans le même état où elle se trouvait au moment de son détachement ou de sa copie.</span><span class="sxs-lookup"><span data-stu-id="7e254-166">Generally, attaching a database places it in the same state that it was in when it was detached or copied.</span></span> <span data-ttu-id="7e254-167">Toutefois, les opérations d'attachement et de détachement désactivent le chaînage des propriétés des bases de données croisées de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e254-167">However, attach-and-detach operations both disable cross-database ownership chaining for the database.</span></span> <span data-ttu-id="7e254-168">Pour plus d’informations sur l’activation du chaînage, consultez [Chaînage des propriétés des bases de données croisées (option de configuration de serveur)](../../database-engine/configure-windows/cross-db-ownership-chaining-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-168">For information about how to enable chaining, see [cross db ownership chaining Server Configuration Option](../../database-engine/configure-windows/cross-db-ownership-chaining-server-configuration-option.md).</span></span> <span data-ttu-id="7e254-169">En outre, TRUSTWORTHY prend la valeur OFF à chaque fois que la base de données est attachée.</span><span class="sxs-lookup"><span data-stu-id="7e254-169">Also, TRUSTWORTHY is set to OFF whenever the database is attached.</span></span> <span data-ttu-id="7e254-170">Pour plus d’informations sur la façon d’affecter la valeur ON à TRUSTWORTHY, consultez [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="7e254-170">For information about how to set TRUSTWORTHY to ON, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
### <a name="backup-and-restore-and-attach"></a><span data-ttu-id="7e254-171">Sauvegarder, restaurer et attacher</span><span class="sxs-lookup"><span data-stu-id="7e254-171">Backup and Restore and Attach</span></span>  
 <span data-ttu-id="7e254-172">Comme toutes les bases de données complètement ou partiellement hors connexion, une base de données contenant des fichiers de restauration ne peut pas être attachée.</span><span class="sxs-lookup"><span data-stu-id="7e254-172">Like any database that is fully or partially offline, a database with restoring files cannot be attached.</span></span> <span data-ttu-id="7e254-173">Pour attacher la base de données, arrêtez la séquence de restauration.</span><span class="sxs-lookup"><span data-stu-id="7e254-173">If you stop the restore sequence, you can attach the database.</span></span> <span data-ttu-id="7e254-174">Puis, vous pouvez redémarrer la séquence de restauration.</span><span class="sxs-lookup"><span data-stu-id="7e254-174">Then, you can restart the restore sequence.</span></span>  
  
###  <a name="attaching-a-database-to-another-server-instance"></a><a name="OtherServerInstance"></a> <span data-ttu-id="7e254-175">Attachement d'une base de données à une autre instance de serveur</span><span class="sxs-lookup"><span data-stu-id="7e254-175">Attaching a Database to Another Server Instance</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7e254-176">Une base de données créée dans une version plus récente de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ne peut pas être attachée à des versions antérieures.</span><span class="sxs-lookup"><span data-stu-id="7e254-176">A database created by a more recent version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot be attached in earlier versions.</span></span>  
  
 <span data-ttu-id="7e254-177">Lorsque vous attachez une base de données à une autre instance de serveur et si vous souhaitez offrir une expérience cohérente aux utilisateurs et aux applications, il est possible que vous deviez recréer une partie ou l'ensemble des métadonnées de la base de données, telles que les connexions et les travaux, sur cette autre instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="7e254-177">When you attach a database onto another server instance, to provide a consistent experience to users and applications, you might have to re-create some or all of the metadata for the database, such as logins and jobs, on the other server instance.</span></span> <span data-ttu-id="7e254-178">Pour plus d’informations, consultez [Gérer les métadonnées durant la mise à disposition d’une base de données sur une autre instance de serveur &#40;SQL Server&#41;](manage-metadata-when-making-a-database-available-on-another-server.md).</span><span class="sxs-lookup"><span data-stu-id="7e254-178">For more information, see [Manage Metadata When Making a Database Available on Another Server Instance &#40;SQL Server&#41;](manage-metadata-when-making-a-database-available-on-another-server.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="7e254-179">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="7e254-179">Related Tasks</span></span>  
 <span data-ttu-id="7e254-180">**Pour détacher une base de données**</span><span class="sxs-lookup"><span data-stu-id="7e254-180">**To detach a database**</span></span>  
  
-   [<span data-ttu-id="7e254-181">sp_detach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-181">sp_detach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql)  
  
-   [<span data-ttu-id="7e254-182">Détacher une base de données</span><span class="sxs-lookup"><span data-stu-id="7e254-182">Detach a Database</span></span>](detach-a-database.md)  
  
 <span data-ttu-id="7e254-183">**Pour attacher une base de données**</span><span class="sxs-lookup"><span data-stu-id="7e254-183">**To attach a database**</span></span>  
  
-   [<span data-ttu-id="7e254-184">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-184">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
-   [<span data-ttu-id="7e254-185">Attacher une base de données</span><span class="sxs-lookup"><span data-stu-id="7e254-185">Attach a Database</span></span>](attach-a-database.md)  
  
-   [<span data-ttu-id="7e254-186">sp_attach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-186">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
-   [<span data-ttu-id="7e254-187">sp_attach_single_file_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-187">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
 <span data-ttu-id="7e254-188">**Pour mettre à niveau une base de données à l'aide des opérations de détachement et d'attachement**</span><span class="sxs-lookup"><span data-stu-id="7e254-188">**To upgrade a database using detach and attach operations**</span></span>  
  
-   [<span data-ttu-id="7e254-189">Mettre à niveau une base de données avec Detach et Attach &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-189">Upgrade a Database Using Detach and Attach &#40;Transact-SQL&#41;</span></span>](upgrade-a-database-using-detach-and-attach-transact-sql.md)  
  
 <span data-ttu-id="7e254-190">**Pour déplacer une base de données à l'aide des opérations de détachement et d'attachement**</span><span class="sxs-lookup"><span data-stu-id="7e254-190">**To move a database using detach and attach operations**</span></span>  
  
-   [<span data-ttu-id="7e254-191">Déplacer une base de données à l’aide de la méthode de détachement et d’attachement &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-191">Move a Database Using Detach and Attach &#40;Transact-SQL&#41;</span></span>](move-a-database-using-detach-and-attach-transact-sql.md)  
  
 <span data-ttu-id="7e254-192">**Pour supprimer un instantané de base de données**</span><span class="sxs-lookup"><span data-stu-id="7e254-192">**To delete a database snapshot**</span></span>  
  
-   [<span data-ttu-id="7e254-193">Supprimer un instantané de base de données &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7e254-193">Drop a Database Snapshot &#40;Transact-SQL&#41;</span></span>](drop-a-database-snapshot-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="7e254-194">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7e254-194">See Also</span></span>  
 [<span data-ttu-id="7e254-195">Groupes de fichiers et fichiers de base de données</span><span class="sxs-lookup"><span data-stu-id="7e254-195">Database Files and Filegroups</span></span>](database-files-and-filegroups.md)  
  
  
