---
title: Bases de données autonomes | Microsoft Docs
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- contained database
- database_uncontained_usage event
- partially contained database
- contained database, understanding
ms.assetid: 36af59d7-ce96-4a02-8598-ffdd78cdc948
author: stevestein
ms.author: sstein
ms.openlocfilehash: 3efd231a1aa4d2b348bcfe887bd05825fcd40c90
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87702972"
---
# <a name="contained-databases"></a><span data-ttu-id="e79d0-102">Bases de données autonomes</span><span class="sxs-lookup"><span data-stu-id="e79d0-102">Contained Databases</span></span>
  <span data-ttu-id="e79d0-103">Une *base de données autonome* est une base de données qui est isolée d'autres bases de données et de l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] qui héberge cette base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-103">A*contained database* is a database that is isolated from other databases and from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that hosts the database.</span></span>  [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="e79d0-104">aide l'utilisateur à isoler sa base de données de l'instance de 4 manières différentes.</span><span class="sxs-lookup"><span data-stu-id="e79d0-104">helps user to isolate their database from the instance in 4 ways.</span></span>  
  
-   <span data-ttu-id="e79d0-105">Une grande partie des métadonnées qui décrivent une base de données est conservée dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-105">Much of the metadata that describes a database is maintained in the database.</span></span> <span data-ttu-id="e79d0-106">(En plus ou en remplacement de la conservation des métadonnées dans la base de données MASTER.)</span><span class="sxs-lookup"><span data-stu-id="e79d0-106">(In addition to, or instead of, maintaining metadata in the master database.)</span></span>  
  
-   <span data-ttu-id="e79d0-107">Toutes les métadonnées sont définies à l'aide du même classement.</span><span class="sxs-lookup"><span data-stu-id="e79d0-107">All metadata are defined using the same collation.</span></span>  
  
-   <span data-ttu-id="e79d0-108">L'authentification utilisateur peut être exécutée par la base de données, ce qui réduit la dépendance sur les connexions de l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-108">User authentication can be performed by the database, reducing the databases dependency on the logins of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="e79d0-109">L'environnement [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (DMV, XEvents, etc.) signale des informations relatives à la relation contenant-contenu et peut interagir sur celles-ci.</span><span class="sxs-lookup"><span data-stu-id="e79d0-109">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] environment (DMV's, XEvents, etc.) reports and can act upon containment information.</span></span>  
  
 <span data-ttu-id="e79d0-110">Certaines fonctionnalités de bases de données partiellement autonomes, telles que le stockage des métadonnées dans la base de données, s'appliquent à toutes les bases de données [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-110">Some features of partially contained databases, such as storing metadata in the database, apply to all [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] databases.</span></span> <span data-ttu-id="e79d0-111">Certains avantages des bases de données partiellement autonomes, tels que l'authentification de niveau base de données et le classement de catalogue, doivent être activés pour pouvoir être disponibles.</span><span class="sxs-lookup"><span data-stu-id="e79d0-111">Some benefits of partially contained databases, such as database level authentication and catalog collation, must be enabled before they are available.</span></span> <span data-ttu-id="e79d0-112">La relation contenant-contenu partielle est activée à l'aide des instructions `CREATE DATABASE` et `ALTER DATABASE` ou de [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-112">Partial containment is enabled using the `CREATE DATABASE` and `ALTER DATABASE` statements or by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="e79d0-113">Pour plus d'informations sur l'activation de l’autonomie de base de données partielle, consultez [Migrer vers une base de données partiellement autonome](migrate-to-a-partially-contained-database.md).</span><span class="sxs-lookup"><span data-stu-id="e79d0-113">For more information about how to enable partial database containment, see [Migrate to a Partially Contained Database](migrate-to-a-partially-contained-database.md).</span></span>  
  
 <span data-ttu-id="e79d0-114">Cette rubrique contient les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="e79d0-114">This topic contains the following sections.</span></span>  
  
-   [<span data-ttu-id="e79d0-115">Concepts de base de données partiellement à relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-115">Partially Contained Database Concepts</span></span>](#Concepts)  
  
-   [<span data-ttu-id="e79d0-116">Imbrication</span><span class="sxs-lookup"><span data-stu-id="e79d0-116">Containment</span></span>](#containment)  
  
-   [<span data-ttu-id="e79d0-117">Avantages de l’utilisation de bases de données partiellement à relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-117">Benefits of using Partially Contained Databases</span></span>](#benefits)  
  
-   [<span data-ttu-id="e79d0-118">Limitations</span><span class="sxs-lookup"><span data-stu-id="e79d0-118">Limitations</span></span>](#Limitations)  
  
-   [<span data-ttu-id="e79d0-119">Identification de la relation contenant-contenu de base de données</span><span class="sxs-lookup"><span data-stu-id="e79d0-119">Identifying Database Containment</span></span>](#Identifying)  
  
##  <a name="partially-contained-database-concepts"></a><a name="Concepts"></a> <span data-ttu-id="e79d0-120">Concepts relatifs aux bases de données partiellement autonomes</span><span class="sxs-lookup"><span data-stu-id="e79d0-120">Partially Contained Database Concepts</span></span>  
 <span data-ttu-id="e79d0-121">Une base de données autonome complète inclut tous les paramètres et métadonnées requis pour définir la base de données ; sa configuration ne dépend pas de l'instance du [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] où la base de données est installée.</span><span class="sxs-lookup"><span data-stu-id="e79d0-121">A fully contained database includes all the settings and metadata required to define the database and has no configuration dependencies on the instance of the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] where the database is installed.</span></span> <span data-ttu-id="e79d0-122">Dans les versions antérieures de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], la séparation d'une base de données de l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] pouvait être fastidieuse et nécessiter une connaissance détaillée de la relation entre la base de données et l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-122">In previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], separating a database from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] could be time consuming and required detailed knowledge of the relationship between the database and the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="e79d0-123">Les bases de données partiellement autonomes simplifient la séparation d'une base de données de l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et des autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-123">Partially contained databases make it easier to separate a database from the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and other databases.</span></span>  
  
 <span data-ttu-id="e79d0-124">La base de données autonome considère les fonctionnalités en termes d’autonomie.</span><span class="sxs-lookup"><span data-stu-id="e79d0-124">The contained database considers features with regard to containment.</span></span> <span data-ttu-id="e79d0-125">Toute entité définie par l'utilisateur qui ne s'appuie que sur des fonctions résidant dans la base de données est considérée comme entièrement à relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-125">Any user-defined entity that relies only on functions that reside in the database is considered fully contained.</span></span> <span data-ttu-id="e79d0-126">Toute entité définie par l'utilisateur qui s'appuie sur des fonctions résidant hors de la base de données est considérée sans relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-126">Any user-defined entity that relies on functions that reside outside the database is considered uncontained.</span></span> <span data-ttu-id="e79d0-127">(Pour plus d’informations, consultez la section [Relation contenant-contenu](#containment) , plus loin dans cette rubrique.)</span><span class="sxs-lookup"><span data-stu-id="e79d0-127">(For more information, see the [Containment](#containment) section later in this topic.)</span></span>  
  
 <span data-ttu-id="e79d0-128">Les termes suivants s'appliquent au modèle de base de données autonome.</span><span class="sxs-lookup"><span data-stu-id="e79d0-128">The following terms apply to the contained database model.</span></span>  
  
 <span data-ttu-id="e79d0-129">Limite de base de données</span><span class="sxs-lookup"><span data-stu-id="e79d0-129">Database boundary</span></span>  
 <span data-ttu-id="e79d0-130">Limite entre une base de données et l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-130">The boundary between a database and the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="e79d0-131">Limite entre une base de données et d'autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-131">The boundary between a database and other databases.</span></span>  
  
 <span data-ttu-id="e79d0-132">À relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-132">Contained</span></span>  
 <span data-ttu-id="e79d0-133">Élément qui existe entièrement dans la limite de base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-133">An element that exists entirely in the database boundary.</span></span>  
  
 <span data-ttu-id="e79d0-134">Sans relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-134">Uncontained</span></span>  
 <span data-ttu-id="e79d0-135">Élément qui dépasse la limite de base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-135">An element that crosses the database boundary.</span></span>  
  
 <span data-ttu-id="e79d0-136">Base de données non autonome</span><span class="sxs-lookup"><span data-stu-id="e79d0-136">Non-contained database</span></span>  
 <span data-ttu-id="e79d0-137">Base de données dont la relation contenant-contenu a la valeur **NONE**.</span><span class="sxs-lookup"><span data-stu-id="e79d0-137">A database that has containment set to **NONE**.</span></span> <span data-ttu-id="e79d0-138">Toutes les bases de données de versions antérieures à [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] sont sans relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-138">All databases in versions earlier than [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] are non-contained.</span></span> <span data-ttu-id="e79d0-139">Par défaut, toutes les bases de données [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] et de versions ultérieures ont une relation contenant-contenu définie avec la valeur **NONE**.</span><span class="sxs-lookup"><span data-stu-id="e79d0-139">By default, all [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] and later databases have a containment set to **NONE**.</span></span>  
  
 <span data-ttu-id="e79d0-140">Base de données partiellement autonome</span><span class="sxs-lookup"><span data-stu-id="e79d0-140">Partially contained database</span></span>  
 <span data-ttu-id="e79d0-141">Une base de données partiellement autonome est une base de données autonome qui peut autoriser certaines fonctionnalités qui dépassent la limite de base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-141">A partially contained database is a contained database that can allow some features that cross the database boundary.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="e79d0-142">permet de déterminer si la limite de la relation contenant-contenu est dépassée.</span><span class="sxs-lookup"><span data-stu-id="e79d0-142">includes the ability to determine when the containment boundary is crossed.</span></span>  
  
 <span data-ttu-id="e79d0-143">Utilisateur contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-143">Contained user</span></span>  
 <span data-ttu-id="e79d0-144">Il existe deux types d'utilisateurs pour les bases de données autonomes.</span><span class="sxs-lookup"><span data-stu-id="e79d0-144">There are two types of users for contained databases.</span></span>  
  
-   <span data-ttu-id="e79d0-145">**Utilisateur de base de données autonome avec mot de passe**</span><span class="sxs-lookup"><span data-stu-id="e79d0-145">**Contained database user with password**</span></span>  
  
     <span data-ttu-id="e79d0-146">Les utilisateurs de base de données autonome avec mots de passe sont authentifiés par la base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-146">Contained database users with passwords are authenticated by the database.</span></span>  
  
-   <span data-ttu-id="e79d0-147">**Principaux Windows**</span><span class="sxs-lookup"><span data-stu-id="e79d0-147">**Windows principals**</span></span>  
  
     <span data-ttu-id="e79d0-148">Les utilisateurs Windows autorisés et les membres de groupes Windows autorisés peuvent se connecter directement à la base de données et n'ont pas besoin de connexions dans la base de données **master** .</span><span class="sxs-lookup"><span data-stu-id="e79d0-148">Authorized Windows users and members of authorized Windows groups can connect directly to the database and do not need logins in the **master** database.</span></span> <span data-ttu-id="e79d0-149">La base de données fait confiance au processus d'authentification effectué par Windows.</span><span class="sxs-lookup"><span data-stu-id="e79d0-149">The database trusts the authentication by Windows.</span></span>  
  
 <span data-ttu-id="e79d0-150">Les utilisateurs, selon les connexions dans la base de données **master** , peuvent bénéficier de l'accès à une base de données autonome, mais cela créerait une dépendance sur l'instance [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-150">Users based on logins in the **master** database can be granted access to a contained database, but that would create a dependency on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="e79d0-151">Par conséquent, pour la création d'utilisateurs basés sur des connexions, reportez-vous au commentaire relatif aux bases de données partiellement autonomes.</span><span class="sxs-lookup"><span data-stu-id="e79d0-151">Therefore, creating users based on logins see comment for partially contained databases.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="e79d0-152">L'activation de bases de données autonomes partielle transfère le contrôle de l'accès à l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] aux propriétaires de la base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-152">Enabling partially contained databases delegates control over access to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the owners of the database.</span></span> <span data-ttu-id="e79d0-153">Pour plus d'informations, consultez [Meilleures pratiques de sécurité recommandées avec les bases de données autonomes](security-best-practices-with-contained-databases.md).</span><span class="sxs-lookup"><span data-stu-id="e79d0-153">For more information, see [Security Best Practices with Contained Databases](security-best-practices-with-contained-databases.md).</span></span>  
  
 <span data-ttu-id="e79d0-154">Limite de base de données</span><span class="sxs-lookup"><span data-stu-id="e79d0-154">Database Boundary</span></span>  
 <span data-ttu-id="e79d0-155">Comme les bases de données partiellement autonomes séparent les fonctionnalités de base de données de celles de l'instance, une frontière clairement définie existe entre ces deux éléments, appelée *limite de base de données*.</span><span class="sxs-lookup"><span data-stu-id="e79d0-155">Because partially contained databases separate the database functionality from those of the instance, there is a clearly defined line between these two elements called the *database boundary*.</span></span>  
  
 <span data-ttu-id="e79d0-156">À l'intérieur de la limite de base de données se trouve le *modèle de base de données*, où les bases de données sont développées et gérées.</span><span class="sxs-lookup"><span data-stu-id="e79d0-156">Inside of the database boundary is the *database model*, where the databases are developed and managed.</span></span> <span data-ttu-id="e79d0-157">Les entités situées dans la base de données sont, par exemple, des tables système telles que **sys.tables**, des utilisateurs de base de données autonome avec mots de passe et des tables utilisateur dans la base de données actuelle référencées par un nom en deux parties.</span><span class="sxs-lookup"><span data-stu-id="e79d0-157">Examples of entities located inside of the database include, system tables like **sys.tables**, contained database users with passwords, and user tables in the current database referenced by a two-part name.</span></span>  
  
 <span data-ttu-id="e79d0-158">En dehors de la limite de base de données se trouve le *modèle de gestion*, qui se rapporte aux fonctions et à la gestion au niveau de l’instance.</span><span class="sxs-lookup"><span data-stu-id="e79d0-158">Outside of the database boundary is the *management model*, which pertains to instance-level functions and management.</span></span> <span data-ttu-id="e79d0-159">Les entités situées en dehors de la limite de base de données sont, par exemple, des tables système telles que **sys.endpoints**, des utilisateurs mappés aux connexions et des tables utilisateur dans une autre base de données référencées par un nom en trois parties.</span><span class="sxs-lookup"><span data-stu-id="e79d0-159">Examples of entities located outside of the database boundary include, system tables like **sys.endpoints**, users mapped to logins, and user tables in another database referenced by a three-part-name.</span></span>  
  
##  <a name="containment"></a><a name="containment"></a> <span data-ttu-id="e79d0-160">Relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-160">Containment</span></span>  
 <span data-ttu-id="e79d0-161">Les entités d'utilisateur qui résident entièrement dans la base de données sont considérées *avec relation contenant-contenu*.</span><span class="sxs-lookup"><span data-stu-id="e79d0-161">User entities that reside entirely within the database are considered *contained*.</span></span> <span data-ttu-id="e79d0-162">Toutes les entités qui résident en dehors de la base de données, ou qui s'appuient sur une interaction avec des fonctions situées en dehors de la base de données, sont considérées *sans relation contenant-contenu*.</span><span class="sxs-lookup"><span data-stu-id="e79d0-162">Any entities that reside outside of the database, or rely on interaction with functions outside of the database, are considered *uncontained*.</span></span>  
  
 <span data-ttu-id="e79d0-163">En général, les entités d'utilisateur sont classées dans les catégories de relation contenant-contenu suivantes :</span><span class="sxs-lookup"><span data-stu-id="e79d0-163">In general, user entities fall into the following categories of containment:</span></span>  
  
-   <span data-ttu-id="e79d0-164">Entités d’utilisateur à relation contenant-contenu entière (celles qui ne dépassent jamais la limite de base de données), par exemple sys.indexes.</span><span class="sxs-lookup"><span data-stu-id="e79d0-164">Fully contained user entities (those that never cross the database boundary), for example sys.indexes.</span></span> <span data-ttu-id="e79d0-165">Tout code qui utilise ces fonctionnalités ou tout objet qui référence uniquement ces entités est également entièrement à relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-165">Any code that uses these features or any object that references only these entities is also fully contained.</span></span>  
  
-   <span data-ttu-id="e79d0-166">Entités d’utilisateur sans relation contenant-contenu (celles qui dépassent la limite de base de données), par exemple sys.server_principals ou un principal de serveur (connexion) lui-même.</span><span class="sxs-lookup"><span data-stu-id="e79d0-166">Uncontained user entities (those that cross the database boundary), for example sys.server_principals or a server principal (login) itself.</span></span> <span data-ttu-id="e79d0-167">Tout code qui utilise ces entités ou toute fonction qui les référence est sans relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-167">Any code that uses these entities or any functions that references these entities are uncontained.</span></span>  
  
###  <a name="partially-contained-database"></a><a name="partial"></a> <span data-ttu-id="e79d0-168">Base de données partiellement autonome</span><span class="sxs-lookup"><span data-stu-id="e79d0-168">Partially Contained Database</span></span>  
 <span data-ttu-id="e79d0-169">La fonctionnalité de base de données autonome est actuellement disponible uniquement dans un état partiel.</span><span class="sxs-lookup"><span data-stu-id="e79d0-169">The contained database feature is currently available only in a partially contained state.</span></span> <span data-ttu-id="e79d0-170">Une base de données partiellement autonome est une base de données autonome qui autorise l'utilisation de fonctionnalités sans autonomie.</span><span class="sxs-lookup"><span data-stu-id="e79d0-170">A partially contained database is a contained database that allows the use of uncontained features.</span></span>  
  
 <span data-ttu-id="e79d0-171">Utilisez les vues [sys.dm_db_uncontained_entities](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) et [sys.sql_modules &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-modules-transact-sql) pour retourner des informations sur des objets ou des fonctionnalités sans relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-171">Use the [sys.dm_db_uncontained_entities](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) and [sys.sql_modules &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-modules-transact-sql) view to return information about uncontained objects or features.</span></span> <span data-ttu-id="e79d0-172">En déterminant l'état de la relation contenant-contenu des éléments de votre base de données, vous pouvez découvrir les objets ou les fonctionnalités qui doivent être remplacés ou modifiés pour promouvoir la relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-172">By determining the containment status of the elements of your database, you can discover what objects or features must be replaced or altered to promote containment.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="e79d0-173">Étant donné que certains objets ont pour paramètre de relation contenant-contenu **NONE**par défaut, cette vue peut retourner des faux positifs.</span><span class="sxs-lookup"><span data-stu-id="e79d0-173">Because certain objects have a default containment setting of **NONE**, this view can return false positives.</span></span>  
  
 <span data-ttu-id="e79d0-174">Le comportement des bases de données partiellement autonomes est très différent de celui des bases de données non autonomes en termes de classement.</span><span class="sxs-lookup"><span data-stu-id="e79d0-174">The behavior of partially contained databases differs most distinctly from that of non-contained databases with regard to collation.</span></span> <span data-ttu-id="e79d0-175">Pour plus d'informations sur les problèmes de classement, consultez [Classements de base de données autonome](contained-database-collations.md).</span><span class="sxs-lookup"><span data-stu-id="e79d0-175">For more information about collation issues, see [Contained Database Collations](contained-database-collations.md).</span></span>  
  
##  <a name="benefits-of-using-partially-contained-databases"></a><a name="benefits"></a> <span data-ttu-id="e79d0-176">Avantages de l'utilisation de bases de données partiellement autonomes</span><span class="sxs-lookup"><span data-stu-id="e79d0-176">Benefits of using Partially Contained Databases</span></span>  
 <span data-ttu-id="e79d0-177">Les problèmes et les complications associés aux bases de données non autonomes peuvent être résolus à l'aide d'une base de données partiellement autonome.</span><span class="sxs-lookup"><span data-stu-id="e79d0-177">There are issues and complications associated with the non-contained databases that can be resolved by using a partially contained database.</span></span>  
  
### <a name="database-movement"></a><span data-ttu-id="e79d0-178">Déplacement de base de données</span><span class="sxs-lookup"><span data-stu-id="e79d0-178">Database Movement</span></span>  
 <span data-ttu-id="e79d0-179">Un des problèmes qui se produit lors du déplacement de bases de données est que certaines informations importantes peuvent être indisponibles lorsqu'une base de données est déplacée d'une instance à l'autre.</span><span class="sxs-lookup"><span data-stu-id="e79d0-179">One of the problems that occurs when moving databases, is that some important information can be unavailable when a database is moved from one instance to another.</span></span> <span data-ttu-id="e79d0-180">Par exemple, les informations de connexion sont stockées dans l'instance, et non dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-180">For example, login information is stored within the instance instead of in the database.</span></span> <span data-ttu-id="e79d0-181">Lorsque vous déplacez une base de données non autonome d'une instance vers une autre instance [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], ces informations sont abandonnées.</span><span class="sxs-lookup"><span data-stu-id="e79d0-181">When you move a non-contained database from one instance to another instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], this information is left behind.</span></span> <span data-ttu-id="e79d0-182">Vous devez identifier les informations manquantes et les déplacer avec votre base de données vers la nouvelle instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-182">You must identify the missing information and move it with your database to the new instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="e79d0-183">Le processus peut nécessiter du temps et s'avérer difficile.</span><span class="sxs-lookup"><span data-stu-id="e79d0-183">This process can be difficult and time-consuming.</span></span>  
  
 <span data-ttu-id="e79d0-184">La base de données partiellement autonome peut stocker des informations importantes dans la base de données afin que celle-ci dispose toujours des informations après le déplacement.</span><span class="sxs-lookup"><span data-stu-id="e79d0-184">The partially contained database can store important information in the database so the database still has the information after it is moved.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e79d0-185">Une base de données partiellement autonome peut fournir de la documentation décrivant ces fonctionnalités utilisées par une base de données qui ne peut pas être séparée de l'instance.</span><span class="sxs-lookup"><span data-stu-id="e79d0-185">A partially contained database can provide documentation describing those features that are used by a database that cannot be separated from the instance.</span></span> <span data-ttu-id="e79d0-186">Cela inclut une liste d'autres bases de données reliées entre elles, des paramètres système que la base de données requiert mais sans relation contenant-contenu, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="e79d0-186">This includes a list of other interrelated databases, system settings that the database requires but cannot be contained, and so on.</span></span>  
  
### <a name="benefit-of-contained-database-users-with-alwayson"></a><span data-ttu-id="e79d0-187">Avantage des utilisateurs de base de données autonome avec AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="e79d0-187">Benefit of Contained Database Users with AlwaysOn</span></span>  
 <span data-ttu-id="e79d0-188">En réduisant les liens à l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], les bases de données partiellement autonomes peuvent être utiles pendant le basculement lorsque vous utilisez [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e79d0-188">By reducing the ties to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], partially contained databases can be useful during failover when you use [!INCLUDE[ssHADR](../../includes/sshadr-md.md)].</span></span>  
  
 <span data-ttu-id="e79d0-189">La création d'utilisateurs autonomes permet à l'utilisateur de se connecter directement à la base de données autonome.</span><span class="sxs-lookup"><span data-stu-id="e79d0-189">Creating contained users enables the user to connect directly to the contained database.</span></span> <span data-ttu-id="e79d0-190">Il s'agit d'une fonctionnalité très importante dans les scénarios de haute disponibilité et de récupération d'urgence, notamment dans le cadre d'une solution AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="e79d0-190">This is a very significant feature in high availability and disaster recovery scenarios such as in an AlwaysOn solution.</span></span> <span data-ttu-id="e79d0-191">Si les utilisateurs sont des utilisateurs à relation contenant-contenu, en cas de basculement, les personnes peuvent se connecter au serveur secondaire sans créer de connexions sur l'instance hébergeant le serveur secondaire.</span><span class="sxs-lookup"><span data-stu-id="e79d0-191">If the users are contained users, in case of failover, people would be able to connect to the secondary without creating logins on the instance hosting the secondary.</span></span> <span data-ttu-id="e79d0-192">Ceci constitue un avantage immédiat.</span><span class="sxs-lookup"><span data-stu-id="e79d0-192">This provides an immediate benefit.</span></span> <span data-ttu-id="e79d0-193">Pour plus d’informations, consultez [Vue d’ensemble des groupes de disponibilité Always On &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) et [Conditions préalables requises, restrictions et recommandations pour les groupes de disponibilité Always On &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="e79d0-193">For more information, see [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) and [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
### <a name="initial-database-development"></a><span data-ttu-id="e79d0-194">Développement initial de la base de données</span><span class="sxs-lookup"><span data-stu-id="e79d0-194">Initial Database Development</span></span>  
 <span data-ttu-id="e79d0-195">Étant donné qu'un développeur ne peut pas savoir où une nouvelle base de données sera déployée, diminuer les impacts environnementaux déployés sur la base de données réduit le travail et les difficultés du développeur.</span><span class="sxs-lookup"><span data-stu-id="e79d0-195">Because a developer may not know where a new database will be deployed, limiting the deployed environmental impacts on the database lessens the work and concern for the developer.</span></span> <span data-ttu-id="e79d0-196">Dans le modèle sans relation contenant-contenu, le développeur doit prendre en considération les impacts environnementaux potentiels sur la nouvelle base de données et le nouveau programme.</span><span class="sxs-lookup"><span data-stu-id="e79d0-196">In the non-contained model, the developer must consider possible environmental impacts on the new database and program accordingly.</span></span> <span data-ttu-id="e79d0-197">Toutefois, en utilisant des bases de données partiellement autonomes, les développeurs peuvent détecter les impacts au niveau de l'instance sur la base de données et les difficultés au niveau de l'instance pour le développeur.</span><span class="sxs-lookup"><span data-stu-id="e79d0-197">However, by using partially contained databases, developers can detect instance-level impacts on the database and instance-level concerns for the developer.</span></span>  
  
### <a name="database-administration"></a><span data-ttu-id="e79d0-198">Administration de bases de données</span><span class="sxs-lookup"><span data-stu-id="e79d0-198">Database Administration</span></span>  
 <span data-ttu-id="e79d0-199">La gestion des paramètres de base de données dans la base de données, plutôt que dans la base de données master, permet à chaque propriétaire de la base de données d'avoir plus de contrôle sur sa base de données, sans donner au propriétaire de la base de données l'autorisation **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="e79d0-199">Maintaining database settings in the database, instead of in the master database, lets each database owner have more control over their database, without giving the database owner **sysadmin** permission.</span></span>  
  
##  <a name="limitations"></a><a name="Limitations"></a> <span data-ttu-id="e79d0-200">Limitations</span><span class="sxs-lookup"><span data-stu-id="e79d0-200">Limitations</span></span>  
 <span data-ttu-id="e79d0-201">Les bases de données partiellement autonomes n'autorisent pas les fonctionnalités suivantes.</span><span class="sxs-lookup"><span data-stu-id="e79d0-201">Partially contained databases do not allow the following features.</span></span>  
  
-   <span data-ttu-id="e79d0-202">Les bases de données partiellement autonomes ne peuvent pas utiliser de réplication, de capture des données modifiées ou de suivi des modifications.</span><span class="sxs-lookup"><span data-stu-id="e79d0-202">Partially contained databases cannot use replication, change data capture, or change tracking.</span></span>  
  
-   <span data-ttu-id="e79d0-203">Procédures numérotées</span><span class="sxs-lookup"><span data-stu-id="e79d0-203">Numbered procedures</span></span>  
  
-   <span data-ttu-id="e79d0-204">les objets liés par schéma qui dépendent de fonctions intégrées avec des modifications de classement ;</span><span class="sxs-lookup"><span data-stu-id="e79d0-204">Schema-bound objects that depend on built-in functions with collation changes</span></span>  
  
-   <span data-ttu-id="e79d0-205">la modification de liaison résultant des modifications de classement, notamment les références aux objets, les colonnes, les symboles ou les types.</span><span class="sxs-lookup"><span data-stu-id="e79d0-205">Binding change resulting from collation changes, including references to objects, columns, symbols, or types.</span></span>  
  
-   <span data-ttu-id="e79d0-206">la réplication, la capture de données modifiées et le suivi des modifications.</span><span class="sxs-lookup"><span data-stu-id="e79d0-206">Replication, change data capture, and change tracking.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="e79d0-207">Les procédures stockées temporaires sont actuellement autorisées.</span><span class="sxs-lookup"><span data-stu-id="e79d0-207">Temporary stored procedures are currently permitted.</span></span> <span data-ttu-id="e79d0-208">Étant donné que les procédures stockées temporaires violent l’autonomie, il ne faut pas s'attendre à leur prise en charge dans les futures versions d'une base de données autonome.</span><span class="sxs-lookup"><span data-stu-id="e79d0-208">Because temporary stored procedures breach containment, they are not expected to be supported in future versions of contained database.</span></span>  
  
##  <a name="identifying-database-containment"></a><a name="Identifying"></a> <span data-ttu-id="e79d0-209">Identification de base de données à relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="e79d0-209">Identifying Database Containment</span></span>  
 <span data-ttu-id="e79d0-210">Il existe deux outils qui permettent d'identifier l'état de la relation contenant-contenu de la base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-210">There are two tools to help identify the containment status of the database.</span></span> <span data-ttu-id="e79d0-211">[sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) est une vue qui montre toutes les entités potentiellement sans relation contenant-contenu dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-211">The [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql) is a view that shows all the potentially uncontained entities in the database.</span></span> <span data-ttu-id="e79d0-212">L'événement database_uncontained_usage se produit lorsqu'une entité sans relation contenant-contenu réelle est identifiée au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="e79d0-212">The database_uncontained_usage event occurs when any actual uncontained entity is identified at run time.</span></span>  
  
### <a name="sysdm_db_uncontained_entities"></a><span data-ttu-id="e79d0-213">sys.dm_db_uncontained_entities</span><span class="sxs-lookup"><span data-stu-id="e79d0-213">sys.dm_db_uncontained_entities</span></span>  
 <span data-ttu-id="e79d0-214">Cette vue affiche les entités de la base de données susceptibles d'être sans relation contenant-contenu, telles que celles qui dépassent la limite de base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-214">This view shows any entities in the database that have the potential to be uncontained, such as those that cross-the database boundary.</span></span> <span data-ttu-id="e79d0-215">Cela inclut les entités d'utilisateur qui peuvent utiliser des objets à l'extérieur du modèle de base de données.</span><span class="sxs-lookup"><span data-stu-id="e79d0-215">This includes those user entities that may use objects outside the database model.</span></span> <span data-ttu-id="e79d0-216">Cependant, comme la relation contenant-contenu de certaines entités (par exemple, celles utilisant SQL dynamique) ne peut être déterminée qu'au moment de l'exécution, la vue peut afficher des entités qui ne sont pas réellement sans relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="e79d0-216">However, because the containment of some entities (for example, those using dynamic SQL) cannot be determined until run time, the view may show some entities that are not actually uncontained.</span></span> <span data-ttu-id="e79d0-217">Pour plus d’informations, consultez [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="e79d0-217">For more information, see [sys.dm_db_uncontained_entities &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-uncontained-entities-transact-sql).</span></span>  
  
### <a name="database_uncontained_usage-event"></a><span data-ttu-id="e79d0-218">database_uncontained_usage, événement</span><span class="sxs-lookup"><span data-stu-id="e79d0-218">database_uncontained_usage event</span></span>  
 <span data-ttu-id="e79d0-219">Ce XEvent se produit chaque fois qu'une entité sans relation contenant-contenu est identifiée lors de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="e79d0-219">This XEvent occurs whenever an uncontained entity is identified at run time.</span></span> <span data-ttu-id="e79d0-220">Cela inclut des entités provenant du code client.</span><span class="sxs-lookup"><span data-stu-id="e79d0-220">This includes entities originated in client code.</span></span> <span data-ttu-id="e79d0-221">Ce XEvent ne se produit que pour les entités sans relation contenant-contenu réelles.</span><span class="sxs-lookup"><span data-stu-id="e79d0-221">This XEvent will occur only for actual uncontained entities.</span></span> <span data-ttu-id="e79d0-222">Toutefois, l'événement ne se produit qu'au moment de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="e79d0-222">However, the event only occurs at run time.</span></span> <span data-ttu-id="e79d0-223">Par conséquent, toutes les entités d'utilisateur sans relation contenant-contenu que vous n'avez pas exécutées ne seront pas identifiées par ce XEvent</span><span class="sxs-lookup"><span data-stu-id="e79d0-223">Therefore, any uncontained user entities you have not run will not be identified by this XEvent</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="e79d0-224">Contenu associé</span><span class="sxs-lookup"><span data-stu-id="e79d0-224">Related Content</span></span>  
 [<span data-ttu-id="e79d0-225">Fonctionnalités modifiées &#40;base de données à relation contenant-contenu&#41;</span><span class="sxs-lookup"><span data-stu-id="e79d0-225">Modified Features &#40;Contained Database&#41;</span></span>](modified-features-contained-database.md)  
  
 [<span data-ttu-id="e79d0-226">Classements de base de données autonome</span><span class="sxs-lookup"><span data-stu-id="e79d0-226">Contained Database Collations</span></span>](contained-database-collations.md)  
  
 [<span data-ttu-id="e79d0-227">Meilleures pratiques de sécurité recommandées avec les bases de données autonomes</span><span class="sxs-lookup"><span data-stu-id="e79d0-227">Security Best Practices with Contained Databases</span></span>](security-best-practices-with-contained-databases.md)  
  
 [<span data-ttu-id="e79d0-228">Migrer vers une base de données partiellement autonome</span><span class="sxs-lookup"><span data-stu-id="e79d0-228">Migrate to a Partially Contained Database</span></span>](migrate-to-a-partially-contained-database.md)  
  
  
