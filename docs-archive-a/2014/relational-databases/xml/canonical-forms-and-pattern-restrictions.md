---
title: Formes canoniques et restrictions de modèle | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: conceptual
helpviewer_keywords:
- pattern restrictions
- canonical forms
ms.assetid: 088314ec-7d0b-4a05-8a33-f35da5bfe59c
author: rothja
ms.author: jroth
ms.openlocfilehash: 569e8c4a01ed1eb9ae26ea9e2f6d471b9aad9fe0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87600695"
---
# <a name="canonical-forms-and-pattern-restrictions"></a><span data-ttu-id="1e680-102">Formes canoniques et restrictions de modèle</span><span class="sxs-lookup"><span data-stu-id="1e680-102">Canonical Forms and Pattern Restrictions</span></span>
  <span data-ttu-id="1e680-103">La facette de modèle XSD permet la restriction de l'espace lexical des types simples.</span><span class="sxs-lookup"><span data-stu-id="1e680-103">The XSD pattern facet allows for the restriction of the lexical space of simple types.</span></span> <span data-ttu-id="1e680-104">Quand une restriction de modèle est appliquée à un type pour lequel il existe plusieurs représentations lexicales possibles, certaines valeurs peuvent entraîner un comportement inattendu lors de la validation.</span><span class="sxs-lookup"><span data-stu-id="1e680-104">When a pattern restriction is put on a type for which there is more than one possible lexical representation, some values could cause unexpected behavior upon validation.</span></span>  
  
 <span data-ttu-id="1e680-105">Ce comportement se produit car les représentations lexicales de ces valeurs ne sont pas stockées dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="1e680-105">This behavior occurs because lexical representations of these values are not stored in the database.</span></span> <span data-ttu-id="1e680-106">Par conséquent, les valeurs sont converties en leurs représentations canoniques lorsqu'elles sont sérialisées pour la sortie.</span><span class="sxs-lookup"><span data-stu-id="1e680-106">Therefore, the values are converted to their canonical representations when serialized as output.</span></span> <span data-ttu-id="1e680-107">Si un document contient une valeur dont la forme canonique n'est pas conforme à la restriction de modèle propre à son type, il est rejeté si un utilisateur tente de réinsérer la valeur.</span><span class="sxs-lookup"><span data-stu-id="1e680-107">If a document contains a value whose canonical form does not comply with the pattern restriction for its type, the document is rejected if a user tries to reinsert it.</span></span>  
  
 <span data-ttu-id="1e680-108">Pour empêcher cela, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] rejette tout document XML comportant des valeurs ne pouvant pas être réinsérées, en raison de la violation des restrictions de modèle par leurs formes canoniques.</span><span class="sxs-lookup"><span data-stu-id="1e680-108">To prevent this, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] rejects any XML document that contains values that cannot be reinserted, because of the violation of pattern restrictions by their canonical forms.</span></span> <span data-ttu-id="1e680-109">Ainsi, la valeur « 33 000 » n’est pas validée par rapport à un type dérivé de **xs:decimal** ayant pour restriction de modèle « 33\\.0+ ».</span><span class="sxs-lookup"><span data-stu-id="1e680-109">For example, the value "33.000" does not validate against a type derived from **xs:decimal** with a pattern restriction of "33\\.0+".</span></span> <span data-ttu-id="1e680-110">Bien que « 33 000 » soit conforme à ce modèle, la forme canonique, « 33 », elle, ne l'est pas.</span><span class="sxs-lookup"><span data-stu-id="1e680-110">Although "33.000" complies with this pattern, the canonical form, "33", does not.</span></span>  
  
 <span data-ttu-id="1e680-111">Par conséquent, vous devez procéder avec prudence lorsque vous appliquez des facettes de modèle à des types dérivés des types primitifs suivants : `boolean`, `decimal`, `float`, `double`, `dateTime`, `time`, `date`, `hexBinary` et `base64Binary`.</span><span class="sxs-lookup"><span data-stu-id="1e680-111">Therefore, you should be careful when you apply pattern facets to types derived from the following primitive types: `boolean`, `decimal`, `float`, `double`, `dateTime`, `time`, `date`, `hexBinary`, and `base64Binary`.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="1e680-112">émet un avertissement lorsque vous ajoutez de tels composants à une collection de schémas.</span><span class="sxs-lookup"><span data-stu-id="1e680-112">issues a warning when you add any such components to a schema collection.</span></span>  
  
 <span data-ttu-id="1e680-113">Une sérialisation imprécise de valeurs en virgule flottante donne lieu à un problème similaire.</span><span class="sxs-lookup"><span data-stu-id="1e680-113">Imprecise serialization of floating-point values has a similar problem.</span></span> <span data-ttu-id="1e680-114">Du fait de l'algorithme de sérialisation en virgule flottante utilisé par [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], il est possible pour des valeurs similaires de partager la même forme canonique.</span><span class="sxs-lookup"><span data-stu-id="1e680-114">Because of the floating-point serialization algorithm used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], it is possible for similar values to share the same canonical form.</span></span> <span data-ttu-id="1e680-115">Quand une valeur en virgule flottante est sérialisée puis réinsérée, sa valeur peut varier légèrement.</span><span class="sxs-lookup"><span data-stu-id="1e680-115">When a floating-point value is serialized and then reinserted, its value may change slightly.</span></span> <span data-ttu-id="1e680-116">En de rares occasions, cela peut produire une valeur enfreignant l'une des facettes suivantes propres à son type au moment de sa réinsertion : **enumeration**, **minInclusive**, **minExclusive**, **maxInclusive**ou **maxExclusive**.</span><span class="sxs-lookup"><span data-stu-id="1e680-116">In rare cases, this may result in a value that violates any of the following facets for its type on reinsertion: **enumeration**, **minInclusive**, **minExclusive**, **maxInclusive**, or **maxExclusive**.</span></span> <span data-ttu-id="1e680-117">Pour éviter ce problème, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] rejette toutes les valeurs des types dérivés de `xs:float` ou de `xs:double` ne pouvant pas être sérialisées et réinsérées.</span><span class="sxs-lookup"><span data-stu-id="1e680-117">To prevent this, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] rejects any values of types derived from `xs:float` or `xs:double` that cannot be serialized and reinserted.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1e680-118">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="1e680-118">See Also</span></span>  
 [<span data-ttu-id="1e680-119">Spécifications et limitations relatives aux collections de schémas XML sur le serveur</span><span class="sxs-lookup"><span data-stu-id="1e680-119">Requirements and Limitations for XML Schema Collections on the Server</span></span>](requirements-and-limitations-for-xml-schema-collections-on-the-server.md)  
  
  
