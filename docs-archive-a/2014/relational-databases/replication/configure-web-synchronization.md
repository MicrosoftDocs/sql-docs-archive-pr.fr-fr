---
title: Configurer la synchronisation Web | Microsoft Docs
ms.custom: ''
ms.date: 01/10/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- SQL10.REP.CONFIGWEBSYNCWIZARD.SUBTYPE.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.CLIENTAUTH.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.WEBSERV.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.DIRACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.VIRDIRINFO.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.AUTHACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.COMPLETEWIZ.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.ANONACCESS.F1
- SQL10.REP.CONFIGWEBSYNCWIZARD.SNAPSHARE.F1
helpviewer_keywords:
- Web synchronization, security best practices
- Web synchronization, configuring
ms.assetid: 21f8e4d4-cd07-4856-98f0-9c9890ebbc82
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 406175533b92d13dce8c14b91b654fbb6099dc22
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87600827"
---
# <a name="configure-web-synchronization"></a><span data-ttu-id="ad50a-102">Configurer la synchronisation Web</span><span class="sxs-lookup"><span data-stu-id="ad50a-102">Configure Web Synchronization</span></span>
  <span data-ttu-id="ad50a-103">L'option de synchronisation Web de la réplication de fusion [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] permet de répliquer les données à l'aide du protocole HTTPS sur Internet.</span><span class="sxs-lookup"><span data-stu-id="ad50a-103">The Web synchronization option for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Merge Replication enables data replication using the HTTPS protocol over the Internet.</span></span> <span data-ttu-id="ad50a-104">Pour utiliser la synchronisation Web, vous devez d'abord effectuer les actions de configuration suivantes :</span><span class="sxs-lookup"><span data-stu-id="ad50a-104">To use Web synchronization, you first need to perform the following configuration actions:</span></span>  
  
1.  <span data-ttu-id="ad50a-105">Créez de nouveaux comptes de domaine et mappez les connexions [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ad50a-105">Create new domain accounts and map [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] logins.</span></span>  
  
2.  <span data-ttu-id="ad50a-106">Configurez l'ordinateur qui exécute [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Information Services (IIS) pour synchroniser les abonnements.</span><span class="sxs-lookup"><span data-stu-id="ad50a-106">Configure the computer that is running [!INCLUDE[msCoName](../../includes/msconame-md.md)] Internet Information Services (IIS) to synchronize subscriptions.</span></span>  
  
3.  <span data-ttu-id="ad50a-107">Configurez une publication de fusion pour autoriser la synchronisation Web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-107">Configure a merge publication to allow Web synchronization.</span></span>  
  
4.  <span data-ttu-id="ad50a-108">Configurez un ou plusieurs abonnements de sorte qu'ils utilisent la synchronisation Web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-108">Configure one or more subscriptions to use Web synchronization.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ad50a-109">Si vous envisagez de répliquer d'importants volumes de données ou d'utiliser des types de données volumineuses, tels que `varchar(max)`, lisez la section « Réplication d'importants volumes de données » dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="ad50a-109">If you plan to replicate large volumes of data or use large data types such as `varchar(max)`, read the section "Replicating Large Volumes of Data" in this topic.</span></span>  
  
 <span data-ttu-id="ad50a-110">Pour configurer correctement la synchronisation Web, vous devez décider comment configurer la sécurité pour répondre à vos besoins et stratégies spécifiques.</span><span class="sxs-lookup"><span data-stu-id="ad50a-110">To successfully set up Web synchronization, you must decide how you will configure security to meet your particular requirements and policies.</span></span> <span data-ttu-id="ad50a-111">Il est préférable de prendre ces décisions et de créer les comptes nécessaires avant d'essayer de configurer IIS, la publication et les abonnements.</span><span class="sxs-lookup"><span data-stu-id="ad50a-111">It is best to make these decisions and create the necessary accounts before you attempt to configure IIS, the publication, and subscriptions.</span></span>  
  
 <span data-ttu-id="ad50a-112">Dans les procédures qui suivent, une configuration de la sécurité simplifiée utilisant des comptes locaux est décrite, pour des raisons de concision.</span><span class="sxs-lookup"><span data-stu-id="ad50a-112">In the procedures that follow, a simplified security configuration using local accounts is described, for brevity.</span></span> <span data-ttu-id="ad50a-113">Cette configuration simplifiée est appropriée pour les installations où IIS, le serveur de publication et le serveur de distribution [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] s'exécutent sur le même ordinateur, bien que l'utilisation d'une topologie à plusieurs serveurs soit beaucoup plus vraisemblable (et recommandée) pour une installation de production.</span><span class="sxs-lookup"><span data-stu-id="ad50a-113">This simplified configuration is suitable for installations where both IIS and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Publisher and Distributor are running on the same computer, even though it is much more likely (and recommended) that you will use a multiple-server topology for a production installation.</span></span> <span data-ttu-id="ad50a-114">Vous pouvez substituer des comptes de domaine aux comptes locaux dans les procédures.</span><span class="sxs-lookup"><span data-stu-id="ad50a-114">You can substitute domain accounts for the local accounts in the procedures.</span></span>  
  
## <a name="creating-new-accounts-and-mapping-sql-server-logins"></a><span data-ttu-id="ad50a-115">Création de nouveaux comptes et mappage des connexions SQL Server</span><span class="sxs-lookup"><span data-stu-id="ad50a-115">Creating New Accounts and Mapping SQL Server Logins</span></span>  
 <span data-ttu-id="ad50a-116">L'écouteur de réplication [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (replisapi.dll) se connecte au serveur de publication en empruntant l'identité du compte spécifié pour le pool d'applications associé au site Web de réplication.</span><span class="sxs-lookup"><span data-stu-id="ad50a-116">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (replisapi.dll) connects to the Publisher by impersonating the account specified for the application pool that is associated with the replication web site.</span></span>  
  
 <span data-ttu-id="ad50a-117">Le compte utilisé pour l'écouteur de réplication [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] doit avoir les autorisations décrites dans [Merge Agent Security](merge-agent-security.md), sous la section « Connexion au serveur de publication ou au serveur de distribution ».</span><span class="sxs-lookup"><span data-stu-id="ad50a-117">The account used for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener must have permissions as described in [Merge Agent Security](merge-agent-security.md), under the section "Connect to the Publisher or Distributor."</span></span> <span data-ttu-id="ad50a-118">En résumé, le compte doit :</span><span class="sxs-lookup"><span data-stu-id="ad50a-118">In summary, the account must:</span></span>  
  
-   <span data-ttu-id="ad50a-119">être membre de la liste d'accès à la publication (PAL) ;</span><span class="sxs-lookup"><span data-stu-id="ad50a-119">Be a member of the Publication Access List (PAL).</span></span>  
  
-   <span data-ttu-id="ad50a-120">être mappé à une connexion associée à un utilisateur enregistré dans la base de données de publication ;</span><span class="sxs-lookup"><span data-stu-id="ad50a-120">Be mapped to a login associated with a user in the publication database.</span></span>  
  
-   <span data-ttu-id="ad50a-121">être mappé à une connexion associée à un utilisateur enregistré dans la base de données de distribution ;</span><span class="sxs-lookup"><span data-stu-id="ad50a-121">Be mapped to a login associated with a user in the distribution database.</span></span>  
  
-   <span data-ttu-id="ad50a-122">être autorisé à lire sur le partage de fichiers d'instantanés.</span><span class="sxs-lookup"><span data-stu-id="ad50a-122">Have Read permissions on the snapshot share.</span></span>  
  
 <span data-ttu-id="ad50a-123">Si vous utilisez la réplication [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] pour la première fois, vous devez également créer des comptes et des connexions pour les agents de réplication.</span><span class="sxs-lookup"><span data-stu-id="ad50a-123">If this is the first time you are using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication, you will also need to create accounts and logins for the replication agents.</span></span> <span data-ttu-id="ad50a-124">Pour plus d'informations, consultez les sections « Configuration de la publication » et « Configuration de l'abonnement » dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="ad50a-124">For more information, see the "Configuring the Publication" and "Configuring the Subscription" sections in this topic.</span></span>  
  
 <span data-ttu-id="ad50a-125">Avant de configurer la synchronisation Web, il est recommandé de lire la section « Meilleures pratiques de sécurité pour la synchronisation Web » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="ad50a-125">Before you configure Web synchronization, we recommend that you read the "Security Best Practices for Web Synchronization" section in this topic.</span></span> <span data-ttu-id="ad50a-126">Pour plus d'informations sur la sécurité de la synchronisation Web, consultez [Security Architecture for Web Synchronization](security/security-architecture-for-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-126">For more information about Web synchronization security, see [Security Architecture for Web Synchronization](security/security-architecture-for-web-synchronization.md).</span></span>  
  
## <a name="configuring-the-computer-that-is-running-iis"></a><span data-ttu-id="ad50a-127">Configuration de l'ordinateur qui exécute IIS</span><span class="sxs-lookup"><span data-stu-id="ad50a-127">Configuring the Computer That Is Running IIS</span></span>  
 <span data-ttu-id="ad50a-128">La synchronisation Web requiert l'installation et la configuration d'IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-128">Web synchronization requires that you install and configure IIS.</span></span> <span data-ttu-id="ad50a-129">Vous devez connaître l'URL du site web de réplication pour pouvoir configurer une publication en vue d'utiliser la synchronisation web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-129">You will need the URL to the replication Web site before you can configure a publication to use Web synchronization.</span></span>  
  
<span data-ttu-id="ad50a-130">La synchronisation web est prise en charge sur IIS à compter de la version 5.0.</span><span class="sxs-lookup"><span data-stu-id="ad50a-130">Web synchronization is supported on IIS beginning with version 5.0.</span></span> <span data-ttu-id="ad50a-131">L'Assistant Configuration de la synchronisation Web n'est pas pris en charge sur IIS version 7.0.</span><span class="sxs-lookup"><span data-stu-id="ad50a-131">The Configure Web Synchronization Wizard is not supported on IIS version 7.0.</span></span> <span data-ttu-id="ad50a-132">À partir de SQL Server 2012, nous recommandons aux utilisateurs d’installer SQL Server avec la réplication pour utiliser le composant de synchronisation web sur le serveur IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-132">Beginning with SQL Server 2012, to use the web sync component on IIS server, we recommend users install SQL Server with replication.</span></span> <span data-ttu-id="ad50a-133">Il peut s’agir de l’édition gratuite de SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="ad50a-133">This can be the free SQL Server Express edition.</span></span>  
  
 <span data-ttu-id="ad50a-134">SSL est obligatoire pour la synchronisation web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-134">SSL is required for Web synchronization.</span></span> <span data-ttu-id="ad50a-135">Vous aurez besoin d'un certificat de sécurité délivré par une autorité de certification.</span><span class="sxs-lookup"><span data-stu-id="ad50a-135">You will need a security certificate issued by a certification authority.</span></span> <span data-ttu-id="ad50a-136">Vous pouvez utiliser un certificat de sécurité auto-émis à des fins de test uniquement.</span><span class="sxs-lookup"><span data-stu-id="ad50a-136">For testing purposes only, you can use a self-issued security certificate.</span></span>  
  
  
 <span data-ttu-id="ad50a-137">**Pour configurer IIS pour la synchronisation Web**</span><span class="sxs-lookup"><span data-stu-id="ad50a-137">**To configure IIS for Web synchronization**</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="ad50a-138">: [Configurer IIS pour la synchronisation web](configure-iis-for-web-synchronization.md)</span><span class="sxs-lookup"><span data-stu-id="ad50a-138">: [Configure IIS for Web Synchronization](configure-iis-for-web-synchronization.md)</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="ad50a-139">: [Configurer IIS 7 pour la synchronisation web](configure-iis-7-for-web-synchronization.md)</span><span class="sxs-lookup"><span data-stu-id="ad50a-139">: [Configure IIS 7 for Web Synchronization](configure-iis-7-for-web-synchronization.md)</span></span>  
  
## <a name="creating-a-web-garden"></a><span data-ttu-id="ad50a-140">Création d'un domaine privé Web</span><span class="sxs-lookup"><span data-stu-id="ad50a-140">Creating a Web Garden</span></span>  
 <span data-ttu-id="ad50a-141">L'écouteur de réplication [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] prend en charge deux opérations de synchronisation simultanées par thread.</span><span class="sxs-lookup"><span data-stu-id="ad50a-141">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener supports two concurrent synchronization operations per thread.</span></span> <span data-ttu-id="ad50a-142">Si cette limite est dépassée, l'écouteur de réplication risque de cesser de répondre.</span><span class="sxs-lookup"><span data-stu-id="ad50a-142">Exceeding this limit may cause the Replication Listener to stop responding.</span></span> <span data-ttu-id="ad50a-143">Le nombre de threads alloués à replisapi.dll est déterminé par la propriété Nombre maximal de processus de travail du pool d'applications.</span><span class="sxs-lookup"><span data-stu-id="ad50a-143">The number of threads allocated to replisapi.dll is determined by the application pool Maximum Worker Processes property.</span></span> <span data-ttu-id="ad50a-144">Par défaut, cette propriété a la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="ad50a-144">By default, this property is set at 1.</span></span>  
  
 <span data-ttu-id="ad50a-145">Vous pouvez prendre en charge un nombre supérieur d'opérations de synchronisation simultanées par UC en augmentant la valeur de la propriété Nombre maximal de processus de travail.</span><span class="sxs-lookup"><span data-stu-id="ad50a-145">You can support a greater number of concurrent synchronization operations per CPU by increasing the Maximum Worker Process property value.</span></span> <span data-ttu-id="ad50a-146">La montée en puissance parallèle en augmentant le nombre de processus de travail par UC s'appelle la création d'un « domaine privé Web ».</span><span class="sxs-lookup"><span data-stu-id="ad50a-146">Scaling out by increasing the number of worker processes per CPU is known as creating a "Web garden."</span></span>  
  
 <span data-ttu-id="ad50a-147">Le domaine privé Web autorisera plus de deux abonnés à se synchroniser en même temps.</span><span class="sxs-lookup"><span data-stu-id="ad50a-147">Web gardening will allow more than two Subscribers to synchronize at the same time.</span></span> <span data-ttu-id="ad50a-148">Cela augmente également l'utilisation du processeur par replisapi.dll, ce qui peut nuire aux performances générales du serveur.</span><span class="sxs-lookup"><span data-stu-id="ad50a-148">It will also increase CPU utilization by replisapi.dll, which can negatively impact overall server performance.</span></span> <span data-ttu-id="ad50a-149">Il est important de prendre ces éléments en compte lorsque vous choisissez une valeur pour Nombre maximal de processus de travail.</span><span class="sxs-lookup"><span data-stu-id="ad50a-149">It is important to balance these considerations when you choose a value for Maximum Worker Processes.</span></span>  
  
#### <a name="to-increase-maximum-worker-processes-in-iis-7"></a><span data-ttu-id="ad50a-150">Pour augmenter le nombre maximal de processus de travail dans IIS 7</span><span class="sxs-lookup"><span data-stu-id="ad50a-150">To increase Maximum Worker Processes in IIS 7</span></span>  
  
1.  <span data-ttu-id="ad50a-151">Dans **Gestionnaire des services Internet (IIS)** , développez le nœud du serveur local, puis cliquez sur le nœud **Pool d'applications** .</span><span class="sxs-lookup"><span data-stu-id="ad50a-151">In **Internet Information Services (IIS) Manager**, expand the local server node, and then click on the **Application Pool** node.</span></span>  
  
2.  <span data-ttu-id="ad50a-152">Sélectionnez le pool d'applications associé au site de synchronisation Web, puis cliquez sur **Paramètres avancés** dans le volet **Actions** .</span><span class="sxs-lookup"><span data-stu-id="ad50a-152">Select the application pool associated with the Web synchronization site, and then click **Advanced Settings** on the **Actions** pane.</span></span>  
  
3.  <span data-ttu-id="ad50a-153">Dans la boîte de dialogue Paramètres avancés, sous l'en-tête **Traiter le modèle** , cliquez sur la ligne intitulée **Nombre maximal de processus de travail**.</span><span class="sxs-lookup"><span data-stu-id="ad50a-153">On the Advanced Settings dialog, under the **Process Model** heading, click the row labeled **Maximum Worker Processes**.</span></span> <span data-ttu-id="ad50a-154">Modifiez la valeur de la propriété, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="ad50a-154">Change the property value, and then click **OK**.</span></span>  
  
## <a name="configuring-the-publication"></a><span data-ttu-id="ad50a-155">Configuration de la publication</span><span class="sxs-lookup"><span data-stu-id="ad50a-155">Configuring the Publication</span></span>  
 <span data-ttu-id="ad50a-156">Pour utiliser la synchronisation Web, vous devez créer une publication de la même manière que pour une topologie de fusion standard.</span><span class="sxs-lookup"><span data-stu-id="ad50a-156">To use Web synchronization, create a publication in the same way that you would for a standard merge topology.</span></span> <span data-ttu-id="ad50a-157">Pour plus d’informations, consultez [Publier des données et des objets de base de données](publish/publish-data-and-database-objects.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-157">For more information, see [Publish Data and Database Objects](publish/publish-data-and-database-objects.md).</span></span>  
  
 <span data-ttu-id="ad50a-158">Une fois la publication créée, activez l'option permettant d'autoriser la synchronisation Web à l'aide d'une des méthodes suivantes : [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)]ou les objets RMO (Replication Management Objects).</span><span class="sxs-lookup"><span data-stu-id="ad50a-158">After the publication is created, enable the option to allow for Web synchronization by using one of the following methods: [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span> <span data-ttu-id="ad50a-159">Pour activer la synchronisation Web, vous devez fournir l'adresse du serveur Web pour les connexions des abonnés.</span><span class="sxs-lookup"><span data-stu-id="ad50a-159">To enable Web synchronization, you will need to supply the Web server address for Subscriber connections.</span></span>  
  
 <span data-ttu-id="ad50a-160">Si vous utilisez un serveur de publication pour la première fois, vous devez également configurer un serveur de distribution et un partage de fichiers d'instantanés.</span><span class="sxs-lookup"><span data-stu-id="ad50a-160">If you are using a Publisher for the first time, you must also configure a Distributor and a snapshot share.</span></span> <span data-ttu-id="ad50a-161">L'Agent de fusion de chaque Abonné doit disposer d'autorisations de lecture sur le partage d'instantanés.</span><span class="sxs-lookup"><span data-stu-id="ad50a-161">The Merge Agent at each Subscriber must have read permissions on the snapshot share.</span></span> <span data-ttu-id="ad50a-162">Pour plus d’informations, consultez [Configurer la distribution](configure-distribution.md) et [Sécuriser le dossier d’instantanés](security/secure-the-snapshot-folder.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-162">For more information, see [Configure Distribution](configure-distribution.md) and [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
 <span data-ttu-id="ad50a-163">`gen` est un mot réservé dans les fichiers XML de websync.</span><span class="sxs-lookup"><span data-stu-id="ad50a-163">`gen` is a reserved word in websync xml files.</span></span> <span data-ttu-id="ad50a-164">Ne pas tentez de publier des tables contenant des colonnes nommées `gen`.</span><span class="sxs-lookup"><span data-stu-id="ad50a-164">Do not attempt to publish tables containing columns named `gen`.</span></span>  
  
## <a name="configuring-the-subscription"></a><span data-ttu-id="ad50a-165">Configuration de l'abonnement</span><span class="sxs-lookup"><span data-stu-id="ad50a-165">Configuring the Subscription</span></span>  
 <span data-ttu-id="ad50a-166">Après avoir activé une publication et configuré IIS, créez un abonnement par extraction et spécifiez que cet abonnement doit être synchronisé à l'aide d'IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-166">After you enable a publication and configure IIS, create a pull subscription and specify that the pull subscription should synchronize by using IIS.</span></span> <span data-ttu-id="ad50a-167">(La synchronisation Web est prise en charge uniquement pour les abonnements par extraction de données.)</span><span class="sxs-lookup"><span data-stu-id="ad50a-167">(Web synchronization is supported only for pull subscriptions.)</span></span>  
  
## <a name="upgrading-from-an-earlier-version-of-sql-server"></a><span data-ttu-id="ad50a-168">Mise à niveau à partir d'une version antérieure de SQL Server</span><span class="sxs-lookup"><span data-stu-id="ad50a-168">Upgrading from an Earlier Version of SQL Server</span></span>  
 <span data-ttu-id="ad50a-169">Si vous disposez d'une topologie de la synchronisation Web existante configurée et si vous mettez à niveau [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], vous devez vous assurer que la version la plus récente de Replisapi.dll est copiée dans le répertoire virtuel utilisé par la synchronisation Web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-169">If you have an existing Web synchronization topology configured and you upgrade [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you must ensure that the latest version of Replisapi.dll is copied to the virtual directory used by Web synchronization.</span></span> <span data-ttu-id="ad50a-170">Par défaut, la version la plus récente de Replisapi.dll se trouve dans C:\Program Files\Microsoft SQL Server \\<nnn\>\COM.</span><span class="sxs-lookup"><span data-stu-id="ad50a-170">By default, the latest version of Replisapi.dll is located in C:\Program Files\Microsoft SQL Server\\<nnn\>\COM.</span></span>  
  
## <a name="replicating-large-volumes-of-data"></a><span data-ttu-id="ad50a-171">Réplication d'importants volumes de données</span><span class="sxs-lookup"><span data-stu-id="ad50a-171">Replicating Large Volumes of Data</span></span>  
 <span data-ttu-id="ad50a-172">Pour éviter les problèmes de mémoire au niveau des ordinateurs des abonnés, la synchronisation Web utilise une taille maximale par défaut de 100 Mo pour le fichier XML utilisé pour le transfert des modifications.</span><span class="sxs-lookup"><span data-stu-id="ad50a-172">To help avoid potential memory problems on Subscriber computers Web synchronization uses a default maximum size of 100 MB for the XML file used to transfer changes.</span></span> <span data-ttu-id="ad50a-173">La limite peut être augmentée en définissant la clé de Registre suivante :</span><span class="sxs-lookup"><span data-stu-id="ad50a-173">The limit can be raised by setting the following registry key:</span></span>  
  
 <span data-ttu-id="ad50a-174">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\Replication**</span><span class="sxs-lookup"><span data-stu-id="ad50a-174">**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\Replication**</span></span>  
  
 <span data-ttu-id="ad50a-175">**WebSyncMaxXmlSize DWORD 2000000**</span><span class="sxs-lookup"><span data-stu-id="ad50a-175">**WebSyncMaxXmlSize DWORD 2000000**</span></span>  
  
 <span data-ttu-id="ad50a-176">La plage des valeurs acceptables pour cette clé est de 100 Mo à 4 Go.</span><span class="sxs-lookup"><span data-stu-id="ad50a-176">The range of acceptable values for this key is 100 MB to 4GB.</span></span> <span data-ttu-id="ad50a-177">La valeur est spécifiée en Ko.</span><span class="sxs-lookup"><span data-stu-id="ad50a-177">The value is specified in KB.</span></span> <span data-ttu-id="ad50a-178">Définir ce paramètre avec une valeur élevée ne garantit pas que vous puissiez synchroniser ce volume de données.</span><span class="sxs-lookup"><span data-stu-id="ad50a-178">Setting this parameter to a high value does not guarantee that you can synchronize that amount of data.</span></span> <span data-ttu-id="ad50a-179">La limite effective est contrainte par la mémoire contiguë qui est disponible sur l'ordinateur de l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="ad50a-179">The effective limit is constrained by how much contiguous memory is available on the Subscriber computer.</span></span> <span data-ttu-id="ad50a-180">Si vous avez besoin d'une valeur supérieure à 100 Mo, nous vous recommandons d'augmenter la valeur de façon incrémentielle et de tester la consommation de mémoire avec une charge de travail standard au niveau de l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="ad50a-180">If you must have a value larger than 100 MB, we recommend that you increase the value incrementally and test memory consumption with a typical workload on the Subscriber.</span></span>  
  
 <span data-ttu-id="ad50a-181">La taille maximale du fichier XML est de 4 Go, mais la réplication synchronise les modifications de ce fichier dans des lots.</span><span class="sxs-lookup"><span data-stu-id="ad50a-181">The maximum size for the XML file is 4 GB, but replication synchronizes the changes from that file in batches.</span></span> <span data-ttu-id="ad50a-182">La taille maximale des lots de données et de métadonnées est de 25 Mo.</span><span class="sxs-lookup"><span data-stu-id="ad50a-182">The maximum batch size of data and metadata is 25 MB.</span></span> <span data-ttu-id="ad50a-183">Vous devez vous assurer que le volume de données de chaque lot ne dépasse pas approximativement 20 Mo, ce qui permet de prendre en charge les métadonnées et toute surcharge additionnelle.</span><span class="sxs-lookup"><span data-stu-id="ad50a-183">You must ensure that the data in each batch does not exceed approximately 20 MB, which allows for metadata and any other overhead.</span></span> <span data-ttu-id="ad50a-184">Cette limite a les conséquences suivantes :</span><span class="sxs-lookup"><span data-stu-id="ad50a-184">This limit has the following implications:</span></span>  
  
-   <span data-ttu-id="ad50a-185">Vous ne pouvez pas répliquer une colonne qui générerait un volume de données et de métadonnées supérieur à 25 Mo.</span><span class="sxs-lookup"><span data-stu-id="ad50a-185">You cannot replicate any column that causes the data and metadata to exceed 25 MB.</span></span> <span data-ttu-id="ad50a-186">Cela peut être un problème lors de la réplication de lignes contenant des types de données volumineuses, tels que `varchar(max)`.</span><span class="sxs-lookup"><span data-stu-id="ad50a-186">This might be an issue when you are replicating rows that contain large data types, such as `varchar(max)`.</span></span>  
  
-   <span data-ttu-id="ad50a-187">Si vous répliquez d'importants volumes de données, vous pouvez être amené à ajuster la taille de lot de l'Agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="ad50a-187">If you replicate large volumes of data, you might have to adjust the Merge Agent batch size.</span></span>  
  
 <span data-ttu-id="ad50a-188">La taille de lot pour la réplication de fusion est mesurée en *générations*, lesquelles sont des collections de modifications par article.</span><span class="sxs-lookup"><span data-stu-id="ad50a-188">Batch size for merge replication is measured in *generations*, which are collections of changes per article.</span></span> <span data-ttu-id="ad50a-189">Le nombre de générations dans un lot est spécifié à l’aide `DownloadGenerationsPerBatch` des paramètres-et- `UploadGenerationsPerBatch` de la agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="ad50a-189">The number of generations in a batch is specified by using the-`DownloadGenerationsPerBatch` and -`UploadGenerationsPerBatch` parameters of the Merge Agent.</span></span> <span data-ttu-id="ad50a-190">Pour plus d’informations, voir [Replication Merge Agent](agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-190">For more information, see [Replication Merge Agent](agents/replication-merge-agent.md).</span></span>  
  
 <span data-ttu-id="ad50a-191">Pour d'importants volumes de données, spécifiez un petit nombre pour chaque paramètre de traitement par lot.</span><span class="sxs-lookup"><span data-stu-id="ad50a-191">For large volumes of data, specify a small number for each of the batching parameters.</span></span> <span data-ttu-id="ad50a-192">Nous vous recommandons de commencer avec une valeur de 10, puis d'ajuster cette valeur selon les besoins et les performances des applications.</span><span class="sxs-lookup"><span data-stu-id="ad50a-192">We recommend that you start with a value of 10, and then tune based on application needs and performance.</span></span> <span data-ttu-id="ad50a-193">En général, ces paramètres sont spécifiés dans un profil d'agent.</span><span class="sxs-lookup"><span data-stu-id="ad50a-193">Typically, these parameters are specified in an agent profile.</span></span> <span data-ttu-id="ad50a-194">Pour plus d'informations sur ces profils, consultez [Replication Agent Profiles](agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-194">For more information about profiles, see [Replication Agent Profiles](agents/replication-agent-profiles.md).</span></span>  
  
## <a name="security-best-practices-for-web-synchronization"></a><span data-ttu-id="ad50a-195">Meilleures pratiques de sécurité pour la synchronisation Web</span><span class="sxs-lookup"><span data-stu-id="ad50a-195">Security Best Practices for Web Synchronization</span></span>  
 <span data-ttu-id="ad50a-196">La synchronisation Web propose un vaste choix de paramètres associés à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="ad50a-196">There are many choices for security-related settings in Web synchronization.</span></span> <span data-ttu-id="ad50a-197">Nous vous recommandons l'approche suivante :</span><span class="sxs-lookup"><span data-stu-id="ad50a-197">We recommend the following approach:</span></span>  
  
-   <span data-ttu-id="ad50a-198">Le serveur de distribution et le serveur de publication [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] peuvent se trouver sur le même ordinateur (configuration courante pour la réplication de fusion).</span><span class="sxs-lookup"><span data-stu-id="ad50a-198">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributor and Publisher can be on the same computer (a typical setup for merge replication).</span></span> <span data-ttu-id="ad50a-199">IIS doit cependant être installé sur un ordinateur distinct.</span><span class="sxs-lookup"><span data-stu-id="ad50a-199">However, IIS should be installedon a separate computer.</span></span>  
  
-   <span data-ttu-id="ad50a-200">Utilisez SSL (Secure Sockets Layer) pour chiffrer la connexion entre l'Abonné et l'ordinateur exécutant IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-200">Use Secure Sockets Layer (SSL) to encrypt the connection between the Subscriber and the computer running IIS.</span></span> <span data-ttu-id="ad50a-201">Ceci est obligatoire pour la synchronisation Web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-201">This is required for Web synchronization.</span></span>  
  
-   <span data-ttu-id="ad50a-202">Utilisez l'authentification de base pour les connexions de l'Abonné vers IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-202">Use Basic Authentication for connections from the Subscriber to IIS.</span></span> <span data-ttu-id="ad50a-203">En utilisant l'authentification de base, IIS peut établir des connexions au serveur de publication/distribution au nom de l'Abonné sans recourir à la délégation.</span><span class="sxs-lookup"><span data-stu-id="ad50a-203">Using Basic Authentication, IIS can make connections to the Publisher/Distributor on behalf of the Subscriber without requiring delegation.</span></span> <span data-ttu-id="ad50a-204">La délégation est nécessaire en cas d'utilisation de l'authentification intégrée.</span><span class="sxs-lookup"><span data-stu-id="ad50a-204">Delegation is required if you use Integrated Authentication.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="ad50a-205">L'authentification de base est la méthode servant à transmettre les informations d'identification à IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-205">Basic Authentication is the method by which credentials are passed to IIS.</span></span> <span data-ttu-id="ad50a-206">L'authentification de base n'empêche pas de spécifier des comptes de domaine Windows pour les connexions qui sont établies vers IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-206">Basic Authentication does not prevent specifying Windows domain accounts for connections that are made to IIS.</span></span>  
  
-   <span data-ttu-id="ad50a-207">Spécifiez que l'Agent d'instantané doit s'exécuter sous un compte de domaine Windows et qu'il doit se connecter sous ce compte.</span><span class="sxs-lookup"><span data-stu-id="ad50a-207">Specify that the Snapshot Agent should run under a Windows domain account, and specify that the agent should make connections as that account.</span></span> <span data-ttu-id="ad50a-208">(Il s'agit de la configuration par défaut.) Spécifiez que chaque Agent de fusion doit s'exécuter sous le compte de domaine de l'utilisateur utilisant l'ordinateur de l'Abonné et qu'il doit se connecter sous ce compte.</span><span class="sxs-lookup"><span data-stu-id="ad50a-208">(This is the default configuration.) Specify that each Merge Agent should run under the domain account of the user that uses the Subscriber computer, and specify that the agent should make connections as that account.</span></span>  
  
     <span data-ttu-id="ad50a-209">Pour plus d'informations sur les autorisations requises par les agents, consultez [Replication Agent Security Model](security/replication-agent-security-model.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-209">For more information about the permissions that are required by agents, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
-   <span data-ttu-id="ad50a-210">Spécifiez le même compte de domaine que celui utilisé par le Agent de fusion lorsque vous spécifiez un compte et un mot de passe dans la page informations sur le **serveur Web** de l’Assistant nouvel abonnement ou lorsque vous spécifiez des valeurs pour les **@internet_url** **@internet_login** paramètres et de [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="ad50a-210">Specify the same domain account as the one the Merge Agent uses when you specify an account and password on the **Web Server Information** page of the New Subscription Wizard or when you specify values for the **@internet_url** and **@internet_login** parameters of [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="ad50a-211">Ce compte doit disposer d'autorisations en lecture pour le partage des instantanés.</span><span class="sxs-lookup"><span data-stu-id="ad50a-211">This account must have read permissions for the snapshot share.</span></span>  
  
-   <span data-ttu-id="ad50a-212">Chaque publication doit utiliser un répertoire virtuel distinct pour IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-212">Each publication should use a separate virtual directory for IIS.</span></span>  
  
-   <span data-ttu-id="ad50a-213">Le compte sous lequel s'exécute l'écouteur de réplication [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (Replisapi.dll) est également le compte qui se connecte au serveur de publication et au serveur de distribution lors de la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad50a-213">The account under which the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Replication Listener (Replisapi.dll) runs is also the account that will connect to the Publisher and Distributor during synchronization.</span></span> <span data-ttu-id="ad50a-214">Ce compte doit être mappé à un compte de connexion SQL sur le serveur de publication et le serveur de distribution.</span><span class="sxs-lookup"><span data-stu-id="ad50a-214">This account must be mapped to a SQL Login account on the Publisher and Distributor.</span></span> <span data-ttu-id="ad50a-215">Pour plus d’informations, consultez la section « Définition des autorisations pour l’écouteur de réplication SQL Server » dans la rubrique [Configurer IIS pour la synchronisation Web](configure-iis-for-web-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-215">For more information, see the "Setting Permissions for the SQL Server Replication Listener" section in the [Configure IIS for Web Synchronization](configure-iis-for-web-synchronization.md).</span></span>  
  
-   <span data-ttu-id="ad50a-216">Vous pouvez utiliser FTP pour remettre l'instantané du serveur de publication à l'ordinateur exécutant IIS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-216">You can use FTP to deliver the snapshot from the Publisher to the computer that is running IIS.</span></span> <span data-ttu-id="ad50a-217">L'instantané est toujours remis de l'ordinateur exécutant IIS à l'Abonné au moyen du protocole HTTPS.</span><span class="sxs-lookup"><span data-stu-id="ad50a-217">The snapshot is always delivered from the computer that is running IIS to the Subscriber by using HTTPS.</span></span> <span data-ttu-id="ad50a-218">Pour plus d’informations, consultez [Transférer des instantanés via FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-218">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
-   <span data-ttu-id="ad50a-219">Si les serveurs de la topologie de réplication se trouvent derrière un pare-feu, vous devrez peut-être ouvrir les ports dans le pare-feu afin d'activer la synchronisation Web.</span><span class="sxs-lookup"><span data-stu-id="ad50a-219">If servers in the replication topology are behind a firewall, you might need to open ports in the firewall to enable Web synchronization.</span></span>  
  
    -   <span data-ttu-id="ad50a-220">L'ordinateur de l'abonné se connecte à l'ordinateur qui exécute IIS sur HTTPS à l'aide du protocole SSL, qui est généralement configuré pour utiliser le port 443.</span><span class="sxs-lookup"><span data-stu-id="ad50a-220">The Subscriber computer connects to the computer that is running IIS over HTTPS using SSL, which is typically configured to use port 443.</span></span> <span data-ttu-id="ad50a-221">Les abonnés[!INCLUDE[ssEW](../../includes/ssew-md.md)] peuvent également se connecter via le protocole HTTP, qui utilise en règle générale le port 80.</span><span class="sxs-lookup"><span data-stu-id="ad50a-221">[!INCLUDE[ssEW](../../includes/ssew-md.md)] Subscribers can also connect over HTTP, which is typically configured to use port 80.</span></span>  
  
    -   <span data-ttu-id="ad50a-222">L'ordinateur chargé d'exécuter IIS se connecte généralement au serveur de publication ou au serveur de distribution via le port 1433 (instance par défaut).</span><span class="sxs-lookup"><span data-stu-id="ad50a-222">The computer that is running IIS typically connects to the Publisher or Distributor using port 1433 (default instance).</span></span> <span data-ttu-id="ad50a-223">Lorsque le serveur de publication ou le serveur de distribution correspond à une instance nommée sur un serveur avec une autre instance par défaut, le système utilise habituellement le port 1500 pour se connecter à l'instance nommée.</span><span class="sxs-lookup"><span data-stu-id="ad50a-223">When the Publisher or Distributor is a named instance on a server with another default instance, port 1500 is typically used to connect to the named instance.</span></span>  
  
    -   <span data-ttu-id="ad50a-224">Si l'ordinateur exécutant IIS est séparé du serveur de distribution par un pare-feu et si un partage FTP est employé pour la remise des instantanés, vous devez ouvrir les ports utilisés pour le partage FTP.</span><span class="sxs-lookup"><span data-stu-id="ad50a-224">If the computer running IIS is separated from the Distributor by a firewall and an FTP share is used for snapshot delivery, the ports used for FTP must be opened.</span></span> <span data-ttu-id="ad50a-225">Pour plus d’informations, consultez [Transférer des instantanés via FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-225">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="ad50a-226">L'ouverture de ports dans votre pare-feu peut exposer votre serveur à des attaques malveillantes.</span><span class="sxs-lookup"><span data-stu-id="ad50a-226">Opening ports in your firewall can leave your server exposed to malicious attacks.</span></span> <span data-ttu-id="ad50a-227">Assurez-vous de comprendre le fonctionnement des systèmes de pare-feu avant d'ouvrir des ports.</span><span class="sxs-lookup"><span data-stu-id="ad50a-227">Make sure that you understand firewall systems before you open ports.</span></span> <span data-ttu-id="ad50a-228">Pour plus d'informations, consultez [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span><span class="sxs-lookup"><span data-stu-id="ad50a-228">For more information, see [Security Considerations for a SQL Server Installation](../../sql-server/install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ad50a-229">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ad50a-229">See Also</span></span>  
 [<span data-ttu-id="ad50a-230">Synchronisation web pour la réplication de fusion</span><span class="sxs-lookup"><span data-stu-id="ad50a-230">Web Synchronization for Merge Replication</span></span>](web-synchronization-for-merge-replication.md)  
  
  
