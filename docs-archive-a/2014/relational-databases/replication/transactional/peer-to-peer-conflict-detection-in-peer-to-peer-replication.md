---
title: Détection de conflit dans la réplication d’égal à égal | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication, conflict detection
ms.assetid: 754a1070-59bc-438d-998b-97fdd77d45ca
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 301a751bf5b5959ab1fc434ac2a583a6b0378fdd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87610586"
---
# <a name="conflict-detection-in-peer-to-peer-replication"></a><span data-ttu-id="0f4af-102">Détection de conflit dans la réplication d'égal à égal</span><span class="sxs-lookup"><span data-stu-id="0f4af-102">Conflict Detection in Peer-to-Peer Replication</span></span>
  <span data-ttu-id="0f4af-103">La réplication transactionnelle d'égal à égal vous permet d'insérer, de mettre à jour et de supprimer des données sur un nœud quelconque dans une topologie, puis de propager les modifications aux autres nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-103">Peer-to-peer transactional replication lets you insert, update, or delete data at any node in a topology and have data changes propagated to the other nodes.</span></span> <span data-ttu-id="0f4af-104">Comme vous pouvez modifier des données sur un nœud quelconque, les modifications de données sur des nœuds différents peuvent être en conflit les unes avec les autres.</span><span class="sxs-lookup"><span data-stu-id="0f4af-104">Because you can change data at any node, data changes at different nodes could conflict with each other.</span></span> <span data-ttu-id="0f4af-105">Si une ligne est modifiée au niveau de plusieurs nœuds, elle peut provoquer un conflit, voire la perte de la mise à jour, lorsque la ligne est propagée à d'autres nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-105">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
 <span data-ttu-id="0f4af-106">Dans [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] et les versions ultérieures, la réplication d'égal à égal propose une option permettant d'activer la détection des conflits dans une topologie d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="0f4af-106">Peer-to-peer replication in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions provides the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="0f4af-107">Cette option permet d'éviter les problèmes causés par des conflits non détectés, notamment le comportement incohérent des applications et la perte d'une mise à jour.</span><span class="sxs-lookup"><span data-stu-id="0f4af-107">This option would help prevent the issues that are caused by undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="0f4af-108">Lorsque cette option est activée, par défaut, une modification en conflit est traitée comme une erreur critique qui provoque l'échec de l'Agent de distribution.</span><span class="sxs-lookup"><span data-stu-id="0f4af-108">With this option enabled, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="0f4af-109">En cas de conflit, la topologie reste dans un état incohérent jusqu'à la résolution du conflit et jusqu'au rétablissement de la cohérence des données dans la topologie.</span><span class="sxs-lookup"><span data-stu-id="0f4af-109">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved and the data is made consistent across the topology.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="0f4af-110">Pour éviter l'incohérence potentielle des données, faites-en sorte d'éviter les conflits dans une topologie d'égal à égal, même si la détection des conflits est activée.</span><span class="sxs-lookup"><span data-stu-id="0f4af-110">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="0f4af-111">Afin de garantir que les opérations d'écriture pour une ligne particulière soient réalisées au niveau d'un seul nœud, les applications qui accèdent aux données et les modifient doivent partitionner les opérations d'insertion, de mise à jour et de suppression.</span><span class="sxs-lookup"><span data-stu-id="0f4af-111">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="0f4af-112">Ce partitionnement garantit que les modifications apportées à une ligne donnée provenant d'un nœud sont synchronisées sur tous les autres nœuds de la topologie avant que cette ligne soit modifiée par un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="0f4af-112">This partitioning ensures that modifications to a given row that is originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="0f4af-113">Si une application requiert des fonctionnalités avancées de détection et de résolution des conflits, utilisez la réplication de fusion.</span><span class="sxs-lookup"><span data-stu-id="0f4af-113">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="0f4af-114">Pour plus d’informations, consultez [Réplication de fusion](../merge/merge-replication.md) et [Détecter et résoudre des conflits de réplication de fusion](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="0f4af-114">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="understanding-conflicts-and-conflict-detection"></a><span data-ttu-id="0f4af-115">Description des conflits et de la détection de conflit</span><span class="sxs-lookup"><span data-stu-id="0f4af-115">Understanding Conflicts and Conflict Detection</span></span>  
 <span data-ttu-id="0f4af-116">Dans une base de données unique, les modifications apportées à une même ligne par des applications différentes ne provoquent pas de conflit.</span><span class="sxs-lookup"><span data-stu-id="0f4af-116">In a single database, changes that are made to the same row by different applications do not cause a conflict.</span></span> <span data-ttu-id="0f4af-117">Cela est dû au fait que les transactions sont sérialisées et que des verrous sont utilisés pour traiter des modifications simultanées.</span><span class="sxs-lookup"><span data-stu-id="0f4af-117">This is because transactions are serialized, and locks are used to handle concurrent changes.</span></span> <span data-ttu-id="0f4af-118">Dans un système distribué asynchrone, tel que la réplication d'égal à égal, les transactions agissent indépendamment sur chaque nœud et aucun mécanisme ne sérialise les transactions sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-118">In an asynchronous distributed system such as peer-to-peer replication, transactions act independently on each node; and there is no mechanism to serialize transactions across multiple nodes.</span></span> <span data-ttu-id="0f4af-119">Il est possible d'utiliser un protocole semblable à une validation en deux phases, mais cela affecte considérablement les performances.</span><span class="sxs-lookup"><span data-stu-id="0f4af-119">A protocol like two-phase commit could be used, but this affects performance significantly.</span></span>  
  
 <span data-ttu-id="0f4af-120">Dans les systèmes tels que la réplication d'égal à égal, les conflits ne sont pas détectés lorsque les modifications sont validées au niveau d'homologues individuels.</span><span class="sxs-lookup"><span data-stu-id="0f4af-120">In systems such as peer-to-peer replication, conflicts are not detected when changes are committed at individual peers.</span></span> <span data-ttu-id="0f4af-121">À la place, ils sont détectés lorsque ces modifications sont répliquées et appliquées à d'autres homologues.</span><span class="sxs-lookup"><span data-stu-id="0f4af-121">Instead, they are detected when those changes are replicated and applied at other peers.</span></span> <span data-ttu-id="0f4af-122">Dans la réplication d'égal à égal, les conflits sont détectés par les procédures stockées qui appliquent des modifications à chaque nœud en fonction d'une colonne masquée dans chaque table publiée.</span><span class="sxs-lookup"><span data-stu-id="0f4af-122">In peer-to-peer replication, conflicts are detected by the stored procedures that apply changes to each node, based on a hidden column in each published table.</span></span> <span data-ttu-id="0f4af-123">Cette colonne masquée stocke un ID qui associe un *ID d'appelant* que vous spécifiez pour chaque nœud et la version de la ligne.</span><span class="sxs-lookup"><span data-stu-id="0f4af-123">This hidden column stores an ID that combines an *originator ID* that you specify for each node and the version of the row.</span></span> <span data-ttu-id="0f4af-124">Pendant la synchronisation, l'Agent de distribution exécute des procédures pour chaque table.</span><span class="sxs-lookup"><span data-stu-id="0f4af-124">During synchronization, the Distribution Agent executes procedures for each table.</span></span> <span data-ttu-id="0f4af-125">Ces procédures appliquent des opérations d'insertion, de mise à jour et de suppression provenant d'autres homologues.</span><span class="sxs-lookup"><span data-stu-id="0f4af-125">These procedures apply insert, update, and delete operations from other peers.</span></span> <span data-ttu-id="0f4af-126">Si l'une de ces procédures détecte un conflit lorsqu'elle lit la valeur de la colonne masquée, elle déclenche l'erreur 22815 de niveau de gravité 16 :</span><span class="sxs-lookup"><span data-stu-id="0f4af-126">If one of the procedures detects a conflict when it reads the hidden column value, it raises error 22815 that has a severity level of 16:</span></span>  
  
 `A conflict of type '%s' was detected at peer %d between peer %d (incoming), transaction id %s  and peer %d (on disk), transaction id %s`  
  
 <span data-ttu-id="0f4af-127">Par défaut, suite à cette erreur, l'Agent de distribution cesse d'appliquer des modifications à ce nœud.</span><span class="sxs-lookup"><span data-stu-id="0f4af-127">By default, this error causes the Distribution Agent to stop applying changes to that node.</span></span> <span data-ttu-id="0f4af-128">Pour plus d'informations sur la façon de traiter les conflits détectés, consultez « Gestion des conflits », plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="0f4af-128">For information about how to handle the conflicts that are detected, see "Handling Conflicts" later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="0f4af-129">Seul un utilisateur qui se connecte par le biais de la connexion administrateur dédiée peut accéder à la colonne masquée.</span><span class="sxs-lookup"><span data-stu-id="0f4af-129">The hidden column can be accessed only by a user that is logged in through the Dedicated Administrator Connection (DAC).</span></span> <span data-ttu-id="0f4af-130">Pour obtenir des informations sur la connexion administrateur dédiée, consultez [Connexion de diagnostic pour les administrateurs de base de données](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span><span class="sxs-lookup"><span data-stu-id="0f4af-130">For information about DAC, see [Diagnostic Connection for Database Administrators](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span>  
  
 <span data-ttu-id="0f4af-131">La réplication d'égal à égal détecte les types de conflits suivants :</span><span class="sxs-lookup"><span data-stu-id="0f4af-131">Peer-to-peer replication detects the following types of conflicts:</span></span>  
  
-   <span data-ttu-id="0f4af-132">Conflit d'insertions</span><span class="sxs-lookup"><span data-stu-id="0f4af-132">Insert-insert</span></span>  
  
     <span data-ttu-id="0f4af-133">Toutes les lignes de chaque table qui participe à la réplication d'égal à égal sont identifiées de façon unique à l'aide de valeurs de clés primaires.</span><span class="sxs-lookup"><span data-stu-id="0f4af-133">All rows in each table participating in peer-to-peer replication are uniquely identified by using primary key values.</span></span> <span data-ttu-id="0f4af-134">Un conflit d'insertions se produit lorsqu'une ligne avec la même valeur de clé a été insérée sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-134">An insert-insert conflict occurs when a row with the same key value was inserted at more than one node.</span></span>  
  
-   <span data-ttu-id="0f4af-135">Conflit de mises à jour</span><span class="sxs-lookup"><span data-stu-id="0f4af-135">Update-update</span></span>  
  
     <span data-ttu-id="0f4af-136">Se produit lorsque la même ligne a été mise à jour sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-136">Occurs when the same row was updated at more than one node.</span></span>  
  
-   <span data-ttu-id="0f4af-137">Conflit d'insertion/mise à jour</span><span class="sxs-lookup"><span data-stu-id="0f4af-137">Insert-update</span></span>  
  
     <span data-ttu-id="0f4af-138">Se produit si une ligne a été mise à jour sur un nœud et que la même ligne a été supprimée puis réinsérée sur un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="0f4af-138">Occurs if a row was updated at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="0f4af-139">Conflit d'insertion/suppression</span><span class="sxs-lookup"><span data-stu-id="0f4af-139">Insert-delete</span></span>  
  
     <span data-ttu-id="0f4af-140">Se produit si une ligne a été supprimée sur un nœud et que la même ligne a été supprimée puis réinsérée sur un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="0f4af-140">Occurs if a row was deleted at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="0f4af-141">Conflit de mise à jour/suppression</span><span class="sxs-lookup"><span data-stu-id="0f4af-141">Update-delete</span></span>  
  
     <span data-ttu-id="0f4af-142">Se produit si une ligne a été mise à jour sur un nœud et que la même ligne a été supprimée sur un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="0f4af-142">Occurs if a row was updated at one node, but the same row was deleted at another node.</span></span>  
  
-   <span data-ttu-id="0f4af-143">Conflit de suppressions</span><span class="sxs-lookup"><span data-stu-id="0f4af-143">Delete-delete</span></span>  
  
     <span data-ttu-id="0f4af-144">Se produit lorsqu'une ligne a été supprimée sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-144">Occurs when a row was deleted at more than one node.</span></span>  
  
## <a name="enabling-conflict-detection"></a><span data-ttu-id="0f4af-145">Activation de la détection de conflit</span><span class="sxs-lookup"><span data-stu-id="0f4af-145">Enabling Conflict Detection</span></span>  
 <span data-ttu-id="0f4af-146">Pour utiliser la détection de conflit, tous les nœuds doivent exécuter [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] ou version ultérieure, et la détection doit être activée pour tous les nœuds.</span><span class="sxs-lookup"><span data-stu-id="0f4af-146">To use conflict detection, all nodes must be running [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] or a later version; and detection must be enabled for all nodes.</span></span> <span data-ttu-id="0f4af-147">Dans [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] et versions ultérieures, par défaut, la détection de conflit est activée dans [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0f4af-147">In [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions, by default, conflict detection is enabled in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="0f4af-148">Nous vous recommandons d'activer la détection, même dans les scénarios où vous ne prévoyez pas de conflits.</span><span class="sxs-lookup"><span data-stu-id="0f4af-148">We recommend that you have detection enabled, even in scenarios in which you do not expect any conflicts.</span></span> <span data-ttu-id="0f4af-149">La détection de conflit peut être activée et désactivée en utilisant [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] ou les procédures stockées [!INCLUDE[tsql](../../../includes/tsql-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="0f4af-149">Conflict detection can be enabled and disabled by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] stored procedures:</span></span>  
  
-   <span data-ttu-id="0f4af-150">Vous pouvez activer et désactiver la détection dans [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] en utilisant la page **Options d'abonnement** de la boîte de dialogue **Propriétés de la publication** ou la page **Configurer la topologie** de l'Assistant Configurer la topologie d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="0f4af-150">You can enable and disable detection in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] either by using the **Subscription Options** page of the **Publication Properties** dialog box or the **Configure Topology** page of the Configure Peer-to-Peer Topology Wizard.</span></span>  
  
     <span data-ttu-id="0f4af-151">Si vous configurez la détection de conflit à l'aide de [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], l'Agent de distribution est configuré pour cesser d'appliquer les modifications lorsqu'un conflit est détecté.</span><span class="sxs-lookup"><span data-stu-id="0f4af-151">If you configure conflict detection by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], the Distribution Agent is configured to stop applying changes when a conflict is detected.</span></span>  
  
-   <span data-ttu-id="0f4af-152">Vous pouvez également activer et désactiver la détection en utilisant les procédures stockées suivantes : [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) ou [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="0f4af-152">You can also enable and disable detection by using the following stored procedures: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) or [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span></span>  
  
     <span data-ttu-id="0f4af-153">Si vous configurez la détection de conflit à l'aide de procédures stockées, vous pouvez spécifier si l'Agent de distribution doit cesser d'appliquer les modifications lorsqu'un conflit est détecté.</span><span class="sxs-lookup"><span data-stu-id="0f4af-153">If you configure conflict detection by using stored procedures, you can specify whether the Distribution Agent should stop applying changes when a conflict is detected.</span></span> <span data-ttu-id="0f4af-154">Par défaut, l'agent doit cesser d'appliquer les modifications.</span><span class="sxs-lookup"><span data-stu-id="0f4af-154">The default is for the agent to stop.</span></span> <span data-ttu-id="0f4af-155">Nous vous recommandons d'utiliser le paramètre par défaut.</span><span class="sxs-lookup"><span data-stu-id="0f4af-155">We recommend that you use the default setting.</span></span>  
  
## <a name="handling-conflicts"></a><span data-ttu-id="0f4af-156">Gestion des conflits</span><span class="sxs-lookup"><span data-stu-id="0f4af-156">Handling Conflicts</span></span>  
 <span data-ttu-id="0f4af-157">Lorsqu'un conflit se produit dans la réplication d'égal à égal, l'alerte de détection de conflit d'égal à égal est déclenchée.</span><span class="sxs-lookup"><span data-stu-id="0f4af-157">When a conflict occurs in peer-to-peer replication, the Peer-to-peer conflict detection alert is raised.</span></span> <span data-ttu-id="0f4af-158">Nous vous recommandons de configurer cette alerte pour être notifié en cas de conflit.</span><span class="sxs-lookup"><span data-stu-id="0f4af-158">We recommend that you configure this alert so that you are notified when a conflict occurs.</span></span> <span data-ttu-id="0f4af-159">Pour plus d’informations sur les alertes, consultez [Utiliser les alertes pour les événements des agents de réplication](../agents/use-alerts-for-replication-agent-events.md).</span><span class="sxs-lookup"><span data-stu-id="0f4af-159">For more information about alerts, see [Use Alerts for Replication Agent Events](../agents/use-alerts-for-replication-agent-events.md).</span></span>  
  
 <span data-ttu-id="0f4af-160">Une fois que l'Agent de distribution s'est arrêté et que l'alerte a été déclenchée, utilisez l'une des approches suivantes pour gérer les conflits qui se sont produits :</span><span class="sxs-lookup"><span data-stu-id="0f4af-160">After the Distribution Agent stops and the alert is raised, use one of the following approaches to handle the conflicts that occurred:</span></span>  
  
-   <span data-ttu-id="0f4af-161">Réinitialisez le nœud sur lequel le conflit a été détecté à partir de la sauvegarde d'un nœud qui contient les données requises (approche recommandée).</span><span class="sxs-lookup"><span data-stu-id="0f4af-161">Reinitialize the node where the conflict was detected from the backup of a node that contains the required data (the recommended approach).</span></span> <span data-ttu-id="0f4af-162">Cette méthode garantit la cohérence des données.</span><span class="sxs-lookup"><span data-stu-id="0f4af-162">This method ensures that data is in a consistent state.</span></span>  
  
-   <span data-ttu-id="0f4af-163">Essayez de synchroniser de nouveau le nœud en permettant à l'Agent de distribution de continuer à appliquer les modifications :</span><span class="sxs-lookup"><span data-stu-id="0f4af-163">Try to synchronize the node again by enabling the Distribution Agent to continue to apply changes:</span></span>  
  
    1.  <span data-ttu-id="0f4af-164">Exécutez [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): spécifiez « p2p_continue_onconflict » pour le @property paramètre et `true` pour le @value paramètre.</span><span class="sxs-lookup"><span data-stu-id="0f4af-164">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `true` for the @value parameter.</span></span>  
  
    2.  <span data-ttu-id="0f4af-165">Redémarrez l'Agent de distribution.</span><span class="sxs-lookup"><span data-stu-id="0f4af-165">Restart the Distribution Agent.</span></span>  
  
    3.  <span data-ttu-id="0f4af-166">Vérifiez les conflits détectés en utilisant l'outil de résolution des conflits et déterminez les lignes qui étaient impliquées, le type de conflit et le vainqueur.</span><span class="sxs-lookup"><span data-stu-id="0f4af-166">Verify the conflicts that were detected by using the conflict viewer and determine the rows that were involved, the type of conflict, and the winner.</span></span> <span data-ttu-id="0f4af-167">Le conflit est résolu en fonction de la valeur de l'ID d'appelant que vous avez spécifiée pendant la configuration : la ligne provenant du nœud avec l'ID le plus élevé remporte le conflit.</span><span class="sxs-lookup"><span data-stu-id="0f4af-167">The conflict is resolved based on the originator ID value that you specified during configuration: the row that originated at the node with the highest ID wins the conflict.</span></span> <span data-ttu-id="0f4af-168">Pour plus d’informations, consultez [Afficher les conflits de données pour les publications transactionnelles &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="0f4af-168">For more information, see [View Data Conflicts for Transactional Publications &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span></span>  
  
    4.  <span data-ttu-id="0f4af-169">Exécutez une validation pour garantir que les lignes en conflit ont convergé correctement.</span><span class="sxs-lookup"><span data-stu-id="0f4af-169">Run validation to ensure that the conflicting rows converged correctly.</span></span> <span data-ttu-id="0f4af-170">Pour plus d’informations, consultez [Valider des données répliquées](../validate-data-at-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="0f4af-170">For more information, see [Validate Replicated Data](../validate-data-at-the-subscriber.md).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="0f4af-171">Si les données ne sont pas cohérentes après cette étape, vous devez mettre à jour manuellement les lignes sur le nœud qui a la priorité la plus élevée, puis propager les modifications à partir de ce nœud.</span><span class="sxs-lookup"><span data-stu-id="0f4af-171">If data is inconsistent after this step, you must manually update rows on the node that has the highest priority, and then let the changes propagate from this node.</span></span> <span data-ttu-id="0f4af-172">S'il n'y a plus de modifications en conflit dans la topologie, tous les nœuds bénéficieront d'un état cohérent.</span><span class="sxs-lookup"><span data-stu-id="0f4af-172">If there are no further conflicting changes in the topology, all nodes will be brought to a consistent state.</span></span>  
  
    5.  <span data-ttu-id="0f4af-173">Exécutez [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): spécifiez « p2p_continue_onconflict » pour le @property paramètre et `false` pour le @value paramètre.</span><span class="sxs-lookup"><span data-stu-id="0f4af-173">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `false` for the @value parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0f4af-174">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0f4af-174">See Also</span></span>  
 [<span data-ttu-id="0f4af-175">Peer-to-Peer Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="0f4af-175">Peer-to-Peer Transactional Replication</span></span>](peer-to-peer-transactional-replication.md)  
  
  
