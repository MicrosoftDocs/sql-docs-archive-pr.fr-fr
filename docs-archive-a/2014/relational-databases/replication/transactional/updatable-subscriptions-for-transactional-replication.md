---
title: Abonnements pouvant être mis à jour pour la réplication transactionnelle | Microsoft Docs
ms.custom: ''
ms.date: 03/31/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, updatable subscriptions
- updatable subscriptions, about updatable subscriptions
- queued updating subscriptions [SQL Server replication]
- immediate updating subscriptions
- subscriptions [SQL Server replication], updatable
- updatable subscriptions
ms.assetid: 8eec95cb-3a11-436e-bcee-bdcd05aa5c5a
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e0b739ffe34a14519ff5290c406805ff7715edce
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87614490"
---
# <a name="updatable-subscriptions-for-transactional-replication"></a><span data-ttu-id="d2b73-102">Updatable Subscriptions for Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="d2b73-102">Updatable Subscriptions for Transactional Replication</span></span>

<span data-ttu-id="d2b73-103">**S’applique à :** SQL Server 2008 (et versions ultérieures)</span><span class="sxs-lookup"><span data-stu-id="d2b73-103">**Applies to:** SQL Server 2008 (and later)</span></span>

    
> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
  
<span data-ttu-id="d2b73-104">Dans SQL Server 2014, la réplication transactionnelle prend en charge les mises à jour sur les abonnés par le biais d’abonnements pouvant être mis à jour et d’une réplication d’égal à égal.</span><span class="sxs-lookup"><span data-stu-id="d2b73-104">In SQL Server 2014, transactional replication supports updates at Subscribers through updatable subscriptions and peer-to-peer replication.</span></span> <span data-ttu-id="d2b73-105">Les deux types d’abonnements pouvant être mis à jour sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="d2b73-105">The following are the two types of updatable subscriptions:</span></span>  
  
-   <span data-ttu-id="d2b73-106">Mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="d2b73-106">Immediate updating.</span></span> <span data-ttu-id="d2b73-107">Le serveur de publication et l'Abonné doivent être connectés pour mettre à jour les données sur l'abonné.</span><span class="sxs-lookup"><span data-stu-id="d2b73-107">The Publisher and Subscriber must be connected to update data at the Subscriber.</span></span>  
  
-   <span data-ttu-id="d2b73-108">Mise à jour en attente. Le serveur de publication et l'abonné ne doivent pas être connectés pour mettre à jour les données sur l'abonné.</span><span class="sxs-lookup"><span data-stu-id="d2b73-108">Queued updating The Publisher and Subscriber do not have to be connected to update data at the Subscriber.</span></span> <span data-ttu-id="d2b73-109">Les mises à jour peuvent être effectuées lorsque l'abonné ou le serveur de publication est hors connexion.</span><span class="sxs-lookup"><span data-stu-id="d2b73-109">Updates can be made while the Subscriber or Publisher is offline.</span></span>  
  
 <span data-ttu-id="d2b73-110">Lorsque les données sont mises à jour sur l'abonné, elles sont d'abord propagées au serveur de publication et ensuite aux autres abonnés.</span><span class="sxs-lookup"><span data-stu-id="d2b73-110">When data is updated at a Subscriber, it is first propagated to the Publisher and then propagated to other Subscribers.</span></span> <span data-ttu-id="d2b73-111">Dans le cas de la mise à jour immédiate, les modifications sont propagées immédiatement à l'aide du protocole de validation en deux phases.</span><span class="sxs-lookup"><span data-stu-id="d2b73-111">If immediate updating is used, the changes are propagated immediately using the two-phase commit protocol.</span></span> <span data-ttu-id="d2b73-112">Pour la mise à jour en attente, les modifications sont stockées dans une file d'attente et les transactions mises en file d'attente sont appliquées de façon asynchrone au niveau du serveur de publication chaque fois que la connectivité réseau est disponible.</span><span class="sxs-lookup"><span data-stu-id="d2b73-112">If queued updating is used, the changes are stored in a queue; the queued transactions are then applied asynchronously at the Publisher whenever network connectivity is available.</span></span> <span data-ttu-id="d2b73-113">Dans la mesure où les mises à jour sont propagées de façon asynchrone sur le serveur de publication, il peut arriver que les mêmes données soient mises à jour par le serveur de publication ou par un autre abonné, et des conflits peuvent naître lors de l'application des mises à jour.</span><span class="sxs-lookup"><span data-stu-id="d2b73-113">Because the updates are propagated asynchronously to the Publisher, the same data may have been updated by the Publisher or by another Subscriber and conflicts can occur when applying the updates.</span></span> <span data-ttu-id="d2b73-114">Les conflits sont détectés et résolus selon une stratégie de résolution de conflits définie lors de la création de la publication.</span><span class="sxs-lookup"><span data-stu-id="d2b73-114">Conflicts are detected and resolved according to a conflict resolution policy that is set when creating the publication.</span></span>  
  
 <span data-ttu-id="d2b73-115">Si vous créez une publication transactionnelle avec des abonnements qui peuvent être mis à jour dans l'Assistant Nouvel abonnement, les deux modes de mise à jour, immédiate et en attente, sont activés.</span><span class="sxs-lookup"><span data-stu-id="d2b73-115">If you create a transactional publication with updatable subscriptions in the New Publication Wizard, both immediate updating and queued updating are enabled.</span></span> <span data-ttu-id="d2b73-116">Si vous créez une publication avec des procédures stockées, vous pouvez n'en activer qu'un seul ou les deux.</span><span class="sxs-lookup"><span data-stu-id="d2b73-116">If you create a publication with stored procedures, you can enable one or both options.</span></span> <span data-ttu-id="d2b73-117">Lorsque vous créez un abonnement à la publication, vous spécifiez le mode de mise à jour à utiliser.</span><span class="sxs-lookup"><span data-stu-id="d2b73-117">When you create a subscription to the publication, you specify which update mode to use.</span></span> <span data-ttu-id="d2b73-118">Vous pouvez ensuite basculer entre les modes de mise à jour, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="d2b73-118">You can then switch between update modes if necessary.</span></span> <span data-ttu-id="d2b73-119">Pour plus d'informations, consultez la section « Basculement d'un mode de mise à jour à un autre ».</span><span class="sxs-lookup"><span data-stu-id="d2b73-119">For more information, see the following section "Switching between Update Modes".</span></span>  
  
 <span data-ttu-id="d2b73-120">Pour activer les abonnements pouvant être mis à jour pour les publications transactionnelles, consultez [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md).</span><span class="sxs-lookup"><span data-stu-id="d2b73-120">To enable updatable subscriptions for transactional publications, [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md)</span></span>  
  
 <span data-ttu-id="d2b73-121">Pour créer des abonnements pouvant être mis à jour pour les publications transactionnelles, consultez [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span><span class="sxs-lookup"><span data-stu-id="d2b73-121">To create updatable subscriptions for transactional publications, see [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md)</span></span>  
  
## <a name="switching-between-update-modes"></a><span data-ttu-id="d2b73-122">Basculement d'un mode de mise à jour à l'autre</span><span class="sxs-lookup"><span data-stu-id="d2b73-122">Switching Between Update Modes</span></span>  
 <span data-ttu-id="d2b73-123">Lorsque vous utilisez les abonnements pouvant être mis à jour, vous pouvez spécifier qu'un abonnement doit utiliser un mode de mise à jour puis basculer vers l'autre si l'application l'exige.</span><span class="sxs-lookup"><span data-stu-id="d2b73-123">When using updatable subscriptions you can specify that a subscription should use one update mode and then switch to the other if the application requires it.</span></span> <span data-ttu-id="d2b73-124">Vous pouvez, par exemple, spécifier qu'un abonnement doit utiliser la mise à jour immédiate mais basculer vers la mise à jour en attente si un échec système entraîne une perte de la connectivité réseau.</span><span class="sxs-lookup"><span data-stu-id="d2b73-124">For example, you can specify that a subscription should use immediate updating, but switch to queued updating if a system failure results in the loss of network connectivity.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="d2b73-125">La réplication ne bascule pas automatiquement d'un mode de mise à jour à l'autre.</span><span class="sxs-lookup"><span data-stu-id="d2b73-125">Replication does not switch automatically between update modes.</span></span> <span data-ttu-id="d2b73-126">Vous devez le configurer par le biais de SQL Server Management Studio ou votre application doit appeler [sp_setreplfailovermode &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setreplfailovermode-transact-sql) pour basculer entre les modes.</span><span class="sxs-lookup"><span data-stu-id="d2b73-126">You must set the update mode through SQL Server Management Studio or your application must call [sp_setreplfailovermode &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setreplfailovermode-transact-sql) to switch between modes.</span></span>  
  
 <span data-ttu-id="d2b73-127">Si vous basculez de la mise à jour immédiate à la mise à jour en attente, vous ne pouvez pas repasser à la mise à jour immédiate avant que l'abonné et le serveur de publication soient connectés et que l'Agent de lecture de la file d'attente ait appliqué tous les messages en attente dans la file d'attente sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="d2b73-127">If you switch from immediate updating to queued updating, you cannot switch back to immediate updating until the Subscriber and Publisher are connected and the Queue Reader Agent has applied all pending messages in the queue to the Publisher.</span></span>  
  
 <span data-ttu-id="d2b73-128">**Pour basculer d'un mode de mise à jour vers un autre**</span><span class="sxs-lookup"><span data-stu-id="d2b73-128">**To switch between update modes**</span></span>  
  
 <span data-ttu-id="d2b73-129">Pour basculer d'un mode à l'autre, vous devez activer la publication et l'abonnement pour les deux modes de mise à jour puis basculer d'un mode à l'autre, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="d2b73-129">To switch between updating modes, you must enable the publication and subscription for both update modes, and then switch between them if necessary.</span></span> <span data-ttu-id="d2b73-130">Pour plus d'informations, consultez la rubrique</span><span class="sxs-lookup"><span data-stu-id="d2b73-130">For more information, see</span></span>  
<span data-ttu-id="d2b73-131">[Basculer entre les modes de mise à jour d’un abonnement transactionnel pouvant être mis à](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md)jour.</span><span class="sxs-lookup"><span data-stu-id="d2b73-131">[Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>  
  
### <a name="considerations-for-using-updatable-subscriptions"></a><span data-ttu-id="d2b73-132">Considérations sur l'utilisation des abonnements pouvant être mis à jour</span><span class="sxs-lookup"><span data-stu-id="d2b73-132">Considerations for Using Updatable Subscriptions</span></span>  
  
-   <span data-ttu-id="d2b73-133">Après qu'une publication est activée pour les abonnements mis à jour immédiatement ou en attente, l'option ne peut plus être désactivée pour la publication (même si les abonnements ne doivent pas nécessairement l'utiliser).</span><span class="sxs-lookup"><span data-stu-id="d2b73-133">After a publication is enabled for updating subscriptions or queued updating subscriptions, the option cannot be disabled for the publication (although subscriptions do not need to use it).</span></span> <span data-ttu-id="d2b73-134">Pour désactiver cette option, vous devez supprimer la publication puis en recréer une nouvelle.</span><span class="sxs-lookup"><span data-stu-id="d2b73-134">To disable the option, the publication must be deleted and a new one created.</span></span>  
  
-   <span data-ttu-id="d2b73-135">Il est impossible de republier des données.</span><span class="sxs-lookup"><span data-stu-id="d2b73-135">Republishing data is not supported.</span></span>  
  
-   <span data-ttu-id="d2b73-136">La réplication ajoute la colonne **msrepl_tran_version** aux tables publiées à des fins de suivi.</span><span class="sxs-lookup"><span data-stu-id="d2b73-136">Replication adds the **msrepl_tran_version** column to published tables for tracking purposes.</span></span> <span data-ttu-id="d2b73-137">Du fait de cette colonne supplémentaire, toutes les instructions `INSERT` doivent inclure une liste de colonnes.</span><span class="sxs-lookup"><span data-stu-id="d2b73-137">Because of this additional column, all `INSERT` statements should include a column list.</span></span>  
  
-   <span data-ttu-id="d2b73-138">Pour modifier le schéma dans une table d'une publication qui prend en charge les abonnements mis à jour, toutes les activités relatives à la table doivent être interrompues au niveau du serveur de publication et des abonnés et les modifications de données en attente doivent être propagées à tous les nœuds avant d'effectuer toute modification du schéma.</span><span class="sxs-lookup"><span data-stu-id="d2b73-138">To make schema changes on a table in a publication that supports updating subscriptions, all activity on the table must be stopped at the Publisher and Subscribers, and pending data changes must be propagated to all nodes before making any schema changes.</span></span> <span data-ttu-id="d2b73-139">De cette façon, vous êtes assuré que les transactions en cours n'entrent pas en conflit avec la modification de schéma en attente.</span><span class="sxs-lookup"><span data-stu-id="d2b73-139">This ensures that outstanding transactions do not conflict with the pending schema change.</span></span> <span data-ttu-id="d2b73-140">Après la propagation des modifications de schéma à tous les nœuds, l'activité peut reprendre dans les tables publiées.</span><span class="sxs-lookup"><span data-stu-id="d2b73-140">After the schema changes have propagated to all nodes, activity can resume on the published tables.</span></span> <span data-ttu-id="d2b73-141">Pour plus d’informations, consultez [Suspendre une topologie de réplication &#40;programmation Transact-SQL de la réplication&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="d2b73-141">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="d2b73-142">Si vous prévoyez de basculer entre les modes de mise à jour, l'Agent de lecture de la file d'attente doit s'exécuter au moins une fois après l'initialisation de l'abonnement (par défaut, cet Agent s'exécute en continu).</span><span class="sxs-lookup"><span data-stu-id="d2b73-142">If you plan to switch between update modes, the Queue Reader Agent must run at least once after the subscription has been initialized (by default, the Queue Reader Agent runs continuously).</span></span>  
  
-   <span data-ttu-id="d2b73-143">Si la base de données de l'abonné est partitionnée horizontalement et que certaines lignes de la partition existent chez l'abonné, mais pas sur le serveur de publication, l'abonné ne pourra pas mettre à jour les lignes préexistantes.</span><span class="sxs-lookup"><span data-stu-id="d2b73-143">If the Subscriber database is partitioned horizontally and there are rows in the partition that exist at the Subscriber, but not at the Publisher, the Subscriber cannot update the preexisting rows.</span></span> <span data-ttu-id="d2b73-144">Toute tentative de mise à jour de ces lignes renvoie un message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="d2b73-144">Attempting to update these rows returns an error.</span></span> <span data-ttu-id="d2b73-145">Les lignes doivent être supprimées de la table puis ajoutées sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="d2b73-145">The rows should be deleted from the table and then added at the Publisher.</span></span>  
  
### <a name="updates-at-the-subscriber"></a><span data-ttu-id="d2b73-146">Mises à jour sur l'abonné</span><span class="sxs-lookup"><span data-stu-id="d2b73-146">Updates at the Subscriber</span></span>  
  
-   <span data-ttu-id="d2b73-147">Les mises à jour sur l'abonné sont propagées au serveur de publication même si un abonnement expire ou est inactif.</span><span class="sxs-lookup"><span data-stu-id="d2b73-147">Updates at the Subscriber are propagated to the Publisher even if a subscription is expired or is inactive.</span></span> <span data-ttu-id="d2b73-148">Vérifiez que ces abonnements sont effectivement supprimés ou réinitialisés.</span><span class="sxs-lookup"><span data-stu-id="d2b73-148">Ensure that any such subscriptions are either dropped or reinitialized.</span></span>  
  
-   <span data-ttu-id="d2b73-149">Si des colonnes `TIMESTAMP` ou `IDENTITY` sont utilisées et répliquées en tant que types de données de base, les valeurs qu’elles contiennent ne doivent pas être mises à jour sur l’Abonné.</span><span class="sxs-lookup"><span data-stu-id="d2b73-149">If `TIMESTAMP` or `IDENTITY` columns are used, and they are replicated as their base data types, values in these columns should not be updated at the Subscriber.</span></span>  
  
-   <span data-ttu-id="d2b73-150">Les Abonnés ne peuvent pas mettre à jour ou insérer des valeurs `text`, `ntext` ou `image`, car il est impossible de lire à partir des tables insérées ou supprimées dans les déclencheurs de suivi des modifications de réplication.</span><span class="sxs-lookup"><span data-stu-id="d2b73-150">Subscribers cannot update or insert `text`, `ntext` or `image` values because it is not possible to read from the inserted or deleted tables inside the replication change-tracking triggers.</span></span> <span data-ttu-id="d2b73-151">De même, les Abonnés ne peuvent pas mettre à jour ou insérer de valeur `text` ou `image` à l’aide de `WRITETEXT` ou `UPDATETEXT`, car les données sont écrasées par le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="d2b73-151">Similarly, Subscribers cannot update or insert `text` or `image` values using `WRITETEXT` or `UPDATETEXT` because the data is overwritten by the Publisher.</span></span> <span data-ttu-id="d2b73-152">En revanche, vous pouvez partitionner les colonnes `text` et `image` dans une table distincte et modifier les deux tables à l’intérieur d’une transaction.</span><span class="sxs-lookup"><span data-stu-id="d2b73-152">Instead, you could partition the `text` and `image` columns into a separate table and modify the two tables within a transaction.</span></span>  
  
     <span data-ttu-id="d2b73-153">Pour mettre à jour des objets volumineux sur un Abonné, utilisez respectivement les types de données `varchar(max)`, `nvarchar(max)` et `varbinary(max)` au lieu des types de données `text`, `ntext` et `image`.</span><span class="sxs-lookup"><span data-stu-id="d2b73-153">To update large objects at a Subscriber, use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)` instead of `text`, `ntext`, and `image` data types, respectively.</span></span>  
  
-   <span data-ttu-id="d2b73-154">Les mises à jour de clés uniques (y compris les clés primaires) générant des doublons (comme une mise à jour de type `UPDATE <column> SET <column> =<column>+1` ) ne sont pas autorisées et sont rejetées en raison d’une violation d’unicité.</span><span class="sxs-lookup"><span data-stu-id="d2b73-154">Updates to unique keys (including primary keys) that generate duplicates (for example, an update of the form `UPDATE <column> SET <column> =<column>+1` are not allowed and will be rejected because of a uniqueness violation.</span></span> <span data-ttu-id="d2b73-155">En effet, les mises à jour de jeux appliquées sur l’Abonné sont propagées par la réplication en tant qu’instructions `UPDATE` individuelles pour chaque ligne concernée.</span><span class="sxs-lookup"><span data-stu-id="d2b73-155">This is because set updates made at the Subscriber are propagated by replication as individual `UPDATE` statements for each row affected.</span></span>  
  
-   <span data-ttu-id="d2b73-156">Si la base de données de l'abonné est partitionnée horizontalement et que des lignes de la partition existent sur l'abonné mais non sur le serveur de publication, l'abonné ne peut pas mettre à jour les lignes pré-existantes.</span><span class="sxs-lookup"><span data-stu-id="d2b73-156">If the Subscriber database is partitioned horizontally and there are rows in the partition that exist at the Subscriber but not at the Publisher, the Subscriber cannot update the pre-existing rows.</span></span> <span data-ttu-id="d2b73-157">Toute tentative de mise à jour de ces lignes renvoie un message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="d2b73-157">Attempting to update these rows returns an error.</span></span> <span data-ttu-id="d2b73-158">Les lignes doivent être supprimées de la table puis réinsérées.</span><span class="sxs-lookup"><span data-stu-id="d2b73-158">The rows should be deleted from the table and inserted again.</span></span>  
  
### <a name="user-defined-triggers"></a><span data-ttu-id="d2b73-159">Déclencheurs définis par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="d2b73-159">User-defined Triggers</span></span>  
  
-   <span data-ttu-id="d2b73-160">Si l’application exige la présence de déclencheurs sur l’Abonné, ceux-ci doivent être définis avec l’option `NOT FOR REPLICATION` sur le serveur de publication et l’Abonné.</span><span class="sxs-lookup"><span data-stu-id="d2b73-160">If the application requires triggers at the Subscriber, the triggers should be defined with the `NOT FOR REPLICATION` option at the Publisher and Subscriber.</span></span> <span data-ttu-id="d2b73-161">Cela garantit l'activation des déclencheurs pour la modification de données d'origine uniquement mais pas lors de la réplication de cette modification.</span><span class="sxs-lookup"><span data-stu-id="d2b73-161">This ensures that triggers fire only for the original data change, but not when that change is replicated.</span></span>  
  
     <span data-ttu-id="d2b73-162">Veillez à ce que le déclencheur défini par l'utilisateur ne s'active pas lorsque le déclencheur de réplication met à jour la table.</span><span class="sxs-lookup"><span data-stu-id="d2b73-162">Ensure that the user-defined trigger does not fire when the replication trigger updates the table.</span></span> <span data-ttu-id="d2b73-163">Pour ce faire, la procédure `sp_check_for_sync_trigger` doit être appelée dans le corps du déclencheur défini par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d2b73-163">This is accomplished by calling the procedure `sp_check_for_sync_trigger` in the body of the user-defined trigger.</span></span> <span data-ttu-id="d2b73-164">Pour plus d’informations, consultez [sp_check_for_sync_trigger &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-check-for-sync-trigger-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="d2b73-164">For more information, see [sp_check_for_sync_trigger &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-check-for-sync-trigger-transact-sql).</span></span>  
  
### <a name="immediate-updating"></a><span data-ttu-id="d2b73-165">Mise à jour immédiate</span><span class="sxs-lookup"><span data-stu-id="d2b73-165">Immediate Updating</span></span>  
  
-   <span data-ttu-id="d2b73-166">Pour des abonnements mis à jour immédiatement, les modifications sur l'abonné sont propagées au serveur de publication et appliquées à l'aide du Coordinateur de transactions distribuées Microsoft (MSDTC, Microsoft Distributed Transaction Coordinator).</span><span class="sxs-lookup"><span data-stu-id="d2b73-166">For immediate updating subscriptions, changes at the Subscriber are propagated to the Publisher and applied using Microsoft Distributed Transaction Coordinator (MS DTC).</span></span> <span data-ttu-id="d2b73-167">Vérifiez que ce dernier est installé et configuré sur le serveur de publication et l'abonné.</span><span class="sxs-lookup"><span data-stu-id="d2b73-167">Ensure that MS DTC is installed and configured at the Publisher and Subscriber.</span></span> <span data-ttu-id="d2b73-168">Pour plus d'informations, consultez la documentation Windows.</span><span class="sxs-lookup"><span data-stu-id="d2b73-168">For more information, see the Windows documentation.</span></span>  
  
-   <span data-ttu-id="d2b73-169">Les déclencheurs utilisés par les abonnements mis à jour immédiatement exigent une connexion au serveur de publication pour répliquer les modifications.</span><span class="sxs-lookup"><span data-stu-id="d2b73-169">The triggers used by immediate updating subscriptions require a connection to the Publisher to replicate changes.</span></span>  
  
-   <span data-ttu-id="d2b73-170">Si la publication autorise les abonnements mis à jour immédiatement et qu'un article de la publication possède un filtre de colonne, vous ne pouvez pas retirer les colonnes n'acceptant pas les valeurs NULL sans valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="d2b73-170">If the publication allows immediate updating subscriptions and an article in the publication has a column filter, you cannot filter out non-nullable columns without defaults.</span></span>  
  
### <a name="queued-updating"></a><span data-ttu-id="d2b73-171">Mise à jour en attente</span><span class="sxs-lookup"><span data-stu-id="d2b73-171">Queued Updating</span></span>  
  
-   <span data-ttu-id="d2b73-172">Les tables contenues dans une publication de fusion ne peuvent pas être publiées en même temps dans le cadre d'une réplication transactionnelle qui autorise les abonnements mis à jour en attente.</span><span class="sxs-lookup"><span data-stu-id="d2b73-172">Tables included in a merge publication cannot also be published as part of a transactional publication that allows queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="d2b73-173">Lorsque la mise à jour en attente est utilisée, il est déconseillé d'effectuer des mises à jour sur les colonnes clés primaire car la clé primaire sert de localisateur d'enregistrement pour toutes les requêtes.</span><span class="sxs-lookup"><span data-stu-id="d2b73-173">Updates made to primary key columns are not recommended when using queued updating because the primary key is used as a record locator for all queries.</span></span> <span data-ttu-id="d2b73-174">Lorsque la stratégie de résolution de conflit prévoit que " l'abonné gagne ", les mises à jour de clés primaires doivent être effectuées avec précaution.</span><span class="sxs-lookup"><span data-stu-id="d2b73-174">When the conflict resolution policy is set to Subscriber Wins, updates to primary keys should be made with caution.</span></span> <span data-ttu-id="d2b73-175">Si des mises à jour de la clé primaire sont effectuées à la fois sur le serveur de publication et sur l'abonné, il en résultera deux lignes avec des clés primaires différentes.</span><span class="sxs-lookup"><span data-stu-id="d2b73-175">If updates to the primary key are made at both the Publisher and at the Subscriber, the result will be two rows with different primary keys.</span></span>  
  
-   <span data-ttu-id="d2b73-176">Pour les colonnes de type de données `SQL_VARIANT` : quand des données sont insérées ou mises à jour sur l’abonné, elles sont mappées de la façon suivante par l’Agent de lecture de la file d’attente quand elles sont copiées de l’abonné vers la file d’attente :</span><span class="sxs-lookup"><span data-stu-id="d2b73-176">For columns of data type `SQL_VARIANT`: when data is inserted or updated at the Subscriber, it is mapped in the following way by the Queue Reader Agent when it is copied from the Subscriber to the queue:</span></span>  
  
    -   <span data-ttu-id="d2b73-177">`BIGINT`, `DECIMAL`, `NUMERIC`, `MONEY` et `SMALLMONEY` sont mappés à `NUMERIC`.</span><span class="sxs-lookup"><span data-stu-id="d2b73-177">`BIGINT`, `DECIMAL`, `NUMERIC`, `MONEY`, and `SMALLMONEY` are mapped to `NUMERIC`.</span></span>  
  
    -   <span data-ttu-id="d2b73-178">`BINARY` et `VARBINARY` sont mappés aux données `VARBINARY`.</span><span class="sxs-lookup"><span data-stu-id="d2b73-178">`BINARY` and `VARBINARY` are mapped to `VARBINARY` data.</span></span>  
  
### <a name="conflict-detection-and-resolution"></a><span data-ttu-id="d2b73-179">Détection et résolution des conflits</span><span class="sxs-lookup"><span data-stu-id="d2b73-179">Conflict Detection and Resolution</span></span>  
  
-   <span data-ttu-id="d2b73-180">Dans le cas d'une stratégie de conflit où l'abonné « gagne » : la résolution de conflit n'est pas prise en charge pour les mises à jour des colonnes de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="d2b73-180">For the Subscriber Wins conflict policy: conflict resolution is not supported for updates to primary key columns.</span></span>  
  
-   <span data-ttu-id="d2b73-181">Les conflits provoqués par des échecs de contraintes de clés étrangères ne sont pas résolus par la réplication :</span><span class="sxs-lookup"><span data-stu-id="d2b73-181">Conflicts due to foreign key constraint failures are not resolved by replication:</span></span>  
  
    -   <span data-ttu-id="d2b73-182">Si vous ne prévoyez pas de conflits et que les données sont bien partitionnées (les abonnés ne mettent pas à jour les mêmes lignes), vous pouvez utiliser les contraintes de clés étrangères sur le serveur de publication et les abonnés.</span><span class="sxs-lookup"><span data-stu-id="d2b73-182">If conflicts are not expected and data is well partitioned (Subscribers do not update the same rows), you can use foreign key constraints on the Publisher and Subscribers.</span></span>  
  
    -   <span data-ttu-id="d2b73-183">Si des confits sont prévisibles : vous ne devez pas utiliser des contraintes de clés étrangères sur le serveur de publication ou l'abonné si vous optez pour la résolution de conflit où l'abonné prime ; vous ne devez pas utiliser des contraintes de clés étrangères sur l'abonné si vous utilisez la résolution de conflit où le serveur de publication prime.</span><span class="sxs-lookup"><span data-stu-id="d2b73-183">If conflicts are expected: you should not use foreign key constraints at the Publisher or Subscriber if you use "Subscriber wins" conflict resolution; you should not use foreign key constraints at the Subscriber if you use "Publisher wins" conflict resolution.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d2b73-184">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d2b73-184">See Also</span></span>  
 <span data-ttu-id="d2b73-185">[Peer-to-Peer Transactional Replication](peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="d2b73-185">[Peer-to-Peer Transactional Replication](peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="d2b73-186">[Réplication transactionnelle](transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="d2b73-186">[Transactional Replication](transactional-replication.md) </span></span>  
 <span data-ttu-id="d2b73-187">[Publier des données et des objets de base de données](../publish/publish-data-and-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="d2b73-187">[Publish Data and Database Objects](../publish/publish-data-and-database-objects.md) </span></span>  
 [<span data-ttu-id="d2b73-188">S'abonner à des publications</span><span class="sxs-lookup"><span data-stu-id="d2b73-188">Subscribe to Publications</span></span>](../subscribe-to-publications.md)  
  
  
