---
title: Réplication transactionnelle d’égal à égal | Microsoft Docs
ms.custom: ''
ms.date: 08/29/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- bidirectional replication
- transactional replication, bidirectional replication
- bidirectional transactional replication
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication
ms.assetid: 23e7e8c1-002f-4e69-8c99-d63e4100de64
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f61db9a8e7cecb107fd1b27fae966d133e043c8b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87610585"
---
# <a name="peer-to-peer-transactional-replication"></a><span data-ttu-id="f9830-102">Peer-to-Peer Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="f9830-102">Peer-to-Peer Transactional Replication</span></span>
  <span data-ttu-id="f9830-103">La réplication d'égal à égal offre une solution avec montée en puissance parallèle et haute disponibilité en conservant des copies de données sur plusieurs instances de serveur, également appelées *nœuds*.</span><span class="sxs-lookup"><span data-stu-id="f9830-103">Peer-to-peer replication provides a scale-out and high-availability solution by maintaining copies of data across multiple server instances, also referred to as *nodes*.</span></span> <span data-ttu-id="f9830-104">Conçue sur la base de la réplication transactionnelle, la réplication d'égal à égal propage les modifications quasiment en temps réel de manière transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="f9830-104">Built on the foundation of transactional replication, peer-to-peer replication propagates transactionally consistent changes in near real-time.</span></span> <span data-ttu-id="f9830-105">Les applications qui requièrent la montée en puissance parallèle des opérations de lecture peuvent ainsi distribuer les lectures effectuées par les clients sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="f9830-105">This enables applications that require scale-out of read operations to distribute the reads from clients across multiple nodes.</span></span> <span data-ttu-id="f9830-106">Dans la mesure où les données sont conservées sur les nœuds quasiment en temps réel, la réplication d'égal à égal génère une redondance des données, ce qui améliore leur disponibilité.</span><span class="sxs-lookup"><span data-stu-id="f9830-106">Because data is maintained across the nodes in near real-time, peer-to-peer replication provides data redundancy, which increases the availability of data.</span></span>  
  
 <span data-ttu-id="f9830-107">Prenons l'exemple d'une application Web.</span><span class="sxs-lookup"><span data-stu-id="f9830-107">Consider a Web application.</span></span> <span data-ttu-id="f9830-108">Celle-ci peut tirer parti de la réplication d'égal à égal de différentes manières :</span><span class="sxs-lookup"><span data-stu-id="f9830-108">This can benefit from peer-to-peer replication in the following ways:</span></span>  
  
-   <span data-ttu-id="f9830-109">Les requêtes de catalogue et autres lectures sont réparties sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="f9830-109">Catalog queries and other reads are spread across multiple nodes.</span></span> <span data-ttu-id="f9830-110">Les performances ne sont pas affectées par l'augmentation des lectures.</span><span class="sxs-lookup"><span data-stu-id="f9830-110">This enables performance to remain consistent as reads increase.</span></span>  
  
-   <span data-ttu-id="f9830-111">Si l'un des nœuds du système échoue, une couche d'application peut rediriger les écritures pour ce nœud vers un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="f9830-111">If one of the nodes in the system fails, an application layer can redirect the writes for that node to another node.</span></span> <span data-ttu-id="f9830-112">La disponibilité est ainsi assurée.</span><span class="sxs-lookup"><span data-stu-id="f9830-112">This maintains availability.</span></span>  
  
-   <span data-ttu-id="f9830-113">Si un nœud doit subir une maintenance ou si le système entier doit être mis à niveau, chaque nœud peut être mis hors connexion, puis de nouveau ajouté au système sans affecter la disponibilité de l'application.</span><span class="sxs-lookup"><span data-stu-id="f9830-113">If a node requires maintenance or the whole system requires an upgrade, each node can be taken offline and added back to the system without affecting the availability of the application.</span></span>  
  
 <span data-ttu-id="f9830-114">Bien que la réplication d'égal à égal permette la montée en puissance parallèle des opérations de lecture, les performances en écriture de cette topologie sont identiques à celles d'un nœud unique.</span><span class="sxs-lookup"><span data-stu-id="f9830-114">Although peer-to-peer replication enables scaling out of read operations, write performance for the topology is like that for a single node.</span></span> <span data-ttu-id="f9830-115">En effet, toutes les insertions, mises à jour et suppressions sont propagées à l'ensemble des nœuds.</span><span class="sxs-lookup"><span data-stu-id="f9830-115">This is because ultimately all inserts, updates, and deletes are propagated to all nodes.</span></span> <span data-ttu-id="f9830-116">La réplication reconnaît si une modification a été appliquée à un nœud donné et empêche les modifications de boucler plusieurs fois dans les nœuds.</span><span class="sxs-lookup"><span data-stu-id="f9830-116">Replication recognizes when a change has been applied to a given node and prevents changes from cycling through the nodes more than one time.</span></span> <span data-ttu-id="f9830-117">Nous vous recommandons vivement de limiter les opérations d'écriture pour chaque ligne à un seul nœud pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="f9830-117">We strongly recommend that write operations for each row be performed at only node, for the following reasons:</span></span>  
  
-   <span data-ttu-id="f9830-118">Si une ligne est modifiée au niveau de plusieurs nœuds, elle peut provoquer un conflit, voire la perte de la mise à jour, lorsque la ligne est propagée à d'autres nœuds.</span><span class="sxs-lookup"><span data-stu-id="f9830-118">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
-   <span data-ttu-id="f9830-119">Une certaine latence rentre toujours en jeu lors la réplication des modifications.</span><span class="sxs-lookup"><span data-stu-id="f9830-119">There is always some latency involved when changes are replicated.</span></span> <span data-ttu-id="f9830-120">Dans le cas d'applications exigeant que les toutes dernières modifications soient immédiatement visibles, l'équilibrage de charge dynamique de l'application sur plusieurs nœuds peut poser un problème.</span><span class="sxs-lookup"><span data-stu-id="f9830-120">For applications that require the latest change to be seen immediately, dynamically load balancing the application across multiple nodes can be problematic.</span></span>  
  
 <span data-ttu-id="f9830-121">La réplication d'égal à égal comprend une option permettant d'activer la détection des conflits dans une topologie d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="f9830-121">Peer-to-peer replication includes the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="f9830-122">Cette option permet d'éviter les problèmes issus de conflits non détectés, notamment le comportement incohérent des applications et les mises à jour perdues.</span><span class="sxs-lookup"><span data-stu-id="f9830-122">This option helps prevent the issues that are caused from undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="f9830-123">Lorsqu'elle est activée, une modification en conflit est considérée par défaut comme une erreur critique qui provoque l'échec de l'Agent de distribution.</span><span class="sxs-lookup"><span data-stu-id="f9830-123">By enabling this option, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="f9830-124">En cas de conflit, la topologie reste dans un état incohérent jusqu'à la résolution manuelle du conflit et au rétablissement de la cohérence des données dans la topologie.</span><span class="sxs-lookup"><span data-stu-id="f9830-124">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved manually and the data is made consistent across the topology.</span></span> <span data-ttu-id="f9830-125">Pour plus d’informations, voir [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span><span class="sxs-lookup"><span data-stu-id="f9830-125">For more information, see [Conflict Detection in Peer-to-Peer Replication](peer-to-peer-conflict-detection-in-peer-to-peer-replication.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f9830-126">Pour éviter l'incohérence potentielle des données, faites-en sorte d'éviter les conflits dans une topologie d'égal à égal, même si la détection des conflits est activée.</span><span class="sxs-lookup"><span data-stu-id="f9830-126">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="f9830-127">Afin de garantir que les opérations d'écriture pour une ligne particulière soient réalisées au niveau d'un seul nœud, les applications qui accèdent aux données et les modifient doivent partitionner les opérations d'insertion, de mise à jour et de suppression.</span><span class="sxs-lookup"><span data-stu-id="f9830-127">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="f9830-128">Ce partitionnement garantit que les modifications apportées à une ligne donnée provenant d'un nœud sont synchronisées avec tous les autres nœuds de la topologie avant que cette ligne ne soit modifiée par un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="f9830-128">This partitioning ensures that modifications to a given row originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="f9830-129">Si une application requiert des fonctionnalités avancées de détection et de résolution des conflits, utilisez la réplication de fusion.</span><span class="sxs-lookup"><span data-stu-id="f9830-129">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="f9830-130">Pour plus d’informations, consultez [Réplication de fusion](../merge/merge-replication.md) et [Détecter et résoudre des conflits de réplication de fusion](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="f9830-130">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="peer-to-peer-topologies"></a><span data-ttu-id="f9830-131">Topologies d'égal à égal</span><span class="sxs-lookup"><span data-stu-id="f9830-131">Peer-to-Peer Topologies</span></span>  
 <span data-ttu-id="f9830-132">Les scénarios suivants illustrent des utilisations standard de la réplication d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="f9830-132">The following scenarios illustrate typical uses for peer-to-peer replication.</span></span>  
  
### <a name="topology-that-has-two-participating-databases"></a><span data-ttu-id="f9830-133">Topologie comprenant deux bases de données participantes</span><span class="sxs-lookup"><span data-stu-id="f9830-133">Topology That Has Two Participating Databases</span></span>  
 <span data-ttu-id="f9830-134">![Réplication d’égal à égal, deux nœuds](../media/repl-multinode-01.gif "Réplication d’égal à égal, deux nœuds")</span><span class="sxs-lookup"><span data-stu-id="f9830-134">![Peer-to-peer replication, two nodes](../media/repl-multinode-01.gif "Peer-to-peer replication, two nodes")</span></span>  
  
 <span data-ttu-id="f9830-135">Les deux illustrations ci-dessus montrent deux bases de données participantes dont le trafic utilisateur est dirigé vers les bases de données par le biais d'un serveur d'applications.</span><span class="sxs-lookup"><span data-stu-id="f9830-135">Both of the preceding illustrations show two participating databases, with user traffic directed to the databases through an application server.</span></span> <span data-ttu-id="f9830-136">Cette configuration peut être utilisée avec de nombreuses applications (des sites Web aux applications de groupe de travail) et présente les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="f9830-136">This configuration can be used for a variety of applications, from Web sites to workgroup applications, and provides the following benefits:</span></span>  
  
-   <span data-ttu-id="f9830-137">amélioration des performances de lecture due à la répartition des lectures sur les deux serveurs ;</span><span class="sxs-lookup"><span data-stu-id="f9830-137">Improved read performance, because reads are spread out over two servers.</span></span>  
  
-   <span data-ttu-id="f9830-138">disponibilité plus élevée si la maintenance est requise ou en cas de panne sur un nœud.</span><span class="sxs-lookup"><span data-stu-id="f9830-138">Higher availability if maintenance is required or in case of failure at one node.</span></span>  
  
 <span data-ttu-id="f9830-139">Dans les deux illustrations, l'activité de lecture est équilibrée entre les bases de données participantes, mais les mises à jour sont gérées autrement :</span><span class="sxs-lookup"><span data-stu-id="f9830-139">In both illustrations, read activity is load-balanced between the participating databases, but updates are handled differently:</span></span>  
  
-   <span data-ttu-id="f9830-140">À gauche, les mises à jour sont partitionnées entre les deux serveurs.</span><span class="sxs-lookup"><span data-stu-id="f9830-140">On the left, updates are partitioned between the two servers.</span></span> <span data-ttu-id="f9830-141">Si la base de données contenait un catalogue de produits, une application personnalisée pourrait par exemple diriger vers le nœud **A** les mises à jour des produits dont le nom commence par les lettres A à M et vers le nœud **B** les mises à jour des produits dont le nom commence par les lettres N à Z. Les mises à jour sont ensuite répliquées sur l'autre nœud.</span><span class="sxs-lookup"><span data-stu-id="f9830-141">If the database contained a product catalog, you could, for example, have a custom application direct updates to node **A** for product names that start with A through M, and direct updates to node **B** for product names that start with N through Z. Updates are then replicated to the other node.</span></span>  
  
-   <span data-ttu-id="f9830-142">À droite, toutes les mises à jour sont dirigées vers le nœud **B**. De là, les mises à jour sont répliquées sur le nœud **A**. Si le nœud **B** est hors connexion (pour cause de maintenance, par exemple), le serveur d’applications peut diriger toutes les activités vers le nœud **A**. Lorsque le nœud **B** revient en ligne, il peut de nouveau recevoir les mises à jour ; le serveur d’applications peut alors retransférer toutes les mises à jour vers **B** ou continuer à les diriger vers **A**.</span><span class="sxs-lookup"><span data-stu-id="f9830-142">On the right, all updates are directed to node **B**. From there, updates are replicated to node **A**. If **B** is offline (for example, for maintenance), the application server can direct all activity to **A**. When **B** is back online, updates can flow to it, and the application server can move all updates back to **B** or keep directing them to **A**.</span></span>  
  
 <span data-ttu-id="f9830-143">Si la réplication d'égal à égal prend en charge les deux méthodes, l'exemple de mise à jour centralisée à droite est également souvent utilisé avec la réplication transactionnelle standard.</span><span class="sxs-lookup"><span data-stu-id="f9830-143">Peer-to-peer replication can support either approach, but the central update example on the right is also often used with standard transactional replication.</span></span>  
  
### <a name="topologies-that-have-three-or-more-participating-databases"></a><span data-ttu-id="f9830-144">Topologie comprenant au moins trois bases de données participantes</span><span class="sxs-lookup"><span data-stu-id="f9830-144">Topologies That Have Three or More Participating Databases</span></span>  
 <span data-ttu-id="f9830-145">![Réplication d’égal à égal vers des emplacements dispersés](../media/repl-multinode-02.gif "Réplication d’égal à égal vers des emplacements dispersés")</span><span class="sxs-lookup"><span data-stu-id="f9830-145">![Peer-to-peer replication to dispersed locations](../media/repl-multinode-02.gif "Peer-to-peer replication to dispersed locations")</span></span>  
  
 <span data-ttu-id="f9830-146">L'illustration ci-dessus montre trois bases de données participantes qui fournissent des données à une entreprise internationale d'assistance technique de logiciels dont les bureaux se trouvent à Los Angeles, Londres et Taipei.</span><span class="sxs-lookup"><span data-stu-id="f9830-146">The preceding illustration shows three participating databases that provide data for a worldwide software support organization, with offices in Los Angeles, London, and Taipei.</span></span> <span data-ttu-id="f9830-147">Les ingénieurs de support enregistrent les appels clients dans chaque bureau et ils entrent et mettent à jour les informations sur chaque appel client.</span><span class="sxs-lookup"><span data-stu-id="f9830-147">The support engineers at each office take customer calls and enter and update information about each customer call.</span></span> <span data-ttu-id="f9830-148">Les fuseaux horaires des trois bureaux ayant huit heures d'écart, il n'y a pas de chevauchement pendant une journée de travail :</span><span class="sxs-lookup"><span data-stu-id="f9830-148">The time zones for the three offices are eight hours apart, so there is no overlap in the workday.</span></span> <span data-ttu-id="f9830-149">lorsque le bureau de Taipei ferme, le bureau de Londres ouvre.</span><span class="sxs-lookup"><span data-stu-id="f9830-149">As the Taipei office closes, the London office is opening for the day.</span></span> <span data-ttu-id="f9830-150">Si un appel n'est pas terminé à la fermeture d'un bureau, il est transféré à un conseiller client dans un autre bureau qui ouvre.</span><span class="sxs-lookup"><span data-stu-id="f9830-150">If a call is still in progress as one office is closing, the call is transferred to a representative at the next office to open.</span></span>  
  
 <span data-ttu-id="f9830-151">Chaque bureau possède un serveur de base de données et un serveur d'applications dont se servent les ingénieurs de support lorsqu'ils entrent et mettent à jour les informations sur les appels clients.</span><span class="sxs-lookup"><span data-stu-id="f9830-151">Each location has a database and an application server, which are used by the support engineers as they enter and update information about customer calls.</span></span> <span data-ttu-id="f9830-152">La topologie est partitionnée selon l'horaire.</span><span class="sxs-lookup"><span data-stu-id="f9830-152">The topology is partitioned by time.</span></span> <span data-ttu-id="f9830-153">Les mises à jour n'ont donc lieu que sur le nœud actuellement ouvert, puis elles sont acheminées aux autres bases de données participantes.</span><span class="sxs-lookup"><span data-stu-id="f9830-153">Therefore, updates occur only at the node that is currently open for business, and then the updates flow to the other participating databases.</span></span> <span data-ttu-id="f9830-154">Cette topologie présente les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="f9830-154">This topology provides the following benefits:</span></span>  
  
-   <span data-ttu-id="f9830-155">indépendance sans isolement : chaque bureau peut insérer, mettre à jour ou supprimer des données indépendamment, mais aussi les partager du fait de leur réplication sur toutes les bases de données participantes ;</span><span class="sxs-lookup"><span data-stu-id="f9830-155">Independence without isolation: Each office can insert, update, or delete data independently but can also share the data because it is replicated to all other participating databases.</span></span>  
  
-   <span data-ttu-id="f9830-156">disponibilité élevée en cas de panne ou de maintenance sur une ou plusieurs bases de données participante.</span><span class="sxs-lookup"><span data-stu-id="f9830-156">Higher availability in case of failure or to allow maintenance at one or more of the participating databases.</span></span>  
  
     <span data-ttu-id="f9830-157">![Réplication d’égal à égal, trois et quatre nœuds](../media/repl-multinode-04.gif "Réplication d’égal à égal, trois et quatre nœuds")</span><span class="sxs-lookup"><span data-stu-id="f9830-157">![Peer-to-peer replication, three and four nodes](../media/repl-multinode-04.gif "Peer-to-peer replication, three and four nodes")</span></span>  
  
 <span data-ttu-id="f9830-158">L'illustration ci-dessus montre l'ajout d'un nœud dans la topologie qui en compte déjà trois.</span><span class="sxs-lookup"><span data-stu-id="f9830-158">The preceding illustration shows the addition of a node to the three-node topology.</span></span> <span data-ttu-id="f9830-159">Un nœud pourrait être ajouté dans ce scénario pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="f9830-159">A node could be added in this scenario for the following reasons:</span></span>  
  
-   <span data-ttu-id="f9830-160">parce qu'un autre bureau est ouvert ;</span><span class="sxs-lookup"><span data-stu-id="f9830-160">Because another office is opened.</span></span>  
  
-   <span data-ttu-id="f9830-161">pour fournir une disponibilité élevée afin de prendre en charge la maintenance ou augmenter la tolérance de panne en cas de défaillance de disque ou d'un autre grave problème.</span><span class="sxs-lookup"><span data-stu-id="f9830-161">To provide higher availability to support maintenance or increase fault tolerance if a disk failure or other major failure occurs.</span></span>  
  
 <span data-ttu-id="f9830-162">Remarquez que dans les topologies à trois nœuds et à quatre nœuds, toutes les bases de données publient et s'abonnent à toutes les autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="f9830-162">Notice that in both the three- and four-node topologies, all databases publish and subscribe to all other databases.</span></span> <span data-ttu-id="f9830-163">Cela permet d'assurer une disponibilité maximale en cas de maintenance ou d'échec d'un ou plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="f9830-163">This provides maximum availability in case of maintenance needs or failure of one or more nodes.</span></span> <span data-ttu-id="f9830-164">Lors de l'ajout de nœuds, veillez à équilibrer les besoins en disponibilité et en évolutivité par rapport aux performances et à la complexité du déploiement et de l'administration.</span><span class="sxs-lookup"><span data-stu-id="f9830-164">As nodes are added, you must balance availability and scalability needs against performance and the complexity of deployment and administration.</span></span>  
  
## <a name="configuring-peer-to-peer-replication"></a><span data-ttu-id="f9830-165">Configuration d'une réplication d'égal à égal</span><span class="sxs-lookup"><span data-stu-id="f9830-165">Configuring Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="f9830-166">La configuration d'une topologie de réplication d'égal à égal est très semblable à celle d'une série de publications et d'abonnements transactionnels standard.</span><span class="sxs-lookup"><span data-stu-id="f9830-166">Configuring a peer-to-peer replication topology is very similar to configuring a series of standard transactional publications and subscriptions.</span></span> <span data-ttu-id="f9830-167">Les procédures décrites dans les rubriques qui suivent montrent comment configurer un système à trois nœuds, similaire à la configuration illustrée à gauche dans l'illustration précédente qui montrait une topologie d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="f9830-167">The steps described in the following topics show the configuration of a three-node system, similar to the configuration shown on the left in the previous illustration that shows peer-to-peer topology.</span></span>  
  
## <a name="considerations-for-using-peer-to-peer-replication"></a><span data-ttu-id="f9830-168">Considérations sur l'utilisation de la réplication d'égal à égal</span><span class="sxs-lookup"><span data-stu-id="f9830-168">Considerations for Using Peer-to-Peer Replication</span></span>  
 <span data-ttu-id="f9830-169">Cette section fournit des informations et des consignes à considérer lors de l'utilisation de la réplication d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="f9830-169">This section provides information and guidelines to consider when you use peer-to-peer replication.</span></span>  
  
### <a name="general-considerations"></a><span data-ttu-id="f9830-170">Considérations d’ordre général</span><span class="sxs-lookup"><span data-stu-id="f9830-170">General Considerations</span></span>  
  
-   <span data-ttu-id="f9830-171">La réplication d'égal à égal est disponible uniquement dans les versions Enterprise de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f9830-171">Peer-to-peer replication is available only in Enterprise versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="f9830-172">Toutes les bases de données qui participent à la réplication d'égal à égal doivent contenir un schéma et des données identiques :</span><span class="sxs-lookup"><span data-stu-id="f9830-172">All databases that participate in peer-to-peer replication should contain identical schema and data:</span></span>  
  
    -   <span data-ttu-id="f9830-173">Les noms d'objets, le schéma d'objet et les noms de publication doivent être identiques.</span><span class="sxs-lookup"><span data-stu-id="f9830-173">Object names, object schema, and publication names should be identical.</span></span>  
  
    -   <span data-ttu-id="f9830-174">Les publications doivent autoriser la réplication des modifications de schéma.</span><span class="sxs-lookup"><span data-stu-id="f9830-174">Publications must allow schema changes to be replicated.</span></span> <span data-ttu-id="f9830-175">(Pour cela la propriété de publication **replicate_ddl** doit avoir la valeur **1**, ce qui est le paramètre par défaut.) Pour plus d’informations, consultez [Modifier le schéma dans les bases de données de publication](../publish/make-schema-changes-on-publication-databases.md).</span><span class="sxs-lookup"><span data-stu-id="f9830-175">(This is a setting of **1** for the publication property **replicate_ddl**, which is the default setting.) For more information, see [Make Schema Changes on Publication Databases](../publish/make-schema-changes-on-publication-databases.md).</span></span>  
  
    -   <span data-ttu-id="f9830-176">Le filtrage des lignes et des colonnes n'est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="f9830-176">Row and column filtering are not supported.</span></span>  
  
-   <span data-ttu-id="f9830-177">Il est recommandé que chaque nœud utilise sa propre base de données de distribution</span><span class="sxs-lookup"><span data-stu-id="f9830-177">We recommend that each node use its own distribution database.</span></span> <span data-ttu-id="f9830-178">afin d'éviter le risque d'avoir un point d'échec unique.</span><span class="sxs-lookup"><span data-stu-id="f9830-178">This eliminates the potential of having a single point of failure.</span></span>  
  
-   <span data-ttu-id="f9830-179">Les tables et autres objets ne peuvent pas être inclus dans plusieurs publications d'égal à égal au sein d'une base de données de publication unique.</span><span class="sxs-lookup"><span data-stu-id="f9830-179">Tables and other objects cannot be included in multiple peer-to-peer publications in a single publication database.</span></span>  
  
-   <span data-ttu-id="f9830-180">Une publication doit être activée pour la réplication d'égal à égal avant la création des abonnements.</span><span class="sxs-lookup"><span data-stu-id="f9830-180">A publication must be enabled for peer-to-peer replication before any subscriptions are created.</span></span>  
  
-   <span data-ttu-id="f9830-181">Les abonnements doivent être initialisés à l'aide d'une sauvegarde ou de l'option **Prise en charge de la réplication uniquement** .</span><span class="sxs-lookup"><span data-stu-id="f9830-181">Subscriptions must be initialized by using a backup or with the **'replication support only'** option.</span></span> <span data-ttu-id="f9830-182">Pour plus d’informations, consultez [Initialiser un abonnement transactionnel sans instantané](../initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="f9830-182">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
-   <span data-ttu-id="f9830-183">L'utilisation de colonnes d'identité est déconseillée.</span><span class="sxs-lookup"><span data-stu-id="f9830-183">We do not recommend the use of identity columns.</span></span> <span data-ttu-id="f9830-184">Avec les identités, vous devez gérer manuellement les plages affectées aux tables sur chaque base de données participante.</span><span class="sxs-lookup"><span data-stu-id="f9830-184">When using identities, you must manually manage the ranges assigned to the tables at each participating database.</span></span> <span data-ttu-id="f9830-185">Pour plus d’informations, consultez la section « Affectation de plages pour la gestion manuelle de plages d’identité » dans [Répliquer des colonnes d’identité](../publish/replicate-identity-columns.md).</span><span class="sxs-lookup"><span data-stu-id="f9830-185">For more information, see the section "Assigning Ranges for Manual Identity Range Management" in [Replicate Identity Columns](../publish/replicate-identity-columns.md).</span></span>  
  
### <a name="feature-restrictions"></a><span data-ttu-id="f9830-186">Restrictions des fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="f9830-186">Feature Restrictions</span></span>  
 <span data-ttu-id="f9830-187">La réplication d'égal à égal prend en charge les principales fonctionnalités de la réplication transactionnelle, mais ne prend pas en charge les options suivantes :</span><span class="sxs-lookup"><span data-stu-id="f9830-187">Peer-to-peer replication supports the core features of transactional replication, but does not support the following options:</span></span>  
  
-   <span data-ttu-id="f9830-188">initialisation et réinitialisation avec instantané ;</span><span class="sxs-lookup"><span data-stu-id="f9830-188">Initialization and reinitialization with a snapshot.</span></span>  
  
-   <span data-ttu-id="f9830-189">filtres de lignes et de colonnes ;</span><span class="sxs-lookup"><span data-stu-id="f9830-189">Row and column filters.</span></span>  
  
-   <span data-ttu-id="f9830-190">colonnes d'horodatage ;</span><span class="sxs-lookup"><span data-stu-id="f9830-190">Timestamp columns.</span></span>  
  
-   <span data-ttu-id="f9830-191">serveurs de publication et Abonnés non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ;</span><span class="sxs-lookup"><span data-stu-id="f9830-191">Non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publishers and Subscribers.</span></span>  
  
-   <span data-ttu-id="f9830-192">abonnements mis à jour immédiatement ou en attente ;</span><span class="sxs-lookup"><span data-stu-id="f9830-192">Immediate updating and queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="f9830-193">abonnements anonymes ;</span><span class="sxs-lookup"><span data-stu-id="f9830-193">Anonymous subscriptions.</span></span>  
  
-   <span data-ttu-id="f9830-194">abonnements partiels ;</span><span class="sxs-lookup"><span data-stu-id="f9830-194">Partial subscriptions.</span></span>  
  
-   <span data-ttu-id="f9830-195">abonnements pouvant être attachés et abonnements transformables.</span><span class="sxs-lookup"><span data-stu-id="f9830-195">Attachable subscriptions and transformable subscriptions.</span></span> <span data-ttu-id="f9830-196">(Ces deux options sont déconseillées dans [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]) ;</span><span class="sxs-lookup"><span data-stu-id="f9830-196">(Both of these options were deprecated in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].)</span></span>  
  
-   <span data-ttu-id="f9830-197">Agents de distribution partagés ;</span><span class="sxs-lookup"><span data-stu-id="f9830-197">Shared Distribution Agents.</span></span>  
  
-   <span data-ttu-id="f9830-198">paramètre de l'Agent de Distribution **-SubscriptionStreams** et paramètre de l'Agent de lecture du journal **-MaxCmdsInTran**;</span><span class="sxs-lookup"><span data-stu-id="f9830-198">The Distribution Agent parameter **-SubscriptionStreams** and the Log Reader Agent parameter **-MaxCmdsInTran**.</span></span>  
  
-   <span data-ttu-id="f9830-199">Les propriétés d’article \*\* \@ destination_owner\*\* et \*\* \@ destination_table\*\*.</span><span class="sxs-lookup"><span data-stu-id="f9830-199">The article properties **\@destination_owner** and **\@destination_table**.</span></span>  

-   <span data-ttu-id="f9830-200">La réplication transactionnelle d’égal à égal ne prend pas en charge la création d’un abonnement transactionnel à sens unique à une publication d’égal à égal.</span><span class="sxs-lookup"><span data-stu-id="f9830-200">Peer-to-Peer transactional replication does not support creating a one-way transactional subscription to a Peer-to-Peer publication</span></span>
  
 <span data-ttu-id="f9830-201">Les propriétés suivantes présentent des considérations spéciales :</span><span class="sxs-lookup"><span data-stu-id="f9830-201">The following properties have special considerations:</span></span>  
  
-   <span data-ttu-id="f9830-202">La propriété de publication \*\* \@ allow_initialize_from_backup\*\* requiert la valeur `true` .</span><span class="sxs-lookup"><span data-stu-id="f9830-202">The publication property **\@allow_initialize_from_backup** requires a value of `true`.</span></span>  
  
-   <span data-ttu-id="f9830-203">La propriété de l’article \*\* \@ replicate_ddl\*\* requiert la valeur `true` ; \*\* \@ identityrangemanagementoption\*\* requiert une valeur `manual` ; l' \*\* \@ État\*\* et requiert que l’option **24** soit définie.</span><span class="sxs-lookup"><span data-stu-id="f9830-203">The article property **\@replicate_ddl** requires a value of `true`; **\@identityrangemanagementoption** requires a value of `manual`; and **\@status** requires that option **24** is set.</span></span>  
  
-   <span data-ttu-id="f9830-204">La valeur des propriétés d’article \*\* \@ ins_cmd**, \*\* \@ del_cmd**et \*\* \@ upd_cmd\*\* ne peut pas être définie sur `SQL` .</span><span class="sxs-lookup"><span data-stu-id="f9830-204">The value for article properties **\@ins_cmd**, **\@del_cmd**, and **\@upd_cmd** cannot be set to `SQL`.</span></span>  
  
-   <span data-ttu-id="f9830-205">La propriété d’abonnement \*\* \@ sync_type\*\* requiert la valeur `none` ou `automatic` .</span><span class="sxs-lookup"><span data-stu-id="f9830-205">The subscription property **\@sync_type** requires a value of `none` or `automatic`.</span></span>  
  
### <a name="maintenance-considerations"></a><span data-ttu-id="f9830-206">Considérations sur la maintenance</span><span class="sxs-lookup"><span data-stu-id="f9830-206">Maintenance Considerations</span></span>  
 <span data-ttu-id="f9830-207">Pour les actions suivantes, le système doit être suspendu.</span><span class="sxs-lookup"><span data-stu-id="f9830-207">The following actions require the system to be quiesced.</span></span> <span data-ttu-id="f9830-208">Ce qui signifie que toute activité sur les tables publiées doit être interrompue au niveau de tous les nœuds et que la réception par chacun des nœuds de toutes les modifications provenant des autres nœuds doit être vérifiée.</span><span class="sxs-lookup"><span data-stu-id="f9830-208">This means stopping activity on published tables at all nodes and making sure that each node has received all changes from all other nodes.</span></span>  
  
-   <span data-ttu-id="f9830-209">Ajout d’un [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] nœud à une topologie existante</span><span class="sxs-lookup"><span data-stu-id="f9830-209">Adding a [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] node to an existing topology</span></span>  
  
-   <span data-ttu-id="f9830-210">ajout d'un article à une publication existante ;</span><span class="sxs-lookup"><span data-stu-id="f9830-210">Adding an article to an existing publication</span></span>  
  
-   <span data-ttu-id="f9830-211">modification du schéma ;</span><span class="sxs-lookup"><span data-stu-id="f9830-211">Making schema changes</span></span>  
  
-   <span data-ttu-id="f9830-212">restauration d'un nœud à partir d'une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="f9830-212">Restoring a node from a backup</span></span>  
  
 <span data-ttu-id="f9830-213">Pour plus d’informations, consultez[Suspendre une topologie de réplication &#40;programmation Transact-SQL de la réplication&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) et [Administrer une topologie d’égal à égal &#40;programmation Transact-SQL de la réplication&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span><span class="sxs-lookup"><span data-stu-id="f9830-213">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md) and [Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="f9830-214">Si vous ajoutez un nouveau nœud à une topologie d'égal à égal, n'utilisez pour la restauration que des sauvegardes créées après l'ajout de ce nœud.</span><span class="sxs-lookup"><span data-stu-id="f9830-214">If you add a new node to a peer-to-peer topology, you should restore only from backups that were created after the new node was added.</span></span>  
  
-   <span data-ttu-id="f9830-215">Vous ne pouvez pas réinitialiser les abonnements dans une topologie d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="f9830-215">You cannot reinitialize subscriptions in a peer-to-peer topology.</span></span> <span data-ttu-id="f9830-216">Si vous devez faire en sorte qu'un nœud dispose d'une nouvelle copie des données, restaurez une sauvegarde sur le nœud.</span><span class="sxs-lookup"><span data-stu-id="f9830-216">If you have to ensure that a node has a new copy of the data, restore a backup at the node.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f9830-217">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f9830-217">See Also</span></span>  
 <span data-ttu-id="f9830-218">[Administrer une topologie d’égal à égal &#40;programmation Transact-SQL de la réplication&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span><span class="sxs-lookup"><span data-stu-id="f9830-218">[Administer a Peer-to-Peer Topology &#40;Replication Transact-SQL Programming&#41;](../administration/administer-a-peer-to-peer-topology-replication-transact-sql-programming.md) </span></span>  
 <span data-ttu-id="f9830-219">[Stratégies de sauvegarde et de restauration de la réplication transactionnelle et d’instantané](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="f9830-219">[Strategies for Backing Up and Restoring Snapshot and Transactional Replication](../administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md) </span></span>  
 [<span data-ttu-id="f9830-220">Types de publication pour la réplication transactionnelle</span><span class="sxs-lookup"><span data-stu-id="f9830-220">Publication Types for Transactional Replication</span></span>](transactional-replication.md)  
  
  
