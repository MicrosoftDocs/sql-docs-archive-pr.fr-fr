---
title: Améliorer les performances générales de la réplication | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], design and performance
- designing databases [SQL Server], replication performance
- Snapshot Agent, performance
- snapshots [SQL Server replication], performance considerations
- merge replication performance [SQL Server replication]
- snapshot replication [SQL Server], performance
- subscriptions [SQL Server replication], performance considerations
- agents [SQL Server replication], performance
- performance [SQL Server replication], general considerations
- transactional replication, performance
ms.assetid: 895b1ad7-ffb9-4a5c-bda6-e1dfbd56d9bf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 0a85519a947e7d5d03f324b71984d2ffb40bcefe
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709239"
---
# <a name="enhance-general-replication-performance"></a><span data-ttu-id="148cb-102">Améliorer les performances générales de la réplication</span><span class="sxs-lookup"><span data-stu-id="148cb-102">Enhance General Replication Performance</span></span>
  <span data-ttu-id="148cb-103">Vous pouvez améliorer les performances globales de tous les types de réplication de votre application et de votre réseau à l'aide des indications décrites dans cette rubrique :</span><span class="sxs-lookup"><span data-stu-id="148cb-103">You can enhance the general performance for all types of replication in your application and on your network by using the guidelines described in this topic.</span></span>  
  
## <a name="server-and-network"></a><span data-ttu-id="148cb-104">Serveur et réseau</span><span class="sxs-lookup"><span data-stu-id="148cb-104">Server and Network</span></span>  
  
-   <span data-ttu-id="148cb-105">Définissez la quantité minimale et maximale de mémoire allouée à [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="148cb-105">Set the minimum and maximum amount of memory allocated to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)].</span></span>  
  
     <span data-ttu-id="148cb-106">Par défaut, le [!INCLUDE[ssDE](../../../includes/ssde-md.md)] modifie ses besoins de mémoire de façon dynamique en fonction des ressources système disponibles.</span><span class="sxs-lookup"><span data-stu-id="148cb-106">By default, the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] changes its memory requirements dynamically based on available system resources.</span></span> <span data-ttu-id="148cb-107">Pour éviter un problème de saturation de la mémoire lors des opérations de réplication, indiquez une taille de mémoire minimale disponible en vous servant de l'option **mémoire minimale du serveur** .</span><span class="sxs-lookup"><span data-stu-id="148cb-107">To avoid low memory availability during replication activities, use the **min server memory** option to set the minimum available memory.</span></span> <span data-ttu-id="148cb-108">Pour éviter que le système d'exploitation n'utilise la mémoire paginable sur le disque, vous pouvez également indiquer une taille de mémoire maximale à l'aide de l'option **mémoire maximale du serveur** .</span><span class="sxs-lookup"><span data-stu-id="148cb-108">To avoid having the operating system page to disc for memory, you can also set a maximum amount of memory with the **max server memory** option.</span></span> <span data-ttu-id="148cb-109">Pour en savoir plus, consultez [Mémoire du serveur (option de configuration de serveur)](../../../database-engine/configure-windows/server-memory-server-configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-109">For more information, see [Server Memory Server Configuration Options](../../../database-engine/configure-windows/server-memory-server-configuration-options.md).</span></span>  
  
-   <span data-ttu-id="148cb-110">Assurez-vous que l'allocation des fichiers de données des bases de données et des fichiers journaux est correcte.</span><span class="sxs-lookup"><span data-stu-id="148cb-110">Ensure proper allocation of database data files and log files.</span></span> <span data-ttu-id="148cb-111">Utilisez une unité de disque séparée pour le journal des transactions de toutes les bases de données impliquées dans la réplication.</span><span class="sxs-lookup"><span data-stu-id="148cb-111">Use a separate disk drive for the transaction log for all databases involved in replication.</span></span>  
  
     <span data-ttu-id="148cb-112">Vous pouvez réduire le temps nécessaire à l'écriture des transactions en stockant les fichiers-journaux sur une unité de disque différente de celle qui est utilisée pour le stockage de la base de données.</span><span class="sxs-lookup"><span data-stu-id="148cb-112">You can decrease the time it takes to write transactions by storing the log files on a disk drive different than the one used to store the database.</span></span> <span data-ttu-id="148cb-113">Vous pouvez mettre ce lecteur en miroir, par le biais d'un dispositif RAID-1 (Redundant Array of Inexpensive Disks), si la tolérance de panne est requise.</span><span class="sxs-lookup"><span data-stu-id="148cb-113">You can mirror that drive, using a Redundant Array of Inexpensive Disks (RAID)-1, if you require fault tolerance.</span></span> <span data-ttu-id="148cb-114">Utilisez RAID 0 ou 0+1 (selon vos besoins en tolérance de panne) pour les autres fichiers de base de données.</span><span class="sxs-lookup"><span data-stu-id="148cb-114">Use RAID 0 or 0+1 (depending on your need for fault tolerance) for other database files.</span></span> <span data-ttu-id="148cb-115">Cette mesure est pertinente, qu'une réplication soit ou non appliquée.</span><span class="sxs-lookup"><span data-stu-id="148cb-115">This is a good practice regardless of whether or not replication is being used.</span></span>  
  
-   <span data-ttu-id="148cb-116">Envisagez d'ajouter de la mémoire aux serveurs utilisés dans la réplication, surtout au serveur de distribution.</span><span class="sxs-lookup"><span data-stu-id="148cb-116">Consider adding memory to servers used in replication, particularly the Distributor.</span></span>  
  
-   <span data-ttu-id="148cb-117">Utilisez des ordinateurs multiprocesseurs.</span><span class="sxs-lookup"><span data-stu-id="148cb-117">Use multiprocessor computers.</span></span>  
  
     <span data-ttu-id="148cb-118">Les agents de réplication peuvent tirer profit de processeurs supplémentaires sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="148cb-118">Replication agents can take advantage of additional processors on the server.</span></span> <span data-ttu-id="148cb-119">Si vous faites un usage intensif de l'UC, envisagez l'installation d'une UC plus rapide ou de plusieurs UC.</span><span class="sxs-lookup"><span data-stu-id="148cb-119">If you are running at high CPU usage, consider installing a faster CPU or multiple CPUs.</span></span>  
  
-   <span data-ttu-id="148cb-120">Utilisez un réseau rapide.</span><span class="sxs-lookup"><span data-stu-id="148cb-120">Use a fast network.</span></span>  
  
     <span data-ttu-id="148cb-121">Le réseau peut s'avérer être un goulet d'étranglement important en terme de performance, principalement pour la réplication transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="148cb-121">The network can be a significant performance bottleneck, particularly for transactional replication.</span></span> <span data-ttu-id="148cb-122">La propagation des modifications sur les abonnés peut être améliorée de manière significative en utilisant un réseau rapide de 100 mégaoctets par seconde (Mbits/s) ou plus rapide.</span><span class="sxs-lookup"><span data-stu-id="148cb-122">The propagation of changes to Subscribers can be significantly enhanced by using a fast network of 100 megabits per second (Mbps) or faster.</span></span> <span data-ttu-id="148cb-123">Si le réseau est lent, spécifiez les paramètres appropriés pour le réseau et les agents.</span><span class="sxs-lookup"><span data-stu-id="148cb-123">If the network is slow, specify appropriate network settings and agent parameters.</span></span>  
  
## <a name="database-design"></a><span data-ttu-id="148cb-124">Création de bases de données</span><span class="sxs-lookup"><span data-stu-id="148cb-124">Database Design</span></span>  
  
-   <span data-ttu-id="148cb-125">Respectez les méthodes conseillées en matière de conception de bases de données.</span><span class="sxs-lookup"><span data-stu-id="148cb-125">Follow best practices for database design.</span></span>  
  
     <span data-ttu-id="148cb-126">Une base de données répliquée bénéficie généralement des mêmes optimisations de performances qu'une base de données non répliquée.</span><span class="sxs-lookup"><span data-stu-id="148cb-126">A replicated database generally benefits from the same performance optimizations as a non-replicated database.</span></span> <span data-ttu-id="148cb-127">Les index doivent cependant être utilisés prudemment sur l'Abonné : la colonne de clé primaire de l'Abonné doit être indexée, mais l'ajout d'index supplémentaires peut affecter les performances d'insertion, de mise à jour et de suppression.</span><span class="sxs-lookup"><span data-stu-id="148cb-127">However, indexes should be used with caution at the Subscriber: the primary key column at the Subscriber should be indexed, but additional indexes can affect insert, update, and delete performance.</span></span>  
  
-   <span data-ttu-id="148cb-128">Envisagez de configurer l'option de base de données READ_COMMITTED_SNAPSHOT.</span><span class="sxs-lookup"><span data-stu-id="148cb-128">Consider setting the READ_COMMITTED_SNAPSHOT database option.</span></span>  
  
     <span data-ttu-id="148cb-129">Pour aider à réduire les contentions entre l'activité de l'utilisateur et l'activité de l'Agent de réplication, définissez cette option pour les bases de données de publication et d'abonnement :</span><span class="sxs-lookup"><span data-stu-id="148cb-129">To help reduce contention between user activity and replication agent activity, set this option for the publication and subscription databases:</span></span>  
  
    ```  
    ALTER DATABASE AdventureWorks  
    SET READ_COMMITTED_SNAPSHOT ON  
    ```  
  
     <span data-ttu-id="148cb-130">Pour plus d’informations, consultez [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="148cb-130">For more information, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>  
  
-   <span data-ttu-id="148cb-131">Méfiez-vous de la logique des vos applications dans les déclencheurs.</span><span class="sxs-lookup"><span data-stu-id="148cb-131">Be cautious with application logic in triggers.</span></span>  
  
     <span data-ttu-id="148cb-132">La logique métier dans les déclencheurs définis par l'utilisateur sur l'Abonné peut ralentir la réplication des modifications sur l'Abonné :</span><span class="sxs-lookup"><span data-stu-id="148cb-132">Business logic in user-defined triggers at the Subscriber can slow down the replication of changes to the Subscriber:</span></span>  
  
    -   <span data-ttu-id="148cb-133">Dans le cas d'une réplication transactionnelle, il peut être plus efficace d'inclure cette logique dans des procédures stockées personnalisées utilisées pour appliquer les commandes répliquées.</span><span class="sxs-lookup"><span data-stu-id="148cb-133">For transactional replication, it can be more efficient to include this logic in custom stored procedures used to apply the replicated commands.</span></span> <span data-ttu-id="148cb-134">Pour plus d’informations, consultez [Spécifier le mode de propagation des modifications des articles transactionnels](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-134">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
    -   <span data-ttu-id="148cb-135">Dans le cas d'une réplication de fusion, il peut être plus efficace d'utiliser des gestionnaires de logique métier.</span><span class="sxs-lookup"><span data-stu-id="148cb-135">For merge replication, it can be more efficient to use business logic handlers.</span></span> <span data-ttu-id="148cb-136">Pour plus d’informations, consultez [Exécuter la logique métier lors de la synchronisation de fusion](../merge/execute-business-logic-during-merge-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-136">For more information, see [Execute Business Logic During Merge Synchronization](../merge/execute-business-logic-during-merge-synchronization.md).</span></span>  
  
     <span data-ttu-id="148cb-137">Si vous utilisez des déclencheurs pour conserver l'intégrité référentielle dans les tables publiées pour la réplication de fusion, indiquez l'ordre de traitement des tables afin de réduire le nombre de tentatives nécessaires à l'Agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="148cb-137">If you use triggers to maintain referential integrity in tables published for merge replication, specify the processing order of tables to reduce the number of retries required for the Merge Agent.</span></span> <span data-ttu-id="148cb-138">Pour plus d’informations, consultez [Spécifier les propriétés de la réplication de fusion](../publish/specify-merge-replication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-138">For more information, see [Specify Merge Replication properties](../publish/specify-merge-replication-properties.md).</span></span>  
  
-   <span data-ttu-id="148cb-139">Limitez l'utilisation des types de données d'objets volumineux (LOB).</span><span class="sxs-lookup"><span data-stu-id="148cb-139">Limit the use of Large Object (LOB) data types.</span></span>  
  
     <span data-ttu-id="148cb-140">Les objets volumineux nécessitent plus d'espace de stockage et de traitement que les autres types de données de colonnes.</span><span class="sxs-lookup"><span data-stu-id="148cb-140">LOBs require more storage space and processing than other column data types.</span></span> <span data-ttu-id="148cb-141">N'incluez pas ces colonnes dans les articles à moins que votre application en ait besoin.</span><span class="sxs-lookup"><span data-stu-id="148cb-141">Do not include these columns in articles unless necessary for your application.</span></span> <span data-ttu-id="148cb-142">Les types de données `text`, `ntext` et `image` sont déconseillés.</span><span class="sxs-lookup"><span data-stu-id="148cb-142">The data types `text`, `ntext`, and `image` are deprecated.</span></span> <span data-ttu-id="148cb-143">Si vous incluez des données de type LOB, il est recommandé d'utiliser respectivement les types de données `varchar(max)`, `nvarchar(max)`, `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="148cb-143">If you do include LOBs, we recommend that you use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)`, respectively.</span></span>  
  
     <span data-ttu-id="148cb-144">Dans le cas d'une réplication transactionnelle, envisagez d'utiliser le profil de l'Agent de distribution appelé **Profil de distribution pour le flux OLEDB**.</span><span class="sxs-lookup"><span data-stu-id="148cb-144">For transactional replication, consider using the Distribution Agent profile called **Distribution Profile for OLEDB streaming**.</span></span> <span data-ttu-id="148cb-145">Pour plus d'informations, voir [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-145">For more information, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="publication-design"></a><span data-ttu-id="148cb-146">Conception de la publication</span><span class="sxs-lookup"><span data-stu-id="148cb-146">Publication Design</span></span>  
  
-   <span data-ttu-id="148cb-147">Ne publiez que les données nécessaires.</span><span class="sxs-lookup"><span data-stu-id="148cb-147">Publish only the data required.</span></span>  
  
     <span data-ttu-id="148cb-148">Parce que la réplication est facile à initialiser, vous aurez tendance à publier plus de données que nécessaire.</span><span class="sxs-lookup"><span data-stu-id="148cb-148">Because replication is easy to set up, there is a tendency to publish more data than is actually required.</span></span> <span data-ttu-id="148cb-149">Cela peut entraîner une surconsommation des ressources dans la base de données de distribution, ainsi que dans les fichiers d'instantané et diminuer la capacité de traitement des données requises.</span><span class="sxs-lookup"><span data-stu-id="148cb-149">This can consume additional resources within the distribution databases and snapshot files, and can lower the throughput for required data.</span></span> <span data-ttu-id="148cb-150">Par conséquent, évitez d'éditer des tables superflues et envisagez de réduire la fréquence de mise à jour des publications.</span><span class="sxs-lookup"><span data-stu-id="148cb-150">Avoid publishing unnecessary tables and consider updating publications less frequently.</span></span>  
  
-   <span data-ttu-id="148cb-151">Réduisez les conflits grâce à la conception de la publication et au comportement de l'application.</span><span class="sxs-lookup"><span data-stu-id="148cb-151">Minimize conflicts through publication design and application behavior.</span></span>  
  
     <span data-ttu-id="148cb-152">Les types de réplications suivants permettent de modifier les données sur les abonnés : réplication de fusion, réplication transactionnelle avec mise à jour des abonnements et réplication transactionnelle d'égal à égal.</span><span class="sxs-lookup"><span data-stu-id="148cb-152">The following types of replication allow data to be changed at Subscribers: merge replication, transactional replication with updatable subscriptions, and peer-to-peer transactional replication.</span></span> <span data-ttu-id="148cb-153">La réplication de fusion et la réplication transactionnelle avec abonnements pouvant être mis à jour prennent en charge les conflits de données si une ligne donnée est mise à jour sur plus d'un nœud entre les synchronisations.</span><span class="sxs-lookup"><span data-stu-id="148cb-153">Merge replication and transactional replication with updatable subscriptions support data conflicts if a given row is updated at more than one node between synchronizations.</span></span> <span data-ttu-id="148cb-154">La réplication transactionnelle d'égal à égal ne prend pas en charge les conflits de données, les modifications de données doivent être partitionnées.</span><span class="sxs-lookup"><span data-stu-id="148cb-154">Peer-to-peer replication does not support data conflicts; data changes must be partitioned.</span></span> <span data-ttu-id="148cb-155">Quel que soit le type de réplication utilisé, il est recommandé de partitionner les modifications chaque fois que cela est possible, car cela réduit le traitement nécessaire pour la détection et la résolution des conflits.</span><span class="sxs-lookup"><span data-stu-id="148cb-155">Regardless of the type of replication used, we recommend that you partition changes whenever possible, because this reduces the processing required for conflict detection and resolution.</span></span>  
  
     <span data-ttu-id="148cb-156">Les modifications peuvent être partitionnées en publiant des sous-ensembles de données sur chaque abonné, ou en utilisant une application qui dirige les modifications d'une ligne donnée sur un nœud donné :</span><span class="sxs-lookup"><span data-stu-id="148cb-156">Changes can be partitioned by publishing subsets of data to each Subscriber or by having an application direct changes for a given row to a given node:</span></span>  
  
    -   <span data-ttu-id="148cb-157">La réplication de fusion prend en charge la publication de sous-ensembles de données à l'aide de paramètres filtrés avec une seule publication.</span><span class="sxs-lookup"><span data-stu-id="148cb-157">Merge replication supports publishing subsets of data using parameterized filters with a single publication.</span></span> <span data-ttu-id="148cb-158">Pour plus d'informations, voir [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-158">For more information, see [Parameterized Row Filters](../merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
    -   <span data-ttu-id="148cb-159">La réplication transactionnelle prend en charge la publication de sous-ensembles de données à l'aide de filtres statiques avec plusieurs publications.</span><span class="sxs-lookup"><span data-stu-id="148cb-159">Transactional replication supports publishing subsets of data using static filters with multiple publications.</span></span> <span data-ttu-id="148cb-160">Pour plus d’informations, consultez [Filtrer des données publiées](../publish/filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-160">For more information, see [Filter Published Data](../publish/filter-published-data.md).</span></span>  
  
-   <span data-ttu-id="148cb-161">Servez-vous des filtres de lignes judicieusement.</span><span class="sxs-lookup"><span data-stu-id="148cb-161">Use row filters judiciously.</span></span>  
  
     <span data-ttu-id="148cb-162">Lorsqu'une publication transactionnelle comporte un ou plusieurs articles utilisant des filtres de lignes, l'Agent de lecture du journal doit appliquer le filtre sur chaque ligne concernée par une mise à jour de la table, car il analyse le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="148cb-162">When a transactional publication includes one or more articles that use row filters, the Log Reader Agent must apply the filter to each row affected by an update to the table as it scans the transaction log.</span></span> <span data-ttu-id="148cb-163">La productivité de l'Agent de lecture du journal est donc affectée.</span><span class="sxs-lookup"><span data-stu-id="148cb-163">The throughput of the Log Reader Agent is therefore affected.</span></span>  
  
     <span data-ttu-id="148cb-164">De même, la réplication de fusion doit évaluer les lignes modifiées ou supprimées pour déterminer quels abonnés doivent recevoir ces lignes.</span><span class="sxs-lookup"><span data-stu-id="148cb-164">Similarly, merge replication must evaluate changed or deleted rows to determine which Subscribers should receive those rows.</span></span> <span data-ttu-id="148cb-165">Lorsque les filtres de lignes sont utilisés pour réduire les données requises sur un abonné, ce traitement est plus complexe et peut s'avérer plus lent que lors de la publication de toutes les lignes d'une table.</span><span class="sxs-lookup"><span data-stu-id="148cb-165">When row filters are employed to reduce the data required at a Subscriber, this processing is more complex and can be slower than when you publish all rows in a table.</span></span> <span data-ttu-id="148cb-166">Déterminez soigneusement le meilleur compromis entre la réduction des contraintes de stockage sur chaque abonné et la nécessité d'une productivité maximale.</span><span class="sxs-lookup"><span data-stu-id="148cb-166">Consider carefully the tradeoff between reduced storage requirements at each Subscriber and the need for achieving maximum throughput.</span></span> <span data-ttu-id="148cb-167">Pour plus d’informations sur le filtrage, consultez [Filtrer des données publiées](../publish/filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-167">For more information on filtering, see [Filter Published Data](../publish/filter-published-data.md).</span></span>  
  
## <a name="subscription-considerations"></a><span data-ttu-id="148cb-168">Considérations sur les abonnements</span><span class="sxs-lookup"><span data-stu-id="148cb-168">Subscription Considerations</span></span>  
  
-   <span data-ttu-id="148cb-169">Utilisez les abonnements par extraction de données (pull) lorsqu'il y a un grand nombre d'abonnés.</span><span class="sxs-lookup"><span data-stu-id="148cb-169">Use pull subscriptions when there are a large number of Subscribers.</span></span>  
  
     <span data-ttu-id="148cb-170">L'Agent de distribution et l'Agent de fusion s'exécutent sur le serveur de distribution pour les abonnements par envoi de données (push), et sur les abonnés pour les abonnements par extraction de données (pull).</span><span class="sxs-lookup"><span data-stu-id="148cb-170">The Distribution Agent and Merge Agent run at the Distributor for push subscriptions, and at Subscribers for pull subscriptions.</span></span> <span data-ttu-id="148cb-171">L'utilisation des abonnements par extraction de données (pull) permet d'améliorer les performances en déplaçant le traitement de l'Agent du serveur de distribution aux abonnés.</span><span class="sxs-lookup"><span data-stu-id="148cb-171">Using pull subscriptions can improve performance by moving agent processing from the Distributor to Subscribers.</span></span> <span data-ttu-id="148cb-172">Pour plus d’informations, consultez [S’abonner à des publications](../subscribe-to-publications.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-172">For more information, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="148cb-173">Envisagez de réinitialiser l'abonnement si les abonnés sont trop en retard.</span><span class="sxs-lookup"><span data-stu-id="148cb-173">Consider reinitialization of the subscription if Subscribers are too far behind.</span></span>  
  
     <span data-ttu-id="148cb-174">Lorsque des quantités importantes de modifications doivent être envoyées aux abonnés, la réinitialisation de ces derniers à partir d'un nouvel instantané peut s'avérer plus rapide que l'utilisation de la réplication pour déplacer chaque modification.</span><span class="sxs-lookup"><span data-stu-id="148cb-174">When large amounts of changes need to be sent to Subscribers, reinitializing them with a new snapshot might be faster than using replication to move the individual changes.</span></span> <span data-ttu-id="148cb-175">Pour plus d’informations, consultez [Réinitialiser des abonnements](../reinitialize-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-175">For more information, see [Reinitialize Subscriptions](../reinitialize-subscriptions.md).</span></span>  
  
     <span data-ttu-id="148cb-176">Pour la réplication transactionnelle, le moniteur de réplication affiche des informations sur l'onglet **Commandes non distribuées** sur : le nombre de transactions dans la base de données de distribution qui n'ont pas encore été distribuées à un Abonné ; et sur le temps estimé pour distribuer ces transactions.</span><span class="sxs-lookup"><span data-stu-id="148cb-176">For transactional replication, Replication Monitor displays on the **Undistributed Commands** tab information about: the number of transactions in the distribution database that have not yet been distributed to a Subscriber; and the estimated time for distributing these transactions.</span></span> <span data-ttu-id="148cb-177">Pour plus d’informations, consultez [Afficher des informations et effectuer des tâches à l’aide du moniteur de réplication](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-177">For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
## <a name="snapshot-considerations"></a><span data-ttu-id="148cb-178">Considérations sur les instantanés</span><span class="sxs-lookup"><span data-stu-id="148cb-178">Snapshot Considerations</span></span>  
  
-   <span data-ttu-id="148cb-179">N'exécutez l'Agent d'instantané que lorsque cela est nécessaire et aux heures creuses.</span><span class="sxs-lookup"><span data-stu-id="148cb-179">Run the Snapshot Agent only when necessary and at off-peak times.</span></span>  
  
     <span data-ttu-id="148cb-180">L'Agent d'instantané copie en bloc les données de la table publiée sur le serveur de publication vers un fichier du dossier d'instantanés sur le serveur de distribution.</span><span class="sxs-lookup"><span data-stu-id="148cb-180">The Snapshot Agent bulk copies data from the published table on the Publisher to a file in the snapshot folder on the Distributor.</span></span> <span data-ttu-id="148cb-181">La génération d'un instantané demeure un processus gourmand en ressources et donne ses meilleurs résultats pendant les heures creuses.</span><span class="sxs-lookup"><span data-stu-id="148cb-181">Generating a snapshot can be a resource intensive process and is best scheduled during off-peak times.</span></span>  
  
-   <span data-ttu-id="148cb-182">Utilisez un instantané en mode natif à moins qu'un instantané en mode caractère ne soit nécessaire.</span><span class="sxs-lookup"><span data-stu-id="148cb-182">Use a native mode snapshot unless a character mode snapshot is required.</span></span>  
  
     <span data-ttu-id="148cb-183">Utilisez l'instantané en mode natif par défaut pour tous les Abonnés, sauf pour les abonnés non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] et les abonnés exécutant [!INCLUDE[ssEW](../../../includes/ssew-md.md)], qui nécessitent un instantané en mode caractère.</span><span class="sxs-lookup"><span data-stu-id="148cb-183">Use the default native mode snapshot for all Subscribers except non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Subscribers and Subscribers running [!INCLUDE[ssEW](../../../includes/ssew-md.md)], which require a character mode snapshot.</span></span>  
  
-   <span data-ttu-id="148cb-184">Utilisez un dossier d'instantanés unique pour une publication.</span><span class="sxs-lookup"><span data-stu-id="148cb-184">Use a single snapshot folder for a publication.</span></span>  
  
     <span data-ttu-id="148cb-185">Lorsque vous définissez les propriétés de publication relatives à l'emplacement de l'instantané, vous pouvez choisir de générer les fichiers d'instantané dans le dossier d'instantanés par défaut, dans un autre dossier d'instantanés ou dans les deux dossiers à la fois.</span><span class="sxs-lookup"><span data-stu-id="148cb-185">When specifying the publication properties related to snapshot location, you can choose to generate snapshot files to the default snapshot folder, to an alternate snapshot folder, or to both.</span></span> <span data-ttu-id="148cb-186">La génération des fichiers d'instantané dans les deux emplacements nécessite un espace disque et un traitement supplémentaires lors de l'exécution de l'Agent d'instantané.</span><span class="sxs-lookup"><span data-stu-id="148cb-186">Generating snapshot files in both locations requires additional disk space and more processing when the Snapshot Agent runs.</span></span>  
  
-   <span data-ttu-id="148cb-187">Placez le dossier d'instantanés sur un disque local du serveur de distribution ne servant pas à stocker les fichiers de bases de données ou de journaux.</span><span class="sxs-lookup"><span data-stu-id="148cb-187">Place the snapshot folder on a drive local to the Distributor that is not used to store database or log files.</span></span>  
  
     <span data-ttu-id="148cb-188">L'Agent d'instantané effectue un enregistrement séquentiel des données sur le dossier d'instantanés.</span><span class="sxs-lookup"><span data-stu-id="148cb-188">The Snapshot Agent performs a sequential write of data to the snapshot folder.</span></span> <span data-ttu-id="148cb-189">Le fait de placer le dossier d'instantanés sur un disque séparé des fichiers de bases de données ou de journaux réduit les contentions entre les disques et permet au processus d'instantané de se terminer plus rapidement.</span><span class="sxs-lookup"><span data-stu-id="148cb-189">Placing the snapshot folder on a separate drive from any database or log files reduces contention among the disks and helps the snapshot process complete faster.</span></span>  
  
-   <span data-ttu-id="148cb-190">Lorsque vous créez la base de données d'abonnement sur l'Abonné, envisagez de spécifier un mode de récupération simple ou utilisant les journaux des transactions.</span><span class="sxs-lookup"><span data-stu-id="148cb-190">When you create the subscription database at the Subscriber, consider specifying a recovery model of simple or bulk-logged.</span></span> <span data-ttu-id="148cb-191">Cela permet de réduire au minimum la journalisation des insertions en bloc effectuées pendant l'application de l'instantané sur l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="148cb-191">This allows minimal logging of the bulk inserts performed during the application of the snapshot at the Subscriber.</span></span> <span data-ttu-id="148cb-192">Une fois que l'instantané a été appliqué sur la base de données d'abonnement, vous pouvez passer à un autre mode de récupération si nécessaire (les bases de données répliquées peuvent utiliser n'importe quel mode de récupération).</span><span class="sxs-lookup"><span data-stu-id="148cb-192">After the snapshot has been applied to the subscription database, you can change to a different recovery model if necessary (replicated databases can use any of the recovery models).</span></span> <span data-ttu-id="148cb-193">Pour plus d’informations sur la sélection d’un modèle de récupération, consultez [Vue d’ensemble de la restauration et de la récupération &#40;SQL Server&#41;](../../backup-restore/restore-and-recovery-overview-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-193">For more information about selecting a recovery model, see [Restore and Recovery Overview &#40;SQL Server&#41;](../../backup-restore/restore-and-recovery-overview-sql-server.md).</span></span>  
  
-   <span data-ttu-id="148cb-194">Envisagez d'utiliser le dossier d'instantanés de remplacement et les instantanés compressés sur support amovible pour les réseaux à faible bande passante.</span><span class="sxs-lookup"><span data-stu-id="148cb-194">Consider using the alternate snapshot folder and compressed snapshots on removable media for low-bandwidth networks.</span></span>  
  
     <span data-ttu-id="148cb-195">La compression des fichiers d'instantanés dans le dossier d'instantanés de remplacement permet de réduire les besoins de stockage sur disque, et de simplifier le transfert des fichiers d'instantanés sur support amovible.</span><span class="sxs-lookup"><span data-stu-id="148cb-195">Compressing snapshot files in the alternate snapshot folder can reduce snapshot disk storage requirements and make it easier to transfer snapshot files on removable media.</span></span>  
  
     <span data-ttu-id="148cb-196">Compresser les instantanés permet dans certains cas d'améliorer les performances du transfert des fichiers d'instantanés sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="148cb-196">Compressed snapshots can, in some cases, improve the performance of transferring snapshot files across the network.</span></span> <span data-ttu-id="148cb-197">Toutefois, la compression de l'instantané nécessite un traitement supplémentaire de la part de l'Agent d'instantané lors de la génération des fichiers d'instantanés, et de la part de l'Agent de distribution lors de l'application de ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="148cb-197">However, compressing the snapshot requires additional processing by the Snapshot Agent when generating the snapshot files, and by the Distribution Agent or Merge Agent when applying the snapshot files.</span></span> <span data-ttu-id="148cb-198">Dans certains cas, cela peut ralentir la génération de l'instantané et rallonger le délai d'application d'un instantané.</span><span class="sxs-lookup"><span data-stu-id="148cb-198">This may slow down snapshot generation and increase the time it takes to apply a snapshot in some cases.</span></span> <span data-ttu-id="148cb-199">De plus, les instantanés compressés ne peuvent pas reprendre si une défaillance du réseau se produit ; ils ne conviennent donc pas aux réseaux non fiables.</span><span class="sxs-lookup"><span data-stu-id="148cb-199">Additionally, compressed snapshots cannot be resumed if a network failure occurs; therefore they are not suitable for unreliable networks.</span></span> <span data-ttu-id="148cb-200">Évaluez ces différents facteurs avec précaution lors de l'utilisation d'instantanés compressés sur un réseau.</span><span class="sxs-lookup"><span data-stu-id="148cb-200">Consider these tradeoffs carefully when using compressed snapshots across a network.</span></span> <span data-ttu-id="148cb-201">Pour plus d'informations, consultez [Alternate Snapshot Folder Locations](../alternate-snapshot-folder-locations.md) et [Compressed Snapshots](../compressed-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-201">For more information, see [Alternate Snapshot Folder Locations](../alternate-snapshot-folder-locations.md) and [Compressed Snapshots](../compressed-snapshots.md).</span></span>  
  
-   <span data-ttu-id="148cb-202">Envisagez d'initialiser manuellement un abonnement.</span><span class="sxs-lookup"><span data-stu-id="148cb-202">Consider initializing a subscription manually.</span></span>  
  
     <span data-ttu-id="148cb-203">Dans certains scénarios, comme ceux impliquant de volumineux datasets initiaux, il est préférable d'initialiser un abonnement à l'aide d'une autre méthode que l'instantané.</span><span class="sxs-lookup"><span data-stu-id="148cb-203">In some scenarios, such as those involving large initial datasets, it is preferable to initialize a subscription using a method other than a snapshot.</span></span> <span data-ttu-id="148cb-204">Pour plus d’informations, consultez [Initialiser un abonnement transactionnel sans instantané](../initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-204">For more information, see [Initialize a Transactional Subscription Without a Snapshot](../initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
## <a name="agent-parameters"></a><span data-ttu-id="148cb-205">Paramètres de l'Agent</span><span class="sxs-lookup"><span data-stu-id="148cb-205">Agent Parameters</span></span>  
  
-   <span data-ttu-id="148cb-206">Réduisez les niveaux de détail des Agents de réplication, sauf au cours des test initiaux, de l'analyse ou du débogage.</span><span class="sxs-lookup"><span data-stu-id="148cb-206">Reduce the verbose levels of replication agents except during initial testing, monitoring, or debugging.</span></span>  
  
     <span data-ttu-id="148cb-207">Réduisez le paramètre **-HistoryVerboseLevel** et le paramètre **-OutputVerboseLevel** des Agents de distribution ou de fusion.</span><span class="sxs-lookup"><span data-stu-id="148cb-207">Reduce the **-HistoryVerboseLevel** parameter and the **-OutputVerboseLevel** parameter of the Distribution Agents or Merge Agents.</span></span> <span data-ttu-id="148cb-208">Cela diminue la quantité de nouvelles lignes insérées pour le suivi de l'historique et des valeurs de sortie de l'Agent.</span><span class="sxs-lookup"><span data-stu-id="148cb-208">This reduces the number of new rows inserted to track agent history and output.</span></span> <span data-ttu-id="148cb-209">En contrepartie, les messages d'historique antérieurs présentant le même état sont mis à jour à partir des nouvelles informations d'historique.</span><span class="sxs-lookup"><span data-stu-id="148cb-209">Instead, previous history messages with the same status are updated to the new history information.</span></span> <span data-ttu-id="148cb-210">Augmentez les niveaux de commentaire pour les tests, l'analyse et le débogage afin d'obtenir le plus d'informations possibles sur l'activité de l'Agent.</span><span class="sxs-lookup"><span data-stu-id="148cb-210">Increase the verbose levels for testing, monitoring, and debugging so that you have as much information about agent activity as possible.</span></span>  
  
-   <span data-ttu-id="148cb-211">Utilisez le paramètre **-MaxBCPThreads** de l’Agent d’instantané, de l’Agent de fusion et de l’Agent de distribution (le nombre de threads spécifié ne doit pas dépasser le nombre de processeurs sur l’ordinateur).</span><span class="sxs-lookup"><span data-stu-id="148cb-211">Use the **-MaxBCPThreads** parameter of the Snapshot Agent, Merge Agent, and Distribution Agent (the number of threads specified should not exceed the number of processors on the computer).</span></span> <span data-ttu-id="148cb-212">Ce paramètre indique le nombre d'opérations de copie en bloc pouvant être effectuées en parallèle lorsque l'instantané est créé et appliqué.</span><span class="sxs-lookup"><span data-stu-id="148cb-212">This parameter specifies the number of bulk copy operations that can be performed in parallel when the snapshot is created and applied.</span></span>  
  
-   <span data-ttu-id="148cb-213">Utilisez le paramètre **-UseInprocLoader** de l’Agent de distribution et de l’Agent de fusion (il est impossible d’utiliser ce paramètre si des tables publiées comportent des colonnes XML).</span><span class="sxs-lookup"><span data-stu-id="148cb-213">Use the **-UseInprocLoader** parameter of the Distribution Agent and the Merge Agent (this parameter cannot be used if published tables include XML columns).</span></span> <span data-ttu-id="148cb-214">Ce paramètre entraîne l'utilisation de la commande BULK INSERT par l'Agent lorsque l'instantané est appliqué.</span><span class="sxs-lookup"><span data-stu-id="148cb-214">This parameter causes the agent to use the BULK INSERT command when the snapshot is applied.</span></span>  
  
 <span data-ttu-id="148cb-215">Les paramètres des agents peuvent être spécifiés dans des profils d'agent et sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="148cb-215">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="148cb-216">Pour plus d'informations, consultez les pages suivantes :</span><span class="sxs-lookup"><span data-stu-id="148cb-216">For more information, see:</span></span>  
  
-   [<span data-ttu-id="148cb-217">Utiliser des profils d’agent de réplication</span><span class="sxs-lookup"><span data-stu-id="148cb-217">Work with Replication Agent Profiles</span></span>](../agents/work-with-replication-agent-profiles.md)  
  
-   [<span data-ttu-id="148cb-218">Afficher et modifier des paramètres d’invite de commandes d’un Agent de réplication &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="148cb-218">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   <span data-ttu-id="148cb-219">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="148cb-219">[Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span></span>  
  
  
