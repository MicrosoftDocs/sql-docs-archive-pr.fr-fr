---
title: Administration de l’Agent de réplication | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Snapshot Agent, administering
- Log Reader Agent, administering
- Queue Reader Agent, administering
- shared agents [SQL Server replication]
- Merge Agent, administering
- Distribution Agent, administering
- agents [SQL Server replication], administering
- replication cleanup jobs [SQL Server]
- administering replication, agents
- replication [SQL Server], administering
- independent agents [SQL Server replication]
ms.assetid: f27186b8-b1b2-4da0-8b2b-91f632c2ab7e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 99cf9be6b31310e5ae0ebac3c096851ac4f63452
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87603409"
---
# <a name="replication-agent-administration"></a><span data-ttu-id="0ecd5-102">Administration de l'Agent de réplication</span><span class="sxs-lookup"><span data-stu-id="0ecd5-102">Replication Agent Administration</span></span>
  <span data-ttu-id="0ecd5-103">Les agents de réplication accomplissent de nombreuses tâches associées à la réplication, notamment la création de copies du schéma et des données, la détection des mises à jour sur le serveur de publication ou sur l'Abonné, et la propagation des modifications entre les serveurs.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-103">Replication agents carry out many of the tasks associated with replication, including creating copies of schema and data, detecting updates at the Publisher or Subscriber, and propagating changes between servers.</span></span> <span data-ttu-id="0ecd5-104">Par défaut, les agents de réplication s’exécutent au titre des étapes de travail [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-104">By default, replication agents run under [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent job steps.</span></span> <span data-ttu-id="0ecd5-105">Les agents sont simplement des exécutables et peuvent donc être appelés directement à partir de la ligne de commande et de scripts de commande par lot.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-105">The agents are simply executables, so they can also be called directly from the command line and from batch scripts.</span></span> <span data-ttu-id="0ecd5-106">Chaque agent de réplication prend en charge un ensemble de paramètres d'exécution utilisés pour contrôler comment il s'exécute ; ces paramètres sont spécifiés dans un profil d'agent ou sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-106">Each replication agent supports a set of run-time parameters used to control how it runs; these parameters are specified in an agent profile or on the command line.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="0ecd5-107">Par défaut, le service [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent est désactivé lors de l'installation de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , sauf si vous choisissez explicitement de démarrer automatiquement le service au cours de l'installation.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-107">By default, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent service is disabled when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed unless you explicitly choose to autostart the service during installation.</span></span>  
  
 <span data-ttu-id="0ecd5-108">Les fichiers de l'Agent de réplication se trouvent sous [!INCLUDE[ssInstallPathVar](../../../includes/ssinstallpathvar-md.md)]\COM.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-108">Replication agent files are located under [!INCLUDE[ssInstallPathVar](../../../includes/ssinstallpathvar-md.md)]\COM.</span></span> <span data-ttu-id="0ecd5-109">Le tableau suivant contient la liste des noms des exécutables de la réplication et les noms des fichiers correspondants.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-109">The following table lists the replication executable names and file names.</span></span> <span data-ttu-id="0ecd5-110">Cliquez sur le lien correspondant à un agent pour afficher les informations de référence de ses paramètres.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-110">Click the link for an agent to view its parameter reference.</span></span>  
  
|<span data-ttu-id="0ecd5-111">Exécutable de l'agent</span><span class="sxs-lookup"><span data-stu-id="0ecd5-111">Agent Executable</span></span>|<span data-ttu-id="0ecd5-112">Nom de fichier</span><span class="sxs-lookup"><span data-stu-id="0ecd5-112">File Name</span></span>|  
|----------------------|---------------|  
|[<span data-ttu-id="0ecd5-113">Replication Snapshot Agent</span><span class="sxs-lookup"><span data-stu-id="0ecd5-113">Replication Snapshot Agent</span></span>](replication-snapshot-agent.md)|<span data-ttu-id="0ecd5-114">snapshot.exe</span><span class="sxs-lookup"><span data-stu-id="0ecd5-114">snapshot.exe</span></span>|  
|[<span data-ttu-id="0ecd5-115">Replication Distribution Agent</span><span class="sxs-lookup"><span data-stu-id="0ecd5-115">Replication Distribution Agent</span></span>](replication-distribution-agent.md)|<span data-ttu-id="0ecd5-116">distrib.exe</span><span class="sxs-lookup"><span data-stu-id="0ecd5-116">distrib.exe</span></span>|  
|[<span data-ttu-id="0ecd5-117">Agent de lecture du journal des réplications</span><span class="sxs-lookup"><span data-stu-id="0ecd5-117">Replication Log Reader Agent</span></span>](replication-log-reader-agent.md)|<span data-ttu-id="0ecd5-118">logread.exe</span><span class="sxs-lookup"><span data-stu-id="0ecd5-118">logread.exe</span></span>|  
|[<span data-ttu-id="0ecd5-119">Agent de lecture de la file d’attente de réplication</span><span class="sxs-lookup"><span data-stu-id="0ecd5-119">Replication Queue Reader Agent</span></span>](replication-queue-reader-agent.md)|<span data-ttu-id="0ecd5-120">qrdrsvc.exe</span><span class="sxs-lookup"><span data-stu-id="0ecd5-120">qrdrsvc.exe</span></span>|  
|[<span data-ttu-id="0ecd5-121">Replication Merge Agent</span><span class="sxs-lookup"><span data-stu-id="0ecd5-121">Replication Merge Agent</span></span>](replication-merge-agent.md)|<span data-ttu-id="0ecd5-122">replmerg.exe</span><span class="sxs-lookup"><span data-stu-id="0ecd5-122">replmerg.exe</span></span>|  
  
 <span data-ttu-id="0ecd5-123">En plus des agents de réplication, la réplication a plusieurs travaux qui effectuent de la maintenance planifiée et à la demande.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-123">In addition to replication agents, replication has a number of jobs that perform scheduled and on-demand maintenance.</span></span>  
  
 <span data-ttu-id="0ecd5-124">**Pour exécuter les travaux des agents et de maintenance**</span><span class="sxs-lookup"><span data-stu-id="0ecd5-124">**To run agents and maintenance jobs**</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]<span data-ttu-id="0ecd5-125">et moniteur de réplication : [Démarrer et arrêter un agent de réplication &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-125">and Replication Monitor: [Start and Stop a Replication Agent &#40;SQL Server Management Studio&#41;](start-and-stop-a-replication-agent-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="0ecd5-126">Programmation de la réplication : [Concepts des exécutables de l'agent de réplication](../concepts/replication-agent-executables-concepts.md)</span><span class="sxs-lookup"><span data-stu-id="0ecd5-126">Replication programming: [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md)</span></span>  
  
## <a name="agent-profiles"></a><span data-ttu-id="0ecd5-127">Profils de l'Agent</span><span class="sxs-lookup"><span data-stu-id="0ecd5-127">Agent Profiles</span></span>  
 <span data-ttu-id="0ecd5-128">Quand la réplication est configurée, un ensemble de profils d'agent est installé sur le serveur de distribution.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-128">When replication is configured, a set of agent profiles is installed on the Distributor.</span></span> <span data-ttu-id="0ecd5-129">Un profil d'agent contient un ensemble de paramètres qui sont utilisés chaque fois qu'un agent s'exécute : pendant le processus de démarrage, chaque agent se connecte au service de distribution et interroge les paramètres situés dans son profil.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-129">An agent profile contains a set of parameters that are used each time an agent runs: each agent logs in to the Distributor during its startup process and queries for the parameters in its profile.</span></span> <span data-ttu-id="0ecd5-130">La réplication fournit un profil par défaut pour chaque agent et des profils supplémentaires prédéfinis pour l'Agent de lecture du journal, l'Agent de distribution et l'Agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-130">Replication provides a default profile for each agent and additional predefined profiles for the Log Reader Agent, Distribution Agent, and Merge Agent.</span></span> <span data-ttu-id="0ecd5-131">En plus des profils fournis, vous pouvez créer des profils adaptés aux besoins de vos applications.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-131">In addition to the profiles provided, you can create profiles suited to your application requirements.</span></span> <span data-ttu-id="0ecd5-132">Pour plus d'informations, voir [Replication Agent Profiles](replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-132">For more information, see [Replication Agent Profiles](replication-agent-profiles.md).</span></span>  
  
 <span data-ttu-id="0ecd5-133">Pour obtenir des informations sur la spécification directe de paramètres en ligne de commande, consultez [Concepts des exécutables de l’agent de réplication](../concepts/replication-agent-executables-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-133">For information about specifying command line parameters directly, see [Replication Agent Executables Concepts](../concepts/replication-agent-executables-concepts.md).</span></span>  
  
## <a name="monitoring-replication-agents"></a><span data-ttu-id="0ecd5-134">Surveillance des Agents de réplication</span><span class="sxs-lookup"><span data-stu-id="0ecd5-134">Monitoring Replication Agents</span></span>  
 <span data-ttu-id="0ecd5-135">Le moniteur de réplication vous permet d'afficher des informations et d'effectuer des tâches associées à chaque agent de réplication.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-135">Replication Monitor allows you to view information and perform tasks associated with each replication agent.</span></span> <span data-ttu-id="0ecd5-136">La liste suivante comprend chacun des agents, les onglets du moniteur de réplication sur lesquels ils peuvent être trouvés et un lien vers une rubrique qui explique comment accéder à ces onglets :</span><span class="sxs-lookup"><span data-stu-id="0ecd5-136">The following list includes each agent, the tabs in the Replication Monitor on which it can be found, and a link to a topic that explains how to access these tabs:</span></span>  
  
-   <span data-ttu-id="0ecd5-137">Les agents suivants sont associés à des publications dans le moniteur de réplication :</span><span class="sxs-lookup"><span data-stu-id="0ecd5-137">The following agents are associated with publications in Replication Monitor:</span></span>  
  
    -   <span data-ttu-id="0ecd5-138">Agent d'instantané</span><span class="sxs-lookup"><span data-stu-id="0ecd5-138">Snapshot Agent</span></span>  
  
    -   <span data-ttu-id="0ecd5-139">l'Agent de lecture du journal ;</span><span class="sxs-lookup"><span data-stu-id="0ecd5-139">Log Reader Agent</span></span>  
  
    -   <span data-ttu-id="0ecd5-140">Agent de lecture de la file d'attente</span><span class="sxs-lookup"><span data-stu-id="0ecd5-140">Queue Reader Agent</span></span>  
  
     <span data-ttu-id="0ecd5-141">Accédez aux informations et aux tâches associées à ces agents via l’onglet **agents** . Pour plus d’informations, consultez [afficher des informations et effectuer des tâches à l’aide du moniteur de réplication](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-141">Access information and tasks associated with these agents through the **Agents** tab. For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
-   <span data-ttu-id="0ecd5-142">Les agents suivants sont associés à des abonnements dans le moniteur de réplication :</span><span class="sxs-lookup"><span data-stu-id="0ecd5-142">The following agents are associated with subscriptions in Replication Monitor:</span></span>  
  
    -   <span data-ttu-id="0ecd5-143">Agent de distribution</span><span class="sxs-lookup"><span data-stu-id="0ecd5-143">Distribution Agent</span></span>  
  
    -   <span data-ttu-id="0ecd5-144">Agent de fusion</span><span class="sxs-lookup"><span data-stu-id="0ecd5-144">Merge Agent</span></span>  
  
     <span data-ttu-id="0ecd5-145">Accédez aux informations et aux tâches associées à ces agents par le biais des onglets suivants : **Liste de suivi des abonnements** (disponible pour chaque serveur de publication) ou **Tous les abonnements** (disponible pour chaque publication).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-145">Access information and tasks associated with these agents through the following tabs: **Subscription Watch List** (available for each Publisher) or the **All Subscriptions** tab (available for each publication).</span></span> <span data-ttu-id="0ecd5-146">Pour plus d’informations, consultez [Afficher des informations et effectuer des tâches à l’aide du moniteur de réplication](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-146">For more information, see [View Information and Perform Tasks using Replication Monitor](../monitor/view-information-and-perform-tasks-replication-monitor.md).</span></span>  
  
## <a name="independent-and-shared-agents"></a><span data-ttu-id="0ecd5-147">Agents indépendants et partagés</span><span class="sxs-lookup"><span data-stu-id="0ecd5-147">Independent and Shared Agents</span></span>  
 <span data-ttu-id="0ecd5-148">Un Agent indépendant est un Agent qui sert un seul abonnement.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-148">An independent agent is an agent that services one subscription.</span></span> <span data-ttu-id="0ecd5-149">Un agent partagé fournit des services à plusieurs abonnements ; si plusieurs abonnements utilisant le même agent partagé doivent se synchroniser, ils attendent par défaut dans une file d'attente, et l'agent partagé leur fournit ce service l'un après l'autre.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-149">A shared agent services multiple subscriptions; if multiple subscriptions using the same shared agent need to synchronize, by default they wait in a queue, and the shared agent services them one at a time.</span></span> <span data-ttu-id="0ecd5-150">Le temps de latence est réduit lors de l'utilisation d'agents indépendants car ceux-ci sont disponibles dès que l'abonnement doit être synchronisé.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-150">Latency is reduced when using independent agents because the agent is ready whenever the subscription needs to be synchronized.</span></span> <span data-ttu-id="0ecd5-151">La réplication de fusion utilise toujours des agents indépendants, et la réplication transactionnelle utilise par défaut des agents indépendants pour les publications créées dans l'Assistant Nouvelle publication (dans les versions précédentes de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], la réplication transactionnelle utilisait par défaut des agents partagés).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-151">Merge replication always uses independent agents, and transactional replication uses independent agents by default for publications created in the New Publication Wizard (in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], transactional replication used shared agents by default).</span></span>  
  
## <a name="replication-maintenance-jobs"></a><span data-ttu-id="0ecd5-152">Travaux de maintenance de la réplication</span><span class="sxs-lookup"><span data-stu-id="0ecd5-152">Replication Maintenance Jobs</span></span>  
 <span data-ttu-id="0ecd5-153">La réplication utilise les travaux suivants pour effectuer de la maintenance planifiée et à la demande.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-153">Replication uses the following jobs to perform scheduled and on-demand maintenance.</span></span>  
  
|<span data-ttu-id="0ecd5-154">Travail de nettoyage</span><span class="sxs-lookup"><span data-stu-id="0ecd5-154">Clean up job</span></span>|<span data-ttu-id="0ecd5-155">Description</span><span class="sxs-lookup"><span data-stu-id="0ecd5-155">Description</span></span>|<span data-ttu-id="0ecd5-156">Planification par défaut</span><span class="sxs-lookup"><span data-stu-id="0ecd5-156">Default schedule</span></span>|  
|------------------|-----------------|----------------------|  
|<span data-ttu-id="0ecd5-157">Nettoyage de l’historique de l’agent : Distribution</span><span class="sxs-lookup"><span data-stu-id="0ecd5-157">Agent History Clean Up: Distribution</span></span>|<span data-ttu-id="0ecd5-158">Supprime les enregistrements historiques des agents de réplication dans la base de données de distribution.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-158">Removes replication agent history from the distribution database.</span></span>|<span data-ttu-id="0ecd5-159">S'exécute toutes les dix minutes</span><span class="sxs-lookup"><span data-stu-id="0ecd5-159">Runs every ten minutes</span></span>|  
|<span data-ttu-id="0ecd5-160">Nettoyage de la distribution : Distribution</span><span class="sxs-lookup"><span data-stu-id="0ecd5-160">Distribution Clean Up: Distribution</span></span>|<span data-ttu-id="0ecd5-161">Suppression des transactions répliquées de la base de données de distribution.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-161">Removes replicated transactions from the distribution database.</span></span> <span data-ttu-id="0ecd5-162">Désactive les abonnements qui n’ont été pas été synchronisés au cours de la période maximale de rétention de distribution.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-162">Deactivates subscriptions that have not been synchronized within the maximum distribution retention period.</span></span>|<span data-ttu-id="0ecd5-163">S'exécute toutes les dix minutes</span><span class="sxs-lookup"><span data-stu-id="0ecd5-163">Runs every ten minutes</span></span>|  
|<span data-ttu-id="0ecd5-164">Nettoyage de l'abonnement expiré</span><span class="sxs-lookup"><span data-stu-id="0ecd5-164">Expired Subscription Clean Up</span></span>|<span data-ttu-id="0ecd5-165">Détecte les abonnements expirés et les retire des bases de données de publication.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-165">Detects and removes expired subscriptions from publication databases.</span></span>|<span data-ttu-id="0ecd5-166">S'exécute chaque jour à 1 heure du matin.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-166">Runs every day at 1:00 A.M.</span></span>|  
|<span data-ttu-id="0ecd5-167">Réinitialiser les abonnements présentant des erreurs lors de la validation de données</span><span class="sxs-lookup"><span data-stu-id="0ecd5-167">Reinitialize Subscriptions Having Data Validation Failures</span></span>|<span data-ttu-id="0ecd5-168">Détecte tous les abonnements qui ont des échecs de validation des données et les marque pour réinitialisation.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-168">Detects all subscriptions that have data validation failures and marks them for reinitialization.</span></span> <span data-ttu-id="0ecd5-169">Lors de l'exécution suivante de l'Agent de fusion ou de l'Agent de distribution, un nouvel instantané sera appliqué aux Abonnés.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-169">The next time the Merge Agent or Distribution Agent runs, a new snapshot will be applied at the Subscribers.</span></span>|<span data-ttu-id="0ecd5-170">Pas de planification par défaut (non activé par défaut).</span><span class="sxs-lookup"><span data-stu-id="0ecd5-170">No default schedule (not enabled by default).</span></span>|  
|<span data-ttu-id="0ecd5-171">Contrôle des Agents de réplication</span><span class="sxs-lookup"><span data-stu-id="0ecd5-171">Replication Agents Checkup</span></span>|<span data-ttu-id="0ecd5-172">Détecte les Agents de réplication n'ayant pas d'enregistrement historique actif.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-172">Detects replication agents that are not actively logging history.</span></span> <span data-ttu-id="0ecd5-173">Il écrit dans le journal des événements de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows si l'étape d'un travail échoue.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-173">It writes to the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows event log if a job step fails.</span></span>|<span data-ttu-id="0ecd5-174">S'exécute toutes les dix minutes.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-174">Runs every ten minutes.</span></span>|  
|<span data-ttu-id="0ecd5-175">Actualisateur d'analyse de réplication pour la distribution</span><span class="sxs-lookup"><span data-stu-id="0ecd5-175">Replication monitoring refresher for distribution</span></span>|<span data-ttu-id="0ecd5-176">Actualise les requêtes mises en cache utilisées par le moniteur de réplication.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-176">Refreshes cached queries used by Replication Monitor..</span></span>|<span data-ttu-id="0ecd5-177">S'exécute en permanence.</span><span class="sxs-lookup"><span data-stu-id="0ecd5-177">Runs continuously.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="0ecd5-178">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0ecd5-178">See Also</span></span>  
 [<span data-ttu-id="0ecd5-179">Surveillance de la réplication</span><span class="sxs-lookup"><span data-stu-id="0ecd5-179">Monitoring Replication</span></span>](../monitoring-replication.md)  
  
  
