---
title: Filtres de lignes paramétrés | Microsoft Docs
ms.custom: ''
ms.date: 06/02/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- publications [SQL Server replication], dynamic filters
- merge replication [SQL Server replication], dynamic filters
- parameterized filters [SQL Server replication]
- filters [SQL Server replication], dynamic
- merge replication parameterized filters [SQL Server replication]
- publications [SQL Server replication], parameterized filters
- parameterized filters [SQL Server replication], about parameterized filters
- filters [SQL Server replication], parameterized
- dynamic filters [SQL Server replication]
ms.assetid: b48a6825-068f-47c8-afdc-c83540da4639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a293d5dfc6bfbdf66afb680f0604117e2cc02b2d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87600820"
---
# <a name="parameterized-row-filters"></a><span data-ttu-id="22340-102">Parameterized Row Filters</span><span class="sxs-lookup"><span data-stu-id="22340-102">Parameterized Row Filters</span></span>
  <span data-ttu-id="22340-103">Les filtres de lignes paramétrables permettent l'envoi de différentes partitions de données à divers Abonnés sans qu'il soit nécessaire de créer plusieurs publications (les filtres paramétrés étaient précédemment désignés par le terme « filtres dynamiques » dans les versions antérieures de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="22340-103">Parameterized row filters allow different partitions of data to be sent to different Subscribers without requiring multiple publications to be created (parameterized filters were referred to as dynamic filters in previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="22340-104">Une partition est un sous-ensemble de lignes d'une table ; selon les paramètres sélectionnés lors de la création d'un filtre de lignes paramétrable, chaque ligne d'une table publiée peut appartenir à une seule partition (ce qui donne des partitions qui ne se chevauchent pas), ou à deux ou plusieurs partitions (auquel cas, elles se chevauchent).</span><span class="sxs-lookup"><span data-stu-id="22340-104">A partition is a subset of the rows in a table; depending on the settings chosen when creating a parameterized row filter, each row in a published table can belong to one partition only (which produces nonoverlapping partitions) or to two or more partitions (which produces overlapping partitions).</span></span>  
  
 <span data-ttu-id="22340-105">Les partitions qui ne se chevauchent pas peuvent être partagées entre plusieurs abonnements ou limitées à un seul d'entre eux.</span><span class="sxs-lookup"><span data-stu-id="22340-105">Nonoverlapping partitions can be shared among subscriptions or they can be restricted so that only one subscription receives a given partition.</span></span> <span data-ttu-id="22340-106">Les paramètres qui contrôlent le comportement de la partition sont décrits dans la section « Utilisation des options de filtrage appropriées » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="22340-106">The settings that control partition behavior are described in "Using the Appropriate Filtering Options" later in this topic.</span></span> <span data-ttu-id="22340-107">Avec ces paramètres, vous pouvez adapter le filtrage paramétré aux besoins des applications et de performance.</span><span class="sxs-lookup"><span data-stu-id="22340-107">Using these settings you can tailor parameterized filtering according to application and performance requirements.</span></span> <span data-ttu-id="22340-108">En général, les partitions qui se chevauchent offrent davantage de souplesse, tandis que les partitions qui ne se chevauchent pas et sont répliquées sur un seul abonnement offrent de meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="22340-108">In general, overlapping partitions allow for greater flexibility, and nonoverlapping partitions replicated to a single subscription provide better performance.</span></span>  
  
 <span data-ttu-id="22340-109">Les filtres paramétrés sont utilisés sur une seule table et généralement combinés à des filtres de jointure afin d'étendre le filtrage aux tables connexes.</span><span class="sxs-lookup"><span data-stu-id="22340-109">Parameterized filters are used on a single table and are typically combined with join filters to extend filtering to related tables.</span></span> <span data-ttu-id="22340-110">Pour plus d’informations, voir [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22340-110">For more information, see [Join Filters](join-filters.md).</span></span>  
  
 <span data-ttu-id="22340-111">Pour définir ou modifier un filtre de lignes paramétré, consultez [Définir et modifier un filtre de lignes paramétrable pour un article de fusion](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span><span class="sxs-lookup"><span data-stu-id="22340-111">To define or modify a parameterized row filter, see [Define and Modify a Parameterized Row Filter for a Merge Article](../publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
## <a name="how-parameterized-filters-work"></a><span data-ttu-id="22340-112">Fonctionnement des filtres paramétrés</span><span class="sxs-lookup"><span data-stu-id="22340-112">How Parameterized Filters Work</span></span>  
 <span data-ttu-id="22340-113">Un filtre de lignes paramétré utilise une clause WHERE pour sélectionner les données appropriées à publier.</span><span class="sxs-lookup"><span data-stu-id="22340-113">A parameterized row filter uses a WHERE clause to select the appropriate data to be published.</span></span> <span data-ttu-id="22340-114">Plutôt que de spécifier une valeur littérale dans la clause (comme dans un filtre de lignes statique), vous spécifiez l'une des deux fonctions système suivantes ou les deux : SUSER_SNAME() et HOST_NAME().</span><span class="sxs-lookup"><span data-stu-id="22340-114">Rather than specifying a literal value in the clause (as you do with a static row filter), you specify one or both of the following system functions: SUSER_SNAME() and HOST_NAME().</span></span> <span data-ttu-id="22340-115">Il est également possible d'utiliser des fonctions définies par l'utilisateur mais elles doivent inclure SUSER_SNAME() ou HOST_NAME() dans le corps de la fonction ou évaluer l'une de ces fonctions système (par exemple, `MyUDF(SUSER_SNAME()`).</span><span class="sxs-lookup"><span data-stu-id="22340-115">User-defined functions can also be used, but they must include SUSER_SNAME() or HOST_NAME() in the body of the function, or evaluate one of these system functions (such as `MyUDF(SUSER_SNAME()`).</span></span> <span data-ttu-id="22340-116">Si une fonction définie par l'utilisateur inclut SUSER_SNAME() ou HOST_NAME() dans le corps de la fonction, vous ne pouvez pas passer de paramètres à la fonction.</span><span class="sxs-lookup"><span data-stu-id="22340-116">If a user-defined function includes SUSER_SNAME() or HOST_NAME() in the body of the function, you cannot pass parameters to the function.</span></span>  
  
 <span data-ttu-id="22340-117">Les fonctions système SUSER_SNAME() et HOST_NAME() ne sont pas propres à la réplication de fusion mais elles sont utilisées par celle-ci pour le filtrage paramétré :</span><span class="sxs-lookup"><span data-stu-id="22340-117">The system functions SUSER_SNAME() and HOST_NAME() are not specific to merge replication, but they are used by merge replication for parameterized filtering:</span></span>  
  
-   <span data-ttu-id="22340-118">SUSER_SNAME() retourne des informations de connexion sur les connexions établies avec une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22340-118">SUSER_SNAME() returns login information for connections made to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="22340-119">Lorsqu'elle est utilisée dans un filtre paramétré, elle retourne le nom de connexion utilisé par l'Agent de fusion pour se connecter au serveur de publication (spécifié lorsque vous créez un abonnement).</span><span class="sxs-lookup"><span data-stu-id="22340-119">When used in a parameterized filter, it returns the login used by the Merge Agent to connect to the Publisher (you specify a login when you create a subscription).</span></span>  
  
-   <span data-ttu-id="22340-120">HOST_NAME() retourne le nom de l'ordinateur qui se connecte à une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22340-120">HOST_NAME() returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="22340-121">Lorsqu'elle est utilisée dans un filtre paramétré, elle retourne par défaut le nom de l'ordinateur exécutant l'Agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="22340-121">When used in a parameterized filter, by default it returns the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="22340-122">Pour les abonnements extraits, il s'agit du nom du serveur de publication tandis que pour les abonnements envoyés, c'est celui du serveur de distribution.</span><span class="sxs-lookup"><span data-stu-id="22340-122">For pull subscriptions it is the name of the Subscriber; for push subscriptions it is the name of the Distributor.</span></span>  
  
     <span data-ttu-id="22340-123">Il est également possible de remplacer cette fonction par une valeur autre que le nom du serveur de publication ou de distribution.</span><span class="sxs-lookup"><span data-stu-id="22340-123">It is also possible to override this function with a value other than the name of the Subscriber or Distributor.</span></span> <span data-ttu-id="22340-124">En général les applications remplacent cette fonction par des valeurs plus explicites, telles qu'un nom de vendeur ou un ID de vendeur.</span><span class="sxs-lookup"><span data-stu-id="22340-124">Typically applications override this function with more meaningful values, such as a salesperson name or salesperson ID.</span></span> <span data-ttu-id="22340-125">Pour plus d'informations, consultez la section « Substitution de la valeur de HOST_NAME() » dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="22340-125">For more information, see the section "Overriding the HOST_NAME() Value" in this topic.</span></span>  
  
 <span data-ttu-id="22340-126">La valeur retournée par la fonction système est comparée à une colonne spécifiée dans la table que vous filtrez et les données appropriées sont téléchargées vers l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="22340-126">The value returned by the system function is compared to a column you specify in the table you are filtering, and the appropriate data is downloaded to the Subscriber.</span></span> <span data-ttu-id="22340-127">Cette comparaison est effectuée au moment de l'initialisation de l'abonnement (dès lors, seules les données pertinentes sont contenues dans l'instantané initial) et à chaque synchronisation de l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="22340-127">This comparison is made when the subscription is initialized (so only the appropriate data is contained in the initial snapshot) and every time the subscription is synchronized.</span></span> <span data-ttu-id="22340-128">Par défaut, si une modification sur le serveur de publication entraîne le déplacement d’une ligne hors d’une partition, la ligne est supprimée sur l’abonné (ce comportement est contrôlé à l’aide du **@allow_partition_realignment** paramètre de [Sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span><span class="sxs-lookup"><span data-stu-id="22340-128">By default, if a change at the Publisher results in a row being moved out of a partition, the row is deleted at the Subscriber (this behavior is controlled using the **@allow_partition_realignment** parameter of [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="22340-129">Lors des comparaisons effectuées pour les filtres paramétrés, le classement de la base de données est toujours utilisé.</span><span class="sxs-lookup"><span data-stu-id="22340-129">When comparisons are made for parameterized filters, the database collation is always used.</span></span> <span data-ttu-id="22340-130">Si, par exemple, le classement de la base de données ne respecte pas la casse mais que le classement de la table ou de la colonne le fait, la comparaison ne tiendra pas compte de la casse.</span><span class="sxs-lookup"><span data-stu-id="22340-130">For example, if the database collation is case insensitive, but the table or column collation is case sensitive, the comparison will be case insensitive.</span></span>  
  
### <a name="filtering-with-suser_sname"></a><span data-ttu-id="22340-131">Filtrage avec SUSER_SNAME()</span><span class="sxs-lookup"><span data-stu-id="22340-131">Filtering with SUSER_SNAME()</span></span>  
 <span data-ttu-id="22340-132">Prenons l'exemple de la **table Employee** dans la base de données exemple [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)]</span><span class="sxs-lookup"><span data-stu-id="22340-132">Consider the **Employee Table** in the [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] sample database.</span></span> <span data-ttu-id="22340-133">Cette table comprend la colonne **LoginID**qui contient le nom de connexion de chaque employé sous la forme «*domaine\connexion*».</span><span class="sxs-lookup"><span data-stu-id="22340-133">This table includes the column **LoginID**, which contains the login for each employee in the form '*domain\login*'.</span></span> <span data-ttu-id="22340-134">Pour filtrer la table afin que les employés reçoivent uniquement les données qui les concernent, spécifiez la clause de filtre suivante :</span><span class="sxs-lookup"><span data-stu-id="22340-134">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
LoginID = SUSER_SNAME()  
```  
  
 <span data-ttu-id="22340-135">Par exemple la valeur d'un des employés est « adventure-works\john5 ».</span><span class="sxs-lookup"><span data-stu-id="22340-135">For example, the value for one of the employees is 'adventure-works\john5'.</span></span> <span data-ttu-id="22340-136">Lorsque l'Agent de fusion se connecte au serveur de publication, il utilise le nom de connexion spécifié lors de la création de l'abonnement (dans ce cas-ci, adventure-works\john5).</span><span class="sxs-lookup"><span data-stu-id="22340-136">When the Merge Agent connects to the Publisher, it uses the login you specified when creating the subscription (in this case 'adventure-works\john5').</span></span> <span data-ttu-id="22340-137">L'Agent de fusion compare ensuite la valeur retournée par SUSER_SNAME() aux valeurs de la table et ne télécharge que la ligne qui contient la valeur « adventure-works\john5 » dans la colonne **LoginID** .</span><span class="sxs-lookup"><span data-stu-id="22340-137">The Merge Agent then compares the value returned by SUSER_SNAME() to the values in the table and downloads only the row that contains a value of 'adventure-works\john5' in the **LoginID** column.</span></span>  
  
### <a name="filtering-with-host_name"></a><span data-ttu-id="22340-138">Filtrage avec HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="22340-138">Filtering with HOST_NAME()</span></span>  
 <span data-ttu-id="22340-139">Prenons l'exemple de la table **HumanResources.Employee** .</span><span class="sxs-lookup"><span data-stu-id="22340-139">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="22340-140">Supposons que cette table contient une colonne **ComputerName** avec le nom de l'ordinateur de chaque employé désigné sous la forme «*nom_typeordinateur*».</span><span class="sxs-lookup"><span data-stu-id="22340-140">Suppose this table contained a column such as **ComputerName** with the name of each employee's computer in the form '*name_computertype*'.</span></span> <span data-ttu-id="22340-141">Pour filtrer la table afin que les employés reçoivent uniquement les données qui les concernent, spécifiez la clause de filtre suivante :</span><span class="sxs-lookup"><span data-stu-id="22340-141">To filter this table so that employees receive only the data related to them, specify a filter clause of:</span></span>  
  
```  
ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="22340-142">Par exemple, la valeur correspondant à l'un des employés peut être « john5_laptop ».</span><span class="sxs-lookup"><span data-stu-id="22340-142">For example, the value for one of the employees could be 'john5_laptop'.</span></span> <span data-ttu-id="22340-143">Lorsque l'Agent de fusion se connecte au serveur de publication, il compare la valeur retournée par SUSER_SNAME() aux valeurs de la table et ne télécharge que la ligne contenant la valeur « john5_laptop » dans la colonne **ComputerName** .</span><span class="sxs-lookup"><span data-stu-id="22340-143">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 'john5_laptop' in the **ComputerName** column.</span></span>  
  
 <span data-ttu-id="22340-144">Il est également possible de combiner les fonctions dans un filtre.</span><span class="sxs-lookup"><span data-stu-id="22340-144">It is also possible to combine the functions in a filter.</span></span> <span data-ttu-id="22340-145">Si, par exemple, vous souhaitez qu'un employé ne reçoive les données que s'il se connecte avec son nom de connexion sur son ordinateur, la clause du filtre peut se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="22340-145">For example, if you wanted to ensure that an employee received data only if they used their login on their computer, the filter clause could be:</span></span>  
  
```  
LoginID = SUSER_SNAME() AND ComputerName = HOST_NAME()  
```  
  
 <span data-ttu-id="22340-146">À moins que vous substituiez la valeur de HOST_NAME(), le filtrage avec HOST_NAME() est, en général, uniquement utilisé avec les abonnements extraits.</span><span class="sxs-lookup"><span data-stu-id="22340-146">Unless you are overriding the HOST_NAME() value, filtering with HOST_NAME() is typically used only with pull subscriptions.</span></span> <span data-ttu-id="22340-147">La valeur retournée par la fonction est le nom de l'ordinateur exécutant l'Agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="22340-147">The value returned by the function is the name of the computer on which the Merge Agent is running.</span></span> <span data-ttu-id="22340-148">Pour les abonnements extraits, la valeur est différente pour chaque abonnement alors que la valeur est identique pour les abonnements envoyés (tous les Agents de fusion s'exécutent sur le serveur de distribution dans le cas des abonnements envoyés).</span><span class="sxs-lookup"><span data-stu-id="22340-148">For pull subscriptions, the value is different for each subscription, but for push subscriptions, the value is the same (all Merge Agents run at the Distributor for push subscriptions).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="22340-149">La valeur de la fonction HOST_NAME() peut être substituée ; par conséquent, il n'est pas possible d'utiliser des filtres qui incluent HOST_NAME() pour contrôler l'accès aux partitions de données.</span><span class="sxs-lookup"><span data-stu-id="22340-149">The value for the HOST_NAME() function can be overridden; therefore it is not possible to use filters that include HOST_NAME() to control access to partitions of data.</span></span> <span data-ttu-id="22340-150">Pour contrôler cet accès, utilisez SUSER_SNAME(), SUSER_SNAME() en combinaison avec HOST_NAME() ou employez des filtres de lignes statiques.</span><span class="sxs-lookup"><span data-stu-id="22340-150">To control access to partitions of data, use SUSER_SNAME(), SUSER_SNAME() in combination with HOST_NAME(), or use static row filters.</span></span>  
  
#### <a name="overriding-the-host_name-value"></a><span data-ttu-id="22340-151">Substitution de la valeur de HOST_NAME()</span><span class="sxs-lookup"><span data-stu-id="22340-151">Overriding the HOST_NAME() Value</span></span>  
 <span data-ttu-id="22340-152">Comme indiqué ci-dessus, HOST_NAME() retourne, par défaut, le nom de l'ordinateur qui se connecte à une instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="22340-152">As noted earlier, HOST_NAME() by default returns the name of the computer that is connecting to an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="22340-153">Lors de l'utilisation de filtres paramétrés, il est fréquent de remplacer cette valeur par une autre valeur au moment où vous créez l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="22340-153">When using parameterized filters, it is common to override this value by supplying a value when you create a subscription.</span></span> <span data-ttu-id="22340-154">La fonction HOST_NAME() retourne alors la valeur spécifiée à la place du nom de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="22340-154">The HOST_NAME() function then returns the value you specify rather than the name of the computer.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="22340-155">Si vous remplacez la valeur de HOST_NAME(), tous les appels de la fonction HOST_NAME() retourneront la valeur que vous avez spécifiée.</span><span class="sxs-lookup"><span data-stu-id="22340-155">If you override HOST_NAME(), all calls to the HOST_NAME() function will return the value you specify.</span></span> <span data-ttu-id="22340-156">Assurez-vous que les autres applications ne dépendent pas de la fonction HOST_NAME() avec retour du nom de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="22340-156">Ensure that other applications are not depending on HOST_NAME() returning the computer name.</span></span>  
  
 <span data-ttu-id="22340-157">Prenons l'exemple de la table **HumanResources.Employee** .</span><span class="sxs-lookup"><span data-stu-id="22340-157">Consider the **HumanResources.Employee** table.</span></span> <span data-ttu-id="22340-158">Cette table comprend la colonne **EmployeeID**.</span><span class="sxs-lookup"><span data-stu-id="22340-158">This table includes the column **EmployeeID**.</span></span> <span data-ttu-id="22340-159">Pour filtrer la table afin que chaque employé reçoive uniquement les données qui le concerne, spécifiez la clause de filtre :</span><span class="sxs-lookup"><span data-stu-id="22340-159">To filter this table so that each employee receives only the data related to them, specify a filter clause of:</span></span>  
  
 `EmployeeID = CONVERT(int,HOST_NAME())`  
  
 <span data-ttu-id="22340-160">Par exemple, l'employée Pamela Ansman-Wolfe possède l'ID d'employé 280.</span><span class="sxs-lookup"><span data-stu-id="22340-160">For example, employee Pamela Ansman-Wolfe has been assigned an employee ID of 280.</span></span> <span data-ttu-id="22340-161">Spécifiez la valeur de l'ID d'employé (280 dans notre exemple) comme valeur de HOST_NAME() lorsque vous créez un abonnement pour celle-ci.</span><span class="sxs-lookup"><span data-stu-id="22340-161">Specify the value of the employee ID (280 in our example) for the HOST_NAME() value when creating a subscription for this employee.</span></span> <span data-ttu-id="22340-162">Lorsque l'Agent de fusion se connecte au serveur de publication, il compare la valeur retournée par HOST_NAME() aux valeurs de la table et ne télécharge que la ligne contenant la valeur 280 dans la colonne **EmployeeID** .</span><span class="sxs-lookup"><span data-stu-id="22340-162">When the Merge Agent connects to the Publisher, it compares the value returned by HOST_NAME() to the values in the table and downloads only the row that contains a value of 280 in the **EmployeeID** column.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="22340-163">Du fait que la fonction HOST_NAME() retourne une valeur de type `nchar`, vous devez utiliser CONVERT si la colonne dans la clause de filtre affiche un type de données numérique comme dans l'exemple ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="22340-163">The HOST_NAME() function returns an `nchar` value, so you must use CONVERT if the column in the filter clause is of a numeric data type, as it is in the example above.</span></span> <span data-ttu-id="22340-164">Pour des raisons de performances, nous vous recommandons de ne pas appliquer de fonctions aux noms de colonnes dans les clauses de filtre de lignes paramétrables, telles que `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span><span class="sxs-lookup"><span data-stu-id="22340-164">For performance reasons, we recommended that you do not apply functions to column names in parameterized row filter clauses, such as `CONVERT(nchar,EmployeeID) = HOST_NAME()`.</span></span> <span data-ttu-id="22340-165">En revanche, il est conseillé d'adopter l'approche illustrée dans l'exemple : `EmployeeID = CONVERT(int,HOST_NAME())`.</span><span class="sxs-lookup"><span data-stu-id="22340-165">Instead, we recommend using the approach shown in the example: `EmployeeID = CONVERT(int,HOST_NAME())`.</span></span> <span data-ttu-id="22340-166">Cette clause peut être utilisée pour le **@subset_filterclause** paramètre de [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), mais elle ne peut généralement pas être utilisée dans l’Assistant Nouvelle publication (l’assistant exécute la clause de filtre pour la valider, ce qui échoue car le nom de l’ordinateur ne peut pas être converti en un `int` ).</span><span class="sxs-lookup"><span data-stu-id="22340-166">This clause can be used for the **@subset_filterclause** parameter of [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), but it typically cannot be used in the New Publication Wizard (the wizard executes the filter clause to validate it, which fails because the computer name cannot be converted to an `int`).</span></span> <span data-ttu-id="22340-167">Si vous utilisez l'Assistant Nouvelle publication, nous vous recommandons de spécifier `CONVERT(nchar,EmployeeID) = HOST_NAME()` dans l'Assistant, puis d'utiliser ensuite [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) pour modifier la clause en `EmployeeID = CONVERT(int,HOST_NAME())` avant de créer un instantané de la publication.</span><span class="sxs-lookup"><span data-stu-id="22340-167">If you use the New Publication Wizard, we recommend specifying `CONVERT(nchar,EmployeeID) = HOST_NAME()` in the wizard and then use [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) to change the clause to `EmployeeID = CONVERT(int,HOST_NAME())` before creating a snapshot for the publication.</span></span>  
  
 <span data-ttu-id="22340-168">**Pour substituer la valeur de HOST_NAME()**</span><span class="sxs-lookup"><span data-stu-id="22340-168">**To override the HOST_NAME() value**</span></span>  
  
 <span data-ttu-id="22340-169">Utilisez l'une des méthodes suivantes pour substituer la valeur de HOST_NAME() :</span><span class="sxs-lookup"><span data-stu-id="22340-169">Use one of the following methods to override the HOST_NAME() value:</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="22340-170">: spécifiez une valeur dans la page **Valeurs de HOST\_NAME\(\)** de l’Assistant Nouvel abonnement.</span><span class="sxs-lookup"><span data-stu-id="22340-170">: specify a value on the **HOST\_NAME\(\) Values** page of the New Subscription Wizard.</span></span> <span data-ttu-id="22340-171">Pour plus d’informations sur la création d’abonnements, consultez [S’abonner à des publications](../subscribe-to-publications.md).</span><span class="sxs-lookup"><span data-stu-id="22340-171">For more information about creating subscriptions, see [Subscribe to Publications](../subscribe-to-publications.md).</span></span>  
  
-   <span data-ttu-id="22340-172">Programmation de la réplication [!INCLUDE[tsql](../../../includes/tsql-md.md)] : spécifiez une valeur pour le **@hostname** paramètre de [Sp_addmergesubscription &#40;&#41;Transact-SQL](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (pour les abonnements par envoi de type push) ou [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (pour les abonnements par extraction).</span><span class="sxs-lookup"><span data-stu-id="22340-172">Replication [!INCLUDE[tsql](../../../includes/tsql-md.md)] programming: specify a value for the **@hostname** parameter of [sp_addmergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) (for push subscriptions) or [sp_addmergepullsubscription_agent &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql) (for pull subscriptions).</span></span>  
  
-   <span data-ttu-id="22340-173">Agent de fusion : spécifiez une valeur pour le paramètre **-Hostname** dans la ligne de commande ou par l’intermédiaire d’un profil d’Agent.</span><span class="sxs-lookup"><span data-stu-id="22340-173">Merge Agent: specify a value for the **-Hostname** parameter at the command line or through an agent profile.</span></span> <span data-ttu-id="22340-174">Pour plus d'informations sur l'Agent de fusion, consultez [Replication Merge Agent](../agents/replication-merge-agent.md).</span><span class="sxs-lookup"><span data-stu-id="22340-174">For more information about the Merge Agent, see [Replication Merge Agent](../agents/replication-merge-agent.md).</span></span> <span data-ttu-id="22340-175">Pour plus d'informations sur les profils d'Agent, consultez [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="22340-175">For more information about agent profiles, see [Replication Agent Profiles](../agents/replication-agent-profiles.md).</span></span>  
  
## <a name="initializing-a-subscription-to-a-publication-with-parameterized-filters"></a><span data-ttu-id="22340-176">Initialisation d'un abonnement à une publication avec des filtres paramétrés</span><span class="sxs-lookup"><span data-stu-id="22340-176">Initializing a Subscription to a Publication with Parameterized Filters</span></span>  
 <span data-ttu-id="22340-177">Lorsque vous utilisez des filtres de lignes paramétrés dans les publications de fusion, la réplication initialise chaque abonnement avec un instantané en deux parties.</span><span class="sxs-lookup"><span data-stu-id="22340-177">When parameterized row filters are used in merge publications, replication initializes each subscription with a two-part snapshot.</span></span> <span data-ttu-id="22340-178">Pour plus d'informations, voir [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22340-178">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
## <a name="using-the-appropriate-filtering-options"></a><span data-ttu-id="22340-179">Utilisation des options de filtrage appropriées</span><span class="sxs-lookup"><span data-stu-id="22340-179">Using the Appropriate Filtering Options</span></span>  
 <span data-ttu-id="22340-180">Vous contrôlez essentiellement deux processus lorsque vous utilisez les filtres paramétrés :</span><span class="sxs-lookup"><span data-stu-id="22340-180">There are two key areas over which you have control when using parameterized filters:</span></span>  
  
-   <span data-ttu-id="22340-181">le mode de traitement des filtres par réplication de fusion, qui est contrôlé par l'un des deux paramètres de publication : **use partition groups** et **keep partition changes**.</span><span class="sxs-lookup"><span data-stu-id="22340-181">How the filters are processed by merge replication, which is controlled by one of two publication settings: **use partition groups** and **keep partition changes**.</span></span>  
  
-   <span data-ttu-id="22340-182">le mode de partage des données entre Abonnés, lequel est identifié par le paramètre d'article **partition options**.</span><span class="sxs-lookup"><span data-stu-id="22340-182">How the data is shared among Subscribers, which must be reflected by the article setting **partition options**.</span></span>  
  
 <span data-ttu-id="22340-183">Pour définir des options de filtrage, consultez [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22340-183">To set filtering options, see [Optimize Parameterized Row Filters](../publish/optimize-parameterized-row-filters.md).</span></span>  
  
### <a name="setting-use-partition-groups-and-keep-partition-changes"></a><span data-ttu-id="22340-184">Définition de « use partition groups » et « keep partition changes »</span><span class="sxs-lookup"><span data-stu-id="22340-184">Setting 'use partition groups' and 'keep partition changes'</span></span>  
 <span data-ttu-id="22340-185">Les options **use partition groups** et **keep partition changes** améliorent les performances de synchronisation des publications avec des articles filtrés en stockant des métadonnées supplémentaires dans la base de données de publication.</span><span class="sxs-lookup"><span data-stu-id="22340-185">Both the **use partition groups** and **keep partition changes** options improve the synchronization performance for publications with filtered articles by storing additional metadata in the publication database.</span></span> <span data-ttu-id="22340-186">C'est l'option **use partition groups** qui améliore le plus les performances grâce à l'utilisation de la fonctionnalité de partitions précalculées.</span><span class="sxs-lookup"><span data-stu-id="22340-186">The **use partition groups** option provides greater performance improvement through the use of the precomputed partitions feature.</span></span> <span data-ttu-id="22340-187">Par défaut, cette option est définie à `true` si les articles de votre publication respectent un ensemble de conditions.</span><span class="sxs-lookup"><span data-stu-id="22340-187">This option is set to `true` by default if the articles in your publication adhere to a set of requirements.</span></span> <span data-ttu-id="22340-188">Pour plus d’informations sur ces exigences, consultez [Optimiser les performances des filtres paramétrés avec des partitions précalculées](parameterized-filters-optimize-for-precomputed-partitions.md).</span><span class="sxs-lookup"><span data-stu-id="22340-188">For more information about these requirements, see [Optimize Parameterized Filter Performance with Precomputed Partitions](parameterized-filters-optimize-for-precomputed-partitions.md).</span></span> <span data-ttu-id="22340-189">Si vos articles ne répondent pas à la configuration requise pour l’utilisation de partitions précalculées, l’option **conserver les modifications de partition** est définie sur `true` .</span><span class="sxs-lookup"><span data-stu-id="22340-189">If your articles do not meet the requirements for using precomputed partitions, the **keep partition changes** option to is set to `true`.</span></span>  
  
### <a name="setting-partition-options"></a><span data-ttu-id="22340-190">Définition de « partition options »</span><span class="sxs-lookup"><span data-stu-id="22340-190">Setting 'partition options'</span></span>  
 <span data-ttu-id="22340-191">Vous spécifiez une valeur pour la propriété **partition options** lors de la création d'un article, selon la façon dont les données de la table filtrée seront partagées par les Abonnés.</span><span class="sxs-lookup"><span data-stu-id="22340-191">You specify a value for the **partition options** property when creating an article, according to the way in which data in the filtered table will be shared by Subscribers.</span></span> <span data-ttu-id="22340-192">Vous pouvez attribuer une à quatre valeurs à l'aide de [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql)et de la boîte de dialogue **Propriétés de l'article** .</span><span class="sxs-lookup"><span data-stu-id="22340-192">The property can be set to one of four values using [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), and the **Article Properties** dialog box.</span></span> <span data-ttu-id="22340-193">La propriété peut avoir deux valeurs différentes lorsque vous la définissez dans les boîtes de dialogue **Ajouter un filtre** ou **Modifier le filtre** , auxquelles vous accédez à partir de l'Assistant Nouvelle publication et la boîte de dialogue **Propriétés de la publication** .</span><span class="sxs-lookup"><span data-stu-id="22340-193">The property can be set to one of two values using the **Add Filter** or **Edit Filter** dialog boxes, which are available from the New Publication Wizard and the **Publication Properties** dialog box.</span></span> <span data-ttu-id="22340-194">Le tableau suivant récapitule les valeurs disponibles :</span><span class="sxs-lookup"><span data-stu-id="22340-194">The following table summarizes the available values:</span></span>  
  
|<span data-ttu-id="22340-195">Description</span><span class="sxs-lookup"><span data-stu-id="22340-195">Description</span></span>|<span data-ttu-id="22340-196">Valeur dans Ajouter un filtre et Modifier un filtre</span><span class="sxs-lookup"><span data-stu-id="22340-196">Value in Add Filter and Edit Filter</span></span>|<span data-ttu-id="22340-197">Valeur dans Propriétés de l'article</span><span class="sxs-lookup"><span data-stu-id="22340-197">Value in Article Properties</span></span>|<span data-ttu-id="22340-198">Valeur dans les procédures stockées</span><span class="sxs-lookup"><span data-stu-id="22340-198">Value in stored procedures</span></span>|  
|-----------------|-----------------------------------------|---------------------------------|--------------------------------|  
|<span data-ttu-id="22340-199">Les données dans les partitions se chevauchent et l'Abonné peut mettre à jour des colonnes référencées dans un filtre paramétré.</span><span class="sxs-lookup"><span data-stu-id="22340-199">Data in the partitions is overlapping, and the Subscriber can update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="22340-200">**Une ligne de cette table ira à plusieurs abonnements**</span><span class="sxs-lookup"><span data-stu-id="22340-200">**A row from this table will go to multiple subscriptions**</span></span>|<span data-ttu-id="22340-201">**Chevauchement**</span><span class="sxs-lookup"><span data-stu-id="22340-201">**Overlapping**</span></span>|<span data-ttu-id="22340-202">**0**</span><span class="sxs-lookup"><span data-stu-id="22340-202">**0**</span></span>|  
|<span data-ttu-id="22340-203">Les données dans les partitions se chevauchent et l'Abonné ne peut pas mettre à jour les colonnes référencées dans un filtre paramétré.</span><span class="sxs-lookup"><span data-stu-id="22340-203">Data in the partitions is overlapping, and the Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="22340-204">N/A<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="22340-204">N/A<sup>1</sup></span></span>|<span data-ttu-id="22340-205">**Chevauchement ; refus des modifications de données hors partition**</span><span class="sxs-lookup"><span data-stu-id="22340-205">**Overlapping, disallow out-of-partition data changes**</span></span>|<span data-ttu-id="22340-206">**1**</span><span class="sxs-lookup"><span data-stu-id="22340-206">**1**</span></span>|  
|<span data-ttu-id="22340-207">Les données des partitions ne se chevauchent pas et les données sont partagées entre les abonnements.</span><span class="sxs-lookup"><span data-stu-id="22340-207">Data in the partitions is not overlapping, and the data is shared between subscriptions.</span></span> <span data-ttu-id="22340-208">L'Abonné ne peut pas mettre à jour les colonnes référencées dans un filtre paramétré.</span><span class="sxs-lookup"><span data-stu-id="22340-208">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>|<span data-ttu-id="22340-209">N/A<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="22340-209">N/A<sup>1</sup></span></span>|<span data-ttu-id="22340-210">**Non-chevauchement ; partage entre les abonnements**</span><span class="sxs-lookup"><span data-stu-id="22340-210">**Nonoverlapping, shared between subscriptions**</span></span>|<span data-ttu-id="22340-211">**2**</span><span class="sxs-lookup"><span data-stu-id="22340-211">**2**</span></span>|  
|<span data-ttu-id="22340-212">Les données des partitions ne se chevauchent pas et il n'existe qu'un seul abonnement par partition.</span><span class="sxs-lookup"><span data-stu-id="22340-212">Data in the partitions is not overlapping, and there is a single subscription per partition.</span></span> <span data-ttu-id="22340-213">L’abonné ne peut pas mettre à jour les colonnes référencées dans un filtre paramétré. <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="22340-213">The Subscriber cannot update columns referenced in a parameterized filter.<sup>2</sup></span></span>|<span data-ttu-id="22340-214">**Filtre paramétré créant des partitions qui ne se chevauchent pas, avec un seul abonnement par partition**</span><span class="sxs-lookup"><span data-stu-id="22340-214">**A row from this table will go to only one subscription**</span></span>|<span data-ttu-id="22340-215">**Non-chevauchement ; abonnement unique**</span><span class="sxs-lookup"><span data-stu-id="22340-215">**Nonoverlapping, single subscription**</span></span>|<span data-ttu-id="22340-216">**3**</span><span class="sxs-lookup"><span data-stu-id="22340-216">**3**</span></span>|  
  
 <span data-ttu-id="22340-217"><sup>1</sup> si l’option de filtrage sous-jacente a la valeur **0**, ou **1**ou **2**, les boîtes de dialogue **Ajouter un filtre** et **modifier le filtre** affichent **une ligne de cette table qui accède à plusieurs abonnements**.</span><span class="sxs-lookup"><span data-stu-id="22340-217"><sup>1</sup> If the underlying filtering option is set to **0**, or **1**, or **2**, the **Add Filter** and **Edit Filter** dialog boxes will display **A row from this table will go to multiple subscriptions**.</span></span>  
  
 <span data-ttu-id="22340-218"><sup>2</sup> si vous spécifiez cette option, il ne peut y avoir qu’un seul abonnement pour chaque partition de données de cet article.</span><span class="sxs-lookup"><span data-stu-id="22340-218"><sup>2</sup> If you specify this option, there can only be a single subscription for each partition of data in that article.</span></span> <span data-ttu-id="22340-219">Si un deuxième abonnement est créé dans lequel le critère de filtrage du nouvel abonnement produit la même partition que l'abonnement existant, ce dernier est supprimé.</span><span class="sxs-lookup"><span data-stu-id="22340-219">If a second subscription is created in which the filtering criterion of the new subscription resolves to the same partition as the existing subscription, the existing subscription is dropped.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="22340-220">La valeur de **partition options** doit être définie en fonction du partage des données entre Abonnés.</span><span class="sxs-lookup"><span data-stu-id="22340-220">The **partition options** value must be set according to how data is shared by Subscribers.</span></span> <span data-ttu-id="22340-221">Si, par exemple, vous spécifiez une partition qui ne se chevauche pas avec un seul abonnement par partition mais que les données sont ensuite mises à jour sur un autre Abonné, l'Agent de fusion peut échouer au cours de la synchronisation et un problème de non convergence peut survenir.</span><span class="sxs-lookup"><span data-stu-id="22340-221">If, for example, you specify that a partition is nonoverlapping with a single subscription per partition, but data is then updated at another Subscriber, the Merge Agent can fail during synchronization and non-convergence can occur.</span></span>  
  
#### <a name="selecting-the-appropriate-partition-option"></a><span data-ttu-id="22340-222">Sélection de l'option de partition adéquate</span><span class="sxs-lookup"><span data-stu-id="22340-222">Selecting the Appropriate Partition Option</span></span>  
 <span data-ttu-id="22340-223">Les partitions qui ne se chevauchent pas sont utilisées en conjonction avec les partitions précalculées pour améliorer les performances dans les cas où certaines limitations fonctionnelles sont admises.</span><span class="sxs-lookup"><span data-stu-id="22340-223">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance in situations where some functional limitations are acceptable.</span></span> <span data-ttu-id="22340-224">Les partitions précalculées accélèrent les téléchargements vers les Abonnés mais ralentissent les téléchargements à partir de ceux-ci.</span><span class="sxs-lookup"><span data-stu-id="22340-224">Precomputed partitions quicken downloads to Subscribers, but slow uploads.</span></span> <span data-ttu-id="22340-225">Les partitions qui ne se chevauchent pas réduisent les coûts de téléchargement associés aux partitions précalculées.</span><span class="sxs-lookup"><span data-stu-id="22340-225">Nonoverlapping partitions minimize the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="22340-226">Le gain de performances lié au non-chevauchement des partitions est plus flagrant lorsque les filtres paramétrés et les filtres de jointure utilisés sont plus complexes.</span><span class="sxs-lookup"><span data-stu-id="22340-226">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span>  
  
 <span data-ttu-id="22340-227">Prenez les scénarios suivants en considération lorsque vous décidez de l'option de partition à utiliser dans une publication.</span><span class="sxs-lookup"><span data-stu-id="22340-227">Consider the following scenarios when deciding which partition options to use in a publication.</span></span>  
  
-   [!INCLUDE[ssSampleDBCoShort](../../../includes/sssampledbcoshort-md.md)] <span data-ttu-id="22340-228">possède une force de vente itinérante dont chaque membre est responsable de clients de la zone d'un code postal donné.</span><span class="sxs-lookup"><span data-stu-id="22340-228">has a mobile sales force with each sales person responsible for customers in a given zip code.</span></span> <span data-ttu-id="22340-229">En cas de déplacement d'un client d'un secteur de vente vers un autre, l'application exige que le code postal soit mis à jour pour que le client soit attribué à un autre commercial.</span><span class="sxs-lookup"><span data-stu-id="22340-229">The application requires that  the zip code be updated if a customer moves from one sales territory to another, so that the customer is assigned to a different sales person.</span></span> <span data-ttu-id="22340-230">Le filtre paramétré est basé sur le code postal du client et la mise à jour entraîne la suppression du code postal de la partition d'un commercial et son insertion dans la partition d'un autre commercial.</span><span class="sxs-lookup"><span data-stu-id="22340-230">The parameterized filter is based on the customer's zip code, and the update removes the zip code from one sales person's partition and inserts it into another sales person's partition.</span></span> <span data-ttu-id="22340-231">Cela exige la présence de partitions qui se chevauchent avec la possibilité de mettre à jour les colonnes référencées dans un filtre paramétré.</span><span class="sxs-lookup"><span data-stu-id="22340-231">This requires overlapping partitions with the ability to update columns referenced in a parameterized filter.</span></span> <span data-ttu-id="22340-232">Cette option offre une plus grande souplesse mais peut s'avérer moins performante que les partitions qui ne se chevauchent pas.</span><span class="sxs-lookup"><span data-stu-id="22340-232">This option maximizes flexibility but might not perform as well as nonoverlapping partitions.</span></span>  
  
-   <span data-ttu-id="22340-233">Une agence pour l'emploi possède des données qu'elle transmet à ses diverses antennes régionales.</span><span class="sxs-lookup"><span data-stu-id="22340-233">An employment agency has data that is supplied to regional offices in each county of the state.</span></span> <span data-ttu-id="22340-234">Les données ne se chevauchent pas ; chaque ligne de la table hébergée sur le serveur du siège de l'agence est incluse dans une seule partition mais cette dernière est envoyée à plusieurs antennes régionales.</span><span class="sxs-lookup"><span data-stu-id="22340-234">The data does not overlap; each row in the table at the agency's headquarters is included in only one partition, but that partition is sent to multiple offices in the same county.</span></span> <span data-ttu-id="22340-235">L'utilisation de l'option de partitions qui ne se chevauchent pas avec des partitions partagées entre les abonnements convient parfaitement, car elle offre de meilleures performances que les partitions qui se chevauchent tout en répondant aux exigences de l'application.</span><span class="sxs-lookup"><span data-stu-id="22340-235">The nonoverlapping partition option with partitions shared between subscriptions is appropriate, providing a performance improvement over overlapping partitions while satisfying the application requirements.</span></span>  
  
-   <span data-ttu-id="22340-236">Si vous disposez de partitions qui ne se chevauchent pas et qu'un seul abonnement reçoit et met à jour les données d'une partition, les performances y gagnent encore.</span><span class="sxs-lookup"><span data-stu-id="22340-236">If you have nonoverlapping partitions and only one subscription receives and updates the data in a partition, further performance benefits can be realized.</span></span> <span data-ttu-id="22340-237">Il s'agit d'un scénario classique pour les systèmes de points de vente et les applications de force de vente dans lesquelles les données sont principalement collectées sur l'Abonné et téléchargées vers le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="22340-237">This scenario is common for point of sale systems, and field force applications in which data is primarily collected at the Subscriber and uploaded to the Publisher.</span></span> <span data-ttu-id="22340-238">Prenons l'exemple d'une table **Package** dans une application de livraison : au fur et à mesure du chargement des colis dans le camion, l'état des colis change dans la table **Package** et la modification est répliquée vers le siège de la société.</span><span class="sxs-lookup"><span data-stu-id="22340-238">Consider a **Package** table in a delivery application: as each package is loaded onto a truck, the status of the package is changed in the **Package** table, and the change is replicated back to headquarters.</span></span> <span data-ttu-id="22340-239">Les camionneurs ne mettent pas à jour l'état du même colis sur deux camions différents de sorte que la table **Package** est un bon exemple de partition qui ne se chevauche pas avec un seul abonnement par partition.</span><span class="sxs-lookup"><span data-stu-id="22340-239">Drivers would not update the status of the same package on two different trucks, so the **Package** table is a good candidate for a nonoverlapping partition with a single subscription per partition.</span></span>  
  
#### <a name="considerations-for-nonoverlapping-partitions"></a><span data-ttu-id="22340-240">Considérations en matière de partitions qui ne se chevauchent pas</span><span class="sxs-lookup"><span data-stu-id="22340-240">Considerations for Nonoverlapping Partitions</span></span>  
 <span data-ttu-id="22340-241">Les éléments suivants doivent être pris en compte lors de l'utilisation de partitions qui ne se chevauchent pas.</span><span class="sxs-lookup"><span data-stu-id="22340-241">Keep the following considerations in mind when using nonoverlapping partitions.</span></span>  
  
##### <a name="general-considerations"></a><span data-ttu-id="22340-242">Considérations d’ordre général</span><span class="sxs-lookup"><span data-stu-id="22340-242">General Considerations</span></span>  
  
-   <span data-ttu-id="22340-243">La publication doit utiliser des partitions précalculées.</span><span class="sxs-lookup"><span data-stu-id="22340-243">The publication must use precomputed partitions.</span></span>  
  
-   <span data-ttu-id="22340-244">Une ligne ne doit appartenir qu'à une seule partition.</span><span class="sxs-lookup"><span data-stu-id="22340-244">A row must belong to only one partition.</span></span>  
  
-   <span data-ttu-id="22340-245">Les articles ne peuvent pas faire partie d'un enregistrement logique.</span><span class="sxs-lookup"><span data-stu-id="22340-245">Articles cannot be part of a logical record.</span></span>  
  
-   <span data-ttu-id="22340-246">D'autres partenaires de synchronisation ne sont pas pris en charge (cette fonctionnalité est déconseillée).</span><span class="sxs-lookup"><span data-stu-id="22340-246">Alternate synchronization partners are not supported (this feature is deprecated).</span></span>  
  
-   <span data-ttu-id="22340-247">L'Abonné ne peut pas mettre à jour les colonnes référencées dans un filtre paramétré.</span><span class="sxs-lookup"><span data-stu-id="22340-247">The Subscriber cannot update columns referenced in a parameterized filter.</span></span>  
  
-   <span data-ttu-id="22340-248">Si une insertion sur un Abonné n'appartient pas à la partition, elle n'est pas supprimée.</span><span class="sxs-lookup"><span data-stu-id="22340-248">If an insert at a Subscriber does not belong to the partition, it is not deleted.</span></span> <span data-ttu-id="22340-249">En revanche, elle ne sera pas répliquée vers les autres Abonnés.</span><span class="sxs-lookup"><span data-stu-id="22340-249">However, it will not be replicated to other Subscribers.</span></span>  
  
-   <span data-ttu-id="22340-250">Dans certains cas de partitions qui se chevauchent, les plages d'identité sont modifiées lorsque l'Agent de fusion insère des données.</span><span class="sxs-lookup"><span data-stu-id="22340-250">In some circumstances with overlapping partitions, identity ranges are adjusted when the Merge Agent inserts data.</span></span> <span data-ttu-id="22340-251">Avec des partitions qui ne se chevauchent pas, les plages peuvent uniquement être modifiées au cours des insertions effectuées par un utilisateur autorisé à modifier les plages d'identité dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="22340-251">With nonoverlapping partitions, ranges can only be adjusted during inserts by a user who has permission to adjust identity ranges in the subscription database.</span></span> <span data-ttu-id="22340-252">L'utilisateur doit être soit propriétaire de la table, soit membre du rôle serveur fixe **sysadmin** , du rôle de base de données fixe **db_owner** ou du rôle de base de données fixe **db_ddladmin** .</span><span class="sxs-lookup"><span data-stu-id="22340-252">The user must either own the table, or be a member of the **sysadmin** fixed server role, the **db_owner** fixed database role, or the **db_ddladmin** fixed database role.</span></span>  
  
##### <a name="additional-considerations-for-nonoverlapping-partitions-with-a-single-subscription-per-partition"></a><span data-ttu-id="22340-253">Autres considérations relatives aux partitions qui ne se chevauchent pas avec un seul abonnement par partition</span><span class="sxs-lookup"><span data-stu-id="22340-253">Additional Considerations for Nonoverlapping Partitions with a Single Subscription per Partition</span></span>  
  
-   <span data-ttu-id="22340-254">Les articles ne peuvent exister que dans une seule publication et ne peuvent pas être republiés.</span><span class="sxs-lookup"><span data-stu-id="22340-254">Articles can exist in only one publication; articles cannot be republished.</span></span>  
  
-   <span data-ttu-id="22340-255">La publication doit autoriser les Abonnés à initialiser le processus d'instantané.</span><span class="sxs-lookup"><span data-stu-id="22340-255">The publication must allow Subscribers to initiate the snapshot process.</span></span> <span data-ttu-id="22340-256">Pour plus d'informations, voir [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22340-256">For more information, see [Snapshots for Merge Publications with Parameterized Filters](../snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
##### <a name="additional-considerations-for-join-filters"></a><span data-ttu-id="22340-257">Autres considérations sur les filtres de jointure</span><span class="sxs-lookup"><span data-stu-id="22340-257">Additional Considerations for Join Filters</span></span>  
  
-   <span data-ttu-id="22340-258">Dans une hiérarchie de filtres de jointure, un article avec chevauchement de partitions peut apparaître au dessus d'un article sans chevauchement de partitions.</span><span class="sxs-lookup"><span data-stu-id="22340-258">In a join filter hierarchy, an article with an overlapping partition cannot appear above an article with a nonoverlapping partition.</span></span> <span data-ttu-id="22340-259">En d'autres termes, un article parent doit utiliser des partitions qui ne se chevauchent pas si l'article enfant en possède.</span><span class="sxs-lookup"><span data-stu-id="22340-259">In other words, a parent article must use nonoverlapping partitions if the child article does.</span></span> <span data-ttu-id="22340-260">Pour plus d'informations sur les filtres de jointure, consultez [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22340-260">For information about join filters, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="22340-261">Un filtre de jointure dans lequel la partition sans chevauchement est un enfant doit avoir la propriété **join unique key** affectée de la valeur 1.</span><span class="sxs-lookup"><span data-stu-id="22340-261">A join filter in which the nonoverlapping partition is a child must have the **join unique key** property set to 1.</span></span> <span data-ttu-id="22340-262">Pour plus d’informations, voir [Join Filters](join-filters.md).</span><span class="sxs-lookup"><span data-stu-id="22340-262">For more information, see [Join Filters](join-filters.md).</span></span>  
  
-   <span data-ttu-id="22340-263">L'article ne doit avoir qu'un seul filtre paramétré ou filtre de jointure.</span><span class="sxs-lookup"><span data-stu-id="22340-263">The article should only have one parameterized filter or join filter.</span></span> <span data-ttu-id="22340-264">Posséder un filtre paramétré et être le parent dans un filtre de jointure est autorisé.</span><span class="sxs-lookup"><span data-stu-id="22340-264">Having a parameterized filter and being the parent in a join filter is allowed.</span></span> <span data-ttu-id="22340-265">Posséder un filtre paramétré et être l'enfant dans un filtre de jointure n'est pas autorisé.</span><span class="sxs-lookup"><span data-stu-id="22340-265">Having a parameterized filter and being the child in a join filter is not allowed.</span></span> <span data-ttu-id="22340-266">Posséder plusieurs filtres de jointures est également interdit.</span><span class="sxs-lookup"><span data-stu-id="22340-266">Having more than one join filter is also not allowed.</span></span>  
  
-   <span data-ttu-id="22340-267">Si deux tables d'un serveur de publication possèdent une relation de filtre de jointure et que la table enfant contient des lignes qui ne correspondent à aucune ligne de la table parent, une insertion de la ligne parente manquante n'entraîne pas le téléchargement des lignes liées vers l'Abonné (les lignes seraient téléchargées avec des partitions qui se chevauchent).</span><span class="sxs-lookup"><span data-stu-id="22340-267">If two tables at the Publisher have a join filter relationship and the child table has rows that have no corresponding row in the parent table, an insert of the missing parent row will not result in the related rows being downloaded to the Subscriber (the rows would be downloaded with overlapping partitions).</span></span> <span data-ttu-id="22340-268">Si, par exemple, la table **SalesOrderDetail** comprend des lignes sans correspondance dans la table **SalesOrderHeader** et que vous insérez la ligne manquante dans **SalesOrderHeader**, la ligne est téléchargée sur l'Abonné mais les lignes correspondantes de la table **SalesOrderDetail** ne le sont pas.</span><span class="sxs-lookup"><span data-stu-id="22340-268">For example, if the **SalesOrderDetail** table has rows with no corresponding row in the **SalesOrderHeader** table, and you insert the missing row in **SalesOrderHeader**, the row is downloaded to the Subscriber, but the corresponding rows in **SalesOrderDetail** are not.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="22340-269">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="22340-269">See Also</span></span>  
 <span data-ttu-id="22340-270">[Bonnes pratiques concernant les filtres de lignes basés sur le temps](best-practices-for-time-based-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="22340-270">[Best Practices for Time-Based Row Filters](best-practices-for-time-based-row-filters.md) </span></span>  
 <span data-ttu-id="22340-271">[Filtrer des données publiées](../publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="22340-271">[Filter Published Data](../publish/filter-published-data.md) </span></span>  
 [<span data-ttu-id="22340-272">Filtrer des données publiées en vue de la réplication de fusion</span><span class="sxs-lookup"><span data-stu-id="22340-272">Filter Published Data for Merge Replication</span></span>](filter-published-data-for-merge-replication.md)  
  
  
