---
title: Ajouter un filtre ou Modifier le filtre | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- sql12.rep.newpubwizard.addeditfilter.f1
ms.assetid: bdd7c71d-1c59-4044-bfe8-c85f908345bb
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 54dcb1ea0b7bf10f51659a14b9d0cc5eb7991769
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87601413"
---
# <a name="add-or-edit-filter"></a><span data-ttu-id="a6fe0-102">Ajouter un filtre ou Modifier le filtre</span><span class="sxs-lookup"><span data-stu-id="a6fe0-102">Add or Edit Filter</span></span>
  <span data-ttu-id="a6fe0-103">Les boîtes de dialogue **Ajouter un filtre** et **Modifier le filtre** permettent d'ajouter et de modifier des filtres de lignes statiques ou paramétrés.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-103">The **Add Filter** and **Edit Filter** dialog boxes allow you to add and edit static row filters and parameterized row filters.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a6fe0-104">Pour pouvoir modifier un filtre dans une publication existante, vous devez procéder au préalable à un nouvel instantané de la publication.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-104">Editing a filter in an existing publication requires a new snapshot for the publication.</span></span> <span data-ttu-id="a6fe0-105">Si cette dernière dispose d'abonnements, ces abonnements doivent alors être réinitialisés.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-105">If a publication has subscriptions, the subscriptions must be reinitialized.</span></span> <span data-ttu-id="a6fe0-106">Pour plus d’informations sur les modifications de propriétés, consultez [Changer des propriétés de publication et d’article](publish/change-publication-and-article-properties.md).</span><span class="sxs-lookup"><span data-stu-id="a6fe0-106">For more information about property changes, see [Change Publication and Article Properties](publish/change-publication-and-article-properties.md).</span></span>  
  
 <span data-ttu-id="a6fe0-107">Les types de publication incluent notamment les filtres statiques. Les publications de fusion comptent également parmi elles les filtres paramétrés.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-107">All publication types can include static filters; merge publications can also include parameterized filters.</span></span> <span data-ttu-id="a6fe0-108">Un filtre statique s'évalue lors de la création de la publication : tous les Abonnés de la publication reçoivent les mêmes données.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-108">A static filter is evaluated when the publication is created: all Subscribers to the publication receive the same data.</span></span> <span data-ttu-id="a6fe0-109">Un filtre paramétrable s'évalue, lui, lors d'une synchronisation de réplication : chaque Abonné peut effectivement recevoir différentes partitions de données selon ses informations de connexion ou d'après le nom de son ordinateur.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-109">A parameterized filter is evaluated during replication synchronization: different Subscribers can receive different partitions of data based on the login or computer name of each Subscriber.</span></span> <span data-ttu-id="a6fe0-110">Cliquez sur le lien intitulé **Exemples d'instructions** dans la boîte de dialogue afin de consulter les exemples pour chaque type de filtre.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-110">Click the **Example statements** link in the dialog box to see examples of each type of filter.</span></span> <span data-ttu-id="a6fe0-111">Pour plus d’informations sur les options de filtrage, consultez [Filtrer des données publiées](publish/filter-published-data.md).</span><span class="sxs-lookup"><span data-stu-id="a6fe0-111">For more information about filtering options, see [Filter Published Data](publish/filter-published-data.md).</span></span>  
  
 <span data-ttu-id="a6fe0-112">Les filtres de lignes permettent de spécifier un sous-ensemble de lignes à publier à partir d'une table.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-112">Using row filters, you can specify a subset of rows to be published from a table.</span></span> <span data-ttu-id="a6fe0-113">Les filtres de lignes peuvent être utilisés pour éliminer des lignes que les utilisateurs n'ont pas besoin de voir (parce qu'elles contiennent par exemple des informations sensibles ou confidentielles) ou pour créer des partitions de données destinées à des abonnés différents.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-113">Row filters can be used to eliminate rows that users do not need to see (such as rows that contain sensitive or confidential information), or to create different partitions of data that are sent to different Subscribers.</span></span> <span data-ttu-id="a6fe0-114">La publication de partitions de données différentes à des abonnés différents peut également contribuer à éviter les conflits qu'entraîne la mise à jour des mêmes valeurs de données par plusieurs abonnés.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-114">Publishing different partitions of data to different Subscribers can also help avoid conflicts that would otherwise be caused by multiple Subscribers updating the same data.</span></span>  
  
## <a name="options"></a><span data-ttu-id="a6fe0-115">Options</span><span class="sxs-lookup"><span data-stu-id="a6fe0-115">Options</span></span>  
 <span data-ttu-id="a6fe0-116">Cette boîte de dialogue lance un processus en deux étapes pour les publications transactionnelles et d'instantané d'une part et un processus en trois étapes dans le cas des publications de fusion d'autre part.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-116">This dialog box involves a two-step process for transactional and snapshot publications and a three-step process for merge publications.</span></span> <span data-ttu-id="a6fe0-117">Quel que soit le type de publication choisi, vous devez choisir une table à filtrer ainsi qu'une ou plusieurs colonnes à ajouter au filtre ; le filtre est défini en tant que clause WHERE standard.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-117">All publication types require you to select a table to be filtered and one or more columns to be included in the filter; the filter is defined as a standard WHERE clause.</span></span>  
  
1.  <span data-ttu-id="a6fe0-118">**Sélectionnez la table à filtrer**</span><span class="sxs-lookup"><span data-stu-id="a6fe0-118">**Select the table to filter**</span></span>  
  
     <span data-ttu-id="a6fe0-119">Si vous modifiez un filtre existant, sachez que vous ne pouvez pas changer de table choisie.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-119">If you are editing an existing filter, the table selection cannot be changed.</span></span> <span data-ttu-id="a6fe0-120">Si vous ajoutez un nouveau filtre, sélectionnez alors une table à partir de la zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-120">If you are adding a new filter, select a table from the drop-down list box.</span></span> <span data-ttu-id="a6fe0-121">Les tables n'y apparaissent que si elles ont été sélectionnées sur la page **Articles** et ne possèdent pas déjà un filtre de lignes.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-121">Tables appear in the list box only if they were selected on the **Articles** page and do not already have a row filter.</span></span> <span data-ttu-id="a6fe0-122">Dans ce dernier cas, vous pouvez toujours en définir un nouveau de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="a6fe0-122">If a table has a row filter and you want to define a new one:</span></span>  
  
    1.  <span data-ttu-id="a6fe0-123">Dans la boîte de dialogue **Ajouter un filtre** , cliquez sur **Annuler** .</span><span class="sxs-lookup"><span data-stu-id="a6fe0-123">Click **Cancel** on the **Add Filter** dialog box.</span></span>  
  
    2.  <span data-ttu-id="a6fe0-124">Sélectionnez la table dans le volet du filtre se trouvant sur la page **Filtrer les lignes de la table** , puis cliquez sur **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-124">Select the table in the filter pane on the **Filter Table Rows** page and click **Edit**.</span></span>  
  
    3.  <span data-ttu-id="a6fe0-125">Modifiez un filtre existant dans la boîte de dialogue **Modifier le filtre** .</span><span class="sxs-lookup"><span data-stu-id="a6fe0-125">Edit an existing filter in the **Edit Filter** dialog box.</span></span>  
  
2.  <span data-ttu-id="a6fe0-126">**Complétez l'instruction de filtrage pour identifier les lignes de table que les abonnés doivent recevoir**</span><span class="sxs-lookup"><span data-stu-id="a6fe0-126">**Complete the filter statement to identify which table rows Subscribers will receive**</span></span>  
  
     <span data-ttu-id="a6fe0-127">Définissez une nouvelle instruction de filtrage ou modifiez-en une existante.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-127">Define a new filter statement or edit an existing one.</span></span> <span data-ttu-id="a6fe0-128">La zone de liste déroulante **Colonnes** répertorie toutes les colonnes que vous publiez à partir de la table à choisir dans **Sélectionnez la table à filtrer**.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-128">The **Columns** list box lists all the columns that you are publishing from the table you selected in **Select the table to filter**.</span></span> <span data-ttu-id="a6fe0-129">La zone de texte **Instruction de filtrage** comprend un texte par défaut, qui est de la forme suivante :</span><span class="sxs-lookup"><span data-stu-id="a6fe0-129">The **Filter statement** text area includes the default text, which is in the form of:</span></span>  
  
     `SELECT <published_columns> FROM [schema].[tablename] WHERE`  
  
     <span data-ttu-id="a6fe0-130">Ce texte ne peut pas être modifié. Saisissez dans ce cas la clause de filtrage après le mot clé WHERE en suivant la syntaxe standard [!INCLUDE[tsql](../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="a6fe0-130">This text cannot be changed; type the filter clause after the WHERE keyword using standard [!INCLUDE[tsql](../../includes/tsql-md.md)] syntax.</span></span> <span data-ttu-id="a6fe0-131">Si le serveur de publication est un serveur Oracle, cette clause doit satisfaire les critères de syntaxe des requêtes Oracle.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-131">If the Publisher is an Oracle Publisher, the WHERE clause must be compliant with Oracle query syntax.</span></span> <span data-ttu-id="a6fe0-132">Évitez les filtres complexes autant que possible.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-132">Avoid using complex filters when possible.</span></span> <span data-ttu-id="a6fe0-133">En effet, aussi bien les filtres statiques que les filtres paramétrés rallongent le temps de traitement des publications ; essayez par conséquent de simplifier le plus possible vos instructions de filtrage.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-133">Both static and parameterized filters increase processing time for publications; therefore you should keep filter statements as simple as possible.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="a6fe0-134">Pour optimiser les performances, nous vous recommandons de ne pas appliquer de fonctions aux noms de colonnes dans des clauses de filtre de lignes paramétrés pour des publications de fusion, comme `LEFT([MyColumn]) = SUSER_SNAME()`.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-134">For performance reasons, we recommended that you not apply functions to column names in parameterized row filter clauses for merge publications, such as `LEFT([MyColumn]) = SUSER_SNAME()`.</span></span> <span data-ttu-id="a6fe0-135">Si vous utilisez HOST_NAME dans une clause de filtrage puis en remplacez la valeur, il peut s'avérer judicieux de convertir les types de données avec la fonction CONVERT.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-135">If you use HOST_NAME in a filter clause and override the HOST_NAME value, it might be necessary to convert data types using CONVERT.</span></span> <span data-ttu-id="a6fe0-136">Pour plus d'informations sur la conduite à adopter dans cette situation, consultez la section « Substitution de la valeur de HOST_NAME » de la rubrique [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="a6fe0-136">For more information about best practices for this case, see the section "Overriding the HOST_NAME() Value" in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
3.  <span data-ttu-id="a6fe0-137">**Spécifiez combien d'abonnements recevront des données de cette table**</span><span class="sxs-lookup"><span data-stu-id="a6fe0-137">**Specify how many subscriptions will receive data from this table**</span></span>  
  
     [!INCLUDE[msCoName](../../includes/msconame-md.md)] <span data-ttu-id="a6fe0-138">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] et versions ultérieures uniquement. Réplication de fusion uniquement.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-138">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and later versions only; merge replication only.</span></span> <span data-ttu-id="a6fe0-139">La réplication de fusion vous permet d'indiquer le type de partitions répondant au mieux à vos données et votre application.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-139">Merge replication allows you to specify the type of partitions that are best suited to your data and application.</span></span> <span data-ttu-id="a6fe0-140">Si vous sélectionnez **Une ligne de cette table ira à un seul abonnement**, la réplication de fusion définit l'option de non-chevauchement des partitions.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-140">If you select **A row from this table will go to only one subscription**, merge replication sets the nonoverlapping partitions option.</span></span> <span data-ttu-id="a6fe0-141">Cette option, qui fonctionne avec les partitions précalculées pour améliorer les performances, permet de réduire au minimum le coût de téléchargement associé aux partitions précalculées.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-141">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance, with nonoverlapping partitions minimizing the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="a6fe0-142">Le gain de performances lié au non-chevauchement des partitions est plus flagrant lorsque les filtres paramétrés et les filtres de jointure utilisés sont plus complexes.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-142">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span> <span data-ttu-id="a6fe0-143">Si vous sélectionnez cette option, vous devez veiller à ce que les données soient partitionnées de telle sorte qu'une ligne ne puisse pas être répliquée vers plusieurs abonnés.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-143">If you select this option, you must ensure that the data is partitioned in such a way that a row cannot be replicated to more than one Subscriber.</span></span> <span data-ttu-id="a6fe0-144">Pour plus d'informations, consultez la section « Définition de « partition options » » dans la rubrique [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span><span class="sxs-lookup"><span data-stu-id="a6fe0-144">For more information, see the section "Setting 'partition options'" in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
 <span data-ttu-id="a6fe0-145">Après avoir ajouté ou modifié un filtre, cliquez sur **OK** pour enregistrer les modifications et fermer ainsi la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-145">After you have added or edited a filter, click **OK** to save changes and close the dialog box.</span></span> <span data-ttu-id="a6fe0-146">Le filtre que vous spécifiez est ensuite analysé et exécuté sur la table indiquée dans la clause SELECT.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-146">The filter you specified is parsed and run against the table in the SELECT clause.</span></span> <span data-ttu-id="a6fe0-147">Si l'instruction de filtrage contient des erreurs de syntaxe ou rencontre tout autre problème, vous en êtes alors informé pour vous donner la possibilité de modifier l'instruction de filtrage.</span><span class="sxs-lookup"><span data-stu-id="a6fe0-147">If the filter statement contains syntax errors or other problems, you are notified and are able to edit the filter statement.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a6fe0-148">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a6fe0-148">See Also</span></span>  
 <span data-ttu-id="a6fe0-149">[Create a Publication](publish/create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="a6fe0-149">[Create a Publication](publish/create-a-publication.md) </span></span>  
 <span data-ttu-id="a6fe0-150">[Afficher et modifier les propriétés d’une publication](publish/view-and-modify-publication-properties.md) </span><span class="sxs-lookup"><span data-stu-id="a6fe0-150">[View and Modify Publication Properties](publish/view-and-modify-publication-properties.md) </span></span>  
 <span data-ttu-id="a6fe0-151">[Filtrer des données publiées](publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="a6fe0-151">[Filter Published Data](publish/filter-published-data.md) </span></span>  
 <span data-ttu-id="a6fe0-152">[Filtres de jointure](merge/join-filters.md) </span><span class="sxs-lookup"><span data-stu-id="a6fe0-152">[Join Filters](merge/join-filters.md) </span></span>  
 <span data-ttu-id="a6fe0-153">[Filtres de lignes paramétrés](merge/parameterized-filters-parameterized-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="a6fe0-153">[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md) </span></span>  
 [<span data-ttu-id="a6fe0-154">Publier des données et des objets de base de données</span><span class="sxs-lookup"><span data-stu-id="a6fe0-154">Publish Data and Database Objects</span></span>](publish/publish-data-and-database-objects.md)  
  
  
