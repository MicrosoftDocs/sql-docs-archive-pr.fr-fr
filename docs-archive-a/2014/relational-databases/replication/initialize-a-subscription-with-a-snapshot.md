---
title: Initialiser un abonnement avec un instantané | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- snapshots [SQL Server replication], initializing subscriptions
- initializing subscriptions [SQL Server replication], snapshots
ms.assetid: 77a9ade2-cdc0-4ae9-a02d-6e29d7c2ada0
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: f8b776e71e9d1197bc174169aee8ccf692884308
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87601332"
---
# <a name="initialize-a-subscription-with-a-snapshot"></a><span data-ttu-id="6ab48-102">Initialiser un abonnement avec un instantané</span><span class="sxs-lookup"><span data-stu-id="6ab48-102">Initialize a Subscription with a Snapshot</span></span>
  <span data-ttu-id="6ab48-103">Lorsqu'une publication est créée, un instantané initial est généralement créé puis copié dans le dossier d'instantanés (cela se produit par défaut pour les publications de fusion créées avec l'Assistant Nouvelle publication).</span><span class="sxs-lookup"><span data-stu-id="6ab48-103">After a publication has been created, an initial snapshot is typically created and copied to the snapshot folder (this occurs by default for merge publications created with the New Publication Wizard).</span></span> <span data-ttu-id="6ab48-104">Il est ensuite appliqué à l'Abonné par l'Agent de distribution (pour les publications transactionnelles et d'instantané) ou l'Agent de fusion (pour les publications de fusion) lors de la synchronisation initiale de l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="6ab48-104">It is then applied to the Subscriber by the Distribution Agent (for transactional and snapshot publications) or the Merge Agent (for merge publications) during the initial synchronization of the subscription.</span></span> <span data-ttu-id="6ab48-105">Le processus d'instantané dépend du type de publication :</span><span class="sxs-lookup"><span data-stu-id="6ab48-105">The snapshot process depends on the type of publication:</span></span>  
  
-   <span data-ttu-id="6ab48-106">Si l'instantané est pour une publication d'instantané, une publication transactionnelle ou une publication de fusion n'utilisant pas de filtres paramétrés, l'instantané contient le schéma et les données dans des fichiers programme (bcp) de copie en bloc, ainsi que des contraintes, des propriétés étendues, des index, des déclencheurs et les tables système nécessaires à la réplication.</span><span class="sxs-lookup"><span data-stu-id="6ab48-106">If the snapshot is for a snapshot publication, a transactional publication, or a merge publication that doesn't use parameterized filters, the snapshot contains the schema and data in bulk copy program (bcp) files, as well as constraints, extended properties, indexes, triggers, and the system tables necessary for replication.</span></span> <span data-ttu-id="6ab48-107">Pour plus d’informations sur la création et l’application de l’instantané, consultez [Créer et appliquer un instantané](create-and-apply-the-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="6ab48-107">For more information about creating and applying the snapshot, see [Create and Apply the Snapshot](create-and-apply-the-snapshot.md).</span></span>  
  
-   <span data-ttu-id="6ab48-108">Si l'instantané est pour une publication de fusion utilisant des filtres paramétrés, il est créé à l'aide d'un processus en deux parties.</span><span class="sxs-lookup"><span data-stu-id="6ab48-108">If the snapshot is for a merge publication that uses parameterized filters, the snapshot is created using a two-part process.</span></span> <span data-ttu-id="6ab48-109">D'abord, un instantané de schéma est créé contenant les scripts de réplication et le schéma des objets publiés, mais pas les données.</span><span class="sxs-lookup"><span data-stu-id="6ab48-109">First a schema snapshot is created that contains the replication scripts and the schema of the published objects, but not the data.</span></span> <span data-ttu-id="6ab48-110">Ensuite, chaque abonnement est initialisé avec un instantané comprenant les scripts et le schéma copiés à partir de l'instantané de schéma et des données appartenant à la partition de l'abonnement.</span><span class="sxs-lookup"><span data-stu-id="6ab48-110">Each subscription is then initialized with a snapshot that includes the scripts and schema copied from the schema snapshot and the data that belongs to the subscription's partition.</span></span> <span data-ttu-id="6ab48-111">Pour plus d'informations, voir [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span><span class="sxs-lookup"><span data-stu-id="6ab48-111">For more information, see [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
 <span data-ttu-id="6ab48-112">L'instantané se compose de fichiers différents qui dépendent du type de réplication et des articles que comprend la publication.</span><span class="sxs-lookup"><span data-stu-id="6ab48-112">The snapshot consists of different files depending on the type of replication and the articles in your publication.</span></span> <span data-ttu-id="6ab48-113">Ces fichiers sont copiés sur le dossier d'instantanés par défaut spécifié lors de la configuration du serveur de distribution, ou sur le dossier d'instantanés de remplacement spécifié lors de la création de la publication.</span><span class="sxs-lookup"><span data-stu-id="6ab48-113">These files are copied to the default snapshot folder specified when the Distributor was configured or the alternate snapshot folder specified when the publication was created.</span></span>  
  
|<span data-ttu-id="6ab48-114">Type de réplication</span><span class="sxs-lookup"><span data-stu-id="6ab48-114">Type of Replication</span></span>|<span data-ttu-id="6ab48-115">Fichiers d'instantanés courants</span><span class="sxs-lookup"><span data-stu-id="6ab48-115">Common Snapshot Files</span></span>|  
|-------------------------|---------------------------|  
|<span data-ttu-id="6ab48-116">Réplication d'instantané ou réplication transactionnelle</span><span class="sxs-lookup"><span data-stu-id="6ab48-116">Snapshot Replication or Transactional Replication</span></span>|<span data-ttu-id="6ab48-117">schéma (.sch) ; données (.bcp) ; contraintes et index (.dri) ; contraintes (.idx) ; déclencheurs (.trg) : pour la mise à jour d'abonnés uniquement ; fichiers d'instantanés compressés (.cab).</span><span class="sxs-lookup"><span data-stu-id="6ab48-117">schema (.sch); data (.bcp); constraints and indexes (.dri); constraints (.idx); triggers (.trg):for updating Subscribers only; compressed snapshot files (.cab).</span></span>|  
|<span data-ttu-id="6ab48-118">Réplication de fusion</span><span class="sxs-lookup"><span data-stu-id="6ab48-118">Merge Replication</span></span>|<span data-ttu-id="6ab48-119">schéma (.sch) ; données (.bcp) ; contraintes et index (.dri) ; déclencheurs (.trg) ; données des tables système (.sys) ; tables de conflits (.cft) ; fichiers d'instantanés compressés (.cab).</span><span class="sxs-lookup"><span data-stu-id="6ab48-119">schema (.sch); data (.bcp); constraints and indexes (.dri); triggers (.trg); system table data (.sys); conflict tables (.cft); compressed snapshot files (.cab).</span></span>|  
  
 <span data-ttu-id="6ab48-120">Si le transfert de l'instantané est interrompu à n'importe quel moment, il reprendra automatiquement et ne renverra aucun fichier déjà transféré en totalité.</span><span class="sxs-lookup"><span data-stu-id="6ab48-120">If the snapshot transfer is interrupted at any point, it will automatically resume and will not resend any files that have already been completely transferred.</span></span> <span data-ttu-id="6ab48-121">L'unité de remise pour l'Agent d'instantané est le fichier bcp pour chaque article de publication, les fichiers partiellement remis doivent donc être remis à nouveau en totalité.</span><span class="sxs-lookup"><span data-stu-id="6ab48-121">The unit of delivery for the Snapshot Agent is the bcp file for each publication article, so files that are partially delivered must be completely redelivered.</span></span> <span data-ttu-id="6ab48-122">Cependant, la reprise de l'instantané peut diminuer de manière significative la quantité de données transmise et garantir la remise de l'instantané en temps voulu, même si la connexion n'est pas fiable.</span><span class="sxs-lookup"><span data-stu-id="6ab48-122">However, resuming the snapshot can significantly reduce the amount of data transmitted and ensure timely snapshot delivery even if the connection is unreliable.</span></span>  
  
## <a name="snapshot-options"></a><span data-ttu-id="6ab48-123">Options d'instantané</span><span class="sxs-lookup"><span data-stu-id="6ab48-123">Snapshot Options</span></span>  
 <span data-ttu-id="6ab48-124">Il existe de nombreuses options disponibles lors de l'initialisation d'un abonnement avec un instantané.</span><span class="sxs-lookup"><span data-stu-id="6ab48-124">There are a number of options available when initializing a subscription with a snapshot.</span></span> <span data-ttu-id="6ab48-125">Vous pouvez :</span><span class="sxs-lookup"><span data-stu-id="6ab48-125">You can:</span></span>  
  
-   <span data-ttu-id="6ab48-126">Spécifier un emplacement de dossier d'instantanés de remplacement à la place, ou en plus de l'emplacement de dossier d'instantanés par défaut.</span><span class="sxs-lookup"><span data-stu-id="6ab48-126">Specify an alternate snapshot folder location instead of, or in addition, to the default snapshot folder location.</span></span> <span data-ttu-id="6ab48-127">Pour plus d’informations, consultez [Alternate Snapshot Folder Locations](alternate-snapshot-folder-locations.md).</span><span class="sxs-lookup"><span data-stu-id="6ab48-127">For more information, see [Alternate Snapshot Folder Locations](alternate-snapshot-folder-locations.md).</span></span>  
  
-   <span data-ttu-id="6ab48-128">Compresser les instantanés pour un stockage sur support amovible ou pour un transfert sur un réseau lent.</span><span class="sxs-lookup"><span data-stu-id="6ab48-128">Compress snapshots for storage on removable media or for transfer over a slow network.</span></span> <span data-ttu-id="6ab48-129">Pour plus d’informations, consultez [Compressed Snapshots](compressed-snapshots.md).</span><span class="sxs-lookup"><span data-stu-id="6ab48-129">For more information, see [Compressed Snapshots](compressed-snapshots.md).</span></span>  
  
-   <span data-ttu-id="6ab48-130">Exécuter des scripts Transact-SQL avant ou après l'application de l'instantané.</span><span class="sxs-lookup"><span data-stu-id="6ab48-130">Execute Transact-SQL scripts before or after the snapshot is applied.</span></span> <span data-ttu-id="6ab48-131">Pour plus d’informations, consultez [Exécuter des scripts avant et après l’application de l’instantané](snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span><span class="sxs-lookup"><span data-stu-id="6ab48-131">For more information, see [Execute Scripts Before and After the Snapshot Is Applied](snapshot-options.md#execute-scripts-before-and-after-snapshot-is-applied).</span></span>  
  
-   <span data-ttu-id="6ab48-132">Transférer des fichiers d'instantanés via le protocole FTP.</span><span class="sxs-lookup"><span data-stu-id="6ab48-132">Transfer snapshot files using File Transfer Protocol (FTP).</span></span> <span data-ttu-id="6ab48-133">Pour plus d’informations, consultez [Transférer des instantanés via FTP](transfer-snapshots-through-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="6ab48-133">For more information, see [Transfer Snapshots Through FTP](transfer-snapshots-through-ftp.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ab48-134">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6ab48-134">See Also</span></span>  
 <span data-ttu-id="6ab48-135">[Initialiser un abonnement](initialize-a-subscription.md) </span><span class="sxs-lookup"><span data-stu-id="6ab48-135">[Initialize a Subscription](initialize-a-subscription.md) </span></span>  
 [<span data-ttu-id="6ab48-136">Sécuriser le dossier d’instantanés</span><span class="sxs-lookup"><span data-stu-id="6ab48-136">Secure the Snapshot Folder</span></span>](security/secure-the-snapshot-folder.md)  
  
  
