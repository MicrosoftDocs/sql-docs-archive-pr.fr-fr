---
title: Créer un abonnement pouvant être mis à jour pour une publication transactionnelle (Management Studio) | Microsoft Docs
ms.custom: ''
ms.date: 07/20/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- updateable transactional subscriptions
- updateable transactional subscriptions, SSMS
ms.assetid: f9ef89ed-36f6-431b-8843-25d445ec137f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e784216116bdb9ab308dff5fa998740b0fa459b0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709148"
---
# <a name="create-an-updatable-subscription-to-a-transactional-publication-management-studio"></a><span data-ttu-id="fe380-102">Créer un abonnement pouvant être mis à jour pour une publication transactionnelle (Management Studio)</span><span class="sxs-lookup"><span data-stu-id="fe380-102">Create an Updatable Subscription to a Transactional Publication (Management Studio)</span></span>

> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
 
<span data-ttu-id="fe380-103">La réplication transactionnelle permet de propager sur le serveur de publication les modifications apportées au niveau d'un Abonné en utilisant des abonnements avec mise à jour immédiate ou mise à jour en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="fe380-103">Transactional replication enables changes made at a Subscriber to be propagated back to the Publisher using either immediate or queued updating subscriptions.</span></span> <span data-ttu-id="fe380-104">Vous pouvez créer par programme un abonnement avec mise à jour en utilisant des procédures stockées de réplication.</span><span class="sxs-lookup"><span data-stu-id="fe380-104">You can create an updating subscription programmatically using replication stored procedures.</span></span>

<span data-ttu-id="fe380-105">Configurez des abonnements pouvant être mis à jour dans la page **Abonnements pouvant être mis à jour** de l’**Assistant Nouvel abonnement**.</span><span class="sxs-lookup"><span data-stu-id="fe380-105">Configure updatable subscriptions on the **Updatable Subscriptions** page of the **New Subscription Wizard**.</span></span> <span data-ttu-id="fe380-106">Cette page est disponible seulement si vous avez activé une publication transactionnelle pour les abonnements pouvant être mis à jour.</span><span class="sxs-lookup"><span data-stu-id="fe380-106">This page is only available if you have enabled a transactional publication for updatable subscriptions.</span></span> <span data-ttu-id="fe380-107">Pour plus d’informations sur l’activation des abonnements pouvant être mis à jour, consultez [Activer la mise à jour d’abonnements pour les publications transactionnelles](enable-updating-subscriptions-for-transactional-publications.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-107">For more information about enabling updatable subscriptions, see [Enable Updating Subscriptions for Transactional Publications](enable-updating-subscriptions-for-transactional-publications.md).</span></span>   
  
## <a name="configure-an-updatable-subscription-from-the-publisher"></a><span data-ttu-id="fe380-108">Configurer un abonnement pouvant être mis à jour à partir du serveur de publication</span><span class="sxs-lookup"><span data-stu-id="fe380-108">Configure an updatable subscription from the Publisher</span></span>  

1. <span data-ttu-id="fe380-109">Connectez-vous au serveur de publication dans Microsoft SQL Server Management Studio, puis développez le nœud du serveur.</span><span class="sxs-lookup"><span data-stu-id="fe380-109">Connect to the Publisher in Microsoft SQL Server Management Studio, and then expand the server node.</span></span>
2. <span data-ttu-id="fe380-110">Développez le dossier **Réplication** , puis développez le dossier **Publications locales** .</span><span class="sxs-lookup"><span data-stu-id="fe380-110">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>
3. <span data-ttu-id="fe380-111">Cliquez avec le bouton droit sur une publication transactionnelle activée pour la mise à jour d’abonnements, puis cliquez sur **Nouveaux abonnements**.</span><span class="sxs-lookup"><span data-stu-id="fe380-111">Right-click a transactional publication enabled for updating subscriptions, and then click **New Subscriptions**.</span></span>
4. <span data-ttu-id="fe380-112">Suivez les pages de l'Assistant pour spécifier les options de l'abonnement, par exemple où l'Agent de distribution doit s'exécuter.</span><span class="sxs-lookup"><span data-stu-id="fe380-112">Follow pages in the wizard to specify options for the subscription, such as where the Distribution Agent should run.</span></span>
5. <span data-ttu-id="fe380-113">Dans la page **Abonnements pouvant être mis à jour** de l’**Assistant Nouvel abonnement**, vérifiez que **Répliquer** est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="fe380-113">On the **Updatable Subscriptions** page of the **New Subscription Wizard**, ensure **Replicate** is selected.</span></span>
6. <span data-ttu-id="fe380-114">Sélectionnez une option dans la liste déroulante **Valider sur le serveur de publication** :</span><span class="sxs-lookup"><span data-stu-id="fe380-114">Select an option from the **Commit at Publisher** drop-down list:</span></span>

    *  <span data-ttu-id="fe380-115">Pour utiliser des abonnements mis à jour immédiatement, sélectionnez **Enregistrer les modifications simultanément**.</span><span class="sxs-lookup"><span data-stu-id="fe380-115">To use immediate updating subscriptions, select **Simultaneously commit changes**.</span></span> <span data-ttu-id="fe380-116">Si vous sélectionnez cette option et que la publication autorise les abonnements mis à jour en attente (l’option par défaut pour les publications créées avec l’Assistant Nouvelle publication), la propriété d’abonnement **update_mode** a la valeur **failover**.</span><span class="sxs-lookup"><span data-stu-id="fe380-116">If you select this option, and the publication allows queued updating subscriptions (the default for publications created with the New Publication Wizard), the subscription property **update_mode** is set to **failover**.</span></span> <span data-ttu-id="fe380-117">Ce mode vous permet de passer ultérieurement en mise à jour en attente si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="fe380-117">This mode allows you to switch to queued updating later if necessary.</span></span>
    *  <span data-ttu-id="fe380-118">Pour utiliser des abonnements mis à jour en attente, sélectionnez **Mettre les modifications en file d’attente et valider dès que possible**.</span><span class="sxs-lookup"><span data-stu-id="fe380-118">To use queued updating subscriptions, select **Queue changes and commit when possible**.</span></span> <span data-ttu-id="fe380-119">Si vous sélectionnez cette option et que la publication autorise les abonnements mis à jour immédiatement (l’option par défaut pour les publications créées avec l’Assistant Nouvelle publication), et si l’abonné exécute SQL Server 2005 ou une version ultérieure, la propriété d’abonnement **update_mode** a la valeur queued failover.</span><span class="sxs-lookup"><span data-stu-id="fe380-119">If you select this option, and the publication allows immediate updating subscriptions (the default for publications created with the New Publication Wizard), and the Subscriber is running SQL Server 2005 or a later version, the subscription property **update_mode** is set to queued failover.</span></span> <span data-ttu-id="fe380-120">Ce mode vous permet de passer ultérieurement en mise à jour immédiate si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="fe380-120">This mode allows you to switch to immediate updating later if necessary.</span></span>

    <span data-ttu-id="fe380-121">Pour plus d’informations sur le basculement entre les modes de mise à jour, consultez [Basculer entre les modes de mise à jour d’un abonnement transactionnel pouvant être mis à jour](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-121">For information about switching update modes, see [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>

7. <span data-ttu-id="fe380-122">La page **Nom d’accès aux abonnements pouvant être mis à jour** est affichée pour les abonnements qui utilisent la mise à jour immédiate ou dont la propriété **update_mode** a la valeur **queued failover**.</span><span class="sxs-lookup"><span data-stu-id="fe380-122">The **Login for Updatable Subscriptions** page is displayed for subscriptions that use immediate updating or have **update_mode** set to **queued failover**.</span></span> <span data-ttu-id="fe380-123">Dans la page **Nom d’accès aux abonnements pouvant être mis à jour**, spécifiez un serveur lié via lequel sont effectuées les connexions au serveur de publication pour les abonnements mis à jour immédiatement.</span><span class="sxs-lookup"><span data-stu-id="fe380-123">On the **Login for Updatable Subscriptions** page, specify a linked server over which connections to the Publisher are made for immediate updating subscriptions.</span></span> <span data-ttu-id="fe380-124">Les connexions sont utilisées par les déclencheurs qui s'exécutent pour l'abonné et propagent les modifications sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-124">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="fe380-125">Sélectionnez l’une des options suivantes :</span><span class="sxs-lookup"><span data-stu-id="fe380-125">Select one of the following options:</span></span>

    * <span data-ttu-id="fe380-126">**Créer un serveur lié qui se connecte par Authentification SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="fe380-126">**Create a linked server that connects using SQL Server Authentication.**</span></span> <span data-ttu-id="fe380-127">Sélectionnez cette option si vous n'avez pas défini un serveur distant ou un serveur lié entre l'Abonné et le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-127">Select this option if you have not defined a remote server or linked server between the Subscriber and the Publisher.</span></span> <span data-ttu-id="fe380-128">La réplication crée un serveur lié pour vous.</span><span class="sxs-lookup"><span data-stu-id="fe380-128">Replication creates a linked server for you.</span></span> <span data-ttu-id="fe380-129">Le compte que vous spécifiez doit déjà exister sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-129">The account you specify must already exist at the Publisher.</span></span>
    * <span data-ttu-id="fe380-130">**Utiliser un serveur lié ou un serveur distant que vous avez déjà défini.**</span><span class="sxs-lookup"><span data-stu-id="fe380-130">**Use a linked server or remote server that you have already defined.**</span></span> <span data-ttu-id="fe380-131">Sélectionnez cette option si vous avez défini un serveur distant ou un serveur lié entre l’abonné et le serveur de publication à l’aide de [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio ou d’une autre méthode.</span><span class="sxs-lookup"><span data-stu-id="fe380-131">Select this option if you have defined a remote server or linked server between the Subscriber and the Publisher using [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio, or another method.</span></span>

    <span data-ttu-id="fe380-132">Pour plus d’informations sur les autorisations requises par le compte du serveur lié, consultez la section **Abonnements mis à jour en attente** de [saisissez la description de lien ici](../security/secure-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-132">For information about the permissions required by the linked server account, see the **Queued Updating Subscriptions** of [enter link description here](../security/secure-the-subscriber.md).</span></span>

8. <span data-ttu-id="fe380-133">Terminez l'Assistant.</span><span class="sxs-lookup"><span data-stu-id="fe380-133">Complete the wizard.</span></span>

## <a name="configure-an-updatable-subscription-from-the-subscriber"></a><span data-ttu-id="fe380-134">Configurer un abonnement pouvant être mis à jour à partir de l’Abonné</span><span class="sxs-lookup"><span data-stu-id="fe380-134">Configure an updatable subscription from the Subscriber</span></span>


1. <span data-ttu-id="fe380-135">Connectez-vous à l’abonné dans SQL Server Management Studio, puis développez le nœud du serveur.</span><span class="sxs-lookup"><span data-stu-id="fe380-135">Connect to the Subscriber in SQL Server Management Studio, and then expand the server node.</span></span>
2. <span data-ttu-id="fe380-136">Développez le dossier **Réplication** .</span><span class="sxs-lookup"><span data-stu-id="fe380-136">Expand the **Replication** folder.</span></span>
3. <span data-ttu-id="fe380-137">Cliquez avec le bouton droit sur le dossier **Abonnements locaux** , puis cliquez sur **Nouveaux abonnements**.</span><span class="sxs-lookup"><span data-stu-id="fe380-137">Right-click the **Local Subscriptions** folder, and then click **New Subscriptions**.</span></span>
4. <span data-ttu-id="fe380-138">Dans la page **Publication** de l’**Assistant Nouvel abonnement**, sélectionnez **Rechercher un serveur de publication SQL Server** dans la liste déroulante **Serveur de publication**.</span><span class="sxs-lookup"><span data-stu-id="fe380-138">On the **Publication** page of the **New Subscription Wizard**, select **Find SQL Server Publisher** from the **Publisher** drop-down list.</span></span>
5. <span data-ttu-id="fe380-139">Connectez-vous au serveur de publication dans la boîte de dialogue **Se connecter au serveur** .</span><span class="sxs-lookup"><span data-stu-id="fe380-139">Connect to the Publisher in the **Connect to Server** dialog box.</span></span>
6. <span data-ttu-id="fe380-140">Sélectionnez une publication transactionnelle activée pour la mise à jour d’abonnements dans la page **Publication**.</span><span class="sxs-lookup"><span data-stu-id="fe380-140">Select a transactional publication enabled for updating subscriptions on the **Publication** page.</span></span>
7. <span data-ttu-id="fe380-141">Suivez les pages de l'Assistant pour spécifier les options de l'abonnement, par exemple où l'Agent de distribution doit s'exécuter.</span><span class="sxs-lookup"><span data-stu-id="fe380-141">Follow pages in the wizard to specify options for the subscription, such as where the Distribution Agent should run.</span></span>
8. <span data-ttu-id="fe380-142">Dans la page **Abonnements pouvant être mis à jour** de l’Assistant Nouvel abonnement, vérifiez que **Répliquer** est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="fe380-142">On the **Updatable Subscriptions** page of the New Subscription Wizard, ensure **Replicate** is selected.</span></span>
9. <span data-ttu-id="fe380-143">Sélectionnez une option dans la liste déroulante **Valider sur le serveur de publication** :</span><span class="sxs-lookup"><span data-stu-id="fe380-143">Select an option from the **Commit at Publisher** drop-down list:</span></span>

    * <span data-ttu-id="fe380-144">Pour utiliser des abonnements mis à jour immédiatement, sélectionnez **Enregistrer les modifications simultanément**.</span><span class="sxs-lookup"><span data-stu-id="fe380-144">To use immediate updating subscriptions, select **Simultaneously commit changes**.</span></span> <span data-ttu-id="fe380-145">Si vous sélectionnez cette option et que la publication autorise les abonnements mis à jour en attente (l’option par défaut pour les publications créées avec l’Assistant Nouvelle publication), la propriété d’abonnement **update_mode** a la valeur **failover**.</span><span class="sxs-lookup"><span data-stu-id="fe380-145">If you select this option, and the publication allows queued updating subscriptions (the default for publications created with the New Publication Wizard), the subscription property **update_mode** is set to **failover**.</span></span> <span data-ttu-id="fe380-146">Ce mode vous permet de passer ultérieurement en mise à jour en attente si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="fe380-146">This mode allows you to switch to queued updating later if necessary.</span></span>
    * <span data-ttu-id="fe380-147">Pour utiliser des abonnements mis à jour en attente, sélectionnez **Mettre les modifications en file d’attente et valider dès que possible**.</span><span class="sxs-lookup"><span data-stu-id="fe380-147">To use queued updating subscriptions, select **Queue changes and commit when possible**.</span></span> <span data-ttu-id="fe380-148">Si vous sélectionnez cette option et que la publication autorise les abonnements mis à jour immédiatement (l’option par défaut pour les publications créées avec l’Assistant Nouvelle publication), et si l’abonné exécute SQL Server 2005 ou une version ultérieure, la propriété d’abonnement **update_mode** a la valeur queued **failover**.</span><span class="sxs-lookup"><span data-stu-id="fe380-148">If you select this option, and the publication allows immediate updating subscriptions (the default for publications created with the New Publication Wizard), and the Subscriber is running SQL Server 2005 or a later version, the subscription property **update_mode** is set to queued **failover**.</span></span> <span data-ttu-id="fe380-149">Ce mode vous permet de passer ultérieurement en mise à jour immédiate si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="fe380-149">This mode allows you to switch to immediate updating later if necessary.</span></span>

    <span data-ttu-id="fe380-150">Pour plus d’informations sur le basculement entre les modes de mise à jour, consultez [Basculer entre les modes de mise à jour d’un abonnement transactionnel pouvant être mis à jour](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-150">For information about switching update modes, see [Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>

10. <span data-ttu-id="fe380-151">La page **Nom d’accès aux abonnements pouvant être mis à jour** est affichée pour les abonnements qui utilisent la mise à jour immédiate ou dont la propriété **update_mode** a la valeur queued **failover**.</span><span class="sxs-lookup"><span data-stu-id="fe380-151">The **Login for Updatable Subscriptions** page is displayed for subscriptions that use immediate updating or have **update_mode** set to queued **failover**.</span></span> <span data-ttu-id="fe380-152">Dans la page **Nom d’accès aux abonnements pouvant être mis à jour**, spécifiez un serveur lié via lequel sont effectuées les connexions au serveur de publication pour les abonnements mis à jour immédiatement.</span><span class="sxs-lookup"><span data-stu-id="fe380-152">On the **Login for Updatable Subscriptions** page, specify a linked server over which connections to the Publisher are made for immediate updating subscriptions.</span></span> <span data-ttu-id="fe380-153">Les connexions sont utilisées par les déclencheurs qui s'exécutent pour l'abonné et propagent les modifications sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-153">Connections are used by the triggers that fire at the Subscriber and propagate changes to the Publisher.</span></span> <span data-ttu-id="fe380-154">Sélectionnez l’une des options suivantes :</span><span class="sxs-lookup"><span data-stu-id="fe380-154">Select one of the following options:</span></span>

    * <span data-ttu-id="fe380-155">**Créer un serveur lié qui se connecte par Authentification SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="fe380-155">**Create a linked server that connects using SQL Server Authentication.**</span></span> <span data-ttu-id="fe380-156">Sélectionnez cette option si vous n'avez pas défini un serveur distant ou un serveur lié entre l'Abonné et le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-156">Select this option if you have not defined a remote server or linked server between the Subscriber and the Publisher.</span></span> <span data-ttu-id="fe380-157">La réplication crée un serveur lié pour vous.</span><span class="sxs-lookup"><span data-stu-id="fe380-157">Replication creates a linked server for you.</span></span> <span data-ttu-id="fe380-158">Le compte que vous spécifiez doit déjà exister sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-158">The account you specify must already exist at the Publisher.</span></span>
    * <span data-ttu-id="fe380-159">**Utiliser un serveur lié ou un serveur distant que vous avez déjà défini.**</span><span class="sxs-lookup"><span data-stu-id="fe380-159">**Use a linked server or remote server that you have already defined.**</span></span> <span data-ttu-id="fe380-160">Sélectionnez cette option si vous avez défini un serveur distant ou un serveur lié entre l’abonné et le serveur de publication à l’aide de [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio ou d’une autre méthode.</span><span class="sxs-lookup"><span data-stu-id="fe380-160">Select this option if you have defined a remote server or linked server between the Subscriber and the Publisher using [sp_addserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addserver-transact-sql), [sp_addlinkedserver (Transact-SQL)](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql), SQL Server Management Studio, or another method.</span></span>

    <span data-ttu-id="fe380-161">Pour plus d’informations sur les autorisations requises par le compte du serveur lié, consultez la section **Abonnements mis à jour en attente** de [saisissez la description de lien ici](../security/secure-the-subscriber.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-161">For information about the permissions required by the linked server account, see the **Queued Updating Subscriptions** of [enter link description here](../security/secure-the-subscriber.md).</span></span>

11. <span data-ttu-id="fe380-162">Terminez l'Assistant.</span><span class="sxs-lookup"><span data-stu-id="fe380-162">Complete the wizard.</span></span>

## <a name="create-an-immediate-updating-pull-subscription"></a><span data-ttu-id="fe380-163">Créer un abonnement par extraction avec mise à jour immédiate</span><span class="sxs-lookup"><span data-stu-id="fe380-163">Create an immediate updating pull subscription</span></span>

1. <span data-ttu-id="fe380-164">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements avec mise à jour immédiate en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-164">At the Publisher, verify that the publication supports immediate updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-165">Si la valeur de `allow_sync_tran` dans le jeu de résultats est `1`, la publication prend en charge les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-165">If the value of `allow_sync_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="fe380-166">Si la valeur de `allow_sync_tran` dans le jeu de résultats est `0`, la publication doit être recréée en activant la prise en charge des abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-166">If the value of `allow_sync_tran` in the result set is `0`, the publication must be recreated with immediate updating subscriptions enabled.</span></span>

2. <span data-ttu-id="fe380-167">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements par extraction en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-167">At the Publisher, verify that the publication supports pull subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-168">Si la valeur de `allow_pull` dans le jeu de résultats est `1`, la publication prend en charge les abonnements par extraction.</span><span class="sxs-lookup"><span data-stu-id="fe380-168">If the value of `allow_pull` in the result set is `1`, the publication supports pull subscriptions.</span></span>
    * <span data-ttu-id="fe380-169">Si la valeur de `allow_pull` est `0`, exécutez [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), en spécifiant `allow_pull` pour `@property` , et `true` pour `@value`.</span><span class="sxs-lookup"><span data-stu-id="fe380-169">If the value of `allow_pull` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_pull` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="fe380-170">Sur l'Abonné, exécutez [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-170">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="fe380-171">Spécifiez `@publisher` et `@publication`, et l’une des valeurs suivantes pour `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="fe380-171">Specify `@publisher` and `@publication`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="fe380-172">`sync tran` - active l’abonnement pour la mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-172">`sync tran` - enables the subscription for immediate updating.</span></span>
    * <span data-ttu-id="fe380-173">`failover` - active l’abonnement pour la mise à jour immédiate avec mise à jour en file d’attente sous forme d’option de basculement.</span><span class="sxs-lookup"><span data-stu-id="fe380-173">`failover` - enables the subscription for immediate updating with queued updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="fe380-174">`failover` requiert que la publication soit également activée pour les abonnements avec mise à jour en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="fe380-174">`failover` requires that the publication also be enabled for queued updating subscriptions.</span></span> 
 
4. <span data-ttu-id="fe380-175">Sur l'Abonné, exécutez [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-175">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="fe380-176">Spécifiez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="fe380-176">Specify the following:</span></span>

    * <span data-ttu-id="fe380-177">Les paramètres `@publisher`, `@publisher_db`et `@publication` .</span><span class="sxs-lookup"><span data-stu-id="fe380-177">The `@publisher`, `@publisher_db`, and `@publication` parameters.</span></span> 
    * <span data-ttu-id="fe380-178">Les informations d’identification Microsoft Windows sous lesquelles l’Agent de distribution est exécuté sur l’abonné pour `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-178">The Microsoft Windows credentials under which the Distribution Agent at the Subscriber runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="fe380-179">Les connexions établies à l’aide de l’authentification intégrée Windows utilisent toujours les informations d’identification Windows spécifiées par `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-179">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="fe380-180">L'Agent de distribution établit toujours la connexion locale à l'Abonné à l'aide de l'authentification intégrée Windows.</span><span class="sxs-lookup"><span data-stu-id="fe380-180">The Distribution Agent always makes the local connection to the Subscriber using Windows Integrated Authentication.</span></span> <span data-ttu-id="fe380-181">Par défaut, l'agent se connecte au serveur de distribution à l'aide de l'authentification intégrée Windows.</span><span class="sxs-lookup"><span data-stu-id="fe380-181">By default, the agent connects to the Distributor using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="fe380-182">(Facultatif) Une valeur de `0` pour `@distributor_security_mode` et les informations de connexion Microsoft SQL Server pour `@distributor_login` et `@distributor_password`, si vous devez utiliser l’authentification SQL Server lors de la connexion du distributeur.</span><span class="sxs-lookup"><span data-stu-id="fe380-182">(Optional) A value of `0` for `@distributor_security_mode` and the Microsoft SQL Server login information for `@distributor_login` and `@distributor_password`, if you need to use SQL Server Authentication when connecting to the Distributor.</span></span> 
    * <span data-ttu-id="fe380-183">Planification du travail de l'Agent de distribution pour cet abonnement.</span><span class="sxs-lookup"><span data-stu-id="fe380-183">A schedule for the Distribution Agent job for this subscription.</span></span> 

5. <span data-ttu-id="fe380-184">Dans la base de données d’abonnement de l’Abonné, exécutez [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-184">At the Subscriber on the subscription database, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="fe380-185">Spécifiez `@publisher`, `@publication`, le nom de la base de données de publication pour `@publisher_db`, et l’une des valeurs suivantes pour `@security_mode`:</span><span class="sxs-lookup"><span data-stu-id="fe380-185">Specify `@publisher`, `@publication`, the name of the publication database for `@publisher_db`, and one of the following values for `@security_mode`:</span></span> 

    * <span data-ttu-id="fe380-186">`0` - Utiliser l’authentification SQL Server pour effectuer des mises à jour sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-186">`0` - Use SQL Server Authentication when making updates at the Publisher.</span></span> <span data-ttu-id="fe380-187">Avec cette option, vous devez spécifier une connexion valide sur le serveur de publication pour `@login` et `@password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-187">This option requires you to specify a valid login at the Publisher for `@login` and `@password`.</span></span>
    * <span data-ttu-id="fe380-188">`1` - Utiliser le contexte de sécurité de l’utilisateur qui apporte des modifications à l’Abonné lors de la connexion au serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-188">`1` - Use the security context of the user making changes at the Subscriber when connecting to the Publisher.</span></span> <span data-ttu-id="fe380-189">Consultez [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) pour connaître les restrictions en rapport avec ce mode de sécurité.</span><span class="sxs-lookup"><span data-stu-id="fe380-189">See [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) for restrictions related to this security mode.</span></span>
    * <span data-ttu-id="fe380-190">`2` - Utiliser une connexion de serveur lié existante, définie par l’utilisateur, créée à l’aide de [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-190">`2` - Use an existing, user-defined linked server login created using [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>

6. <span data-ttu-id="fe380-191">Sur le serveur de publication, exécutez [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) en spécifiant `@publication`, `@subscriber`, `@destination_db`, une valeur d’extraction pour `@subscription_type`, et la valeur spécifiée à l’étape 3 pour `@update_mode`.</span><span class="sxs-lookup"><span data-stu-id="fe380-191">At the publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) specifying `@publication`, `@subscriber`, `@destination_db`, a value of pull for `@subscription_type`, and the same value specified in step 3 for `@update_mode`.</span></span>

<span data-ttu-id="fe380-192">L'abonnement par extraction est alors inscrit sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-192">This registers the pull subscription at the Publisher.</span></span> 


## <a name="create-an-immediate-updating-push-subscription"></a><span data-ttu-id="fe380-193">Créer un abonnement par émission de données avec mise à jour immédiate</span><span class="sxs-lookup"><span data-stu-id="fe380-193">Create an immediate updating push subscription</span></span> 

1. <span data-ttu-id="fe380-194">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements avec mise à jour immédiate en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-194">At the Publisher, verify that the publication supports immediate updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-195">Si la valeur de `allow_sync_tran` dans le jeu de résultats est `1`, la publication prend en charge les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-195">If the value of `allow_sync_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="fe380-196">Si la valeur de `allow_sync_tran` dans le jeu de résultats est `0`, la publication doit être recréée en activant la prise en charge des abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-196">If the value of `allow_sync_tran` in the result set is `0`, the publication must be recreated with immediate updating subscriptions enabled.</span></span>

2. <span data-ttu-id="fe380-197">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements par émission de données en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-197">At the Publisher, verify that the publication supports push subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-198">Si la valeur de `allow_push` dans le jeu de résultats est `1`, la publication prend en charge les abonnements par émission de données.</span><span class="sxs-lookup"><span data-stu-id="fe380-198">If the value of `allow_push` in the result set is `1`, the publication supports push subscriptions.</span></span>
    * <span data-ttu-id="fe380-199">Si la valeur de `allow_push` est `0`, exécutez [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), en spécifiant `allow_push` pour `@property` , et `true` pour `@value`.</span><span class="sxs-lookup"><span data-stu-id="fe380-199">If the value of `allow_push` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_push` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="fe380-200">Sur le serveur de publication, exécutez [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-200">At the Publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="fe380-201">Spécifiez `@publication`, `@subscriber`, `@destination_db`, et l’une des valeurs suivantes pour `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="fe380-201">Specify `@publication`, `@subscriber`, `@destination_db`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="fe380-202">`sync tran` - active la prise en charge de la mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-202">`sync tran` - enables support for immediate updating.</span></span>
    * <span data-ttu-id="fe380-203">`failover` - active la prise en charge de la mise à jour immédiate avec mise à jour en file d’attente comme option de basculement.</span><span class="sxs-lookup"><span data-stu-id="fe380-203">`failover` - enables support for immediate updating with queued updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="fe380-204">`failover` requiert que la publication soit également activée pour les abonnements avec mise à jour en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="fe380-204">`failover` requires that the publication also be enabled for queued updating subscriptions.</span></span> 
 
4. <span data-ttu-id="fe380-205">Sur le serveur de publication, exécutez [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-205">At the Publisher, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="fe380-206">Spécifiez les paramètres suivants :</span><span class="sxs-lookup"><span data-stu-id="fe380-206">Specify the following parameters:</span></span>

    * <span data-ttu-id="fe380-207">`@subscriber`, `@subscriber_db`et `@publication`.</span><span class="sxs-lookup"><span data-stu-id="fe380-207">`@subscriber`, `@subscriber_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="fe380-208">Informations d’identification Windows sous lesquelles l’Agent de distribution s’exécute sur le serveur de distribution pour `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-208">The Windows credentials under which the Distribution Agent at the Distributor runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="fe380-209">Les connexions établies à l’aide de l’authentification intégrée Windows utilisent toujours les informations d’identification Windows spécifiées par `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-209">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="fe380-210">L'Agent de distribution crée toujours la connexion locale au serveur de distribution à l'aide de l'authentification intégrée Windows.</span><span class="sxs-lookup"><span data-stu-id="fe380-210">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="fe380-211">Par défaut, l'agent se connecte à l'Abonné à l'aide de ces informations.</span><span class="sxs-lookup"><span data-stu-id="fe380-211">By default, the agent will connect to the Subscriber using Windows Integrated Authentication.</span></span> 

    * <span data-ttu-id="fe380-212">(Facultatif) Une valeur de `0` pour `@subscriber_security_mode` et les informations de connexion SQL Server pour `@subscriber_login` et `@subscriber_password`, si vous devez utiliser l’authentification SQL Server lors de la connexion de l’abonné.</span><span class="sxs-lookup"><span data-stu-id="fe380-212">(Optional) A value of `0` for `@subscriber_security_mode` and the SQL Server login information for `@subscriber_login` and `@subscriber_password`, if you need to use SQL Server Authentication when connecting to the Subscriber.</span></span> 
    * <span data-ttu-id="fe380-213">Planification du travail de l'Agent de distribution pour cet abonnement.</span><span class="sxs-lookup"><span data-stu-id="fe380-213">A schedule for the Distribution Agent job for this subscription.</span></span>

5. <span data-ttu-id="fe380-214">Dans la base de données d’abonnement de l’Abonné, exécutez [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-214">At the Subscriber on the subscription database, execute [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql).</span></span> <span data-ttu-id="fe380-215">Spécifiez `@publisher`, `@publication`, le nom de la base de données de publication pour `@publisher_db`, et l’une des valeurs suivantes pour `@security_mode`:</span><span class="sxs-lookup"><span data-stu-id="fe380-215">Specify `@publisher`, `@publication`, the name of the publication database for `@publisher_db`, and one of the following values for `@security_mode`:</span></span> 

     * <span data-ttu-id="fe380-216">`0` - Utiliser l’authentification SQL Server pour effectuer des mises à jour sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-216">`0` - Use SQL Server Authentication when making updates at the Publisher.</span></span> <span data-ttu-id="fe380-217">Avec cette option, vous devez spécifier une connexion valide sur le serveur de publication pour `@login` et `@password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-217">This option requires you to specify a valid login at the Publisher for `@login` and `@password`.</span></span>
     * <span data-ttu-id="fe380-218">`1` - Utiliser le contexte de sécurité de l’utilisateur qui apporte des modifications à l’Abonné lors de la connexion au serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-218">`1` - Use the security context of the user making changes at the Subscriber when connecting to the Publisher.</span></span> <span data-ttu-id="fe380-219">Consultez [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) pour connaître les restrictions en rapport avec ce mode de sécurité.</span><span class="sxs-lookup"><span data-stu-id="fe380-219">See [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) for restrictions related to this security mode.</span></span>
     * <span data-ttu-id="fe380-220">`2` - Utiliser une connexion de serveur lié existante, définie par l’utilisateur, créée à l’aide de [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-220">`2` - Use an existing, user-defined linked server login created using [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql).</span></span>


## <a name="create-a-queued-updating-pull-subscription"></a><span data-ttu-id="fe380-221">Créer un abonnement par extraction avec mise à jour en file d’attente</span><span class="sxs-lookup"><span data-stu-id="fe380-221">Create a queued updating pull subscription</span></span> ##

1. <span data-ttu-id="fe380-222">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements avec mise à jour en file d’attente en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-222">At the Publisher, verify that the publication supports queued updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-223">Si la valeur de `allow_queued_tran` dans le jeu de résultats est `1`, la publication prend en charge les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-223">If the value of `allow_queued_tran` in the result set is `1`, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="fe380-224">Si la valeur de `allow_queued_tran` dans le jeu de résultats est `0`, la publication doit être recréée en activant la prise en charge des abonnements avec mise à jour en file d’attente activée.</span><span class="sxs-lookup"><span data-stu-id="fe380-224">If the value of `allow_queued_tran` in the result set is `0`, the publication must be recreated with queued updating subscriptions enabled.</span></span>

2. <span data-ttu-id="fe380-225">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements par extraction en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-225">At the Publisher, verify that the publication supports pull subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-226">Si la valeur de `allow_pull` dans le jeu de résultats est `1`, la publication prend en charge les abonnements par extraction.</span><span class="sxs-lookup"><span data-stu-id="fe380-226">If the value of `allow_pull` in the result set is `1`, the publication supports pull subscriptions.</span></span>
    * <span data-ttu-id="fe380-227">Si la valeur de `allow_pull` est `0`, exécutez [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), en spécifiant `allow_pull` pour `@property` , et `true` pour `@value`.</span><span class="sxs-lookup"><span data-stu-id="fe380-227">If the value of `allow_pull` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying `allow_pull` for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="fe380-228">Sur l'Abonné, exécutez [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-228">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="fe380-229">Spécifiez `@publisher` et `@publication`, et l’une des valeurs suivantes pour `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="fe380-229">Specify `@publisher` and `@publication`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="fe380-230">`queued tran` - active l’abonnement pour la mise à jour en attente.</span><span class="sxs-lookup"><span data-stu-id="fe380-230">`queued tran` - enables the subscription for queued updating.</span></span>
    * <span data-ttu-id="fe380-231">`queued failover` - active la prise en charge de la mise à jour en file d’attente avec mise à jour immédiate comme option de basculement.</span><span class="sxs-lookup"><span data-stu-id="fe380-231">`queued failover` - enables support for queued updating with immediate updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="fe380-232">`queued failover` requiert que la publication soit également activée pour les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-232">`queued failover` requires that the publication also be enabled for immediate updating subscriptions.</span></span> <span data-ttu-id="fe380-233">Pour basculer sur la mise à jour immédiate, vous devez utiliser [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) pour définir les informations d’identification sous lesquelles les modifications au niveau de l’Abonné sont répliquées sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-233">To fail over to immediate updating, you must use [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) to define the credentials under which changes at the Subscriber are replicated to the Publisher.</span></span>
 
4. <span data-ttu-id="fe380-234">Sur l'Abonné, exécutez [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-234">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="fe380-235">Spécifiez les paramètres suivants :</span><span class="sxs-lookup"><span data-stu-id="fe380-235">Specify the following parameters:</span></span>

    * <span data-ttu-id="fe380-236">@publisher, `@publisher_db`et `@publication`.</span><span class="sxs-lookup"><span data-stu-id="fe380-236">@publisher, `@publisher_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="fe380-237">Les informations d’identification Windows sous lesquelles l’Agent de distribution est exécuté sur l’abonné pour `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-237">The Windows credentials under which the Distribution Agent at the Subscriber runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="fe380-238">Les connexions établies à l’aide de l’authentification intégrée Windows utilisent toujours les informations d’identification Windows spécifiées par `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-238">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="fe380-239">L'Agent de distribution établit toujours la connexion locale à l'Abonné à l'aide de l'authentification intégrée Windows.</span><span class="sxs-lookup"><span data-stu-id="fe380-239">The Distribution Agent always makes the local connection to the Subscriber using Windows Integrated Authentication.</span></span> <span data-ttu-id="fe380-240">Par défaut, l'agent se connecte au serveur de distribution à l'aide de l'authentification intégrée Windows.</span><span class="sxs-lookup"><span data-stu-id="fe380-240">By default, the agent connects to the Distributor using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="fe380-241">(Facultatif) Une valeur de `0` pour `@distributor_security_mode` et les informations de connexion SQL Server pour `@distributor_login` et `@distributor_password`, si vous devez utiliser l’authentification SQL Server lors de la connexion du distributeur.</span><span class="sxs-lookup"><span data-stu-id="fe380-241">(Optional) A value of `0` for `@distributor_security_mode` and the SQL Server login information for `@distributor_login` and `@distributor_password`, if you need to use SQL Server Authentication when connecting to the Distributor.</span></span> 
    * <span data-ttu-id="fe380-242">Planification du travail de l'Agent de distribution pour cet abonnement.</span><span class="sxs-lookup"><span data-stu-id="fe380-242">A schedule for the Distribution Agent job for this subscription.</span></span>

5. <span data-ttu-id="fe380-243">Sur le serveur de publication, exécutez [sp_addsubscriber](/sql/relational-databases/system-stored-procedures/sp-addsubscriber-transact-sql) pour enregistrer l’abonné sur le serveur de publication en spécifiant `@publication`, `@subscriber`, `@destination_db`, une valeur d’extraction pour `@subscription_type`, et la valeur spécifiée à l’étape 3 pour `@update_mode`.</span><span class="sxs-lookup"><span data-stu-id="fe380-243">At the publisher, execute [sp_addsubscriber](/sql/relational-databases/system-stored-procedures/sp-addsubscriber-transact-sql) to register the Subscriber at the Publisher, specifying `@publication`, `@subscriber`, `@destination_db`, a value of pull for `@subscription_type`, and the same value specified in step 3 for `@update_mode`.</span></span>

<span data-ttu-id="fe380-244">L'abonnement par extraction est alors inscrit sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-244">This registers the pull subscription at the Publisher.</span></span> 


## <a name="to-create-a-queued-updating-push-subscription"></a><span data-ttu-id="fe380-245">Pour créer un abonnement par émission de données avec mise à jour en file d'attente</span><span class="sxs-lookup"><span data-stu-id="fe380-245">To create a queued updating push subscription</span></span> ##

1. <span data-ttu-id="fe380-246">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements avec mise à jour en file d’attente en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-246">At the Publisher, verify that the publication supports queued updating subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-247">Si la valeur de allow_queued_tran dans le jeu de résultats est 1, la publication prend en charge les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-247">If the value of allow_queued_tran in the result set is 1, the publication supports immediate updating subscriptions.</span></span>
    * <span data-ttu-id="fe380-248">Si la valeur de allow_queued_tran dans le jeu de résultats est 0, la publication doit être recréée en activant la prise en charge des abonnements avec mise à jour en file d’attente.</span><span class="sxs-lookup"><span data-stu-id="fe380-248">If the value of allow_queued_tran in the result set is 0, the publication must be recreated with queued updating subscriptions enabled.</span></span> <span data-ttu-id="fe380-249">Pour plus d’informations, consultez Guide pratique pour activer les abonnements avec mise à jour pour les publications transactionnelles (programmation Transact-SQL de la réplication).</span><span class="sxs-lookup"><span data-stu-id="fe380-249">For more information, see How to: Enable Updating Subscriptions for Transactional Publications (Replication Transact-SQL Programming).</span></span>

2. <span data-ttu-id="fe380-250">Sur le serveur de publication, vérifiez que la publication prend en charge les abonnements par émission de données en exécutant [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-250">At the Publisher, verify that the publication supports push subscriptions by executing [sp_helppublication](/sql/relational-databases/system-stored-procedures/sp-helppublication-transact-sql).</span></span> 

    * <span data-ttu-id="fe380-251">Si la valeur de `allow_push` dans le jeu de résultats est `1`, la publication prend en charge les abonnements par émission de données.</span><span class="sxs-lookup"><span data-stu-id="fe380-251">If the value of `allow_push` in the result set is `1`, the publication supports push subscriptions.</span></span>
    * <span data-ttu-id="fe380-252">Si la valeur de `allow_push` est `0`, exécutez [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), en spécifiant allow_push pour `@property` , et `true` pour `@value`.</span><span class="sxs-lookup"><span data-stu-id="fe380-252">If the value of `allow_push` is `0`, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql), specifying allow_push for `@property` and `true` for `@value`.</span></span> 

3. <span data-ttu-id="fe380-253">Sur le serveur de publication, exécutez [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-253">At the Publisher, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="fe380-254">Spécifiez `@publication`, `@subscriber`, `@destination_db`, et l’une des valeurs suivantes pour `@update_mode`:</span><span class="sxs-lookup"><span data-stu-id="fe380-254">Specify `@publication`, `@subscriber`, `@destination_db`, and one of the following values for `@update_mode`:</span></span>

    * <span data-ttu-id="fe380-255">`queued tran` - active l’abonnement pour la mise à jour en attente.</span><span class="sxs-lookup"><span data-stu-id="fe380-255">`queued tran` - enables the subscription for queued updating.</span></span>
    * <span data-ttu-id="fe380-256">`queued failover` - active la prise en charge de la mise à jour en file d’attente avec mise à jour immédiate comme option de basculement.</span><span class="sxs-lookup"><span data-stu-id="fe380-256">`queued failover` - enables support for queued updating with immediate updating as a failover option.</span></span>

    > [!NOTE]  
>  <span data-ttu-id="fe380-257">L’option queued failover requiert que la publication soit également activée pour les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-257">The queued failover option requires that the publication also be enabled for immediate updating subscriptions.</span></span> <span data-ttu-id="fe380-258">Pour basculer sur la mise à jour immédiate, vous devez utiliser [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) pour définir les informations d’identification sous lesquelles les modifications au niveau de l’Abonné sont répliquées sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="fe380-258">To fail over to immediate updating, you must use [sp_link_publication](/sql/relational-databases/system-stored-procedures/sp-link-publication-transact-sql) to define the credentials under which changes at the Subscriber are replicated to the Publisher.</span></span>

4. <span data-ttu-id="fe380-259">Sur le serveur de publication, exécutez [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fe380-259">At the Publisher, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="fe380-260">Spécifiez les paramètres suivants :</span><span class="sxs-lookup"><span data-stu-id="fe380-260">Specify the following parameters:</span></span>

    * <span data-ttu-id="fe380-261">`@subscriber`, `@subscriber_db`et `@publication`.</span><span class="sxs-lookup"><span data-stu-id="fe380-261">`@subscriber`, `@subscriber_db`, and `@publication`.</span></span> 
    * <span data-ttu-id="fe380-262">Informations d’identification Windows sous lesquelles l’Agent de distribution s’exécute sur le serveur de distribution pour `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-262">The Windows credentials under which the Distribution Agent at the Distributor runs for `@job_login` and `@job_password`.</span></span> 

    > [!NOTE]  
>  <span data-ttu-id="fe380-263">Les connexions établies à l’aide de l’authentification intégrée Windows utilisent toujours les informations d’identification Windows spécifiées par `@job_login` et `@job_password`.</span><span class="sxs-lookup"><span data-stu-id="fe380-263">Connections made using Windows Integrated Authentication are always made using the Windows credentials specified by `@job_login` and `@job_password`.</span></span> <span data-ttu-id="fe380-264">L'Agent de distribution crée toujours la connexion locale au serveur de distribution à l'aide de l'authentification intégrée Windows.</span><span class="sxs-lookup"><span data-stu-id="fe380-264">The Distribution Agent always makes the local connection to the Distributor using Windows Integrated Authentication.</span></span> <span data-ttu-id="fe380-265">Par défaut, l’agent se connecte à l’Abonné à l’aide de ces informations.</span><span class="sxs-lookup"><span data-stu-id="fe380-265">By default, the agent connects to the Subscriber using Windows Integrated Authentication.</span></span> 
 
    * <span data-ttu-id="fe380-266">(Facultatif) Une valeur de `0` pour `@subscriber_security_mode` et les informations de connexion SQL Server pour `@subscriber_login` et `@subscriber_password`, si vous devez utiliser l’authentification SQL Server lors de la connexion de l’abonné.</span><span class="sxs-lookup"><span data-stu-id="fe380-266">(Optional) A value of `0` for `@subscriber_security_mode` and the SQL Server login information for `@subscriber_login` and `@subscriber_password`, if you need to use SQL Server Authentication when connecting to the Subscriber.</span></span> 
    * <span data-ttu-id="fe380-267">Planification du travail de l'Agent de distribution pour cet abonnement.</span><span class="sxs-lookup"><span data-stu-id="fe380-267">A schedule for the Distribution Agent job for this subscription.</span></span>


## <a name="example"></a><span data-ttu-id="fe380-268">Exemple</span><span class="sxs-lookup"><span data-stu-id="fe380-268">Example</span></span> ##

<span data-ttu-id="fe380-269">Cet exemple crée un abonnement par extraction avec mise à jour immédiate à une publication qui prend en charge les abonnements avec mise à jour immédiate.</span><span class="sxs-lookup"><span data-stu-id="fe380-269">This example creates an immediate updating pull subscription to a publication that supports immediate updating subscriptions.</span></span> <span data-ttu-id="fe380-270">Les valeurs de connexion et le mot de passe sont fournis lors de l'exécution à l'aide des variables de script sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="fe380-270">Login and password values are supplied at runtime using sqlcmd scripting variables.</span></span>

> [!NOTE]  
>  <span data-ttu-id="fe380-271">Ce script utilise des variables de script sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="fe380-271">This script uses sqlcmd scripting variables.</span></span> <span data-ttu-id="fe380-272">Elles sont au format `$(MyVariable)`.</span><span class="sxs-lookup"><span data-stu-id="fe380-272">They are in the form `$(MyVariable)`.</span></span> <span data-ttu-id="fe380-273">Pour plus d’informations sur l’utilisation des variables de script sur la ligne de commande et dans SQL Server Management Studio, consultez la section **Exécution de scripts de réplication** dans la rubrique [Concepts liés aux procédures stockées système de réplication](../concepts/replication-system-stored-procedures-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-273">For information about how to use scripting variables on the command line and in SQL Server Management Studio, see the **Executing Replication Scripts** section in the topic [Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md).</span></span>

```sql
-- Execute this batch at the Subscriber.
DECLARE @publication AS sysname;
DECLARE @publicationDB AS sysname;
DECLARE @publisher AS sysname;
DECLARE @login AS sysname;
DECLARE @password AS nvarchar(512);
SET @publication = N'AdvWorksProductTran';
SET @publicationDB = N'AdventureWorks2008R2';
SET @publisher = $(PubServer);
SET @login = $(Login);
SET @password = $(Password);

-- At the subscription database, create a pull subscription to a transactional 
-- publication using immediate updating with queued updating as a failover.
EXEC sp_addpullsubscription 
    @publisher = @publisher, 
    @publication = @publication, 
    @publisher_db = @publicationDB, 
    @update_mode = N'failover', 
    @subscription_type = N'pull';

-- Add an agent job to synchronize the pull subscription, 
-- which uses Windows Authentication when connecting to the Distributor.
EXEC sp_addpullsubscription_agent 
    @publisher = @publisher, 
    @publisher_db = @publicationDB, 
    @publication = @publication,
    @job_login = @login,
    @job_password = @password; 

-- Add a Windows Authentication-based linked server that enables the 
-- Subscriber-side triggers to make updates at the Publisher. 
EXEC sp_link_publication 
    @publisher = @publisher, 
    @publication = @publication,
    @publisher_db = @publicationDB, 
    @security_mode = 0,
    @login = @login,
    @password = @password;
GO

USE AdventureWorks2008R2;
GO

-- Execute this batch at the Publisher.
DECLARE @publication AS sysname;
DECLARE @subscriptionDB AS sysname;
DECLARE @subscriber AS sysname;
SET @publication = N'AdvWorksProductTran'; 
SET @subscriptionDB = N'AdventureWorks2008R2Replica'; 
SET @subscriber = $(SubServer);

-- At the Publisher, register the subscription, using the defaults.
USE [AdventureWorks2008R2]
EXEC sp_addsubscription 
    @publication = @publication, 
    @subscriber = @subscriber, 
    @destination_db = @subscriptionDB, 
    @subscription_type = N'pull', 
    @update_mode = N'failover';
GO
```

## <a name="set-queued-updating-conflict-resolution-options-sql-server-management-studio"></a><span data-ttu-id="fe380-274">définir des options de résolution des conflits de mise à jour en attente (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="fe380-274">Set Queued Updating Conflict Resolution Options (SQL Server Management Studio)</span></span>
  <span data-ttu-id="fe380-275">Définissez les options de résolution des conflits pour les publications qui prennent en charge les abonnements avec mise à jour en attente, sur la page **Options d’abonnement** de la boîte de dialogue **Propriétés de la publication - \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="fe380-275">Set conflict resolution options for publications that support queued updating subscriptions on the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="fe380-276">Pour plus d'informations sur l'accès à cette boîte de dialogue, consultez [Afficher et modifier les propriétés d’un serveur de publication](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="fe380-276">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
### <a name="to-set-queued-updating-conflict-resolution-options"></a><span data-ttu-id="fe380-277">Pour définir les options de résolution des conflits de mise à jour en attente</span><span class="sxs-lookup"><span data-stu-id="fe380-277">To set queued updating conflict resolution options</span></span>  
  
1.  <span data-ttu-id="fe380-278">Sur la page **Options d’abonnement** de la boîte de dialogue **Propriétés de la publication - \<Publication>** , sélectionnez l’une des valeurs ci-après pour l’option **Stratégie de résolution de conflit** :</span><span class="sxs-lookup"><span data-stu-id="fe380-278">On the **Subscription Options** page of the **Publication Properties - \<Publication>** dialog box, select one of the following values for the **Conflict resolution policy** option:</span></span>    
    -   <span data-ttu-id="fe380-279">**Conserver la modification apportée au serveur de publication**</span><span class="sxs-lookup"><span data-stu-id="fe380-279">**Keep the Publisher change**</span></span>    
    -   <span data-ttu-id="fe380-280">**Conserver la modification apportée à l'abonné**</span><span class="sxs-lookup"><span data-stu-id="fe380-280">**Keep the Subscriber change**</span></span>    
    -   <span data-ttu-id="fe380-281">**Réinitialiser l'abonnement**</span><span class="sxs-lookup"><span data-stu-id="fe380-281">**Reinitialize the subscription**</span></span>    
2.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  

## <a name="see-also"></a><span data-ttu-id="fe380-282">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="fe380-282">See Also</span></span> ##
 <span data-ttu-id="fe380-283">[Create a Publication](create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="fe380-283">[Create a Publication](create-a-publication.md) </span></span>  
 <span data-ttu-id="fe380-284">[Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="fe380-284">[Updatable Subscriptions for Transactional Replication](../transactional/updatable-subscriptions-for-transactional-replication.md) </span></span>  
 [<span data-ttu-id="fe380-285">Utiliser sqlcmd avec des variables de script</span><span class="sxs-lookup"><span data-stu-id="fe380-285">Use sqlcmd with Scripting Variables</span></span>](../../scripting/sqlcmd-use-with-scripting-variables.md)   

  
