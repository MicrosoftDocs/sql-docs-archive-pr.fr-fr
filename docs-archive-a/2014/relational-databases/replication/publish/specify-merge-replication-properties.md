---
title: Spécifier les propriétés de réplication de fusion | Microsoft Docs
ms.custom: ''
ms.date: 11/29/2018
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- merge replication [SQL Server replication], about merge replication
- merge replication [SQL Server replication]
ms.assetid: ff87c368-4c00-4e48-809d-ea752839551e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 3b2e66b7ed26420093166445a478bfec7f1dd21d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87704043"
---
# <a name="specify-merge-replication-properties"></a><span data-ttu-id="20a60-102">Spécifier les propriétés de réplication de fusion</span><span class="sxs-lookup"><span data-stu-id="20a60-102">Specify Merge Replication Properties</span></span>
<span data-ttu-id="20a60-103">Cette rubrique explique comment spécifier différentes propriétés pour votre réplication de fusion.</span><span class="sxs-lookup"><span data-stu-id="20a60-103">This topic explains how to specify various properties for your merge replication.</span></span> 


## <a name="download-only"></a><span data-ttu-id="20a60-104">Téléchargement uniquement</span><span class="sxs-lookup"><span data-stu-id="20a60-104">Download-only</span></span>
  <span data-ttu-id="20a60-105">Cette section décrit comment spécifier qu’un article de table de fusion est en téléchargement seul dans [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] à l’aide de [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] ou de [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="20a60-105">This section describes how to specify that a merge table article is download-only in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="20a60-106">Les articles en téléchargement uniquement sont conçus pour les applications dont les données ne sont pas mises à jour au niveau des Abonnés.</span><span class="sxs-lookup"><span data-stu-id="20a60-106">Download-only articles are designed for applications with data that is not updated at Subscribers.</span></span> <span data-ttu-id="20a60-107">Pour plus d’informations, consultez [Optimiser les performances de la réplication de fusion avec les articles en téléchargement seul](../merge/optimize-merge-replication-performance-with-download-only-articles.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-107">For more information, see [Optimize Merge Replication Performance with Download-Only Articles](../merge/optimize-merge-replication-performance-with-download-only-articles.md).</span></span>  
 
  
###  <a name="limitations-and-restrictions"></a><span data-ttu-id="20a60-108">Limitations et restrictions</span><span class="sxs-lookup"><span data-stu-id="20a60-108">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="20a60-109">Si vous spécifiez qu'un article est en téléchargement seul après l'initialisation des abonnements, tous les abonnements client qui ont reçu l'aticle doivent être réinitialisés.</span><span class="sxs-lookup"><span data-stu-id="20a60-109">If you specify that an article is download-only after subscriptions have been initialized, all client subscriptions that received the article must be reinitialized.</span></span> <span data-ttu-id="20a60-110">Les abonnements serveur n'ont pas besoin d'être réinitialisés.</span><span class="sxs-lookup"><span data-stu-id="20a60-110">Server subscriptions do not have to be reinitialized.</span></span> <span data-ttu-id="20a60-111">Pour plus d’informations sur les effets des modifications de propriétés, consultez [Changer des propriétés de publication et d’article](change-publication-and-article-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-111">For more information on the effects of property changes, see [Change Publication and Article Properties](change-publication-and-article-properties.md).</span></span>  
  
### <a name="using-sql-server-management-studio"></a><span data-ttu-id="20a60-112">Utilisation de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="20a60-112">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="20a60-113">Spécifiez qu’un article est en téléchargement seul dans la page **Articles** de l’Assistant Nouvelle publication ou sous l’onglet **Propriétés** de la boîte de dialogue Propriétés de l' \*\*article- \<Article> \*\* .</span><span class="sxs-lookup"><span data-stu-id="20a60-113">Specify that an article is download-only on the **Articles** page of the New Publication Wizard or the **Properties** tab of the **Article Properties - \<Article>** dialog box.</span></span> <span data-ttu-id="20a60-114">Cette boîte de dialogue est disponible dans l’Assistant Nouvelle publication et dans la boîte de dialogue **Propriétés de la publication - \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="20a60-114">This dialog box is available in the New Publication Wizard and the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="20a60-115">Pour plus d’informations sur l’utilisation de l’Assistant et sur l’accès à la boîte de dialogue, consultez [Créer une publication](../publish/create-a-publication.md) et [Afficher et modifier les propriétés d’une publication](../publish/view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-115">For more information about using the wizard and accessing the dialog box, see [Create a Publication](../publish/create-a-publication.md) and [View and Modify Publication Properties](../publish/view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-that-an-article-is-download-only-on-the-articles-page"></a><span data-ttu-id="20a60-116">Pour spécifier qu'un article est en téléchargement seul dans la page Articles</span><span class="sxs-lookup"><span data-stu-id="20a60-116">To specify that an article is download-only on the Articles page</span></span>  
  
-   <span data-ttu-id="20a60-117">Dans la page **Articles** de l'Assistant Nouvelle publication, sélectionnez une table, puis activez la case à cocher **La table sélectionnée est en téléchargement seul**.</span><span class="sxs-lookup"><span data-stu-id="20a60-117">On the **Articles** page of the New Publication Wizard select a table, and then select the checkbox **Highlighted table is download-only**.</span></span> 
  
#### <a name="to-specify-that-an-article-is-download-only-on-the-properties-tab-of-the-article-properties---article-dialog-box"></a><span data-ttu-id="20a60-118">Pour spécifier qu’un article est en téléchargement seul sous l’onglet Propriétés de la boîte de dialogue Propriétés de l’article- \<Article></span><span class="sxs-lookup"><span data-stu-id="20a60-118">To specify that an article is download-only on the Properties tab of the Article Properties - \<Article> dialog box</span></span>  
  
1.  <span data-ttu-id="20a60-119">Dans la page **Articles** de l’Assistant Nouvelle publication ou la boîte de dialogue **Propriétés de la publication - \<Publication>** , sélectionnez une table, puis cliquez sur **Propriétés de l’article**.</span><span class="sxs-lookup"><span data-stu-id="20a60-119">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table, and then click **Article Properties**.</span></span>    
2.  <span data-ttu-id="20a60-120">Cliquez sur **Définir les propriétés de l'article de la table en surbrillance** ou **Définir les propriétés de tous les articles de la table**.</span><span class="sxs-lookup"><span data-stu-id="20a60-120">Click **Set Properties of Highlighted Table Article** or **Set Properties of All Table Articles**.</span></span>    
3.  <span data-ttu-id="20a60-121">Dans la section **Objet de destination** de l’onglet **Propriétés** de la boîte de dialogue **Propriétés de l’article - \<Article>** , spécifiez l’une des valeurs suivantes pour **Direction de la synchronisation** :</span><span class="sxs-lookup"><span data-stu-id="20a60-121">In the **Destination Object** section of the **Properties** tab of the **Article Properties - \<Article>** dialog box, specify one of the following values for **Synchronization direction**:</span></span>    
    -   <span data-ttu-id="20a60-122">**Téléchargement seul pour l'Abonné, interdire les modifications de l'Abonné**</span><span class="sxs-lookup"><span data-stu-id="20a60-122">**Download to Subscriber, prohibit Subscriber changes**</span></span>    
    -   <span data-ttu-id="20a60-123">**Téléchargement seul pour l'Abonné, autoriser les modifications de l'Abonné**</span><span class="sxs-lookup"><span data-stu-id="20a60-123">**Download to Subscriber, allow Subscriber changes**</span></span>  
  
4.  <span data-ttu-id="20a60-124">Si vous êtes dans la boîte de dialogue **Propriétés de la publication - \<Publication>** , cliquez sur **OK** pour enregistrer et fermer la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="20a60-124">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>    

###  <a name="using-transact-sql"></a><span data-ttu-id="20a60-125">Utilisation de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="20a60-125">Using Transact-SQL</span></span>  
  
#### <a name="to-specify-that-a-new-merge-table-article-is-download-only"></a><span data-ttu-id="20a60-126">Pour spécifier qu'une nouvelle table de fusion est en téléchargement uniquement</span><span class="sxs-lookup"><span data-stu-id="20a60-126">To specify that a new merge table article is download-only</span></span>    
1.  <span data-ttu-id="20a60-127">Exécutez [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), en affectant la valeur **1** ou **2** au paramètre \*\* \@ subscriber_upload_options\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-127">Execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql), specifying a value of **1** or **2** for the parameter **\@subscriber_upload_options**.</span></span> <span data-ttu-id="20a60-128">Ces chiffres correspondent aux comportements suivants :</span><span class="sxs-lookup"><span data-stu-id="20a60-128">The numbers correspond to the following behavior:</span></span>  
  
    -   <span data-ttu-id="20a60-129">**0** - aucune restriction (valeur par défaut).</span><span class="sxs-lookup"><span data-stu-id="20a60-129">**0** - No restrictions (default).</span></span> <span data-ttu-id="20a60-130">Les modifications sur l'abonné sont téléchargées par le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="20a60-130">Changes made at the Subscriber are uploaded to the Publisher.</span></span>    
    -   <span data-ttu-id="20a60-131">**1** -  modifications autorisées au niveau de l'Abonné, mais elles ne sont pas téléchargées sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="20a60-131">**1** - Changes are allowed at the Subscriber, but they are not uploaded to the Publisher.</span></span>    
    -   <span data-ttu-id="20a60-132">**2** - modifications interdites au niveau de l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="20a60-132">**2** - Changes are not allowed at the Subscriber.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="20a60-133">Si la table source d’un article est déjà publiée dans une autre publication, la valeur de \*\* \@ subscriber_upload_options\*\* doit être la même pour les deux articles.</span><span class="sxs-lookup"><span data-stu-id="20a60-133">If the source table for an article is already published in another publication, the value of **\@subscriber_upload_options** must be the same for both articles.</span></span>  
  
#### <a name="to-modify-an-existing-merge-table-article-to-be-download-only"></a><span data-ttu-id="20a60-134">Pour modifier un article de table fusion existant en article en téléchargement uniquement</span><span class="sxs-lookup"><span data-stu-id="20a60-134">To modify an existing merge table article to be download-only</span></span>  
  
1.  <span data-ttu-id="20a60-135">Pour déterminer si un article est en téléchargement uniquement, exécutez [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-135">To determine if an article is download-only, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-136">Notez la valeur de **upload_options** pour l'article dans le jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="20a60-136">Note the value of **upload_options** for the article in the result set.</span></span>    
2.  <span data-ttu-id="20a60-137">Si la valeur retournée à l’étape 1 est **0**, exécutez [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), en spécifiant la valeur de **subscriber_upload_options** pour la \*\* \@ propriété**, la valeur **1** pour \*\* \@ force_invalidate_snapshot** et \*\* \@ force_reinit_subscription**, et la valeur **1** ou **2** pour la \*\* \@ valeur**, ce qui correspond au comportement suivant :</span><span class="sxs-lookup"><span data-stu-id="20a60-137">If the value returned in step 1 is **0**, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), specifying a value of **subscriber_upload_options** for **\@property**, a value of **1** for **\@force_invalidate_snapshot** and **\@force_reinit_subscription**, and a value of **1** or **2** for **\@value**, which corresponds to the following behavior:</span></span>  
  
    -   <span data-ttu-id="20a60-138">**1** -  modifications autorisées au niveau de l'Abonné, mais elles ne sont pas téléchargées sur le serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="20a60-138">**1** - Changes are allowed at the Subscriber, but they are not uploaded to the Publisher.</span></span>    
    -   <span data-ttu-id="20a60-139">**2** - modifications interdites au niveau de l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="20a60-139">**2** - Changes are not allowed at the Subscriber.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="20a60-140">Si la table source d'un article est déjà publiée dans une autre publication, les deux articles doivent être en téléchargement uniquement ou ne pas l'être.</span><span class="sxs-lookup"><span data-stu-id="20a60-140">If the source table for an article is already published in another publication, the download-only behavior must be the same for both articles.</span></span>  
 
## <a name=""></a><span data-ttu-id="20a60-141"><a name="interactive-conflict-resolution">Résolution interactive des conflits</a></span><span class="sxs-lookup"><span data-stu-id="20a60-141"><a name="interactive-conflict-resolution">Interactive conflict resolution</a></span></span>
[!INCLUDE[msCoName](../../../includes/msconame-md.md)]<span data-ttu-id="20a60-142">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]la réplication fournit un programme de résolution interactif, qui vous permet de résoudre les conflits manuellement pendant la synchronisation à la demande dans [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Gestionnaire de synchronisation Windows.</span><span class="sxs-lookup"><span data-stu-id="20a60-142">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication provides an Interactive Resolver, which allows you to resolve conflicts manually during on-demand synchronization in [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows Synchronization Manager.</span></span> <span data-ttu-id="20a60-143">Quand la résolution de conflits est activée, résolvez les conflits de façon interactive au cours de la synchronisation, à l'aide du résolveur interactif.</span><span class="sxs-lookup"><span data-stu-id="20a60-143">After interactive resolution is enabled, resolve conflicts interactively during synchronization, using the Interactive Resolver.</span></span> <span data-ttu-id="20a60-144">Le résolveur interactif est disponible via le Gestionnaire de synchronisation [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows.</span><span class="sxs-lookup"><span data-stu-id="20a60-144">The Interactive Resolver is available through the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows Synchronization Manager.</span></span> <span data-ttu-id="20a60-145">Pour plus d’informations, consultez [Synchroniser un abonnement à l’aide du Gestionnaire de synchronisation Windows &#40;Gestionnaire de synchronisation Windows&#41;](../synchronize-a-subscription-using-windows-synchronization-manager.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-145">For more information, see [Synchronize a Subscription Using Windows Synchronization Manager &#40;Windows Synchronization Manager&#41;](../synchronize-a-subscription-using-windows-synchronization-manager.md).</span></span>  
  
    
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="20a60-146">Recommandations</span><span class="sxs-lookup"><span data-stu-id="20a60-146">Recommendations</span></span>  
  
-   <span data-ttu-id="20a60-147">Si une synchronisation est effectuée en dehors du Gestionnaire de synchronisation Windows (comme une synchronisation planifiée ou à la demande dans SQL Server Management Studio ou le moniteur de réplication), les conflits sont résolus automatiquement sans intervention de l'utilisateur, en utilisant l'outil de résolution des conflits par défaut spécifié pour l'article.</span><span class="sxs-lookup"><span data-stu-id="20a60-147">If a synchronization is performed outside of Windows Synchronization Manager (as a scheduled synchronization or an on demand synchronization in SQL Server Management Studio or Replication Monitor), conflicts are resolved automatically without user intervention, using the default conflict resolution specified for the article.</span></span> <span data-ttu-id="20a60-148">Pour plus d’informations, consultez [Interactive Conflict Resolution](../merge/advanced-merge-replication-conflict-interactive-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-148">For more information, see [Interactive Conflict Resolution](../merge/advanced-merge-replication-conflict-interactive-resolution.md).</span></span>  
  
###  <a name="using-sql-server-management-studio"></a><span data-ttu-id="20a60-149">Utilisation de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="20a60-149">Using SQL Server Management Studio</span></span>  
  
#### <a name="enable-interactive-conflict-resolution-for-an-article"></a><span data-ttu-id="20a60-150">Activer la résolution de conflits interactive pour un article</span><span class="sxs-lookup"><span data-stu-id="20a60-150">Enable interactive conflict resolution for an article</span></span>  
  
1.  <span data-ttu-id="20a60-151">Dans la page **Articles** de l’Assistant Nouvelle publication ou la boîte de dialogue **Propriétés de la publication - \<Publication>** , sélectionnez une table.</span><span class="sxs-lookup"><span data-stu-id="20a60-151">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table.</span></span> <span data-ttu-id="20a60-152">Pour plus d’informations sur l’utilisation de l’Assistant et sur l’accès à la boîte de dialogue, consultez [Créer une publication](create-a-publication.md) et [Afficher et modifier les propriétés d’une publication](view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-152">For more information about using the wizard and accessing the dialog box, see [Create a Publication](create-a-publication.md) and [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>    
2.  <span data-ttu-id="20a60-153">Cliquez sur **Propriétés de l'article**, puis cliquez sur **Définir les propriétés de l'article de Table en surbrillance** ou sur **Définir les propriétés de tous les articles de table**.</span><span class="sxs-lookup"><span data-stu-id="20a60-153">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article** or **Set Properties of All Table Articles**.</span></span>    
3.  <span data-ttu-id="20a60-154">Dans la page **Propriétés de l’article - \<Article>** ou **Propriétés de l’article - \<ArticleType>** , cliquez sur l’onglet **Résolveur**.</span><span class="sxs-lookup"><span data-stu-id="20a60-154">On the **Article Properties - \<Article>** or **Article Properties - \<ArticleType>** page, click the **Resolver** tab.</span></span>    
4.  <span data-ttu-id="20a60-155">Sélectionnez **Autoriser l'abonné à résoudre les conflits de manière interactive au cours de la synchronisation à la demande**.</span><span class="sxs-lookup"><span data-stu-id="20a60-155">Select **Allow Subscriber to resolve conflicts interactively during on-demand synchronization**.</span></span>    
5.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]    
6.  <span data-ttu-id="20a60-156">Si vous êtes dans la boîte de dialogue **Propriétés de la publication - \<Publication>** , cliquez sur **OK** pour enregistrer et fermer la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="20a60-156">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
#### <a name="to-specify-that-a-subscription-should-use-interactive-conflict-resolution"></a><span data-ttu-id="20a60-157">Pour spécifier qu'un abonnement doit utiliser la résolution de conflits interactive</span><span class="sxs-lookup"><span data-stu-id="20a60-157">To specify that a subscription should use interactive conflict resolution</span></span>  
  
1.  <span data-ttu-id="20a60-158">Dans la boîte de dialogue **Propriétés de l’abonnement - \<Subscriber> : \<SubscriptionDatabase>** , spécifiez la valeur **True** pour l’option **Résoudre les conflits interactivement**.</span><span class="sxs-lookup"><span data-stu-id="20a60-158">In the **Subscription Properties - \<Subscriber>: \<SubscriptionDatabase>** dialog box, specify a value of **True** for the **Resolve conflicts interactively** option.</span></span> <span data-ttu-id="20a60-159">Pour plus d'informations sur l'accès à cette boîte de dialogue, consultez [View and Modify Push Subscription Properties](../view-and-modify-push-subscription-properties.md) et [View and Modify Pull Subscription Properties](../view-and-modify-pull-subscription-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-159">For more information about accessing this dialog box, see [View and Modify Push Subscription Properties](../view-and-modify-push-subscription-properties.md) and [View and Modify Pull Subscription Properties](../view-and-modify-pull-subscription-properties.md).</span></span> 
2.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
### <a name="using-transact-sql"></a><span data-ttu-id="20a60-160">Utilisation de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="20a60-160">Using Transact-SQL</span></span>  
 <span data-ttu-id="20a60-161">Vous pouvez spécifier par programme qu'un Abonné utilisera cette interface graphique pour résoudre les conflits dans les articles lorsqu'un abonnement par extraction à une publication de fusion est créé.</span><span class="sxs-lookup"><span data-stu-id="20a60-161">You can programmatically specify that a Subscriber will use this graphical interface to resolve article conflicts when a pull subscription to a merge publication is created.</span></span> <span data-ttu-id="20a60-162">Seuls les conflits dans les articles qui prennent en charge cette option seront affichés dans le programme de résolution interactif.</span><span class="sxs-lookup"><span data-stu-id="20a60-162">Only conflicts in articles that support this option will be displayed in the Interactive Resolver.</span></span>  
  
#### <a name="create-a-merge-pull-subscription-that-uses-the-interactive-resolver"></a><span data-ttu-id="20a60-163">Créer un abonnement de fusion par extraction qui utilise l’outil de résolution interactif</span><span class="sxs-lookup"><span data-stu-id="20a60-163">Create a merge pull subscription that uses the Interactive Resolver</span></span>  
  
1.  <span data-ttu-id="20a60-164">Dans la base de données de publication sur le serveur de publication, exécutez [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergepublication-transact-sql), en spécifiant \*\* \@ publication\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-164">At the Publisher on the publication database, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergepublication-transact-sql), specifying **\@publication**.</span></span> <span data-ttu-id="20a60-165">Notez la valeur de **allow_interactive_resolver** pour chaque article du jeu de résultats pour lequel le programme de résolution interactif sera utilisé.</span><span class="sxs-lookup"><span data-stu-id="20a60-165">Note the value of **allow_interactive_resolver** for each article in the result set for which the Interactive Resolver will be used.</span></span>    
    -   <span data-ttu-id="20a60-166">Si cette valeur est **1**, le programme de résolution interactif sera utilisé.</span><span class="sxs-lookup"><span data-stu-id="20a60-166">If this value is **1**, the Interactive Resolver will be used.</span></span>    
    -   <span data-ttu-id="20a60-167">Si cette valeur est **0**, vous devez tout d'abord activer le programme de résolution interactif pour chaque article.</span><span class="sxs-lookup"><span data-stu-id="20a60-167">If this value is **0**, you must first enable the Interactive Resolver for each article.</span></span> <span data-ttu-id="20a60-168">Pour ce faire, exécutez [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), en spécifiant \*\* \@ publication**, \*\* \@ article**, la valeur **allow_interactive_resolver** pour \*\* \@ propriété**et la valeur **true** pour \*\* \@ valeur**.</span><span class="sxs-lookup"><span data-stu-id="20a60-168">To do this, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql), specifying **\@publication**, **\@article**, a value of **allow_interactive_resolver** for **\@property**, and a value of **true** for **\@value**.</span></span>    
2.  <span data-ttu-id="20a60-169">Dans la base de données d'abonnement de l'Abonné, exécutez [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-169">At the Subscriber on the subscription database, execute [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="20a60-170">Pour plus d’informations, consultez [Créer un abonnement par extraction de données (pull)](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-170">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>    
3.  <span data-ttu-id="20a60-171">Dans la base de données d'abonnement de l'Abonné, exécutez [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql), en spécifiant les paramètres suivants :</span><span class="sxs-lookup"><span data-stu-id="20a60-171">At the Subscriber on the subscription database, execute [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql), specifying the following parameters:</span></span>  
  
    -   <span data-ttu-id="20a60-172">\*\* \@ éditeur**, \*\* \@ publisher_db** (la base de données publiée) et \*\* \@ publication\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-172">**\@publisher**, **\@publisher_db** (the published database), and **\@publication**.</span></span>    
    -   <span data-ttu-id="20a60-173">Valeur **true** pour \*\* \@ enabled_for_syncmgr\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-173">A value of **true** for **\@enabled_for_syncmgr**.</span></span>    
    -   <span data-ttu-id="20a60-174">Valeur **true** pour \*\* \@ use_interactive_resolver\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-174">A value of **true** for **\@use_interactive_resolver**.</span></span>    
    -   <span data-ttu-id="20a60-175">Les informations de compte de sécurité requises par l'Agent de fusion.</span><span class="sxs-lookup"><span data-stu-id="20a60-175">The security account information required by the Merge Agent.</span></span> <span data-ttu-id="20a60-176">Pour plus d’informations, consultez [Créer un abonnement par extraction de données (pull)](../create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-176">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>    
4.  <span data-ttu-id="20a60-177">Dans la base de données de publication sur le serveur de publication, exécutez [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-177">At the Publisher on the publication database, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span>  
  
#### <a name="define-an-article-that-supports-the-interactive-resolver"></a><span data-ttu-id="20a60-178">Définir un article qui prend en charge l’outil de résolution interactif</span><span class="sxs-lookup"><span data-stu-id="20a60-178">Define an article that supports the Interactive Resolver</span></span>  
  
<span data-ttu-id="20a60-179">Dans la base de données de publication sur le serveur de publication, exécutez [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-179">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-180">Spécifiez le nom de la publication à laquelle l’article appartient pour la \*\* \@ publication**, le nom de l' \*\* \@ article pour l’article, l'** objet de base de données qui est publié pour \*\* \@ source_object**et la valeur **true** pour \*\* \@ allow_interactive_resolver**.</span><span class="sxs-lookup"><span data-stu-id="20a60-180">Specify the name of the publication to which the article belongs for **\@publication**, a name for the article for **\@article**, the database object being published for **\@source_object**, and a value of **true** for **\@allow_interactive_resolver**.</span></span> <span data-ttu-id="20a60-181">Pour plus d’informations, consultez [définir un Article](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-181">For more information, see [Define an Article](define-an-article.md).</span></span>  

## <a name="specify-the-conflict-tracking-and-resolution-level"></a><span data-ttu-id="20a60-182">Spécifier le niveau de suivi et de résolution des conflits</span><span class="sxs-lookup"><span data-stu-id="20a60-182">Specify the Conflict Tracking and Resolution Level</span></span> 
<span data-ttu-id="20a60-183">Lorsqu'un abonnement à une publication de fusion est synchronisé, la réplication vérifie la présence de conflits faisant suite à de la modification des mêmes données au niveau du serveur de publication et de l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="20a60-183">When a subscription to a merge publication is synchronized, replication checks for conflicts caused by changes to the same data made at both the Publisher and the Subscriber.</span></span> <span data-ttu-id="20a60-184">Vous pouvez spécifier si les conflits sont détectés au niveau de la ligne, auquel cas toute modification apportée à la ligne est considérée comme un conflit, ou au niveau de la colonne, auquel cas seules les modifications apportées aux mêmes ligne et colonne sont considérées comme un conflit.</span><span class="sxs-lookup"><span data-stu-id="20a60-184">You can specify whether conflicts are detected at the row-level, where any change to the row is considered a conflict, or column-level, where only changes to the same row and column are considered a conflict.</span></span> <span data-ttu-id="20a60-185">La résolution des conflits pour les articles est réalisée au niveau de la ligne.</span><span class="sxs-lookup"><span data-stu-id="20a60-185">Conflict resolution for articles is performed at the row-level.</span></span> <span data-ttu-id="20a60-186">Pour plus d'informations sur la détection et la résolution des conflits avec des enregistrements logiques, consultez [Detecting and Resolving Conflicts in Logical Records](../merge/advanced-merge-replication-conflict-resolving-in-logical-record.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-186">For more information about conflict detection and resolution when logical records are used, see [Detecting and Resolving Conflicts in Logical Records](../merge/advanced-merge-replication-conflict-resolving-in-logical-record.md).</span></span>  
  

  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="20a60-187">Limitations et restrictions</span><span class="sxs-lookup"><span data-stu-id="20a60-187">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="20a60-188">Si vous modifiez le niveau de suivi une fois les abonnements initialisés, ces derniers doivent être réinitialisés.</span><span class="sxs-lookup"><span data-stu-id="20a60-188">If you modify the tracking level after subscriptions have been initialized, those subscriptions must be reinitialized.</span></span> <span data-ttu-id="20a60-189">Pour plus d’informations sur les effets des modifications de propriétés, consultez [Changer des propriétés de publication et d’article](../publish/change-publication-and-article-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-189">For more information about the effects of property changes, see [Change Publication and Article Properties](../publish/change-publication-and-article-properties.md).</span></span>    
-   <span data-ttu-id="20a60-190">Avec le suivi au niveau des lignes et des colonnes, la résolution des conflits est toujours effectuée au niveau des lignes : la ligne gagnante remplace la ligne perdante.</span><span class="sxs-lookup"><span data-stu-id="20a60-190">With row- and column-level tracking, conflict resolution is always performed at the row-level: the winning row overwrites the losing row.</span></span> <span data-ttu-id="20a60-191">La réplication de fusion vous permet également de spécifier que les conflits sont suivis et résolus au niveau des enregistrements logiques, mais ces options ne sont pas disponibles à partir de [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span><span class="sxs-lookup"><span data-stu-id="20a60-191">Merge replication also allows you to specify that conflicts be tracked and resolved at the logical record level, but these options are not available from [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="20a60-192">Pour plus d'informations sur la définition de ces options à partir des procédures stockées de réplication, consultez [Définir une relation d’enregistrement logique entre des articles de table de fusion](../publish/define-a-logical-record-relationship-between-merge-table-articles.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-192">For information about setting these options from replication stored procedures, see [Define a Logical Record Relationship Between Merge Table Articles](../publish/define-a-logical-record-relationship-between-merge-table-articles.md).</span></span>  
  
###  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="20a60-193">Utilisation de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="20a60-193">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="20a60-194">Spécifiez le suivi au niveau des lignes ou des colonnes pour les articles de fusion sous l’onglet **Propriétés** de la boîte de dialogue **Propriétés de l’article**, disponible dans l’Assistant Nouvelle publication et la boîte de dialogue **Propriétés de la publication - \<Publication>** .</span><span class="sxs-lookup"><span data-stu-id="20a60-194">Specify row- or column-level tracking for merge articles on the **Properties** tab of the **Article Properties** dialog box, which is available in the New Publication Wizard and the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="20a60-195">Pour plus d’informations sur l’utilisation de l’Assistant et sur l’accès à la boîte de dialogue, consultez [Créer une publication](create-a-publication.md) et [Afficher et modifier les propriétés d’une publication](../publish/view-and-modify-publication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-195">For more information about using the wizard and accessing the dialog box, see [Create a Publication](create-a-publication.md) and [View and Modify Publication Properties](../publish/view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="specify-row--or-column-level-tracking"></a><span data-ttu-id="20a60-196">Spécifier le suivi au niveau des lignes ou des colonnes</span><span class="sxs-lookup"><span data-stu-id="20a60-196">Specify row- or column-level tracking</span></span>  
  
1.  <span data-ttu-id="20a60-197">Dans la page **Articles** de l’Assistant Nouvelle publication ou la boîte de dialogue **Propriétés de la publication - \<Publication>** , sélectionnez une table.</span><span class="sxs-lookup"><span data-stu-id="20a60-197">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table.</span></span>    
2.  <span data-ttu-id="20a60-198">Cliquez sur **Propriétés de l'article**, puis cliquez sur **Définir les propriétés de l'article de Table en surbrillance** ou sur **Définir les propriétés de tous les articles de table**.</span><span class="sxs-lookup"><span data-stu-id="20a60-198">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article** or **Set Properties of All Table Articles**.</span></span>   
3.  <span data-ttu-id="20a60-199">Sous l’onglet **Propriétés** de la boîte de dialogue **Propriétés de l’article \<Article>** , sélectionnez l’une des valeurs suivantes pour la propriété **Niveau de suivi** : **Suivi au niveau des lignes** ou **Suivi au niveau des colonnes**.</span><span class="sxs-lookup"><span data-stu-id="20a60-199">On the **Properties** tab of the **Article Properties \<Article>** dialog box, select one of the following values for the **Tracking level** property: **Row-level tracking** or **Column-level tracking**.</span></span>    
4.  <span data-ttu-id="20a60-200">Si vous êtes dans la boîte de dialogue **Propriétés de la publication - \<Publication>** , cliquez sur **OK** pour enregistrer et fermer la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="20a60-200">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
###  <a name="using-transact-sql"></a><span data-ttu-id="20a60-201">Utilisation de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="20a60-201">Using Transact-SQL</span></span>  
  
#### <a name="specify-conflict-tracking-options-for-a-new-merge-article"></a><span data-ttu-id="20a60-202">Spécifier les options de suivi des conflits pour un nouvel article de fusion</span><span class="sxs-lookup"><span data-stu-id="20a60-202">Specify conflict tracking options for a new merge article</span></span>  
  
1.  <span data-ttu-id="20a60-203">Dans la base de données de publication sur le serveur de publication, exécutez [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) et spécifiez l’une des valeurs suivantes pour \*\* \@ column_tracking\*\*:</span><span class="sxs-lookup"><span data-stu-id="20a60-203">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) and specify one of the following values for **\@column_tracking**:</span></span>  
  
    -   <span data-ttu-id="20a60-204">**true** - utiliser le suivi au niveau des colonnes pour l'article.</span><span class="sxs-lookup"><span data-stu-id="20a60-204">**true** - Use column-level tracking for the article.</span></span>    
    -   <span data-ttu-id="20a60-205">**false** - utiliser le suivi au niveau des lignes, qui est la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="20a60-205">**false** - Use row-level tracking, which is the default.</span></span>  
  
#### <a name="change-conflict-tracking-options-for-a-merge-article"></a><span data-ttu-id="20a60-206">Changer les options de suivi des conflits pour un article de fusion</span><span class="sxs-lookup"><span data-stu-id="20a60-206">Change conflict tracking options for a merge article</span></span>  
  
1.  <span data-ttu-id="20a60-207">Pour déterminer les options de suivi des conflits pour un article de fusion, exécutez [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-207">To determine the conflict tracking options for a merge article, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-208">Notez la valeur de l'option **column_tracking** dans le jeu de résultats de l'article.</span><span class="sxs-lookup"><span data-stu-id="20a60-208">Note the value of the **column_tracking** option in the result set for the article.</span></span> <span data-ttu-id="20a60-209">La valeur **1** indique que le suivi au niveau des colonnes est utilisé, tandis que la valeur **0** indique que le suivi au niveau des lignes est utilisé.</span><span class="sxs-lookup"><span data-stu-id="20a60-209">A value of **1** means that column-level tracking is being used, and a value of **0** means that row-level tracking is being used.</span></span>    
2.  <span data-ttu-id="20a60-210">Dans la base de données de publication sur le serveur de publication, exécutez [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-210">At the Publisher on the publication database, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-211">Spécifiez la valeur **column_tracking** pour \*\* \@ propriété\*\* et l’une des valeurs suivantes pour \*\* \@ valeur\*\*:</span><span class="sxs-lookup"><span data-stu-id="20a60-211">Specify a value of **column_tracking** for **\@property** and one of the following values for **\@value**:</span></span>
    -   <span data-ttu-id="20a60-212">**true** - utiliser le suivi au niveau des colonnes pour l'article.</span><span class="sxs-lookup"><span data-stu-id="20a60-212">**true** - Use column-level tracking for the article.</span></span>
    -   <span data-ttu-id="20a60-213">**false** - utiliser le suivi au niveau des lignes, qui est la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="20a60-213">**false** - Use row-level tracking, which is the default.</span></span>  
  
     <span data-ttu-id="20a60-214">Spécifiez la valeur **1** pour \*\* \@ force_invalidate_snapshot\*\* et \*\* \@ force_reinit_subscription\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-214">Specify a value of **1** for both **\@force_invalidate_snapshot** and **\@force_reinit_subscription**.</span></span>  

## <a name="tracking-deletes"></a><span data-ttu-id="20a60-215">Suivi des suppressions</span><span class="sxs-lookup"><span data-stu-id="20a60-215">Tracking deletes</span></span>

> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
  
 <span data-ttu-id="20a60-216">Par défaut, la réplication de fusion synchronise les commandes DELETE entre le serveur de publication et l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="20a60-216">By default, merge replication synchronizes DELETE commands between the Publisher and Subscriber.</span></span> <span data-ttu-id="20a60-217">La réplication de fusion vous permet de conserver des lignes qui ont été supprimées de la publication dans la base de données d'abonnement, et vice versa.</span><span class="sxs-lookup"><span data-stu-id="20a60-217">Merge replication enables you to retain rows in the subscription database even when they have been deleted from the publication, and vice versa.</span></span> <span data-ttu-id="20a60-218">Vous pouvez spécifier par programme que les commandes DELETE doivent être ignorées lors de la création d'un article ou vous pouvez activer cette fonctionnalité ultérieurement à l'aide de procédures stockées de réplication.</span><span class="sxs-lookup"><span data-stu-id="20a60-218">You can programmatically specify that DELETE commands be ignored when creating a new article or you can enable this functionality at a later time using replication stored procedures.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="20a60-219">L'activation de cette fonctionnalité conduit à une non-convergence ; autrement dit, les données présentes au niveau de l'Abonné ne reflèteront pas correctement les données présentes au niveau du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="20a60-219">Enabling this functionality will result in non-convergence, which means that data present at the Subscriber will not accurately reflect data at the Publisher.</span></span> <span data-ttu-id="20a60-220">Vous devez implémenter votre propre mécanisme de manière à supprimer manuellement les lignes supprimées.</span><span class="sxs-lookup"><span data-stu-id="20a60-220">You must implement your own mechanism for manually removing deleted rows.</span></span>  
  
### <a name="specify-that-deletes-be-ignored-for-a-new-merge-article"></a><span data-ttu-id="20a60-221">Spécifier que les suppressions doivent être ignorées pour un nouvel article de fusion</span><span class="sxs-lookup"><span data-stu-id="20a60-221">Specify that deletes be ignored for a new merge article</span></span>  
  
1.  <span data-ttu-id="20a60-222">Dans la base de données de publication sur le serveur de publication, exécutez [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-222">At the Publisher on the publication database, execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-223">Spécifiez une valeur `false` pour \*\* \@ delete_tracking\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-223">Specify a value of `false` for **\@delete_tracking**.</span></span> <span data-ttu-id="20a60-224">Pour plus d’informations, consultez [définir un Article](../publish/define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-224">For more information, see [Define an Article](../publish/define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="20a60-225">Si la table source d'un article est déjà publiée dans une autre publication, la valeur de **delete_tracking** doit être la même pour les deux articles.</span><span class="sxs-lookup"><span data-stu-id="20a60-225">If the source table for an article is already published in another publication, the value of **delete_tracking** must be the same for both articles.</span></span>  
  
### <a name="specify-that-deletes-be-ignored-for-an-existing-merge-article"></a><span data-ttu-id="20a60-226">Spécifier que les suppressions doivent être ignorées pour un article de fusion existant</span><span class="sxs-lookup"><span data-stu-id="20a60-226">Specify that deletes be ignored for an existing merge article</span></span>  
  
1.  <span data-ttu-id="20a60-227">Pour déterminer si la compensation d’erreur est activée pour un article, exécutez [sp_helpmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) et notez la valeur de **delete_tracking** dans le jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="20a60-227">To determine if error compensation is enabled for an article, execute [sp_helpmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) and note the value of **delete_tracking** in the result set.</span></span> <span data-ttu-id="20a60-228">Si cette valeur est **0**, les suppressions sont déjà ignorées.</span><span class="sxs-lookup"><span data-stu-id="20a60-228">If this value is **0**, deletes are already being ignored.</span></span>    
2.  <span data-ttu-id="20a60-229">Si la valeur à l’étape 1 est **1**, exécutez [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) sur la base de données de publication au niveau du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="20a60-229">If the value from step 1 is **1**, execute [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="20a60-230">Spécifiez une valeur de **delete_tracking** pour \*\* \@ propriété**et une valeur `false` pour \*\* \@ valeur**.</span><span class="sxs-lookup"><span data-stu-id="20a60-230">Specify a value of **delete_tracking** for **\@property**, and a value of `false` for **\@value**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="20a60-231">Si la table source d'un article est déjà publiée dans une autre publication, la valeur de **delete_tracking** doit être la même pour les deux articles.</span><span class="sxs-lookup"><span data-stu-id="20a60-231">If the source table for an article is already published in another publication, the value of **delete_tracking** must be the same for both articles.</span></span>  
  
## <a name="processing-order"></a><span data-ttu-id="20a60-232">Ordre de traitement</span><span class="sxs-lookup"><span data-stu-id="20a60-232">Processing Order</span></span>
  <span data-ttu-id="20a60-233">La réplication de fusion vous permet de spécifier l'ordre dans lequel les articles sont traités par l'Agent de fusion pendant le processus de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="20a60-233">Merge replication enables you to specify the order in which articles are processed by the Merge Agent during the synchronization process.</span></span> <span data-ttu-id="20a60-234">Vous pouvez attribuer par programme un ordre à chaque article lors de la création de l'article à l'aide des procédures stockées de réplication.</span><span class="sxs-lookup"><span data-stu-id="20a60-234">You can assign an order to each article programmatically when creating an article using replication stored procedures.</span></span> <span data-ttu-id="20a60-235">Les articles sont traités à partir de la valeur la plus faible vers la valeur la plus élevée.</span><span class="sxs-lookup"><span data-stu-id="20a60-235">Articles are processed in order from lowest to highest value.</span></span> <span data-ttu-id="20a60-236">Si deux articles ont la même valeur, ils sont traités simultanément.</span><span class="sxs-lookup"><span data-stu-id="20a60-236">If two articles have the same value, they are processed concurrently.</span></span> <span data-ttu-id="20a60-237">Pour plus d’informations, consultez [Spécifier les propriétés de la réplication de fusion](../publish/specify-merge-replication-properties.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-237">For more information, see [Specify Merge Replication properties](../publish/specify-merge-replication-properties.md).</span></span>  

  <span data-ttu-id="20a60-238">À partir de [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] , il est possible de remplacer l’ordre de traitement par défaut des articles pour les publications de fusion.</span><span class="sxs-lookup"><span data-stu-id="20a60-238">Beginning with [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], it is possible to override the default order of article processing for merge publications.</span></span> <span data-ttu-id="20a60-239">Ceci est utile par exemple si vous définissez une intégrité référentielle via des déclencheurs et que ces déclencheurs doivent s'exécuter dans un certain ordre.</span><span class="sxs-lookup"><span data-stu-id="20a60-239">This is useful, for example, if you define referential integrity through triggers and those triggers must fire in a certain order.</span></span> 

### <a name="how-processing-order-is-determined"></a><span data-ttu-id="20a60-240">Détermination de l'ordre de traitement</span><span class="sxs-lookup"><span data-stu-id="20a60-240">How Processing Order is Determined</span></span>  
 <span data-ttu-id="20a60-241">Lors d'une synchronisation de fusion, les articles sont par défaut traités dans l'ordre requis par les dépendances entre les objets, et notamment les contraintes d'intégrité référentielle déclarative (DRI, Declarative Referential Integrity) définies sur les tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="20a60-241">During merge synchronization, articles are, by default, processed in the order required by the dependencies between objects, including the declarative referential integrity (DRI) constraints defined on the base tables.</span></span> <span data-ttu-id="20a60-242">Le traitement implique l'énumération des modifications apportées à une table, puis l'application de ces modifications.</span><span class="sxs-lookup"><span data-stu-id="20a60-242">Processing involves enumerating the changes to a table and then applying those changes.</span></span> <span data-ttu-id="20a60-243">Si aucune intégrité référentielle déclarative n'est présente mais que des filtres de jointure ou des enregistrements logiques existent entre les articles des tables, les articles sont traités dans l'ordre requis par les filtres et les enregistrements logiques.</span><span class="sxs-lookup"><span data-stu-id="20a60-243">If no DRI is present but join filters or logical records exist between table articles, the articles are processed in the order required by the filters and logical records.</span></span> <span data-ttu-id="20a60-244">Les articles non liés à d’autres articles via une intégrité référentielle déclarative, des filtres de jointure, des enregistrements logiques ou d’autres dépendances sont traités en fonction du surnom de l’article dans la table système [sysmergearticles &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/sysmergearticles-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-244">Articles not related to any other article through DRI, join filters, logical records, or other dependencies are processed according to the article nickname in the [sysmergearticles &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/sysmergearticles-transact-sql) system table.</span></span>  
  
 <span data-ttu-id="20a60-245">Supposons une publication qui contient les tables **SalesOrderHeader** et **SalesOrderDetail** avec une colonne clé primaire **SalesOrderID** pour la table **SalesOrderHeader** et une colonne clé étrangère **SalesOrderID** pour la table **SalesOrderDetail** .</span><span class="sxs-lookup"><span data-stu-id="20a60-245">Consider a publication that includes the tables **SalesOrderHeader** and **SalesOrderDetail** with a primary key column **SalesOrderID** in the **SalesOrderHeader** table and a corresponding foreign key column **SalesOrderID** in the **SalesOrderDetail** table.</span></span> <span data-ttu-id="20a60-246">Lors de la synchronisation, la réplication de fusion empêche les violations de clé étrangère en insérant toutes les nouvelles lignes dans **SalesOrderHeader** avant d'insérer les lignes associées dans **SalesOrderDetail**.</span><span class="sxs-lookup"><span data-stu-id="20a60-246">During synchronization, merge replication prevents foreign key violations by inserting any new rows in **SalesOrderHeader** before inserting associated rows in **SalesOrderDetail**.</span></span> <span data-ttu-id="20a60-247">De la même façon, les lignes sont supprimées dans **SalesOrderDetail** avant que la ligne associée soit supprimée dans **SalesOrderHeader**.</span><span class="sxs-lookup"><span data-stu-id="20a60-247">Similarly, rows are deleted from **SalesOrderDetail** before the associated row is deleted from **SalesOrderHeader**.</span></span>  
  
 <span data-ttu-id="20a60-248">Cependant, dans certaines applications, l'intégrité référentielle est appliquée via des déclencheurs de base de données ou bien au niveau de l'application, et non pas via une intégrité référentielle déclarative.</span><span class="sxs-lookup"><span data-stu-id="20a60-248">However, in some applications referential integrity is enforced through database triggers, or at the application level, rather than through DRI.</span></span> <span data-ttu-id="20a60-249">Étant donnée la publication décrite plus haut, à la place de l'intégrité référentielle déclarative, la table **SalesOrderDetail** pourrait avoir un déclencheur d'insertion qui vérifie que la ligne associée dans la table **SalesOrderHeader** existe avant d'autoriser une insertion.</span><span class="sxs-lookup"><span data-stu-id="20a60-249">Given the publication described above, instead of DRI, the **SalesOrderDetail** table could have an insert trigger that ensures the associated row in the **SalesOrderHeader** table exists before allowing an insert.</span></span> <span data-ttu-id="20a60-250">**SalesOrderHeader** pourrait avoir un déclencheur de suppression qui vérifie qu'il n' y a pas de ligne associée dans la table **SalesOrderDetail** avant d'autoriser une suppression.</span><span class="sxs-lookup"><span data-stu-id="20a60-250">**SalesOrderHeader** could have a delete trigger that ensures there are no associated rows in **SalesOrderDetail** before allowing a delete.</span></span> <span data-ttu-id="20a60-251">La réplication de fusion ne prend pas en compte les déclencheurs lors de la détermination de l'ordre de traitement des articles car elle ne peut pas déterminer ce que sera le résultat du déclencheur avant qu'il soit exécuté.</span><span class="sxs-lookup"><span data-stu-id="20a60-251">Merge replication does not take into account triggers when determining processing order of articles because it cannot determine what the result of the trigger will be until it has fired.</span></span> <span data-ttu-id="20a60-252">De la même façon, la réplication ne peut pas prendre en compte les contraintes définies au niveau de l'application.</span><span class="sxs-lookup"><span data-stu-id="20a60-252">Similarly, replication cannot take into account constraints defined at the application level.</span></span>  
  
 <span data-ttu-id="20a60-253">Quand l'intégrité référentielle est gérée via des déclencheurs ou au niveau de l'application, vous devez spécifier l'ordre dans lequel les articles doivent être traités.</span><span class="sxs-lookup"><span data-stu-id="20a60-253">When referential integrity is maintained through triggers or at the application level, you should specify the order in which the articles should be processed.</span></span> <span data-ttu-id="20a60-254">Dans l'exemple avec les déclencheurs, vous pouvez spécifier que la table **SalesOrderHeader** doit être traitée avant **SalesOrderDetail**, car l'ordre des articles est basé sur l'ordre d'insertion.</span><span class="sxs-lookup"><span data-stu-id="20a60-254">In the example with triggers, you would specify that the **SalesOrderHeader** table should be processed before **SalesOrderDetail**, because article ordering is based on insert order.</span></span> <span data-ttu-id="20a60-255">La réplication de fusion inverse automatiquement l'ordre pour les suppressions.</span><span class="sxs-lookup"><span data-stu-id="20a60-255">Merge replication will automatically reverse the order for deletes.</span></span> <span data-ttu-id="20a60-256">La réplication de fusion n'échoue pas s'il n'y a pas d'ordre pour les articles, car l'Agent de fusion continue à traiter les articles si une violation de contrainte se produit ; il essaye ensuite à nouveau toutes les opérations qui ont échoué, après le traitement des autres articles.</span><span class="sxs-lookup"><span data-stu-id="20a60-256">Merge replication will not fail without article ordering, because the Merge Agent continues to process articles if a constraint violation occurs; it then retries any operations that failed after other articles have been processed.</span></span> <span data-ttu-id="20a60-257">La spécification de l'ordre des articles évite simplement les nouveaux essais et le temps de traitement supplémentaire qui y est associé.</span><span class="sxs-lookup"><span data-stu-id="20a60-257">Specifying article order simply avoids retries and the additional processing associated with them.</span></span> <span data-ttu-id="20a60-258">Si vous spécifiez un ordre incorrect (par exemple un ordre tel que les enregistrements de détail soient traités avant les enregistrements d'en-tête), la réplication de fusion essaye à nouveau le traitement jusqu'à ce qu'il réussisse.</span><span class="sxs-lookup"><span data-stu-id="20a60-258">If you specify an incorrect order (for example, one that results in detail records being processed before header records), merge replication will retry processing until it succeeds.</span></span>  

### <a name="new-article"></a><span data-ttu-id="20a60-259">Nouvel article</span><span class="sxs-lookup"><span data-stu-id="20a60-259">New Article</span></span>
  
1.  <span data-ttu-id="20a60-260">Dans la base de données de publication sur le serveur de publication, exécutez [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-260">At the Publisher on the publication database, execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-261">Spécifiez une valeur entière qui représente l’ordre de traitement de l’article pour \*\* \@ processing_order\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-261">Specify an integer value that represents the processing order for the article for **\@processing_order**.</span></span> <span data-ttu-id="20a60-262">Pour plus d’informations, consultez [définir un Article](define-an-article.md).</span><span class="sxs-lookup"><span data-stu-id="20a60-262">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="20a60-263">Lorsque vous créez des articles ordonnés, vous devez laisser des intervalles entre les valeurs d'ordre des articles.</span><span class="sxs-lookup"><span data-stu-id="20a60-263">When creating ordered articles, you should leave gaps between the article order values.</span></span> <span data-ttu-id="20a60-264">Cela permet de définir facilement de nouvelles valeurs dans le futur.</span><span class="sxs-lookup"><span data-stu-id="20a60-264">This makes it easier to set new values in the future.</span></span> <span data-ttu-id="20a60-265">Par exemple, si vous avez trois articles pour lesquels vous devez spécifier un ordre de traitement fixe, définissez la valeur de \*\* \@ processing_order\*\* sur 10, 20 et 30 plutôt que 1, 2 et 3, respectivement.</span><span class="sxs-lookup"><span data-stu-id="20a60-265">For example, if you have three articles for which you need to specify a fixed processing order, set the value of **\@processing_order** to 10, 20, and 30 rather than 1, 2, and 3, respectively.</span></span>  
  
### <a name="existing-article"></a><span data-ttu-id="20a60-266">Article existant</span><span class="sxs-lookup"><span data-stu-id="20a60-266">Existing article</span></span>
  
1.  <span data-ttu-id="20a60-267">Pour déterminer l’ordre de traitement d’un article, exécutez [sp_helpmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) et notez la valeur de **processing_order** dans le jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="20a60-267">To determine processing order of an article, execute [sp_helpmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) and note the value of **processing_order** in the result set.</span></span>  
  
2.  <span data-ttu-id="20a60-268">Dans la base de données de publication sur le serveur de publication, exécutez [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="20a60-268">At the Publisher on the publication database, execute [sp_changemergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql).</span></span> <span data-ttu-id="20a60-269">Spécifiez une valeur de **processing_order** pour \*\* \@ propriété\*\* et une valeur entière qui représente l’ordre de traitement de la \*\* \@ valeur\*\*.</span><span class="sxs-lookup"><span data-stu-id="20a60-269">Specify a value of **processing_order** for **\@property** and an integer value that represents the processing order for **\@value**.</span></span>  



## <a name="see-also"></a><span data-ttu-id="20a60-270">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="20a60-270">See Also</span></span>  
 [<span data-ttu-id="20a60-271">Optimiser les performances de la réplication de fusion avec le suivi conditionnel des suppressions</span><span class="sxs-lookup"><span data-stu-id="20a60-271">Optimize Merge Replication Performance with Conditional Delete Tracking</span></span>](../merge/optimize-merge-replication-performance-with-conditional-delete-tracking.md)  
 <span data-ttu-id="20a60-272">[Détection et résolution des conflits dans les enregistrements logiques](../merge/advanced-merge-replication-conflict-resolving-in-logical-record.md) </span><span class="sxs-lookup"><span data-stu-id="20a60-272">[Detecting and Resolving Conflicts in Logical Records](../merge/advanced-merge-replication-conflict-resolving-in-logical-record.md) </span></span>  
 <span data-ttu-id="20a60-273">[Définir une relation d’enregistrement logique entre des articles de table de fusion](define-a-logical-record-relationship-between-merge-table-articles.md) </span><span class="sxs-lookup"><span data-stu-id="20a60-273">[Define a Logical Record Relationship Between Merge Table Articles](define-a-logical-record-relationship-between-merge-table-articles.md) </span></span>  
 <span data-ttu-id="20a60-274">[Détecter et résoudre les conflits de réplication de fusion](../merge/advanced-merge-replication-conflict-detection-and-resolution.md) </span><span class="sxs-lookup"><span data-stu-id="20a60-274">[Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md) </span></span>  
 <span data-ttu-id="20a60-275">[Optimiser les performances de la réplication de fusion avec les articles en téléchargement seul](../merge/optimize-merge-replication-performance-with-download-only-articles.md) </span><span class="sxs-lookup"><span data-stu-id="20a60-275">[Optimize Merge Replication Performance with Download-Only Articles](../merge/optimize-merge-replication-performance-with-download-only-articles.md) </span></span>  
 <span data-ttu-id="20a60-276">[Define an Article](define-an-article.md) </span><span class="sxs-lookup"><span data-stu-id="20a60-276">[Define an Article](define-an-article.md) </span></span>  
 [<span data-ttu-id="20a60-277">Afficher et modifier les propriétés d’un article</span><span class="sxs-lookup"><span data-stu-id="20a60-277">View and Modify Article Properties</span></span>](view-and-modify-article-properties.md)  