---
title: Initialiser manuellement un abonnement | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- manual subscription initialization [SQL Server replication]
- subscriptions [SQL Server replication], initializing
- initializing subscriptions [SQL Server replication], without snapshots
ms.assetid: 27a1bc38-e498-4fff-8082-04b52aa4b22c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 4eaeb50da9e4b71a08ec78614ae62ea33e3dc0d1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87601331"
---
# <a name="initialize-a-subscription-manually"></a><span data-ttu-id="01aa4-102">Initialiser manuellement un abonnement</span><span class="sxs-lookup"><span data-stu-id="01aa4-102">Initialize a Subscription Manually</span></span>
  <span data-ttu-id="01aa4-103">Cette rubrique explique comment initialiser manuellement un abonnement dans [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] à l'aide de [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] ou de [!INCLUDE[tsql](../../includes/tsql-md.md)].</span><span class="sxs-lookup"><span data-stu-id="01aa4-103">This topic describes how to initialize a subscription manually in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="01aa4-104">L'instantané initial est normalement utilisé pour initialiser un abonnement, mais les abonnements aux publications peuvent être initialisés sans utiliser d'instantané, à condition que le schéma et les données initiales soient déjà présents sur l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="01aa4-104">While the initial snapshot is normally used to initialize a subscription, subscriptions to publications can be initialized without using a snapshot, provided that the schema and initial data are already present at the subscriber.</span></span>  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="01aa4-105">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="01aa4-105">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="01aa4-106">Limitations et restrictions</span><span class="sxs-lookup"><span data-stu-id="01aa4-106">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="01aa4-107">S'il existe une activité sur une base de données publiée à l'aide de la réplication transactionnelle entre le moment où les données et le schéma sont copiés vers l'Abonné et le moment auquel l'abonnement est initialisé manuellement, les modifications résultant de cette activité peuvent ne pas être répliquées vers l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="01aa4-107">If there is activity on a database published using transactional replication between the time data and schema are copied to the Subscriber and the time at which the subscription is manually initialized, changes resulting from this activity might not be replicated to the Subscriber.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="01aa4-108">Utilisation de SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="01aa4-108">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="01aa4-109">Initialisez manuellement un abonnement à une publication en copiant le schéma (et généralement les données) dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-109">Initialize a subscription to a publication manually by copying the schema (and typically data) to the subscription database.</span></span> <span data-ttu-id="01aa4-110">Le schéma et les données doivent correspondre à la base de données de publication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-110">The schema and data should match the publication database.</span></span> <span data-ttu-id="01aa4-111">Précisez ensuite que l'abonnement ne nécessite pas de schéma et de données dans la page **Initialiser les abonnements** de l'Assistant Nouvel abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-111">Then specify that the subscription does not require schema and data on the **Initialize Subscriptions** page of the New Subscription Wizard.</span></span> <span data-ttu-id="01aa4-112">Pour plus d'informations sur l'accès à cet Assistant, consultez [Initialiser un abonnement transactionnel sans instantané](initialize-a-transactional-subscription-without-a-snapshot.md) et [Créer un abonnement par extraction de données (pull)](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-112">For more information about accessing this wizard, see [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md) and [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
 <span data-ttu-id="01aa4-113">Lors de la première synchronisation de l'abonnement, les objets et les métadonnées dont la réplication a besoin sont copiés dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-113">When you synchronize the subscription for the first time, the objects and metadata required by replication are copied to the subscription database.</span></span>  
  
#### <a name="to-initialize-a-subscription-to-a-publication-manually"></a><span data-ttu-id="01aa4-114">Pour initialiser manuellement un abonnement à une publication</span><span class="sxs-lookup"><span data-stu-id="01aa4-114">To initialize a subscription to a publication manually</span></span>  
  
1.  <span data-ttu-id="01aa4-115">Vérifiez que le schéma et les données sont copiés dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-115">Ensure that the schema and data are copied to the subscription database.</span></span>  
  
2.  <span data-ttu-id="01aa4-116">Désactivez la case à cocher **Initialiser** dans la page **Initialiser les abonnements** de l'Assistant Nouvel abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-116">Clear the **Initialize** check box on the **Initialize Subscriptions** page of the New Subscription Wizard.</span></span> <span data-ttu-id="01aa4-117">Procédez de même pour chaque abonnement nécessitant uniquement la copie des objets et des métadonnées de réplication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-117">Do this for each subscription that requires only replication objects and metadata to be copied.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="01aa4-118">Utilisation de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="01aa4-118">Using Transact-SQL</span></span>  
 <span data-ttu-id="01aa4-119">Les abonnements peuvent être initialisés manuellement à l'aide des procédures stockées de réplication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-119">Subscriptions can be initialized manually using replication stored procedures.</span></span>  
  
#### <a name="to-manually-initialize-a-pull-subscription-to-a-transactional-publication"></a><span data-ttu-id="01aa4-120">Pour initialiser manuellement un abonnement par extraction à une publication transactionnelle</span><span class="sxs-lookup"><span data-stu-id="01aa4-120">To manually initialize a pull subscription to a transactional publication</span></span>  
  
1.  <span data-ttu-id="01aa4-121">Assurez-vous que le schéma et les données existent dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-121">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="01aa4-122">Pour plus d’informations, consultez [Initialiser un abonnement transactionnel sans instantané](initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-122">For more information, see [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
2.  <span data-ttu-id="01aa4-123">Au niveau du serveur de publication sur la base de données de publication, exécutez [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-123">At the Publisher on the publication database, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="01aa4-124">Spécifiez **@publication** , **@subscriber** , le nom de la base de données sur l’abonné contenant les données publiées pour **@destination_db** , la valeur **pull** pour **@subscription_type** et la valeur **Replication support only** pour **@sync_type** .</span><span class="sxs-lookup"><span data-stu-id="01aa4-124">Specify **@publication**, **@subscriber**, the name of the database at the Subscriber containing the published data for **@destination_db**, a value of **pull** for **@subscription_type**, and a value of **replication support only** for **@sync_type**.</span></span> <span data-ttu-id="01aa4-125">Pour plus d’informations, consultez [Créer un abonnement par extraction de données (pull)](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-125">For more information, see [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
3.  <span data-ttu-id="01aa4-126">Sur l'Abonné, exécutez [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-126">At the Subscriber, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="01aa4-127">Pour les abonnements avec mise à jour, consultez [Créer un abonnement pouvant être mis à jour pour une publication transactionnelle](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-127">For updating subscriptions, see [Create an Updatable Subscription to a Transactional Publication](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span></span>  
  
4.  <span data-ttu-id="01aa4-128">Sur l'Abonné, exécutez [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-128">At the Subscriber, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="01aa4-129">Pour plus d’informations, consultez [Créer un abonnement par extraction de données (pull)](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-129">For more information, see [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
5.  <span data-ttu-id="01aa4-130">Démarrez l'Agent de distribution pour transférer des objets de réplication et télécharger les modifications les plus récentes à partir du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-130">Start the Distribution Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="01aa4-131">Pour plus d’informations, consultez [Synchroniser un abonnement par extraction (pull)](synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-131">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span>  
  
#### <a name="to-manually-initialize-a-push-subscription-to-a-transactional-publication"></a><span data-ttu-id="01aa4-132">Pour initialiser manuellement un abonnement par émission de données à une publication transactionnelle</span><span class="sxs-lookup"><span data-stu-id="01aa4-132">To manually initialize a push subscription to a transactional publication</span></span>  
  
1.  <span data-ttu-id="01aa4-133">Assurez-vous que le schéma et les données existent dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-133">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="01aa4-134">Pour plus d’informations, consultez [Initialiser un abonnement transactionnel sans instantané](initialize-a-transactional-subscription-without-a-snapshot.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-134">For more information, see [Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md).</span></span>  
  
2.  <span data-ttu-id="01aa4-135">Au niveau du serveur de publication sur la base de données de publication, exécutez [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-135">At the Publisher on the publication database, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql).</span></span> <span data-ttu-id="01aa4-136">Spécifiez le nom de la base de données sur l’abonné contenant les données publiées pour **@destination_db** , la valeur **Push** pour **@subscription_type** et la valeur de **réplication prise en charge uniquement** pour **@sync_type** .</span><span class="sxs-lookup"><span data-stu-id="01aa4-136">Specify the name of the database at the Subscriber containing the published data for **@destination_db**, a value of **push** for **@subscription_type**, and a value of **replication support only** for **@sync_type**.</span></span> <span data-ttu-id="01aa4-137">Pour les abonnements avec mise à jour, consultez [Créer un abonnement pouvant être mis à jour pour une publication transactionnelle](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-137">For updating subscriptions, see [Create an Updatable Subscription to a Transactional Publication](publish/create-an-updatable-subscription-to-a-transactional-publication.md).</span></span>  
  
3.  <span data-ttu-id="01aa4-138">Au niveau du serveur de publication sur la base de données de publication, exécutez [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-138">At the Publisher on the publication database, execute [sp_addpushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="01aa4-139">Pour plus d’informations, consultez [Créer un abonnement par émission (push)](create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-139">For more information, see [Create a Push Subscription](create-a-push-subscription.md).</span></span>  
  
4.  <span data-ttu-id="01aa4-140">Démarrez l'Agent de distribution pour transférer des objets de réplication et télécharger les modifications les plus récentes à partir du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-140">Start the Distribution Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="01aa4-141">Pour plus d’informations, consultez [Synchroniser un abonnement par émission (push)](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-141">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
#### <a name="to-manually-initialize-a-pull-subscription-to-a-merge-publication"></a><span data-ttu-id="01aa4-142">Pour initialiser manuellement un abonnement par extraction à une publication de fusion</span><span class="sxs-lookup"><span data-stu-id="01aa4-142">To manually initialize a pull subscription to a merge publication</span></span>  
  
1.  <span data-ttu-id="01aa4-143">Assurez-vous que le schéma et les données existent dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-143">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="01aa4-144">Pour cela, vous pouvez restaurer une sauvegarde de la base de données de publication sur l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="01aa4-144">This can be done by restoring a backup of the publication database at the Subscriber.</span></span>  
  
2.  <span data-ttu-id="01aa4-145">Sur le serveur de publication, exécutez [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-145">At the Publisher, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span> <span data-ttu-id="01aa4-146">Spécifiez **@publication** ,, **@subscriber** **@subscriber_db** et la valeur **pull** pour **@subscription_type** .</span><span class="sxs-lookup"><span data-stu-id="01aa4-146">Specify **@publication**, **@subscriber**, **@subscriber_db**, and a value of **pull** for **@subscription_type**.</span></span> <span data-ttu-id="01aa4-147">L'abonnement par extraction est inscrit.</span><span class="sxs-lookup"><span data-stu-id="01aa4-147">This registers the pull subscription.</span></span>  
  
3.  <span data-ttu-id="01aa4-148">Exécutez [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql)sur l'Abonné, sur la base de données contenant les données publiées.</span><span class="sxs-lookup"><span data-stu-id="01aa4-148">At the Subscriber on the database containing the published data, execute [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="01aa4-149">Spécifiez la valeur **none** pour **@sync_type**.</span><span class="sxs-lookup"><span data-stu-id="01aa4-149">Specify a value of **none** for **@sync_type**.</span></span>  
  
4.  <span data-ttu-id="01aa4-150">Sur l'Abonné, exécutez [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-150">At the Subscriber, execute [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="01aa4-151">Pour plus d’informations, consultez [Créer un abonnement par extraction de données (pull)](create-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-151">For more information, see [Create a Pull Subscription](create-a-pull-subscription.md).</span></span>  
  
5.  <span data-ttu-id="01aa4-152">Démarrez l'Agent de fusion pour transférer des objets de réplication et télécharger les modifications les plus récentes à partir du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-152">Start the Merge Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="01aa4-153">Pour plus d’informations, consultez [Synchroniser un abonnement par extraction (pull)](synchronize-a-pull-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-153">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span>  
  
#### <a name="to-manually-initialize-a-push-subscription-to-a-merge-publication"></a><span data-ttu-id="01aa4-154">Pour initialiser manuellement un abonnement par émission de données à une publication de fusion</span><span class="sxs-lookup"><span data-stu-id="01aa4-154">To manually initialize a push subscription to a merge publication</span></span>  
  
1.  <span data-ttu-id="01aa4-155">Assurez-vous que le schéma et les données existent dans la base de données d'abonnement.</span><span class="sxs-lookup"><span data-stu-id="01aa4-155">Ensure that the schema and data exist on the subscription database.</span></span> <span data-ttu-id="01aa4-156">Pour cela, vous pouvez restaurer une sauvegarde de la base de données de publication sur l'Abonné.</span><span class="sxs-lookup"><span data-stu-id="01aa4-156">This can be done by restoring a backup of the publication database at the Subscriber.</span></span>  
  
2.  <span data-ttu-id="01aa4-157">Dans la base de données de publication sur le serveur de publication, exécutez [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-157">At the Publisher on the publication database, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql).</span></span> <span data-ttu-id="01aa4-158">Spécifiez le nom de la base de données sur l’abonné contenant les données publiées pour **@subscriber_db** , la valeur **Push** pour **@subscription_type** et la valeur **None** pour **@sync_type** .</span><span class="sxs-lookup"><span data-stu-id="01aa4-158">Specify the name of the database at the Subscriber containing the published data for **@subscriber_db**, a value of **push** for **@subscription_type**, and a value of **none** for **@sync_type**.</span></span>  
  
3.  <span data-ttu-id="01aa4-159">Sur la base de données de publication du serveur de publication, exécutez [sp_addmergepushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="01aa4-159">At the Publisher on the publication database, execute [sp_addmergepushsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepushsubscription-agent-transact-sql).</span></span> <span data-ttu-id="01aa4-160">Pour plus d’informations, consultez [Créer un abonnement par émission (push)](create-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-160">For more information, see [Create a Push Subscription](create-a-push-subscription.md).</span></span>  
  
4.  <span data-ttu-id="01aa4-161">Démarrez l'Agent de fusion pour transférer des objets de réplication et télécharger les modifications les plus récentes à partir du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="01aa4-161">Start the Merge Agent to transfer replication objects and download the latest changes from the Publisher.</span></span> <span data-ttu-id="01aa4-162">Pour plus d’informations, consultez [Synchroniser un abonnement par émission (push)](synchronize-a-push-subscription.md).</span><span class="sxs-lookup"><span data-stu-id="01aa4-162">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="01aa4-163">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="01aa4-163">See Also</span></span>  
 <span data-ttu-id="01aa4-164">[Initialiser un abonnement transactionnel sans instantané](initialize-a-transactional-subscription-without-a-snapshot.md) </span><span class="sxs-lookup"><span data-stu-id="01aa4-164">[Initialize a Transactional Subscription Without a Snapshot](initialize-a-transactional-subscription-without-a-snapshot.md) </span></span>  
 <span data-ttu-id="01aa4-165">[Sauvegarder et restaurer des bases de données répliquées](administration/back-up-and-restore-replicated-databases.md) </span><span class="sxs-lookup"><span data-stu-id="01aa4-165">[Back Up and Restore Replicated Databases](administration/back-up-and-restore-replicated-databases.md) </span></span>  
 [<span data-ttu-id="01aa4-166">Bonnes pratiques en matière de sécurité de la réplication</span><span class="sxs-lookup"><span data-stu-id="01aa4-166">Replication Security Best Practices</span></span>](security/replication-security-best-practices.md)  
  
  
