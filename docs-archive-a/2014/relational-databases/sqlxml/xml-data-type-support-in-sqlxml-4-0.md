---
title: Prise en charge des types de données XML dans SQLXML 4,0 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- SQLXML, xml data type support
- xml data type [SQL Server], SQLXML
ms.assetid: 9a6f5ad8-4a8f-4de7-ac17-81d5ccf78459
author: rothja
ms.author: jroth
ms.openlocfilehash: 6a3b022bdbca23c2cfcdc89f01199a2135eb4bff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87613375"
---
# <a name="xml-data-type-support-in-sqlxml-40"></a><span data-ttu-id="90fbf-102">Prise en charge du type de données xml dans SQLXML 4.0</span><span class="sxs-lookup"><span data-stu-id="90fbf-102">xml Data Type Support in SQLXML 4.0</span></span>
  <span data-ttu-id="90fbf-103">À partir de [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] , [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] prend en charge les données typées XML à l’aide du `xml` type de données.</span><span class="sxs-lookup"><span data-stu-id="90fbf-103">Beginning with [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] supports XML typed data using the `xml` data type.</span></span> <span data-ttu-id="90fbf-104">Cette rubrique fournit des informations sur la façon dont SQLXML 4.0 reconnaît les instances du type de données `xml` et implémente leur prise en charge.</span><span class="sxs-lookup"><span data-stu-id="90fbf-104">This topic provides information about how SQLXML 4.0 recognizes instances of the `xml` data type and implements support for them.</span></span>  
  
## <a name="working-with-xml-data-types"></a><span data-ttu-id="90fbf-105">Utilisation des types de données xml</span><span class="sxs-lookup"><span data-stu-id="90fbf-105">Working with xml Data Types</span></span>  
 <span data-ttu-id="90fbf-106">Pour mieux comprendre l'utilisation des tables SQL qui implémentent des colonnes de type de données `xml`, les exemples suivants sont fournis :</span><span class="sxs-lookup"><span data-stu-id="90fbf-106">To understand more about how to work with SQL tables that implement `xml` data type columns, the following examples are provided:</span></span>  
  
|<span data-ttu-id="90fbf-107">Tâche</span><span class="sxs-lookup"><span data-stu-id="90fbf-107">Task</span></span>|<span data-ttu-id="90fbf-108">Exemple</span><span class="sxs-lookup"><span data-stu-id="90fbf-108">Example</span></span>|<span data-ttu-id="90fbf-109">Rubrique</span><span class="sxs-lookup"><span data-stu-id="90fbf-109">Topic</span></span>|  
|----------|-------------|-----------|  
|<span data-ttu-id="90fbf-110">Comment mapper et inclure une colonne `xml` dans une vue XML</span><span class="sxs-lookup"><span data-stu-id="90fbf-110">How to map and include an `xml` column in an XML view</span></span>|<span data-ttu-id="90fbf-111">« Mappage d'un élément XML à une colonne de type de données XML »</span><span class="sxs-lookup"><span data-stu-id="90fbf-111">"Mapping an XML element to an XML data type column"</span></span>|[<span data-ttu-id="90fbf-112">Mappage par défaut d’éléments et d’attributs XSD à des tables et des colonnes &#40;SQLXML 4,0&#41;</span><span class="sxs-lookup"><span data-stu-id="90fbf-112">Default Mapping of XSD Elements and Attributes to Tables and Columns &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-using/default-mapping-of-xsd-elements-and-attributes-to-tables-and-columns-sqlxml-4-0.md)|  
|<span data-ttu-id="90fbf-113">Comment insérer des données dans une colonne `xml` avec des codes de mise à jour (updategrams)</span><span class="sxs-lookup"><span data-stu-id="90fbf-113">How to insert data into an `xml` column with updategrams</span></span>|<span data-ttu-id="90fbf-114">« Insertion de données dans une colonne de type de données XML »</span><span class="sxs-lookup"><span data-stu-id="90fbf-114">"Inserting data into an XML data type column"</span></span>|[<span data-ttu-id="90fbf-115">Insertion de données à l’aide de XML codes &#40;SQLXML 4,0&#41;</span><span class="sxs-lookup"><span data-stu-id="90fbf-115">Inserting Data Using XML Updategrams &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/updategrams/inserting-data-using-xml-updategrams-sqlxml-4-0.md)|  
|<span data-ttu-id="90fbf-116">Chargement en masse de données XML dans une colonne `xml`</span><span class="sxs-lookup"><span data-stu-id="90fbf-116">Bulk loading XML data into an `xml` column</span></span>|<span data-ttu-id="90fbf-117">« Chargement en masse dans les colonnes de type de données xml »</span><span class="sxs-lookup"><span data-stu-id="90fbf-117">"Bulk loading in xml Data Type columns"</span></span>|[<span data-ttu-id="90fbf-118">Exemples de chargement en masse XML &#40;SQLXML 4,0&#41;</span><span class="sxs-lookup"><span data-stu-id="90fbf-118">XML Bulk Load Examples &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/bulk-load-xml/xml-bulk-load-examples-sqlxml-4-0.md)|  
  
## <a name="guidelines-and-limitations"></a><span data-ttu-id="90fbf-119">Instructions et limitations</span><span class="sxs-lookup"><span data-stu-id="90fbf-119">Guidelines and Limitations</span></span>  
  
-   <span data-ttu-id="90fbf-120">**\<xsd:any>** ne peut pas être mappé à une colonne contenant un `xml` type de données.</span><span class="sxs-lookup"><span data-stu-id="90fbf-120">**\<xsd:any>** cannot be mapped to a column including an `xml` data type.</span></span> <span data-ttu-id="90fbf-121">La prise en charge de ce scénario en SQLXML est fournie via l'annotation `sql:overflow-field`.</span><span class="sxs-lookup"><span data-stu-id="90fbf-121">Support in SQLXML for this scenario is provided through the `sql:overflow-field` annotation.</span></span> <span data-ttu-id="90fbf-122">Une autre solution consiste à mapper un champ de type de données `xml` en tant qu'élément de `xsd:anyType`.</span><span class="sxs-lookup"><span data-stu-id="90fbf-122">Another workaround is to map an `xml` data type field as an element of `xsd:anyType`.</span></span> <span data-ttu-id="90fbf-123">Cette solution est illustrée dans l'exemple de mappage d'un élément XML à une colonne de type de données XML, référencé dans le tableau ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="90fbf-123">This workaround is demonstrated in the "Mapping an XML element to an XML data type column" example referenced in the table above.</span></span>  
  
-   <span data-ttu-id="90fbf-124">L'interrogation par une requête XPath du contenu de colonnes de type de données `xml` n'est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="90fbf-124">XPath query into the contents of `xml` data type columns is not supported.</span></span>  
  
-   <span data-ttu-id="90fbf-125">L'utilisation d'une colonne de type de données `xml` dans les annotations où cela n'est pas pris en charge (par exemple `sql:relationship` et `sql:key-fields`) ni autorisé, provoque des erreurs [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] qui ne sont pas interceptées par les composants de couche intermédiaire implémentant SQLXML 4.0.</span><span class="sxs-lookup"><span data-stu-id="90fbf-125">Using an `xml` data type column in annotations where it is not supported (such as `sql:relationship` and `sql:key-fields`) or allowed will result in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] errors that will not be trapped by middle-tier components implementing SQLXML 4.0.</span></span> <span data-ttu-id="90fbf-126">Cela se produit, car SQLXML ne requiert pas d'informations de type SQL.</span><span class="sxs-lookup"><span data-stu-id="90fbf-126">This occurs because SQLXML does not require SQL type information.</span></span> <span data-ttu-id="90fbf-127">Ce comportement est semblable à celui de SQLXML pour les autres types de données, par exemple les types BLOB et binaires.</span><span class="sxs-lookup"><span data-stu-id="90fbf-127">This is similar to the behavior of SQLXML for other data types, such as BLOB and binary types.</span></span>  
  
-   <span data-ttu-id="90fbf-128">Le mappage de colonnes `xml` est pris en charge uniquement pour les schémas XSD.</span><span class="sxs-lookup"><span data-stu-id="90fbf-128">Mapping `xml` columns is supported only for XSD schemas.</span></span> <span data-ttu-id="90fbf-129">Les schémas XDR ne prennent pas en charge le mappage de colonnes `xml`.</span><span class="sxs-lookup"><span data-stu-id="90fbf-129">XDR schemas do not support mapping `xml` columns.</span></span>  
  
-   <span data-ttu-id="90fbf-130">SQLXML 4.0 s'appuie sur la prise en charge de l'analyse XML fournie dans [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="90fbf-130">SQLXML 4.0 relies upon the XML parsing support provided in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="90fbf-131">Une colonne `xml` peut être mappée en tant que colonne XML typée ou non typée.</span><span class="sxs-lookup"><span data-stu-id="90fbf-131">An `xml` column can be either mapped as typed XML or untyped XML.</span></span> <span data-ttu-id="90fbf-132">Dans les deux cas, SQLXML 4.0 ne valide pas le code XML d'entrée.</span><span class="sxs-lookup"><span data-stu-id="90fbf-132">In either case, SQLXML 4.0 does not validate the input XML.</span></span>  <span data-ttu-id="90fbf-133">Si le code XML d'entrée n'est pas valide ou s'il est incorrect, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] le signale à SQLXML et propage toutes les informations d'erreur pertinentes retournées par le serveur à l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="90fbf-133">If input XML is not valid or well-formed, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reports it to SQLXML, and propagates any relevant error information returned by the server to the user.</span></span>  
  
-   <span data-ttu-id="90fbf-134">SQLXML 4,0 s'appuie sur la prise en charge limitée des DTD a fourni dans [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="90fbf-134">SQLXML 4.0 relies upon the limited support for DTDs provided in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="90fbf-135">permet [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DTD interne dans les données de type de données d'`xml`, qui peuvent être utilisées pour fournir des valeurs par défaut et remplacer des références d'entité par leur contenu développé.</span><span class="sxs-lookup"><span data-stu-id="90fbf-135">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] allows for an internal DTD in `xml` data type data, which can be used to supply default values and to replace entity references with their expanded contents.</span></span> <span data-ttu-id="90fbf-136">SQLXML passe les données XML « en l'état » (y compris la DTD interne) au serveur.</span><span class="sxs-lookup"><span data-stu-id="90fbf-136">SQLXML passes the XML data "as is" (including the internal DTD) to the server.</span></span> <span data-ttu-id="90fbf-137">Vous pouvez convertir les DTD en documents XSD (XML Schema Documents) à l'aide d'outils tiers, puis charger les données avec des schémas XSD insérés dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="90fbf-137">You can convert DTDs to XML Schema (XSD) documents using third-party tools, and load the data with inline XSD schemas into the database.</span></span>  
  
-   <span data-ttu-id="90fbf-138">SQLXML 4,0 ne conserve pas les instructions de traitement de déclaration XML (par exemple,) en fonction du comportement de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="90fbf-138">SQLXML 4.0 does not preserve XML declaration processing instructions (for example, ) based on the behavior of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="90fbf-139">À la place, la déclaration XML est traitée comme une directive pour l'analyseur XML [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ; en outre, ses attributs (version, encoding et standalone) sont perdus une fois que les données ont été converties vers le type de données `xml`.</span><span class="sxs-lookup"><span data-stu-id="90fbf-139">Instead, the XML declaration is treated as a directive to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML parser, and its attributes (version, encoding, and standalone) are lost after data is converted to the `xml` data type.</span></span> <span data-ttu-id="90fbf-140">Les données XML sont stockées en interne au format UCS-2.</span><span class="sxs-lookup"><span data-stu-id="90fbf-140">The XML data is stored internally as UCS-2.</span></span> <span data-ttu-id="90fbf-141">Toutes les autres instructions de traitement dans l'instance XML sont conservées ; elles sont autorisées dans la colonne `xml` et peuvent être prises en charge par SQLXML.</span><span class="sxs-lookup"><span data-stu-id="90fbf-141">All other processing instructions in the XML instance are preserved; they are allowed in the `xml` column and can be supported by SQLXML.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="90fbf-142">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="90fbf-142">See Also</span></span>  
 [<span data-ttu-id="90fbf-143">Données XML &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="90fbf-143">XML Data &#40;SQL Server&#41;</span></span>](../xml/xml-data-sql-server.md)  
  
  
