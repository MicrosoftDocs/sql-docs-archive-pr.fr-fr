---
title: Sessions Événements étendus SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 05/26/2020
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xevents
ms.topic: conceptual
helpviewer_keywords:
- xe
- sessions
- extend events [SQL Server]
ms.assetid: c3c92544-351a-4bce-a06a-1f2a47e494e9
author: rothja
ms.author: jroth
ms.openlocfilehash: 3aab8c57a578ea60829514b575e168bc5a1dd8c7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87600904"
---
# <a name="sql-server-extended-events-sessions"></a><span data-ttu-id="bab9b-102">Sessions Événements étendus SQL Server</span><span class="sxs-lookup"><span data-stu-id="bab9b-102">SQL Server Extended Events Sessions</span></span>
  <span data-ttu-id="bab9b-103">Une session Événements étendus [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] est créée dans le processus [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] qui héberge le moteur des Événements étendus.</span><span class="sxs-lookup"><span data-stu-id="bab9b-103">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Extended Events session is created in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] process hosting the Extended Events engine.</span></span> <span data-ttu-id="bab9b-104">Les aspects suivants d'une session Événements étendus fournissent le contexte nécessaire pour comprendre l'infrastructure des Événements étendus et le processus global qui est en cours :</span><span class="sxs-lookup"><span data-stu-id="bab9b-104">The following aspects of an Extended Events session provide a context for understanding the Extended Events infrastructure and the general processing that takes place:</span></span>  
  
-   <span data-ttu-id="bab9b-105">États de la session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-105">Session states.</span></span> <span data-ttu-id="bab9b-106">Les différents états dans lesquels peut se trouver une session Événements étendus lorsque des instructions CREATE EVENT SESSION et ALTER EVENT SESSION sont exécutées.</span><span class="sxs-lookup"><span data-stu-id="bab9b-106">The different states that an Extended Events session is in when CREATE EVENT SESSION and ALTER EVENT SESSION statements are executed.</span></span>  
  
-   <span data-ttu-id="bab9b-107">Contenu et caractéristiques de la session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-107">Session content and characteristics.</span></span> <span data-ttu-id="bab9b-108">Le contenu d'une session Événements étendus, tel que les cibles et les événements, et comment ces objets sont liés dans une session ou entre des sessions.</span><span class="sxs-lookup"><span data-stu-id="bab9b-108">The content of an Extended Events session, such as targets and events, and how these objects are related in a session or between sessions.</span></span>  
  
## <a name="session-states"></a><span data-ttu-id="bab9b-109">États de la session</span><span class="sxs-lookup"><span data-stu-id="bab9b-109">Session States</span></span>  
 <span data-ttu-id="bab9b-110">L'illustration ci-dessous indique les divers états d'une session Événements étendus.</span><span class="sxs-lookup"><span data-stu-id="bab9b-110">The following illustration shows the various states of an Extended Events session.</span></span>  

<span data-ttu-id="bab9b-111">![État de session d'événements étendu](../../database-engine/media/xesessionstate.png "État de session d'événements étendu")</span><span class="sxs-lookup"><span data-stu-id="bab9b-111">![Extended event session state](../../database-engine/media/xesessionstate.png "Extended event session state")</span></span>

 <span data-ttu-id="bab9b-112">En vous référant à l'illustration précédente, notez que l'état de la session change au fur et à mesure que les commandes DDL sont exécutées pour une session d'événements.</span><span class="sxs-lookup"><span data-stu-id="bab9b-112">Referring to the preceding figure, note that session state changes as the different DDL commands are issued for an event session.</span></span> <span data-ttu-id="bab9b-113">Ces changements d'état sont décrits dans le tableau ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="bab9b-113">The following table describes these changes in state.</span></span>  
  
|<span data-ttu-id="bab9b-114">Nom de l'illustration</span><span class="sxs-lookup"><span data-stu-id="bab9b-114">Illustration label</span></span>|<span data-ttu-id="bab9b-115">Instruction DDL</span><span class="sxs-lookup"><span data-stu-id="bab9b-115">DDL statement</span></span>|<span data-ttu-id="bab9b-116">Description</span><span class="sxs-lookup"><span data-stu-id="bab9b-116">Description</span></span>|  
|------------------------|-------------------|-----------------|  
|<span data-ttu-id="bab9b-117">Créer</span><span class="sxs-lookup"><span data-stu-id="bab9b-117">Create</span></span>|<span data-ttu-id="bab9b-118">CREATE EVENT SESSION</span><span class="sxs-lookup"><span data-stu-id="bab9b-118">CREATE EVENT SESSION</span></span>|<span data-ttu-id="bab9b-119">Le processus hôte crée un objet de session contenant les métadonnées fournies par CREATE EVENT SESSION.</span><span class="sxs-lookup"><span data-stu-id="bab9b-119">The host process creates a session object that contains the metadata provided by CREATE EVENT SESSION.</span></span> <span data-ttu-id="bab9b-120">Le processus hôte valide la définition de session, valide le niveau d'autorisation utilisateur et stocke les métadonnées dans la base de données MASTER.</span><span class="sxs-lookup"><span data-stu-id="bab9b-120">The host process validates the session definition, validates the user permission level, and stores the metadata in the master database.</span></span> <span data-ttu-id="bab9b-121">À ce stade, la session n'est pas active.</span><span class="sxs-lookup"><span data-stu-id="bab9b-121">At this point the session is not active.</span></span>|  
|<span data-ttu-id="bab9b-122">Alter</span><span class="sxs-lookup"><span data-stu-id="bab9b-122">Alter</span></span>|<span data-ttu-id="bab9b-123">ALTER EVENT SESSION, STATE=START</span><span class="sxs-lookup"><span data-stu-id="bab9b-123">ALTER EVENT SESSION, STATE=START</span></span>|<span data-ttu-id="bab9b-124">Le processus hôte démarre la session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-124">The host process starts the session.</span></span> <span data-ttu-id="bab9b-125">Il lit les métadonnées stockées, valide la définition de session, vérifie le niveau d'autorisation utilisateur et crée la session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-125">The host process reads the stored metadata, validates the session definition, verifies the level of user permission level, and creates the session.</span></span> <span data-ttu-id="bab9b-126">Les objets de session, tels que les événements et les cibles, sont chargés et la gestion des événements est active.</span><span class="sxs-lookup"><span data-stu-id="bab9b-126">Session objects, such as events and targets, are loaded and event handling is active.</span></span>|  
|<span data-ttu-id="bab9b-127">Alter</span><span class="sxs-lookup"><span data-stu-id="bab9b-127">Alter</span></span>|<span data-ttu-id="bab9b-128">ALTER EVENT SESSION, STATE=STOP</span><span class="sxs-lookup"><span data-stu-id="bab9b-128">ALTER EVENT SESSION, STATE=STOP</span></span>|<span data-ttu-id="bab9b-129">Le processus hôte arrête la session active mais conserve les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="bab9b-129">The host process stops the active session but retains the metadata.</span></span>|  
|<span data-ttu-id="bab9b-130">Supprimer</span><span class="sxs-lookup"><span data-stu-id="bab9b-130">Drop</span></span>|<span data-ttu-id="bab9b-131">DROP EVENT SESSION</span><span class="sxs-lookup"><span data-stu-id="bab9b-131">DROP EVENT SESSION</span></span>|<span data-ttu-id="bab9b-132">Selon que la session est active ou non, l'instruction Drop (DROP SESSION) supprime les métadonnées et ferme la session active, ou supprime les métadonnées de la session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-132">Depending on whether or not the session is active, Drop (DROP SESSION) will delete the metadata and close the active session, or delete the session metadata.</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="bab9b-133">Les deux instructions ALTER EVENT SESSION et DROP EVENT SESSION peuvent être appliquées aux métadonnées ou à une session active et aux métadonnées.</span><span class="sxs-lookup"><span data-stu-id="bab9b-133">Both ALTER EVENT SESSION and DROP EVENT SESSION can be applied to the metadata or to an active session and the metadata.</span></span>  
  
## <a name="session-content-and-characteristics"></a><span data-ttu-id="bab9b-134">Contenu et caractéristiques de la session</span><span class="sxs-lookup"><span data-stu-id="bab9b-134">Session Content and Characteristics</span></span>  
 <span data-ttu-id="bab9b-135">Les sessions d'événements étendus sont soumises à des limites implicites dans la mesure où la configuration d'une session ne doit pas modifier la configuration d'une autre session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-135">Extended Event sessions have implied boundaries in that the configuration of one session does not change the configuration of another session.</span></span> <span data-ttu-id="bab9b-136">Toutefois, ces limites n'empêchent pas l'utilisation d'un événement ou d'une cible dans plusieurs sessions.</span><span class="sxs-lookup"><span data-stu-id="bab9b-136">However, these boundaries do not prevent an event or target from being used in more than one session.</span></span>  
  
 <span data-ttu-id="bab9b-137">La figure ci-dessous montre le contenu de la session et la relation entre packages et sessions.</span><span class="sxs-lookup"><span data-stu-id="bab9b-137">The following illustration shows session content and the relationship between packages and sessions.</span></span>  
  
 <span data-ttu-id="bab9b-138">![Coexistence et partage d'objets dans des sessions.](../../database-engine/media/xesessions.gif "Coexistence et partage d'objets dans des sessions.")</span><span class="sxs-lookup"><span data-stu-id="bab9b-138">![Object co-existance and sharing in sessions.](../../database-engine/media/xesessions.gif "Object co-existance and sharing in sessions.")</span></span>  
  
 <span data-ttu-id="bab9b-139">Faisant référence à l'illustration précédente, notez les points suivants :</span><span class="sxs-lookup"><span data-stu-id="bab9b-139">Referring to the preceding illustration, note that:</span></span>  
  
-   <span data-ttu-id="bab9b-140">Le mappage entre des objets de packages et des sessions est de type plusieurs-à-plusieurs, ce qui signifie qu'un objet peut apparaître dans plusieurs sessions et qu'une session peut contenir plusieurs objets.</span><span class="sxs-lookup"><span data-stu-id="bab9b-140">The mapping between package objects and sessions is many to many, which means that an object can appear in several sessions, and a session can contain several objects.</span></span>  
  
-   <span data-ttu-id="bab9b-141">Un même événement (Événement 1) ou une même cible (Cible 1) peuvent être activés dans plusieurs sessions.</span><span class="sxs-lookup"><span data-stu-id="bab9b-141">The same event (Event 1) or target (Target 1) can be enabled in more than one session.</span></span>  
  
 <span data-ttu-id="bab9b-142">Les sessions présentent les caractéristiques suivantes :</span><span class="sxs-lookup"><span data-stu-id="bab9b-142">Sessions have the following characteristics:</span></span>  
  
-   <span data-ttu-id="bab9b-143">Les actions et les prédicats sont liés aux événements session par session.</span><span class="sxs-lookup"><span data-stu-id="bab9b-143">Actions and predicates are bound to events on a per-session basis.</span></span> <span data-ttu-id="bab9b-144">Si l'événement Événement 1 dans la session Session A est lié à l'action Action 1 et au prédicat Prédicat Z, cela n'affecte en aucune façon la possibilité que l'événement Événement 1 dans la session Session B soit lié aux actions Action 2 et Action 3 sans prédicat.</span><span class="sxs-lookup"><span data-stu-id="bab9b-144">If you have Event 1 in Session A with Action 1 and Predicate Z, this will not in any way affect having Event 1 in Session B with Action 2 and Action 3 with no predicate.</span></span>  
  
-   <span data-ttu-id="bab9b-145">Les stratégies sont jointes aux sessions pour gérer la mise en mémoire tampon et la distribution, ainsi que le suivi de causalité.</span><span class="sxs-lookup"><span data-stu-id="bab9b-145">Policies are attached to sessions to handle buffering and dispatch, and causality tracking.</span></span>  
  
 <span data-ttu-id="bab9b-146">**Mise en mémoire tampon et distribution**</span><span class="sxs-lookup"><span data-stu-id="bab9b-146">**Buffering and dispatch**</span></span>  
  
 <span data-ttu-id="bab9b-147">La mise en mémoire tampon fait référence à la manière dont les données d'événement sont stockées au cours de l'exécution d'une session d'événements.</span><span class="sxs-lookup"><span data-stu-id="bab9b-147">Buffering refers to how event data is stored while an event session is running.</span></span>  <span data-ttu-id="bab9b-148">Les stratégies de mise en mémoire tampon spécifient la quantité de mémoire à utiliser pour les données d'événement et la stratégie de perte pour les événements.</span><span class="sxs-lookup"><span data-stu-id="bab9b-148">Buffering policies specify how much memory to use for event data, and the loss policy for the events.</span></span> <span data-ttu-id="bab9b-149">La distribution fait référence à la durée pendant laquelle des événements resteront dans les mémoires tampon avant d'être transmis aux cibles pour traitement.</span><span class="sxs-lookup"><span data-stu-id="bab9b-149">Dispatch refers to the amount of time events will stay in buffers before being served to targets for processing.</span></span>  
  
 <span data-ttu-id="bab9b-150">**Suivi de causalité**</span><span class="sxs-lookup"><span data-stu-id="bab9b-150">**Causality tracking**</span></span>  
  
 <span data-ttu-id="bab9b-151">Le suivi de causalité permet d'effectuer le suivi d'un travail sur plusieurs tâches.</span><span class="sxs-lookup"><span data-stu-id="bab9b-151">Causality tracking provides the ability to track work across multiple tasks.</span></span> <span data-ttu-id="bab9b-152">Lorsque le suivi de causalité est activé, chaque événement déclenché possède un ID d'activité unique sur le système.</span><span class="sxs-lookup"><span data-stu-id="bab9b-152">When causality tracking is enabled, each event fired has a unique activity ID across the system.</span></span> <span data-ttu-id="bab9b-153">L'ID d'activité est constitué d'une valeur GUID qui demeure constante sur tous les événements liés à une tâche et d'un numéro de séquence qui est incrémenté chaque fois qu'un événement est déclenché.</span><span class="sxs-lookup"><span data-stu-id="bab9b-153">The activity ID is a combination of a GUID value that remains constant across all events for a task, and a sequence number that is incremented each time an event is fired.</span></span> <span data-ttu-id="bab9b-154">Lorsqu'une tâche entraîne l'exécution d'une autre tâche pour un même travail, l'ID d'activité de la tâche parent est envoyé à la tâche enfant.</span><span class="sxs-lookup"><span data-stu-id="bab9b-154">When one task causes work to be done on another, the activity ID of the parent is sent to the child task.</span></span> <span data-ttu-id="bab9b-155">La tâche enfant fournit en sortie l’ID d’activité de la tâche parent la première fois qu’elle déclenche un événement.</span><span class="sxs-lookup"><span data-stu-id="bab9b-155">The child task outputs the parent's activity ID the first time it fires an event.</span></span>  
  
 <span data-ttu-id="bab9b-156">L'architecture des Événements étendus fournit un système flexible qui permet d'utiliser conjointement divers objets pour résoudre des problèmes spécifiques.</span><span class="sxs-lookup"><span data-stu-id="bab9b-156">The Extended Events architecture provides a flexible system that allows a variety of objects to be used together to solve specific problems.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bab9b-157">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="bab9b-157">See Also</span></span>  
 [<span data-ttu-id="bab9b-158">Événements étendus</span><span class="sxs-lookup"><span data-stu-id="bab9b-158">Extended Events</span></span>](extended-events.md)  
  
  
