---
title: Améliorer les performances des index de recherche en texte intégral | Microsoft Docs
ms.custom: ''
ms.date: 04/26/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- performance [SQL Server], full-text search
- full-text queries [SQL Server], performance
- crawls [full-text search]
- full-text indexes [SQL Server], performance
- full-text search [SQL Server], performance
- batches [SQL Server], full-text search
ms.assetid: ef39ef1f-f0b7-4582-8e9c-31d4bd0ad35d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 51b5913e9c3ce65faa5a1fddc5846cc7c94d149f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87702636"
---
# <a name="improve-the-performance-of-full-text-indexes"></a><span data-ttu-id="fa4a7-102">Améliorer les performances des index de recherche en texte intégral</span><span class="sxs-lookup"><span data-stu-id="fa4a7-102">Improve the Performance of Full-Text Indexes</span></span>
  <span data-ttu-id="fa4a7-103">Les performances de l'indexation de texte intégral et des requêtes de texte intégral sont influencées par les ressources matérielles telles que la mémoire, la vitesse du disque et de l'UC ainsi que l'architecture de l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-103">Performance for full-text indexing and full-text queries is influenced by hardware resources, such as memory, disk speed, CPU speed, and machine architecture.</span></span>  
  
##  <a name="common-causes-of-performance-issues"></a><a name="causes"></a><span data-ttu-id="fa4a7-104">Causes courantes des problèmes de performances</span><span class="sxs-lookup"><span data-stu-id="fa4a7-104">Common Causes of Performance Issues</span></span>  
 <span data-ttu-id="fa4a7-105">La cause principale d'une baisse des performances de l'indexation de texte intégral est les limites liées aux ressources matérielles :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-105">The main cause for reduced full-text indexing performance is hardware-resource limits:</span></span>  
  
-   <span data-ttu-id="fa4a7-106">Si l’utilisation de l’UC par le processus hôte de démon de filtre (fdhost.exe) ou le processus (sqlservr.exe) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] approche des 100 pour cent, le processeur est le goulet d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-106">If CPU usage by the filter daemon host process (fdhost.exe) or the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process (sqlservr.exe) is close to 100 percent, the CPU is the bottleneck.</span></span>  
  
-   <span data-ttu-id="fa4a7-107">Si la longueur moyenne de la file d'attente du disque est plus de deux fois supérieure au nombre de têtes de disque, le disque est engorgé.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-107">If the average disk-waiting queue length is more than two times the number of disk heads, there is a bottleneck on the disk.</span></span> <span data-ttu-id="fa4a7-108">La première solution consiste à créer des catalogues de texte intégral distincts des fichiers et des journaux de la base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fa4a7-108">The primary workaround is to create full-text catalogs that are separate from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files and logs.</span></span> <span data-ttu-id="fa4a7-109">Placez les journaux, les fichiers de base de données et les catalogues de texte intégral sur des disques distincts.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-109">Put the logs, database files, and full-text catalogs on separate disks.</span></span> <span data-ttu-id="fa4a7-110">L'achat de disques plus rapides et l'utilisation de RAID peuvent également contribuer à l'amélioration des performances d'indexation.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-110">Buying faster disks and using RAID can also help improve indexing performance.</span></span>  
  
-   <span data-ttu-id="fa4a7-111">En cas de manque de mémoire physique (limite de 3 Go), la mémoire est engorgée.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-111">If there is a shortage of physical memory (3-GB limit), memory might be the bottleneck.</span></span> <span data-ttu-id="fa4a7-112">Les limitations de mémoire physique sont possibles sur tous les systèmes, et sur les systèmes 32 bits, la pression de mémoire virtuelle peut ralentir l'indexation de texte intégral.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-112">Physical memory limitations are possible on all systems, and on 32-bit systems, virtual memory pressure can slow down full-text indexing.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="fa4a7-113">À partir de [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], le moteur d'indexation et de recherche en texte intégral peut utiliser la mémoire AWE parce que le moteur d'indexation et de recherche en texte intégral fait partie du sqlservr.exe.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-113">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the Full-Text Engine can use AWE memory because the Full-Text Engine is part of the sqlservr.exe.</span></span>  
  
 <span data-ttu-id="fa4a7-114">Si le système ne rencontre aucun goulet d'étranglement matériel, les performances d'indexation de la recherche en texte intégral dépendent essentiellement des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-114">If the system has no hardware bottlenecks, the indexing performance of full-text search mostly depends on the following:</span></span>  
  
-   <span data-ttu-id="fa4a7-115">Durée de création des traitements de texte intégral par [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fa4a7-115">How long it takes [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to create full-text batches.</span></span>  
  
-   <span data-ttu-id="fa4a7-116">Rapidité d'utilisation de ces traitements par le démon de filtre.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-116">How quickly the filter daemon can consume those batches.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fa4a7-117">Contrairement à un remplissage complet, le remplissage du suivi des modifications automatique, incrémentiel ou manuel n'a pas pour objectif de maximiser les ressources matérielles en vue d'obtenir une vitesse supérieure.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-117">Unlike full population, incremental, manual, and auto change tracking population are not designed to maximize hardware resources to achieve faster speed.</span></span> <span data-ttu-id="fa4a7-118">Par conséquent, ces suggestions de paramétrage peuvent ne pas améliorer les performances de l'indexation de texte intégral.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-118">Therefore, these tuning suggestions may not enhance performance for full-text indexing.</span></span>  
  
 <span data-ttu-id="fa4a7-119">À la fin d'une alimentation, une fusion finale est déclenchée ; les fragments d'index sont fusionnés entre eux dans un index de recherche en texte intégral.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-119">When a population has completed, a final merge process is triggered that merges the index fragments together into one master full-text index.</span></span> <span data-ttu-id="fa4a7-120">Il en résulte une amélioration des performances des requêtes dans la mesure où seul l'index principal doit être interrogé au lieu des fragments d'index ; par ailleurs, les statistiques de score sont plus appropriées pour un classement en fonction de la pertinence.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-120">This results in improved query performance since only the master index needs to be queried rather than a number of index fragments, and better scoring statistics may be used for relevance ranking.</span></span> <span data-ttu-id="fa4a7-121">Notez que la fusion principale peut nécessiter de nombreuses entrées/sorties, car de grandes quantités de données doivent être écrites et lues lors de la fusion des fragments d'index. Toutefois, cela ne bloque pas les requêtes entrantes.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-121">Note that the master merge can be I/O intensive, because large amounts of data must be written and read when index fragments are merged, though it does not block incoming queries.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="fa4a7-122">La fusion principale d'une grande quantité de données peut créer une transaction dont l'exécution est longue, ce qui retarde la troncation du journal des transactions pendant le point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-122">Master merging a large amount of data can create a long running transaction, delaying truncation of the transaction log during checkpoint.</span></span> <span data-ttu-id="fa4a7-123">Dans ce cas, en mode de récupération complète, la taille du journal des transactions peut s'accroître considérablement.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-123">In this case, under the full recovery model, the transaction log might grow significantly.</span></span> <span data-ttu-id="fa4a7-124">Avant de réorganiser un index de recherche en texte intégral de grande taille dans une base de données qui utilise le mode de récupération complète, il est fortement recommandé de vous assurer que votre journal des transactions contient un espace suffisant pour une transaction dont l'exécution est longue.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-124">As a best practice, before reorganizing a large full-text index in a database that uses the full recovery model, ensure that your transaction log contains sufficient space for a long-running transaction.</span></span> <span data-ttu-id="fa4a7-125">Pour plus d’informations, consultez [Gérer la taille du fichier journal des transactions](../logs/manage-the-size-of-the-transaction-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-125">For more information, see [Manage the Size of the Transaction Log File](../logs/manage-the-size-of-the-transaction-log-file.md).</span></span>  
  
  
  
##  <a name="tuning-the-performance-of-full-text-indexes"></a><a name="tuning"></a><span data-ttu-id="fa4a7-126">Réglage des performances des index de recherche en texte intégral</span><span class="sxs-lookup"><span data-stu-id="fa4a7-126">Tuning the Performance of Full-Text Indexes</span></span>  
 <span data-ttu-id="fa4a7-127">Pour optimiser les performances de vos index de recherche en texte intégral, appliquez les bonnes pratiques suivantes :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-127">To maximize the performance of your full-text indexes, implement the following best practices:</span></span>  
  
-   <span data-ttu-id="fa4a7-128">Pour utiliser tous les processeurs ou cœurs au maximum, définissez [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)« `max full-text crawl ranges` » sur le nombre de processeurs sur le système.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-128">To use all processors or cores to the maximum, set [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)'`max full-text crawl ranges`' to the number of CPUs on the system.</span></span> <span data-ttu-id="fa4a7-129">Pour plus d’informations sur cette option de configuration, consultez [Maximum de la plage de l’analyse de texte intégral (option de configuration de serveur)](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-129">For information about this configuration option, see [max full-text crawl range Server Configuration Option](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md).</span></span>  
  
-   <span data-ttu-id="fa4a7-130">Vérifiez si la table de base a un index cluster.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-130">Make sure that the base table has a clustered index.</span></span> <span data-ttu-id="fa4a7-131">Utilisez un type de données entier pour la première colonne de l'index cluster.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-131">Use an integer data type for the first column of the clustered index.</span></span> <span data-ttu-id="fa4a7-132">Évitez d'utiliser les GUID dans la première colonne de l'index cluster.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-132">Avoid using GUIDs in the first column of the clustered index.</span></span> <span data-ttu-id="fa4a7-133">Un remplissage multiplage sur un index cluster peut produire la vitesse de remplissage la plus élevée.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-133">A multi-range population on a clustered index can produce the highest population speed.</span></span> <span data-ttu-id="fa4a7-134">Nous recommandons que la colonne servant de clé de texte intégral corresponde à un type de données Integer.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-134">We recommend that the column serving as the full-text key be an integer data type.</span></span>  
  
-   <span data-ttu-id="fa4a7-135">Mettez à jour les statistiques de la table de base à l'aide de l'instruction [UPDATE STATISTICS](/sql/t-sql/statements/update-statistics-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="fa4a7-135">Update the statistics of the base table by using the [UPDATE STATISTICS](/sql/t-sql/statements/update-statistics-transact-sql) statement.</span></span> <span data-ttu-id="fa4a7-136">Le plus important est de mettre à jour les statistiques sur l'index cluster ou la clé de texte intégral pour un remplissage complet.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-136">More important, update the statistics on the clustered index or the full-text key for a full population.</span></span> <span data-ttu-id="fa4a7-137">De cette manière, un remplissage sur plusieurs plages peut générer les partitions adéquates sur la table.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-137">This helps a multi-range population to generate good partitions on the table.</span></span>  
  
-   <span data-ttu-id="fa4a7-138">Créez un index secondaire sur une colonne `timestamp` si vous souhaitez améliorer les performances de l'alimentation incrémentielle.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-138">Build a secondary index on a `timestamp` column if you want to improve the performance of incremental population.</span></span>  
  
-   <span data-ttu-id="fa4a7-139">Avant d'effectuer une alimentation complète sur un ordinateur multiprocesseur de grande capacité, nous vous recommandons de limiter temporairement la taille du pool de mémoires tampons en définissant la valeur `max server memory` de manière à laisser suffisamment de mémoire au processus fdhost.exe et au système d'exploitation.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-139">Before you perform a full population on a large multi-CPU computer, we recommend that you temporarily limit the size of the buffer pool by setting the `max server memory` value to leave enough memory for the fdhost.exe process and operating system use.</span></span> <span data-ttu-id="fa4a7-140">Pour plus d'informations, consultez « Estimation des besoins en mémoire du processus hôte de démon de filtre (fdhost.exe) », plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-140">For more information, see "Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)," later in this topic.</span></span>  
  
  
  
##  <a name="troubleshooting-the-performance-of-full-populations"></a><a name="full"></a><span data-ttu-id="fa4a7-141">Résolution des problèmes de performances des populations complètes</span><span class="sxs-lookup"><span data-stu-id="fa4a7-141">Troubleshooting the Performance of Full Populations</span></span>  
 <span data-ttu-id="fa4a7-142">Pour diagnostiquer les problèmes de performances, consultez les journaux d'analyse de texte intégral.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-142">To diagnose performance problems, look at the full-text crawl logs.</span></span> <span data-ttu-id="fa4a7-143">Pour plus d’informations sur les journaux d’analyse, consultez [Alimenter des index de recherche en texte intégral](../indexes/indexes.md).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-143">For information about crawl logs, see [Populate Full-Text Indexes](../indexes/indexes.md).</span></span>  
  
 <span data-ttu-id="fa4a7-144">Il est recommandé de suivre l'ordre de dépannage suivant si les performances des alimentations complètes ne sont pas satisfaisantes.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-144">It is recommended that the following order of troubleshooting be followed if the performance of full populations is not satisfactory.</span></span>  
  
### <a name="physical-memory-usage"></a><span data-ttu-id="fa4a7-145">Utilisation de la mémoire physique</span><span class="sxs-lookup"><span data-stu-id="fa4a7-145">Physical Memory Usage</span></span>  
 <span data-ttu-id="fa4a7-146">Durant une alimentation de texte intégral, fdhost.exe ou sqlservr.exe peuvent manquer partiellement ou complètement de mémoire.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-146">During a full-text population, it is possible for fdhost.exe or sqlservr.exe to run low on memory or to run out of memory.</span></span> <span data-ttu-id="fa4a7-147">Si le journal d'analyse de texte intégral indique que fdhost.exe est souvent redémarré ou que le code d'erreur 8007008 est retourné, cela signifie que l'un de ces processus manque de mémoire.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-147">If the full-text crawl log shows that fdhost.exe is being restarted often or that error code 8007008 is being returned it means one of these processes is running out of memory.</span></span> <span data-ttu-id="fa4a7-148">Si fdhost.exe produit des vidages, en particulier sur des ordinateurs multiprocesseurs de grande capacité, cela peut signifier qu'il manque de mémoire.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-148">If fdhost.exe is producing dumps, particularly on large, multi-CPU computers, it might be running out of memory.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="fa4a7-149">Pour plus d’informations sur les mémoires tampons utilisées par une analyse de texte intégral, consultez [sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-149">To obtain information about memory buffers used by a full-text crawl, see [sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql).</span></span>  
  
 <span data-ttu-id="fa4a7-150">Les causes possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-150">The possible causes are as follows:</span></span>  
  
-   <span data-ttu-id="fa4a7-151">Si la quantité de mémoire physique disponible pendant une alimentation complète est égale à zéro, le pool de mémoires tampons [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] consomme peut-être la plupart de la mémoire physique du système.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-151">If amount of physical memory that is available during a full population is zero, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool might be consuming most of the physical memory on the system.</span></span>  
  
     <span data-ttu-id="fa4a7-152">Le processus sqlservr.exe essaie de récupérer toute la mémoire disponible pour le pool de mémoires tampons, en fonction de la limite maximale de mémoire configurée pour le serveur.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-152">The sqlservr.exe process tries to grab all available memory for the buffer pool, up to the configured maximum server memory.</span></span> <span data-ttu-id="fa4a7-153">Si l'allocation de `max server memory` est trop importante, des insuffisances de mémoire et des échecs d'allocation de la mémoire partagée peuvent se produire pour le processus fdhost.exe.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-153">If the `max server memory` allocation is too large, out-of-memory conditions and failure to allocate shared memory can occur for the fdhost.exe process.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="fa4a7-154">Durant une alimentation de texte intégral sur un ordinateur multiprocesseur, il peut se produire un conflit de mémoire au niveau du pool de mémoires tampons pour fdhost.exe ou sqlservr.exe.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-154">During a full-text population on a multi-CPU computer, contention for the buffer pool memory can occur between fdhost.exe or sqlservr.exe.</span></span> <span data-ttu-id="fa4a7-155">Le manque de mémoire partagée qui en résulte provoque des nouvelles tentatives d'exécution de lots, des surexploitations de la mémoire et des vidages par le processus fdhost.exe.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-155">The resulting lack of shared memory causes batch retries, memory thrashing, and dumps by the fdhost.exe process.</span></span>  
  
     <span data-ttu-id="fa4a7-156">Vous pouvez résoudre ce problème en définissant de façon appropriée la valeur `max server memory` du pool de mémoires tampons [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fa4a7-156">You can solve this problem by setting the `max server memory` value of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] buffer pool appropriately.</span></span> <span data-ttu-id="fa4a7-157">Pour plus d'informations, consultez « Estimation des besoins en mémoire du processus hôte de démon de filtre (fdhost.exe) », plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-157">For more information, see "Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)," later in this topic.</span></span> <span data-ttu-id="fa4a7-158">La réduction de la taille de lot utilisée pour l'indexation de texte intégral peut également s'avérer utile.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-158">Reducing the batch size used for full-text indexing may also help.</span></span>  
  
-   <span data-ttu-id="fa4a7-159">Problème de pagination</span><span class="sxs-lookup"><span data-stu-id="fa4a7-159">A paging issue</span></span>  
  
     <span data-ttu-id="fa4a7-160">Si la taille du fichier d'échange est insuffisante, comme cela peut se produire sur un système qui dispose d'un petit fichier d'échange avec une croissance limitée, fdhost.exe ou sqlservr.exe risquent de manquer de mémoire.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-160">Insufficient page-file size, such as on a system that has a small page file with restricted growth, can also cause the fdhost.exe or sqlservr.exe to run out of memory.</span></span>  
  
     <span data-ttu-id="fa4a7-161">Si les journaux d'analyse n'indiquent pas de défaillances relatives à la mémoire, il est probable que les performances sont dégradées par une pagination excessive.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-161">If the crawl logs do not indicate any memory-related failures, it is likely that performance is slow due to excessive paging.</span></span>  
  
  
  
### <a name="estimating-the-memory-requirements-of-the-filter-daemon-host-process-fdhostexe"></a><span data-ttu-id="fa4a7-162">Estimation des besoins en mémoire du processus hôte de démon de filtre (fdhost.exe)</span><span class="sxs-lookup"><span data-stu-id="fa4a7-162">Estimating the Memory Requirements of the Filter Daemon Host Process (fdhost.exe)</span></span>  
 <span data-ttu-id="fa4a7-163">La quantité de mémoire requise par le processus fdhost.exe pour une alimentation dépend principalement du nombre de plages d'analyses de texte intégral utilisées, de la taille de la mémoire partagée entrante et du nombre maximal d'instances relatives à la mémoire partagée entrante.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-163">The amount of memory required by the fdhost.exe process for a population depends mainly on the number of full-text crawl ranges it uses, the size of inbound shared memory (ISM), and the maximum number of ISM instances.</span></span>  
  
 <span data-ttu-id="fa4a7-164">La quantité de mémoire consommée (en octets) par l'hôte de démon de filtre peut être estimée approximativement à l'aide de la formule suivante :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-164">The amount of memory (in bytes) consumed by the filter daemon host can be roughly estimated by using the following formula:</span></span>  
  
 <span data-ttu-id="fa4a7-165">*number_of_crawl_ranges* \` ism_size'*max_outstanding_isms* \* 2</span><span class="sxs-lookup"><span data-stu-id="fa4a7-165">*number_of_crawl_ranges* \`ism_size\`*max_outstanding_isms*\* 2</span></span>  
  
 <span data-ttu-id="fa4a7-166">Les valeurs par défaut des variables contenues dans la formule précédente sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-166">The default values of the variables in the preceding formula are as follows:</span></span>  
  
|<span data-ttu-id="fa4a7-167">**Variable**</span><span class="sxs-lookup"><span data-stu-id="fa4a7-167">**Variable**</span></span>|<span data-ttu-id="fa4a7-168">**Valeur par défaut**</span><span class="sxs-lookup"><span data-stu-id="fa4a7-168">**Default value**</span></span>|  
|------------------|-----------------------|  
|<span data-ttu-id="fa4a7-169">*number_of_crawl_ranges*</span><span class="sxs-lookup"><span data-stu-id="fa4a7-169">*number_of_crawl_ranges*</span></span>|<span data-ttu-id="fa4a7-170">Nombre de processeurs</span><span class="sxs-lookup"><span data-stu-id="fa4a7-170">The number of CPUs</span></span>|  
|<span data-ttu-id="fa4a7-171">*ism_size*</span><span class="sxs-lookup"><span data-stu-id="fa4a7-171">*ism_size*</span></span>|<span data-ttu-id="fa4a7-172">1 Mo pour les ordinateurs x86</span><span class="sxs-lookup"><span data-stu-id="fa4a7-172">1 MB for x86 computers</span></span><br /><br /> <span data-ttu-id="fa4a7-173">4 Mo, 8 Mo ou 16 Mo pour les ordinateurs x64, en fonction de la mémoire physique totale</span><span class="sxs-lookup"><span data-stu-id="fa4a7-173">4 MB, 8 MB, or 16MB for x64 computers, depending on the total physical memory</span></span>|  
|<span data-ttu-id="fa4a7-174">*max_outstanding_isms*</span><span class="sxs-lookup"><span data-stu-id="fa4a7-174">*max_outstanding_isms*</span></span>|<span data-ttu-id="fa4a7-175">25 pour les ordinateurs x86</span><span class="sxs-lookup"><span data-stu-id="fa4a7-175">25 for x86 computers</span></span><br /><br /> <span data-ttu-id="fa4a7-176">5 pour les ordinateurs x64</span><span class="sxs-lookup"><span data-stu-id="fa4a7-176">5 for x64 computers</span></span>|  
  
 <span data-ttu-id="fa4a7-177">Le tableau suivant présente des indications expliquant comment estimer les besoins en mémoire de fdhost.exe.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-177">The following table presents guidelines about how to estimate the memory requirements of fdhost.exe.</span></span> <span data-ttu-id="fa4a7-178">Les formules figurant dans ce tableau utilisent les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-178">The formulas in this table use the following values:</span></span>  
  
-   <span data-ttu-id="fa4a7-179">*F*, qui est une évaluation de la mémoire requise par fdhost.exe (en Mo).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-179">*F*, which is an estimate of memory needed by fdhost.exe (in MB).</span></span>  
  
-   <span data-ttu-id="fa4a7-180">*T*, qui est la mémoire physique totale disponible sur le système (en Mo).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-180">*T*, which is the total physical memory available on the system (in MB).</span></span>  
  
-   <span data-ttu-id="fa4a7-181">*M*, qui est le `max server memory` paramètre optimal.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-181">*M*, which is the optimal `max server memory` setting.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="fa4a7-182">Pour obtenir des informations essentielles sur les formules, voir <sup>1</sup>, <sup>2</sup>et <sup>3</sup>, ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-182">For essential information about the formulas, see <sup>1</sup>, <sup>2</sup>, and <sup>3</sup>, below.</span></span>  
  
|<span data-ttu-id="fa4a7-183">Plate-forme</span><span class="sxs-lookup"><span data-stu-id="fa4a7-183">Platform</span></span>|<span data-ttu-id="fa4a7-184">Estimation des besoins en mémoire fdhost.exe en Mo-*F*<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="fa4a7-184">Estimating fdhost.exe memory requirements in MB-*F*<sup>1</sup></span></span>|<span data-ttu-id="fa4a7-185">Formule pour le calcul de Max Server Memory-*M*<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="fa4a7-185">Formula for calculating max server memory-*M*<sup>2</sup></span></span>|  
|--------------|---------------------------------------------------------------------|---------------------------------------------------------------|  
|<span data-ttu-id="fa4a7-186">x86</span><span class="sxs-lookup"><span data-stu-id="fa4a7-186">x86</span></span>|<span data-ttu-id="fa4a7-187">_F_ **=** _Nombre de plages d’analyse_ **&#42;** 50</span><span class="sxs-lookup"><span data-stu-id="fa4a7-187">_F_ **=** _Number of crawl ranges_ **&#42;** 50</span></span>|<span data-ttu-id="fa4a7-188">_M_ **= minimum (** _T_ **,** 2000 \*\*)- *`F`* - \*\* 500</span><span class="sxs-lookup"><span data-stu-id="fa4a7-188">_M_ **=minimum(** _T_ **,** 2000 **)-*`F`*-** 500</span></span>|  
|<span data-ttu-id="fa4a7-189">x64</span><span class="sxs-lookup"><span data-stu-id="fa4a7-189">x64</span></span>|<span data-ttu-id="fa4a7-190">_F_ **=** _nombre de plages d’analyse_ **&#42;** 10 **&#42;** 8</span><span class="sxs-lookup"><span data-stu-id="fa4a7-190">_F_ **=** _Number of crawl ranges_ **&#42;** 10 **&#42;** 8</span></span>|<span data-ttu-id="fa4a7-191">_M_ **=** _T_ **-** _F_ **-** 500</span><span class="sxs-lookup"><span data-stu-id="fa4a7-191">_M_ **=** _T_ **-** _F_ **-** 500</span></span>|  
  
 <span data-ttu-id="fa4a7-192"><sup>1</sup> si plusieurs remplissages complets sont en cours, calculez les besoins en mémoire fdhost.exe de chacun séparément, par exemple *F1*, *F2*et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-192"><sup>1</sup> If multiple full populations are in progress, calculate the fdhost.exe memory requirements of each separately, as *F1*, *F2*, and so forth.</span></span> <span data-ttu-id="fa4a7-193">Ensuite, calculez *M* comme _T_ **-** sigma **(** _F_i **)** .</span><span class="sxs-lookup"><span data-stu-id="fa4a7-193">Then calculate *M* as _T_**-** sigma **(**_F_i **)**.</span></span>  
  
 <span data-ttu-id="fa4a7-194"><sup>2</sup> 500 Mo sont une estimation de la mémoire requise par d’autres processus dans le système.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-194"><sup>2</sup> 500 MB is an estimate of the memory required by other processes in the system.</span></span> <span data-ttu-id="fa4a7-195">Si le système effectue un travail supplémentaire, augmentez cette valeur en conséquence.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-195">If the system is doing additional work, increase this value accordingly.</span></span>  
  
 <span data-ttu-id="fa4a7-196"><sup>3</sup> . *ism_size* est supposé être de 8 Mo pour les plateformes x64.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-196"><sup>3</sup> .*ism_size* is assumed to be 8 MB for x64 platforms.</span></span>  
  
 <span data-ttu-id="fa4a7-197">**Exemple : estimation des besoins en mémoire de fdhost.exe**</span><span class="sxs-lookup"><span data-stu-id="fa4a7-197">**Example: Estimating the Memory Requirements of fdhost.exe**</span></span>  
  
 <span data-ttu-id="fa4a7-198">Cet exemple se rapporte à un ordinateur AMD64 avec 8 Go de mémoire vive (RAM) et 4 processeurs double cœur.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-198">This example is for an AMD64 computer that has 8GM of RAM and 4 dual core processors.</span></span> <span data-ttu-id="fa4a7-199">Les premières estimations de calcul de la mémoire requise par fdhost.exe : *F*.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-199">The first calculation estimates of memory needed by fdhost.exe-*F*.</span></span> <span data-ttu-id="fa4a7-200">Le nombre de plages d'analyse est `8`.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-200">The number of crawl ranges is `8`.</span></span>  
  
 `F = 8*10*8=640`  
  
 <span data-ttu-id="fa4a7-201">Le calcul suivant obtient la valeur optimale pour `max server memory` - *M*.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-201">The next calculation obtains the optimal value for `max server memory`-*M*.</span></span> <span data-ttu-id="fa4a7-202">*T*Le total de la mémoire physique disponible sur ce système en Mo-*t*-est `8192` .</span><span class="sxs-lookup"><span data-stu-id="fa4a7-202">*T*he total physical memory available on this system in MB-*T*-is `8192`.</span></span>  
  
 `M = 8192-640-500=7052`  
  
 <span data-ttu-id="fa4a7-203">**Exemple : configuration de la mémoire maximum du serveur**</span><span class="sxs-lookup"><span data-stu-id="fa4a7-203">**Example: Setting max server memory**</span></span>  
  
 <span data-ttu-id="fa4a7-204">Cet exemple utilise les instructions [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) et [reconfigure](/sql/t-sql/language-elements/reconfigure-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] pour définir `max server memory` sur la valeur calculée pour *M* dans l’exemple précédent, `7052` :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-204">This example uses the [sp_configure](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) and [RECONFIGURE](/sql/t-sql/language-elements/reconfigure-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statements to set `max server memory` to the value calculated for *M* in the preceding example, `7052`:</span></span>  
  
```  
USE master;  
GO  
EXEC sp_configure 'max server memory', 7052;  
GO  
RECONFIGURE;  
GO  
```  
  
 <span data-ttu-id="fa4a7-205">**Pour définir l'option de configuration max server memory**</span><span class="sxs-lookup"><span data-stu-id="fa4a7-205">**To set the max server memory configuration option**</span></span>  
  
-   [<span data-ttu-id="fa4a7-206">server memory (options de configuration de serveur)</span><span class="sxs-lookup"><span data-stu-id="fa4a7-206">Server Memory Server Configuration Options</span></span>](../../database-engine/configure-windows/server-memory-server-configuration-options.md)  
  
  
  
### <a name="factors-that-can-reduce-cpu-consumption"></a><span data-ttu-id="fa4a7-207">Facteurs pouvant réduire la consommation processeur</span><span class="sxs-lookup"><span data-stu-id="fa4a7-207">Factors that Can Reduce CPU Consumption</span></span>  
 <span data-ttu-id="fa4a7-208">Il faut s'attendre à ce que les performances des alimentations complètes ne soient pas optimales lorsque la consommation processeur moyenne est inférieure à environ 30 pour cent.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-208">We expect that the performance of full populations is not optimal when the average CPU consumption is lower than about 30 percent.</span></span> <span data-ttu-id="fa4a7-209">Cette section traite de quelques facteurs qui affectent la consommation processeur.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-209">This section discusses some factors that affect CPU consumption.</span></span>  
  
-   <span data-ttu-id="fa4a7-210">Temps d'attente élevé pour les pages</span><span class="sxs-lookup"><span data-stu-id="fa4a7-210">High wait for pages</span></span>  
  
     <span data-ttu-id="fa4a7-211">Pour savoir si un temps d'attente de page est élevé, exécutez l'instruction [!INCLUDE[tsql](../../../includes/tsql-md.md)] suivante :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-211">To find out whether a page wait time is high, execute the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>  
  
    ```  
    Execute SELECT TOP 10 * FROM sys.dm_os_wait_stats ORDER BY wait_time_ms DESC;  
    ```  
  
     <span data-ttu-id="fa4a7-212">Le tableau suivant décrit les types de temps d'attente présentant un intérêt ici.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-212">The following table describes the wait types of interest here.</span></span>  
  
    |<span data-ttu-id="fa4a7-213">Type d’attente</span><span class="sxs-lookup"><span data-stu-id="fa4a7-213">Wait type</span></span>|<span data-ttu-id="fa4a7-214">Description</span><span class="sxs-lookup"><span data-stu-id="fa4a7-214">Description</span></span>|<span data-ttu-id="fa4a7-215">Résolution possible</span><span class="sxs-lookup"><span data-stu-id="fa4a7-215">Possible resolution</span></span>|  
    |---------------|-----------------|-------------------------|  
    |<span data-ttu-id="fa4a7-216">PAGEIO_LATCH_SH (_EX ou _UP)</span><span class="sxs-lookup"><span data-stu-id="fa4a7-216">PAGEIO_LATCH_SH (_EX or _UP)</span></span>|<span data-ttu-id="fa4a7-217">Cela pourrait indiquer un goulet d'étranglement ES, auquel cas vous devriez généralement constater également une durée de file d'attente de disque moyenne élevée.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-217">This could indicate an IO bottleneck, in which case you would typically also see a high average disk-queue length.</span></span>|<span data-ttu-id="fa4a7-218">Le déplacement de l'index de recherche en texte intégral vers un groupe de fichiers différent sur un disque différent peut aider à réduire le goulet d'étranglement ES.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-218">Moving the full-text index to a different filegroup on a different disk could help reduce the IO bottleneck.</span></span>|  
    |<span data-ttu-id="fa4a7-219">PAGELATCH_EX (ou _UP)</span><span class="sxs-lookup"><span data-stu-id="fa4a7-219">PAGELATCH_EX (or _UP)</span></span>|<span data-ttu-id="fa4a7-220">Cela pourrait indiquer beaucoup de contention parmi les threads qui essaient d'écrire dans le même fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-220">This could indicate a lot of contention among threads that are trying to write to the same database file.</span></span>|<span data-ttu-id="fa4a7-221">L'ajout des fichiers au groupe de fichiers sur lequel l'index de texte intégral réside pourrait aider à alléger cette contention.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-221">Adding files to the filegroup on which the fulltext index resides could help alleviate such contention.</span></span>|  
  
     <span data-ttu-id="fa4a7-222">Pour plus d’informations, consultez [sys.dm_os_wait_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-wait-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-222">For more information, see [sys.dm_os_wait_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-wait-stats-transact-sql).</span></span>  
  
-   <span data-ttu-id="fa4a7-223">Inefficacités dans l'analyse de la table de base</span><span class="sxs-lookup"><span data-stu-id="fa4a7-223">Inefficiencies in scanning the base table</span></span>  
  
     <span data-ttu-id="fa4a7-224">Un remplissage complet analyse la table de base pour produire des lots.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-224">A full population scans the base table to produce batches.</span></span> <span data-ttu-id="fa4a7-225">Cette analyse de table peut être inefficace dans les scénarios suivantes :</span><span class="sxs-lookup"><span data-stu-id="fa4a7-225">This table scanning could be inefficient in the following scenarios:</span></span>  
  
    -   <span data-ttu-id="fa4a7-226">Si la table de base a un pourcentage élevé de colonnes hors ligne qui sont indexées de texte intégral, l'analyse de la table de base pour produire des lots peut être le goulet d'étranglement.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-226">If the base table has a high percentage of out-of-row columns that are being full-text indexed, scanning the base table to produce batches might be the bottleneck.</span></span> <span data-ttu-id="fa4a7-227">Dans ce cas, le déplacement des petites données dans la ligne à l'aide de `varchar(max)` ou `nvarchar(max)` peut améliorer la situation.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-227">In this case, moving the smaller data in-row using `varchar(max)` or `nvarchar(max)` might help.</span></span>  
  
    -   <span data-ttu-id="fa4a7-228">Si la table de base est très fragmentée, l'analyse peut être inefficace.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-228">If the base table is very fragmented, scanning might be inefficient.</span></span> <span data-ttu-id="fa4a7-229">Pour obtenir des informations sur le calcul des données hors ligne et de la fragmentation des index, consultez [sys.dm_db_partition_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-partition-stats-transact-sql) et [sys.dm_db_index_physical_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-229">For information about computing out-of-row data and index fragmentation, see [sys.dm_db_partition_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-partition-stats-transact-sql) and [sys.dm_db_index_physical_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql).</span></span>  
  
         <span data-ttu-id="fa4a7-230">Pour réduire la fragmentation, vous pouvez réorganiser ou reconstruire l'index cluster.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-230">To reduce fragmentation, you can reorganize or rebuild the clustered index.</span></span> <span data-ttu-id="fa4a7-231">Pour plus d’informations, consultez [Réorganiser et reconstruire des index](../indexes/reorganize-and-rebuild-indexes.md).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-231">For more information, see [Reorganize and Rebuild Indexes](../indexes/reorganize-and-rebuild-indexes.md).</span></span>  
  
  
  
##  <a name="troubleshooting-slow-indexing-performance-due-to-filters"></a><a name="filters"></a><span data-ttu-id="fa4a7-232">Résolution des problèmes de performances d’indexation lente en raison de filtres</span><span class="sxs-lookup"><span data-stu-id="fa4a7-232">Troubleshooting Slow Indexing Performance Due to Filters</span></span>  
 <span data-ttu-id="fa4a7-233">Lors de l'alimentation d'un index de recherche en texte intégral, le Moteur d'indexation et de recherche en texte intégral utilise deux types de filtres : des filtres multithreads et des filtres monothreads.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-233">When populating a full-text index, the Full-Text Engine uses two types of filters: multithreaded and single-threaded.</span></span> <span data-ttu-id="fa4a7-234">Certains documents, tels que les documents [!INCLUDE[msCoName](../../includes/msconame-md.md)] Word, sont filtrés à l'aide d'un filtre multithread.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-234">Some documents, such as [!INCLUDE[msCoName](../../includes/msconame-md.md)] Word documents, are filtered using a multithreaded filter.</span></span> <span data-ttu-id="fa4a7-235">D'autres, tels que les documents PDF (Portable Document Format) d'Adobe Acrobat, sont filtrés à l'aide d'un filtre monothread.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-235">Other documents, such as Adobe Acrobat Portable Document Format (PDF) documents, are filtered using a single-threaded filter.</span></span>  
  
 <span data-ttu-id="fa4a7-236">Pour des raisons de sécurité, les filtres sont chargés par des processus hôtes de démon de filtre.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-236">For security reasons, filters are loaded by filter daemon host processes.</span></span> <span data-ttu-id="fa4a7-237">Une instance de serveur utilise un processus multithread pour tous les filtres multithreads et un processus monothread pour tous les filtres monothreads.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-237">A server instance uses a multithreaded process for all multithreaded filters and a single-threaded process for all single-threaded filters.</span></span> <span data-ttu-id="fa4a7-238">Lorsqu'un document qui utilise un filtre multithread contient un document incorporé qui utilise un filtre monothread, le Moteur d'indexation et de recherche en texte intégral lance un processus monothread pour le document incorporé.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-238">When a document that uses a multithreaded filter contains an embedded document that uses a single-threaded filter, the Full-Text Engine launches a single-threaded process for the embedded document.</span></span> <span data-ttu-id="fa4a7-239">Par exemple, quand il rencontre un document Word qui contient un document PDF, le Moteur d’indexation et de recherche en texte intégral utilise le processus multithread pour le contenu Word et lance un processus monothread pour le contenu PDF.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-239">For example, on encountering a Word document that contains a PDF document, the Full-Text Engine uses the multithreaded process for the Word content and launches a single-threaded process for the PDF content.</span></span> <span data-ttu-id="fa4a7-240">Toutefois, un filtre monothread peut ne pas fonctionner correctement dans cet environnement et peut déstabiliser le processus de filtrage.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-240">A single-threaded filter might not work well in this environment, however, and could destabilize the filtering process.</span></span> <span data-ttu-id="fa4a7-241">Dans certaines circonstances, lorsque ce type d'incorporation est courant, cette déstabilisation peut provoquer des blocages du processus de filtrage.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-241">In certain circumstances where such embedding is common, destabilization might lead to filtering-process crashes.</span></span> <span data-ttu-id="fa4a7-242">Dans ce cas, le Moteur d'indexation et de recherche en texte intégral réachemine tout document ayant subi un échec (par exemple, un document Word avec du contenu PDF incorporé) vers le processus de filtrage monothread.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-242">When this occurs, the Full-Text Engine re-routes any failed document (for example, a Word document that contains embedded PDF content) to the single-threaded filtering process.</span></span> <span data-ttu-id="fa4a7-243">Si le réacheminement a lieu fréquemment, il en résulte une détérioration des performances du processus d'indexation de texte intégral.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-243">If re-routing occurs frequently, it results in performance degradation of the full-text indexing process.</span></span>  
  
 <span data-ttu-id="fa4a7-244">Pour contourner ce problème, marquez le filtre du document conteneur (Word dans le cas présent) en tant que filtre monothread.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-244">To work around this problem, mark the filter for the container document (Word in this case) as a single-threaded filter.</span></span> <span data-ttu-id="fa4a7-245">Vous pouvez modifier la valeur de Registre concernée pour marquer un filtre donné en tant que filtre monothread.</span><span class="sxs-lookup"><span data-stu-id="fa4a7-245">You can change the filter registry value to mark a given filter as a single-threaded filter.</span></span> <span data-ttu-id="fa4a7-246">Pour marquer un filtre comme filtre à thread unique, vous devez définir la valeur de Registre **ThreadingModel** pour le filtre sur `Apartment Threaded` .</span><span class="sxs-lookup"><span data-stu-id="fa4a7-246">To mark a filter as a single-threaded filter, you need to set the **ThreadingModel** registry value for the filter to `Apartment Threaded`.</span></span> <span data-ttu-id="fa4a7-247">Pour plus d’informations sur les threads uniques cloisonnés (STA), consultez le livre blanc intitulé [Présentation et utilisation des modèles de threads COM](https://go.microsoft.com/fwlink/?LinkId=209159).</span><span class="sxs-lookup"><span data-stu-id="fa4a7-247">For information about single-threaded apartments, see the white paper [Understanding and Using COM Threading Models](https://go.microsoft.com/fwlink/?LinkId=209159).</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="fa4a7-248">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="fa4a7-248">See Also</span></span>  
 <span data-ttu-id="fa4a7-249">[Mémoire du serveur (option de configuration de serveur)](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span><span class="sxs-lookup"><span data-stu-id="fa4a7-249">[Server Memory Server Configuration Options](../../database-engine/configure-windows/server-memory-server-configuration-options.md) </span></span>  
 <span data-ttu-id="fa4a7-250">[Maximum de la plage de l’analyse de texte intégral (option de configuration de serveur)](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md) </span><span class="sxs-lookup"><span data-stu-id="fa4a7-250">[max full-text crawl range Server Configuration Option](../../database-engine/configure-windows/max-full-text-crawl-range-server-configuration-option.md) </span></span>  
 <span data-ttu-id="fa4a7-251">[Alimenter des index de recherche en texte intégral](populate-full-text-indexes.md) </span><span class="sxs-lookup"><span data-stu-id="fa4a7-251">[Populate Full-Text Indexes](populate-full-text-indexes.md) </span></span>  
 <span data-ttu-id="fa4a7-252">[Créer et gérer des index de recherche en texte intégral](create-and-manage-full-text-indexes.md) </span><span class="sxs-lookup"><span data-stu-id="fa4a7-252">[Create and Manage Full-Text Indexes](create-and-manage-full-text-indexes.md) </span></span>  
 <span data-ttu-id="fa4a7-253">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="fa4a7-253">[sys.dm_fts_memory_buffers &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-buffers-transact-sql) </span></span>  
 <span data-ttu-id="fa4a7-254">[sys.dm_fts_memory_pools &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="fa4a7-254">[sys.dm_fts_memory_pools &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-memory-pools-transact-sql) </span></span>  
 [<span data-ttu-id="fa4a7-255">Résoudre l'indexation de recherche en texte intégral</span><span class="sxs-lookup"><span data-stu-id="fa4a7-255">Troubleshoot Full-Text Indexing</span></span>](troubleshoot-full-text-indexing.md)  
  
  
