---
title: Journal des transactions (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 01/04/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
helpviewer_keywords:
- transaction logs [SQL Server], about
- databases [SQL Server], transaction logs
- logs [SQL Server], transaction logs
ms.assetid: d7be5ac5-4c8e-4d0a-b114-939eb97dac4d
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 025ef22e6dee1fcfaa1225a4709fa01b6c326b12
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87603982"
---
# <a name="the-transaction-log-sql-server"></a><span data-ttu-id="f08e5-102">Journal des transactions (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="f08e5-102">The Transaction Log (SQL Server)</span></span>
  <span data-ttu-id="f08e5-103">Chaque base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] a un journal des transactions qui enregistre toutes les transactions et les modifications apportées par chacune d’entre elles.</span><span class="sxs-lookup"><span data-stu-id="f08e5-103">Every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database has a transaction log that records all transactions and the database modifications made by each transaction.</span></span> <span data-ttu-id="f08e5-104">Le journal des transactions doit être vidé régulièrement pour éviter qu'il ne soit saturé.</span><span class="sxs-lookup"><span data-stu-id="f08e5-104">The transaction log must be truncated on a regular basis to keep it from filling up.</span></span> <span data-ttu-id="f08e5-105">Toutefois, certains facteurs peuvent retarder la troncation du journal. Par conséquent, il est important de surveiller la taille du journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-105">However, some factors can delay log truncation, so monitoring log size is important.</span></span> <span data-ttu-id="f08e5-106">Certaines opérations peuvent faire l'objet d'une journalisation minimale afin de réduire leur impact sur la taille des journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="f08e5-106">Some operations can be minimally logged to reduce their impact on transaction log size.</span></span>  
  
 <span data-ttu-id="f08e5-107">Le journal des transactions est un composant essentiel de la base de données et, en cas de défaillance du système, vous pouvez en avoir besoin pour rétablir la cohérence de la base de données.</span><span class="sxs-lookup"><span data-stu-id="f08e5-107">The transaction log is a critical component of the database and, if there is a system failure, the transaction log might be required to bring your database back to a consistent state.</span></span> <span data-ttu-id="f08e5-108">Le journal des transactions ne doit jamais être supprimé ni déplacé, à moins d'en avoir pleinement compris les conséquences.</span><span class="sxs-lookup"><span data-stu-id="f08e5-108">The transaction log should never be deleted or moved unless you fully understand the ramifications of doing this.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f08e5-109">Différents points de contrôle créent des points de référence connus et fiables à partir desquels vous pouvez commencer à appliquer les journaux des transactions lors de la récupération d'une base de données.</span><span class="sxs-lookup"><span data-stu-id="f08e5-109">Known good points from which to begin applying transaction logs during database recovery are created by checkpoints.</span></span> <span data-ttu-id="f08e5-110">Pour plus d’informations, consultez [Points de contrôle de base de données &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-110">For more information, see [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span></span>  
  
 <span data-ttu-id="f08e5-111">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="f08e5-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="f08e5-112">Avantages : opérations prises en charge par le journal des transactions</span><span class="sxs-lookup"><span data-stu-id="f08e5-112">Benefits: Operations Supported by the Transaction Log</span></span>](#Benefits)  
  
-   [<span data-ttu-id="f08e5-113">Troncation du journal des transactions</span><span class="sxs-lookup"><span data-stu-id="f08e5-113">Transaction Log Truncation</span></span>](#Truncation)  
  
-   [<span data-ttu-id="f08e5-114">Facteurs pouvant retarder la troncation du journal</span><span class="sxs-lookup"><span data-stu-id="f08e5-114">Factors That Can Delay Log Truncation</span></span>](#FactorsThatDelayTruncation)  
  
-   [<span data-ttu-id="f08e5-115">Opérations pouvant être journalisées au minimum</span><span class="sxs-lookup"><span data-stu-id="f08e5-115">Operations That Can Be Minimally Logged</span></span>](#MinimallyLogged)  
  
-   [<span data-ttu-id="f08e5-116">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="f08e5-116">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="benefits-operations-supported-by-the-transaction-log"></a><a name="Benefits"></a><span data-ttu-id="f08e5-117">Avantages : opérations prises en charge par le journal des transactions</span><span class="sxs-lookup"><span data-stu-id="f08e5-117">Benefits: Operations Supported by the Transaction Log</span></span>  
 <span data-ttu-id="f08e5-118">Le journal des transactions prend en charge les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="f08e5-118">The transaction log supports the following operations:</span></span>  
  
-   <span data-ttu-id="f08e5-119">Récupération des transactions individuelles</span><span class="sxs-lookup"><span data-stu-id="f08e5-119">Recovery of individual transactions.</span></span>  
  
-   <span data-ttu-id="f08e5-120">Récupération de toutes les transactions incomplètes au démarrage de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="f08e5-120">Recovery of all incomplete transactions when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is started.</span></span>  
  
-   <span data-ttu-id="f08e5-121">Restauration par progression d'une base de données, d'un fichier, d'un groupe de fichiers ou d'une page jusqu'au point de défaillance</span><span class="sxs-lookup"><span data-stu-id="f08e5-121">Rolling a restored database, file, filegroup, or page forward to the point of failure.</span></span>  
  
-   <span data-ttu-id="f08e5-122">Prise en charge de la réplication transactionnelle</span><span class="sxs-lookup"><span data-stu-id="f08e5-122">Supporting transactional replication.</span></span>  
  
-   <span data-ttu-id="f08e5-123">Prise en charge de la haute disponibilité et de solutions de récupération d'urgence : [!INCLUDE[ssHADR](../../includes/sshadr-md.md)], mise en miroir de bases de données et copie des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="f08e5-123">Supporting high availability and disaster recovery solutions: [!INCLUDE[ssHADR](../../includes/sshadr-md.md)], database mirroring, and log shipping.</span></span>  
  
##  <a name="transaction-log-truncation"></a><a name="Truncation"></a> <span data-ttu-id="f08e5-124">Troncation du journal des transactions</span><span class="sxs-lookup"><span data-stu-id="f08e5-124">Transaction Log Truncation</span></span>  
 <span data-ttu-id="f08e5-125">La troncation du journal libère de l'espace dans le fichier journal pour que le journal des transactions puisse le réutiliser.</span><span class="sxs-lookup"><span data-stu-id="f08e5-125">Log truncation frees space in the log file for reuse by the transaction log.</span></span> <span data-ttu-id="f08e5-126">La troncation du journal est essentielle pour empêcher que le journal se remplisse.</span><span class="sxs-lookup"><span data-stu-id="f08e5-126">Log truncation is essential to keep the log from filling.</span></span> <span data-ttu-id="f08e5-127">Elle supprime les fichiers journaux virtuels inactifs du journal des transactions logique d'une base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , ce qui libère de l'espace dans le journal logique de façon à ce qu'il soit réutilisé par le journal des transactions physique.</span><span class="sxs-lookup"><span data-stu-id="f08e5-127">Log truncation deletes inactive virtual log files from the logical transaction log of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database, freeing space in the logical log for reuse by the Physical transaction log.</span></span> <span data-ttu-id="f08e5-128">Si un journal des transactions n'était jamais tronqué, il finirait par occuper tout l'espace disque alloué à ses fichiers journaux physiques.</span><span class="sxs-lookup"><span data-stu-id="f08e5-128">If a transaction log were never truncated, it would eventually fill all the disk space that is allocated to its physical log files.</span></span>  
  
 <span data-ttu-id="f08e5-129">Pour éviter ce problème, à moins que la troncation du journal ne soit retardée pour une raison quelconque, la troncation se produit automatiquement après les événements suivants :</span><span class="sxs-lookup"><span data-stu-id="f08e5-129">To avoid this problem, unless log truncation is being delayed for some reason, truncation occurs automatically after the following events:</span></span>  
  
-   <span data-ttu-id="f08e5-130">En mode de récupération simple, après un point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="f08e5-130">Under the simple recovery model, after a checkpoint.</span></span>  
  
-   <span data-ttu-id="f08e5-131">En mode de récupération complète ou de récupération utilisant les journaux de transactions, si un point de contrôle s'est produit depuis la sauvegarde précédente, la troncation se produit après une sauvegarde de fichier journal (sauf s'il s'agit d'une sauvegarde de copie uniquement).</span><span class="sxs-lookup"><span data-stu-id="f08e5-131">Under the full recovery model or bulk-logged recovery model, if a checkpoint has occurred since the previous backup, truncation occurs after a log backup (unless it is a copy-only log backup).</span></span>  
  
 <span data-ttu-id="f08e5-132">Pour plus d’informations, consultez [facteurs pouvant retarder la troncation du journal](#FactorsThatDelayTruncation), plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="f08e5-132">For more information, see [Factors That Can Delay Log Truncation](#FactorsThatDelayTruncation), later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f08e5-133">La troncation du journal ne réduit pas la taille du fichier journal physique.</span><span class="sxs-lookup"><span data-stu-id="f08e5-133">Log truncation does not reduce the size of the physical log file.</span></span> <span data-ttu-id="f08e5-134">Pour réduire la taille physique d'un fichier journal physique, vous devez réduire le fichier journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-134">To reduce the physical size of a physical log file, you need to shrink the log file.</span></span> <span data-ttu-id="f08e5-135">Pour plus d'informations sur la réduction de la taille du fichier journal physique, consultez [Gérer la taille du fichier journal des transactions](manage-the-size-of-the-transaction-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-135">For information about shrinking the size of the physical log file, see [Manage the Size of the Transaction Log File](manage-the-size-of-the-transaction-log-file.md).</span></span>  
  
##  <a name="factors-that-can-delay-log-truncation"></a><a name="FactorsThatDelayTruncation"></a><span data-ttu-id="f08e5-136">Facteurs pouvant retarder la troncation du journal</span><span class="sxs-lookup"><span data-stu-id="f08e5-136">Factors That Can Delay Log Truncation</span></span>  
 <span data-ttu-id="f08e5-137">Lorsque les enregistrements de journal restent actifs longtemps, la troncation du journal des transactions est retardée, et le journal des transactions risque de se remplir entièrement.</span><span class="sxs-lookup"><span data-stu-id="f08e5-137">When log records remain active for a long time transaction log truncation is delayed, and potentially the transaction log can fill up.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f08e5-138">Pour plus d’informations sur la façon de répondre à un journal des transactions saturé, consultez [Résoudre les problèmes liés à un journal des transactions saturé&#40;Erreur SQL Server 9002&#41;](troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-138">For information about how to respond to a full transaction log, see [Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;](troubleshoot-a-full-transaction-log-sql-server-error-9002.md).</span></span>  
  
 <span data-ttu-id="f08e5-139">La troncation du journal peut être retardée pour différents motifs.</span><span class="sxs-lookup"><span data-stu-id="f08e5-139">Log truncation can be delayed by a variety of factors.</span></span> <span data-ttu-id="f08e5-140">Le cas échéant, vous pouvez rechercher les raisons qui empêchent de tronquer le journal en interrogeant les colonnes **log_reuse_wait** et **log_reuse_wait_desc** de l’affichage catalogue [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="f08e5-140">You can discover what, if anything, is preventing log truncation by querying the **log_reuse_wait** and **log_reuse_wait_desc** columns of the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view.</span></span> <span data-ttu-id="f08e5-141">Le tableau suivant décrit les valeurs possibles de ces colonnes.</span><span class="sxs-lookup"><span data-stu-id="f08e5-141">The following table describes the values of these columns.</span></span>  
  
|<span data-ttu-id="f08e5-142">Valeur log_reuse_wait</span><span class="sxs-lookup"><span data-stu-id="f08e5-142">log_reuse_wait value</span></span>|<span data-ttu-id="f08e5-143">Valeur log_reuse_wait_desc</span><span class="sxs-lookup"><span data-stu-id="f08e5-143">log_reuse_wait_desc value</span></span>|<span data-ttu-id="f08e5-144">Description</span><span class="sxs-lookup"><span data-stu-id="f08e5-144">Description</span></span>|  
|----------------------------|----------------------------------|-----------------|  
|<span data-ttu-id="f08e5-145">0</span><span class="sxs-lookup"><span data-stu-id="f08e5-145">0</span></span>|<span data-ttu-id="f08e5-146">NOTHING</span><span class="sxs-lookup"><span data-stu-id="f08e5-146">NOTHING</span></span>|<span data-ttu-id="f08e5-147">Il existe actuellement un ou plusieurs fichiers journaux virtuels réutilisables.</span><span class="sxs-lookup"><span data-stu-id="f08e5-147">Currently there are one or more reusable virtual log files.</span></span>|  
|<span data-ttu-id="f08e5-148">1</span><span class="sxs-lookup"><span data-stu-id="f08e5-148">1</span></span>|<span data-ttu-id="f08e5-149">CHECKPOINT</span><span class="sxs-lookup"><span data-stu-id="f08e5-149">CHECKPOINT</span></span>|<span data-ttu-id="f08e5-150">Aucun point de contrôle n'est apparu depuis la dernière troncation du journal ou le début du journal n'est pas encore allé au-delà d'un fichier journal virtuel.</span><span class="sxs-lookup"><span data-stu-id="f08e5-150">No checkpoint has occurred since the last log truncation, or the head of the log has not yet moved beyond a virtual log file.</span></span> <span data-ttu-id="f08e5-151">(Tous les modes de récupération)</span><span class="sxs-lookup"><span data-stu-id="f08e5-151">(All recovery models)</span></span><br /><br /> <span data-ttu-id="f08e5-152">Il s'agit d'une raison courante de retarder la troncation du journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-152">This is a routine reason for delaying log truncation.</span></span> <span data-ttu-id="f08e5-153">Pour plus d’informations, consultez [Points de contrôle de base de données &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-153">For more information, see [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span></span>|  
|<span data-ttu-id="f08e5-154">2</span><span class="sxs-lookup"><span data-stu-id="f08e5-154">2</span></span>|<span data-ttu-id="f08e5-155">LOG_BACKUP</span><span class="sxs-lookup"><span data-stu-id="f08e5-155">LOG_BACKUP</span></span>|<span data-ttu-id="f08e5-156">Une sauvegarde du journal est requise avant que le journal des transactions puisse être tronqué.</span><span class="sxs-lookup"><span data-stu-id="f08e5-156">A log backup is required before the transaction log can be truncated.</span></span> <span data-ttu-id="f08e5-157">(Mode de récupération complète ou mode de récupération utilisant les journaux de transactions uniquement)</span><span class="sxs-lookup"><span data-stu-id="f08e5-157">(Full or bulk-logged recovery models only)</span></span><br /><br /> <span data-ttu-id="f08e5-158">Lorsque la sauvegarde de journal suivante est terminée, l'espace du journal peut devenir réutilisable.</span><span class="sxs-lookup"><span data-stu-id="f08e5-158">When the next log backup is completed, some log space might become reusable.</span></span>|  
|<span data-ttu-id="f08e5-159">3</span><span class="sxs-lookup"><span data-stu-id="f08e5-159">3</span></span>|<span data-ttu-id="f08e5-160">ACTIVE_BACKUP_OR_RESTORE</span><span class="sxs-lookup"><span data-stu-id="f08e5-160">ACTIVE_BACKUP_OR_RESTORE</span></span>|<span data-ttu-id="f08e5-161">Une sauvegarde de données ou une restauration est en cours (tous les modes de récupération).</span><span class="sxs-lookup"><span data-stu-id="f08e5-161">A data backup or a restore is in progress (all recovery models).</span></span><br /><br /> <span data-ttu-id="f08e5-162">Si une sauvegarde des données empêche la troncation du journal, l'annulation de l'opération de sauvegarde peut résoudre le problème immédiat.</span><span class="sxs-lookup"><span data-stu-id="f08e5-162">If a data backup is preventing log truncation, canceling the backup operation might help the immediate problem.</span></span>|  
|<span data-ttu-id="f08e5-163">4</span><span class="sxs-lookup"><span data-stu-id="f08e5-163">4</span></span>|<span data-ttu-id="f08e5-164">ACTIVE_TRANSACTION</span><span class="sxs-lookup"><span data-stu-id="f08e5-164">ACTIVE_TRANSACTION</span></span>|<span data-ttu-id="f08e5-165">Une transaction est active (tous les modes de récupération).</span><span class="sxs-lookup"><span data-stu-id="f08e5-165">A transaction is active (all recovery models).</span></span><br /><br /> <span data-ttu-id="f08e5-166">Une transaction longue peut exister au démarrage de la sauvegarde du fichier journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-166">A long-running transaction might exist at the start of the log backup.</span></span> <span data-ttu-id="f08e5-167">Dans ce cas, libérer l'espace peut requérir une autre sauvegarde du fichier journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-167">In this case, freeing the space might require another log backup.</span></span> <span data-ttu-id="f08e5-168">Notez qu’une transaction de longue durée empêche la troncation du journal dans tous les modes de récupération, y compris le mode de récupération simple, dans lequel le journal des transactions est généralement tronqué sur chaque point de contrôle automatique.</span><span class="sxs-lookup"><span data-stu-id="f08e5-168">Note that a long-running transactions prevent log truncation under all recovery models, including the simple recovery model, under which the transaction log is generally truncated on each automatic checkpoint.</span></span><br /><br /> <span data-ttu-id="f08e5-169">Une transaction est différée.</span><span class="sxs-lookup"><span data-stu-id="f08e5-169">A transaction is deferred.</span></span> <span data-ttu-id="f08e5-170">Une *transaction différée* est en fait une transaction active dont la restauration est bloquée à cause d'une ressource indisponible.</span><span class="sxs-lookup"><span data-stu-id="f08e5-170">A *deferred transaction* is effectively an active transaction whose rollback is blocked because of some unavailable resource.</span></span> <span data-ttu-id="f08e5-171">Pour plus d’informations sur les causes des transactions différées et la manière de les faire sortir de l’état différé, consultez [Transactions différées &#40;SQL Server&#41;](../backup-restore/deferred-transactions-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-171">For information about the causes of deferred transactions and how to move them out of the deferred state, see [Deferred Transactions &#40;SQL Server&#41;](../backup-restore/deferred-transactions-sql-server.md).</span></span> <br /><br /><span data-ttu-id="f08e5-172">Les transactions à long terme peuvent également remplir le journal des transactions de tempdb.</span><span class="sxs-lookup"><span data-stu-id="f08e5-172">Long-running transactions might also fill up tempdb's transaction log.</span></span> <span data-ttu-id="f08e5-173">La base de données tempdb est implicitement utilisée par les transactions utilisateur pour les objets internes tels que les tables de travail pour le tri, les fichiers de travail pour le hachage, les tables de travail de curseur et la gestion de version de ligne.</span><span class="sxs-lookup"><span data-stu-id="f08e5-173">Tempdb is used implicitly by user transactions for internal objects such as work tables for sorting, work files for hashing, cursor work tables, and row versioning.</span></span> <span data-ttu-id="f08e5-174">Même si la transaction utilisateur comprend uniquement des données de lecture (requêtes SELECT), des objets internes peuvent être créés et utilisés sous des transactions utilisateur.</span><span class="sxs-lookup"><span data-stu-id="f08e5-174">Even if the user transaction includes only reading data (SELECT queries), internal objects may be created and used under user transactions.</span></span> <span data-ttu-id="f08e5-175">Ensuite, le journal des transactions tempdb peut être rempli.</span><span class="sxs-lookup"><span data-stu-id="f08e5-175">Then the tempdb transaction log can be filled.</span></span>|  
|<span data-ttu-id="f08e5-176">5</span><span class="sxs-lookup"><span data-stu-id="f08e5-176">5</span></span>|<span data-ttu-id="f08e5-177">DATABASE_MIRRORING</span><span class="sxs-lookup"><span data-stu-id="f08e5-177">DATABASE_MIRRORING</span></span>|<span data-ttu-id="f08e5-178">La mise en miroir de bases de données est interrompue ou, en mode haute performance, la base de données miroir se trouve derrière la base de données principale de manière significative.</span><span class="sxs-lookup"><span data-stu-id="f08e5-178">Database mirroring is paused, or under high-performance mode, the mirror database is significantly behind the principal database.</span></span> <span data-ttu-id="f08e5-179">(Mode de récupération complète uniquement)</span><span class="sxs-lookup"><span data-stu-id="f08e5-179">(Full recovery model only)</span></span><br /><br /> <span data-ttu-id="f08e5-180">Pour plus d’informations, consultez [Mise en miroir de bases de données &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-180">For more information, see [Database Mirroring &#40;SQL Server&#41;](../../database-engine/database-mirroring/database-mirroring-sql-server.md).</span></span>|  
|<span data-ttu-id="f08e5-181">6</span><span class="sxs-lookup"><span data-stu-id="f08e5-181">6</span></span>|<span data-ttu-id="f08e5-182">RÉPLICATION</span><span class="sxs-lookup"><span data-stu-id="f08e5-182">REPLICATION</span></span>|<span data-ttu-id="f08e5-183">Durant les réplications transactionnelles, les transactions liées aux publications ne sont pas encore remises à la base de données de distribution.</span><span class="sxs-lookup"><span data-stu-id="f08e5-183">During transactional replications, transactions relevant to the publications are still undelivered to the distribution database.</span></span> <span data-ttu-id="f08e5-184">(Mode de récupération complète uniquement)</span><span class="sxs-lookup"><span data-stu-id="f08e5-184">(Full recovery model only)</span></span><br /><br /> <span data-ttu-id="f08e5-185">Pour plus d'informations sur la réplication transactionnelle, consultez [SQL Server Replication](../../relational-databases/replication/sql-server-replication.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-185">For information about transactional replication, see [SQL Server Replication](../../relational-databases/replication/sql-server-replication.md).</span></span>|  
|<span data-ttu-id="f08e5-186">7</span><span class="sxs-lookup"><span data-stu-id="f08e5-186">7</span></span>|<span data-ttu-id="f08e5-187">DATABASE_SNAPSHOT_CREATION</span><span class="sxs-lookup"><span data-stu-id="f08e5-187">DATABASE_SNAPSHOT_CREATION</span></span>|<span data-ttu-id="f08e5-188">Un instantané de base de données est créé.</span><span class="sxs-lookup"><span data-stu-id="f08e5-188">A database snapshot is being created.</span></span> <span data-ttu-id="f08e5-189">(Tous les modes de récupération)</span><span class="sxs-lookup"><span data-stu-id="f08e5-189">(All recovery models)</span></span><br /><br /> <span data-ttu-id="f08e5-190">Il s'agit d'une raison courante et habituellement brève du retard de la troncation du journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-190">This is a routine, and typically brief, cause of delayed log truncation.</span></span>|  
|<span data-ttu-id="f08e5-191">8</span><span class="sxs-lookup"><span data-stu-id="f08e5-191">8</span></span>|<span data-ttu-id="f08e5-192">LOG_SCAN</span><span class="sxs-lookup"><span data-stu-id="f08e5-192">LOG_SCAN</span></span>|<span data-ttu-id="f08e5-193">Une analyse du journal se produit.</span><span class="sxs-lookup"><span data-stu-id="f08e5-193">A log scan is occurring.</span></span> <span data-ttu-id="f08e5-194">(Tous les modes de récupération)</span><span class="sxs-lookup"><span data-stu-id="f08e5-194">(All recovery models)</span></span><br /><br /> <span data-ttu-id="f08e5-195">Il s'agit d'une raison courante et habituellement brève du retard de la troncation du journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-195">This is a routine, and typically brief, cause of delayed log truncation.</span></span>|  
|<span data-ttu-id="f08e5-196">9</span><span class="sxs-lookup"><span data-stu-id="f08e5-196">9</span></span>|<span data-ttu-id="f08e5-197">AVAILABILITY_REPLICA</span><span class="sxs-lookup"><span data-stu-id="f08e5-197">AVAILABILITY_REPLICA</span></span>|<span data-ttu-id="f08e5-198">Un réplica secondaire d'un groupe de disponibilité applique les enregistrements du journal des transactions de cette base de données à une base de données secondaire associée.</span><span class="sxs-lookup"><span data-stu-id="f08e5-198">A secondary replica of an availability group is applying transaction log records of this database to a corresponding secondary database.</span></span> <span data-ttu-id="f08e5-199">(Mode de récupération complète)</span><span class="sxs-lookup"><span data-stu-id="f08e5-199">(Full recovery model)</span></span><br /><br /> <span data-ttu-id="f08e5-200">Pour plus d’informations, consultez [vue d’ensemble de groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-200">For more information, see [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md).</span></span>|  
|<span data-ttu-id="f08e5-201">10</span><span class="sxs-lookup"><span data-stu-id="f08e5-201">10</span></span>|-|<span data-ttu-id="f08e5-202">Usage interne uniquement</span><span class="sxs-lookup"><span data-stu-id="f08e5-202">For internal use only</span></span>|  
|<span data-ttu-id="f08e5-203">11</span><span class="sxs-lookup"><span data-stu-id="f08e5-203">11</span></span>|-|<span data-ttu-id="f08e5-204">Usage interne uniquement</span><span class="sxs-lookup"><span data-stu-id="f08e5-204">For internal use only</span></span>|  
|<span data-ttu-id="f08e5-205">12</span><span class="sxs-lookup"><span data-stu-id="f08e5-205">12</span></span>|-|<span data-ttu-id="f08e5-206">Usage interne uniquement</span><span class="sxs-lookup"><span data-stu-id="f08e5-206">For internal use only</span></span>|  
|<span data-ttu-id="f08e5-207">13</span><span class="sxs-lookup"><span data-stu-id="f08e5-207">13</span></span>|<span data-ttu-id="f08e5-208">OLDEST_PAGE</span><span class="sxs-lookup"><span data-stu-id="f08e5-208">OLDEST_PAGE</span></span>|<span data-ttu-id="f08e5-209">Si une base de données est configurée pour utiliser des points de contrôle indirects, la page la plus ancienne dans la base de données peut être plus ancienne que le LSN du point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="f08e5-209">If a database is configured to use indirect checkpoints, the oldest page on the database might be older than the checkpoint LSN.</span></span> <span data-ttu-id="f08e5-210">Dans ce cas, la page la plus ancienne peut retarder la troncation du journal.</span><span class="sxs-lookup"><span data-stu-id="f08e5-210">In this case, the oldest page can delay log truncation.</span></span> <span data-ttu-id="f08e5-211">(Tous les modes de récupération)</span><span class="sxs-lookup"><span data-stu-id="f08e5-211">(All recovery models)</span></span><br /><br /> <span data-ttu-id="f08e5-212">Pour plus d’informations sur les points de contrôle indirects, consultez [Points de contrôle de base de données &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-212">For information about indirect checkpoints, see [Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md).</span></span>|  
|<span data-ttu-id="f08e5-213">14</span><span class="sxs-lookup"><span data-stu-id="f08e5-213">14</span></span>|<span data-ttu-id="f08e5-214">OTHER_TRANSIENT</span><span class="sxs-lookup"><span data-stu-id="f08e5-214">OTHER_TRANSIENT</span></span>|<span data-ttu-id="f08e5-215">Cette valeur n'est pas utilisée actuellement.</span><span class="sxs-lookup"><span data-stu-id="f08e5-215">This value is currently not used.</span></span>|  
|<span data-ttu-id="f08e5-216">16</span><span class="sxs-lookup"><span data-stu-id="f08e5-216">16</span></span>|<span data-ttu-id="f08e5-217">XTP_CHECKPOINT</span><span class="sxs-lookup"><span data-stu-id="f08e5-217">XTP_CHECKPOINT</span></span>|<span data-ttu-id="f08e5-218">Quand une base de données possède un groupe de fichiers à mémoire optimisée, aucune troncation du journal des transactions ne peut avoir lieu avant le déclenchement du point de contrôle automatique [!INCLUDE[hek_2](../../includes/hek-2-md.md)] (ce qui se produit chaque fois que le journal croît de 512 Mo).</span><span class="sxs-lookup"><span data-stu-id="f08e5-218">When a database has a memory-optimized filegroup, the transaction log may not truncate until automatic [!INCLUDE[hek_2](../../includes/hek-2-md.md)] checkpoint is triggered (which happens at every 512 MB of log growth).</span></span><br /><br /> <span data-ttu-id="f08e5-219">Remarque : pour tronquer le journal des transactions avant la taille de 512 Mo, déclenchez la commande Checkpoint manuellement sur la base de données en question.</span><span class="sxs-lookup"><span data-stu-id="f08e5-219">Note: To truncate transaction log before 512 MB size, fire the Checkpoint command manually against the database in question.</span></span>|  
  
##  <a name="operations-that-can-be-minimally-logged"></a><a name="MinimallyLogged"></a><span data-ttu-id="f08e5-220">Opérations pouvant être journalisées au minimum</span><span class="sxs-lookup"><span data-stu-id="f08e5-220">Operations That Can Be Minimally Logged</span></span>  
 <span data-ttu-id="f08e5-221">La*journalisation minimale* implique de ne journaliser que les informations obligatoires pour pouvoir récupérer la transaction sans prendre en charge la récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="f08e5-221">*Minimal logging* involves logging only the information that is required to recover the transaction without supporting point-in-time recovery.</span></span> <span data-ttu-id="f08e5-222">Cette rubrique identifie les opérations qui sont journalisées au minimum en mode de récupération utilisant les journaux de transactions (ainsi qu'en mode de récupération simple, sauf lorsqu'une sauvegarde est en cours).</span><span class="sxs-lookup"><span data-stu-id="f08e5-222">This topic identifies the operations that are minimally logged under the bulk-logged recovery model (as well as under the simple recovery model, except when a backup is running).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f08e5-223">La journalisation minimale n'est pas prise en charge pour les tables à mémoire optimisée.</span><span class="sxs-lookup"><span data-stu-id="f08e5-223">Minimal logging is not supported for memory-optimized tables.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f08e5-224">En mode de récupération complète, toutes les opérations en bloc sont entièrement journalisées.</span><span class="sxs-lookup"><span data-stu-id="f08e5-224">Under the full recovery model, all bulk operations are fully logged.</span></span> <span data-ttu-id="f08e5-225">Cependant, vous pouvez minimiser la journalisation d'un ensemble d'opérations en bloc en faisant temporairement passer la base de données en mode de récupération utilisant les journaux de transactions pour les opérations en bloc.</span><span class="sxs-lookup"><span data-stu-id="f08e5-225">However, you can minimize logging for a set of bulk operations by switching the database to the bulk-logged recovery model temporarily for bulk operations.</span></span> <span data-ttu-id="f08e5-226">La journalisation minimale est plus efficace que la journalisation complète et réduit la possibilité pour une opération en bloc de grande envergure d'occuper l'espace disponible du journal des transactions pendant une transaction en bloc.</span><span class="sxs-lookup"><span data-stu-id="f08e5-226">Minimal logging is more efficient than full logging, and it reduces the possibility of a large-scale bulk operation filling the available transaction log space during a bulk transaction.</span></span> <span data-ttu-id="f08e5-227">En revanche, si la base de données est endommagée ou perdue lors de la journalisation minimale, vous ne pouvez pas récupérer la base de données jusqu'au point de défaillance.</span><span class="sxs-lookup"><span data-stu-id="f08e5-227">However, if the database is damaged or lost when minimal logging is in effect, you cannot recover the database to the point of failure.</span></span>  
  
 <span data-ttu-id="f08e5-228">Les opérations suivantes, qui sont entièrement journalisées en mode de récupération complète, font l'objet d'une journalisation minimale en modes simple et de récupération utilisant les journaux de transactions :</span><span class="sxs-lookup"><span data-stu-id="f08e5-228">The following operations, which are fully logged under the full recovery model, are minimally logged under the simple and bulk-logged recovery model:</span></span>  
  
-   <span data-ttu-id="f08e5-229">Opérations d’importation en bloc ([bcp](../../tools/bcp-utility.md), [BULK INSERT](/sql/t-sql/statements/bulk-insert-transact-sql) et [INSERT... SELECT](/sql/t-sql/statements/insert-transact-sql)).</span><span class="sxs-lookup"><span data-stu-id="f08e5-229">Bulk import operations ([bcp](../../tools/bcp-utility.md), [BULK INSERT](/sql/t-sql/statements/bulk-insert-transact-sql), and [INSERT... SELECT](/sql/t-sql/statements/insert-transact-sql)).</span></span> <span data-ttu-id="f08e5-230">Pour plus d'informations sur les conditions dans lesquelles la journalisation d'une importation en bloc dans une table est minimale, consultez [Prerequisites for Minimal Logging in Bulk Import](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md).</span><span class="sxs-lookup"><span data-stu-id="f08e5-230">For more information about when bulk import into a table is minimally logged, see [Prerequisites for Minimal Logging in Bulk Import](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="f08e5-231">Lorsque la réplication transactionnelle est activée, les opérations BULK INSERT sont entièrement journalisées, même dans le mode de récupération utilisant les journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="f08e5-231">When transactional replication is enabled, BULK INSERT operations are fully logged even under the Bulk Logged recovery model.</span></span>  
  
-   <span data-ttu-id="f08e5-232">Opérations SELECT [into](/sql/t-sql/queries/select-into-clause-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="f08e5-232">SELECT [INTO](/sql/t-sql/queries/select-into-clause-transact-sql) operations.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="f08e5-233">Lorsque la réplication transactionnelle est activée, les opérations SELECT INTO sont entièrement journalisées, même dans le mode de récupération utilisant les journaux de transactions.</span><span class="sxs-lookup"><span data-stu-id="f08e5-233">When transactional replication is enabled, SELECT INTO operations are fully logged even under the Bulk Logged recovery model.</span></span>  
  
-   <span data-ttu-id="f08e5-234">Mises à jour partielles vers des types de données de valeur élevée, en incluant la clause .WRITE dans l'instruction [UPDATE](/sql/t-sql/queries/update-transact-sql) lors de l'insertion ou de l'ajout de nouvelles données.</span><span class="sxs-lookup"><span data-stu-id="f08e5-234">Partial updates to large value data types, using the .WRITE clause in the [UPDATE](/sql/t-sql/queries/update-transact-sql) statement when inserting or appending new data.</span></span> <span data-ttu-id="f08e5-235">Notez que la journalisation minimale n'est pas utilisée quand des valeurs existantes sont mises à jour.</span><span class="sxs-lookup"><span data-stu-id="f08e5-235">Note that minimal logging is not used when existing values are updated.</span></span> <span data-ttu-id="f08e5-236">Pour plus d’informations sur les types de données de valeur élevée, consultez [Types de données &#40;Transact-SQL&#41;](/sql/t-sql/data-types/data-types-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f08e5-236">For more information about large value data types, see [Data Types &#40;Transact-SQL&#41;](/sql/t-sql/data-types/data-types-transact-sql).</span></span>  
  
-   <span data-ttu-id="f08e5-237">Instructions [WRITETEXT](/sql/t-sql/queries/writetext-transact-sql) et [UPDATETEXT](/sql/t-sql/queries/updatetext-transact-sql) lors de l’insertion ou de l’ajout de nouvelles données dans les colonnes de `text` type de données, `ntext` et `image` .</span><span class="sxs-lookup"><span data-stu-id="f08e5-237">[WRITETEXT](/sql/t-sql/queries/writetext-transact-sql) and [UPDATETEXT](/sql/t-sql/queries/updatetext-transact-sql) statements when inserting or appending new data into the `text`, `ntext`, and `image` data type columns.</span></span> <span data-ttu-id="f08e5-238">Notez que la journalisation minimale n'est pas utilisée quand des valeurs existantes sont mises à jour.</span><span class="sxs-lookup"><span data-stu-id="f08e5-238">Note that minimal logging is not used when existing values are updated.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="f08e5-239">L'emploi des instructions WRITETEXT et UPDATETEXT est déconseillé, c'est pourquoi vous devez éviter de les utiliser dans les nouvelles applications.</span><span class="sxs-lookup"><span data-stu-id="f08e5-239">The WRITETEXT and UPDATETEXT statements are deprecated, so you should avoid using them in new applications.</span></span>  
  
-   <span data-ttu-id="f08e5-240">Si la base de données est en mode simple ou de récupération utilisant les journaux de transactions, certaines opérations DDL avec index sont journalisées au minimum qu'elles soient exécutées hors connexion ou en ligne.</span><span class="sxs-lookup"><span data-stu-id="f08e5-240">If the database is set to the simple or bulk-logged recovery model, some index DDL operations are minimally logged whether the operation is executed offline or online.</span></span> <span data-ttu-id="f08e5-241">Les opérations journalisées minimales impliquant les index sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="f08e5-241">The minimally logged index operations are as follows:</span></span>  
  
    -   <span data-ttu-id="f08e5-242">Opérations[CREATE INDEX](/sql/t-sql/statements/create-index-transact-sql) (vues indexées comprises).</span><span class="sxs-lookup"><span data-stu-id="f08e5-242">[CREATE INDEX](/sql/t-sql/statements/create-index-transact-sql) operations (including indexed views).</span></span>  
  
    -   <span data-ttu-id="f08e5-243">Opérations[ALTER INDEX](/sql/t-sql/statements/alter-index-transact-sql) REBUILD ou DBCC DBREINDEX.</span><span class="sxs-lookup"><span data-stu-id="f08e5-243">[ALTER INDEX](/sql/t-sql/statements/alter-index-transact-sql) REBUILD or DBCC DBREINDEX operations.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="f08e5-244">L'emploi de l'instruction DBCC DBREINDEX est déconseillé, c'est pourquoi vous devez l'éviter dans les nouvelles applications.</span><span class="sxs-lookup"><span data-stu-id="f08e5-244">The DBCC DBREINDEX statement is deprecated so you should avoid using it in new applications.</span></span>  
  
    -   <span data-ttu-id="f08e5-245">Reconstruction d'un nouveau segment de mémoire DROP INDEX (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="f08e5-245">DROP INDEX new heap rebuild (if applicable).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="f08e5-246"> La désallocation de pages d'index au cours d'une opération [DROP INDEX](/sql/t-sql/statements/drop-index-transact-sql) est toujours entièrement journalisée.</span><span class="sxs-lookup"><span data-stu-id="f08e5-246">Index page deallocation during a [DROP INDEX](/sql/t-sql/statements/drop-index-transact-sql) operation is always fully logged.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="f08e5-247">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="f08e5-247">Related Tasks</span></span>  
 `Managing the transaction log`  
  
-   [<span data-ttu-id="f08e5-248">Gérer la taille du fichier journal des transactions</span><span class="sxs-lookup"><span data-stu-id="f08e5-248">Manage the Size of the Transaction Log File</span></span>](manage-the-size-of-the-transaction-log-file.md)  
  
-   [<span data-ttu-id="f08e5-249">Résoudre les problèmes liés à un journal des transactions saturé &#40;erreur SQL Server 9002&#41;</span><span class="sxs-lookup"><span data-stu-id="f08e5-249">Troubleshoot a Full Transaction Log &#40;SQL Server Error 9002&#41;</span></span>](troubleshoot-a-full-transaction-log-sql-server-error-9002.md)  
  
 <span data-ttu-id="f08e5-250">**Sauvegarde du journal des transactions (mode de récupération complète)**</span><span class="sxs-lookup"><span data-stu-id="f08e5-250">**Backing Up the Transaction Log (Full Recovery Model)**</span></span>  
  
-   [<span data-ttu-id="f08e5-251">Sauvegarder un journal des transactions &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="f08e5-251">Back Up a Transaction Log &#40;SQL Server&#41;</span></span>](../backup-restore/back-up-a-transaction-log-sql-server.md)  
  
 <span data-ttu-id="f08e5-252">**Restauration du journal des transactions (mode de récupération complète)**</span><span class="sxs-lookup"><span data-stu-id="f08e5-252">**Restoring the Transaction Log (Full Recovery Model)**</span></span>  
  
-  [<span data-ttu-id="f08e5-253">Restaurer une sauvegarde du journal des transactions</span><span class="sxs-lookup"><span data-stu-id="f08e5-253">Restore a Transaction Log Backup</span></span>](../backup-restore/restore-a-transaction-log-backup-sql-server.md)   
  
## <a name="see-also"></a><span data-ttu-id="f08e5-254">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f08e5-254">See Also</span></span>  
 <span data-ttu-id="f08e5-255">[Contrôler la durabilité d’une transaction](control-transaction-durability.md) </span><span class="sxs-lookup"><span data-stu-id="f08e5-255">[Control Transaction Durability](control-transaction-durability.md) </span></span>  
 <span data-ttu-id="f08e5-256">[Conditions requises pour une journalisation minimale dans l'importation en bloc](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md) </span><span class="sxs-lookup"><span data-stu-id="f08e5-256">[Prerequisites for Minimal Logging in Bulk Import](../import-export/prerequisites-for-minimal-logging-in-bulk-import.md) </span></span>  
 <span data-ttu-id="f08e5-257">[Sauvegarde et restauration des bases de données SQL Server](../backup-restore/back-up-and-restore-of-sql-server-databases.md) </span><span class="sxs-lookup"><span data-stu-id="f08e5-257">[Back Up and Restore of SQL Server Databases](../backup-restore/back-up-and-restore-of-sql-server-databases.md) </span></span>  
 <span data-ttu-id="f08e5-258">[Points de contrôle de base de données &#40;SQL Server&#41;](database-checkpoints-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="f08e5-258">[Database Checkpoints &#40;SQL Server&#41;](database-checkpoints-sql-server.md) </span></span>  
 <span data-ttu-id="f08e5-259">[Afficher ou modifier les propriétés d’une base de données](../databases/view-or-change-the-properties-of-a-database.md) </span><span class="sxs-lookup"><span data-stu-id="f08e5-259">[View or Change the Properties of a Database](../databases/view-or-change-the-properties-of-a-database.md) </span></span>  
 [<span data-ttu-id="f08e5-260">Modes de récupération &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="f08e5-260">Recovery Models &#40;SQL Server&#41;</span></span>](../backup-restore/recovery-models-sql-server.md)  
  
  
