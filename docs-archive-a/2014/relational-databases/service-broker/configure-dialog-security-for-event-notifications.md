---
title: Configurer la sécurité du dialogue pour les notifications d’événements | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- event notifications [SQL Server], security
ms.assetid: 12afbc84-2d2a-4452-935e-e1c70e8c53c1
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d83bfe63c3a9b24c2be8d08916dd2384c59edc93
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87612730"
---
# <a name="configure-dialog-security-for-event-notifications"></a><span data-ttu-id="c3a50-102">Configurer la sécurité du dialogue pour les notifications d'événements</span><span class="sxs-lookup"><span data-stu-id="c3a50-102">Configure Dialog Security for Event Notifications</span></span>
  [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="c3a50-103">doit être configurée pour les notifications d'événements qui envoient des messages à un Service Broker résidant sur un serveur distant.</span><span class="sxs-lookup"><span data-stu-id="c3a50-103">dialog security should be configured for event notifications that send messages to a service broker on a remote server.</span></span> <span data-ttu-id="c3a50-104">La sécurité du dialogue doit être configurée manuellement conformément au modèle de sécurité totale du dialogue [!INCLUDE[ssSB](../../includes/sssb-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c3a50-104">Dialog security must be manually configured according to the [!INCLUDE[ssSB](../../includes/sssb-md.md)] dialog full-security model.</span></span> <span data-ttu-id="c3a50-105">Le modèle de sécurité totale permet le chiffrement et le déchiffrement des messages échangés avec les serveurs distants.</span><span class="sxs-lookup"><span data-stu-id="c3a50-105">The full-security model enables encryption and decryption of messages that are sent to and from remote servers.</span></span> <span data-ttu-id="c3a50-106">Même si les notifications d'événements sont envoyées dans une direction, les autres messages, comme les erreurs, sont retournés dans la direction opposée.</span><span class="sxs-lookup"><span data-stu-id="c3a50-106">Although event notifications are sent in one direction, other messages, such as errors, are also returned in the opposite direction.</span></span>  
  
## <a name="configuring-dialog-security-for-event-notifications"></a><span data-ttu-id="c3a50-107">Configuration de la sécurité du dialogue pour les notifications d'événements</span><span class="sxs-lookup"><span data-stu-id="c3a50-107">Configuring Dialog Security for Event Notifications</span></span>  
 <span data-ttu-id="c3a50-108">Les étapes suivantes décrivent le processus à suivre pour implémenter la sécurité du dialogue des notifications d'événements.</span><span class="sxs-lookup"><span data-stu-id="c3a50-108">The process required to implement dialog security for event notification is described in the following steps.</span></span> <span data-ttu-id="c3a50-109">Ces étapes incluent les actions à exécuter aussi bien sur le serveur source que sur le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-109">These steps include actions to take on both the source server and the target server.</span></span> <span data-ttu-id="c3a50-110">Le serveur source correspond au serveur sur lequel la notification d'événement est en cours de création.</span><span class="sxs-lookup"><span data-stu-id="c3a50-110">The source server is the server on which the event notification is being created.</span></span> <span data-ttu-id="c3a50-111">Le serveur cible désigne le serveur qui reçoit le message de notification d'événement.</span><span class="sxs-lookup"><span data-stu-id="c3a50-111">The target server is the server that receives the event notification message.</span></span> <span data-ttu-id="c3a50-112">Vous devez effectuer les actions de chaque étape aussi bien sur le serveur source que sur le serveur cible avant de passer à l'étape suivante.</span><span class="sxs-lookup"><span data-stu-id="c3a50-112">You must complete the actions in each step for both the source server and the target server before you continue to the next step.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="c3a50-113">Tous les certificats doivent être créés avec des dates de début et des dates d'expiration valides.</span><span class="sxs-lookup"><span data-stu-id="c3a50-113">All certificates must be created with valid start and expiration dates.</span></span>  
  
 <span data-ttu-id="c3a50-114">**Étape 1 : établissez un numéro de port TCP et un nom de service cible.**</span><span class="sxs-lookup"><span data-stu-id="c3a50-114">**Step 1: Establish a TCP port number and target service name.**</span></span>  
  
 <span data-ttu-id="c3a50-115">Établissez le port TCP sur lequel le serveur source et le serveur cible recevront les messages.</span><span class="sxs-lookup"><span data-stu-id="c3a50-115">Establish the TCP port on which both the source server and the target server will receive messages.</span></span> <span data-ttu-id="c3a50-116">Vous devez également définir le nom du service cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-116">You must also determine the name of the target service.</span></span>  
  
 <span data-ttu-id="c3a50-117">**Étape 2 : configurez le chiffrement et le partage de certificats pour l'authentification de niveau base de données.**</span><span class="sxs-lookup"><span data-stu-id="c3a50-117">**Step 2: Configure encryption and certificate sharing for database-level authentication.**</span></span>  
  
 <span data-ttu-id="c3a50-118">Exécutez les actions suivantes sur le serveur source et sur le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-118">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="c3a50-119">Serveur source</span><span class="sxs-lookup"><span data-stu-id="c3a50-119">Source server</span></span>|<span data-ttu-id="c3a50-120">Serveur cible</span><span class="sxs-lookup"><span data-stu-id="c3a50-120">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="c3a50-121">Choisissez ou créez la base de données qui contiendra la notification d'événement et la clé principale.</span><span class="sxs-lookup"><span data-stu-id="c3a50-121">Choose or create a database to hold the event notification and master key.</span></span>|<span data-ttu-id="c3a50-122">Choisissez ou créez la base de données qui contiendra la clé principale.</span><span class="sxs-lookup"><span data-stu-id="c3a50-122">Choose or create a database to hold the master key.</span></span>|  
|<span data-ttu-id="c3a50-123">S'il n'existe pas de clé principale pour la base de données source, [créez-la](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c3a50-123">If no master key exists for the source database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span> <span data-ttu-id="c3a50-124">Une clé principale est obligatoire sur les bases de données source et cible pour aider à sécuriser leurs certificats respectifs.</span><span class="sxs-lookup"><span data-stu-id="c3a50-124">A master key is required on both the source and target databases to help secure their respective certificates.</span></span>|<span data-ttu-id="c3a50-125">S'il n'existe pas de clé principale pour la base de données cible, créez-la.</span><span class="sxs-lookup"><span data-stu-id="c3a50-125">If no master key exists for the target database, create a master key.</span></span>|  
|<span data-ttu-id="c3a50-126">[Créez une connexion](/sql/t-sql/statements/create-login-transact-sql) et un [utilisateur](/sql/t-sql/statements/create-user-transact-sql) correspondant pour la base de données source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-126">[Create a login](/sql/t-sql/statements/create-login-transact-sql) and a corresponding [user](/sql/t-sql/statements/create-user-transact-sql) for the source database.</span></span>|<span data-ttu-id="c3a50-127">Créez une connexion et un utilisateur correspondant pour la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-127">Create a login and a corresponding user for the target database.</span></span>|  
|<span data-ttu-id="c3a50-128">[Créez un certificat](/sql/t-sql/statements/create-certificate-transact-sql) dont le propriétaire est l'utilisateur de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-128">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that is owned by the user of the source database.</span></span>|<span data-ttu-id="c3a50-129">Créez un certificat dont le propriétaire est l'utilisateur de la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-129">Create a certificate that is owned by the user of the target database.</span></span>|  
|<span data-ttu-id="c3a50-130">[Sauvegardez le certificat](/sql/t-sql/statements/backup-certificate-transact-sql) dans un fichier accessible par le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-130">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="c3a50-131">Sauvegardez le certificat dans un fichier accessible par le serveur source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-131">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="c3a50-132">[Créez un utilisateur](/sql/t-sql/statements/create-user-transact-sql), en spécifiant l'utilisateur de la base de données cible, ainsi que WITHOUT LOGIN.</span><span class="sxs-lookup"><span data-stu-id="c3a50-132">[Create a user](/sql/t-sql/statements/create-user-transact-sql), specifying the user of the target database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="c3a50-133">Cet utilisateur sera propriétaire du certificat de la base de données cible créé à partir du fichier de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="c3a50-133">This user will own the target database certificate to be created from the backup file.</span></span> <span data-ttu-id="c3a50-134">Il n'est pas nécessaire que l'utilisateur soit mappé à une connexion, parce que le seul objectif de cet utilisateur est d'être propriétaire du certificat de la base de données cible, créé au cours de l'étape 3 suivante.</span><span class="sxs-lookup"><span data-stu-id="c3a50-134">The user does not have to be mapped to a login, because the only purpose of this user is to own the target database certificate created in step 3 that follows.</span></span>|<span data-ttu-id="c3a50-135">Créez un utilisateur, en spécifiant l'utilisateur de la base de données source, ainsi que WITHOUT LOGIN.</span><span class="sxs-lookup"><span data-stu-id="c3a50-135">Create a user, specifying the user of the source database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="c3a50-136">Cet utilisateur sera propriétaire du certificat de la base de données source créé à partir du fichier de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="c3a50-136">This user will own the source database certificate to be created from the backup file.</span></span> <span data-ttu-id="c3a50-137">Il n'est pas nécessaire que l'utilisateur soit mappé à une connexion, parce que le seul objectif de cet utilisateur est d'être propriétaire du certificat de la base de données source, créé au cours de l'étape 3 suivante.</span><span class="sxs-lookup"><span data-stu-id="c3a50-137">The user does not have to be mapped to a login, because the only purpose of this user is to own the source database certificate created in step 3 that follows.</span></span>|  
  
 <span data-ttu-id="c3a50-138">**Étape 3 : partagez les certificats et attribuez les autorisations pour l'authentification de niveau base de données.**</span><span class="sxs-lookup"><span data-stu-id="c3a50-138">**Step 3: Share certificates and grant permissions for database-level authentication.**</span></span>  
  
 <span data-ttu-id="c3a50-139">Exécutez les actions suivantes sur le serveur source et sur le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-139">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="c3a50-140">Serveur source</span><span class="sxs-lookup"><span data-stu-id="c3a50-140">Source server</span></span>|<span data-ttu-id="c3a50-141">Serveur cible</span><span class="sxs-lookup"><span data-stu-id="c3a50-141">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="c3a50-142">[Créez un certificat](/sql/t-sql/statements/create-certificate-transact-sql) à partir du fichier de sauvegarde du certificat cible, en spécifiant comme propriétaire l'utilisateur de la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-142">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target database user as the owner.</span></span>|<span data-ttu-id="c3a50-143">Créez un certificat à partir du fichier de sauvegarde du certificat source, en spécifiant comme propriétaire l'utilisateur de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-143">Create a certificate from the backup file of the source certificate, specifying the source database user as the owner.</span></span>|  
|<span data-ttu-id="c3a50-144">[Attribuez l'autorisation](/sql/t-sql/statements/grant-transact-sql) de création de notification d'événement à l'utilisateur de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-144">[Grant permission](/sql/t-sql/statements/grant-transact-sql) to create the event notification to the source database user.</span></span> <span data-ttu-id="c3a50-145">Pour plus d’informations sur cette autorisation, consultez [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c3a50-145">For more information about this permission, see [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql).</span></span>|<span data-ttu-id="c3a50-146">Attribuez l'autorisation REFERENCES à l'utilisateur de la base de données cible sur le contrat existant de notifications d'événements [!INCLUDE[ssSB](../../includes/sssb-md.md)] : `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span><span class="sxs-lookup"><span data-stu-id="c3a50-146">Grant REFERENCES permission to the target database user on the existing event notifications [!INCLUDE[ssSB](../../includes/sssb-md.md)] contract: `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span></span>|  
|<span data-ttu-id="c3a50-147">[Créez une liaison de service distant](/sql/t-sql/statements/create-remote-service-binding-transact-sql) au service cible et spécifiez les informations d'identification de l'utilisateur de la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-147">[Create a remote service binding](/sql/t-sql/statements/create-remote-service-binding-transact-sql) to the target service and specify the credentials of the target database user.</span></span> <span data-ttu-id="c3a50-148">Les liaisons de service distant garantissent que la clé public du certificat dont l'utilisateur de la base de données source est propriétaire authentifie les messages adressés au serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-148">The remote service binding guarantees that the public key in the certificate owned by the source database user will authenticate messages that are sent to the target server.</span></span>|<span data-ttu-id="c3a50-149">[Attribuez](/sql/t-sql/statements/grant-transact-sql) les autorisations CREATE QUEUE, CREATE SERVICE et CREATE SCHEMA à l'utilisateur de la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-149">[Grant](/sql/t-sql/statements/grant-transact-sql) CREATE QUEUE, CREATE SERVICE, and CREATE SCHEMA permissions to the target database user.</span></span>|  
||<span data-ttu-id="c3a50-150">Si vous n'êtes pas déjà connecté à la base de données comme utilisateur de la base de données cible, connectez-vous maintenant.</span><span class="sxs-lookup"><span data-stu-id="c3a50-150">If not already connected to the database as the target database user, do so now.</span></span>|  
||<span data-ttu-id="c3a50-151">[Créez une file d'attente](/sql/t-sql/statements/create-queue-transact-sql) pour recevoir les messages de notification d'événement et [créez un service](/sql/t-sql/statements/create-service-transact-sql) de remise des messages.</span><span class="sxs-lookup"><span data-stu-id="c3a50-151">[Create a queue](/sql/t-sql/statements/create-queue-transact-sql) to receive the event notification messages and [create a service](/sql/t-sql/statements/create-service-transact-sql) to deliver the messages.</span></span>|  
||<span data-ttu-id="c3a50-152">[Attribuez l'autorisation SEND](/sql/t-sql/statements/grant-transact-sql) sur le service cible à l'utilisateur de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-152">[Grant SEND permission](/sql/t-sql/statements/grant-transact-sql) on the target service to the source database user.</span></span>|  
|<span data-ttu-id="c3a50-153">Fournissez au serveur cible l'identificateur Service Broker de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-153">Provide the service broker identifier of the source database to the target server.</span></span> <span data-ttu-id="c3a50-154">Vous pouvez obtenir cet identificateur en interrogeant la colonne **service_broker_guid** de l’affichage catalogue [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="c3a50-154">This identifier can be obtained by querying the **service_broker_guid** column of the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view.</span></span> <span data-ttu-id="c3a50-155">Pour une notification d’événement de niveau serveur, utilisez l’identificateur Service Broker de **msdb**.</span><span class="sxs-lookup"><span data-stu-id="c3a50-155">For a server-level event notification, use the service broker identifier of **msdb**.</span></span>|<span data-ttu-id="c3a50-156">Fournissez au serveur source l'identificateur Service Broker de la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-156">Provide the service broker identifier of the target database to the source server.</span></span>|  
  
 <span data-ttu-id="c3a50-157">**Étape 4 : créez les itinéraires et configurez l'authentification de niveau serveur.**</span><span class="sxs-lookup"><span data-stu-id="c3a50-157">**Step 4: Create routes and set up server-level authentication.**</span></span>  
  
 <span data-ttu-id="c3a50-158">Exécutez les actions suivantes sur le serveur source et sur le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-158">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="c3a50-159">Serveur source</span><span class="sxs-lookup"><span data-stu-id="c3a50-159">Source server</span></span>|<span data-ttu-id="c3a50-160">Serveur cible</span><span class="sxs-lookup"><span data-stu-id="c3a50-160">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="c3a50-161">[Créez un itinéraire](/sql/t-sql/statements/create-route-transact-sql) vers le service cible et spécifiez l’identificateur Service Broker de la base de données cible et le numéro de port TCP approuvé.</span><span class="sxs-lookup"><span data-stu-id="c3a50-161">[Create a route](/sql/t-sql/statements/create-route-transact-sql) to the target service, and specify the service broker identifier of the target database and the agreed-upon TCP port number.</span></span>|<span data-ttu-id="c3a50-162">Créez un itinéraire vers le service source et spécifiez l'identificateur Service Broker de la base de données source et le numéro de port TCP approuvé.</span><span class="sxs-lookup"><span data-stu-id="c3a50-162">Create a route to the source service, and specify the service broker identifier of the source database and the agreed-upon TCP port number.</span></span> <span data-ttu-id="c3a50-163">Pour spécifier le service source, utilisez le service fourni suivant : `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span><span class="sxs-lookup"><span data-stu-id="c3a50-163">To specify the source service, use the following supplied service: `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span></span>|  
|<span data-ttu-id="c3a50-164">Basculez vers la base de données **master** pour configurer l’authentification de niveau serveur.</span><span class="sxs-lookup"><span data-stu-id="c3a50-164">Switch to the **master** database to configure server-level authentication.</span></span>|<span data-ttu-id="c3a50-165">Basculez vers la base de données **master** pour configurer l’authentification de niveau serveur.</span><span class="sxs-lookup"><span data-stu-id="c3a50-165">Switch to the **master** database to configure server-level authentication.</span></span>|  
|<span data-ttu-id="c3a50-166">S'il n'existe pas de clé principale pour la base de données **master** , [créez-la](/sql/t-sql/statements/create-master-key-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="c3a50-166">If no master key exists for the **master** database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span>|<span data-ttu-id="c3a50-167">S'il n'existe pas de clé principale pour la base de données **master** , créez-la.</span><span class="sxs-lookup"><span data-stu-id="c3a50-167">If no master key exists for the **master** database, create a master key.</span></span>|  
|<span data-ttu-id="c3a50-168">[Créez un certificat](/sql/t-sql/statements/create-certificate-transact-sql) qui authentifie la base de données.</span><span class="sxs-lookup"><span data-stu-id="c3a50-168">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that authenticates the database.</span></span>|<span data-ttu-id="c3a50-169">Créez un certificat qui authentifie la base de données.</span><span class="sxs-lookup"><span data-stu-id="c3a50-169">Create a certificate that authenticates the database.</span></span>|  
|<span data-ttu-id="c3a50-170">[Sauvegardez le certificat](/sql/t-sql/statements/backup-certificate-transact-sql) dans un fichier accessible par le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-170">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="c3a50-171">Sauvegardez le certificat dans un fichier accessible par le serveur source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-171">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="c3a50-172">[Créez un point de terminaison](/sql/t-sql/statements/create-endpoint-transact-sql)et spécifiez le numéro de port TCP approuvé, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *nom_certificat*), ainsi que le nom du certificat d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c3a50-172">[Create an endpoint](/sql/t-sql/statements/create-endpoint-transact-sql), and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|<span data-ttu-id="c3a50-173">Créez un point de terminaison et spécifiez le numéro de port TCP approuvé, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *nom_certificat*), ainsi que le nom du certificat d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c3a50-173">Create an endpoint, and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|  
|<span data-ttu-id="c3a50-174">[Créez une connexion](/sql/t-sql/statements/create-login-transact-sql)et spécifiez celle du serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-174">[Create a login](/sql/t-sql/statements/create-login-transact-sql), and specify the login of the target server.</span></span>|<span data-ttu-id="c3a50-175">Créez une connexion et spécifiez celle du serveur source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-175">Create a login, and specify the login of the source server.</span></span>|  
|<span data-ttu-id="c3a50-176">[Attribuez l'autorisation CONNECT](/sql/t-sql/statements/grant-transact-sql) sur le point de terminaison à la connexion authentificatrice cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-176">[Grant CONNECT permission](/sql/t-sql/statements/grant-transact-sql) on the endpoint to the target authenticator login.</span></span>|<span data-ttu-id="c3a50-177">Attribuez l'autorisation CONNECT sur le point de terminaison à la connexion authentificatrice source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-177">Grant CONNECT permission on the endpoint to the source authenticator login.</span></span>|  
|<span data-ttu-id="c3a50-178">[Créez un utilisateur](/sql/t-sql/statements/create-user-transact-sql)et spécifiez la connexion authentificatrice cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-178">[Create a user](/sql/t-sql/statements/create-user-transact-sql), and specify the target authenticator login.</span></span>|<span data-ttu-id="c3a50-179">Créez un utilisateur et spécifiez la connexion authentificatrice source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-179">Create a user, and specify the source authenticator login.</span></span>|  
  
 <span data-ttu-id="c3a50-180">**Étape 5 : partagez les certificats d'authentification de niveau serveur et créez la notification d'événement.**</span><span class="sxs-lookup"><span data-stu-id="c3a50-180">**Step 5: Share certificates for server-level authentication and create the event notification.**</span></span>  
  
 <span data-ttu-id="c3a50-181">Exécutez les actions suivantes sur le serveur source et sur le serveur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-181">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="c3a50-182">Serveur source</span><span class="sxs-lookup"><span data-stu-id="c3a50-182">Source server</span></span>|<span data-ttu-id="c3a50-183">Serveur cible</span><span class="sxs-lookup"><span data-stu-id="c3a50-183">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="c3a50-184">[Créez un certificat](/sql/t-sql/statements/create-certificate-transact-sql) à partir du fichier de sauvegarde du certificat cible, en spécifiant comme propriétaire l'utilisateur authentificateur cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-184">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target authenticator user as the owner.</span></span>|<span data-ttu-id="c3a50-185">Créez un certificat à partir du fichier de sauvegarde du certificat source, en spécifiant comme propriétaire l'utilisateur authentificateur source.</span><span class="sxs-lookup"><span data-stu-id="c3a50-185">Create a certificate from the backup file of the source certificate, specifying the source authenticator user as the owner.</span></span>|  
|<span data-ttu-id="c3a50-186">Basculez vers la base de données source sur laquelle créer la notification d'événement et, si vous n'êtes pas déjà connecté en tant qu'utilisateur de la base de données source, connectez-vous maintenant.</span><span class="sxs-lookup"><span data-stu-id="c3a50-186">Switch to the source database on which to create the event notification, and if you are not already connected as the source database user, do so now.</span></span>|<span data-ttu-id="c3a50-187">Basculez vers la base de données cible pour recevoir les messages de notification d'événement.</span><span class="sxs-lookup"><span data-stu-id="c3a50-187">Switch to the target database to receive event notification messages.</span></span>|  
|<span data-ttu-id="c3a50-188">[Créez la notification d'événement](/sql/t-sql/statements/create-event-notification-transact-sql)et spécifiez le Service Broker, ainsi que l'identificateur de la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="c3a50-188">[Create the event notification](/sql/t-sql/statements/create-event-notification-transact-sql), and specify the broker service and identifier of the target database.</span></span>||  
  
## <a name="see-also"></a><span data-ttu-id="c3a50-189">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c3a50-189">See Also</span></span>  
 <span data-ttu-id="c3a50-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-193">[Hiérarchie de chiffrement](../security/encryption/encryption-hierarchy.md) </span><span class="sxs-lookup"><span data-stu-id="c3a50-193">[Encryption Hierarchy](../security/encryption/encryption-hierarchy.md) </span></span>  
 <span data-ttu-id="c3a50-194">[Implémenter des notifications d'événements](event-notifications.md) </span><span class="sxs-lookup"><span data-stu-id="c3a50-194">[Implement Event Notifications](event-notifications.md) </span></span>  
 <span data-ttu-id="c3a50-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span></span>  
 <span data-ttu-id="c3a50-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="c3a50-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span></span>  
 [<span data-ttu-id="c3a50-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c3a50-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-event-notification-transact-sql)  
  
  
