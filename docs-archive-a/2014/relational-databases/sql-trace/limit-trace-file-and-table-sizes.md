---
title: Limiter les tailles de fichier et de table de trace | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- maximum file size for traces
- traces [SQL Server], file size
- size [SQL Server], tables
- file rollover option [SQL Server]
- size [SQL Server], files
ms.assetid: 88c31b02-f44c-4a14-be8b-437f2097de12
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b7795dfdadb8fb3bbaa1b55dcd5c962d24a7ba29
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87611716"
---
# <a name="limit-trace-file-and-table-sizes"></a><span data-ttu-id="c764a-102">Limiter les tailles de fichier et de table de trace</span><span class="sxs-lookup"><span data-stu-id="c764a-102">Limit Trace File and Table Sizes</span></span>
  <span data-ttu-id="c764a-103">Les résultats de Trace SQL ont des tailles variables selon les classes d’événements incluses dans la trace et leur mode d’utilisation par [!INCLUDE[ssDE](../../includes/ssde-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c764a-103">SQL Trace results vary in size depending on the event classes that are included in the trace and the way in which the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is used.</span></span> <span data-ttu-id="c764a-104">Si vous tracez des classes d'événements qui se produisent fréquemment, vous pouvez minimiser la quantité de données collectées par la trace en définissant la taille de fichier maximale ou le nombre maximal de lignes.</span><span class="sxs-lookup"><span data-stu-id="c764a-104">If you trace event classes that occur frequently, you can minimize the amount of data that the trace collects by setting the maximum file size or the maximum number of rows.</span></span> <span data-ttu-id="c764a-105">La spécification d'une taille de fichier maximale et/ou d'un nombre maximal de lignes empêche le fichier de trace ou la table de trace de croître au-delà de la limite spécifiée.</span><span class="sxs-lookup"><span data-stu-id="c764a-105">By specifying the maximum file size or rows, you ensure that the trace file or table will not grow beyond the specified limit.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c764a-106">Si vous enregistrez les données de trace dans un fichier existant, vous pouvez ajouter les données au fichier ou écraser le fichier.</span><span class="sxs-lookup"><span data-stu-id="c764a-106">If you save trace data to a file that already exists, you can append data to the file or overwrite the file.</span></span> <span data-ttu-id="c764a-107">Si vous choisissez l'ajout au fichier et que la taille du fichier de trace est déjà supérieure ou égale à la taille de fichier maximale spécifiée, vous en êtes averti et pouvez alors augmenter la taille maximale du fichier ou indiquer un autre fichier.</span><span class="sxs-lookup"><span data-stu-id="c764a-107">If you choose to append data to the file, and the trace file already meets or exceeds the specified maximum file size, you are notified and given the opportunity either to increase the maximum file size or specify a new file.</span></span> <span data-ttu-id="c764a-108">Il en est de même pour les tables de trace.</span><span class="sxs-lookup"><span data-stu-id="c764a-108">The same is true for trace tables.</span></span>  
  
## <a name="maximum-file-size"></a><span data-ttu-id="c764a-109">Taille maximale du fichier</span><span class="sxs-lookup"><span data-stu-id="c764a-109">Maximum File Size</span></span>  
 <span data-ttu-id="c764a-110">Une trace pour laquelle la taille de fichier maximale est spécifiée arrête d'enregistrer les informations de trace dans le fichier dès que cette taille est atteinte.</span><span class="sxs-lookup"><span data-stu-id="c764a-110">A trace that has a maximum file size stops saving trace information to the file after the maximum file size has been reached.</span></span> <span data-ttu-id="c764a-111">Cette option permet de grouper les événements en fichiers plus petits, plus gérables.</span><span class="sxs-lookup"><span data-stu-id="c764a-111">This option allows you to group events into smaller, more manageable files.</span></span> <span data-ttu-id="c764a-112">Elle permet en outre d'améliorer la fiabilité des traces sans assistance car la trace s'arrête dès que la taille de fichier maximale est atteinte.</span><span class="sxs-lookup"><span data-stu-id="c764a-112">In addition, limiting file size makes it safer to run unattended traces, because the trace stops when the maximum file size is reached.</span></span> <span data-ttu-id="c764a-113">Vous pouvez définir la taille de fichier maximale des traces créées au moyen de procédures stockées Transact-SQL ou à l'aide du [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c764a-113">You can set the maximum file size for traces created by means of Transact-SQL stored procedures or by using [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>  
  
 <span data-ttu-id="c764a-114">L'option de taille de fichier maximale est limitée à 1 gigaoctet (Go).</span><span class="sxs-lookup"><span data-stu-id="c764a-114">There is an upper limit of 1 gigabyte (GB) for the maximum file size option.</span></span> <span data-ttu-id="c764a-115">La taille de fichier maximale par défaut est de 5 mégaoctets (Mo).</span><span class="sxs-lookup"><span data-stu-id="c764a-115">The default maximum file size is 5 megabytes (MB).</span></span>  
  
### <a name="enabling-file-rollover"></a><span data-ttu-id="c764a-116">Activation de la substitution de fichier</span><span class="sxs-lookup"><span data-stu-id="c764a-116">Enabling File Rollover</span></span>  
 <span data-ttu-id="c764a-117">L'option de substitution de fichier entraîne la fermeture par [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] du fichier actif et la création d'un nouveau fichier lorsque la taille de fichier maximale est atteinte.</span><span class="sxs-lookup"><span data-stu-id="c764a-117">The file rollover option causes [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to close the current file and create a new file when the maximum file size is reached.</span></span> <span data-ttu-id="c764a-118">Le nouveau fichier porte le même nom que l'ancien mais un nombre entier est ajouté au nom pour indiquer son rang.</span><span class="sxs-lookup"><span data-stu-id="c764a-118">The new file has the same name as the previous file, but an integer is appended to the name to indicate its sequence.</span></span> <span data-ttu-id="c764a-119">Par exemple, si le fichier de trace d'origine se nomme nomfichier_1.trc, le fichier de trace suivant est nomfichier_2.trc, etc.</span><span class="sxs-lookup"><span data-stu-id="c764a-119">For example, if the original trace file is named filename_1.trc, the next trace file is filename_2.trc, and so on.</span></span> <span data-ttu-id="c764a-120">Si le nom affecté à un nouveau fichier de substitution est déjà utilisé par un fichier existant, ce dernier est remplacé sauf s'il est en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="c764a-120">If the name assigned to a new rollover file is already used by an existing file, the existing file is overwritten unless it is read only.</span></span> <span data-ttu-id="c764a-121">L’option de substitution de fichier est activée par défaut lors de l’enregistrement de données de trace dans un fichier.</span><span class="sxs-lookup"><span data-stu-id="c764a-121">The file rollover option is enabled by default when you are saving trace data to a file.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c764a-122">Lorsque l’option de substitution de fichier est activée, la trace se poursuit jusqu'à ce qu'elle soit arrêtée par un autre moyen.</span><span class="sxs-lookup"><span data-stu-id="c764a-122">With the file rollover option on, the trace continues until it is stopped by some other means.</span></span> <span data-ttu-id="c764a-123">Pour arrêter la trace lorsque la taille de fichier maximale est atteinte, vous devez désactiver l’option de substitution de fichier.</span><span class="sxs-lookup"><span data-stu-id="c764a-123">To stop the trace after you have reached the file size limit, disable the file rollover option.</span></span>  
  
 <span data-ttu-id="c764a-124">**Pour définir une taille maximale de fichier de trace**</span><span class="sxs-lookup"><span data-stu-id="c764a-124">**To set a maximum file size for a trace file**</span></span>  
  
 [<span data-ttu-id="c764a-125">Définir la taille maximale d’un fichier de trace &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="c764a-125">Set a Maximum File Size for a Trace File &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/set-a-maximum-file-size-for-a-trace-file-sql-server-profiler.md)  
  
## <a name="maximum-number-of-rows"></a><span data-ttu-id="c764a-126">Nombre maximal de lignes</span><span class="sxs-lookup"><span data-stu-id="c764a-126">Maximum Number of Rows</span></span>  
 <span data-ttu-id="c764a-127">Une trace pour laquelle un nombre maximal de lignes est défini arrête d'enregistrer les informations de trace dans une table dès que le nombre maximal de lignes est atteint.</span><span class="sxs-lookup"><span data-stu-id="c764a-127">A trace with a maximum number of rows stops saving trace information to a table after the maximum number of rows has been reached.</span></span> <span data-ttu-id="c764a-128">Comme chaque événement correspond à une ligne, ce paramètre définit une limite quant au nombre d'événements pouvant être collectés.</span><span class="sxs-lookup"><span data-stu-id="c764a-128">Each event constitutes one row, so this parameter sets a limit on the number of events that are gathered.</span></span> <span data-ttu-id="c764a-129">La définition du nombre maximal de lignes simplifie l'exécution de traces sans surveillance.</span><span class="sxs-lookup"><span data-stu-id="c764a-129">Setting the maximum number of rows makes it easier to run unattended traces.</span></span> <span data-ttu-id="c764a-130">Par exemple, vous pouvez automatiquement démarrer une trace qui enregistre les données de trace dans une table et s'arrête si le fichier devient trop volumineux.</span><span class="sxs-lookup"><span data-stu-id="c764a-130">For example, if you need to start a trace that saves trace data to a table, but you want to stop the trace if the table becomes too large, you can do so automatically.</span></span>  
  
 <span data-ttu-id="c764a-131">Lorsque le nombre maximal de lignes est spécifié et que cette valeur a été atteinte, la trace se poursuit tant que [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] fonctionne, mais les informations de trace ne sont plus enregistrées.</span><span class="sxs-lookup"><span data-stu-id="c764a-131">When the maximum number of rows is specified and the maximum number of rows has been reached, the trace continues to run while [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] is running, but the trace information is no longer recorded.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="c764a-132">continue à afficher les résultats de la trace jusqu’à ce que celle-ci s’arrête.</span><span class="sxs-lookup"><span data-stu-id="c764a-132">continues to display the trace results until the trace stops.</span></span>  
  
 <span data-ttu-id="c764a-133">**Pour définir un nombre maximal de lignes pour une trace**</span><span class="sxs-lookup"><span data-stu-id="c764a-133">**To set a maximum number of rows for a trace**</span></span>  
  
 [<span data-ttu-id="c764a-134">Définir la taille maximale d’une table de trace &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="c764a-134">Set a Maximum Table Size for a Trace Table &#40;SQL Server Profiler&#41;</span></span>](../../tools/sql-server-profiler/set-a-maximum-table-size-for-a-trace-table-sql-server-profiler.md)  
  
## <a name="see-also"></a><span data-ttu-id="c764a-135">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c764a-135">See Also</span></span>  
 [<span data-ttu-id="c764a-136">sp_trace_create &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c764a-136">sp_trace_create &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-trace-create-transact-sql)  
  
  
