---
title: Chiffrement transparent des données avec Azure SQL Database | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- TDE, SQL Database
- Transparent Data Encryption, SQL Database
- encryption (SQL Database) TDE
ms.assetid: 0bf7e8ff-1416-4923-9c4c-49341e208c62
author: CarlRabeler
ms.author: carlrab
ms.openlocfilehash: 6af7c52741b85a2733b93c2b1ed8c03a14dd6343
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87605690"
---
# <a name="transparent-data-encryption-with-azure-sql-database"></a><span data-ttu-id="21c47-102">Chiffrement transparent des données avec Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="21c47-102">Transparent Data Encryption with Azure SQL Database</span></span>
  <span data-ttu-id="21c47-103">Le chiffrement transparent des données (version Preview) de la [!INCLUDE[ssSDSfull](../includes/sssdsfull-md.md)] vous aide à protéger contre la menace d'activités malveillantes en effectuant le chiffrement et le déchiffrement en temps réel de la base de données, des sauvegardes associées et des fichiers journaux des transactions au repos sans nécessiter de modifications de l'application.</span><span class="sxs-lookup"><span data-stu-id="21c47-103">[!INCLUDE[ssSDSfull](../includes/sssdsfull-md.md)] transparent data encryption (preview) helps protect against the threat of malicious activity by performing real-time encryption and decryption of the database, associated backups, and transaction log files at rest without requiring changes to the application.</span></span>

 <span data-ttu-id="21c47-104">TDE chiffre le stockage de l’ensemble de la base de données avec une clé symétrique, appelée « clé de chiffrement de base de données ».</span><span class="sxs-lookup"><span data-stu-id="21c47-104">TDE encrypts the storage of an entire database by using a symmetric key called the database encryption key.</span></span> <span data-ttu-id="21c47-105">Dans [!INCLUDE[ssSDS](../includes/sssds-md.md)] , la clé de chiffrement de base de données est protégée par un certificat de serveur intégré.</span><span class="sxs-lookup"><span data-stu-id="21c47-105">In [!INCLUDE[ssSDS](../includes/sssds-md.md)] the database encryption key is protected by a built-in server certificate.</span></span> <span data-ttu-id="21c47-106">Le certificat de serveur intégré est unique pour chaque serveur [!INCLUDE[ssSDS](../includes/sssds-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="21c47-106">The built-in server certificate is unique for each [!INCLUDE[ssSDS](../includes/sssds-md.md)] server.</span></span> <span data-ttu-id="21c47-107">Si une base de données a une relation GeoDR, elle est protégée par une clé différente sur chaque serveur.</span><span class="sxs-lookup"><span data-stu-id="21c47-107">If a database is in a GeoDR relationship, it is protected by a different key on each server.</span></span> <span data-ttu-id="21c47-108">Si deux bases de données sont connectées au même serveur, elles partagent le même certificat intégré.</span><span class="sxs-lookup"><span data-stu-id="21c47-108">If 2 databases are connected to the same server, they share the same built-in certificate.</span></span> [!INCLUDE[msCoName](../includes/msconame-md.md)] <span data-ttu-id="21c47-109">fait alterner automatiquement ces certificats au moins tous les 90 jours.</span><span class="sxs-lookup"><span data-stu-id="21c47-109">automatically rotates these certificates at least every 90 days.</span></span> <span data-ttu-id="21c47-110">Pour obtenir une description générale du chiffrement transparent des données, consultez [Chiffrement transparent des données &#40;TDE&#41;](../relational-databases/security/encryption/transparent-data-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="21c47-110">For a general description of TDE, see [Transparent Data Encryption &#40;TDE&#41;](../relational-databases/security/encryption/transparent-data-encryption.md).</span></span>

 [!INCLUDE[ssSDSfull](../includes/sssdsfull-md.md)] <span data-ttu-id="21c47-111">ne prend pas en charge l'intégration du coffre de clés Azure au chiffrement transparent des données.</span><span class="sxs-lookup"><span data-stu-id="21c47-111">does not support Azure Key Vault integration with TDE.</span></span> [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] <span data-ttu-id="21c47-112">s'exécute sur une machine virtuelle Azure, il peut utiliser une clé asymétrique provenant du coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="21c47-112">running on an Azure virtual machine can use an asymmetric key from the Key Vault.</span></span> <span data-ttu-id="21c47-113">Pour plus d'informations, consultez [Example A: Transparent Data Encryption by Using an Asymmetric Key from the Key Vault](../relational-databases/security/encryption/extensible-key-management-using-azure-key-vault-sql-server.md#ExampleA).</span><span class="sxs-lookup"><span data-stu-id="21c47-113">For more information, see [Example A: Transparent Data Encryption by Using an Asymmetric Key from the Key Vault](../relational-databases/security/encryption/extensible-key-management-using-azure-key-vault-sql-server.md#ExampleA).</span></span>

||
|-|
|<span data-ttu-id="21c47-114">**S’applique à**: [!INCLUDE[sqldbesa](../includes/sqldbesa-md.md)] (version[préliminaire dans certaines régions](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/?WT.mc_id=TSQL_GetItTag)).</span><span class="sxs-lookup"><span data-stu-id="21c47-114">**Applies to**: [!INCLUDE[sqldbesa](../includes/sqldbesa-md.md)] ([Preview in some regions](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/?WT.mc_id=TSQL_GetItTag)).</span></span>|

> [!IMPORTANT]
>  <span data-ttu-id="21c47-115">Il s'agit actuellement d'une fonctionnalité d'aperçu.</span><span class="sxs-lookup"><span data-stu-id="21c47-115">This is currently a preview feature.</span></span> <span data-ttu-id="21c47-116">Je reconnais et accepte que l'implémentation du chiffrement transparent des données de [!INCLUDE[ssSDS](../includes/sssds-md.md)] dans ma ou mes bases de données soit soumise aux conditions de la version d'évaluation dans mon contrat de licence (par exemple Contrat Entreprise, Contrat Microsoft Azure ou Contrat d'abonnement à Microsoft Online), ainsi que toutes les [conditions supplémentaires d'utilisation applicables de Microsoft Azure Preview](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).</span><span class="sxs-lookup"><span data-stu-id="21c47-116">I acknowledge and agree that implementation of [!INCLUDE[ssSDS](../includes/sssds-md.md)] transparent data encryption in my database(s) is subject to the preview terms in my license agreement (e.g. the Enterprise Agreement, Microsoft Azure Agreement, or Microsoft Online Subscription Agreement), as well as any applicable [Supplemental Terms of Use for Microsoft Azure Preview](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).</span></span>

 <span data-ttu-id="21c47-117">L'aperçu de l'état du chiffrement transparent des données s'applique même au sous-ensemble des régions géographiques où la famille de versions V12 de [!INCLUDE[ssSDS](../includes/sssds-md.md)] est annoncée comme ayant l'état de disponibilité générale.</span><span class="sxs-lookup"><span data-stu-id="21c47-117">The preview of status of TDE applies even in the subset of geographic regions where version family V12 of [!INCLUDE[ssSDS](../includes/sssds-md.md)] is announced as now being in general availability status.</span></span> <span data-ttu-id="21c47-118">Le chiffrement transparent des données (TDE) pour [!INCLUDE[ssSDS](../includes/sssds-md.md)] n'est pas destiné à être utilisé dans les bases de données de production tant que [!INCLUDE[msCoName](../includes/msconame-md.md)] n'annonce pas qu'il est promu de l'aperçu à l'état de disponibilité générale.</span><span class="sxs-lookup"><span data-stu-id="21c47-118">TDE for [!INCLUDE[ssSDS](../includes/sssds-md.md)] is not intended for use in production databases until [!INCLUDE[msCoName](../includes/msconame-md.md)] announces that TDE is promoted from preview to GA.</span></span> <span data-ttu-id="21c47-119">Pour plus d'informations sur la [!INCLUDE[ssSDS](../includes/sssds-md.md)] V12, consultez [Nouveautés d'Azure SQL Database](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/).</span><span class="sxs-lookup"><span data-stu-id="21c47-119">For more information about [!INCLUDE[ssSDS](../includes/sssds-md.md)] V12, see [What's new in Azure SQL Database](https://azure.microsoft.com/documentation/articles/sql-database-preview-whats-new/).</span></span>

##  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="21c47-120">Autorisations</span><span class="sxs-lookup"><span data-stu-id="21c47-120">Permissions</span></span>
 <span data-ttu-id="21c47-121">Pour vous inscrire à la version Preview et configurer TDE via le portail Azure, en utilisant l'API REST ou en utilisant PowerShell, vous devez être connecté en tant que propriétaire, collaborateur ou gestionnaire de sécurité SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="21c47-121">To sign up for the preview and to configure TDE through the Azure portal, by using the REST API, or by using PowerShell, you must be connected as the Azure Owner, Contributor, or SQL Security Manager.</span></span>

 <span data-ttu-id="21c47-122">La configuration de TDE à l'aide de [!INCLUDE[tsql](../includes/tsql-md.md)] requiert les conditions suivantes :</span><span class="sxs-lookup"><span data-stu-id="21c47-122">To configure TDE by using [!INCLUDE[tsql](../includes/tsql-md.md)] requires the following:</span></span>

-   <span data-ttu-id="21c47-123">Vous devez être déjà inscrit pour TDE en version Preview.</span><span class="sxs-lookup"><span data-stu-id="21c47-123">You must be already signed up for the TDE preview.</span></span>

-   <span data-ttu-id="21c47-124">Pour créer la clé de chiffrement de la base de données, vous devez être administrateur de la [!INCLUDE[ssSDS](../includes/sssds-md.md)] ou membre du rôle **dbmanager** dans la base de données master et disposer de l’autorisation **CONTRÔLE** sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="21c47-124">To create the database encryption key you must be a [!INCLUDE[ssSDS](../includes/sssds-md.md)] administrator or you must be a member of the **dbmanager** role in the master database and have the **CONTROL** permission on the database.</span></span>

-   <span data-ttu-id="21c47-125">L'exécution de l'instruction ALTER DATABASE avec l'option SET requiert seulement l'appartenance au rôle **dbmanager** .</span><span class="sxs-lookup"><span data-stu-id="21c47-125">To execute the ALTER DATABASE statement with the SET option only requires membership in the **dbmanager** role.</span></span>

##  <a name="sign-up-for-the-preview-of-tde-and-enable-tde-on-a-database"></a><a name="Preview"></a><span data-ttu-id="21c47-126">S’inscrire à la version préliminaire de TDE et activer TDE sur une base de données</span><span class="sxs-lookup"><span data-stu-id="21c47-126">Sign Up for the Preview of TDE and Enable TDE on a Database</span></span>

1.  <span data-ttu-id="21c47-127">Visitez le portail Azure à l’adresse [https://portal.azure.com](https://portal.azure.com) et connectez-vous avec votre compte administrateur ou contributeur Azure.</span><span class="sxs-lookup"><span data-stu-id="21c47-127">Visit the Azure Portal at [https://portal.azure.com](https://portal.azure.com) and sign-in with your Azure Administrator or Contributor account.</span></span>

2.  <span data-ttu-id="21c47-128">Dans la bannière de gauche, cliquez sur **PARCOURIR**, puis cliquez sur **Bases de données SQL**.</span><span class="sxs-lookup"><span data-stu-id="21c47-128">On the left banner, click to **BROWSE**, and then click **SQL databases**.</span></span>

3.  <span data-ttu-id="21c47-129">Avec l'option **Bases de données SQL** sélectionnée dans le volet gauche, cliquez sur votre base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="21c47-129">With **SQL databases** selected in the left pane, click your user database.</span></span>

4.  <span data-ttu-id="21c47-130">Dans le volet de la base de données, cliquez sur **Tous les paramètres**.</span><span class="sxs-lookup"><span data-stu-id="21c47-130">In the database blade, click **All settings**.</span></span>

5.  <span data-ttu-id="21c47-131">Dans le volet **Paramètres** , cliquez sur **Chiffrement des données transparent (version Preview)** pour ouvrir le volet **Chiffrement transparent des données – version PREVIEW** .</span><span class="sxs-lookup"><span data-stu-id="21c47-131">In the **Settings** blade, click **Transparent data encryption (preview)** part to open the **Transparent data encryption PREVIEW** blade.</span></span> <span data-ttu-id="21c47-132">Si vous ne vous êtes pas déjà inscrit à la version Preview de TDE, les paramètres de chiffrement de données seront désactivés jusqu'à ce que vous soyez inscrit.</span><span class="sxs-lookup"><span data-stu-id="21c47-132">If you have not already signed up for the TDE preview, the data encryption settings will be disabled until you complete signup.</span></span>

6.  <span data-ttu-id="21c47-133">Cliquez sur **CONDITIONS D'UTILISATION DE LA VERSION PREVIEW**.</span><span class="sxs-lookup"><span data-stu-id="21c47-133">Click **PREVIEW TERMS**.</span></span>

7.  <span data-ttu-id="21c47-134">Lisez les conditions de la préversion et, si vous en acceptez les termes, activez la case à cocher **encryptionPreview de données transparentes** , puis cliquez sur **OK** près du bas de la page.</span><span class="sxs-lookup"><span data-stu-id="21c47-134">Read the terms of the preview, and if you agree to the terms, select the **Transparent Data encryptionPreview terms** check box, and then click **OK** near the bottom of the page.</span></span> <span data-ttu-id="21c47-135">Retour au panneau **encryptionPREVIEW de données** , où le bouton **chiffrement des données** doit maintenant être activé.</span><span class="sxs-lookup"><span data-stu-id="21c47-135">Returning to the **Data encryptionPREVIEW** blade, where the **Data encryption** button should now be enabled.</span></span>

8.  <span data-ttu-id="21c47-136">Dans le volet **Chiffrement des données, version PREVIEW** , changez le bouton **Chiffrement des données** en **Activé**, puis cliquez sur **Enregistrer** (en haut de la page) pour appliquer le paramètre.</span><span class="sxs-lookup"><span data-stu-id="21c47-136">In the **Data encryption PREVIEW** blade, move the **Data encryption** button to **On**, and then click **Save** (at the top of the page) to apply the setting.</span></span> <span data-ttu-id="21c47-137">L'élément **État du chiffrement** indiquera approximativement la progression du chiffrement transparent des données.</span><span class="sxs-lookup"><span data-stu-id="21c47-137">The **Encryption status** will approximate the progress of the transparent data encryption.</span></span>

     <span data-ttu-id="21c47-138">![SQLDB_TDE_TermsNewUI](../../2014/database-engine/media/sqldb-tde-termsnewui.png "SQLDB_TDE_TermsNewUI")</span><span class="sxs-lookup"><span data-stu-id="21c47-138">![SQLDB_TDE_TermsNewUI](../../2014/database-engine/media/sqldb-tde-termsnewui.png "SQLDB_TDE_TermsNewUI")</span></span>

     <span data-ttu-id="21c47-139">Vous pouvez également surveiller la progression du chiffrement en vous connectant à la [!INCLUDE[ssSDS](../includes/sssds-md.md)] à l'aide d'un outil de requête comme [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] en tant qu'utilisateur de base de données avec l'autorisation **AFFICHER L'ÉTAT DE LA BASE DE DONNÉES** .</span><span class="sxs-lookup"><span data-stu-id="21c47-139">You can also monitor the progress of encryption by connecting to [!INCLUDE[ssSDS](../includes/sssds-md.md)] using a query tool such as [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] as a database user with the **VIEW DATABASE STATE** permission.</span></span> <span data-ttu-id="21c47-140">Interrogez la `encryption_state` colonne de la vue [sys. dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="21c47-140">Query the `encryption_state` column of the [sys.dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql) view.</span></span>

##  <a name="enabling-tde-on-sssds-by-using-transact-sql"></a><a name="Encrypt"></a><span data-ttu-id="21c47-141">Activation de TDE sur [!INCLUDE[ssSDS](../includes/sssds-md.md)] à l’aide de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="21c47-141">Enabling TDE on [!INCLUDE[ssSDS](../includes/sssds-md.md)] by Using Transact-SQL</span></span>
 <span data-ttu-id="21c47-142">Les étapes suivantes supposent que vous êtes déjà inscrit à la version Preview.</span><span class="sxs-lookup"><span data-stu-id="21c47-142">The following steps, assume you have already signed up for the preview.</span></span>

###  <a name="TsqlProcedure"></a>

1.  <span data-ttu-id="21c47-143">Connectez-vous à la base de données en utilisant une connexion correspondant à un administrateur ou à un membre du rôle **dbmanager** dans la base de données master.</span><span class="sxs-lookup"><span data-stu-id="21c47-143">Connect to the database using a login that is an administrator or a member of the **dbmanager** role in the master database.</span></span>

2.  <span data-ttu-id="21c47-144">Exécutez les instructions suivantes pour créer une clé de chiffrement de base de données et pour chiffrer la base de données.</span><span class="sxs-lookup"><span data-stu-id="21c47-144">Execute the following statements to create a database encryption key and encrypt the database.</span></span>

    ```sql
    -- Create the database encryption key that will be used for TDE.
    CREATE DATABASE ENCRYPTION KEY 
    WITH ALGORITHM = AES_256 
    ENCRYPTION BY SERVER CERTIFICATE ##MS_TdeCertificate##;

    -- Enable encryption
    ALTER DATABASE [AdventureWorks] SET ENCRYPTION ON;
    GO
    ```

3.  <span data-ttu-id="21c47-145">Pour surveiller la progression du chiffrement sur [!INCLUDE[ssSDS](../includes/sssds-md.md)] , les utilisateurs de base de données avec l’autorisation **afficher l’état de la base de** données peuvent interroger la `encryption_state` colonne de la vue [sys. dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="21c47-145">To monitor the progress of encryption on [!INCLUDE[ssSDS](../includes/sssds-md.md)], database users with the **VIEW DATABASE STATE** permission can query the `encryption_state` column of the [sys.dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql) view.</span></span>

## <a name="enabling-tde-on-sql-database-by-using-powershell"></a><span data-ttu-id="21c47-146">Activation de TDE sur SQL Database en utilisant PowerShell</span><span class="sxs-lookup"><span data-stu-id="21c47-146">Enabling TDE on SQL Database by Using PowerShell</span></span>
 <span data-ttu-id="21c47-147">En utilisant Azure PowerShell, vous pouvez exécuter la commande suivante pour activer ou désactiver TDE.</span><span class="sxs-lookup"><span data-stu-id="21c47-147">Using the Azure PowerShell you can run the following command to turn TDE on/off.</span></span> <span data-ttu-id="21c47-148">Vous devez connecter votre compte dans la fenêtre PS avant d'exécuter la commande.</span><span class="sxs-lookup"><span data-stu-id="21c47-148">You do have to connect your account to the PS window before running the command.</span></span> <span data-ttu-id="21c47-149">Les étapes suivantes supposent que vous êtes déjà inscrit à la version Preview.</span><span class="sxs-lookup"><span data-stu-id="21c47-149">The following steps, assume you have already signed up for the preview.</span></span> <span data-ttu-id="21c47-150">Pour plus d'informations sur PowerShell, consultez [Comment installer et configurer Azure PowerShell](https://azure.microsoft.com/documentation/articles/powershell-install-configure/).</span><span class="sxs-lookup"><span data-stu-id="21c47-150">For additional information about PowerShell, see [How to install and configure Azure PowerShell](https://azure.microsoft.com/documentation/articles/powershell-install-configure/).</span></span>

1.  <span data-ttu-id="21c47-151">Pour activer TDE, retournez l'état de TDE et affichez l'activité de chiffrement.</span><span class="sxs-lookup"><span data-stu-id="21c47-151">To enable TDE, return the TDE status, and view the encryption activity.</span></span>

    ```powershell
    Switch-AzureMode -Name AzureResourceManager
    Set-AzureSqlDatabaseTransparentDataEncryption -ServerName "myserver" -ResourceGroupName "Default-SQL-WestUS" -DatabaseName "database1" -State "Enabled"

    Get-AzureSqlDatabaseTransparentDataEncryption -ServerName "myserver" -ResourceGroupName "Default-SQL-WestUS" -DatabaseName "database1"
    Get-AzureSqlDatabaseTransparentDataEncryptionActivity -ServerName "myserver" -ResourceGroupName "Default-SQL-WestUS" -DatabaseName "database1"
    ```

2.  <span data-ttu-id="21c47-152">Pour désactiver TDE :</span><span class="sxs-lookup"><span data-stu-id="21c47-152">To disable TDE:</span></span>

    ```powershell
    Set-AzureSqlDatabaseTransparentDataEncryption -ServerName "myserver" -ResourceGroupName "Default-SQL-WestUS" -DatabaseName "database1" -State "Disabled"
    Switch-AzureMode -Name AzureServiceManagement
    ```

##  <a name="decrypting-a-tde-protected-database-on-sssds"></a><a name="Decrypt"></a><span data-ttu-id="21c47-153">Déchiffrement d’une base de données protégée par TDE sur[!INCLUDE[ssSDS](../includes/sssds-md.md)]</span><span class="sxs-lookup"><span data-stu-id="21c47-153">Decrypting a TDE Protected Database on [!INCLUDE[ssSDS](../includes/sssds-md.md)]</span></span>

#### <a name="to-disable-tde-by-using-the-azure-portal"></a><span data-ttu-id="21c47-154">Pour désactiver TDE en utilisant le portail Azure</span><span class="sxs-lookup"><span data-stu-id="21c47-154">To Disable TDE by Using the Azure Portal</span></span>

1.  <span data-ttu-id="21c47-155">Visitez le portail Azure à l’adresse [https://portal.azure.com](https://portal.azure.com) et connectez-vous avec votre compte administrateur ou contributeur Azure.</span><span class="sxs-lookup"><span data-stu-id="21c47-155">Visit the Azure Portal at [https://portal.azure.com](https://portal.azure.com) and sign-in with your Azure Administrator or Contributor account.</span></span>

2.  <span data-ttu-id="21c47-156">Dans la bannière de gauche, cliquez sur **PARCOURIR**, puis cliquez sur **Bases de données SQL**.</span><span class="sxs-lookup"><span data-stu-id="21c47-156">On the left banner, click to **BROWSE**, and then click **SQL databases**.</span></span>

3.  <span data-ttu-id="21c47-157">Avec l'option **Bases de données SQL** sélectionnée dans le volet gauche, cliquez sur votre base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="21c47-157">With **SQL databases** selected in the left pane, click your user database.</span></span>

4.  <span data-ttu-id="21c47-158">Dans le volet de la base de données, cliquez sur **Tous les paramètres**.</span><span class="sxs-lookup"><span data-stu-id="21c47-158">In the database blade, click **All settings**.</span></span>

5.  <span data-ttu-id="21c47-159">Dans le volet **Paramètres** , cliquez sur **Chiffrement des données transparent (version Preview)** pour ouvrir le volet **Chiffrement transparent des données – version PREVIEW** .</span><span class="sxs-lookup"><span data-stu-id="21c47-159">In the **Settings** blade, click **Transparent data encryption (preview)** part to open the **Transparent data encryption PREVIEW** blade.</span></span>

6.  <span data-ttu-id="21c47-160">Dans le volet **Chiffrement transparent des données, version PREVIEW** , changez le bouton **Chiffrement des données** en **Désactivé**, puis cliquez sur **Enregistrer** (en haut de la page) pour appliquer le paramètre.</span><span class="sxs-lookup"><span data-stu-id="21c47-160">In the **Transparent data encryption PREVIEW** blade, move the **Data encryption** button to **Off**, and then click **Save** (at the top of the page) to apply the setting.</span></span> <span data-ttu-id="21c47-161">L'élément **État du chiffrement** indiquera approximativement la progression du déchiffrement transparent des données.</span><span class="sxs-lookup"><span data-stu-id="21c47-161">The **Encryption status** will approximate the progress of the transparent data decryption.</span></span>

     <span data-ttu-id="21c47-162">Vous pouvez également surveiller la progression du déchiffrement en vous connectant à la [!INCLUDE[ssSDS](../includes/sssds-md.md)] à l'aide d'un outil de requête comme [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] en tant qu'utilisateur de base de données avec l'autorisation **AFFICHER L'ÉTAT DE LA BASE DE DONNÉES** .</span><span class="sxs-lookup"><span data-stu-id="21c47-162">You can also monitor the progress of decryption by connecting to [!INCLUDE[ssSDS](../includes/sssds-md.md)] using a query tool such as [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] as a database user with the **VIEW DATABASE STATE** permission.</span></span> <span data-ttu-id="21c47-163">Interrogez la `encryption_state` colonne de la vue [sys. dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="21c47-163">Query the `encryption_state` column of the [sys.dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql)view.</span></span>

#### <a name="to-disable-tde-by-using-transact-sql"></a><span data-ttu-id="21c47-164">Pour désactiver TDE en utilisant Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="21c47-164">To Disable TDE by Using Transact-SQL</span></span>

1.  <span data-ttu-id="21c47-165">Connectez-vous à la base de données en utilisant une connexion correspondant à un administrateur ou à un membre du rôle **dbmanager** dans la base de données master.</span><span class="sxs-lookup"><span data-stu-id="21c47-165">Connect to the database using a login that is an administrator or a member of the **dbmanager** role in the master database.</span></span>

2.  <span data-ttu-id="21c47-166">Exécutez les instructions suivantes pour déchiffrer la base de données.</span><span class="sxs-lookup"><span data-stu-id="21c47-166">Execute the following statements to decrypt the database.</span></span>

    ```sql
    -- Enable encryption
    ALTER DATABASE [AdventureWorks] SET ENCRYPTION OFF;
    GO
    ```

3.  <span data-ttu-id="21c47-167">Pour surveiller la progression du chiffrement sur [!INCLUDE[ssSDS](../includes/sssds-md.md)] , les utilisateurs de base de données avec l’autorisation **afficher l’état de la base de** données peuvent interroger la `encryption_state` colonne de la vue [sys. dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql) .</span><span class="sxs-lookup"><span data-stu-id="21c47-167">To monitor the progress of encryption on [!INCLUDE[ssSDS](../includes/sssds-md.md)], database users with the **VIEW DATABASE STATE** permission can query the `encryption_state` column of the [sys.dm_database_encryption_keys](/sql/relational-databases/system-dynamic-management-views/sys-dm-database-encryption-keys-transact-sql) view.</span></span>

##  <a name="working-with-tde-protected-databases-on-sssds"></a><a name="Working"></a><span data-ttu-id="21c47-168">Utilisation des bases de données protégées par TDE sur[!INCLUDE[ssSDS](../includes/sssds-md.md)]</span><span class="sxs-lookup"><span data-stu-id="21c47-168">Working with TDE Protected Databases on [!INCLUDE[ssSDS](../includes/sssds-md.md)]</span></span>
 <span data-ttu-id="21c47-169">Il n'est pas nécessaire de déchiffrer les bases de données pour effectuer des opérations dans Azure.</span><span class="sxs-lookup"><span data-stu-id="21c47-169">You do not need to decrypt databases for operations within Azure.</span></span> <span data-ttu-id="21c47-170">La base de données cible hérite de façon transparente des paramètres de TDE sur la base de données source ou sur la base de données principale.</span><span class="sxs-lookup"><span data-stu-id="21c47-170">The TDE settings on the source database or primary database are transparently inherited on the target.</span></span> <span data-ttu-id="21c47-171">Cela inclut les opérations impliquant :</span><span class="sxs-lookup"><span data-stu-id="21c47-171">This includes operations involving:</span></span>

-   <span data-ttu-id="21c47-172">La géo-restauration</span><span class="sxs-lookup"><span data-stu-id="21c47-172">Geo-Restore</span></span>

-   <span data-ttu-id="21c47-173">La restauration à un moment donné en libre-service</span><span class="sxs-lookup"><span data-stu-id="21c47-173">Self-Service Point in Time Restore</span></span>

-   <span data-ttu-id="21c47-174">La restauration d'une base de données supprimée</span><span class="sxs-lookup"><span data-stu-id="21c47-174">Restore a Deleted Database</span></span>

-   <span data-ttu-id="21c47-175">La géo-réplication active</span><span class="sxs-lookup"><span data-stu-id="21c47-175">Active Geo_Replication</span></span>

-   <span data-ttu-id="21c47-176">La création d'une copie de base de données</span><span class="sxs-lookup"><span data-stu-id="21c47-176">Creating a Database Copy</span></span>

##  <a name="moving-a-tde-protected-database-on-using-bacpac-files"></a><a name="Moving"></a><span data-ttu-id="21c47-177">Déplacement d’une base de données protégée par TDE sur à l’aide de. Fichiers BacPac</span><span class="sxs-lookup"><span data-stu-id="21c47-177">Moving a TDE Protected Database on using .Bacpac Files</span></span>
 <span data-ttu-id="21c47-178">Lors de l’exportation d’une base de données protégée par TDE à l’aide de la fonction d’exportation de base de données dans le portail [!INCLUDE[ssSDSfull](../includes/sssdsfull-md.md)] ou à l’aide de l’Assistant Importation et exportation de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], le contenu de la base de données n’est pas chiffré.</span><span class="sxs-lookup"><span data-stu-id="21c47-178">When exporting a TDE protected database using the Export Database function in the [!INCLUDE[ssSDSfull](../includes/sssdsfull-md.md)] Portal or the [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Import and Export Wizard, the content of the database is not encrypted.</span></span> <span data-ttu-id="21c47-179">Le contenu est stocké dans des fichiers .bacpac qui ne sont pas chiffrés.</span><span class="sxs-lookup"><span data-stu-id="21c47-179">The content is stored in .bacpac files which are not encrypted.</span></span>  <span data-ttu-id="21c47-180">Veillez à protéger les fichiers .bacpac de façon appropriée et à activer le TDE une fois l'importation de la base de données terminée.</span><span class="sxs-lookup"><span data-stu-id="21c47-180">Be sure to protect the .bacpac files appropriately and enable TDE once import of the new database is completed.</span></span>

## <a name="related-sql-server-topic"></a><span data-ttu-id="21c47-181">Rubrique SQL Server connexes</span><span class="sxs-lookup"><span data-stu-id="21c47-181">Related SQL Server Topic</span></span>
 [<span data-ttu-id="21c47-182">Activer TDE à l’aide de EKM</span><span class="sxs-lookup"><span data-stu-id="21c47-182">Enable TDE Using EKM</span></span>](../relational-databases/security/encryption/enable-tde-on-sql-server-using-ekm.md)

## <a name="see-also"></a><span data-ttu-id="21c47-183">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="21c47-183">See Also</span></span>
 <span data-ttu-id="21c47-184">[Transparent Data Encryption &#40;TDE&#41;](../relational-databases/security/encryption/transparent-data-encryption.md) [créer des informations d’identification &#40;transact-SQL&#41;](/sql/t-sql/statements/create-credential-transact-sql) [créer une clé asymétrique &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-asymmetric-key-transact-sql) [create Database Encryption Key &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-database-encryption-key-transact-sql) [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql) [ALTER DATABASE SET options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options)</span><span class="sxs-lookup"><span data-stu-id="21c47-184">[Transparent Data Encryption &#40;TDE&#41;](../relational-databases/security/encryption/transparent-data-encryption.md) [CREATE CREDENTIAL &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-credential-transact-sql) [CREATE ASYMMETRIC KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-asymmetric-key-transact-sql) [CREATE DATABASE ENCRYPTION KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-database-encryption-key-transact-sql) [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql) [ALTER DATABASE SET Options &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql-set-options)</span></span>
