---
title: Démarrer SQL Server en mode mono-utilisateur | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- starting SQL Server, single-user mode
- single-user mode [SQL Server]
ms.assetid: 72eb4fc1-7af4-4ec6-9e02-11a69e02748e
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: b2600524da45f9a81f155432397cee2e7e876274
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87601080"
---
# <a name="start-sql-server-in-single-user-mode"></a><span data-ttu-id="b24da-102">Démarrer SQL Server en mode mono-utilisateur</span><span class="sxs-lookup"><span data-stu-id="b24da-102">Start SQL Server in Single-User Mode</span></span>
  <span data-ttu-id="b24da-103">Dans certaines circonstances, vous devrez peut-être démarrer une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur à l’aide de **startup option -m.**</span><span class="sxs-lookup"><span data-stu-id="b24da-103">Under certain circumstances, you may have to start an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode by using the **startup option -m.**</span></span> <span data-ttu-id="b24da-104">Vous pouvez par exemple vouloir modifier les options de configuration du serveur ou rétablir une base de données master ou une autre base de données système endommagées.</span><span class="sxs-lookup"><span data-stu-id="b24da-104">For example, you may want to change server configuration options or recover a damaged master database or other system database.</span></span> <span data-ttu-id="b24da-105">Les deux actions requièrent le démarrage d'une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b24da-105">Both actions require starting an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode.</span></span>  
  
 <span data-ttu-id="b24da-106">Le démarrage de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur permet à tout membre du groupe Administrateurs local de l'ordinateur de se connecter à l'instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en tant que membre du rôle serveur fixe sysadmin.</span><span class="sxs-lookup"><span data-stu-id="b24da-106">Starting [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode enables any member of the computer's local Administrators group to connect to the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] as a member of the sysadmin fixed server role.</span></span> <span data-ttu-id="b24da-107">Pour plus d’informations, consultez [Se connecter à SQL Server lorsque les administrateurs système n’y ont plus accès](connect-to-sql-server-when-system-administrators-are-locked-out.md).</span><span class="sxs-lookup"><span data-stu-id="b24da-107">For more information, see [Connect to SQL Server When System Administrators Are Locked Out](connect-to-sql-server-when-system-administrators-are-locked-out.md).</span></span>  
  
 <span data-ttu-id="b24da-108">Lorsque vous démarrez une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur, notez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="b24da-108">When you start an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode, note the following:</span></span>  
  
-   <span data-ttu-id="b24da-109">Un seul utilisateur peut se connecter au serveur.</span><span class="sxs-lookup"><span data-stu-id="b24da-109">Only one user can connect to the server.</span></span>  
  
-   <span data-ttu-id="b24da-110">Le processus CHECKPOINT n'est pas exécuté.</span><span class="sxs-lookup"><span data-stu-id="b24da-110">The CHECKPOINT process is not executed.</span></span> <span data-ttu-id="b24da-111">Par défaut, il est exécuté automatiquement au démarrage.</span><span class="sxs-lookup"><span data-stu-id="b24da-111">By default, it is executed automatically at startup.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b24da-112">Arrêtez le service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent avant de vous connecter à une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur ; sinon, le service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent utilise cette connexion et, par conséquent, la bloque.</span><span class="sxs-lookup"><span data-stu-id="b24da-112">Stop the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service before connecting to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode; otherwise, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service uses the connection, thereby blocking it.</span></span>  
  
 <span data-ttu-id="b24da-113">Lorsque vous démarrez une instance de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur, [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] peut se connecter à [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b24da-113">When you start an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode, [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] can connect to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b24da-114">L'exécution de l'Explorateur d'objets dans [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] peut échouer, car il requiert plusieurs connexions pour certaines opérations.</span><span class="sxs-lookup"><span data-stu-id="b24da-114">Object Explorer in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] might fail because it requires more than one connection for some operations.</span></span> <span data-ttu-id="b24da-115">Pour gérer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur, exécutez des instructions [!INCLUDE[tsql](../../includes/tsql-md.md)] en vous connectant uniquement via l’éditeur de requête dans [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], ou utilisez l’ [utilitaire sqlcmd](../../tools/sqlcmd-utility.md).</span><span class="sxs-lookup"><span data-stu-id="b24da-115">To manage [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode, execute [!INCLUDE[tsql](../../includes/tsql-md.md)] statements by connecting only through the Query Editor in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], or use the [sqlcmd utility](../../tools/sqlcmd-utility.md).</span></span>  
  
 <span data-ttu-id="b24da-116">Lorsque vous utilisez l’option **-m** avec **sqlcmd** ou [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] , vous pouvez limiter les connexions à une application cliente spécifiée.</span><span class="sxs-lookup"><span data-stu-id="b24da-116">When you use the **-m** option with **sqlcmd** or [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], you can limit the connections to a specified client application.</span></span> <span data-ttu-id="b24da-117">Par exemple, **-m "sqlcmd"** limite les connexions à une connexion unique et cette connexion doit s’identifier en tant que programme client **sqlcmd** .</span><span class="sxs-lookup"><span data-stu-id="b24da-117">For example, **-m"sqlcmd"** limits connections to a single connection and that connection must identify itself as the **sqlcmd** client program.</span></span> <span data-ttu-id="b24da-118">Utilisez cette option lorsque vous démarrez [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en mode mono-utilisateur et qu'une application cliente inconnue utilise la seule connexion disponible.</span><span class="sxs-lookup"><span data-stu-id="b24da-118">Use this option when you are starting [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in single-user mode and an unknown client application is taking the only available connection.</span></span> <span data-ttu-id="b24da-119">Pour vous connecter par le biais de l’éditeur de requête dans [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], utilisez **-m"Microsoft SQL Server Management Studio - Query"** .</span><span class="sxs-lookup"><span data-stu-id="b24da-119">To connect through the Query Editor in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], use **-m"Microsoft SQL Server Management Studio - Query"**.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="b24da-120">N'utilisez pas cette option comme fonctionnalité de sécurité.</span><span class="sxs-lookup"><span data-stu-id="b24da-120">Do not use this option as a security feature.</span></span> <span data-ttu-id="b24da-121">L'application cliente fournit le nom d'application cliente et peut fournir un nom erroné dans la chaîne de connexion.</span><span class="sxs-lookup"><span data-stu-id="b24da-121">The client application provides the client application name, and can provide a false name as part of the connection string.</span></span>  
  
## <a name="note-for-clustered-installations"></a><span data-ttu-id="b24da-122">Remarque relative aux installations en cluster</span><span class="sxs-lookup"><span data-stu-id="b24da-122">Note for Clustered installations</span></span>  
 <span data-ttu-id="b24da-123">Pour l'installation [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] dans un environnement en cluster, lorsque [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est démarré en mode mono-utilisateur, la DLL de ressource de cluster utilise la connexion disponible, ce qui bloque par conséquent les autres connexions au serveur.</span><span class="sxs-lookup"><span data-stu-id="b24da-123">For [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation in a clustered environment, when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is started in single user mode, the cluster resource dll uses up the available connection thereby blocking any other connections to the server.</span></span> <span data-ttu-id="b24da-124">Lorsque [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est dans cet état, si vous essayez de mettre la ressource Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en ligne, la ressource SQL peut basculer à un nœud différent si la ressource est configurée pour affecter le groupe.</span><span class="sxs-lookup"><span data-stu-id="b24da-124">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is in this state, if you try to bring [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent resource online, it may fail over the SQL resource to a different node if the resource is configured to affect the group.</span></span>  
  
 <span data-ttu-id="b24da-125">Pour contourner le problème, utilisez la procédure suivante :</span><span class="sxs-lookup"><span data-stu-id="b24da-125">To get around the problem use the following procedure:</span></span>  
  
1.  <span data-ttu-id="b24da-126">Supprimez le paramètre de démarrage -m des propriétés avancées [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b24da-126">Remove the -m startup parameter from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] advanced Properties.</span></span>  
  
2.  <span data-ttu-id="b24da-127">Mettez la ressource [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] hors connexion.</span><span class="sxs-lookup"><span data-stu-id="b24da-127">Take the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] resource offline.</span></span>  
  
3.  <span data-ttu-id="b24da-128">À partir du nœud de propriétaire actuel de ce groupe, émettez le commande suivante de l'invite de commandes :</span><span class="sxs-lookup"><span data-stu-id="b24da-128">From the current owner node of this group, issue the following command from the command prompt:</span></span>  
    <span data-ttu-id="b24da-129">net start MSSQLSERVER /m.</span><span class="sxs-lookup"><span data-stu-id="b24da-129">net start MSSQLSERVER /m.</span></span>  
  
4.  <span data-ttu-id="b24da-130">Vérifiez dans la console de l'administrateur de cluster ou de gestion de cluster de basculement que la ressource [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est encore hors connexion.</span><span class="sxs-lookup"><span data-stu-id="b24da-130">Verify from the cluster administrator or failover cluster management console that the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] resource is still offline.</span></span>  
  
5.  <span data-ttu-id="b24da-131">Connectez-vous maintenant à [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] en utilisant la commande suivante et exécutez l’opération nécessaire : SQLCMD -E -S\<servername>.</span><span class="sxs-lookup"><span data-stu-id="b24da-131">Connect to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] now using the following command and do the necessary operation: SQLCMD -E -S\<servername>.</span></span>  
  
6.  <span data-ttu-id="b24da-132">Une fois que l'opération est terminée, fermez l'invite de commandes et remettez les ressources SQL et d'autres ressources en ligne via la console de l'administrateur de cluster.</span><span class="sxs-lookup"><span data-stu-id="b24da-132">Once the operation is complete, close the command prompt and bring back the SQL and other resources online through cluster administrator.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b24da-133">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b24da-133">See Also</span></span>  
 <span data-ttu-id="b24da-134">[Démarrer, arrêter ou suspendre le service SQL Server Agent](../../ssms/agent/start-stop-or-pause-the-sql-server-agent-service.md) </span><span class="sxs-lookup"><span data-stu-id="b24da-134">[Start, Stop, or Pause the SQL Server Agent Service](../../ssms/agent/start-stop-or-pause-the-sql-server-agent-service.md) </span></span>  
 <span data-ttu-id="b24da-135">[Connexion de diagnostic pour les administrateurs de base de données](diagnostic-connection-for-database-administrators.md) </span><span class="sxs-lookup"><span data-stu-id="b24da-135">[Diagnostic Connection for Database Administrators](diagnostic-connection-for-database-administrators.md) </span></span>  
 <span data-ttu-id="b24da-136">[Utilitaire sqlcmd](../../tools/sqlcmd-utility.md) </span><span class="sxs-lookup"><span data-stu-id="b24da-136">[sqlcmd Utility](../../tools/sqlcmd-utility.md) </span></span>  
 <span data-ttu-id="b24da-137">[CHECKPOINT &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/checkpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="b24da-137">[CHECKPOINT &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/checkpoint-transact-sql) </span></span>  
 <span data-ttu-id="b24da-138">[sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="b24da-138">[sp_configure &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql) </span></span>  
 [<span data-ttu-id="b24da-139">Options de démarrage du service moteur de base de données</span><span class="sxs-lookup"><span data-stu-id="b24da-139">Database Engine Service Startup Options</span></span>](database-engine-service-startup-options.md)  
  
  
