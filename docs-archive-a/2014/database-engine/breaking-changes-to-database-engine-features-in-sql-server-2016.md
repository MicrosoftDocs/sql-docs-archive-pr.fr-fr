---
title: Modifications importantes apportées aux fonctionnalités de Moteur de base de données dans SQL Server 2014 | Microsoft Docs
ms.custom: ''
ms.date: 01/19/2019
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: release-landing
ms.topic: conceptual
helpviewer_keywords:
- Database Engine [SQL Server], what's new
- breaking changes [SQL Server]
ms.assetid: 47edefbd-a09b-4087-937a-453cd5c6e061
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: bf1a25aabde1e684407218da7365ae7a2b4265a7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709944"
---
# <a name="breaking-changes-to-database-engine-features-in-sql-server-2014"></a><span data-ttu-id="2eb0c-102">Changements essentiels dans les fonctionnalités du moteur de base de données de SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="2eb0c-102">Breaking Changes to Database Engine Features in SQL Server 2014</span></span>
  <span data-ttu-id="2eb0c-103">Cette rubrique décrit les modifications importantes apportées à [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../includes/ssde-md.md)] et aux versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-103">This topic describes breaking changes in the [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../includes/ssde-md.md)] and earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2eb0c-104">Ces modifications peuvent interrompre les applications, scripts ou fonctionnalités fondés sur les versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-104">These changes might break applications, scripts, or functionalities that are based on earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2eb0c-105">Il se peut que vous rencontriez ces problèmes lors d'une mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-105">You might encounter these issues when you upgrade.</span></span> <span data-ttu-id="2eb0c-106">Pour plus d'informations, consultez [Use Upgrade Advisor to Prepare for Upgrades](../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-106">For more information, see [Use Upgrade Advisor to Prepare for Upgrades](../sql-server/install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
##  <a name="breaking-changes-in-sssql14"></a><a name="SQL14"></a> <span data-ttu-id="2eb0c-107">Modifications avec rupture dans [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span><span class="sxs-lookup"><span data-stu-id="2eb0c-107">Breaking Changes in [!INCLUDE[ssSQL14](../includes/sssql14-md.md)]</span></span>  
 <span data-ttu-id="2eb0c-108">Aucun nouveau problème.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-108">No new issues.</span></span>  
  
##  <a name="breaking-changes-in-sssql11"></a><a name="Denali"></a><span data-ttu-id="2eb0c-109">Modifications avec rupture dans[!INCLUDE[ssSQL11](../includes/sssql11-md.md)]</span><span class="sxs-lookup"><span data-stu-id="2eb0c-109">Breaking Changes in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]</span></span>  
  
### <a name="transact-sql"></a><span data-ttu-id="2eb0c-110">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="2eb0c-110">Transact-SQL</span></span>  
  
|<span data-ttu-id="2eb0c-111">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-111">Feature</span></span>|<span data-ttu-id="2eb0c-112">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-112">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-113">Sélection dans des colonnes ou des tables nommées NEXT</span><span class="sxs-lookup"><span data-stu-id="2eb0c-113">Selecting from columns or tables named NEXT</span></span>|<span data-ttu-id="2eb0c-114">Les séquences utilisent la fonction ANSI standard NEXT VALUE FOR.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-114">Sequences use the ANSI standard NEXT VALUE FOR function.</span></span> <span data-ttu-id="2eb0c-115">Si une table ou une colonne est nommée NEXT et que la table ou la colonne est un alias en tant que valeur, et si la norme ANSI est omise, l’instruction résultante peut provoquer une erreur.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-115">If a table or a column is named NEXT and the table or column is aliased as VALUE, and if the ANSI standard AS is omitted, the resultant statement can cause an error.</span></span> <span data-ttu-id="2eb0c-116">Pour contourner ce problème, incluez le mot clé ANSI standard AS.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-116">To work around, include the ANSI standard AS keyword.</span></span> <span data-ttu-id="2eb0c-117">Par exemple, `SELECT NEXT VALUE FROM Table` doit être réécrit comme `SELECT NEXT AS VALUE FROM Table` et `SELECT Col1 FROM NEXT VALUE` doit être réécrit comme `SELECT Col1 FROM NEXT AS VALUE`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-117">For example, `SELECT NEXT VALUE FROM Table` should be rewritten as `SELECT NEXT AS VALUE FROM Table` and `SELECT Col1 FROM NEXT VALUE` should be rewritten as `SELECT Col1 FROM NEXT AS VALUE`.</span></span>|  
|<span data-ttu-id="2eb0c-118">PIVOT (opérateur)</span><span class="sxs-lookup"><span data-stu-id="2eb0c-118">PIVOT operator</span></span>|<span data-ttu-id="2eb0c-119">L'opérateur PIVOT n'est pas autorisé dans une requête d'expression de table commune récursive lorsque le niveau de compatibilité de la base de données est défini à 110.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-119">The PIVOT operator is not allowed in a recursive common table expression (CTE) query when the database compatibility level is set to 110.</span></span> <span data-ttu-id="2eb0c-120">Réécrivez la requête, ou définissez un niveau de compatibilité inférieur ou égal à 100.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-120">Rewrite the query, or change the compatibility level to 100 or lower.</span></span> <span data-ttu-id="2eb0c-121">L'utilisation de l'opérateur PIVOT dans une requête d'expression de table commune récursive génère des résultats incorrects lorsqu'il y a plusieurs lignes par regroupement.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-121">Using PIVOT in a recursive CTE query produces incorrect results when there is more than a single row per grouping.</span></span>|  
|<span data-ttu-id="2eb0c-122">sp_setapprole et sp_unsetapprole</span><span class="sxs-lookup"><span data-stu-id="2eb0c-122">sp_setapprole and sp_unsetapprole</span></span>|<span data-ttu-id="2eb0c-123">Le paramètre `OUTPUT` de cookie pour `sp_setapprole` est actuellement documenté comme `varbinary(8000)`, ce qui correspond à la longueur maximale correcte.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-123">The cookie `OUTPUT` parameter for `sp_setapprole` is currently documented as `varbinary(8000)` which is the correct maximum length.</span></span> <span data-ttu-id="2eb0c-124">Toutefois, l'implémentation actuelle retourne `varbinary(50)`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-124">However the current implementation returns `varbinary(50)`.</span></span> <span data-ttu-id="2eb0c-125">Les applications doivent continuer à réserver `varbinary(8000)` afin de continuer à fonctionner correctement si la taille de retour des cookies augmente dans une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-125">Applications should continue to reserve `varbinary(8000)` so that the application continues to operate correctly if the cookie return size increases in a future release.</span></span> <span data-ttu-id="2eb0c-126">Pour plus d’informations, consultez [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-126">For more information, see [sp_setapprole &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setapprole-transact-sql).</span></span>|  
|<span data-ttu-id="2eb0c-127">EXECUTE AS</span><span class="sxs-lookup"><span data-stu-id="2eb0c-127">EXECUTE AS</span></span>|<span data-ttu-id="2eb0c-128">Le paramètre OUTPUT de cookie pour EXECUTE AS est actuellement documenté comme `varbinary(8000)`, ce qui correspond à la longueur maximale correcte.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-128">The cookie OUTPUT parameter for EXECUTE AS is currently documented as `varbinary(8000)` which is the correct maximum length.</span></span> <span data-ttu-id="2eb0c-129">Toutefois, l'implémentation actuelle retourne `varbinary(100)`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-129">However the current implementation returns `varbinary(100)`.</span></span> <span data-ttu-id="2eb0c-130">Les applications doivent continuer à réserver `varbinary(8000)` afin de continuer à fonctionner correctement si la taille de retour des cookies augmente dans une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-130">Applications should continue to reserve `varbinary(8000)` so that the application continues to operate correctly if the cookie return size increases in a future release.</span></span> <span data-ttu-id="2eb0c-131">Pour plus d’informations, consultez [EXECUTE AS &#40;Transact-SQL&#41;](/sql/t-sql/statements/execute-as-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-131">For more information, see [EXECUTE AS &#40;Transact-SQL&#41;](/sql/t-sql/statements/execute-as-transact-sql).</span></span>|  
|<span data-ttu-id="2eb0c-132">sys.fn_get_audit_file, fonction</span><span class="sxs-lookup"><span data-stu-id="2eb0c-132">sys.fn_get_audit_file function</span></span>|<span data-ttu-id="2eb0c-133">Deux colonnes supplémentaires (**user_defined_event_id** et **user_defined_information**) ont été ajoutées pour prendre en charge les événements d’audit définis par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-133">Two additional columns (**user_defined_event_id** and **user_defined_information**) have been added to support user-defined audit events.</span></span> <span data-ttu-id="2eb0c-134">Les applications qui ne sélectionnent pas de colonnes par nom peuvent retourner plus de colonnes que prévu.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-134">Applications that do not select columns by name might return more columns than expected.</span></span> <span data-ttu-id="2eb0c-135">Sélectionnez des colonnes par nom, ou modifiez l'application pour accepter ces colonnes supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-135">Either select columns by name, or adjust the application to accept these additional columns.</span></span>|  
|<span data-ttu-id="2eb0c-136">WITHIN (mot clé réservé)</span><span class="sxs-lookup"><span data-stu-id="2eb0c-136">WITHIN reserved keyword</span></span>|<span data-ttu-id="2eb0c-137">WITHIN est maintenant un mot clé réservé.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-137">WITHIN is now a reserved keyword.</span></span> <span data-ttu-id="2eb0c-138">Les références aux objets ou aux colonnes nommés « within » échouent.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-138">References to objects or columns named 'within' will fail.</span></span> <span data-ttu-id="2eb0c-139">Renommez l'objet ou la colonne ou délimitez le nom par des crochets ou des guillemets.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-139">Rename the object or column name or delimit the name by using brackets or quotes.</span></span>  <span data-ttu-id="2eb0c-140">Par exemple : `SELECT * FROM [within]`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-140">For example, `SELECT * FROM [within]`.</span></span>|  
|<span data-ttu-id="2eb0c-141">Opérations CAST et CONVERT sur des colonnes calculées de type `time` ou `datetime2`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-141">CAST and CONVERT operations on computed columns of type `time` or `datetime2`</span></span>|<span data-ttu-id="2eb0c-142">Dans les versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], le style par défaut pour les opérations CAST et CONVERT sur les types de données `time` et `datetime2` est 121, sauf si l'un des types est utilisé dans une expression de colonne calculée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-142">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the default style for CAST and CONVERT operations on `time` and `datetime2` data types is 121 except when either type is used in a computed column expression.</span></span> <span data-ttu-id="2eb0c-143">Pour les colonnes calculées, le style par défaut est 0.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-143">For computed columns, the default style is 0.</span></span> <span data-ttu-id="2eb0c-144">Ce comportement influe sur les colonnes calculées lorsqu'elles sont créées, utilisées dans des requêtes impliquant le paramétrage automatique, ou utilisées dans des définitions de contraintes.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-144">This behavior impacts computed columns when they are created, used in queries involving auto-parameterization, or used in constraint definitions.</span></span><br /><br /> <span data-ttu-id="2eb0c-145">Lorsque le niveau de compatibilité est 110, le style par défaut pour les opérations CAST et CONVERT sur les types de données `time` et `datetime2` est toujours 121.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-145">Under compatibility level 110, the default style for CAST and CONVERT operations on `time` and `datetime2` data types is always 121.</span></span> <span data-ttu-id="2eb0c-146">Si votre requête repose sur l'ancien comportement, utilisez un niveau de compatibilité inférieur à 110, ou spécifiez explicitement le style 0 dans la requête affectée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-146">If your query relies on the old behavior, use a compatibility level less than 110, or explicitly specify the 0 style in the affected query.</span></span><br /><br /> <span data-ttu-id="2eb0c-147">La mise à niveau de la base de données vers le niveau de compatibilité 110 ne modifie pas les données utilisateur stockées sur le disque.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-147">Upgrading the database to compatibility level 110 will not change user data that has been stored to disk.</span></span> <span data-ttu-id="2eb0c-148">Vous devez corriger manuellement ces données comme il convient.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-148">You must manually correct this data as appropriate.</span></span> <span data-ttu-id="2eb0c-149">Par exemple, si vous avez utilisé SELECT INTO pour créer une table à partir d'une source qui contenait une expression de colonne calculée décrite ci-dessus, les données (utilisant le style 0) sont stockées à la place de la définition de colonne calculée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-149">For example, if you used SELECT INTO to create a table from a source that contained a computed column expression described above, the data (using style 0) would be stored rather than the computed column definition itself.</span></span> <span data-ttu-id="2eb0c-150">Vous devez mettre à jour manuellement ces données pour qu'elles correspondent au style 121.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-150">You would need to manually update this data to match style 121.</span></span>|  
|<span data-ttu-id="2eb0c-151">ALTER TABLE</span><span class="sxs-lookup"><span data-stu-id="2eb0c-151">ALTER TABLE</span></span>|<span data-ttu-id="2eb0c-152">L'instruction ALTER TABLE permet uniquement les noms de tables (schema.object) en deux parties.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-152">The ALTER TABLE statement allows only two-part (schema.object) table names.</span></span> <span data-ttu-id="2eb0c-153">La spécification d’un nom de table à l’aide des formats suivants échoue désormais au moment de la compilation avec l’erreur 117 :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-153">Specifying a table name using the following formats now fails at compile time with error 117:</span></span><br /><br /> <span data-ttu-id="2eb0c-154">server.database.schema.table</span><span class="sxs-lookup"><span data-stu-id="2eb0c-154">server.database.schema.table</span></span><br /><br /> <span data-ttu-id="2eb0c-155">.database.schema.table</span><span class="sxs-lookup"><span data-stu-id="2eb0c-155">.database.schema.table</span></span><br /><br /> <span data-ttu-id="2eb0c-156">..schema.table</span><span class="sxs-lookup"><span data-stu-id="2eb0c-156">..schema.table</span></span><br /><br /> <span data-ttu-id="2eb0c-157">Dans les versions antérieures, la spécification du format server.database.schema.table retournait l'erreur 4902.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-157">In earlier versions specifying the format server.database.schema.table returned error 4902.</span></span> <span data-ttu-id="2eb0c-158">La spécification du format .database.schema.table ou .schema.table aboutissait.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-158">Specifying the format .database.schema.table or the format ..schema.table succeeded.</span></span> <span data-ttu-id="2eb0c-159">Pour résoudre le problème, supprimez l'utilisation d'un préfixe en quatre parties.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-159">To resolve the problem, remove the use of a 4-part prefix.</span></span>|  
|<span data-ttu-id="2eb0c-160">Exploration des métadonnées</span><span class="sxs-lookup"><span data-stu-id="2eb0c-160">Browsing metadata</span></span>|<span data-ttu-id="2eb0c-161">L'interrogation d'une vue à l'aide de FOR BROWSE ou SET NO_BROWSETABLE ON retourne maintenant les métadonnées de la vue, et non pas les métadonnées de l'objet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-161">Querying a view using FOR BROWSE or SET NO_BROWSETABLE ON now returns the metadata of the view, not the metadata of the underlying object.</span></span> <span data-ttu-id="2eb0c-162">Ce comportement correspond désormais à d'autres méthodes d'exploration de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-162">This behavior now matches other methods of browsing metadata.</span></span>|  
|<span data-ttu-id="2eb0c-163">SOUNDEX</span><span class="sxs-lookup"><span data-stu-id="2eb0c-163">SOUNDEX</span></span>|<span data-ttu-id="2eb0c-164">Lorsque le niveau de compatibilité de la base de données est défini à 110, la fonction SOUNDEX implémente de nouvelles règles qui peuvent générer des valeurs calculées par la fonction qui sont différentes des valeurs calculées à des niveaux de compatibilité antérieurs.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-164">Under database compatibility level 110, the SOUNDEX function implements new rules that may cause the values computed by the function to be different than the values computed under earlier compatibility levels.</span></span> <span data-ttu-id="2eb0c-165">Après la mise à niveau vers le niveau de compatibilité 110, vous pouvez être amené à reconstruire les index, les segments de mémoire ou les contraintes CHECK qui utilisent la fonction SOUNDEX.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-165">After upgrading to compatibility level 110, you may need to rebuild the indexes, heaps, or CHECK constraints that use the SOUNDEX function.</span></span> <span data-ttu-id="2eb0c-166">Pour plus d’informations, consultez [SOUNDEX &#40;Transact-SQL&#41;](/sql/t-sql/functions/soundex-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-166">For more information, see [SOUNDEX &#40;Transact-SQL&#41;](/sql/t-sql/functions/soundex-transact-sql)</span></span>
|<span data-ttu-id="2eb0c-167">Message de nombre de lignes pour les échecs d'instructions DML</span><span class="sxs-lookup"><span data-stu-id="2eb0c-167">Row count message for failed DML statements</span></span>|<span data-ttu-id="2eb0c-168">Dans [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], le [!INCLUDE[ssDE](../includes/ssde-md.md)] envoie régulièrement le jeton TDS DONE avec RowCount: 0 aux clients lorsqu'une instruction DML échoue.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-168">In [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], the [!INCLUDE[ssDE](../includes/ssde-md.md)] will consistently send the TDS DONE token with RowCount: 0 to clients when a DML statement fails.</span></span> <span data-ttu-id="2eb0c-169">Dans les versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], la valeur incorrecte -1 est envoyée au client lorsque l'instruction DML qui échoue est contenue dans un bloc TRY-CATCH ou est automatiquement paramétrable par le [!INCLUDE[ssDE](../includes/ssde-md.md)] ou lorsque le bloc TRY-CATCH n'est pas au même niveau que l'instruction qui échoue.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-169">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], an incorrect value of -1 is sent to the client when the DML statement that fails is contained in a TRY-CATCH block and is either autoparameterized by the [!INCLUDE[ssDE](../includes/ssde-md.md)] or the TRY-CATCH block is not on the same level as the failed statement.</span></span> <span data-ttu-id="2eb0c-170">Par exemple, si un bloc TRY-CATCH appelle une procédure stockée et une instruction DML dans la procédure échoue, le client ne reçoit pas correctement la valeur -1.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-170">For example, if a TRY-CATCH block calls a stored procedure and a DML statement in the procedure fails, the client will incorrectly receive a -1 value.</span></span><br /><br /> <span data-ttu-id="2eb0c-171">Les applications qui reposent sur ce comportement incorrect échouent.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-171">Applications that rely on this incorrect behavior will fail.</span></span>|  
|<span data-ttu-id="2eb0c-172">SERVERPROPERTY ('édition')</span><span class="sxs-lookup"><span data-stu-id="2eb0c-172">SERVERPROPERTY ('Edition')</span></span>|<span data-ttu-id="2eb0c-173">Édition du produit installée de l'instance de [!INCLUDE[ssSQL11](../includes/sssql11-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-173">Installed product edition of the instance of [!INCLUDE[ssSQL11](../includes/sssql11-md.md)].</span></span> <span data-ttu-id="2eb0c-174">Utilisez la valeur de cette propriété pour déterminer les fonctionnalités et les limites, par exemple le nombre maximal de processeurs qui sont pris en charge par le produit installé.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-174">Use the value of this property to determine the features and the limits, such as maximum number of CPUs that are supported by the installed product.</span></span><br /><br /> <span data-ttu-id="2eb0c-175">En fonction de l’édition Enterprise installée, elle peut retourner « Enterprise Edition » ou « Enterprise Edition : Core-based Licensing ».</span><span class="sxs-lookup"><span data-stu-id="2eb0c-175">Based on the installed Enterprise edition, this can return 'Enterprise Edition' or 'Enterprise Edition: Core-based Licensing'.</span></span> <span data-ttu-id="2eb0c-176">Les éditions Enterprise sont différenciées selon la capacité maximale de calcul par une seule instance de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-176">The Enterprise editions are differentiated based on the maximum compute capacity by a single instance of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2eb0c-177">Pour plus d’informations sur les limites de capacité de calcul dans [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] , consultez [Compute Capacity Limits by Edition of SQL Server](../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-177">For more information on Compute capacity limits in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], see [Compute Capacity Limits by Edition of SQL Server](../sql-server/compute-capacity-limits-by-edition-of-sql-server.md).</span></span>|  
|<span data-ttu-id="2eb0c-178">CREATE LOGIN</span><span class="sxs-lookup"><span data-stu-id="2eb0c-178">CREATE LOGIN</span></span>|<span data-ttu-id="2eb0c-179">L' `CREATE LOGIN WITH PASSWORD = '` *password* `' HASHED` option Password ne peut pas être utilisée avec les hachages créés par [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 7 ou une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-179">The `CREATE LOGIN WITH PASSWORD = '`*password*`' HASHED` option cannot be used with hashes created by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] 7 or earlier.</span></span>|  
|<span data-ttu-id="2eb0c-180">Opérations CAST et CONVERT pour `datetimeoffset`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-180">CAST and CONVERT operations for `datetimeoffset`</span></span>|<span data-ttu-id="2eb0c-181">Les seuls styles pris en charge lors de la conversion des types de date et d'heure en `datetimeoffset` sont 0 ou 1.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-181">The only styles that are supported when converting from date and time types to `datetimeoffset` are 0 or 1.</span></span> <span data-ttu-id="2eb0c-182">Tous les autres styles de conversion retournent l'erreur 9809.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-182">All other conversion styles return error 9809.</span></span> <span data-ttu-id="2eb0c-183">Par exemple, le code suivant retourne une erreur 9809.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-183">For example, the following code returns error 9809.</span></span><br /><br /> `SELECT CONVERT(date, CAST('7070-11-25 16:25:01.00986 -02:07' as datetimeoffset(5)), 107);`|  
  
### <a name="dynamic-management-views"></a><span data-ttu-id="2eb0c-184">Vues de gestion dynamique</span><span class="sxs-lookup"><span data-stu-id="2eb0c-184">Dynamic Management Views</span></span>  
  
|<span data-ttu-id="2eb0c-185">Affichage</span><span class="sxs-lookup"><span data-stu-id="2eb0c-185">View</span></span>|<span data-ttu-id="2eb0c-186">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-186">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="2eb0c-187">sys.dm_exec_requests</span><span class="sxs-lookup"><span data-stu-id="2eb0c-187">sys.dm_exec_requests</span></span>|<span data-ttu-id="2eb0c-188">La colonne de commande passe de `nvarchar(16)` à `nvarchar(32)`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-188">The command column changes from `nvarchar(16)` to `nvarchar(32)`.</span></span>|  
|<span data-ttu-id="2eb0c-189">sys.dm_os_memory_cache_counters</span><span class="sxs-lookup"><span data-stu-id="2eb0c-189">sys.dm_os_memory_cache_counters</span></span>|<span data-ttu-id="2eb0c-190">Les colonnes suivantes ont été renommées :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-190">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="2eb0c-191">single_pages_kb est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-191">single_pages_kb is now:</span></span> <br />                          <span data-ttu-id="2eb0c-192">pages_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-192">pages_kb</span></span><br /><br /> <span data-ttu-id="2eb0c-193">multi_pages_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-193">multi_pages_kb</span></span><br />                           <span data-ttu-id="2eb0c-194">est maintenant : pages_in_use_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-194">is now: pages_in_use_kb</span></span>|  
|<span data-ttu-id="2eb0c-195">sys.dm_os_memory_cache_entries</span><span class="sxs-lookup"><span data-stu-id="2eb0c-195">sys.dm_os_memory_cache_entries</span></span>|<span data-ttu-id="2eb0c-196">La colonne pages_allocated_count colonne a été renommée pages_kb.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-196">The column pages_allocated_count column has been renamed pages_kb.</span></span>|  
|<span data-ttu-id="2eb0c-197">sys.dm_os_memory_clerks</span><span class="sxs-lookup"><span data-stu-id="2eb0c-197">sys.dm_os_memory_clerks</span></span>|<span data-ttu-id="2eb0c-198">La colonne multi_pages_kb a été supprimée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-198">The column multi_pages_kb has been removed.</span></span><br /><br /> <span data-ttu-id="2eb0c-199">La colonne single_pages_kb colonne a été renommée pages_kb.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-199">The column single_pages_kb column has been renamed pages_kb.</span></span>|  
|<span data-ttu-id="2eb0c-200">sys.dm_os_memory_nodes</span><span class="sxs-lookup"><span data-stu-id="2eb0c-200">sys.dm_os_memory_nodes</span></span>|<span data-ttu-id="2eb0c-201">Les colonnes suivantes ont été renommées :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-201">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="2eb0c-202">single_pages_kb est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-202">single_pages_kb is now:</span></span> <br />                            <span data-ttu-id="2eb0c-203">pages_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-203">pages_kb</span></span><br /><br /> <span data-ttu-id="2eb0c-204">multi_pages_kb est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-204">multi_pages_kb is now:</span></span> <br />                            <span data-ttu-id="2eb0c-205">foreign_committed_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-205">foreign_committed_kb</span></span>|  
|<span data-ttu-id="2eb0c-206">sys.dm_os_memory_objects</span><span class="sxs-lookup"><span data-stu-id="2eb0c-206">sys.dm_os_memory_objects</span></span>|<span data-ttu-id="2eb0c-207">Les colonnes suivantes ont été renommées.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-207">The following columns have been renamed.</span></span><br /><br /> <span data-ttu-id="2eb0c-208">pages_allocated_count est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-208">pages_allocated_count is now:</span></span><br />                            <span data-ttu-id="2eb0c-209">pages_in_bytes</span><span class="sxs-lookup"><span data-stu-id="2eb0c-209">pages_in_bytes</span></span><br /><br /> <span data-ttu-id="2eb0c-210">max_pages_allocated_count est maintenant : max_pages_in_bytes</span><span class="sxs-lookup"><span data-stu-id="2eb0c-210">max_pages_allocated_count is now: max_pages_in_bytes</span></span>|  
|<span data-ttu-id="2eb0c-211">sys.dm_os_sys_info</span><span class="sxs-lookup"><span data-stu-id="2eb0c-211">sys.dm_os_sys_info</span></span>|<span data-ttu-id="2eb0c-212">Les colonnes suivantes ont été renommées :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-212">The following columns have been renamed:</span></span><br /><br /> <span data-ttu-id="2eb0c-213">physical_memory_in_bytes est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-213">physical_memory_in_bytes is now:</span></span> <br />                            <span data-ttu-id="2eb0c-214">physical_memory_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-214">physical_memory_kb</span></span><br /><br /> <span data-ttu-id="2eb0c-215">bpool_commit_target est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-215">bpool_commit_target is now:</span></span> <br />                            <span data-ttu-id="2eb0c-216">committed_target_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-216">committed_target_kb</span></span><br /><br /> <span data-ttu-id="2eb0c-217">bpool_visible est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-217">bpool_visible is now:</span></span> <br />                            <span data-ttu-id="2eb0c-218">visible_target_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-218">visible_target_kb</span></span><br /><br /> <span data-ttu-id="2eb0c-219">virtual_memory_in_bytes est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-219">virtual_memory_in_bytes is now:</span></span> <br />                            <span data-ttu-id="2eb0c-220">virtual_memory_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-220">virtual_memory_kb</span></span><br /><br /> <span data-ttu-id="2eb0c-221">bpool_commited est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-221">bpool_commited is now:</span></span><br />                            <span data-ttu-id="2eb0c-222">committed_kb</span><span class="sxs-lookup"><span data-stu-id="2eb0c-222">committed_kb</span></span>|  
|<span data-ttu-id="2eb0c-223">sys.dm_os_workers</span><span class="sxs-lookup"><span data-stu-id="2eb0c-223">sys.dm_os_workers</span></span>|<span data-ttu-id="2eb0c-224">La colonne de paramètres régionaux a été supprimée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-224">The locale column has been removed.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="2eb0c-225">Affichages catalogue</span><span class="sxs-lookup"><span data-stu-id="2eb0c-225">Catalog Views</span></span>  
  
|<span data-ttu-id="2eb0c-226">Affichage</span><span class="sxs-lookup"><span data-stu-id="2eb0c-226">View</span></span>|<span data-ttu-id="2eb0c-227">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-227">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="2eb0c-228">sys.data_spaces</span><span class="sxs-lookup"><span data-stu-id="2eb0c-228">sys.data_spaces</span></span><br /><br /> <span data-ttu-id="2eb0c-229">sys.partition_schemes</span><span class="sxs-lookup"><span data-stu-id="2eb0c-229">sys.partition_schemes</span></span><br /><br /> <span data-ttu-id="2eb0c-230">sys.filegroups</span><span class="sxs-lookup"><span data-stu-id="2eb0c-230">sys.filegroups</span></span><br /><br /> <span data-ttu-id="2eb0c-231">sys.partition_functions</span><span class="sxs-lookup"><span data-stu-id="2eb0c-231">sys.partition_functions</span></span>|<span data-ttu-id="2eb0c-232">Une nouvelle colonne, is_system, a été ajoutée à sys.data_spaces et sys.partition_functions.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-232">A new column, is_system, has been added to sys.data_spaces and sys.partition_functions.</span></span> <span data-ttu-id="2eb0c-233">(sys.partition_schemes et sys.filegroups héritent des colonnes de sys.data_spaces.)</span><span class="sxs-lookup"><span data-stu-id="2eb0c-233">(sys.partition_schemes and sys.filegroups inherit the columns of sys.data_spaces.)</span></span><br /><br /> <span data-ttu-id="2eb0c-234">La valeur 1 dans cette colonne indique que l'objet est utilisé pour les fragments d'index de recherche en texte intégral.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-234">A value of 1 in this column indicates that the object is used for full-text index fragments.</span></span><br /><br /> <span data-ttu-id="2eb0c-235">Dans sys.partition_functions, sys.partition_schemes et sys.filegroups, la nouvelle colonne n'est pas la dernière colonne.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-235">In sys.partition_functions, sys.partition_schemes, and sys.filegroups, the new column is not the last column.</span></span> <span data-ttu-id="2eb0c-236">Modifiez les requêtes existantes qui reposent sur l'ordre des colonnes retournées par ces affichages catalogue.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-236">Revise existing queries that rely on the order of columns returned from these catalog views.</span></span>|  
  
### <a name="sql-clr-data-types-geometry-geography-and-hierarchyid"></a><span data-ttu-id="2eb0c-237">Types de données SQL CLR (geometry, geography et hierarchyid)</span><span class="sxs-lookup"><span data-stu-id="2eb0c-237">SQL CLR Data Types (geometry, geography, and hierarchyid)</span></span>  
 <span data-ttu-id="2eb0c-238">L’assembly **Microsoft.SqlServer.Types.dll**, qui contient les types de données spatiales et le type hierarchyid, a été mis à niveau de la version 10,0 vers la version 11,0.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-238">The assembly **Microsoft.SqlServer.Types.dll**, which contains the spatial data types and the hierarchyid type, has been upgraded from version 10.0 to version 11.0.</span></span> <span data-ttu-id="2eb0c-239">Les applications personnalisées qui font référence à cet assembly peuvent échouer lorsque les conditions suivantes sont remplies.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-239">Custom applications that reference this assembly may fail when the following conditions are true.</span></span>  
  
-   <span data-ttu-id="2eb0c-240">Lorsque vous déplacez une application personnalisée à partir d’un ordinateur sur lequel [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] est installé sur un ordinateur sur lequel seul [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] est installé, l’application échoue, car la version référencée 10,0 de l’assembly **SqlTypes** n’est pas présente.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-240">When you move a custom application from a computer on which [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)] was installed to a computer on which only [!INCLUDE[ssCurrent](../includes/sscurrent-md.md)] is installed, the application will fail because the referenced version 10.0 of the **SqlTypes** assembly is not present.</span></span> <span data-ttu-id="2eb0c-241">Ce message d'erreur peut s'afficher : `"Could not load file or assembly 'Microsoft.SqlServer.Types, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified."`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-241">You may see this error message: `"Could not load file or assembly 'Microsoft.SqlServer.Types, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified."`</span></span>  
  
-   <span data-ttu-id="2eb0c-242">Lorsque vous référencez l’assembly **SqlTypes** version 11,0 et que la version 10,0 est également installée, le message d’erreur suivant peut s’afficher :`"System.InvalidCastException: Unable to cast object of type 'Microsoft.SqlServer.Types.SqlGeometry' to type 'Microsoft.SqlServer.Types.SqlGeometry'."`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-242">When you reference the **SqlTypes** assembly version 11.0, and version 10.0 is also installed, you may see this error message: `"System.InvalidCastException: Unable to cast object of type 'Microsoft.SqlServer.Types.SqlGeometry' to type 'Microsoft.SqlServer.Types.SqlGeometry'."`</span></span>  
  
-   <span data-ttu-id="2eb0c-243">Quand vous référencez la version 11,0 de l’assembly **SqlTypes** à partir d’une application personnalisée qui cible .net 3,5, 4 ou 4,5, l’application échoue, car SqlClient par conception charge la version 10,0 de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-243">When you reference the **SqlTypes** assembly version 11.0 from a custom application that targets .NET 3.5, 4, or 4.5, the application will fail because SqlClient by design loads version 10.0 of the assembly.</span></span> <span data-ttu-id="2eb0c-244">Cette erreur se produit lorsque l'application appelle l'une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-244">This failure occurs when the application calls one of the following methods:</span></span>  
  
    -   <span data-ttu-id="2eb0c-245">méthode `GetValue` de la classe `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-245">`GetValue` method of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="2eb0c-246">méthode `GetValues` de la classe `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-246">`GetValues` method of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="2eb0c-247">opérateur d'index de crochets [] de la classe `SqlDataReader`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-247">bracket index operator [] of the `SqlDataReader` class</span></span>  
  
    -   <span data-ttu-id="2eb0c-248">méthode `ExecuteScalar` de la classe `SqlCommand`</span><span class="sxs-lookup"><span data-stu-id="2eb0c-248">`ExecuteScalar` method of the `SqlCommand` class</span></span>  
  
 <span data-ttu-id="2eb0c-249">Vous pouvez contourner ce problème en utilisant l’une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-249">You can work around this issue by using one of the following methods:</span></span>  
  
-   <span data-ttu-id="2eb0c-250">Vous pouvez contourner ce problème dans votre code en appelant la méthode `GetSqlBytes`, au lieu des méthodes Get répertoriées ci-dessus, pour extraire les types de systèmes CLR [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], comme le montre l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-250">You can work around this issue in your code by calling the `GetSqlBytes` method, instead of the Get methods listed above, to retrieve CLR [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] system types, as shown in the following example:</span></span>  
  
    ```csharp  
    string query = "SELECT [SpatialColumn] FROM [SpatialTable]";  
          using (SqlConnection conn = new SqlConnection("..."))  
          {  
                SqlCommand cmd = new SqlCommand(query, conn);  
  
                conn.Open();  
                SqlDataReader reader = cmd.ExecuteReader();  
  
                while (reader.Read())  
                {  
                      // In version 11.0 only  
                      SqlGeometry g =   
    SqlGeometry.Deserialize(reader.GetSqlBytes(0));  
  
                      // In version 10.0 or 11.0  
                      SqlGeometry g2 = new SqlGeometry();  
                      g.Read(new BinaryReader(reader.GetSqlBytes(0).Stream));  
                }  
          }  
    ```  
  
-   <span data-ttu-id="2eb0c-251">Vous pouvez contourner ce problème en utilisant la redirection d'assembly dans le fichier de configuration de l'application, comme le montre l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-251">You can work around this issue by using assembly redirection in the application configuration file, as shown in the following example:</span></span>  
  
    ```xml  
    <runtime>  
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
        ...  
        <dependentAssembly>  
            <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />  
            <bindingRedirect oldVersion="10.0.0.0" newVersion="11.0.0.0" />  
        </dependentAssembly>  
        ...  
    </assemblyBinding>  
    <runtime>  
    ```  
  
-   <span data-ttu-id="2eb0c-252">Vous pouvez contourner ce problème dans votre chaîne de connexion en spécifiant la valeur « SQL Server 2012 » pour que de l'attribut « Type System Version » force SqlClient à charger la version 11.0 de l'assembly.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-252">You can work around this issue in your connection string by specifying a value of "SQL Server 2012" for the "Type System Version" attribute to force SqlClient to load version 11.0 of the assembly.</span></span> <span data-ttu-id="2eb0c-253">Cet attribut de chaîne de connexion est uniquement disponible dans le .NET 4.5 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-253">This connection string attribute is available only in .NET 4.5 and above.</span></span>  
  
-   <span data-ttu-id="2eb0c-254">La balise `assemblyBinding` doit être encapsulée sous la balise `runtime`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-254">The `assemblyBinding` tag should be wrapped under the `runtime` tag.</span></span>  
  
### <a name="support-for-awe"></a><span data-ttu-id="2eb0c-255">Prise en charge d'AWE</span><span class="sxs-lookup"><span data-stu-id="2eb0c-255">Support for AWE</span></span>  
 <span data-ttu-id="2eb0c-256">La prise en charge d'AWE (Address Windowing Extensions) 32 bits a été arrêtée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-256">32-bit Address Windowing Extensions (AWE) support is discontinued.</span></span> <span data-ttu-id="2eb0c-257">Cela peut entraîner une baisse des performances sur les systèmes d'exploitation 32 bits.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-257">This might result in slower performance on 32-bit operating systems.</span></span> <span data-ttu-id="2eb0c-258">Pour les installations utilisant de grandes quantités de mémoire, migrez vers un système d'exploitation 64 bits.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-258">For installations using large amounts of memory, migrate to a 64-bit operating system.</span></span>  
  
### <a name="xquery-functions-are-surrogate-aware"></a><span data-ttu-id="2eb0c-259">Les fonctions XQuery prennent en charge la substitution</span><span class="sxs-lookup"><span data-stu-id="2eb0c-259">XQuery Functions Are Surrogate-Aware</span></span>  
 <span data-ttu-id="2eb0c-260">La recommandation du W3C pour les fonctions et les opérateurs XQuery exigent qu'ils prennent en charge une paire de substitution qui représente un caractère Unicode à plage élevée en tant que glyphe unique dans l'encodage UTF-16.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-260">The W3C recommendation for XQuery functions and operators requires them to count a surrogate pair that represents a high-range Unicode character as a single glyph in UTF-16 encoding.</span></span> <span data-ttu-id="2eb0c-261">Toutefois, dans les versions de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] antérieures à [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], les fonctions de chaîne ne reconnaissaient pas les paires de substitution comme caractère unique.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-261">However, in versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssSQL11](../includes/sssql11-md.md)], string functions did not recognize surrogate pairs as a single character.</span></span> <span data-ttu-id="2eb0c-262">Certaines opérations de chaîne, telles que les calculs de longueur de chaîne et les extractions de sous-chaînes, ont retourné des résultats incorrects.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-262">Some string operations - such as string length calculations and substring extractions - returned incorrect results.</span></span> [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] <span data-ttu-id="2eb0c-263">prend désormais entièrement en charge UTF-16 et la gestion correcte des paires de substitution.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-263">now fully supports UTF-16 and the correct handling of surrogate pairs.</span></span>  
  
 <span data-ttu-id="2eb0c-264">Le type de données XML dans [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] autorise uniquement les paires de substitution bien formées.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-264">The XML data type in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] only allows well-formed surrogate pairs.</span></span> <span data-ttu-id="2eb0c-265">Toutefois, certaines fonctions peuvent toujours retourner des résultats indéfinis ou inattendus dans certaines circonstances, étant donné qu'il est possible de passer des paires de substitution non valides ou partielles aux fonctions XQuery comme valeurs de chaîne.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-265">However, some functions can still return undefined or unexpected results in certain circumstances, since it is possible to pass invalid or partial surrogate pairs to XQuery functions as string values.</span></span> <span data-ttu-id="2eb0c-266">Tenez compte des méthodes suivantes pour générer des valeurs de chaîne en utilisant XQuery dans [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-266">Consider the following methods for generating string values when using XQuery in [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="2eb0c-267">Fournissez une valeur de chaîne constante comme valeur binaire.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-267">Provide a constant string value as a binary value.</span></span> <span data-ttu-id="2eb0c-268">Lorsque vous utilisez cette méthode, il est possible de passer des paires de substitution non valides ou partielles.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-268">When using this method, it remains possible to pass invalid or partial surrogate pairs.</span></span>  
  
-   <span data-ttu-id="2eb0c-269">Fournissez une valeur de chaîne constante en fournissant des entités de caractère.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-269">Provide a constant string value by providing character entities.</span></span> <span data-ttu-id="2eb0c-270">Lorsque vous utilisez cette méthode, il est impossible de passer des paires de substitution non valides.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-270">When using this method, it is not possible to pass invalid surrogate pairs.</span></span> <span data-ttu-id="2eb0c-271">Les fonctions XQuery requièrent une entité de caractère unique pour le caractère de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-271">The XQuery functions require a single character entity for the high-level character.</span></span> <span data-ttu-id="2eb0c-272">Ces fonctions génèrent une erreur si les entités de caractère pour les caractères de paire de substitution sont fournies.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-272">These functions raise an error if the character entities for the surrogate pair characters are provided.</span></span>  
  
-   <span data-ttu-id="2eb0c-273">Importez des valeurs externes à l’aide de **SQL : column** ou **SQL : variable**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-273">Import external values by using **sql:column** or **sql:variable**.</span></span> <span data-ttu-id="2eb0c-274">En utilisant ces méthodes, il est possible d'introduire des paires de substitution non valides ou partielles.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-274">When using these methods, it remains possible to introduce invalid or partial surrogate pairs.</span></span>  
  
#### <a name="affected-xquery-functions-and-operators"></a><span data-ttu-id="2eb0c-275">Fonctions et opérateurs XQuery affectés</span><span class="sxs-lookup"><span data-stu-id="2eb0c-275">Affected XQuery Functions and Operators</span></span>  
 <span data-ttu-id="2eb0c-276">Les fonctions et opérateurs XQuery suivants gèrent maintenant les paires de substitution UTF-16 correctement dans [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-276">The following XQuery functions and operators now handle UTF-16 surrogate pairs correctly in [!INCLUDE[ssSQL11](../includes/sssql11-md.md)]:</span></span>  
  
-   <span data-ttu-id="2eb0c-277">**FN : String-length**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-277">**fn:string-length**.</span></span> <span data-ttu-id="2eb0c-278">Toutefois, si une paire de substitution non valide ou partielle est passée comme argument, le comportement de **String-length** n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-278">However, if an invalid or partial surrogate pair is passed as an argument, the behavior of **string-length** is undefined.</span></span>  
  
-   <span data-ttu-id="2eb0c-279">**FN : sous-chaîne**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-279">**fn:substring**.</span></span>  
  
-   <span data-ttu-id="2eb0c-280">**FN : contient**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-280">**fn:contains**.</span></span> <span data-ttu-id="2eb0c-281">Toutefois, si une paire de substitution partielle est passée comme valeur, **Contains** peut retourner des résultats inattendus, car elle peut trouver la paire de substitution partielle contenue dans une paire de substitution correcte.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-281">However, if a partial surrogate pair is passed as a value, **contains** may return unexpected results, since it may find the partial surrogate pair contained in well-formed surrogate pair.</span></span>  
  
-   <span data-ttu-id="2eb0c-282">**FN : Concat**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-282">**fn:concat**.</span></span> <span data-ttu-id="2eb0c-283">Toutefois, si une paire de substitution partielle est passée comme valeur, **concat** peut produire des paires de substitution incorrectes ou des paires de substitution partielles.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-283">However, if a partial surrogate pair is passed as a value, **concat** can produce incorrect surrogate pairs or partial surrogate pairs.</span></span>  
  
-   <span data-ttu-id="2eb0c-284">Opérateurs de comparaison et clause **order by** .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-284">Comparison operators and the **order by** clause.</span></span> <span data-ttu-id="2eb0c-285">Les opérateurs de comparaison incluent +, \<, > , \<=, > =, `eq` , `lt` , `gt` , `le` et `ge` .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-285">Comparison operators include +, \<, >, \<=, >=, `eq`, `lt`, `gt`, `le`, and `ge`.</span></span>  
  
#### <a name="distributed-query-calls-to-a-system-procedure"></a><span data-ttu-id="2eb0c-286">Appels de requête distribuée à une procédure système</span><span class="sxs-lookup"><span data-stu-id="2eb0c-286">Distributed Query Calls to a System Procedure</span></span>  
 <span data-ttu-id="2eb0c-287">Les appels de requête distribuée via `OPENQUERY` à certaines procédures système échouent lorsque l'appel est effectué d'un serveur [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] à un autre.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-287">Distributed query calls through `OPENQUERY` to some system procedures will fail when called from one [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] server to another.</span></span> <span data-ttu-id="2eb0c-288">Ceci se produit lorsque le [!INCLUDE[ssDE](../includes/ssde-md.md)] ne peut pas découvrir les métadonnées pour une procédure.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-288">This occurs when the [!INCLUDE[ssDE](../includes/ssde-md.md)] cannot discovery metadata for a procedure.</span></span> <span data-ttu-id="2eb0c-289">Par exemple : `SELECT * FROM OPENQUERY(..., 'EXEC xp_loginfo')`.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-289">For example, `SELECT * FROM OPENQUERY(..., 'EXEC xp_loginfo')`.</span></span>  
  
#### <a name="isolation-level-and-sp_reset_connection"></a><span data-ttu-id="2eb0c-290">Niveau d'isolement et sp_reset_connection</span><span class="sxs-lookup"><span data-stu-id="2eb0c-290">Isolation Level and sp_reset_connection</span></span>  
 <span data-ttu-id="2eb0c-291">Le niveau d'isolement pour les connexions est géré par les pilotes clients de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-291">The isolation level for connections is handled in the following way by client drivers:</span></span>  
  
-   <span data-ttu-id="2eb0c-292">Tous les pilotes natifs (SNAC, MDAC, ODBC) définissent le niveau d'isolement (selon les paramètres de l'application) lors de l'exécution de sp_reset_connection.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-292">All of the native drivers (SNAC, MDAC, ODBC) set the isolation level (based on app setting) upon sp_reset_connection.</span></span>  
  
-   <span data-ttu-id="2eb0c-293">Pour ADO.NET, vous obtiendrez essentiellement un niveau d'isolement aléatoire en fonction de la connexion obtenue à partir du pool (si l'application utilise un niveau d'isolement différent).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-293">For ADO.NET you will essentially get a random isolation level depending on which connection you get from the pool (and if the application uses different isolation level).</span></span> <span data-ttu-id="2eb0c-294">Étant donné que le pool ADO.NET peut recycler les connexions en interne de façon transparente, vous ne pouvez pas prédire quelle connexion vous obtiendrez du pool.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-294">Since ADO.NET pool can recycle connections internally and transparently, you cannot predict what will come out of the pool.</span></span>  
  
-   <span data-ttu-id="2eb0c-295">Avec le pilote JDBC, le comportement est le même que pour ADO.NET</span><span class="sxs-lookup"><span data-stu-id="2eb0c-295">For the JDBC driver you get same behavior as ADO.NET</span></span>  
  
     <span data-ttu-id="2eb0c-296">L'application doit toujours définir explicitement le niveau d'isolement après l'ouverture de la connexion pour obtenir ce qu'elle veut.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-296">The application must always explicitly set isolation level after opening the connection to get what it wants.</span></span>  
  
     <span data-ttu-id="2eb0c-297">Comme la connexion JDBC peut être regroupée dans un pool, il est possible que l'application obtienne un niveau d'isolement aléatoire sans le savoir.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-297">The JDBC connection can be pooled, so the application may get a random isolation level and not know about it.</span></span>  
  
 <span data-ttu-id="2eb0c-298">Pour maintenir la compatibilité descendante, ce nouveau comportement concerne uniquement les clients récents (à partir de TDS 7.4).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-298">To preserve backward compatibility this new behavior only applies for recent clients beginning with TDS 7.4.</span></span>  
  
#### <a name="backward-compatibility"></a><span data-ttu-id="2eb0c-299">Backward Compatibility</span><span class="sxs-lookup"><span data-stu-id="2eb0c-299">Backward Compatibility</span></span>  
 <span data-ttu-id="2eb0c-300">**Le nouveau comportement dépend du niveau de compatibilité**</span><span class="sxs-lookup"><span data-stu-id="2eb0c-300">**New behavior depends on compatibility level**</span></span>  
  
 <span data-ttu-id="2eb0c-301">Les fonctions et opérateurs suivants illustrent le nouveau comportement décrit ci-dessus uniquement lorsque le niveau de compatibilité est supérieur ou égal à 110 :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-301">The following functions and operators demonstrate the new behavior described above only when the compatibility level is 110 or higher:</span></span>  
  
-   <span data-ttu-id="2eb0c-302">**FN : contient**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-302">**fn:contains**.</span></span>  
  
-   <span data-ttu-id="2eb0c-303">**FN : Concat**.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-303">**fn:concat**.</span></span>  
  
-   <span data-ttu-id="2eb0c-304">opérateurs de comparaison et clause **order by**</span><span class="sxs-lookup"><span data-stu-id="2eb0c-304">comparison operators and **order by** clause</span></span>  
  
 <span data-ttu-id="2eb0c-305">**Le nouveau comportement dépend de l'URI d'espace de noms par défaut des fonctions**</span><span class="sxs-lookup"><span data-stu-id="2eb0c-305">**New behavior depends on default namespace URI for functions**</span></span>  
  
 <span data-ttu-id="2eb0c-306">Les fonctions suivantes illustrent le nouveau comportement décrit ci-dessus uniquement lorsque l’URI d’espace de noms par défaut correspond à l’espace de noms dans la recommandation finale, autrement dit, [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions) .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-306">The following functions demonstrate the new behavior described above only when the default namespace URI corresponds to the namespace in the final recommendation, that is, [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions).</span></span> <span data-ttu-id="2eb0c-307">Lorsque le niveau de compatibilité est supérieur ou égal à 110, alors par défaut [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] lie l'espace de noms de fonction par défaut à cet espace de noms.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-307">When the compatibility level is 110 or higher, then by default [!INCLUDE[ssSQL11](../includes/sssql11-md.md)] binds the default function namespace to this namespace.</span></span> <span data-ttu-id="2eb0c-308">Toutefois ces fonctions illustrent le nouveau comportement lorsque cet espace de noms est utilisé quel que soit le niveau de compatibilité.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-308">However these functions demonstrate the new behavior when this namespace is used regardless of the compatibility level.</span></span>  
  
-   <span data-ttu-id="2eb0c-309">**fn:string-length**</span><span class="sxs-lookup"><span data-stu-id="2eb0c-309">**fn:string-length**</span></span>  
  
-   <span data-ttu-id="2eb0c-310">**FN : SUBSTRING**</span><span class="sxs-lookup"><span data-stu-id="2eb0c-310">**fn:substring**</span></span>  
  
##  <a name="breaking-changes-in-sql-server-2008sql-server-2008r2"></a><a name="KJKatmai"></a><span data-ttu-id="2eb0c-311">Dernières modifications dans SQL Server 2008/SQL Server 2008R2</span><span class="sxs-lookup"><span data-stu-id="2eb0c-311">Breaking Changes in SQL Server 2008/SQL Server 2008R2</span></span>  
 <span data-ttu-id="2eb0c-312">Cette section contient les modifications avec rupture introduites dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-312">This section contains the breaking changes introduced in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="2eb0c-313">Aucune modification n'a été introduite dans [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-313">No changes were introduced in [!INCLUDE[ssKilimanjaro](../includes/sskilimanjaro-md.md)].</span></span>  
  
### <a name="collations"></a><span data-ttu-id="2eb0c-314">Classements</span><span class="sxs-lookup"><span data-stu-id="2eb0c-314">Collations</span></span>  
  
|<span data-ttu-id="2eb0c-315">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-315">Feature</span></span>|<span data-ttu-id="2eb0c-316">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-316">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-317">Nouveaux classements</span><span class="sxs-lookup"><span data-stu-id="2eb0c-317">New collations</span></span>|[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] <span data-ttu-id="2eb0c-318">introduit de nouveaux classements qui sont en alignement complet avec les classements fournis par Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-318">introduces new collations that are in full alignment with the collations provided by Windows Server 2008.</span></span> <span data-ttu-id="2eb0c-319">Ces 80 nouveaux classements présentent une précision linguistique améliorée et sont dénotés par des références de version \*_100.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-319">These 80 new collations have improved linguistic accuracy and are denoted by \*_100 version references.</span></span> <span data-ttu-id="2eb0c-320">Si vous choisissez un nouveau classement pour votre serveur ou base de données, gardez à l'esprit que le classement peut ne pas être reconnu par les clients équipés de pilotes clients plus anciens.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-320">If you choose a new collation for your server or database, be aware that the collation may not be recognized by clients with older client drivers.</span></span> <span data-ttu-id="2eb0c-321">En raison des classements non reconnus, l'application peut retourner des erreurs et échouer.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-321">Unrecognized collations can cause the application to return errors and fail.</span></span> <span data-ttu-id="2eb0c-322">Envisagez les solutions suivantes :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-322">Consider the following solutions:</span></span><br /><br /> <span data-ttu-id="2eb0c-323">Mettez à niveau le système d'exploitation du client afin de mettre aussi à jour les classements du système sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-323">Upgrade the client operating system so that the underlying system collations are updated.</span></span><br /><br /> <span data-ttu-id="2eb0c-324">Si le client est équipé du logiciel client de base de données, envisagez de lui appliquer une mise à jour du service.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-324">If your client has database client software installed, consider applying a service update to the database client software.</span></span><br /><br /> <span data-ttu-id="2eb0c-325">Choisissez un classement existant qui établit un mappage à une page de codes du client.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-325">Choose an existing collation that maps to a code page on the client.</span></span>|  
  
### <a name="common-language-runtime-clr"></a><span data-ttu-id="2eb0c-326">Common Language Runtime (CLR)</span><span class="sxs-lookup"><span data-stu-id="2eb0c-326">Common Language Runtime (CLR)</span></span>  
  
|<span data-ttu-id="2eb0c-327">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-327">Feature</span></span>|<span data-ttu-id="2eb0c-328">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-328">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-329">Assemblys CLR</span><span class="sxs-lookup"><span data-stu-id="2eb0c-329">CLR Assemblies</span></span>|<span data-ttu-id="2eb0c-330">Lorsqu'une base de données est mise à niveau vers [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], l'assembly `Microsoft.SqlServer.Types` destiné à prendre en charge de nouveaux types de données est automatiquement installé.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-330">When a database is upgraded to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], the `Microsoft.SqlServer.Types` assembly to support new data types is automatically installed.</span></span> <span data-ttu-id="2eb0c-331">Les règles du Conseiller de mise à niveau détectent tout type d'utilisateur ou assembly avec des noms en conflit.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-331">Upgrade Advisor rules detect any user type or assemblies with conflicting names.</span></span> <span data-ttu-id="2eb0c-332">Le Conseiller de mise à niveau recommandera de renommer tout assembly incompatible, et de renommer tout type en conflit ou d'utiliser des noms en deux parties dans le code pour faire référence à ce type d'utilisateur préexistant.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-332">The Upgrade Advisor will advise renaming of any conflicting assembly, and either renaming any conflicting type, or using two-part names in the code to refer to that preexisting user type.</span></span><br /><br /> <span data-ttu-id="2eb0c-333">Si une mise à niveau de base de données détecte un assembly utilisateur avec un nom en conflit, elle renommera automatiquement cet assembly et placera la base de données en mode suspect.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-333">If a database upgrade detects a user assembly with a conflicting name, it will automatically rename that assembly and put the database into suspect mode.</span></span><br /><br /> <span data-ttu-id="2eb0c-334">Si un type d'utilisateur avec un nom en conflit existe pendant la mise à niveau, aucune étape spéciale n'est suivie.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-334">If a user type with conflicting name exists during the upgrade, no special steps are taken.</span></span> <span data-ttu-id="2eb0c-335">Après la mise à niveau, l'ancien type d'utilisateur et le nouveau type de système existeront tous deux.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-335">After the upgrade, both the old user type, and the new system type, will exist.</span></span> <span data-ttu-id="2eb0c-336">Le type d'utilisateur sera disponible uniquement en utilisant des noms en deux parties.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-336">The user type will be available only through two-part names.</span></span>|  
|<span data-ttu-id="2eb0c-337">Assemblys CLR</span><span class="sxs-lookup"><span data-stu-id="2eb0c-337">CLR Assemblies</span></span>|[!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] <span data-ttu-id="2eb0c-338">installe .NET Framework 3.5 SP1, qui met à jour les bibliothèques dans le GAC (Global Assembly Cache).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-338">installs .NET Framework 3.5 SP1, which updates libraries in the Global Assembly Cache (GAC).</span></span> <span data-ttu-id="2eb0c-339">Si des bibliothèques non prises en charge sont inscrites dans une base de données [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], votre application [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] peut cesser de fonctionner après la mise à niveau vers [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-339">If you have unsupported libraries registered in a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database, your [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] application may stop working after upgrading to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="2eb0c-340">Cela est dû au fait que la maintenance ou la mise à niveau de bibliothèques dans le GAC ne met pas à jour les assemblys à l'intérieur de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-340">This is because servicing or upgrading libraries in the GAC does not update assemblies inside [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2eb0c-341">S'il existe un assembly dans une base de données [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] et dans le GAC, les deux copies de l'assembly doivent être exactement les mêmes.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-341">If an assembly exists both in a [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] database and in the GAC, the two copies of the assembly must exactly match.</span></span> <span data-ttu-id="2eb0c-342">Si ce n'est pas le cas, une erreur se produit lorsque l'assembly est utilisé par l'intégration du CLR [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-342">If they do not match, an error will occur when the assembly is used by [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] CLR integration.</span></span> <span data-ttu-id="2eb0c-343">Pour plus d’informations, consultez [.NET Framework les bibliothèques prises en charge](../relational-databases/clr-integration/database-objects/supported-net-framework-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-343">For more information, see [Supported .NET Framework Libraries](../relational-databases/clr-integration/database-objects/supported-net-framework-libraries.md).</span></span><br /><br /> <span data-ttu-id="2eb0c-344">Après la mise à niveau de votre base de données, effectuez la maintenance ou la mise à niveau de la copie de l'assembly à l'intérieur de vos bases de données [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] avec l'instruction ALTER ASSEMBLY.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-344">After upgrading your database, service or upgrade the copy of the assembly inside your [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] databases with the ALTER ASSEMBLY statement.</span></span> <span data-ttu-id="2eb0c-345">Pour plus d’informations, consultez [l’article 949080](https://go.microsoft.com/fwlink/?LinkId=154563)de la base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-345">For more information, see [Knowledge Base article 949080](https://go.microsoft.com/fwlink/?LinkId=154563).</span></span><br /><br /> <span data-ttu-id="2eb0c-346">Exécutez la requête suivante dans votre base de données pour détecter si vous utilisez une bibliothèque .NET Framework non prise en charge dans votre application.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-346">To detect whether you are using any unsupported .NET framework library in your application, run the following query in your database.</span></span><br /><br /> `SELECT name FROM sys.assemblies WHERE clr_name LIKE '%publickeytoken=b03f5f7f11d50a3a,%';`|  
|<span data-ttu-id="2eb0c-347">Routines CLR</span><span class="sxs-lookup"><span data-stu-id="2eb0c-347">CLR Routines</span></span>|<span data-ttu-id="2eb0c-348">Le recours à l'emprunt d'identité dans des fonctions CLR définies par l'utilisateur, des agrégats définis par l'utilisateur ou des types définis par l'utilisateur (UDT) peut entraîner une défaillance de votre application avec l'erreur 6522 suite à une mise à niveau vers [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-348">Using impersonation inside CLR user-defined functions, user-defined aggregates, or user-defined types (UDTs) may cause your application to fail with error 6522 after upgrading to [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="2eb0c-349">Les scénarios suivants réussissent dans [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] mais échouent dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-349">The following scenarios succeed in [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] but fail in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="2eb0c-350">Des résolutions sont fournies pour chaque scénario.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-350">Resolutions are provided for each scenario.</span></span><br /><br /> <span data-ttu-id="2eb0c-351">Une fonction CLR définie par l’utilisateur, un agrégat défini par l’utilisateur ou une méthode UDT qui utilise l’emprunt d’identité a un paramètre de type,,,,, `nvarchar(max)` `varchar(max)` `varbinary(max)` `ntext` `text` `image` ou un UDT volumineux, et n’a pas l’attribut **DataAccessKind. Read** sur la méthode.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-351">A CLR user-defined function, user-defined aggregate, or UDT method that uses impersonation has a parameter of type `nvarchar(max)`, `varchar(max)`, `varbinary(max)`, `ntext`, `text`, `image`, or a large UDT, and does not have the **DataAccessKind.Read** attribute on the method.</span></span> <span data-ttu-id="2eb0c-352">Pour résoudre ce problème, ajoutez l’attribut **DataAccessKind. Read** sur la méthode, recompilez l’assembly et redéployez la routine et l’assembly.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-352">To resolve this issue, add the **DataAccessKind.Read** attribute on the method, recompile the assembly, and re-deploy the routine and the assembly.</span></span><br /><br /> <span data-ttu-id="2eb0c-353">Fonction table CLR qui a une méthode **init** qui effectue l’emprunt d’identité.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-353">A CLR table-valued function that has an **Init** method that performs impersonation.</span></span> <span data-ttu-id="2eb0c-354">Pour résoudre ce problème, ajoutez l’attribut **DataAccessKind. Read** sur la méthode, recompilez l’assembly et redéployez la routine et l’assembly.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-354">To resolve this issue add the **DataAccessKind.Read** attribute on the method, recompile the assembly, and re-deploy the routine and the assembly.</span></span><br /><br /> <span data-ttu-id="2eb0c-355">Fonction table CLR qui a une méthode **FillRow** qui effectue l’emprunt d’identité.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-355">A CLR table-valued function that has a **FillRow** method that performs impersonation.</span></span> <span data-ttu-id="2eb0c-356">Pour résoudre ce problème, supprimez l’emprunt d’identité de la méthode **FillRow** .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-356">To resolve this issue, remove impersonation from the **FillRow** method.</span></span> <span data-ttu-id="2eb0c-357">N’accédez pas aux ressources externes à l’aide de la méthode **FillRow** .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-357">Do not access external resources by using the **FillRow** method.</span></span> <span data-ttu-id="2eb0c-358">Au lieu de cela, accédez à des ressources externes à partir de la méthode **init** .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-358">Instead, access external resources from the **Init** method.</span></span>|  
  
### <a name="dynamic-management-views"></a><span data-ttu-id="2eb0c-359">Vues de gestion dynamique</span><span class="sxs-lookup"><span data-stu-id="2eb0c-359">Dynamic Management Views</span></span>  
  
|<span data-ttu-id="2eb0c-360">Affichage</span><span class="sxs-lookup"><span data-stu-id="2eb0c-360">View</span></span>|<span data-ttu-id="2eb0c-361">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-361">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="2eb0c-362">sys.dm_os_sys_info</span><span class="sxs-lookup"><span data-stu-id="2eb0c-362">sys.dm_os_sys_info</span></span>|<span data-ttu-id="2eb0c-363">Suppression des colonnes cpu_ticks_in_ms et sqlserver_start_time_cpu_ticks.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-363">Removed the cpu_ticks_in_ms and sqlserver_start_time_cpu_ticks columns.</span></span>|  
|<span data-ttu-id="2eb0c-364">sys. dm_exec_query_resource_semaphoressys. dm_exec_query_memory_grants</span><span class="sxs-lookup"><span data-stu-id="2eb0c-364">sys.dm_exec_query_resource_semaphoressys.dm_exec_query_memory_grants</span></span>|<span data-ttu-id="2eb0c-365">La colonne resource_semaphore_id n'est pas un ID unique dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-365">The resource_semaphore_id column is not a unique ID in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="2eb0c-366">Cette modification peut affecter l'exécution de la requête de résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-366">This change can affect troubleshooting query execution.</span></span> <span data-ttu-id="2eb0c-367">Pour plus d’informations, consultez [sys. dm_exec_query_resource_semaphores &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-query-resource-semaphores-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-367">For more information, see [sys.dm_exec_query_resource_semaphores &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-query-resource-semaphores-transact-sql).</span></span>|  
  
### <a name="errors-and-events"></a><span data-ttu-id="2eb0c-368">Erreurs et événements</span><span class="sxs-lookup"><span data-stu-id="2eb0c-368">Errors and Events</span></span>  
  
|<span data-ttu-id="2eb0c-369">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-369">Feature</span></span>|<span data-ttu-id="2eb0c-370">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-370">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-371">Erreurs de connexion</span><span class="sxs-lookup"><span data-stu-id="2eb0c-371">Login errors</span></span>|<span data-ttu-id="2eb0c-372">Dans [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], l'erreur 18452 est retournée lorsqu'une connexion SQL est utilisée pour la connexion à un serveur configuré pour utiliser uniquement l'authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-372">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], error 18452 is returned when a SQL login is used to connect to a server configured to use only Windows Authentication.</span></span> <span data-ttu-id="2eb0c-373">Dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], l'erreur 18456 est retournée à la place.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-373">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], error 18456 is returned instead.</span></span>|  
  
### <a name="showplan"></a><span data-ttu-id="2eb0c-374">Showplan</span><span class="sxs-lookup"><span data-stu-id="2eb0c-374">Showplan</span></span>  
  
|<span data-ttu-id="2eb0c-375">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-375">Feature</span></span>|<span data-ttu-id="2eb0c-376">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-376">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-377">Schéma du plan d'exécution XML</span><span class="sxs-lookup"><span data-stu-id="2eb0c-377">Showplan XML schema</span></span>|<span data-ttu-id="2eb0c-378">Un nouvel élément **SeekPredicateNew** est ajouté au schéma Showplan XML, et la séquence XSD englobante (**SqlPredicatesType**) est convertie en **\<xsd:choice>** élément.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-378">A new **SeekPredicateNew** element is added to the Showplan XML schema, and the enclosing xsd sequence (**SqlPredicatesType**) is converted into an **\<xsd:choice>** item.</span></span> <span data-ttu-id="2eb0c-379">Au lieu d’un ou plusieurs éléments **SeekPredicate** , un ou plusieurs éléments **SeekPredicateNew** peuvent désormais apparaître dans le Showplan XML.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-379">Instead of one or more **SeekPredicate** elements, one or more **SeekPredicateNew** elements may now appear in the Showplan XML.</span></span> <span data-ttu-id="2eb0c-380">Les deux éléments s'excluent mutuellement.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-380">The two elements are mutually exclusive.</span></span> <span data-ttu-id="2eb0c-381">**SeekPredicate** est conservé dans le schéma Showplan XML à des fins de compatibilité descendante. Toutefois, les plans de requête créés dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] peuvent contenir l’élément **SeekPredicateNew** .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-381">**SeekPredicate** is maintained in the Showplan XML schema for backwards compatibility; however, query plans created in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] may contain the **SeekPredicateNew** element.</span></span> <span data-ttu-id="2eb0c-382">Les applications qui s’attendent à récupérer uniquement l’enfant **SeekPredicate** à partir du nœud ShowplanXml/BatchSequence/batch/States/StmtSimple/QueryPlan/RelOp/IndexScan/SeekPredicates peuvent échouer si l’élément **SeekPredicate** n’existe pas.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-382">Applications that expect to retrieve only the **SeekPredicate** child from the node ShowPlanXML/BatchSequence/Batch/Statements/StmtSimple/QueryPlan/RelOp/IndexScan/SeekPredicates may fail if the **SeekPredicate** element does not exist.</span></span> <span data-ttu-id="2eb0c-383">Réécrivez l’application pour qu’elle attende l’élément **SeekPredicate** ou **SeekPredicateNew** dans ce nœud.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-383">Rewrite the application to expect either the **SeekPredicate** or **SeekPredicateNew** element in this node.</span></span> <span data-ttu-id="2eb0c-384">Pour plus d'informations, consultez .</span><span class="sxs-lookup"><span data-stu-id="2eb0c-384">For more information, see .</span></span>|  
|<span data-ttu-id="2eb0c-385">Schéma du plan d'exécution XML</span><span class="sxs-lookup"><span data-stu-id="2eb0c-385">Showplan XML schema</span></span>|<span data-ttu-id="2eb0c-386">Un nouvel attribut **IndexKind** est ajouté au type complexe **ObjectType** dans le schéma Showplan XML.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-386">A new **IndexKind** attribute is added to the **ObjectType** complex type in the Showplan XML schema.</span></span> <span data-ttu-id="2eb0c-387">Les applications qui valident de façon stricte les plans [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] sur le schéma [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] échouent.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-387">Applications that strictly validate [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] plans against the [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] schema will fail.</span></span>|  
  
### <a name="transact-sql"></a><span data-ttu-id="2eb0c-388">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="2eb0c-388">Transact-SQL</span></span>  
  
|<span data-ttu-id="2eb0c-389">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-389">Feature</span></span>|<span data-ttu-id="2eb0c-390">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-390">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-391">Événement DDL ALTER_AUTHORIZATION_DATABASE</span><span class="sxs-lookup"><span data-stu-id="2eb0c-391">ALTER_AUTHORIZATION_DATABASE DDL event</span></span>|<span data-ttu-id="2eb0c-392">Dans [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , lorsque l’événement ddl ALTER_AUTHORIZATION_DATABASE se déclenche, la valeur « Object » est retournée dans l’élément **ObjectType** du XML EventData pour cet événement lorsque le type d’entité de l’élément sécurisable dans l’opération DDL (Data Definition Language) est un objet.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-392">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], when the DDL event ALTER_AUTHORIZATION_DATABASE fires, the value 'object' is returned in the **ObjectType** element of the EVENTDATA xml for this event when the entity type of the securable in the data definition language (DDL) operation is an object.</span></span> <span data-ttu-id="2eb0c-393">Dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], le type réel (par exemple, « table » ou « function ») est retourné.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-393">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], the actual type (for example, 'table', or 'function') is returned.</span></span>|  
|<span data-ttu-id="2eb0c-394">CONVERT</span><span class="sxs-lookup"><span data-stu-id="2eb0c-394">CONVERT</span></span>|<span data-ttu-id="2eb0c-395">Si un style non valide est passé à la fonction CONVERT, une erreur est retournée lorsque la conversion est de type binaire à caractère ou caractère à binaire.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-395">If an invalid style is passed to the CONVERT function, an error is returned when the type of conversion is binary to character or character to binary.</span></span> <span data-ttu-id="2eb0c-396">Dans les versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], le style non valide est défini sur le style par défaut pour les conversions binaire à caractère et caractère à binaire.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-396">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], the invalid style is set to the default style for binary-to-character and character-to-binary conversions.</span></span>|  
|<span data-ttu-id="2eb0c-397">GRANT/DENY/REVOKE EXECUTE sur les assemblys</span><span class="sxs-lookup"><span data-stu-id="2eb0c-397">GRANT/DENY/REVOKE EXECUTE on assemblies</span></span>|<span data-ttu-id="2eb0c-398">L'autorisation EXECUTE ne peut pas être accordée, révoquée ou refusée sur les assemblys.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-398">EXECUTE permission cannot be granted, denied, or revoked to assemblies.</span></span> <span data-ttu-id="2eb0c-399">Cette autorisation n'a aucun effet et provoque à présent une erreur.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-399">This permission has no affect and now causes an error.</span></span> <span data-ttu-id="2eb0c-400">Accordez, refusez ou révoquez une autorisation EXECUTE sur les procédures stockées ou fonctions qui font plutôt référence à la méthode d'assembly.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-400">Grant, deny, or revoke EXECUTE permission on the stored procedures or functions that reference the assembly method instead.</span></span>|  
|<span data-ttu-id="2eb0c-401">Autorisations GRANT/DENY/REVOKE sur les types de systèmes</span><span class="sxs-lookup"><span data-stu-id="2eb0c-401">GRANT/DENY/REVOKE permissions on system types</span></span>|<span data-ttu-id="2eb0c-402">Les autorisations ne peuvent pas être accordées, révoquées ou refusées sur les types de systèmes.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-402">Permissions cannot be granted, denied, or revoked to system types.</span></span> <span data-ttu-id="2eb0c-403">Dans les versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], ces instructions sont correctement exécutées, mais n'ont aucun effet.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-403">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], these statements succeed but have no effect.</span></span> <span data-ttu-id="2eb0c-404">Dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], une erreur est retournée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-404">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], an error is returned.</span></span>|  
|<span data-ttu-id="2eb0c-405">GROUP BY</span><span class="sxs-lookup"><span data-stu-id="2eb0c-405">GROUP BY</span></span>|<span data-ttu-id="2eb0c-406">La clause GROUP BY ne peut pas contenir de sous-requête dans une expression utilisée pour la liste GROUP BY.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-406">The GROUP BY clause cannot contain a subquery in an expression that is used for the group by list.</span></span> <span data-ttu-id="2eb0c-407">Dans les versions antérieures de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], cela était autorisé.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-407">In earlier versions of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], this was allowed.</span></span> <span data-ttu-id="2eb0c-408">Dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], l'erreur 144 est retournée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-408">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], error 144 is returned.</span></span><br /><br /> <span data-ttu-id="2eb0c-409">Par exemple, le code suivant réussit dans SQL Server 2005 et échoue dans SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-409">For example, the following code will succeed in SQL Server 2005 and fail in SQL Server 2008.</span></span><br /><br /> `DECLARE @Test TABLE(a int NOT NULL);` <br /> `INSERT INTO @Test SELECT 1 union ALL SELECT 2;` <br /> `SELECT COUNT(*)` <br /> `FROM @Test` <br /> `GROUP BY CASE WHEN a IN (SELECT t.a FROM @Test AS t)` <br /> `THEN 1 ELSE 0` <br /> `END;`|  
|<span data-ttu-id="2eb0c-410">Clause OUTPUT</span><span class="sxs-lookup"><span data-stu-id="2eb0c-410">OUTPUT clause</span></span>|<span data-ttu-id="2eb0c-411">Pour empêcher tout comportement non déterministe, la clause OUTPUT ne peut pas référencer une colonne d'une vue ou fonction table lorsque cette colonne est définie par l'une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-411">To prevent nondeterministic behavior, the OUTPUT clause cannot reference a column from a view or inline table-valued function when that column is defined by one of the following methods:</span></span><br /><br /> <span data-ttu-id="2eb0c-412">Une sous-requête.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-412">A subquery.</span></span><br /><br /> <span data-ttu-id="2eb0c-413">Une fonction définie par l'utilisateur qui offre un accès à des données utilisateur ou système, ou qui est supposée permettre d'y accéder.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-413">A user-defined function that performs user- or system-data access, or is assumed to perform such access.</span></span><br /><br /> <span data-ttu-id="2eb0c-414">Une colonne calculée qui contient une fonction définie par l'utilisateur qui offre un accès aux données utilisateur ou système dans sa définition.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-414">A computed column that contains in its definition a user-defined function that performs user- or system-data access.</span></span><br /><br /> <br /><br /> <span data-ttu-id="2eb0c-415">Quand [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] détecte une telle colonne dans la clause OUTPUT, l’erreur 4186 est générée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-415">When [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] detects such a column in the OUTPUT clause, error 4186 is raised.</span></span> <span data-ttu-id="2eb0c-416">Pour plus d’informations, consultez [MSSQLSERVER_4186](../relational-databases/errors-events/mssqlserver-4186-database-engine-error.md).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-416">For more information, see [MSSQLSERVER_4186](../relational-databases/errors-events/mssqlserver-4186-database-engine-error.md).</span></span>|  
|<span data-ttu-id="2eb0c-417">Clause OUTPUT INTO</span><span class="sxs-lookup"><span data-stu-id="2eb0c-417">OUTPUT INTO clause</span></span>|<span data-ttu-id="2eb0c-418">La table cible de la clause OUTPUT INTO ne peut pas comporter de déclencheurs activés.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-418">The target table of the OUTPUT INTO clause cannot have any enabled triggers.</span></span>|  
|<span data-ttu-id="2eb0c-419">Option de niveau serveur precompute rank</span><span class="sxs-lookup"><span data-stu-id="2eb0c-419">precompute rank server-level option</span></span>|<span data-ttu-id="2eb0c-420">Cette option n'est pas prise en charge dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-420">This option is not supported in [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)].</span></span> <span data-ttu-id="2eb0c-421">Modifiez dès que possible les applications qui utilisent actuellement cette fonction.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-421">Modify applications that currently use this feature as soon as possible.</span></span>|  
|<span data-ttu-id="2eb0c-422">READPAST, indicateur de table</span><span class="sxs-lookup"><span data-stu-id="2eb0c-422">READPAST table hint</span></span>|<span data-ttu-id="2eb0c-423">Vous ne pouvez pas spécifier l'indicateur READPAST sous l'isolement d'instantané.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-423">You cannot specify the READPAST hint under Snapshot Isolation.</span></span><br /><br /> <span data-ttu-id="2eb0c-424">L'indicateur READPAST est ignoré lorsque l'option de base de données READ_COMMITED_SNAPSHOT ou ALLOW_SNAPSHOT_ISOLATION est activée (ON).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-424">The READPAST hint is ignored when either the READ_COMMITED_SNAPSHOT or ALLOW_SNAPSHOT_ISOLATION database option is set to ON.</span></span> <span data-ttu-id="2eb0c-425">Toutefois, si vous combinez l'indicateur READPAST avec READCOMMITTEDLOCK, le comportement de READPAST correspond à l'indicateur de blocage READCOMMITTED.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-425">However, if you combine the READPAST hint with READCOMMITTEDLOCK, the READPAST behavior is same as with the blocking READCOMMITTED hint.</span></span>|  
|<span data-ttu-id="2eb0c-426">sp_helpuser</span><span class="sxs-lookup"><span data-stu-id="2eb0c-426">sp_helpuser</span></span>|<span data-ttu-id="2eb0c-427">Les noms de colonnes suivants qui sont retournés dans le jeu de résultats de la procédure stockée sp_helpuser ont été modifiés :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-427">The following column names that are returned in the result set of the sp_helpuser stored procedure have changed:</span></span><br /><br /> <span data-ttu-id="2eb0c-428">GroupName est maintenant :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-428">GroupName is now:</span></span><br />                            <span data-ttu-id="2eb0c-429">RoleName</span><span class="sxs-lookup"><span data-stu-id="2eb0c-429">RoleName</span></span><br /><br /> <span data-ttu-id="2eb0c-430">Group_name est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-430">Group_name is now:</span></span><br />                            <span data-ttu-id="2eb0c-431">Role_name</span><span class="sxs-lookup"><span data-stu-id="2eb0c-431">Role_name</span></span><br /><br /> <span data-ttu-id="2eb0c-432">Group_id est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-432">Group_id is now:</span></span><br />                            <span data-ttu-id="2eb0c-433">Role_id</span><span class="sxs-lookup"><span data-stu-id="2eb0c-433">Role_id</span></span><br /><br /> <span data-ttu-id="2eb0c-434">Users_in_group est désormais :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-434">Users_in_group is now:</span></span><br />                            <span data-ttu-id="2eb0c-435">Users_in_role</span><span class="sxs-lookup"><span data-stu-id="2eb0c-435">Users_in_role</span></span>|  
|<span data-ttu-id="2eb0c-436">chiffrement transparent des données</span><span class="sxs-lookup"><span data-stu-id="2eb0c-436">Transparent Data Encryption</span></span>|<span data-ttu-id="2eb0c-437">Le chiffrement transparent des données est effectué au niveau d'E/S : la structure de page est non chiffrée en mémoire et chiffrée uniquement lorsque la page est écrite sur disque.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-437">Transparent data encryption (TDE) is performed at the I/O level: the page structure is unencrypted in memory and is encrypted only when the page is written to disk.</span></span> <span data-ttu-id="2eb0c-438">Les fichiers de bases de données et les fichiers journaux sont tous deux chiffrés.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-438">Both the database files and log files are encrypted.</span></span> <span data-ttu-id="2eb0c-439">Les applications tierces qui ignorent le mécanisme [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] standard pour accéder aux pages (par exemple, en analysant directement les fichiers de données ou journaux) échouent lorsqu'une base de données utilise le chiffrement transparent des données, car les données sont chiffrées dans les fichiers.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-439">Third-party applications that bypass the regular [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] mechanism for accessing pages (for example, by scanning the data or log files directly), will fail when a database uses TDE because the data is encrypted in the files.</span></span> <span data-ttu-id="2eb0c-440">De telles applications peuvent exploiter l'API de chiffrement Windows pour développer une solution pour déchiffrer les données à l'extérieur de [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2eb0c-440">Such applications can leverage the Window Cryptographic API to develop a solution for decrypting the data outside of [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)].</span></span>|  
  
### <a name="xquery"></a><span data-ttu-id="2eb0c-441">XQuery</span><span class="sxs-lookup"><span data-stu-id="2eb0c-441">XQuery</span></span>  
  
|<span data-ttu-id="2eb0c-442">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-442">Feature</span></span>|<span data-ttu-id="2eb0c-443">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-443">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-444">Prise en charge de la date et de l'heure</span><span class="sxs-lookup"><span data-stu-id="2eb0c-444">Datetime support</span></span>|<span data-ttu-id="2eb0c-445">Dans [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , les types de données `xs:time` , `xs:date` et `xs:dateTime` ne prennent pas en charge les fuseaux horaires.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-445">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], the data types `xs:time`, `xs:date`, and `xs:dateTime` do not have timezone support.</span></span> <span data-ttu-id="2eb0c-446">Les données de fuseau horaire sont mappées au fuseau horaire UTC.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-446">Timezone data is mapped to the UTC timezone.</span></span> [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)] <span data-ttu-id="2eb0c-447">présente un comportement conforme standard qui a pour conséquence les modifications suivantes :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-447">, provides standard conformant behavior, resulting in the following changes:</span></span><br /><br /> <span data-ttu-id="2eb0c-448">Les valeurs sans fuseau horaire sont validées.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-448">Values without timezone are validated.</span></span><br /><br /> <span data-ttu-id="2eb0c-449">Le fuseau horaire fourni ou l'absence de fuseau horaire est un paramètre conservé.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-449">The provided timezone or the absence of a timezone is preserved.</span></span><br /><br /> <span data-ttu-id="2eb0c-450">La représentation de stockage interne est modifiée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-450">The internal storage representation is modified.</span></span><br /><br /> <span data-ttu-id="2eb0c-451">La résolution des valeurs stockées est augmentée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-451">Resolution of stored values is increased.</span></span><br /><br /> <span data-ttu-id="2eb0c-452">Les années négatives ne sont pas autorisées.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-452">Negative years are disallowed.</span></span><br /><br /> <br /><br /> <span data-ttu-id="2eb0c-453">Remarque : modifiez les applications et les expressions XQuery pour prendre en compte les nouvelles valeurs de type.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-453">Note: Modify applications and XQuery expressions to account for the new type values.</span></span>|  
|<span data-ttu-id="2eb0c-454">Expressions XQuery et XPath</span><span class="sxs-lookup"><span data-stu-id="2eb0c-454">XQuery and Xpath expressions</span></span>|<span data-ttu-id="2eb0c-455">Dans [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)] , les étapes d’une expression XQuery ou XPath qui commencent par un signe deux-points («  : ») sont autorisées.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-455">In [!INCLUDE[ssVersion2005](../includes/ssversion2005-md.md)], steps in an XQuery or XPath expression that begin with a colon (':') are allowed.</span></span> <span data-ttu-id="2eb0c-456">Par exemple, l'instruction suivante contient un test de nom (`CTR02)` dans l'expression XPath qui commence par un signe deux-points.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-456">For example, the following statement contains a name test (`CTR02)` within the path expression that begins with a colon.</span></span><br /><br /> `SELECT FileContext.query('for n$ in //CTR return <C>{data )(n$/:CTR02)} </C>) AS Files FROM dbo.MyTable;`<br /><br /> <span data-ttu-id="2eb0c-457">Dans [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], cette utilisation est rejetée, car elle n'est pas conforme aux normes XML.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-457">In [!INCLUDE[ssKatmai](../includes/sskatmai-md.md)], this usage is disallowed because it does not conform to XML standards.</span></span> <span data-ttu-id="2eb0c-458">L'erreur 9341 est retournée.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-458">Error 9341 is returned.</span></span> <span data-ttu-id="2eb0c-459">Supprimez le signe deux-points de début ou spécifiez un préfixe pour le test de nom, par exemple (n$/CTR02) ou (n$/p1:CTR02).</span><span class="sxs-lookup"><span data-stu-id="2eb0c-459">Remove the leading colon or specify a prefix for the name test--for example, (n$/CTR02) or (n$/p1:CTR02).</span></span>|  
  
### <a name="connecting"></a><span data-ttu-id="2eb0c-460">Connecting</span><span class="sxs-lookup"><span data-stu-id="2eb0c-460">Connecting</span></span>  
  
|<span data-ttu-id="2eb0c-461">Fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="2eb0c-461">Feature</span></span>|<span data-ttu-id="2eb0c-462">Description</span><span class="sxs-lookup"><span data-stu-id="2eb0c-462">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="2eb0c-463">Connexion depuis [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client à l'aide de SSL</span><span class="sxs-lookup"><span data-stu-id="2eb0c-463">Connecting from [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client using SSL</span></span>|<span data-ttu-id="2eb0c-464">Lors de la connexion à [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client, les applications qui utilisent "SERVER=shortname; FORCE ENCRYPTION=true" avec un certificat dont les objets spécifient des noms de domaine complet (FQDN) se sont connectées par le passé en raison d'une validation souple.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-464">When connecting with [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] Native Client, applications that use "SERVER=shortname; FORCE ENCRYPTION=true" with certificate whose Subjects specify Fully Qualified Domain Names (FQDN's) have connected in the past due to relaxed validation.</span></span> <span data-ttu-id="2eb0c-465">SQL Server 2008 R2 améliore la sécurité en mettant en vigueur des objets de nom de domaine complet pour les certificats.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-465">SQL Server 2008 R2 enhances security by enforcing FQDN subjects for certificates.</span></span> <span data-ttu-id="2eb0c-466">Les applications qui reposent sur une validation souple doivent entreprendre l'une des actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="2eb0c-466">Applications that rely upon relaxed validation must take one of the following actions:</span></span><br /><br /> <span data-ttu-id="2eb0c-467">Utiliser le nom de domaine complet dans la chaîne de connexion.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-467">Use the FQDN in the connection string.</span></span><br /><br /> <span data-ttu-id="2eb0c-468">-Cette option ne nécessite pas la recompilation de l’application si le mot clé SERVER de la chaîne de connexion est configuré à l’extérieur de l’application.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-468">-This option does not require recompiling the application if the SERVER keyword of the connection string is configured outside the application.</span></span><br /><br /> <span data-ttu-id="2eb0c-469">-Cette option ne fonctionne pas pour les applications dont les chaînes de connexion sont codées en dur.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-469">-This option does not work for applications that have their connection strings hardcoded.</span></span><br /><br /> <span data-ttu-id="2eb0c-470">-Cette option ne fonctionne pas pour les applications qui utilisent la mise en miroir de bases de données dans la mesure où le serveur mis en miroir répond avec un nom simple.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-470">-This option does not work for applications that use Database Mirroring since the mirrored server replies with a simple name.</span></span>|  
||<span data-ttu-id="2eb0c-471">Ajouter un alias pour le nom court à mapper sur le nom de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-471">Add an alias for the shortname to map to the FQDN.</span></span><br /><br /> <span data-ttu-id="2eb0c-472">: Cette option fonctionne même pour les applications dont les chaînes de connexion sont codées en dur.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-472">-This option works even for applications that have their connection strings hardcoded.</span></span><br /><br /> <span data-ttu-id="2eb0c-473">-Cette option ne fonctionne pas pour les applications qui utilisent la mise en miroir de bases de données, car les fournisseurs ne recherchent pas les alias pour les noms de partenaires de basculement reçus.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-473">-This option does not work for applications that use Database Mirroring since the providers don't look up aliases for received failover partner names.</span></span>|  
||<span data-ttu-id="2eb0c-474">Faire en sorte qu'un certificat soit émis pour le nom court.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-474">Have a certificate issued for shortname.</span></span><br /><br /> <span data-ttu-id="2eb0c-475">: Cette option fonctionne pour toutes les applications.</span><span class="sxs-lookup"><span data-stu-id="2eb0c-475">-This option works for all applications.</span></span>|  

## <a name="breaking-changes-in-sql-server-2005"></a><a name="Yukon"></a><span data-ttu-id="2eb0c-476">Modifications avec rupture dans SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="2eb0c-476">Breaking Changes in SQL Server 2005</span></span>  

[!INCLUDE[Archived documentation for very old versions of SQL Server](../includes/paragraph-content/previous-versions-archive-documentation-sql-server.md)]

## <a name="see-also"></a><span data-ttu-id="2eb0c-477">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2eb0c-477">See Also</span></span>  
 <span data-ttu-id="2eb0c-478">[Fonctionnalités de Moteur de base de données dépréciées dans SQL Server 2014](deprecated-database-engine-features-in-sql-server-2016.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="2eb0c-478">[Deprecated Database Engine Features in SQL Server 2014](deprecated-database-engine-features-in-sql-server-2016.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="2eb0c-479">[Changements de comportement des fonctionnalités de Moteur de base de données dans SQL Server 2014](../../2014/database-engine/behavior-changes-to-database-engine-features-in-sql-server-2014.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="2eb0c-479">[Behavior Changes to Database Engine Features in SQL Server 2014](../../2014/database-engine/behavior-changes-to-database-engine-features-in-sql-server-2014.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="2eb0c-480">[Fonctionnalités de Moteur de base de données abandonnées dans SQL Server 2014](discontinued-database-engine-functionality-in-sql-server-2016.md?view=sql-server-2014) </span><span class="sxs-lookup"><span data-stu-id="2eb0c-480">[Discontinued Database Engine Functionality in SQL Server 2014](discontinued-database-engine-functionality-in-sql-server-2016.md?view=sql-server-2014) </span></span>  
 <span data-ttu-id="2eb0c-481">[Compatibilité descendante du moteur de base de données SQL Server](sql-server-database-engine-backward-compatibility.md) </span><span class="sxs-lookup"><span data-stu-id="2eb0c-481">[SQL Server Database Engine Backward Compatibility](sql-server-database-engine-backward-compatibility.md) </span></span>  
 [<span data-ttu-id="2eb0c-482">Niveau de compatibilité ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2eb0c-482">ALTER DATABASE Compatibility Level &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql-compatibility-level)  
 [<span data-ttu-id="2eb0c-483">Dernières modifications apportées aux fonctionnalités des outils d'administration dans SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="2eb0c-483">Breaking Changes to Management Tools Features in SQL Server 2014</span></span>](breaking-changes-to-management-tools-features-in-sql-server-2014.md?view=sql-server-2014)  
  
