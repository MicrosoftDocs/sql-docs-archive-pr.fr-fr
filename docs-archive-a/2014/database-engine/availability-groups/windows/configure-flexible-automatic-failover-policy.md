---
title: Configurer la stratégie de basculement flexible pour contrôler les conditions du basculement automatique (groupes de disponibilité Always On) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], flexible failover policy
- Availability Groups [SQL Server], failover
- failover [SQL Server], AlwaysOn Availability Groups
ms.assetid: 1ed564b4-9835-4245-ae35-9ba67419a4ce
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: c938624a3ed39fe2d41f21a21af5231aa76a8c17
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87707912"
---
# <a name="configure-the-flexible-failover-policy-to-control-conditions-for-automatic-failover-always-on-availability-groups"></a><span data-ttu-id="c5d2f-102">Configurer la stratégie de basculement flexible pour contrôler les conditions du basculement automatique (groupes de disponibilité Always On)</span><span class="sxs-lookup"><span data-stu-id="c5d2f-102">Configure the Flexible Failover Policy to Control Conditions for Automatic Failover (Always On Availability Groups)</span></span>
  <span data-ttu-id="c5d2f-103">Cette rubrique explique comment configurer la stratégie de basculement flexible pour un groupe de disponibilité AlwaysOn à l'aide de [!INCLUDE[tsql](../../../includes/tsql-md.md)] ou PowerShell dans [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c5d2f-103">This topic describes how to configure the flexible failover policy for an AlwaysOn availability group by using [!INCLUDE[tsql](../../../includes/tsql-md.md)] or PowerShell in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="c5d2f-104">Une stratégie de basculement flexible vous offre un contrôle granulaire sur les conditions qui entraînent un basculement automatique d'un groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-104">A flexible failover policy provides granular control over the conditions that cause automatic failover for an availability group.</span></span> <span data-ttu-id="c5d2f-105">En changeant les conditions d'échec qui déclenchent un basculement automatique et la fréquence des contrôles d'intégrité, vous pouvez augmenter ou diminuer la probabilité d'un basculement automatique pour assurer le contrat de niveau de service relatif à la haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-105">By changing the failure conditions that trigger an automatic failover and the frequency of health checks, you can increase or decrease the likelihood of an automatic failover to support your SLA for high availability.</span></span>  
  
  
  
    > [!NOTE]  
    >  The flexible failover policy of an availability group cannot be configured by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="c5d2f-106">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="c5d2f-106">Before You Begin</span></span>  
  
###  <a name="limitations-on-automatic-failovers"></a><a name="Limitations"></a><span data-ttu-id="c5d2f-107">Limitations sur les basculements automatiques</span><span class="sxs-lookup"><span data-stu-id="c5d2f-107">Limitations on Automatic Failovers</span></span>  
  
-   <span data-ttu-id="c5d2f-108">Pour qu'un basculement automatique se produise, le réplica principal et un réplica secondaire doivent être configurés pour le mode de disponibilité avec validation synchrone et basculement automatique et le réplica secondaire doit être synchronisé avec le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-108">For an automatic failover to occur, the current primary replica and one secondary replica must be configured for synchronous-commit availability mode with automatic failover and the secondary replica must be synchronized with the primary replica.</span></span>  
  
-   <span data-ttu-id="c5d2f-109">Si un groupe de disponibilité dépasse le seuil d'échec WSFC, le cluster WSFC ne tente pas un basculement automatique du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-109">If an availability group exceeds its WSFC failure threshold, the WSFC cluster will not attempt an automatic failover for the availability group.</span></span> <span data-ttu-id="c5d2f-110">En outre, le groupe de ressources WSFC du groupe de disponibilité reste à l'état d'échec jusqu'à ce que l'administrateur de cluster mette manuellement le groupe de ressources en ligne ou jusqu'à ce que l'administrateur de base de données exécute un basculement manuel du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-110">Furthermore, the WSFC resource group of the availability group remains in a failed state until either the cluster administrator manually brings the failed resource group online or the database administrator performs a manual failover of the availability group.</span></span> <span data-ttu-id="c5d2f-111">Le *seuil d'échec WSFC* est le nombre maximal d'échecs autorisés pour le groupe de disponibilité au cours d'une période donnée.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-111">The *WSFC failure threshold* is defined as the maximum number of failures supported for the availability group during a given time period.</span></span> <span data-ttu-id="c5d2f-112">La période par défaut est de six heures, et la valeur par défaut du nombre maximal d’échecs au cours de cette période est *n*-1, où *n* est le nombre de nœuds de WSFC.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-112">The default time period is six hours, and the default value for the maximum number of failures during this period is *n*-1, where *n* is the number of WSFC nodes.</span></span> <span data-ttu-id="c5d2f-113">Pour modifier les valeurs de seuil/d'échec pour un groupe de disponibilité donné, utilisez la console du gestionnaire de basculement WSFC.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-113">To change the failure-threshold values for a given availability group, use the WSFC Failover Manager Console.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="c5d2f-114">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="c5d2f-114">Prerequisites</span></span>  
  
-   <span data-ttu-id="c5d2f-115">Vous devez être connecté à l'instance de serveur qui héberge le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-115">You must be connected to the server instance that hosts the primary replica.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="c5d2f-116">Sécurité</span><span class="sxs-lookup"><span data-stu-id="c5d2f-116">Security</span></span>  
  
####  <a name="permissions"></a><a name="Permissions"></a> <span data-ttu-id="c5d2f-117">Autorisations</span><span class="sxs-lookup"><span data-stu-id="c5d2f-117">Permissions</span></span>  
  
|<span data-ttu-id="c5d2f-118">Tâche</span><span class="sxs-lookup"><span data-stu-id="c5d2f-118">Task</span></span>|<span data-ttu-id="c5d2f-119">Autorisations</span><span class="sxs-lookup"><span data-stu-id="c5d2f-119">Permissions</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="c5d2f-120">Pour configurer la stratégie de basculement flexible pour un nouveau groupe de disponibilité</span><span class="sxs-lookup"><span data-stu-id="c5d2f-120">To configure the flexible failover policy for a new availability group</span></span>|<span data-ttu-id="c5d2f-121">Requiert l’appartenance au rôle serveur fixe **sysadmin** et l’autorisation de serveur CREATE AVAILABILITY GROUP, l’autorisation ALTER ANY AVAILABILITY GROUP ou l’autorisation CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-121">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="c5d2f-122">Pour modifier la stratégie d'un groupe de disponibilité existant</span><span class="sxs-lookup"><span data-stu-id="c5d2f-122">To modify the policy of an existing availability group</span></span>|<span data-ttu-id="c5d2f-123">Requiert l'autorisation ALTER AVAILABILITY GROUP sur le groupe de disponibilité, l'autorisation CONTROL AVAILABILITY GROUP, l'autorisation ALTER ANY AVAILABILITY GROUP ou l'autorisation CONTROL SERVER.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-123">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="c5d2f-124">Utilisation de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="c5d2f-124">Using Transact-SQL</span></span>  
 <span data-ttu-id="c5d2f-125">**Pour configurer la stratégie de basculement flexible**</span><span class="sxs-lookup"><span data-stu-id="c5d2f-125">**To configure the flexible failover policy**</span></span>  
  
1.  <span data-ttu-id="c5d2f-126">Connectez-vous à l'instance de serveur qui héberge le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-126">Connect to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="c5d2f-127">Pour un nouveau groupe de disponibilité, utilisez l’instruction [Create Availability Group](/sql/t-sql/statements/create-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c5d2f-127">For a new availability group, use the [CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="c5d2f-128">Si vous modifiez un groupe de disponibilité existant, utilisez l’instruction [ALTER Availability Group](/sql/t-sql/statements/alter-availability-group-transact-sql) [!INCLUDE[tsql](../../../includes/tsql-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="c5d2f-128">If you are modifying an existing availability group, use the [ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
    -   <span data-ttu-id="c5d2f-129">Pour définir le niveau de condition de basculement, utilisez l’option FAILURE_CONDITION_LEVEL = *n* , où *n* est un entier compris entre 1 et 5.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-129">To set the failover condition level, use the FAILURE_CONDITION_LEVEL = *n* option, where, *n* is an integer from 1 to 5.</span></span>  
  
         <span data-ttu-id="c5d2f-130">Par exemple, l'instruction [!INCLUDE[tsql](../../../includes/tsql-md.md)] suivante modifie le niveau de condition d'échec d'un groupe de disponibilité existant, `AG1`, sur le niveau un :</span><span class="sxs-lookup"><span data-stu-id="c5d2f-130">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the failure-condition level of an existing availability group, `AG1`, to level one:</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (FAILURE_CONDITION_LEVEL = 1);  
        ```  
  
         <span data-ttu-id="c5d2f-131">La relation de ces valeurs entières avec les niveaux de condition d'échec est la suivante :</span><span class="sxs-lookup"><span data-stu-id="c5d2f-131">The relationship of these integer values to the failure condition levels is as follows:</span></span>  
  
        |[!INCLUDE[tsql](../../../includes/tsql-md.md)] <span data-ttu-id="c5d2f-132">Valeur</span><span class="sxs-lookup"><span data-stu-id="c5d2f-132">Value</span></span>|<span data-ttu-id="c5d2f-133">Level</span><span class="sxs-lookup"><span data-stu-id="c5d2f-133">Level</span></span>|<span data-ttu-id="c5d2f-134">Le basculement automatique démarre lorsque…</span><span class="sxs-lookup"><span data-stu-id="c5d2f-134">Automatic Is Failover Initiated When...</span></span>|  
        |------------------------------|-----------|-------------------------------------------|  
        |<span data-ttu-id="c5d2f-135">1</span><span class="sxs-lookup"><span data-stu-id="c5d2f-135">1</span></span>|<span data-ttu-id="c5d2f-136">Une</span><span class="sxs-lookup"><span data-stu-id="c5d2f-136">One</span></span>|<span data-ttu-id="c5d2f-137">Le serveur est arrêté.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-137">On server down.</span></span> <span data-ttu-id="c5d2f-138">Le service SQL Server s'arrête à cause d'un basculement ou d'un redémarrage.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-138">The SQL Server service stops because of a failover or restart.</span></span>|  
        |<span data-ttu-id="c5d2f-139">2</span><span class="sxs-lookup"><span data-stu-id="c5d2f-139">2</span></span>|<span data-ttu-id="c5d2f-140">Deux</span><span class="sxs-lookup"><span data-stu-id="c5d2f-140">Two</span></span>|<span data-ttu-id="c5d2f-141">Le serveur ne répond pas.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-141">On server unresponsive.</span></span> <span data-ttu-id="c5d2f-142">Toutes les conditions qui correspondent à une valeur inférieure sont remplies, le service SQL Server est connecté au cluster et le seuil du délai d'attente de contrôle d'intégrité est dépassé, ou le réplica principal actuel est dans un état d'échec.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-142">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |<span data-ttu-id="c5d2f-143">3</span><span class="sxs-lookup"><span data-stu-id="c5d2f-143">3</span></span>|<span data-ttu-id="c5d2f-144">Trois</span><span class="sxs-lookup"><span data-stu-id="c5d2f-144">Three</span></span>|<span data-ttu-id="c5d2f-145">Erreur critique du serveur.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-145">On critical server error.</span></span> <span data-ttu-id="c5d2f-146">Toutes les conditions qui correspondent à une valeur inférieure sont remplies ou une erreur interne et critique de serveur est survenue.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-146">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="c5d2f-147">C'est le niveau par défaut.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-147">This is the default level.</span></span>|  
        |<span data-ttu-id="c5d2f-148">4</span><span class="sxs-lookup"><span data-stu-id="c5d2f-148">4</span></span>|<span data-ttu-id="c5d2f-149">Quatre</span><span class="sxs-lookup"><span data-stu-id="c5d2f-149">Four</span></span>|<span data-ttu-id="c5d2f-150">Erreur de serveur modérée.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-150">On moderate server error.</span></span> <span data-ttu-id="c5d2f-151">Toutes les conditions qui correspondent à une valeur inférieure sont remplies ou une erreur modérée de serveur s'est produite.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-151">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |<span data-ttu-id="c5d2f-152">5</span><span class="sxs-lookup"><span data-stu-id="c5d2f-152">5</span></span>|<span data-ttu-id="c5d2f-153">Cinq</span><span class="sxs-lookup"><span data-stu-id="c5d2f-153">Five</span></span>|<span data-ttu-id="c5d2f-154">Conditions d'échec qualifiées.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-154">On any qualified failure conditions.</span></span> <span data-ttu-id="c5d2f-155">Toutes les conditions qui correspondent à une valeur inférieure sont remplies ou une condition d'échec qualifiée s'est produite.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-155">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="c5d2f-156">Pour plus d’informations sur les niveaux de condition de basculement, consultez [Stratégie flexible pour le basculement automatique d’un groupe de disponibilité &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-156">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
    -   <span data-ttu-id="c5d2f-157">Pour configurer le seuil du délai d’attente de contrôle d’intégrité, utilisez l’optionHEALTH_CHECK_TIMEOUT = *n* , où *n* est un entier compris entre 15000 millisecondes (15 secondes) et 4294967295 millisecondes.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-157">To configure the health check timeout threshold, use the HEALTH_CHECK_TIMEOUT = *n* option, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="c5d2f-158">La valeur par défaut est 30 000 millisecondes (ou 30 secondes).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-158">The default value is 30000 milliseconds (30 seconds)</span></span>  
  
         <span data-ttu-id="c5d2f-159">Par exemple, l'instruction [!INCLUDE[tsql](../../../includes/tsql-md.md)] suivante modifie le seuil du délai d'attente de contrôle d'intégrité d'un groupe de disponibilité existant, `AG1`, sur 60 000 millisecondes (une minute).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-159">For example, the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement changes the health-check timeout threshold of an existing availability group, `AG1`, to 60,000 milliseconds (one minute).</span></span>  
  
        ```sql
        ALTER AVAILABILITY GROUP AG1 SET (HEALTH_CHECK_TIMEOUT = 60000);  
        ```  
  
##  <a name="using-powershell"></a><a name="PowerShellProcedure"></a> <span data-ttu-id="c5d2f-160">Utilisation de PowerShell</span><span class="sxs-lookup"><span data-stu-id="c5d2f-160">Using PowerShell</span></span>  

### <a name="to-configure-the-flexible-failover-policy"></a><span data-ttu-id="c5d2f-161">Pour configurer la stratégie de basculement flexible \* \*</span><span class="sxs-lookup"><span data-stu-id="c5d2f-161">To configure the flexible failover policy\*\*</span></span>  
  
1.  <span data-ttu-id="c5d2f-162">Définissez la valeur par défaut (`cd`) sur l'instance de serveur qui héberge le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-162">Set default (`cd`) to the server instance that hosts the primary replica.</span></span>  
  
2.  <span data-ttu-id="c5d2f-163">Lorsque vous ajoutez un réplica de disponibilité à un groupe de disponibilité, utilisez l'applet de commande `New-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-163">When adding an availability replica to an availability group, use the `New-SqlAvailabilityGroup` cmdlet.</span></span> <span data-ttu-id="c5d2f-164">Lorsque vous modifiez un réplica de disponibilité existant, utilisez l'applet de commande `Set-SqlAvailabilityGroup`.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-164">When modifying an existing availability replica, use the `Set-SqlAvailabilityGroup` cmdlet.</span></span>  
  
    -   <span data-ttu-id="c5d2f-165">Pour définir le niveau de condition de basculement, utilisez le `FailureConditionLevel` paramètre *Level* , où *Level* est l’une des valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="c5d2f-165">To set the failover condition level, use the `FailureConditionLevel`*level* parameter, where, *level* is one of the following values:</span></span>  
  
        |<span data-ttu-id="c5d2f-166">Valeur</span><span class="sxs-lookup"><span data-stu-id="c5d2f-166">Value</span></span>|<span data-ttu-id="c5d2f-167">Level</span><span class="sxs-lookup"><span data-stu-id="c5d2f-167">Level</span></span>|<span data-ttu-id="c5d2f-168">Le basculement automatique démarre lorsque…</span><span class="sxs-lookup"><span data-stu-id="c5d2f-168">Automatic Is Failover Initiated When...</span></span>|  
        |-----------|-----------|-------------------------------------------|  
        |`OnServerDown`|<span data-ttu-id="c5d2f-169">Une</span><span class="sxs-lookup"><span data-stu-id="c5d2f-169">One</span></span>|<span data-ttu-id="c5d2f-170">Le serveur est arrêté.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-170">On server down.</span></span> <span data-ttu-id="c5d2f-171">Le service SQL Server s'arrête à cause d'un basculement ou d'un redémarrage.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-171">The SQL Server service stops because of a failover or restart.</span></span>|  
        |`OnServerUnresponsive`|<span data-ttu-id="c5d2f-172">Deux</span><span class="sxs-lookup"><span data-stu-id="c5d2f-172">Two</span></span>|<span data-ttu-id="c5d2f-173">Le serveur ne répond pas.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-173">On server unresponsive.</span></span> <span data-ttu-id="c5d2f-174">Toutes les conditions qui correspondent à une valeur inférieure sont remplies, le service SQL Server est connecté au cluster et le seuil du délai d'attente de contrôle d'intégrité est dépassé, ou le réplica principal actuel est dans un état d'échec.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-174">Any condition of lower value is satisfied, the SQL Server service is connected to the cluster and the health check timeout threshold is exceeded, or the current primary replica is in a failed state.</span></span>|  
        |`OnCriticalServerError`|<span data-ttu-id="c5d2f-175">Trois</span><span class="sxs-lookup"><span data-stu-id="c5d2f-175">Three</span></span>|<span data-ttu-id="c5d2f-176">Erreur critique du serveur.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-176">On critical server error.</span></span> <span data-ttu-id="c5d2f-177">Toutes les conditions qui correspondent à une valeur inférieure sont remplies ou une erreur interne et critique de serveur est survenue.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-177">Any condition of lower value is satisfied or an internal critical server error occurs.</span></span><br /><br /> <span data-ttu-id="c5d2f-178">C'est le niveau par défaut.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-178">This is the default level.</span></span>|  
        |`OnModerateServerError`|<span data-ttu-id="c5d2f-179">Quatre</span><span class="sxs-lookup"><span data-stu-id="c5d2f-179">Four</span></span>|<span data-ttu-id="c5d2f-180">Erreur de serveur modérée.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-180">On moderate server error.</span></span> <span data-ttu-id="c5d2f-181">Toutes les conditions qui correspondent à une valeur inférieure sont remplies ou une erreur modérée de serveur s'est produite.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-181">Any condition of lower value is satisfied or a moderate Server error occurs.</span></span>|  
        |`OnAnyQualifiedFailureConditions`|<span data-ttu-id="c5d2f-182">Cinq</span><span class="sxs-lookup"><span data-stu-id="c5d2f-182">Five</span></span>|<span data-ttu-id="c5d2f-183">Conditions d'échec qualifiées.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-183">On any qualified failure conditions.</span></span> <span data-ttu-id="c5d2f-184">Toutes les conditions qui correspondent à une valeur inférieure sont remplies ou une condition d'échec qualifiée s'est produite.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-184">Any condition of lower value is satisfied or a qualifying failure condition occurs.</span></span>|  
  
         <span data-ttu-id="c5d2f-185">Pour plus d’informations sur les niveaux de condition de basculement, consultez [Stratégie flexible pour le basculement automatique d’un groupe de disponibilité &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-185">For more information about the failover condition levels, see [Flexible Failover Policy for Automatic Failover of an Availability Group &#40;SQL Server&#41;](flexible-automatic-failover-policy-availability-group.md).</span></span>  
  
         <span data-ttu-id="c5d2f-186">Par exemple, la commande suivante modifie le niveau de condition d'échec d'un groupe de disponibilité existant, `AG1`, sur le niveau un.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-186">For example, the following command changes the failure-condition level of an existing availability group, `AG1`, to level one.</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAg `
         -FailureConditionLevel OnServerDown  
        ```  
  
    -   <span data-ttu-id="c5d2f-187">Pour définir le seuil du délai d’attente de contrôle d’intégrité, utilisez le `HealthCheckTimeout` paramètre *n* , où *n* est un entier compris entre 15000 millisecondes (15 secondes) et 4294967295 millisecondes.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-187">To set the health check timeout threshold, use the `HealthCheckTimeout`*n* parameter, where, *n* is an integer from 15000 milliseconds (15 seconds) to 4294967295 milliseconds.</span></span> <span data-ttu-id="c5d2f-188">La valeur par défaut est 30 000 millisecondes (ou 30 secondes).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-188">The default value is 30000 milliseconds (30 seconds).</span></span>  
  
         <span data-ttu-id="c5d2f-189">Par exemple, la commande suivante modifie le seuil du délai d'attente de contrôle d'intégrité d'un groupe de disponibilité existant, `AG1`, sur 120 000 millisecondes (deux minutes).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-189">For example, the following command changes the health-check timeout threshold of an existing availability group, `AG1`, to 120,000 milliseconds (two minutes).</span></span>  
  
        ```powershell
        Set-SqlAvailabilityGroup `
         -Path SQLSERVER:\Sql\PrimaryServer\InstanceName\AvailabilityGroups\MyAG `
         -HealthCheckTimeout 120000  
        ```  
  
> [!NOTE]  
>  <span data-ttu-id="c5d2f-190">Pour afficher la syntaxe d'une applet de commande, utilisez l'applet de commande `Get-Help` dans l'environnement [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c5d2f-190">To view the syntax of a cmdlet, use the `Get-Help` cmdlet in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] PowerShell environment.</span></span> <span data-ttu-id="c5d2f-191">Pour en savoir plus, voir [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="c5d2f-191">For more information, see [Get Help SQL Server PowerShell](../../../powershell/sql-server-powershell.md).</span></span>  
  
 <span data-ttu-id="c5d2f-192">**Pour configurer et utiliser le fournisseur SQL Server PowerShell**</span><span class="sxs-lookup"><span data-stu-id="c5d2f-192">**To set up and use the SQL Server PowerShell provider**</span></span>  
  
-   [<span data-ttu-id="c5d2f-193">Fournisseur SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="c5d2f-193">SQL Server PowerShell Provider</span></span>](../../../powershell/sql-server-powershell-provider.md)  
  
-   [<span data-ttu-id="c5d2f-194">Obtenir de l'aide sur SQL Server PowerShell</span><span class="sxs-lookup"><span data-stu-id="c5d2f-194">Get Help SQL Server PowerShell</span></span>](../../../powershell/sql-server-powershell.md)  
  
## <a name="see-also"></a><span data-ttu-id="c5d2f-195">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c5d2f-195">See Also</span></span>  
 <span data-ttu-id="c5d2f-196">[Vue d’ensemble de groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="c5d2f-196">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="c5d2f-197">[Modes de disponibilité (groupes de disponibilité AlwaysOn)](availability-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="c5d2f-197">[Availability Modes (AlwaysOn Availability Groups)](availability-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="c5d2f-198">[Basculement et modes de basculement &#40;groupes de disponibilité AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span><span class="sxs-lookup"><span data-stu-id="c5d2f-198">[Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) </span></span>  
 <span data-ttu-id="c5d2f-199">[Clustering de basculement Windows Server &#40;WSFC&#41; avec SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="c5d2f-199">[Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md) </span></span>  
 <span data-ttu-id="c5d2f-200">[Stratégie de basculement pour les instances de cluster de basculement](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span><span class="sxs-lookup"><span data-stu-id="c5d2f-200">[Failover Policy for Failover Cluster Instances](../../../sql-server/failover-clusters/windows/failover-policy-for-failover-cluster-instances.md) </span></span>  
 [<span data-ttu-id="c5d2f-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c5d2f-201">sp_server_diagnostics &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql)  
