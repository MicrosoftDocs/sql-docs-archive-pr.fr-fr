---
title: Vue d’ensemble de groupes de disponibilité AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 10/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- secondary databases [SQL Server], in availability group
- primary databases [SQL Server], in availability group
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], data movement
- Availability Groups [SQL Server]
ms.assetid: 04fd9d95-4624-420f-a3be-1794309b3a47
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: bc49a841daaeb0f7bda6f793890433f26c6b5c1f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87602296"
---
# <a name="overview-of-alwayson-availability-groups-sql-server"></a><span data-ttu-id="2ca30-102">Vue d'ensemble des groupes de disponibilité AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="2ca30-102">Overview of AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="2ca30-103">Cette rubrique présente les concepts [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] essentiels pour configurer et gérer un ou plusieurs groupes de disponibilité dans [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2ca30-103">This topic introduces the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] concepts that are central for configuring and managing one or more availability groups in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="2ca30-104">Pour obtenir un résumé des avantages offerts par les groupes de disponibilité et une vue d’ensemble de la terminologie [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], consultez [Groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-104">For a summary of the benefits offered by availability groups and an overview of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] terminology, see [AlwaysOn Availability Groups &#40;SQL Server&#41;](always-on-availability-groups-sql-server.md).</span></span>

 <span data-ttu-id="2ca30-105">Un *groupe de disponibilité* prend en charge un environnement de basculement pour un ensemble discret de bases de données utilisateur, appelées *bases de données de disponibilité*, qui basculent ensemble.</span><span class="sxs-lookup"><span data-stu-id="2ca30-105">An *availability group* supports a failover environment for a discrete set of user databases, known as *availability databases*, that fail over together.</span></span> <span data-ttu-id="2ca30-106">Un groupe de disponibilité prend en charge un ensemble de bases de données primaires et un à huit ensembles de bases de données secondaires correspondantes.</span><span class="sxs-lookup"><span data-stu-id="2ca30-106">An availability group supports a set of primary databases and one to eight sets of corresponding secondary databases.</span></span> <span data-ttu-id="2ca30-107">Les bases de données secondaires ne sont *pas* des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="2ca30-107">Secondary databases are *not* backups.</span></span> <span data-ttu-id="2ca30-108">Continuez à sauvegarder vos bases de données et leurs journaux des transactions de manière régulière.</span><span class="sxs-lookup"><span data-stu-id="2ca30-108">Continue to back up your databases and their transaction logs on a regular basis.</span></span>

> [!TIP]
>  <span data-ttu-id="2ca30-109">Vous pouvez créer n'importe quel type de sauvegarde d'une base de données primaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-109">You can create any type of backup of a primary database.</span></span> <span data-ttu-id="2ca30-110">Vous pouvez également créer des sauvegardes de journaux et des sauvegardes complètes de copie uniquement des bases de données secondaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-110">Alternatively, you can create log backups and copy-only full backups of secondary databases.</span></span> <span data-ttu-id="2ca30-111">Pour plus d’informations, consultez [Secondaires actifs : sauvegarde sur les réplicas secondaires &#40;groupes de disponibilité AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-111">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

 <span data-ttu-id="2ca30-112">Chaque ensemble de bases de données de disponibilité est hébergé par un *réplica de disponibilité*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-112">Each set of availability database is hosted by an *availability replica*.</span></span> <span data-ttu-id="2ca30-113">Deux types de réplicas de disponibilité existent mais il ne peut y avoir qu'un seul *réplica principal*</span><span class="sxs-lookup"><span data-stu-id="2ca30-113">Two types of availability replicas exist: a single *primary replica*.</span></span> <span data-ttu-id="2ca30-114">qui héberge les bases de données primaires et un à huit *réplicas secondaires*qui hébergent un ensemble de bases de données secondaires et servent de cibles potentielles d'un basculement du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-114">which hosts the primary databases, and one to eight *secondary replicas*, each of which hosts a set of secondary databases and serves as a potential failover targets for the availability group.</span></span> <span data-ttu-id="2ca30-115">Un groupe de disponibilité bascule au niveau d'un réplica de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-115">An availability group fails over at the level of an availability replica.</span></span> <span data-ttu-id="2ca30-116">Un réplica de disponibilité apporte la redondance uniquement au niveau de la base de données, pour l’ensemble des bases de données d’un groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-116">An availability replica provides redundancy only at the database level-for the set of databases in one availability group.</span></span> <span data-ttu-id="2ca30-117">Les basculements ne sont pas dus à des problèmes de base de données, tels qu'une base de données devenant suspecte en raison de la perte d'un fichier de données ou de l'altération d'un journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="2ca30-117">Failovers are not caused by database issues such as a database becoming suspect due to a loss of a data file or corruption of a transaction log.</span></span>

 <span data-ttu-id="2ca30-118">Le réplica principal rend les bases de données primaires disponibles pour les connexions en lecture-écriture à partir des clients.</span><span class="sxs-lookup"><span data-stu-id="2ca30-118">The primary replica makes the primary databases available for read-write connections from clients.</span></span> <span data-ttu-id="2ca30-119">De plus, il existe un processus appelé *synchronisation des données*qui se produit au niveau de la base de données.</span><span class="sxs-lookup"><span data-stu-id="2ca30-119">Also, in a process known as *data synchronization*, which occurs at the database level.</span></span> <span data-ttu-id="2ca30-120">Le réplica principal envoie les enregistrements du journal des transactions de chaque base de données primaire à chaque base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-120">The primary replica sends transaction log records of each primary database to every secondary database.</span></span> <span data-ttu-id="2ca30-121">Chaque réplica secondaire met en cache les enregistrements du journal des transactions (*renforce* le journal) puis les applique à sa base de données secondaire correspondante.</span><span class="sxs-lookup"><span data-stu-id="2ca30-121">Every secondary replica caches the transaction log records (*hardens* the log) and then applies them to its corresponding secondary database.</span></span> <span data-ttu-id="2ca30-122">La synchronisation des données se produit entre la base de données primaire et chaque base de données secondaire connectée, indépendamment des autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="2ca30-122">Data synchronization occurs between the primary database and each connected secondary database, independently of the other databases.</span></span> <span data-ttu-id="2ca30-123">Par conséquent, une base de données secondaire peut être interrompue ou échouer sans affecter d'autres bases de données secondaires, et une base de données primaire peut être annulée ou échouer sans affecter d'autres bases de données primaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-123">Therefore, a secondary database can be suspended or fail without affecting other secondary databases, and a primary database can be suspended or fail without affecting other primary databases.</span></span>

 <span data-ttu-id="2ca30-124">Éventuellement, vous pouvez configurer un ou plusieurs réplicas secondaires pour prendre en charge l'accès en lecture seule aux bases de données secondaires, et vous pouvez configurer tout réplica secondaire pour permettre des sauvegardes sur des bases de données secondaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-124">Optionally, you can configure one or more secondary replicas to support read-only access to secondary databases, and you can configure any secondary replica to permit backups on secondary databases.</span></span>

 <span data-ttu-id="2ca30-125">Le déploiement de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requiert un cluster WSFC (clustering de basculement Windows Server).</span><span class="sxs-lookup"><span data-stu-id="2ca30-125">Deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requires a Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="2ca30-126">Chaque réplica de disponibilité d'un groupe de disponibilité donné doit résider sur un nœud différent du même cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="2ca30-126">Each availability replica of a given availability group must reside on a different node of the same WSFC cluster.</span></span> <span data-ttu-id="2ca30-127">La seule exception survient lors de la migration vers un autre cluster WSFC : un groupe de disponibilité peut temporairement chevaucher deux clusters.</span><span class="sxs-lookup"><span data-stu-id="2ca30-127">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>

 <span data-ttu-id="2ca30-128">Un groupe de ressources WSFC est créé pour chaque groupe de disponibilité que vous créez.</span><span class="sxs-lookup"><span data-stu-id="2ca30-128">A WSFC resource group is created for every availability group that you create.</span></span> <span data-ttu-id="2ca30-129">Le cluster WSFC surveille ce groupe de ressources pour évaluer l'intégrité du réplica principal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-129">The WSFC cluster monitors this resource group to evaluate the health of the primary replica.</span></span> <span data-ttu-id="2ca30-130">Le quorum pour [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] est basé sur tous les nœuds du cluster WSFC, indépendamment du fait qu'un nœud de cluster donné héberge des réplicas de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-130">The quorum for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is based on all nodes in the WSFC cluster regardless of whether a given cluster node hosts any availability replicas.</span></span> <span data-ttu-id="2ca30-131">Contrairement à la mise en miroir de bases de données, il n'existe aucun rôle de témoin dans [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2ca30-131">In contrast to database mirroring, there is no witness role in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>

> [!NOTE]
>  <span data-ttu-id="2ca30-132">Pour plus d’informations sur la relation entre les composants SQL Server AlwaysOn et le cluster WSFC, consultez [Clustering de basculement Windows Server &#40;WSFC&#41; avec SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-132">For information about the relationship of SQL Server AlwaysOn components to the WSFC cluster, see [Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span></span>

 <span data-ttu-id="2ca30-133">L'illustration suivante montre un groupe de disponibilité qui contient un réplica principal et quatre réplicas secondaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-133">The following illustration shows an availability group that contains one primary replica and four secondary replicas.</span></span> <span data-ttu-id="2ca30-134">Jusqu'à huit réplicas secondaires sont pris en charge, notamment un réplica principal et deux réplicas secondaires avec validation synchrone.</span><span class="sxs-lookup"><span data-stu-id="2ca30-134">Up to eight secondary replicas are supported, including one primary replica and two synchronous-commit secondary replicas.</span></span>

 <span data-ttu-id="2ca30-135">![Groupe de disponibilité avec cinq réplicas](../../media/aoag-agintrofigure.gif "Groupe de disponibilité avec cinq réplicas")</span><span class="sxs-lookup"><span data-stu-id="2ca30-135">![Availability group with five replicas](../../media/aoag-agintrofigure.gif "Availability group with five replicas")</span></span>


##  <a name="availability-databases"></a><a name="AvDbs"></a><span data-ttu-id="2ca30-136">Bases de données de disponibilité</span><span class="sxs-lookup"><span data-stu-id="2ca30-136">Availability Databases</span></span>
 <span data-ttu-id="2ca30-137">Pour ajouter une base de données à un groupe de disponibilité, la base de données doit être une base de données en ligne en lecture-écriture qui existe sur l'instance de serveur qui héberge le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-137">To add a database to an availability group, the database must be an online, read-write database that exists on the server instance that hosts the primary replica.</span></span> <span data-ttu-id="2ca30-138">Lorsque vous ajoutez une base de données, elle joint le groupe de disponibilité comme base de données primaire, tout en restant disponible aux clients.</span><span class="sxs-lookup"><span data-stu-id="2ca30-138">When you add a database, it joins the availability group as a primary database, while remaining available to clients.</span></span> <span data-ttu-id="2ca30-139">Il n'existe aucune base de données secondaire correspondante jusqu'à ce que les sauvegardes de la nouvelle base de données primaire soient restaurées dans l'instance de serveur qui héberge le réplica secondaire (avec RESTORE WITH NORECOVERY).</span><span class="sxs-lookup"><span data-stu-id="2ca30-139">No corresponding secondary database exists until backups of the new primary database are restored to the server instance that hosts the secondary replica (using RESTORE WITH NORECOVERY).</span></span> <span data-ttu-id="2ca30-140">La nouvelle base de données secondaire se trouve dans l'état RESTORING jusqu'à ce qu'elle soit jointe au groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-140">The new secondary database is in the RESTORING state until it is joined to the availability group.</span></span> <span data-ttu-id="2ca30-141">Pour plus d’informations, consultez [Démarrer un mouvement de données sur une base de données secondaire AlwaysOn &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-141">For more information, see [Start Data Movement on an AlwaysOn Secondary Database &#40;SQL Server&#41;](start-data-movement-on-an-always-on-secondary-database-sql-server.md).</span></span>

 <span data-ttu-id="2ca30-142">Une jointure place la base de données secondaire dans l'état ONLINE et démarre la synchronisation des données avec la base de données primaire correspondante.</span><span class="sxs-lookup"><span data-stu-id="2ca30-142">Joining places the secondary database into the ONLINE state and initiates data synchronization with the corresponding primary database.</span></span> <span data-ttu-id="2ca30-143">La*synchronisation des données* correspond au processus selon lequel les modifications apportées à une base de données primaire sont reproduites sur une base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-143">*Data synchronization* is the process by which changes to a primary database are reproduced on a secondary database.</span></span> <span data-ttu-id="2ca30-144">La synchronisation des données implique l'envoi par la base de données primaire d'enregistrements de journal des transactions à la base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-144">Data synchronization involves the primary database sending transaction log records to the secondary database.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="2ca30-145">Une base de données de disponibilité est parfois désignée sous le terme de *réplica de base de données* dans [!INCLUDE[tsql](../../../includes/tsql-md.md)], PowerShell et les noms SMO (SQL Server Management Objects).</span><span class="sxs-lookup"><span data-stu-id="2ca30-145">An availability database is sometimes called a *database replica* in [!INCLUDE[tsql](../../../includes/tsql-md.md)], PowerShell, and SQL Server Management Objects (SMO) names.</span></span> <span data-ttu-id="2ca30-146">Par exemple, le terme « réplica de base de données » est utilisé dans les noms des vues de gestion dynamique AlwaysOn qui retournent des informations sur les bases de données de disponibilité :  **sys.dm_hadr_database_replica_states** et **sys.dm_hadr_database_replica_cluster_states**.</span><span class="sxs-lookup"><span data-stu-id="2ca30-146">For example, the term "database replica" is used in the names of the AlwaysOn dynamic management views that return information about availability databases:  **sys.dm_hadr_database_replica_states** and **sys.dm_hadr_database_replica_cluster_states**.</span></span> <span data-ttu-id="2ca30-147">Toutefois, dans la documentation en ligne de SQL Server, le terme « réplica » fait généralement référence aux réplicas de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-147">However, in SQL Server Books Online, the term "replica" typically refers to availability replicas.</span></span> <span data-ttu-id="2ca30-148">Par exemple, les termes « réplica principal » et « réplica secondaire » font toujours référence aux réplicas de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-148">For example, "primary replica" and "secondary replica" always refer to availability replicas.</span></span>

##  <a name="availability-replicas"></a><a name="AGsARsADBs"></a><span data-ttu-id="2ca30-149">Réplicas de disponibilité</span><span class="sxs-lookup"><span data-stu-id="2ca30-149">Availability Replicas</span></span>
 <span data-ttu-id="2ca30-150">Chaque groupe de disponibilité définit un ensemble de deux partenaires de basculement ou plus, appelés réplicas de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-150">Each availability group defines a set of two or more failover partners known as availability replicas.</span></span> <span data-ttu-id="2ca30-151">Les*réplicas de disponibilité* sont des composants du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-151">*Availability replicas* are components of the availability group.</span></span> <span data-ttu-id="2ca30-152">Chaque réplica de disponibilité héberge une copie des bases de données de disponibilité dans le groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-152">Each availability replica hosts a copy of the availability databases in the availability group.</span></span> <span data-ttu-id="2ca30-153">Pour un groupe de disponibilité donné, les réplicas de disponibilité doivent être hébergés par des instances distinctes de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] qui résident sur différents nœuds d'un cluster WSFC.</span><span class="sxs-lookup"><span data-stu-id="2ca30-153">For a given availability group, the availability replicas must be hosted by separate instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] residing on different nodes of a WSFC cluster.</span></span> <span data-ttu-id="2ca30-154">Chacune de ces instances de serveur doit être activée pour AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="2ca30-154">Each of these server instances must be enabled for AlwaysOn.</span></span>

 <span data-ttu-id="2ca30-155">Un instance donnée ne peut héberger qu'un seul réplica de disponibilité par groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-155">A given instance can host only one availability replica per availability group.</span></span> <span data-ttu-id="2ca30-156">Toutefois, chaque instance peut être utilisée pour de nombreux groupes de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-156">However, each instance can be used for many availability groups.</span></span> <span data-ttu-id="2ca30-157">Une instance donnée peut être une instance autonome ou une instance de cluster de basculement [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (FCI).</span><span class="sxs-lookup"><span data-stu-id="2ca30-157">A given instance can be either a stand-alone instance or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI).</span></span> <span data-ttu-id="2ca30-158">Si vous avez besoin d'une redondance au niveau serveur, utilisez des instances de cluster de basculement.</span><span class="sxs-lookup"><span data-stu-id="2ca30-158">If you require server-level redundancy, use Failover Cluster Instances.</span></span>

 <span data-ttu-id="2ca30-159">Chaque réplica de disponibilité se voit attribuer un rôle initial, soit le *rôle principal*, soit le *rôle secondaire*, qui est hérité par les bases de données de disponibilité de ce réplica.</span><span class="sxs-lookup"><span data-stu-id="2ca30-159">Every availability replica is assigned an initial role-either the *primary role* or the *secondary role*, which is inherited by the availability databases of that replica.</span></span> <span data-ttu-id="2ca30-160">Le rôle d'un réplica donné détermine s'il héberge les bases de données en lecture-écriture ou les bases de données en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="2ca30-160">The role of a given replica determines whether it hosts read-write databases or read-only databases.</span></span> <span data-ttu-id="2ca30-161">Un réplica, appelé *réplica principal*, se voit attribuer le rôle principal et héberge les bases de données en lecture-écriture, qui sont appelées *bases de données primaires*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-161">One replica, known as the *primary replica*, is assigned the primary role and hosts read-write databases, which are known as *primary databases*.</span></span> <span data-ttu-id="2ca30-162">Au moins un autre réplica, appelé *réplica secondaire*, se voit attribuer le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-162">At least one other replica, known as a *secondary replica*, is assigned the secondary role.</span></span> <span data-ttu-id="2ca30-163">Un réplica secondaire héberge les bases de données en lecture seule, appelées bases de données secondaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-163">A secondary replica hosts read-only databases, known as secondary databases.</span></span>

> [!NOTE]
>  <span data-ttu-id="2ca30-164">Lorsque le rôle d'un réplica de disponibilité est indéterminé, comme lors d'un basculement, ses bases de données sont temporairement dans un état NOT SYNCHRONIZING.</span><span class="sxs-lookup"><span data-stu-id="2ca30-164">When the role of an availability replica is indeterminate, such as during a failover, its databases are temporarily in a NOT SYNCHRONIZING state.</span></span> <span data-ttu-id="2ca30-165">Leur rôle est défini sur RESOLVING jusqu'à ce que le rôle du réplica de disponibilité soit résolu.</span><span class="sxs-lookup"><span data-stu-id="2ca30-165">Their role is set to RESOLVING until the role of the availability replica has resolved.</span></span> <span data-ttu-id="2ca30-166">Si un réplica de disponibilité est résolu en rôle principal, ses bases de données deviennent les bases de données primaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-166">If an availability replica resolves to the primary role, its databases become the primary databases.</span></span> <span data-ttu-id="2ca30-167">Si un réplica de disponibilité est résolu en rôle secondaire, ses bases de données deviennent les bases de données secondaires.</span><span class="sxs-lookup"><span data-stu-id="2ca30-167">If an availability replica resolves to the secondary role, its databases become secondary databases.</span></span>

##  <a name="availability-modes"></a><a name="AvailabilityModes"></a><span data-ttu-id="2ca30-168">Modes de disponibilité</span><span class="sxs-lookup"><span data-stu-id="2ca30-168">Availability Modes</span></span>
 <span data-ttu-id="2ca30-169">Le mode de disponibilité est une propriété de chaque réplica de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-169">The availability mode is a property of each availability replica.</span></span> <span data-ttu-id="2ca30-170">Le mode de disponibilité détermine si le réplica principal attend, pour valider des transactions sur une base de données, qu'un réplica secondaire donné ait écrit les enregistrements du journal des transactions sur le disque (journal renforcé).</span><span class="sxs-lookup"><span data-stu-id="2ca30-170">The availability mode determines whether the primary replica waits to commit transactions on a database until a given secondary replica has written the transaction log records to disk (hardened the log).</span></span> [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="2ca30-171">prend en charge deux modes de disponibilité : le*mode avec validation asynchrone* et le *mode avec validation synchrone*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-171">supports two availability modes-*asynchronous-commit mode* and *synchronous-commit mode*.</span></span>

-   <span data-ttu-id="2ca30-172">**Asynchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="2ca30-172">**Asynchronous-commit mode**</span></span>

     <span data-ttu-id="2ca30-173">Un réplica de disponibilité qui utilise ce mode de disponibilité est appelé*réplica avec validation asynchrone*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-173">An availability replica that uses this availability mode is known as an*asynchronous-commit replica*.</span></span> <span data-ttu-id="2ca30-174">En mode de validation asynchrone, le réplica principal valide les transactions sans attendre d'accusé de réception confirmant qu'un réplica secondaire avec validation asynchrone a renforcé le journal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-174">Under asynchronous-commit mode, the primary replica commits transactions without waiting for acknowledgement that an asynchronous-commit secondary replica has hardened the log.</span></span> <span data-ttu-id="2ca30-175">Le mode de validation asynchrone réduit la latence de transaction sur les bases de données secondaires, mais leur permet d'être antérieures aux bases de données primaires, ce qui rend possible la perte de données.</span><span class="sxs-lookup"><span data-stu-id="2ca30-175">Asynchronous-commit mode minimizes transaction latency on the secondary databases but allows them to lag behind the primary databases, making some data loss possible.</span></span>

-   <span data-ttu-id="2ca30-176">**Synchronous-commit mode**</span><span class="sxs-lookup"><span data-stu-id="2ca30-176">**Synchronous-commit mode**</span></span>

     <span data-ttu-id="2ca30-177">Un réplica de disponibilité qui utilise ce mode de disponibilité est appelé *réplica avec validation synchrone*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-177">An availability replica that uses this availability mode is known as a *synchronous-commit replica*.</span></span> <span data-ttu-id="2ca30-178">En mode de validation synchrone, avant de valider des transactions, un réplica principal avec validation synchrone attend qu'un réplica secondaire avec validation synchrone confirme qu'il a terminé le renforcement du journal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-178">Under synchronous-commit mode, before committing transactions, a synchronous-commit primary replica waits for a synchronous-commit secondary replica to acknowledge that it has finished hardening the log.</span></span> <span data-ttu-id="2ca30-179">Le mode de validation synchrone garantit qu'une fois qu'une base de données secondaire particulière est synchronisée avec la base de données primaire, les transactions validées sont entièrement protégées.</span><span class="sxs-lookup"><span data-stu-id="2ca30-179">Synchronous-commit mode ensures that once a given secondary database is synchronized with the primary database, committed transactions are fully protected.</span></span> <span data-ttu-id="2ca30-180">Cette protection se fait au prix d'une latence accrue des transactions.</span><span class="sxs-lookup"><span data-stu-id="2ca30-180">This protection comes at the cost of increased transaction latency.</span></span>

 <span data-ttu-id="2ca30-181">Pour plus d’informations, consultez [Modes de disponibilité &#40;groupes de disponibilité AlwaysOn&#41;](availability-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-181">For more information, see [Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md).</span></span>

##  <a name="types-of-failover"></a><a name="FormsOfFailover"></a><span data-ttu-id="2ca30-182">Types de basculement</span><span class="sxs-lookup"><span data-stu-id="2ca30-182">Types of Failover</span></span>
 <span data-ttu-id="2ca30-183">Dans le contexte d'une session entre le réplica principal et un réplica secondaire, les rôles principal et secondaire sont potentiellement interchangeables dans un processus appelé *basculement*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-183">Within the context of a session between the primary replica and a secondary replica, the primary and secondary roles are potentially interchangeable in a process known as *failover*.</span></span> <span data-ttu-id="2ca30-184">Lors d'un basculement, le réplica secondaire cible joue le rôle principal, en devenant le nouveau réplica principal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-184">During a failover the target secondary replica transitions to the primary role, becoming the new primary replica.</span></span> <span data-ttu-id="2ca30-185">Le nouveau réplica principal met ses bases de données en ligne comme bases de données primaires, et les applications clientes peuvent se connecter à ces dernières.</span><span class="sxs-lookup"><span data-stu-id="2ca30-185">The new primary replica brings its databases online as the primary databases, and client applications can connect to them.</span></span> <span data-ttu-id="2ca30-186">Lorsque le réplica principal précédent est disponible, il prend le rôle secondaire, en devenant un réplica secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-186">When the former primary replica is available, it transitions to the secondary role, becoming a secondary replica.</span></span> <span data-ttu-id="2ca30-187">Les bases de données primaires précédentes deviennent les bases de données secondaires et la synchronisation des données reprend.</span><span class="sxs-lookup"><span data-stu-id="2ca30-187">The former primary databases become secondary databases and data synchronization resumes.</span></span>

 <span data-ttu-id="2ca30-188">Il existe trois types de basculement : automatique, manuel et forcé (avec perte de données possible).</span><span class="sxs-lookup"><span data-stu-id="2ca30-188">Three forms of failover exist-automatic, manual, and forced (with possible data loss).</span></span> <span data-ttu-id="2ca30-189">La ou les formes de basculement prises en charge par un réplica secondaire dépendent de son mode de disponibilité, et en mode de validation synchrone, du mode de basculement sur le réplica principal et le réplica secondaire cible, comme suit.</span><span class="sxs-lookup"><span data-stu-id="2ca30-189">The form or forms of failover supported by a given secondary replica depends on its availability mode, and, for synchronous-commit mode, on the failover mode on the primary replica and target secondary replica, as follows.</span></span>

-   <span data-ttu-id="2ca30-190">Le mode de validation synchrone prend en charge deux formes de basculement*Manuel planifié* et de basculement *automatique*, si le réplica secondaire cible est actuellement synchronisé avec le AVT1.</span><span class="sxs-lookup"><span data-stu-id="2ca30-190">Synchronous-commit mode supports two forms of failover-*planned manual failover* and *automatic failover*, if the target secondary replica is currently synchronized with the avt1.</span></span> <span data-ttu-id="2ca30-191">La prise en charge de ces formes de basculement dépend du paramètre de la *propriété de mode de basculement* sur les serveurs partenaires de basculement.</span><span class="sxs-lookup"><span data-stu-id="2ca30-191">The support for these forms of failover depends on the setting of the *failover mode property* on the failover partners.</span></span> <span data-ttu-id="2ca30-192">Si le mode de basculement est défini sur « manuel » sur le réplica principal ou secondaire, seul le basculement manuel est pris en charge pour ce réplica secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-192">If failover mode is set to "manual" on either the primary or secondary replica, only manual failover is supported for that secondary replica.</span></span> <span data-ttu-id="2ca30-193">Si le mode de basculement est défini sur « automatique » dans les réplicas principal et secondaire, les basculements manuel et automatique sont pris en charge sur ce réplica secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-193">If failover mode is set to "automatic" on both the primary and secondary replicas, both automatic and manual failover are supported on that secondary replica.</span></span>

    -   <span data-ttu-id="2ca30-194">**Basculement manuel planifié** (sans perte de données)</span><span class="sxs-lookup"><span data-stu-id="2ca30-194">**Planned manual failover** (without data loss)</span></span>

         <span data-ttu-id="2ca30-195">Un basculement manuel se produit après qu'un administrateur de base de données a émis une commande de basculement et provoqué la transition d'un réplica secondaire synchronisé vers le rôle principal (avec protection garantie des données) et la transition du réplica principal vers le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-195">A manual failover occurs after a database administrator issues a failover command and causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection) and the primary replica to transition to the secondary role.</span></span> <span data-ttu-id="2ca30-196">Un basculement manuel nécessite qu'à la fois le réplica principal et le réplica secondaire cible s'exécutent en mode de validation synchrone, le réplica secondaire devant déjà être synchronisé.</span><span class="sxs-lookup"><span data-stu-id="2ca30-196">A manual failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode, and the secondary replica must already be synchronized.</span></span>

    -   <span data-ttu-id="2ca30-197">**Basculement automatique** (sans perte de données)</span><span class="sxs-lookup"><span data-stu-id="2ca30-197">**Automatic failover** (without data loss)</span></span>

         <span data-ttu-id="2ca30-198">Un basculement automatique se produit en réponse à un échec qui provoque la transition d'un réplica secondaire synchronisé vers le rôle principal (avec protection garantie des données).</span><span class="sxs-lookup"><span data-stu-id="2ca30-198">An automatic failover occurs in response to a failure that causes a synchronized secondary replica to transition to the primary role (with guaranteed data protection).</span></span> <span data-ttu-id="2ca30-199">Lorsque le réplica principal précédent devient disponible, il adopte le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="2ca30-199">When the former primary replica becomes available, it transitions to the secondary role.</span></span> <span data-ttu-id="2ca30-200">Le basculement automatique nécessite qu'à la fois le réplica principal et le réplica secondaire cible s'exécutent en mode de validation synchrone avec le mode de basculement défini sur « Automatique ».</span><span class="sxs-lookup"><span data-stu-id="2ca30-200">Automatic failover requires that both the primary replica and the target secondary replica are running under synchronous-commit mode with the failover mode set to "Automatic".</span></span> <span data-ttu-id="2ca30-201">En outre, le réplica secondaire doit déjà être synchronisé, posséder le quorum WSFC et remplir les conditions spécifiées par la [stratégie de basculement souple](flexible-automatic-failover-policy-availability-group.md)du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-201">In addition, the secondary replica must already be synchronized, have WSFC quorum, and meet the conditions specified by the [flexible failover policy](flexible-automatic-failover-policy-availability-group.md)of the availability group.</span></span>

        > [!IMPORTANT]
        >  <span data-ttu-id="2ca30-202">Les instances de cluster de basculement (FCI) SQL Server ne prennent pas en charge le basculement automatique par les groupes de disponibilité. Par conséquent, tout réplica de disponibilité hébergé par une instance de cluster de basculement ne peut être configuré que pour un basculement manuel.</span><span class="sxs-lookup"><span data-stu-id="2ca30-202">SQL Server Failover Cluster Instances (FCIs) do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can only be configured for manual failover.</span></span>

    > [!NOTE]
    >  <span data-ttu-id="2ca30-203">Notez que si vous exécutez une commande de basculement forcé sur un réplica secondaire synchronisé, le réplica secondaire se comporte de la même manière que pour un basculement manuel planifié.</span><span class="sxs-lookup"><span data-stu-id="2ca30-203">Note that if you issue a forced failover command on a synchronized secondary replica, the secondary replica behaves the same as for a planned manual failover.</span></span>

-   <span data-ttu-id="2ca30-204">En mode de validation asynchrone, la seule forme de basculement est le basculement manuel forcé (avec perte de données possible), généralement appelé *basculement forcé*.</span><span class="sxs-lookup"><span data-stu-id="2ca30-204">Under asynchronous-commit mode, the only form of failover is forced manual failover (with possible data loss), typically called *forced failover*.</span></span> <span data-ttu-id="2ca30-205">Le basculement forcé est considéré comme une forme de basculement manuel, car il ne peut être initié que manuellement.</span><span class="sxs-lookup"><span data-stu-id="2ca30-205">Forced failover is considered a form of manual failover because it can only be initiated manually.</span></span> <span data-ttu-id="2ca30-206">Le basculement forcé est une option de récupération d'urgence.</span><span class="sxs-lookup"><span data-stu-id="2ca30-206">Forced failover is a disaster recovery option.</span></span> <span data-ttu-id="2ca30-207">Il s'agit de la seule forme de basculement possible lorsque le réplica secondaire cible n'est pas synchronisé avec le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-207">It is the only form of failover that is possible when the target secondary replica is not synchronized with the primary replica.</span></span>

 <span data-ttu-id="2ca30-208">Pour plus d’informations, consultez [Basculement et modes de basculement &#40;groupes de disponibilité AlwaysOn&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-208">For more information, see [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md).</span></span>

##  <a name="client-connections"></a><a name="ClientConnections"></a> <span data-ttu-id="2ca30-209">Connexions clientes</span><span class="sxs-lookup"><span data-stu-id="2ca30-209">Client Connections</span></span>
 <span data-ttu-id="2ca30-210">Vous pouvez fournir la connectivité client au réplica principal d'un groupe de disponibilité donné en créant un écouteur de groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-210">You can provide client connectivity to the primary replica of a given availability group by creating an availability group listener.</span></span> <span data-ttu-id="2ca30-211">Un *écouteur de groupe de disponibilité* fournit un ensemble de ressources joint à un groupe de disponibilité donné pour diriger les connexions clientes vers le réplica de disponibilité approprié.</span><span class="sxs-lookup"><span data-stu-id="2ca30-211">An *availability group listener* provides a set of resources that is attached to a given availability group to direct client connections to the appropriate availability replica.</span></span>

 <span data-ttu-id="2ca30-212">Un écouteur de groupe de disponibilité est associé à un nom DNS unique qui sert de nom de réseau virtuel (VNN), une ou plusieurs adresses IP virtuelles (VIP) et un numéro de port TCP.</span><span class="sxs-lookup"><span data-stu-id="2ca30-212">An availability group listener is associated with a unique DNS name that serves as a virtual network name (VNN), one or more virtual IP addresses (VIPs), and a TCP port number.</span></span> <span data-ttu-id="2ca30-213">Pour plus d’informations, consultez [Écouteurs de groupe de disponibilité, connectivité client et basculement d’application &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-213">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

> [!TIP]
>  <span data-ttu-id="2ca30-214">Si un groupe de disponibilité a uniquement deux réplicas de disponibilité et n’est pas configuré pour autoriser l’accès en lecture au réplica secondaire, les clients peuvent se connecter au réplica principal à l’aide d’une [chaîne de connexion de mise en miroir de bases de données](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-214">If an availability group possesses only two availability replicas and is not configured to allow read-access to the secondary replica, clients can connect to the primary replica by using a [database mirroring connection string](../../database-mirroring/connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span> <span data-ttu-id="2ca30-215">Cette approche peut être utile temporairement après avoir migré une base de données de la mise en miroir de bases de données vers [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2ca30-215">This approach can be useful temporarily after you migrate a database from database mirroring to [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="2ca30-216">Avant d'ajouter des réplicas secondaires supplémentaires, vous devrez créer un écouteur de groupe de disponibilité pour le groupe de disponibilité, puis mettre à jour vos applications afin d'utiliser le nom réseau de l'écouteur.</span><span class="sxs-lookup"><span data-stu-id="2ca30-216">Before you add additional secondary replicas, you will need to create an availability group listener the availability group and update your applications to use the network name of the listener.</span></span>

##  <a name="active-secondary-replicas"></a><a name="ActiveSecondaries"></a><span data-ttu-id="2ca30-217">Réplicas secondaires actifs</span><span class="sxs-lookup"><span data-stu-id="2ca30-217">Active Secondary Replicas</span></span>
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="2ca30-218">prend en charge les réplicas secondaires actifs.</span><span class="sxs-lookup"><span data-stu-id="2ca30-218">supports active secondary replicas.</span></span> <span data-ttu-id="2ca30-219">Les fonctions secondaires actives prennent en charge les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="2ca30-219">Active secondary capabilities include support for:</span></span>

-   <span data-ttu-id="2ca30-220">**Exécution d'opérations de sauvegarde sur des réplicas secondaires**</span><span class="sxs-lookup"><span data-stu-id="2ca30-220">**Performing backup operations on secondary replicas**</span></span>

     <span data-ttu-id="2ca30-221">Les réplicas secondaires prennent en charge l’exécution de sauvegardes de journal et de sauvegardes en [copie seule](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) d’une base de données complète, de fichiers ou de groupes de fichiers.</span><span class="sxs-lookup"><span data-stu-id="2ca30-221">The secondary replicas support performing log backups and [copy-only](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) backups of a full database, file, or filegroup.</span></span> <span data-ttu-id="2ca30-222">Vous pouvez configurer le groupe de disponibilité pour spécifier une préférence concernant l'emplacement où les sauvegardes doivent être effectuées.</span><span class="sxs-lookup"><span data-stu-id="2ca30-222">You can configure the availability group to specify a preference for where backups should be performed.</span></span> <span data-ttu-id="2ca30-223">Il est important de comprendre que la préférence n'est pas appliquée par SQL Server. Par conséquent, elle n'a aucune incidence sur les sauvegardes ad hoc.</span><span class="sxs-lookup"><span data-stu-id="2ca30-223">It is important to understand that the preference is not enforced by SQL Server, so it has no impact on ad-hoc backups.</span></span> <span data-ttu-id="2ca30-224">La traduction de cette préférence dépend de la logique, le cas échéant, que vous avez écrite dans vos travaux de sauvegarde pour chacune des bases de données dans un groupe de disponibilité donné.</span><span class="sxs-lookup"><span data-stu-id="2ca30-224">The interpretation of this preference depends on the logic, if any, that you script into your back jobs for each of the databases in a given availability group.</span></span> <span data-ttu-id="2ca30-225">Pour un réplica de disponibilité particulier, vous pouvez spécifier la priorité d'exécution des sauvegardes sur ce réplica par rapport aux autres réplicas dans le même groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="2ca30-225">For an individual availability replica, you can specify your priority for performing backups on this replica relative to the other replicas in the same availability group.</span></span> <span data-ttu-id="2ca30-226">Pour plus d’informations, consultez [Secondaires actifs : sauvegarde sur les réplicas secondaires &#40;groupes de disponibilité AlwaysOn&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-226">For more information, see [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md).</span></span>

-   <span data-ttu-id="2ca30-227">**Accès en lecture seule à un ou plusieurs réplicas secondaires (réplicas secondaires lisibles)**</span><span class="sxs-lookup"><span data-stu-id="2ca30-227">**Read-only access to one or more secondary replicas (readable secondary replicas)**</span></span>

     <span data-ttu-id="2ca30-228">Tout réplica de disponibilité peut être configuré pour autoriser l'accès en lecture seule à ses bases de données locales lorsqu'il a le rôle secondaire, bien que certaines opérations ne soient pas totalement prises en charge.</span><span class="sxs-lookup"><span data-stu-id="2ca30-228">Any availability replica can be configured to allow read-only access to its local databases when performing the secondary role, though some operations are not fully supported.</span></span> <span data-ttu-id="2ca30-229">De plus, si vous souhaitez empêcher que les charges de travail en lecture seule s'exécutent sur le réplica principal, vous pouvez configurer les réplicas pour autoriser uniquement l'accès en lecture en cas d'exécution sous le rôle principal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-229">Also, if you would like to prevent read-only workloads from running on the primary replica, you can configure the replicas to allow only read-write access when running under the primary role.</span></span> <span data-ttu-id="2ca30-230">Pour plus d’informations, consultez [Secondaires actifs : réplicas secondaires lisibles &#40;groupes de disponibilité AlwaysOn&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-230">For more information, see [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span></span>

     <span data-ttu-id="2ca30-231">Si un groupe de disponibilité a un écouteur de groupe de disponibilité et un ou plusieurs réplicas secondaires lisibles, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] peut acheminer les demandes de connexion d’intention de lecture vers l’un d’entre eux (*routage en lecture seule*).</span><span class="sxs-lookup"><span data-stu-id="2ca30-231">If an availability group currently possesses an availability group listener and one or more readable secondary replicas, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can route read-intent connection requests to one of them (*read-only routing*).</span></span> <span data-ttu-id="2ca30-232">Pour plus d’informations, consultez [Écouteurs de groupe de disponibilité, connectivité client et basculement d’application &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-232">For more information, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>

##  <a name="session-timeout-period"></a><a name="SessionTimeoutPerios"></a><span data-ttu-id="2ca30-233">Période d’expiration de session</span><span class="sxs-lookup"><span data-stu-id="2ca30-233">Session-Timeout Period</span></span>
 <span data-ttu-id="2ca30-234">La période d'expiration de session est une propriété du réplica de disponibilité qui détermine le temps pendant lequel une connexion avec un autre réplica de disponibilité peut rester inactive avant qu'elle soit fermée.</span><span class="sxs-lookup"><span data-stu-id="2ca30-234">The session-timeout period is an availability-replica property that determines how long connection with another availability replica can remain inactive before the connection is closed.</span></span> <span data-ttu-id="2ca30-235">Les réplicas primaire et secondaire exécutent réciproquement une commande ping pour signaler qu'ils sont toujours actifs.</span><span class="sxs-lookup"><span data-stu-id="2ca30-235">The primary and secondary replicas ping each other to signal that they are still active.</span></span> <span data-ttu-id="2ca30-236">La réception d'une commande ping de l'autre réplica au cours de la période de délai d'attente indique que la connexion est toujours ouverte et que les instances de serveur communiquent.</span><span class="sxs-lookup"><span data-stu-id="2ca30-236">Receiving a ping from the other replica during the timeout period indicates that the connection is still open and that the server instances are communicating.</span></span> <span data-ttu-id="2ca30-237">À la réception d'un ping, un réplica de disponibilité réinitialise son compteur de période d'expiration de session sur cette connexion.</span><span class="sxs-lookup"><span data-stu-id="2ca30-237">On receiving a ping, an availability replica resets its session-timeout counter on that connection.</span></span>

 <span data-ttu-id="2ca30-238">La période d'expiration de session évite que l'un ou l'autre réplica attendent indéfiniment de recevoir un ping de l'autre réplica.</span><span class="sxs-lookup"><span data-stu-id="2ca30-238">The session-timeout period prevents either replica from waiting indefinitely to receive a ping from the other replica.</span></span> <span data-ttu-id="2ca30-239">Si aucun ping n'est reçu de l'autre réplica au cours de la période d'expiration de session, le réplica expire. Sa connexion est fermée, et le réplica expiré passe à l'état DISCONNECTED.</span><span class="sxs-lookup"><span data-stu-id="2ca30-239">If no ping is received from the other replica within the session-timeout period, the replica times out. Its connection is closed, and the timed-out replica enters the DISCONNECTED state.</span></span> <span data-ttu-id="2ca30-240">Même si un réplica déconnecté est configuré pour le mode de validation synchrone, les transactions n'attendront pas que ce réplica se reconnecte et se resynchronise.</span><span class="sxs-lookup"><span data-stu-id="2ca30-240">Even if a disconnected replica is configured for synchronous-commit mode, transactions will not wait for that replica to reconnect and resynchronize.</span></span>

 <span data-ttu-id="2ca30-241">La période d'expiration de session par défaut pour chaque réplica de disponibilité est de 10 secondes.</span><span class="sxs-lookup"><span data-stu-id="2ca30-241">The default session-timeout period for each availability replica is 10 seconds.</span></span> <span data-ttu-id="2ca30-242">Cette valeur peut être configurée par l'utilisateur et ne peut être inférieure à 5 secondes.</span><span class="sxs-lookup"><span data-stu-id="2ca30-242">This value is user-configurable, with a minimum of 5 seconds.</span></span> <span data-ttu-id="2ca30-243">Généralement, le temps d'attente recommandé est de 10 secondes minimum.</span><span class="sxs-lookup"><span data-stu-id="2ca30-243">Generally, we recommend that you keep the time-out period at 10 seconds or greater.</span></span> <span data-ttu-id="2ca30-244">En définissant une valeur inférieure à 10 secondes, vous permettez qu'un système surchargé déclare à tort un échec.</span><span class="sxs-lookup"><span data-stu-id="2ca30-244">Setting the value to less than 10 seconds creates the possibility of a heavily loaded system declaring a false failure.</span></span>

> [!NOTE]
>  <span data-ttu-id="2ca30-245">Pour le rôle de résolution, la période d'expiration de session ne s'applique pas parce que la requête ping ne se produit pas.</span><span class="sxs-lookup"><span data-stu-id="2ca30-245">In the resolving role, the session-timeout period does not apply because pinging does not occur.</span></span>

##  <a name="automatic-page-repair"></a><a name="APR"></a><span data-ttu-id="2ca30-246">Réparation de page automatique</span><span class="sxs-lookup"><span data-stu-id="2ca30-246">Automatic Page Repair</span></span>
 <span data-ttu-id="2ca30-247">Chaque réplica de disponibilité essaie d'effectuer une récupération automatiquement à partir de pages endommagées sur une base de données locale en résolvant certains types d'erreurs qui empêchent la lecture d'une page de données.</span><span class="sxs-lookup"><span data-stu-id="2ca30-247">Each availability replica tries to automatically recover from corrupted pages on a local database by resolving certain types of errors that prevent reading a data page.</span></span> <span data-ttu-id="2ca30-248">Si un réplica secondaire ne peut pas lire une page, le réplica demande une nouvelle copie de la page du réplica principal.</span><span class="sxs-lookup"><span data-stu-id="2ca30-248">If a secondary replica cannot read a page, the replica requests a fresh copy of the page from the primary replica.</span></span> <span data-ttu-id="2ca30-249">Si le réplica principal ne peut pas lire une page, le réplica diffuse une demande de nouvelle copie à tous les réplicas secondaires et obtient la page du premier qui y répond.</span><span class="sxs-lookup"><span data-stu-id="2ca30-249">If the primary replica cannot read a page, the replica broadcasts a request for a fresh copy to all the secondary replicas and gets the page from the first to respond.</span></span> <span data-ttu-id="2ca30-250">Si cette demande aboutit, la page illisible est remplacée par la copie, ce qui permet généralement de résoudre l'erreur.</span><span class="sxs-lookup"><span data-stu-id="2ca30-250">If this request succeeds, the unreadable page is replaced by the copy, which usually resolves the error.</span></span>

 <span data-ttu-id="2ca30-251">Pour plus d’informations, consultez [Réparation de page automatique &#40;pour les groupes de disponibilité et la mise en miroir de bases de données&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="2ca30-251">For more information, see [Automatic Page Repair &#40;For Availability Groups and Database Mirroring&#41;](../../../sql-server/failover-clusters/automatic-page-repair-availability-groups-database-mirroring.md).</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="2ca30-252">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="2ca30-252">Related Tasks</span></span>

-   [<span data-ttu-id="2ca30-253">Prise en main groupes de disponibilité AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2ca30-253">Getting Started with AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](getting-started-with-always-on-availability-groups-sql-server.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="2ca30-254">Contenu associé</span><span class="sxs-lookup"><span data-stu-id="2ca30-254">Related Content</span></span>

-   <span data-ttu-id="2ca30-255">**Blogs :**</span><span class="sxs-lookup"><span data-stu-id="2ca30-255">**Blogs:**</span></span>

     [<span data-ttu-id="2ca30-256">AlwaysON - HADRON Learning Series : Worker Pool Usage for HADRON Enabled Databases (en anglais)</span><span class="sxs-lookup"><span data-stu-id="2ca30-256">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)

     [<span data-ttu-id="2ca30-257">Blogs de l'équipe de SQL Server AlwaysOn : Blog officiel de l'équipe de SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="2ca30-257">SQL Server AlwaysOn Team Blogs: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)

     [<span data-ttu-id="2ca30-258">Blogs des ingénieurs du Service clientèle et du Support technique de SQL Server</span><span class="sxs-lookup"><span data-stu-id="2ca30-258">CSS SQL Server Engineers Blogs</span></span>](https://blogs.msdn.com/b/psssql/)

-   <span data-ttu-id="2ca30-259">**Vidéos :**</span><span class="sxs-lookup"><span data-stu-id="2ca30-259">**Videos:**</span></span>

     [<span data-ttu-id="2ca30-260">Microsoft SQL Server, nom de code « Denali », série AlwaysOn, Partie 1 : Présentation de la solution haute disponibilité de la prochaine génération</span><span class="sxs-lookup"><span data-stu-id="2ca30-260">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 1: Introducing the Next Generation High Availability Solution</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI302)

     [<span data-ttu-id="2ca30-261">Microsoft SQL Server, nom de code « Denali », série AlwaysOn, Partie 2 : Génération d'une solution haute disponibilité critique à l'aide d'AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="2ca30-261">Microsoft SQL Server Code-Named "Denali" AlwaysOn Series,Part 2: Building a Mission-Critical High Availability Solution Using AlwaysOn</span></span>](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DBI404)

-   <span data-ttu-id="2ca30-262">**Livres blancs :**</span><span class="sxs-lookup"><span data-stu-id="2ca30-262">**Whitepapers:**</span></span>

     [<span data-ttu-id="2ca30-263">Guide de solutions Microsoft SQL Server AlwaysOn pour la haute disponibilité et la récupération d'urgence</span><span class="sxs-lookup"><span data-stu-id="2ca30-263">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)

     [<span data-ttu-id="2ca30-264">Livres blancs de Microsoft pour SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="2ca30-264">Microsoft White Papers for SQL Server 2012</span></span>](https://msdn.microsoft.com/library/hh403491.aspx)

     [<span data-ttu-id="2ca30-265">Livres blancs de l'équipe de consultants clients de SQL Server</span><span class="sxs-lookup"><span data-stu-id="2ca30-265">SQL Server Customer Advisory Team Whitepapers</span></span>](http://sqlcat.com/)

## <a name="see-also"></a><span data-ttu-id="2ca30-266">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="2ca30-266">See Also</span></span>
 <span data-ttu-id="2ca30-267">[Modes de disponibilité &#40;groupes de disponibilité AlwaysOn&#41;](availability-modes-always-on-availability-groups.md) [modes de basculement et](failover-and-failover-modes-always-on-availability-groups.md) de basculement &#40;groupes de disponibilité AlwaysOn&#41;[vue d’ensemble des instructions Transact-SQL pour](transact-sql-statements-for-always-on-availability-groups.md) groupes de disponibilité AlwaysOn &#40;SQL Server&#41;[vue d’ensemble des applets de commande PowerShell pour groupes de disponibilité AlwaysOn](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) &#40;SQL Server&#41;la [haute disponibilité pour les bases de données OLTP en mémoire](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [, restrictions et recommandations pour groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) [la création et la configuration des groupes de disponibilité](creation-and-configuration-of-availability-groups-sql-server.md) &#40;SQL Server&#41;les [secondaires actifs : les réplicas secondaires accessibles en lecture &#40;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) groupes de disponibilité AlwaysOn&#41;[secondaires actifs : sauvegarde sur les réplicas secondaires &#40;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) groupes de disponibilité AlwaysOn&#41;les [écouteurs de groupe de disponibilité, la connectivité client et le basculement d’application](../../listeners-client-connectivity-application-failover.md) &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2ca30-267">[Availability Modes &#40;AlwaysOn Availability Groups&#41;](availability-modes-always-on-availability-groups.md) [Failover and Failover Modes &#40;AlwaysOn Availability Groups&#41;](failover-and-failover-modes-always-on-availability-groups.md) [Overview of Transact-SQL Statements for AlwaysOn Availability Groups &#40;SQL Server&#41;](transact-sql-statements-for-always-on-availability-groups.md) [Overview of PowerShell Cmdlets for AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-powershell-cmdlets-for-always-on-availability-groups-sql-server.md) [High Availability Support for In-Memory OLTP databases](../../../relational-databases/in-memory-oltp/high-availability-support-for-in-memory-oltp-databases.md) [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) [Creation and Configuration of Availability Groups &#40;SQL Server&#41;](creation-and-configuration-of-availability-groups-sql-server.md) [Active Secondaries: Readable Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-readable-secondary-replicas-always-on-availability-groups.md) [Active Secondaries: Backup on Secondary Replicas &#40;AlwaysOn Availability Groups&#41;](active-secondaries-backup-on-secondary-replicas-always-on-availability-groups.md) [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)</span></span>

