---
title: À propos de l’accès de la connexion client aux réplicas de disponibilité (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- Availability Groups [SQL Server], configuring
- Availability Groups [SQL Server], client connectivity
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 29027e46-43e4-4b45-b650-c4cdeacdf552
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 79e61f29957d90a429d8a0c66782ca7cf2e7bd4c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701946"
---
# <a name="about-client-connection-access-to-availability-replicas-sql-server"></a><span data-ttu-id="cbc00-102">À propos de l'accès de la connexion client aux réplicas de disponibilité (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="cbc00-102">About Client Connection Access to Availability Replicas (SQL Server)</span></span>
  <span data-ttu-id="cbc00-103">Dans un groupe de disponibilité AlwaysOn, vous pouvez configurez un ou plusieurs réplicas de disponibilité pour autoriser les connexions en lecture seule lors d'une exécution sous le rôle secondaire (autrement dit, avec une exécution en tant que réplica secondaire).</span><span class="sxs-lookup"><span data-stu-id="cbc00-103">In an AlwaysOn availability group, you can configure one or more availability replicas to allow read-only connections when running under the secondary role (that is, when running as a secondary replica).</span></span> <span data-ttu-id="cbc00-104">Vous pouvez également configurer chaque réplica de disponibilité afin d'autoriser ou exclure les connexions en lecture seule lors d'une exécution sous le rôle principal (autrement dit, avec une exécution comme réplica principal).</span><span class="sxs-lookup"><span data-stu-id="cbc00-104">You can also configure each availability replica to allow or exclude read-only connections when running under the primary role (that is, when running as the primary replica).</span></span>  
  
 <span data-ttu-id="cbc00-105">Pour faciliter l'accès client aux bases de données primaires ou secondaires d'un groupe de disponibilité donné, vous devez définir un écouteur de groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="cbc00-105">To facilitate client access to primary or secondary databases of a given availability group, you should define an availability group listener.</span></span> <span data-ttu-id="cbc00-106">Par défaut, l'écouteur de groupe de disponibilité dirige les connexions entrantes vers le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="cbc00-106">By default, the availability group listener directs incoming connections to the primary replica.</span></span> <span data-ttu-id="cbc00-107">Toutefois, vous pouvez configurer un groupe de disponibilité pour prendre en charge le routage en lecture seule, qui permet à son écouteur de groupe de disponibilité de rediriger les demandes de connexion des applications avec intention de lecture vers un réplica secondaire accessible en lecture.</span><span class="sxs-lookup"><span data-stu-id="cbc00-107">However, you can configure an availability group to support read-only routing, which enables its availability group listener to redirect the connection requests of read-intent applications to a readable secondary replica.</span></span> <span data-ttu-id="cbc00-108">Pour plus d’informations, consultez [Configurer le routage en lecture seule pour un groupe de disponibilité &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-108">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
 <span data-ttu-id="cbc00-109">Lors d'un basculement, un réplica secondaire adopte le rôle principal et l'ancien réplica principal joue le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="cbc00-109">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="cbc00-110">Pendant le processus de basculement, toutes les connexions clientes au réplica principal et aux réplicas secondaires prennent fin.</span><span class="sxs-lookup"><span data-stu-id="cbc00-110">During the failover process, all client connections to both the primary replica and secondary replicas are terminated.</span></span> <span data-ttu-id="cbc00-111">Après le basculement, lorsqu'un client se reconnecte à l'écouteur de groupe de disponibilité, l'écouteur reconnecte le client au nouveau réplica principal, sauf dans le cas d'une demande de connexion avec intention de lecture.</span><span class="sxs-lookup"><span data-stu-id="cbc00-111">After the failover, when a client reconnects to the availability group listener, the listener reconnects the client to the new primary replica, except for a read-intent connect request.</span></span> <span data-ttu-id="cbc00-112">Si le routage en lecture seule est configuré sur le client et sur les instances de serveur qui hébergent le nouveau réplica principal et sur au moins un réplica secondaire accessible en lecture, les demandes de connexion avec intention de lecture sont à nouveau routées vers un réplica secondaire qui prend en charge le type d'accès à la connexion dont le client a besoin.</span><span class="sxs-lookup"><span data-stu-id="cbc00-112">If read-only routing is configured on the client and on the server instances that hosts the new primary replica and on at least one readable secondary replica, read-intent connection requests are re-routed to a secondary replica that supports the type of connection access that the client requires.</span></span> <span data-ttu-id="cbc00-113">Pour garantir une expérience naturelle pour le client après un basculement, il est important de configurer l'accès à la connexion pour les rôles secondaires et principaux de chaque réplica de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="cbc00-113">To ensure a graceful client experience after a failover, it is important to configure connection access for both the secondary and primary roles of every availability replica.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="cbc00-114">Pour plus d’informations sur l’écouteur de groupe de disponibilité, qui traite les demandes de connexion des clients, consultez [Écouteurs de groupe de disponibilité, connectivité client et basculement d’application &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-114">For information about the availability group listener, which handles client connection requests, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
 <span data-ttu-id="cbc00-115">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="cbc00-115">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="cbc00-116">Types d’accès à la connexion pris en charge par le rôle secondaire</span><span class="sxs-lookup"><span data-stu-id="cbc00-116">Types of Connection Access Supported by the Secondary Role</span></span>](#ConnectAccessForSecondary)  
  
-   [<span data-ttu-id="cbc00-117">Types d’accès à la connexion pris en charge par le rôle principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-117">Types of Connection Access Supported by the Primary Role</span></span>](#ConnectAccessForPrimary)  
  
-   [<span data-ttu-id="cbc00-118">Comment la configuration d’accès à la connexion affecte la connectivité client</span><span class="sxs-lookup"><span data-stu-id="cbc00-118">How the Connection Access Configuration Affects Client Connectivity</span></span>](#HowConnectionAccessAffectsConnectivity)  
  
-   [<span data-ttu-id="cbc00-119">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="cbc00-119">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="cbc00-120">Contenu connexe</span><span class="sxs-lookup"><span data-stu-id="cbc00-120">Related Content</span></span>](#RelatedContent)  
  
##  <a name="types-of-connection-access-supported-by-the-secondary-role"></a><a name="ConnectAccessForSecondary"></a> <span data-ttu-id="cbc00-121">Types d'accès à la connexion pris en charge par le rôle secondaire</span><span class="sxs-lookup"><span data-stu-id="cbc00-121">Types of Connection Access Supported by the Secondary Role</span></span>  
 <span data-ttu-id="cbc00-122">Le rôle secondaire prend en charge trois méthodes pour les connexions clientes, comme suit :</span><span class="sxs-lookup"><span data-stu-id="cbc00-122">The secondary role supports three alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="cbc00-123">Aucune connexion</span><span class="sxs-lookup"><span data-stu-id="cbc00-123">No connections</span></span>  
 <span data-ttu-id="cbc00-124">Aucune connexion utilisateur n'est autorisée.</span><span class="sxs-lookup"><span data-stu-id="cbc00-124">No user connections are allowed.</span></span> <span data-ttu-id="cbc00-125">Les bases de données secondaires ne sont pas disponibles pour l'accès en lecture.</span><span class="sxs-lookup"><span data-stu-id="cbc00-125">Secondary databases are not available for read access.</span></span> <span data-ttu-id="cbc00-126">Il s'agit du comportement par défaut dans le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="cbc00-126">This is the default behavior in the secondary role.</span></span>  
  
 <span data-ttu-id="cbc00-127">Connexions d'intention en lecture seule</span><span class="sxs-lookup"><span data-stu-id="cbc00-127">Only read-intent connections</span></span>  
 <span data-ttu-id="cbc00-128">La ou les bases de données secondaires sont disponibles uniquement pour la connexion pour laquelle la `Application Intent` propriété de connexion a la valeur `ReadOnly` (*connexions d’intention de lecture*).</span><span class="sxs-lookup"><span data-stu-id="cbc00-128">The secondary database(s) are available only for connection for which the `Application Intent` connection property is set to `ReadOnly` (*read-intent connections*).</span></span>  
  
 <span data-ttu-id="cbc00-129">Pour plus d'informations sur cette propriété de connexion, consultez [Prise en charge des fonctionnalités de récupération d'urgence, haute disponibilité par SQL Server Native Client](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-129">For information about this connection property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
 <span data-ttu-id="cbc00-130">autoriser toutes les connexions en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="cbc00-130">Allow any read-only connection</span></span>  
 <span data-ttu-id="cbc00-131">La ou les bases de données secondaires sont toutes disponibles pour les connexions d'accès en lecture.</span><span class="sxs-lookup"><span data-stu-id="cbc00-131">The secondary database(s) are all available for read access connections.</span></span> <span data-ttu-id="cbc00-132">Cette option permet aux clients disposant d'une version antérieure de se connecter.</span><span class="sxs-lookup"><span data-stu-id="cbc00-132">This option allows lower versioned clients to connect.</span></span>  
  
 <span data-ttu-id="cbc00-133">Pour plus d’informations, consultez [Configurer l’accès en lecture seule sur un réplica de disponibilité &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-133">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="types-of-connection-access-supported-by-the-primary-role"></a><a name="ConnectAccessForPrimary"></a> <span data-ttu-id="cbc00-134">Types d'accès à la connexion pris en charge par le rôle principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-134">Types of Connection Access Supported by the Primary Role</span></span>  
 <span data-ttu-id="cbc00-135">Le rôle principal prend en charge deux méthodes pour les connexions clientes, comme suit :</span><span class="sxs-lookup"><span data-stu-id="cbc00-135">The primary role supports two alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="cbc00-136">Toutes les connexions sont autorisées</span><span class="sxs-lookup"><span data-stu-id="cbc00-136">All connections are allowed</span></span>  
 <span data-ttu-id="cbc00-137">Les connexions en lecture-écriture et en lecture seule sont autorisées aux bases de données primaires.</span><span class="sxs-lookup"><span data-stu-id="cbc00-137">Both read-write and read-only connections are allowed to primary databases.</span></span> <span data-ttu-id="cbc00-138">Il s'agit du comportement par défaut pour le rôle principal.</span><span class="sxs-lookup"><span data-stu-id="cbc00-138">This is the default behavior for the primary role.</span></span>  
  
 <span data-ttu-id="cbc00-139">Autoriser uniquement les connexions en lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-139">Allow only read-write connections</span></span>  
 <span data-ttu-id="cbc00-140">Lorsque la `Application Intent` propriété de connexion a la valeur **ReadWrite** ou n’est pas définie, la connexion est autorisée.</span><span class="sxs-lookup"><span data-stu-id="cbc00-140">When the `Application Intent` connection property is set to **ReadWrite** or is not set, the connection is allowed.</span></span> <span data-ttu-id="cbc00-141">Les connexions pour lesquelles le `Application Intent` mot clé de chaîne de connexion est défini sur ne `ReadOnly` sont pas autorisées.</span><span class="sxs-lookup"><span data-stu-id="cbc00-141">Connections for which the `Application Intent` connection string keyword is set to `ReadOnly` are not allowed.</span></span> <span data-ttu-id="cbc00-142">L'autorisation des seules connexions en lecture-écriture peut empêcher vos clients de connecter une charge de travail avec intention de lecture au réplica principal, par erreur.</span><span class="sxs-lookup"><span data-stu-id="cbc00-142">Allowing only read-write connections can help prevent your customers from connecting a read-intent work load to the primary replica by mistake.</span></span>  
  
 <span data-ttu-id="cbc00-143">Pour plus d'informations sur cette propriété de connexion, consultez [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-143">For information about this connection property, see [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="cbc00-144">Pour plus d’informations, consultez [Configurer l’accès en lecture seule sur un réplica de disponibilité &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-144">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="how-the-connection-access-configuration-affects-client-connectivity"></a><a name="HowConnectionAccessAffectsConnectivity"></a> <span data-ttu-id="cbc00-145">Comment la configuration d'accès à la connexion affecte la connectivité client</span><span class="sxs-lookup"><span data-stu-id="cbc00-145">How the Connection Access Configuration Affects Client Connectivity</span></span>  
 <span data-ttu-id="cbc00-146">Les paramètres d'accès à la connexion d'un réplica déterminent si une tentative de connexion échoue ou réussit.</span><span class="sxs-lookup"><span data-stu-id="cbc00-146">The connection access settings of a replica determine whether a connection attempt fails or succeeds.</span></span> <span data-ttu-id="cbc00-147">Le tableau suivant récapitule si une tentative de connexion donnée réussit ou échoue pour chaque paramètre d'accès à la connexion.</span><span class="sxs-lookup"><span data-stu-id="cbc00-147">The following table summarizes whether a given connection attempt succeeds or fails for each the connection-access setting.</span></span>  
  
|<span data-ttu-id="cbc00-148">Rôle du réplica</span><span class="sxs-lookup"><span data-stu-id="cbc00-148">Replica Role</span></span>|<span data-ttu-id="cbc00-149">Accès à la connexion pris en charge sur le réplica</span><span class="sxs-lookup"><span data-stu-id="cbc00-149">Connection Access Supported on Replica</span></span>|<span data-ttu-id="cbc00-150">Intention de connexion</span><span class="sxs-lookup"><span data-stu-id="cbc00-150">Connection Intent</span></span>|<span data-ttu-id="cbc00-151">Résultat de la tentative de connexion</span><span class="sxs-lookup"><span data-stu-id="cbc00-151">Connection-Attempt Result</span></span>|  
|------------------|--------------------------------------------|-----------------------|--------------------------------|  
|<span data-ttu-id="cbc00-152">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-152">Secondary</span></span>|<span data-ttu-id="cbc00-153">Tous</span><span class="sxs-lookup"><span data-stu-id="cbc00-153">All</span></span>|<span data-ttu-id="cbc00-154">Intention de lecture, lecture-écriture, ou aucune intention de connexion spécifiée</span><span class="sxs-lookup"><span data-stu-id="cbc00-154">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="cbc00-155">Succès</span><span class="sxs-lookup"><span data-stu-id="cbc00-155">Success</span></span>|  
|<span data-ttu-id="cbc00-156">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-156">Secondary</span></span>|<span data-ttu-id="cbc00-157">Aucun (il s'agit du comportement secondaire par défaut.)</span><span class="sxs-lookup"><span data-stu-id="cbc00-157">None (This is the default secondary behavior.)</span></span>|<span data-ttu-id="cbc00-158">Intention de lecture, lecture-écriture, ou aucune intention de connexion spécifiée</span><span class="sxs-lookup"><span data-stu-id="cbc00-158">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="cbc00-159">Échec</span><span class="sxs-lookup"><span data-stu-id="cbc00-159">Failure</span></span>|  
|<span data-ttu-id="cbc00-160">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-160">Secondary</span></span>|<span data-ttu-id="cbc00-161">Intention de lecture uniquement</span><span class="sxs-lookup"><span data-stu-id="cbc00-161">Read-intent only</span></span>|<span data-ttu-id="cbc00-162">Intention de lecture</span><span class="sxs-lookup"><span data-stu-id="cbc00-162">Read-intent</span></span>|<span data-ttu-id="cbc00-163">Succès</span><span class="sxs-lookup"><span data-stu-id="cbc00-163">Success</span></span>|  
|<span data-ttu-id="cbc00-164">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-164">Secondary</span></span>|<span data-ttu-id="cbc00-165">Intention de lecture uniquement</span><span class="sxs-lookup"><span data-stu-id="cbc00-165">Read-intent only</span></span>|<span data-ttu-id="cbc00-166">Lecture-écriture ou aucune intention de connexion spécifiée</span><span class="sxs-lookup"><span data-stu-id="cbc00-166">Read-write or no connection intent specified</span></span>|<span data-ttu-id="cbc00-167">Échec</span><span class="sxs-lookup"><span data-stu-id="cbc00-167">Failure</span></span>|  
|<span data-ttu-id="cbc00-168">Principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-168">Primary</span></span>|<span data-ttu-id="cbc00-169">Tous (il s'agit du comportement principal par défaut.)</span><span class="sxs-lookup"><span data-stu-id="cbc00-169">All (This is the default primary behavior.)</span></span>|<span data-ttu-id="cbc00-170">Lecture seule, lecture-écriture ou aucune intention de connexion spécifiée</span><span class="sxs-lookup"><span data-stu-id="cbc00-170">Read-only, read-write, or no connection intent specified</span></span>|<span data-ttu-id="cbc00-171">Succès</span><span class="sxs-lookup"><span data-stu-id="cbc00-171">Success</span></span>|  
|<span data-ttu-id="cbc00-172">Principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-172">Primary</span></span>|<span data-ttu-id="cbc00-173">Lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-173">Read-write</span></span>|<span data-ttu-id="cbc00-174">Intention de lecture uniquement</span><span class="sxs-lookup"><span data-stu-id="cbc00-174">Read-intent only</span></span>|<span data-ttu-id="cbc00-175">Échec</span><span class="sxs-lookup"><span data-stu-id="cbc00-175">Failure</span></span>|  
|<span data-ttu-id="cbc00-176">Principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-176">Primary</span></span>|<span data-ttu-id="cbc00-177">Lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-177">Read-write</span></span>|<span data-ttu-id="cbc00-178">Lecture-écriture ou aucune intention de connexion spécifiée</span><span class="sxs-lookup"><span data-stu-id="cbc00-178">Read-write or no connection intent specified</span></span>|<span data-ttu-id="cbc00-179">Succès</span><span class="sxs-lookup"><span data-stu-id="cbc00-179">Success</span></span>|  
  
 <span data-ttu-id="cbc00-180">Pour plus d’informations sur la configuration d’un groupe de disponibilité pour accepter les connexions clientes à ses réplicas, consultez [Écouteurs de groupe de disponibilité, connectivité client et basculement d’application &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span><span class="sxs-lookup"><span data-stu-id="cbc00-180">For information about configuring an availability group to accept client connections to its replicas, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
### <a name="example-connection-access-configuration"></a><span data-ttu-id="cbc00-181">Exemple de configuration d'accès à la connexion</span><span class="sxs-lookup"><span data-stu-id="cbc00-181">Example Connection-Access Configuration</span></span>  
 <span data-ttu-id="cbc00-182">Selon la façon dont différents réplicas de disponibilité sont configurés pour l'accès à la connexion, la prise en charge des connexions clientes peut changer après le basculement d'un groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="cbc00-182">Depending on how different availability replicas are configured for connection access, support for client connections might change after an availability group fails over.</span></span> <span data-ttu-id="cbc00-183">Par exemple, considérez un groupe de disponibilité pour lequel la création de rapports est exécutée sur des réplicas secondaires distants avec validation asynchrone.</span><span class="sxs-lookup"><span data-stu-id="cbc00-183">For example, consider an availability group for which reporting is performed on remote asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="cbc00-184">Toutes les applications en lecture seule des bases de données dans ce groupe de disponibilité définissent leur propriété de connexion `Application Intent` avec la valeur `ReadOnly`, de sorte que toutes les connexions en lecture seule soient des connexions avec intention de lecture.</span><span class="sxs-lookup"><span data-stu-id="cbc00-184">All of the read-only applications for the databases in this availability group set their `Application Intent` connection property to `ReadOnly`, so that all read-only connections are read-intent connections.</span></span>  
  
 <span data-ttu-id="cbc00-185">Cet exemple de groupe de disponibilité compte deux réplicas de validation synchrone au centre de calcul principal et deux réplicas de validation asynchrone sur un site satellite.</span><span class="sxs-lookup"><span data-stu-id="cbc00-185">This example availability group possesses two synchronous-commit replicas at the main computing center and two asynchronous-commit replicas at a satellite site.</span></span> <span data-ttu-id="cbc00-186">Pour le rôle principal, tous les réplicas sont configurés pour l'accès en lecture-écriture, ce qui empêche les connexions avec intention de lecture au réplica principal dans tous les cas.</span><span class="sxs-lookup"><span data-stu-id="cbc00-186">For the primary role, all the replicas are configured for read-write access, which prevents read-intent connections to the primary replica in all situations.</span></span> <span data-ttu-id="cbc00-187">Le rôle secondaire avec validation synchrone utilise la configuration par défaut d'accès à la connexion (« aucun »), ce qui empêche toute connexion cliente sous le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="cbc00-187">The synchronous commit secondary role uses the default connection-access configuration ("none"), which prevents all client connections under the secondary role.</span></span>  <span data-ttu-id="cbc00-188">Par opposition, les réplicas avec validation asynchrone sont configurés pour autoriser les connexions avec intention de lecture sous le rôle secondaire.</span><span class="sxs-lookup"><span data-stu-id="cbc00-188">In contrast, the asynchronous commit replicas are configured to permit read-intent connections under the secondary role.</span></span> <span data-ttu-id="cbc00-189">Le tableau suivant récapitule cette configuration d'exemple :</span><span class="sxs-lookup"><span data-stu-id="cbc00-189">The following table summarize this example configuration:</span></span>  
  
|<span data-ttu-id="cbc00-190">Réplica</span><span class="sxs-lookup"><span data-stu-id="cbc00-190">Replica</span></span>|<span data-ttu-id="cbc00-191">Mode de validation</span><span class="sxs-lookup"><span data-stu-id="cbc00-191">Commit Mode</span></span>|<span data-ttu-id="cbc00-192">Rôle initial</span><span class="sxs-lookup"><span data-stu-id="cbc00-192">Initial Role</span></span>|<span data-ttu-id="cbc00-193">Accès à la connexion pour le rôle secondaire</span><span class="sxs-lookup"><span data-stu-id="cbc00-193">Connection Access for Secondary Role</span></span>|<span data-ttu-id="cbc00-194">Accès à la connexion pour le rôle principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-194">Connection Access for Primary Role</span></span>|  
|-------------|-----------------|------------------|------------------------------------------|----------------------------------------|  
|<span data-ttu-id="cbc00-195">Replica1</span><span class="sxs-lookup"><span data-stu-id="cbc00-195">Replica1</span></span>|<span data-ttu-id="cbc00-196">Synchrone</span><span class="sxs-lookup"><span data-stu-id="cbc00-196">Synchronous</span></span>|<span data-ttu-id="cbc00-197">Principal</span><span class="sxs-lookup"><span data-stu-id="cbc00-197">Primary</span></span>|<span data-ttu-id="cbc00-198">None</span><span class="sxs-lookup"><span data-stu-id="cbc00-198">None</span></span>|<span data-ttu-id="cbc00-199">Lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-199">Read-write</span></span>|  
|<span data-ttu-id="cbc00-200">Replica2</span><span class="sxs-lookup"><span data-stu-id="cbc00-200">Replica2</span></span>|<span data-ttu-id="cbc00-201">Synchrone</span><span class="sxs-lookup"><span data-stu-id="cbc00-201">Synchronous</span></span>|<span data-ttu-id="cbc00-202">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-202">Secondary</span></span>|<span data-ttu-id="cbc00-203">None</span><span class="sxs-lookup"><span data-stu-id="cbc00-203">None</span></span>|<span data-ttu-id="cbc00-204">Lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-204">Read-write</span></span>|  
|<span data-ttu-id="cbc00-205">Replica3</span><span class="sxs-lookup"><span data-stu-id="cbc00-205">Replica3</span></span>|<span data-ttu-id="cbc00-206">Asynchrone</span><span class="sxs-lookup"><span data-stu-id="cbc00-206">Asynchronous</span></span>|<span data-ttu-id="cbc00-207">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-207">Secondary</span></span>|<span data-ttu-id="cbc00-208">Intention de lecture uniquement</span><span class="sxs-lookup"><span data-stu-id="cbc00-208">Read-intentonly</span></span>|<span data-ttu-id="cbc00-209">Lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-209">Read-write</span></span>|  
|<span data-ttu-id="cbc00-210">Replica4</span><span class="sxs-lookup"><span data-stu-id="cbc00-210">Replica4</span></span>|<span data-ttu-id="cbc00-211">Asynchrone</span><span class="sxs-lookup"><span data-stu-id="cbc00-211">Asynchronous</span></span>|<span data-ttu-id="cbc00-212">Secondary</span><span class="sxs-lookup"><span data-stu-id="cbc00-212">Secondary</span></span>|<span data-ttu-id="cbc00-213">Intention de lecture uniquement</span><span class="sxs-lookup"><span data-stu-id="cbc00-213">Read-intent only</span></span>|<span data-ttu-id="cbc00-214">Lecture-écriture</span><span class="sxs-lookup"><span data-stu-id="cbc00-214">Read-write</span></span>|  
  
 <span data-ttu-id="cbc00-215">En général, dans ce scénario d'exemple, les basculements se produisent uniquement entre les réplicas avec validation synchrone, et immédiatement après le basculement, les applications avec intention de lecture peuvent se reconnecter à l'un des réplicas secondaires avec validation asynchrone.</span><span class="sxs-lookup"><span data-stu-id="cbc00-215">Typically, in this example scenario, failovers occur only between the synchronous-commit replicas, and  immediately after the failover, read-intent applications are able to reconnect to one of the asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="cbc00-216">Toutefois, lorsqu'un incident se produit au centre de calcul principal, les deux réplicas avec validation synchrone sont perdus.</span><span class="sxs-lookup"><span data-stu-id="cbc00-216">However, when a disaster occurs at the main computing center both synchronous-commit replicas are lost.</span></span> <span data-ttu-id="cbc00-217">L'administrateur de base de données sur le site satellite répond en effectuant un basculement manuel forcé vers un réplica secondaire avec validation asynchrone.</span><span class="sxs-lookup"><span data-stu-id="cbc00-217">The database administrator at the satellite site responds by performing a forced manual failover to an asynchronous-commit secondary replica.</span></span> <span data-ttu-id="cbc00-218">Les bases de données secondaires sur le réplica secondaire restant sont interrompues par le basculement forcé, ce qui les rend indisponibles pour les charges de travail en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="cbc00-218">The secondary databases on the remaining secondary replica are suspended by the forced failover, making them unavailable for read-only workloads.</span></span> <span data-ttu-id="cbc00-219">Le nouveau réplica principal, qui est configuré pour les connexions en lecture-écriture, empêche la charge de travail avec intention de lecture de concurrencer la charge de travail en lecture-écriture.</span><span class="sxs-lookup"><span data-stu-id="cbc00-219">The new primary replica, which is configured for read-write connections, prevents the read-intent workload from competing with the read-write workload.</span></span> <span data-ttu-id="cbc00-220">Cela signifie que tant que l'administrateur de base de données n'a pas repris les bases de données secondaires sur le réplica secondaire restant avec validation asynchrone, les clients avec intention de lecture ne peuvent se connecter à aucun réplica de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="cbc00-220">This means that until the database administrator resumes the secondary databases on the remaining asynchronous-commit secondary replica, read-intent clients cannot connect to any availability replica.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="cbc00-221">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="cbc00-221">Related Tasks</span></span>  
  
-   [<span data-ttu-id="cbc00-222">Configurer l’accès en lecture seule sur un réplica de disponibilité &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="cbc00-222">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="cbc00-223">Configurer le routage en lecture seule pour un groupe de disponibilité &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="cbc00-223">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="cbc00-224">Surveiller des groupes de disponibilité &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="cbc00-224">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="cbc00-225">Afficher les propriétés d’un réplica de disponibilité &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="cbc00-225">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   [<span data-ttu-id="cbc00-226">Utiliser la boîte de dialogue Nouveau groupe de disponibilité &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="cbc00-226">Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;</span></span>](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="cbc00-227">Contenu associé</span><span class="sxs-lookup"><span data-stu-id="cbc00-227">Related Content</span></span>  
  
-   [<span data-ttu-id="cbc00-228">Guide de solutions Microsoft SQL Server AlwaysOn pour la haute disponibilité et la récupération d'urgence</span><span class="sxs-lookup"><span data-stu-id="cbc00-228">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="cbc00-229">Blog de l'équipe de SQL Server AlwaysOn : Blog officiel de l'équipe de SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="cbc00-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="cbc00-230">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="cbc00-230">See Also</span></span>  
 <span data-ttu-id="cbc00-231">[Vue d’ensemble de groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="cbc00-231">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="cbc00-232">[Écouteurs de groupe de disponibilité, connectivité client et basculement d’application &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="cbc00-232">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="cbc00-233">Statistiques</span><span class="sxs-lookup"><span data-stu-id="cbc00-233">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
