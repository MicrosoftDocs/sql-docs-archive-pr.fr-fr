---
title: Vue d’ensemble des instructions Transact-SQL pour groupes de disponibilité AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 04/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], Transact-SQL statements
ms.assetid: 184d0a81-2259-4db9-9d0d-01aac0b502c8
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: ff25fecf54cfdd1d9c03d1586f0272896542bfa7
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87708647"
---
# <a name="overview-of-transact-sql-statements-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="a4b42-102">Vue d'ensemble des instructions Transact-SQL pour les groupes de disponibilité AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="a4b42-102">Overview of Transact-SQL Statements for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="a4b42-103">Cette rubrique présente les instructions [!INCLUDE[tsql](../../../includes/tsql-md.md)] qui prennent en charge le déploiement de [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] , ainsi que la création et la gestion d'un groupe de disponibilité donné, d'un réplica de disponibilité et d'une base de données de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="a4b42-103">This topic introduces the [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements that support deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and creating and managing an given availability group, availability replica and availability database.</span></span>  
  
  
##  <a name="create-endpoint"></a><a name="CreateEndpoint"></a><span data-ttu-id="a4b42-104">CRÉER UN POINT DE TERMINAISON</span><span class="sxs-lookup"><span data-stu-id="a4b42-104">CREATE ENDPOINT</span></span>  
 <span data-ttu-id="a4b42-105">[créer un point de terminaison... POUR DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) crée un point de terminaison de mise en miroir de bases de données, s’il n’en existe aucun sur l’instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="a4b42-105">[CREATE ENDPOINT ... FOR DATABASE_MIRRORING](/sql/t-sql/statements/create-endpoint-transact-sql) creates a database mirroring endpoint, if none exists on the server instance.</span></span> <span data-ttu-id="a4b42-106">Chaque instance de serveur sur laquelle vous envisagez de déployer [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] ou la mise en miroir de bases de données requiert un point de terminaison de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="a4b42-106">Every server instance on which you intend to deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] or database mirroring requires a database mirroring endpoint.</span></span>  
  
 <span data-ttu-id="a4b42-107">Exécutez cette instruction sur l'instance de serveur sur laquelle vous créez le point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="a4b42-107">Execute this statement on the server instance on which you are creating the endpoint.</span></span> <span data-ttu-id="a4b42-108">Vous pouvez créer un seul point de terminaison de mise en miroir de bases de données sur une instance de serveur donnée.</span><span class="sxs-lookup"><span data-stu-id="a4b42-108">You can create only one database mirroring endpoint on a given server instance.</span></span> <span data-ttu-id="a4b42-109">Pour plus d’informations, consultez [Point de terminaison de mise en miroir de bases de données &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="a4b42-109">For more information, see [The Database Mirroring Endpoint &#40;SQL Server&#41;](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md).</span></span>  
  
##  <a name="create-availability-group"></a><a name="CreateAG"></a><span data-ttu-id="a4b42-110">CRÉER UN GROUPE DE DISPONIBILITÉ</span><span class="sxs-lookup"><span data-stu-id="a4b42-110">CREATE AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="a4b42-111">[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) crée un groupe de disponibilité et éventuellement un écouteur du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="a4b42-111">[CREATE AVAILABILITY GROUP](/sql/t-sql/statements/create-availability-group-transact-sql) creates a new availability group and optionally an availability group listener.</span></span> <span data-ttu-id="a4b42-112">Au minimum, vous devez spécifier votre instance de serveur locale, qui deviendra le réplica principal initial.</span><span class="sxs-lookup"><span data-stu-id="a4b42-112">Minimally, you must specify your local server instance, which will become the initial primary replica.</span></span> <span data-ttu-id="a4b42-113">Éventuellement, vous pouvez également spécifier jusqu'à quatre réplicas secondaires.</span><span class="sxs-lookup"><span data-stu-id="a4b42-113">Optionally, you can also specify up to four secondary replicas.</span></span>  
  
 <span data-ttu-id="a4b42-114">Exécutez CREATE AVAILABILITY GROUP sur l'instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] que vous voulez utiliser pour héberger le réplica principal initial de votre nouveau groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="a4b42-114">Execute CREATE AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that you want to host the initial primary replica of your new availability group.</span></span> <span data-ttu-id="a4b42-115">Cette instance de serveur doit résider sur un nœud d’un cluster de basculement Windows Server (WSFC) (pour plus d’informations, consultez [conditions préalables requises, restrictions et recommandations pour groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span><span class="sxs-lookup"><span data-stu-id="a4b42-115">This server instance must reside on a node of a Windows Server Failover Cluster (WSFC) (for more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
##  <a name="alter-availability-group"></a><a name="AlterAG"></a><span data-ttu-id="a4b42-116">ALTER AVAILABILITY GROUP</span><span class="sxs-lookup"><span data-stu-id="a4b42-116">ALTER AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="a4b42-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) prend en charge la modification d’un groupe de disponibilité ou d’un écouteur de groupe de disponibilité existant, ainsi que le basculement d’un groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="a4b42-117">[ALTER AVAILABILITY GROUP](/sql/t-sql/statements/alter-availability-group-transact-sql) supports changing an existing availability group or availability group listener and for failing over an availability group.</span></span>  
  
 <span data-ttu-id="a4b42-118">Exécutez ALTER AVAILABILITY GROUP sur l'instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] qui héberge le réplica principal actuel.</span><span class="sxs-lookup"><span data-stu-id="a4b42-118">Execute ALTER AVAILABILITY GROUP on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts the current primary replica.</span></span>  
  
##  <a name="alter-database--set-hadr-"></a><a name="AlterDb"></a><span data-ttu-id="a4b42-119">MODIFIER LA BASE DE DONNÉES... DÉFINIR HADR...</span><span class="sxs-lookup"><span data-stu-id="a4b42-119">ALTER DATABASE ... SET HADR ...</span></span>  
 <span data-ttu-id="a4b42-120">Les options de la clause [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) de l’instruction ALTER DATABASE vous permettent de joindre une base de données secondaire au groupe de disponibilité de la base de données primaire correspondante, de supprimer une base de données jointe, d’interrompre la synchronisation des données sur une base de données jointe et de reprendre la synchronisation des données.</span><span class="sxs-lookup"><span data-stu-id="a4b42-120">The options of the [SET HADR](/sql/t-sql/statements/alter-database-transact-sql-set-hadr) clause of the ALTER DATABASE statement enables you to join a secondary database to the availability group of the corresponding primary database, remove a joined database, and suspend data synchronization on a joined database, and resume data synchronization.</span></span>  
  
##  <a name="drop-availability-group"></a><a name="DropAG"></a><span data-ttu-id="a4b42-121">SUPPRIMER LE GROUPE DE DISPONIBILITÉ</span><span class="sxs-lookup"><span data-stu-id="a4b42-121">DROP AVAILABILITY GROUP</span></span>  
 <span data-ttu-id="a4b42-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) supprime un groupe de disponibilité spécifié et tous ses réplicas.</span><span class="sxs-lookup"><span data-stu-id="a4b42-122">[DROP AVAILABILITY GROUP](/sql/t-sql/statements/drop-availability-group-transact-sql) removes a specified availability group and all of its replicas.</span></span> <span data-ttu-id="a4b42-123">L'instruction DROP AVAILABILITY GROUP peut être exécutée à partir de n'importe quel nœud [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] dans le cluster de basculement WSFC.</span><span class="sxs-lookup"><span data-stu-id="a4b42-123">DROP AVAILABILITY GROUP can be run from any [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] node in the WSFC failover cluster.</span></span>  
  
##  <a name="restrictions-on-the-availability-group-transact-sql-statements"></a><a name="Restrictions"></a><span data-ttu-id="a4b42-124">Restrictions sur les instructions Transact-SQL de groupe de disponibilité</span><span class="sxs-lookup"><span data-stu-id="a4b42-124">Restrictions on the AVAILABILITY GROUP Transact-SQL Statements</span></span>  
 <span data-ttu-id="a4b42-125">Les instructions [!INCLUDE[tsql](../../../includes/tsql-md.md)] CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP et DROP AVAILABILITY GROUP ont les limitations suivantes :</span><span class="sxs-lookup"><span data-stu-id="a4b42-125">The CREATE AVAILABILITY GROUP, ALTER AVAILABILITY GROUP, and DROP AVAILABILITY GROUP [!INCLUDE[tsql](../../../includes/tsql-md.md)] statements have the following limitations:</span></span>  
  
-   <span data-ttu-id="a4b42-126">À l'exception de DROP AVAILABILITY GROUP, l'exécution de ces instructions requiert que le service HADR soit activé sur l'instance de [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a4b42-126">With the exception of DROP AVAILABILITY GROUP, executing these statements requires that the HADR service is enabled on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="a4b42-127">Pour plus d’informations, consultez [Activer et désactiver les groupes de disponibilité AlwaysOn &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="a4b42-127">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>  
  
-   <span data-ttu-id="a4b42-128">Ces instructions ne peuvent pas être exécutées dans des transactions ou des lots.</span><span class="sxs-lookup"><span data-stu-id="a4b42-128">These statements cannot be executed within transactions or batches.</span></span>  
  
-   <span data-ttu-id="a4b42-129">Même si elles s'efforcent de procéder au nettoyage après une défaillance, ces instructions ne garantissent pas la restauration de toutes les modifications après une défaillance.</span><span class="sxs-lookup"><span data-stu-id="a4b42-129">Though they make a best effort to clean up after a failure, these statements do not guarantee that they will roll back all changes on failure.</span></span> <span data-ttu-id="a4b42-130">Toutefois, les systèmes doivent être en mesure de gérer correctement, puis d'ignorer les défaillances partielles.</span><span class="sxs-lookup"><span data-stu-id="a4b42-130">However, systems should be able cleanly handle and then ignore partial failures.</span></span>  
  
-   <span data-ttu-id="a4b42-131">Ces instructions ne prennent pas en charge les expressions ni les variables.</span><span class="sxs-lookup"><span data-stu-id="a4b42-131">These statements do not support expressions or variables.</span></span>  
  
-   <span data-ttu-id="a4b42-132">Si une instruction [!INCLUDE[tsql](../../../includes/tsql-md.md)] est exécutée alors qu'une autre récupération ou action de groupe de disponibilité est en cours, l'instruction retourne une erreur.</span><span class="sxs-lookup"><span data-stu-id="a4b42-132">If a [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement is executed while another availability group action or recovery is in process, the statement returns an error.</span></span> <span data-ttu-id="a4b42-133">Attendez la fin de l'action ou de la récupération, puis réessayez l'instruction, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="a4b42-133">Wait for the action or recovery to complete, and retry the statement, if necessary.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a4b42-134">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a4b42-134">See Also</span></span>  
 [<span data-ttu-id="a4b42-135">Vue d’ensemble de groupes de disponibilité AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="a4b42-135">Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](overview-of-always-on-availability-groups-sql-server.md)  
  
  
