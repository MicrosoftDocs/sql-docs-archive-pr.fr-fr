---
title: Installer SQL Server avec le partage de fichiers SMB en tant qu’option de stockage | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
ms.assetid: 8b7810b2-637e-46a3-9fe1-d055898ba639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 3d59c2861e2419d76d3dc8e3fc3aaab91bf1e99b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87697119"
---
# <a name="install-sql-server-with-smb-fileshare-as-a-storage-option"></a><span data-ttu-id="6601f-102">Installer SQL Server avec le partage de fichiers SMB en tant qu'option de stockage</span><span class="sxs-lookup"><span data-stu-id="6601f-102">Install SQL Server with SMB Fileshare as a Storage Option</span></span>
  <span data-ttu-id="6601f-103">À compter de [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], les bases de données système (Master, Model, MSDB et TempDB) et les bases de données utilisateur du [!INCLUDE[ssDE](../../includes/ssde-md.md)] peuvent être installées avec le serveur de fichiers SMB (Server Message Block) comme option de stockage.</span><span class="sxs-lookup"><span data-stu-id="6601f-103">Starting [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], system databases (Master, Model, MSDB, and TempDB), and [!INCLUDE[ssDE](../../includes/ssde-md.md)] user databases can be installed with Server Message Block (SMB) file server as a storage option.</span></span> <span data-ttu-id="6601f-104">Cela s'applique à la fois aux installations autonomes [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et aux installations de cluster de basculement (FCI) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6601f-104">This applies to both [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] stand-alone and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster installations (FCI).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6601f-105">Le flux de fichier n'est pas pris en charge actuellement sur un partage de fichiers SMB.</span><span class="sxs-lookup"><span data-stu-id="6601f-105">Filestream is currently not supported on an SMB file share.</span></span>  
  
## <a name="installation-considerations"></a><span data-ttu-id="6601f-106">Considérations relatives à l'installation</span><span class="sxs-lookup"><span data-stu-id="6601f-106">Installation Considerations</span></span>  
  
### <a name="smb-file-share-formats"></a><span data-ttu-id="6601f-107">Formats de partage de fichiers SMB :</span><span class="sxs-lookup"><span data-stu-id="6601f-107">SMB File share Formats:</span></span>  
 <span data-ttu-id="6601f-108">Lors de la spécification du partage de fichiers SMB, ce qui suit correspond à des formats de chemin d'accès UNC (Universal Naming Convention) pris en charge pour les bases de données autonomes et FCI :</span><span class="sxs-lookup"><span data-stu-id="6601f-108">While specifying the SMB file share, the following are supported Universal Naming Convention (UNC) Path formats for standalone and FCI databases:</span></span>  
  
-   <span data-ttu-id="6601f-109">\\\NomServeur\NomPartage</span><span class="sxs-lookup"><span data-stu-id="6601f-109">\\\ServerName\ShareName</span></span>\  
  
-   <span data-ttu-id="6601f-110">\\\NomServeur\NomPartage</span><span class="sxs-lookup"><span data-stu-id="6601f-110">\\\ServerName\ShareName</span></span>  
  
 <span data-ttu-id="6601f-111">Pour plus d’informations sur la Convention d’affectation de noms universelle, consultez [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) ( https://go.microsoft.com/fwlink/?LinkId=245534) .</span><span class="sxs-lookup"><span data-stu-id="6601f-111">For more information about Universal Naming Convention, see [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) (https://go.microsoft.com/fwlink/?LinkId=245534).</span></span>  
  
 <span data-ttu-id="6601f-112">Le chemin d'accès UNC de bouclage (chemin d'accès UNC dont le nom du serveur est localhost, 127.0.0.1 ou le nom d'ordinateur local) n'est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6601f-112">The loopback UNC path (a UNC path whose server name is localhost, 127.0.0.1, or the local machine name) is not supported.</span></span> <span data-ttu-id="6601f-113">Exemple de cas particulier : [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] utilisant le cluster du serveur de fichiers qui est hébergé sur le même nœud sur lequel [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est en cours d'exécution n'est pas non plus pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6601f-113">As a special case, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using File Server Cluster which is hosted on the same node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running is also not supported.</span></span> <span data-ttu-id="6601f-114">Pour éviter cette situation, il est recommandé de créer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et un cluster de serveur de fichiers sur des clusters Windows distincts.</span><span class="sxs-lookup"><span data-stu-id="6601f-114">To prevent this situation, it is recommended that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and File Server Cluster to be created on separated Windows Clusters.</span></span>  
  
 <span data-ttu-id="6601f-115">Les formats de chemin UNC ci-dessous ne sont pas pris en charge :</span><span class="sxs-lookup"><span data-stu-id="6601f-115">The below UNC path formats are not supported:</span></span>  
  
-   <span data-ttu-id="6601f-116">Chemin de bouclage, par exemple \\\localhost\\..\ ou \\\127.0.0.1\\...</span><span class="sxs-lookup"><span data-stu-id="6601f-116">Loopback path, e.g., \\\localhost\\..\ or \\\127.0.0.1\\...</span></span>\  
  
-   <span data-ttu-id="6601f-117">Partages administratifs, par exemple, \\\nom_serveur\x$</span><span class="sxs-lookup"><span data-stu-id="6601f-117">Administrative shares, e.g., \\\servername\x$</span></span>  
  
-   <span data-ttu-id="6601f-118">Autres formats de chemin UNC tels que \\\\?\x:</span><span class="sxs-lookup"><span data-stu-id="6601f-118">Other UNC path formats like \\\\?\x:</span></span>\  
  
-   <span data-ttu-id="6601f-119">Lecteurs réseau mappés.</span><span class="sxs-lookup"><span data-stu-id="6601f-119">Mapped network drives.</span></span>  
  
### <a name="supported-data-definition-language-ddl-statements"></a><span data-ttu-id="6601f-120">Instructions DDL (Data Definition Language) prises en charge</span><span class="sxs-lookup"><span data-stu-id="6601f-120">Supported Data Definition Language (DDL) statements</span></span>  
 <span data-ttu-id="6601f-121">Les instructions [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL et les procédures stockées du moteur de base de données suivantes prennent en charge les partages de fichiers SMB :</span><span class="sxs-lookup"><span data-stu-id="6601f-121">The following [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements and database engine stored procedures support SMB file shares:</span></span>  
  
1.  [<span data-ttu-id="6601f-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6601f-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
2.  [<span data-ttu-id="6601f-123">ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6601f-123">ALTER DATABASE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql)  
  
3.  [<span data-ttu-id="6601f-124">RESTORE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6601f-124">RESTORE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-transact-sql)  
  
4.  [<span data-ttu-id="6601f-125">BACKUP &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6601f-125">BACKUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/backup-transact-sql)  
  
5.  [<span data-ttu-id="6601f-126">sp_attach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6601f-126">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
6.  [<span data-ttu-id="6601f-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="6601f-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
### <a name="installation-options"></a><span data-ttu-id="6601f-128">Options d'installation</span><span class="sxs-lookup"><span data-stu-id="6601f-128">Installation options</span></span>  
  
-   <span data-ttu-id="6601f-129">Dans la page « Configuration du moteur de base de données » de l’interface utilisateur de l’installation, sous l’onglet « Répertoires de données », affectez au paramètre « Répertoire de données racine » la valeur « \\\fileserver1\share1\" ».</span><span class="sxs-lookup"><span data-stu-id="6601f-129">In setup UI "Database Engine Configuration" page, "Data Directories" tab, set the parameter "Data root directory as "\\\fileserver1\share1\".</span></span>  
  
-   <span data-ttu-id="6601f-130">Dans l’installation à partir de l’invite de commandes, affectez à « /INSTALLSQLDATADIR » la valeur « \\\fileserver1\share1\" ».</span><span class="sxs-lookup"><span data-stu-id="6601f-130">In command prompt installation, specify the "/INSTALLSQLDATADIR" as "\\\fileserver1\share1\".</span></span>  
  
     <span data-ttu-id="6601f-131">Voici l'exemple de syntaxe qui permet d'installer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sur un serveur autonome à l'aide de l'option de partage de fichiers SMB :</span><span class="sxs-lookup"><span data-stu-id="6601f-131">Here is the sample syntax to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on a Standalone server using SMB file share option:</span></span>  
  
    ```  
    Setup.exe /q /ACTION=Install /FEATURES=SQL /INSTANCENAME=MSSQLSERVER /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="<StrongPassword>" /SQLSYSADMINACCOUNTS="<DomainName\UserName>" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="<StrongPassword>" /INSTALLSQLDATADIR="\\FileServer\Share1\" /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="6601f-132">Pour installer une instance du cluster de basculement [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] à nœud unique avec l'instance par défaut du [!INCLUDE[ssDE](../../includes/ssde-md.md)] et d' [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="6601f-132">To install a single-node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance with the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], default instance:</span></span>  
  
    ```  
    setup.exe /q /ACTION=InstallFailoverCluster /InstanceName=MSSQLSERVER /INDICATEPROGRESS /ASSYSADMINACCOUNTS="<DomainName\UserName>" /ASDATADIR=<Drive>:\OLAP\Data /ASLOGDIR=<Drive>:\OLAP\Log /ASBACKUPDIR=<Drive>:\OLAP\Backup /ASCONFIGDIR=<Drive>:\OLAP\Config /ASTEMPDIR=<Drive>:\OLAP\Temp /FAILOVERCLUSTERDISKS="<Cluster Disk Resource Name - for example, 'Disk S:'" /FAILOVERCLUSTERNETWORKNAME="<Insert Network Name>" /FAILOVERCLUSTERIPADDRESSES="IPv4;xx.xxx.xx.xx;Cluster Network;xxx.xxx.xxx.x" /FAILOVERCLUSTERGROUP="MSSQLSERVER" /Features=AS,SQL /ASSVCACCOUNT="<DomainName\UserName>" /ASSVCPASSWORD="xxxxxxxxxxx" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="xxxxxxxxxxx" /INSTALLSQLDATADIR="\\FileServer\Share1\" /SQLCOLLATION="SQL_Latin1_General_CP1_CS_AS" /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="xxxxxxxxxxx" /SQLSYSADMINACCOUNTS="<DomainName\UserName> /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="6601f-133">Pour plus d’informations sur l’utilisation de diverses options de paramètres de ligne de commande dans [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , consultez [installer SQL Server 2014 à partir de l’invite de commandes](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span><span class="sxs-lookup"><span data-stu-id="6601f-133">For more information about the usage of various command line parameter options in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], see [Install SQL Server 2014 from the Command Prompt](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
## <a name="operating-system-considerations-smb-protocol-vs-ssnoversion"></a><span data-ttu-id="6601f-134">Considérations relatives au système d’exploitation (protocole SMB et [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span><span class="sxs-lookup"><span data-stu-id="6601f-134">Operating System Considerations (SMB Protocol vs. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span></span>  
 <span data-ttu-id="6601f-135">Les différents systèmes d'exploitation Windows disposent de différentes versions du protocole SMB, et la version du protocole SMB est transparente pour [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6601f-135">Different Windows operating systems has different SMB protocol versions, and the SMB protocol version is transparent to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="6601f-136">Vous pouvez connaître les avantages des différentes versions de protocole SMB pour [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6601f-136">You can find the benefits of different SMB protocol versions with respect to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
|<span data-ttu-id="6601f-137">Système d’exploitation</span><span class="sxs-lookup"><span data-stu-id="6601f-137">Operating System</span></span>|<span data-ttu-id="6601f-138">Version de protocole SMB2</span><span class="sxs-lookup"><span data-stu-id="6601f-138">SMB2 protocol version</span></span>|<span data-ttu-id="6601f-139">Avantages de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="6601f-139">Benefits to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|----------------------|---------------------------|-------------------------------------------|  
|[!INCLUDE[firstref_longhorn](../../includes/firstref-longhorn-md.md)] <span data-ttu-id="6601f-140">SP 2</span><span class="sxs-lookup"><span data-stu-id="6601f-140">SP 2</span></span>|<span data-ttu-id="6601f-141">2.0</span><span class="sxs-lookup"><span data-stu-id="6601f-141">2.0</span></span>|<span data-ttu-id="6601f-142">Performances améliorées par rapport aux versions SMB précédentes.</span><span class="sxs-lookup"><span data-stu-id="6601f-142">Improved performance over previous SMB versions.</span></span><br /><br /> <span data-ttu-id="6601f-143">Durabilité, ce qui aide à la récupération lors de problèmes temporaires du réseau.</span><span class="sxs-lookup"><span data-stu-id="6601f-143">Durability, which helps recover from temporary network glitches.</span></span>|  
|[!INCLUDE[winserver2008r2](../../includes/winserver2008r2-md.md)] <span data-ttu-id="6601f-144">SP 1, comprenant Server Core</span><span class="sxs-lookup"><span data-stu-id="6601f-144">SP 1, including Server Core</span></span>|<span data-ttu-id="6601f-145">2.1</span><span class="sxs-lookup"><span data-stu-id="6601f-145">2.1</span></span>|<span data-ttu-id="6601f-146">Prise en charge de MTU volumineuses, ce qui profite aux transferts de données volumineux, par exemple lors d'opérations de sauvegarde et de restauration SQL.</span><span class="sxs-lookup"><span data-stu-id="6601f-146">Support for large MTU, which benefits large data transfers, such as SQL backup and restore.</span></span> <span data-ttu-id="6601f-147">Cette fonction doit être activée par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6601f-147">This capability must be enabled by user.</span></span> <span data-ttu-id="6601f-148">Pour plus d’informations sur l’activation de cette fonction, consultez [Nouveautés du protocole SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319).</span><span class="sxs-lookup"><span data-stu-id="6601f-148">For more details on how to enable this capability, see [What's New in SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319).</span></span><br /><br /> <span data-ttu-id="6601f-149">Améliorations significatives des performances, en particulier pour les charges de travail de style SQL OLTP.</span><span class="sxs-lookup"><span data-stu-id="6601f-149">Significant performance improvements, specifically for SQL OLTP style workloads.</span></span> <span data-ttu-id="6601f-150">Ces améliorations de performances requièrent l'application d'un correctif.</span><span class="sxs-lookup"><span data-stu-id="6601f-150">These performance improvements require applying a hotfix.</span></span> <span data-ttu-id="6601f-151">Pour plus d’informations sur le correctif logiciel, consultez [cet article](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320).</span><span class="sxs-lookup"><span data-stu-id="6601f-151">For more information on the hotfix, see [this](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320).</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)]<span data-ttu-id="6601f-152">, comprenant Server Core</span><span class="sxs-lookup"><span data-stu-id="6601f-152">, including Server Core</span></span>|<span data-ttu-id="6601f-153">3.0</span><span class="sxs-lookup"><span data-stu-id="6601f-153">3.0</span></span>|<span data-ttu-id="6601f-154">Prise en charge du basculement transparent des partages de fichiers ce qui évite tout temps d'arrêt, sans intervention nécessaire de l'administrateur de la base de données SQL ou l'administrateur du serveur de fichiers dans les configurations de cluster de serveurs de fichiers.</span><span class="sxs-lookup"><span data-stu-id="6601f-154">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="6601f-155">Prise en charge d'E/S dans plusieurs interfaces réseau simultanément, ainsi que tolérance à la défaillance de l'interface réseau.</span><span class="sxs-lookup"><span data-stu-id="6601f-155">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure.</span></span><br /><br /> <span data-ttu-id="6601f-156">Prise en charge des interfaces réseau avec fonctions RDMA.</span><span class="sxs-lookup"><span data-stu-id="6601f-156">Support for network interfaces with RDMA capabilities.</span></span><br /><br /> <span data-ttu-id="6601f-157">Pour plus d’informations sur ces fonctionnalités et le protocole SMB, consultez [Vue d’ensemble du protocole SMB](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span><span class="sxs-lookup"><span data-stu-id="6601f-157">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="6601f-158">Prise en charge de Scale Out File Server (SoFS) avec disponibilité continue.</span><span class="sxs-lookup"><span data-stu-id="6601f-158">Support for Scale Out File Server (SoFS) with continuous availability.</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)] <span data-ttu-id="6601f-159">R2, comprenant Server Core</span><span class="sxs-lookup"><span data-stu-id="6601f-159">R2, including Server Core</span></span>|<span data-ttu-id="6601f-160">3.2</span><span class="sxs-lookup"><span data-stu-id="6601f-160">3.2</span></span>|<span data-ttu-id="6601f-161">Prise en charge du basculement transparent des partages de fichiers ce qui évite tout temps d'arrêt, sans intervention nécessaire de l'administrateur de la base de données SQL ou l'administrateur du serveur de fichiers dans les configurations de cluster de serveurs de fichiers.</span><span class="sxs-lookup"><span data-stu-id="6601f-161">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="6601f-162">Prise en charge d'E/S dans plusieurs interfaces réseau simultanément, ainsi que tolérance à la défaillance de l'interface réseau, à l'aide de SMB Multichannel.</span><span class="sxs-lookup"><span data-stu-id="6601f-162">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure, using SMB Multichannel.</span></span><br /><br /> <span data-ttu-id="6601f-163">Prise en charge des interfaces réseau avec fonctions RDMA à l'aide de SMB Direct.</span><span class="sxs-lookup"><span data-stu-id="6601f-163">Support for network interfaces with RDMA capabilities using SMB Direct.</span></span><br /><br /> <span data-ttu-id="6601f-164">Pour plus d’informations sur ces fonctionnalités et le protocole SMB, consultez [Vue d’ensemble du protocole SMB](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span><span class="sxs-lookup"><span data-stu-id="6601f-164">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="6601f-165">Prise en charge de Scale Out File Server (SoFS) avec disponibilité continue.</span><span class="sxs-lookup"><span data-stu-id="6601f-165">Support for Scale Out File Server (SoFS) with continuous availability.</span></span><br /><br /> <span data-ttu-id="6601f-166">Optimisé pour les E/S de lecture/écriture de petite taille courantes sur OLTP [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6601f-166">Optimized for small random read/write I/O common to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP.</span></span><br /><br /> <span data-ttu-id="6601f-167">MTU (Maximum Transmission Unit) est activé par défaut, ce qui améliore grandement les performances lors des transferts séquentiels de grande taille comme pour l'entrepôt de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et la sauvegarde et la restauration de base de données.</span><span class="sxs-lookup"><span data-stu-id="6601f-167">Maximum Transmission Unit (MTU) is turned on by default, which significantly enhances performance in large sequential transfers like [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data warehouse and database backup or restore.</span></span>|  
  
## <a name="security-considerations"></a><span data-ttu-id="6601f-168">Considérations relatives à la sécurité</span><span class="sxs-lookup"><span data-stu-id="6601f-168">Security Considerations</span></span>  
  
-   <span data-ttu-id="6601f-169">Le compte de service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et le compte de service de l'agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] doivent disposer des autorisations de partage FULL CONTROL et des autorisations NTFS sur les dossiers de partage SMB.</span><span class="sxs-lookup"><span data-stu-id="6601f-169">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] agent service account should have FULL CONTROL share permissions and NTFS permissions on the SMB share folders.</span></span> <span data-ttu-id="6601f-170">Le compte de service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] peut être un compte de domaine ou un compte système si un serveur de fichiers SMB est utilisé.</span><span class="sxs-lookup"><span data-stu-id="6601f-170">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account can be a domain account or a system account if an SMB file server is used.</span></span> <span data-ttu-id="6601f-171">Pour plus d’informations sur les autorisations de partage et NTFS, consultez [Autorisations de partage et NTFS sur un serveur de fichiers](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535).</span><span class="sxs-lookup"><span data-stu-id="6601f-171">For more information about share and NTFS permissions, see [Share and NTFS Permissions on a File Server](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6601f-172">Les autorisations de partage FULL CONTROL et les autorisations NTFS sur les dossiers de partage SMB doivent être limitées : au compte de service de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , au compte de service de l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] et aux utilisateurs Windows avec des rôles de serveur admin.</span><span class="sxs-lookup"><span data-stu-id="6601f-172">The FULL CONTROL share permissions and NTFS permissions on the SMB share folders should be restricted to: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account and windows users with admin server roles.</span></span>  
  
     <span data-ttu-id="6601f-173">Il est recommandé d'utiliser le compte de domaine en tant que compte de service [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6601f-173">It is recommended to use domain account as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account.</span></span> <span data-ttu-id="6601f-174">Si le compte système est utilisé comme compte de service, accordez les autorisations pour le compte d’ordinateur au format suivant : _<domain_name>_ **\\** _<computer_name _>**$** .</span><span class="sxs-lookup"><span data-stu-id="6601f-174">If system account is used as a service account, grant the permissions for the machine account in the format: _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
    > [!NOTE]  
    >  -   <span data-ttu-id="6601f-175">Pendant l'installation de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], vous devez spécifier le compte de domaine en tant que compte de service si le partage de fichiers SMB est indiqué comme option de stockage.</span><span class="sxs-lookup"><span data-stu-id="6601f-175">During [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup, it is required to specify domain account as a service account if SMB file share is specified as a storage option.</span></span> <span data-ttu-id="6601f-176">Avec le partage de fichiers SMB, le compte système peut être spécifié comme compte de service après l'installation de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6601f-176">With SMB file share, System account can only be specified as a service account post [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span>  
    > -   <span data-ttu-id="6601f-177">Les comptes virtuels ne peuvent pas être authentifiés sur un emplacement distant.</span><span class="sxs-lookup"><span data-stu-id="6601f-177">Virtual accounts cannot be authenticated to a remote location.</span></span> <span data-ttu-id="6601f-178">Tous les comptes virtuels utilisent l'autorisation de compte d'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="6601f-178">All virtual accounts use the permission of machine account.</span></span> <span data-ttu-id="6601f-179">Configurez le compte d’ordinateur au format _<nom_domaine>_ **\\** _<nom_ordinateur>_ **$** .</span><span class="sxs-lookup"><span data-stu-id="6601f-179">Provision the machine account in the format _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
-   <span data-ttu-id="6601f-180">Le compte utilisé pour installer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] doit avoir des autorisations FULL CONTROL sur le dossier de partage de fichiers SMB utilisé comme répertoire de données, ou tous les autres dossiers de données (répertoire de base de données utilisateur, répertoire du journal de la base de données utilisateur, répertoire TempDB, répertoire du journal TempDB, répertoire de sauvegarde) pendant la configuration des clusters.</span><span class="sxs-lookup"><span data-stu-id="6601f-180">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should have FULL CONTROL permissions on the SMB file share folder used as the data directory, or any other data folders (User database directory, user database log directory, TempDB directory, TempDB log directory, backup directory) during Cluster Setup.</span></span>  
  
-   <span data-ttu-id="6601f-181">Des privilèges SeSecurityPrivilege sur le serveur de fichiers SMB doivent être accordés au compte utilisé pour installer [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6601f-181">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should be granted SeSecurityPrivilege privileges on the SMB file server.</span></span> <span data-ttu-id="6601f-182">Pour accorder ce privilège, utilisez la console de stratégie de sécurité locale sur le serveur de fichiers pour ajouter le compte utilisé pour l'installation de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] à la stratégie Gérer le journal d'audit et de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="6601f-182">To grant this privilege, use the Local Security Policy console on the file server to add the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup account to the Manage auditing and security log policy.</span></span> <span data-ttu-id="6601f-183">Ce paramètre est disponible dans la section Attribution des droits utilisateur sous Stratégies locales dans la console Stratégie de sécurité locale.</span><span class="sxs-lookup"><span data-stu-id="6601f-183">This setting is available in the User Rights Assignments section under Local Policies in the Local Security Policy console.</span></span>  
  
## <a name="known-issues"></a><span data-ttu-id="6601f-184">Problèmes connus</span><span class="sxs-lookup"><span data-stu-id="6601f-184">Known Issues</span></span>  
  
-   <span data-ttu-id="6601f-185">Après avoir détaché une base de données [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] qui réside sur le stockage attaché au réseau, vous pouvez rencontrer un problème d'autorisations sur la base de données lorsque vous essaierez de lier à nouveau la base de données [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="6601f-185">After you detach a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database that resides on network-attached storage, you might run into database permission issue while trying to reattach the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="6601f-186">Le problème est décrit dans [cet article de la Base de connaissances](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321).</span><span class="sxs-lookup"><span data-stu-id="6601f-186">The issue is defined in [this KB article](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321).</span></span> <span data-ttu-id="6601f-187">Pour le contourner, consultez la section **Plus d'informations** dans l'article de la Base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="6601f-187">To work around this issue, see the **More Information** section in the KB article.</span></span>  
  
-   <span data-ttu-id="6601f-188">Certains tiers, tels que NetApp, ne gèrent pas tous les appels d'API SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6601f-188">Some third parties, like NetApp device do not support all SQL Server API calls.</span></span> <span data-ttu-id="6601f-189">Ces éléments peuvent être les suivants :</span><span class="sxs-lookup"><span data-stu-id="6601f-189">With these you might get:</span></span>   
    <span data-ttu-id="6601f-190">2015-06-04 13:14:19.97 spid9s erreur : 17053, gravité : 16, État : 1.</span><span class="sxs-lookup"><span data-stu-id="6601f-190">2015-06-04 13:14:19.97 spid9s      Error: 17053, Severity: 16, State: 1.</span></span>  
    <span data-ttu-id="6601f-191">2015-06-04 13:14:19.97 spid9s DoDevIoCtlOut () GetOverlappedResult () : erreur du système d’exploitation 1 (fonction incorrecte.) rencontrée.</span><span class="sxs-lookup"><span data-stu-id="6601f-191">2015-06-04 13:14:19.97 spid9s      DoDevIoCtlOut() GetOverlappedResult() : Operating system error 1(Incorrect function.) encountered.</span></span>  
  
     <span data-ttu-id="6601f-192">Pour NTFS, l'erreur est sans conséquence.</span><span class="sxs-lookup"><span data-stu-id="6601f-192">For NTFS, the error is harmless.</span></span>  <span data-ttu-id="6601f-193">Par contre, pour ReFS, elle peut entraîner une dégradation significative des performances.</span><span class="sxs-lookup"><span data-stu-id="6601f-193">but for ReFS, it can lead to significant performance degradation.</span></span>  
  
-   <span data-ttu-id="6601f-194">Si un partage de fichiers SMB est utilisé comme option de stockage pour une instance cluster de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], par défaut le journal de diagnostic du cluster de basculement [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ne peut pas être écrit dans le partage de fichiers car la DLL Resource de [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ne dispose pas des autorisations de lecture/écriture sur le partage de fichiers.</span><span class="sxs-lookup"><span data-stu-id="6601f-194">If SMB file share is used as a storage option for a clustered instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], by default the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Failover Cluster Diagnostics Log cannot be written to the file share because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource DLL lacks the read/write permission on the file share.</span></span> <span data-ttu-id="6601f-195">Pour résoudre ce problème, essayez l'une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="6601f-195">To resolve this issue, try one of the following methods:</span></span>  
  
    1.  <span data-ttu-id="6601f-196">Accordez des autorisations de lecture/écriture sur le partage de fichiers à tous les objets ordinateur dans le cluster.</span><span class="sxs-lookup"><span data-stu-id="6601f-196">Grant read/write permissions on the file share to all computer objects in the cluster.</span></span>  
  
    2.  <span data-ttu-id="6601f-197">Définissez l'emplacement des journaux de diagnostics dans un chemin d'accès local.</span><span class="sxs-lookup"><span data-stu-id="6601f-197">Set the location of the diagnostic logs to a local file path.</span></span> <span data-ttu-id="6601f-198">Voir l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="6601f-198">See the following example:</span></span>  
  
        ```sql  
        ALTER SERVER CONFIGURATION  
        SET DIAGNOSTICS LOG PATH = 'C:\logs';  
        ```  
  
## <a name="see-also"></a><span data-ttu-id="6601f-199">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6601f-199">See Also</span></span>  
 <span data-ttu-id="6601f-200">[Planification d'une installation SQL Server](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span><span class="sxs-lookup"><span data-stu-id="6601f-200">[Planning a SQL Server Installation](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span></span>  
 <span data-ttu-id="6601f-201">[Rubriques de procédures relatives à l’installation](../../../2014/sql-server/install/installation-how-to-topics.md) </span><span class="sxs-lookup"><span data-stu-id="6601f-201">[Installation How-to Topics](../../../2014/sql-server/install/installation-how-to-topics.md) </span></span>  
 [<span data-ttu-id="6601f-202">Configurer les comptes de service Windows et les autorisations</span><span class="sxs-lookup"><span data-stu-id="6601f-202">Configure Windows Service Accounts and Permissions</span></span>](../configure-windows/configure-windows-service-accounts-and-permissions.md)  
  
  
