---
title: Moniteur de mise en miroir de bases de données (Page Avertissements) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e7afc4ff0e6b69c70535ef39677f3d834edbee15
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87709939"
---
# <a name="database-mirroring-monitor-warnings-page"></a><span data-ttu-id="49c9b-102">Moniteur de mise en miroir de bases de données (Page Avertissements)</span><span class="sxs-lookup"><span data-stu-id="49c9b-102">Database Mirroring Monitor (Warnings Page)</span></span>
  <span data-ttu-id="49c9b-103">Affiche une liste, accessible en lecture seule, d'avertissements pris en charge lors d'événements de mise en miroir de bases de données, ainsi que les valeurs de seuil spécifiées pour les avertissements, si disponible.</span><span class="sxs-lookup"><span data-stu-id="49c9b-103">Displays a read-only list of warnings supported on database mirroring events and the specified warning threshold values, if available.</span></span>  
  
 <span data-ttu-id="49c9b-104">**Pour utiliser SQL Server Management Studio pour contrôler la mise en miroir de base de données**</span><span class="sxs-lookup"><span data-stu-id="49c9b-104">**To use SQL Server Management Studio to monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="49c9b-105">Démarrer le moniteur de mise en miroir de bases de données &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="49c9b-105">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a><span data-ttu-id="49c9b-106">Colonnes</span><span class="sxs-lookup"><span data-stu-id="49c9b-106">Columns</span></span>  
 <span data-ttu-id="49c9b-107">**Avertissement**</span><span class="sxs-lookup"><span data-stu-id="49c9b-107">**Warning**</span></span>  
 <span data-ttu-id="49c9b-108">Les avertissements pour lesquels vous pouvez définir un seuil sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="49c9b-108">The warnings for which you can define a threshold include:</span></span>  
  
|<span data-ttu-id="49c9b-109">Avertissement</span><span class="sxs-lookup"><span data-stu-id="49c9b-109">Warning</span></span>|<span data-ttu-id="49c9b-110">Seuil</span><span class="sxs-lookup"><span data-stu-id="49c9b-110">Threshold</span></span>|  
|-------------|---------------|  
|<span data-ttu-id="49c9b-111">**Avertir si le journal non envoyé dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-111">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-112">Spécifie le nombre de kilo-octets (Ko) de journal non envoyé qui génère un avertissement sur l'instance de serveur principal.</span><span class="sxs-lookup"><span data-stu-id="49c9b-112">Specifies how many kilobytes (KB) of unsent log will generate a warning on the principal server instance.</span></span> <span data-ttu-id="49c9b-113">Cet avertissement permet de mesurer le risque de perte de données en termes de Ko et s'avère particulièrement approprié en mode hautes performances.</span><span class="sxs-lookup"><span data-stu-id="49c9b-113">This warning helps measure the potential for data loss in terms of KB, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="49c9b-114">Toutefois, l'avertissement est également approprié en mode haute sécurité lorsque la mise en miroir est interrompue ou suspendue en raison de la déconnexion des partenaires.</span><span class="sxs-lookup"><span data-stu-id="49c9b-114">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="49c9b-115">**Avertir si le journal non restauré dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-115">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-116">Spécifie le nombre de kilo-octets (Ko) de journal non restauré qui génère un avertissement sur l'instance de serveur miroir.</span><span class="sxs-lookup"><span data-stu-id="49c9b-116">Specifies how many KB of unrestored log will generate a warning on the mirror server instance.</span></span> <span data-ttu-id="49c9b-117">Cet avertissement permet de mesurer le temps de basculement en kilo-octets.</span><span class="sxs-lookup"><span data-stu-id="49c9b-117">This warning is useful for measuring failover time in terms of kilobytes.</span></span> <span data-ttu-id="49c9b-118">Le*temps de basculement* est principalement constitué du temps nécessaire à l'ancien serveur miroir pour restaurer par progression tout journal demeuré dans sa file d'attente de restauration par progression et d'un court laps de temps supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="49c9b-118">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="49c9b-119">Remarque : Pour un basculement automatique, le temps nécessaire au système pour remarquer l'erreur dépend du temps de basculement.</span><span class="sxs-lookup"><span data-stu-id="49c9b-119">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="49c9b-120">Pour en savoir plus, voir [Estimer l’interruption de service au cours d’un basculement de rôle &#40;mise en miroir de bases de données&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="49c9b-120">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|  
|<span data-ttu-id="49c9b-121">**Avertir si la durée de vie de la plus ancienne transaction non envoyée dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-121">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-122">Spécifie le nombre de minutes de transactions pouvant s'accumuler dans la file d'attente d'envoi avant qu'un avertissement ne soit généré sur l'instance de serveur principal.</span><span class="sxs-lookup"><span data-stu-id="49c9b-122">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="49c9b-123">Cet avertissement permet de mesurer le risque de perte de données en termes de durée et s'avère particulièrement approprié en mode hautes performances.</span><span class="sxs-lookup"><span data-stu-id="49c9b-123">This warning helps measure the potential for data loss in terms of time, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="49c9b-124">Toutefois, l'avertissement est également approprié en mode haute sécurité lorsque la mise en miroir est interrompue ou suspendue en raison de la déconnexion des partenaires.</span><span class="sxs-lookup"><span data-stu-id="49c9b-124">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="49c9b-125">**Avertir si le temps de traitement de validation de miroir dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-125">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-126">Spécifie, en millisecondes, le délai moyen par transaction au terme duquel un avertissement est généré sur le serveur principal.</span><span class="sxs-lookup"><span data-stu-id="49c9b-126">Specifies the number of milliseconds of average delay per transaction tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="49c9b-127">Ce délai correspond au temps de traitement pendant lequel l'instance de serveur principal attend que l'instance de serveur miroir écrive l'enregistrement du journal de transaction dans la file d'attente de restauration par progression.</span><span class="sxs-lookup"><span data-stu-id="49c9b-127">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="49c9b-128">Cette valeur est utile uniquement en mode haute sécurité.</span><span class="sxs-lookup"><span data-stu-id="49c9b-128">This value is relevant only in high-safety mode.</span></span>|  
  
 <span data-ttu-id="49c9b-129">**Seuil à «**   _&lt;instance_serveur_   **»**</span><span class="sxs-lookup"><span data-stu-id="49c9b-129">**Threshold at '** _<server_instance>_ **'**</span></span>  
 <span data-ttu-id="49c9b-130">Pour chaque avertissement, affiche le cas échéant le seuil spécifié par l'utilisateur actuel pour l'une des instances de serveurs.</span><span class="sxs-lookup"><span data-stu-id="49c9b-130">For each of the warnings, displays the current user-specified threshold, if any, for one of the server instances.</span></span> <span data-ttu-id="49c9b-131">Le nom complet de l'instance de serveur est spécifié dans l'en-tête de colonne correspondante.</span><span class="sxs-lookup"><span data-stu-id="49c9b-131">The full instance name of the server instance is indicated in the corresponding column heading.</span></span>  
  
 <span data-ttu-id="49c9b-132">Pour plus d'informations, consultez la section « Remarques » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="49c9b-132">For more information, see "Remarks," later in this topic.</span></span>  
  
 <span data-ttu-id="49c9b-133">**Définir les seuils**</span><span class="sxs-lookup"><span data-stu-id="49c9b-133">**Set Thresholds**</span></span>  
 <span data-ttu-id="49c9b-134">Cliquez sur ce bouton pour définir un seuil par avertissement sur chaque partenaire de basculement.</span><span class="sxs-lookup"><span data-stu-id="49c9b-134">Click this button to set a threshold for one warning on each of the failover partners.</span></span>  
  
 <span data-ttu-id="49c9b-135">Pour plus d'informations, consultez la section « Remarques » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="49c9b-135">For more information, see "Remarks," later in this topic.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="49c9b-136">Notes</span><span class="sxs-lookup"><span data-stu-id="49c9b-136">Remarks</span></span>  
 <span data-ttu-id="49c9b-137">Si aucune information n’est actuellement disponible pour une instance de serveur, le texte affiché dans les cellules de la colonne **Seuil à** correspondante apparaît en filigrane sur un fond gris.</span><span class="sxs-lookup"><span data-stu-id="49c9b-137">If information is currently unavailable for a server instance, the cells of the corresponding **Threshold at** column display a gray background and watermark text.</span></span> <span data-ttu-id="49c9b-138">Si le moniteur n’est pas connecté à l’instance de serveur, chaque cellule de la grille affiche le texte **Non connecté à** _<NOM_SYSTÈME>_ ou **Non connecté à** _<NOM_SYSTÈME>_ **\\** _<nom_instance>_ , selon qu’il s’agit de l’instance par défaut ou d’une instance nommée.</span><span class="sxs-lookup"><span data-stu-id="49c9b-138">If the monitor is not connected to the server instance, in every cell the grid displays either **Not connected to** _<SYSTEM_NAME>_ or **Not connected to** _<SYSTEM_NAME>_**\\**_<instance_name>_, depending on whether the instance is the default instance or a named instance.</span></span> <span data-ttu-id="49c9b-139">Si le moniteur est en attente de retour d’une requête, chaque cellule de la grille affiche le texte **Attente de données...** .</span><span class="sxs-lookup"><span data-stu-id="49c9b-139">If the monitor is waiting for a query to return, the grid displays **Waiting for data...** in every cell.</span></span>  
  
 <span data-ttu-id="49c9b-140">Quand des informations sont disponibles, la cellule correspondant à chaque avertissement affiche une valeur de seuil spécifique (ainsi qu’une unité de mesure) ou le texte **Non activé**.</span><span class="sxs-lookup"><span data-stu-id="49c9b-140">When information is available, the cell for each warning displays either a specified threshold value (and unit of measurement), or **Not enabled**.</span></span>  
  
 <span data-ttu-id="49c9b-141">Si une valeur de seuil est dépassée au moment de l'actualisation de la table d'état, un événement est consigné dans le journal des événements Windows, lorsque la ligne d'état est enregistrée.</span><span class="sxs-lookup"><span data-stu-id="49c9b-141">If a threshold is exceeded at the time the status table is refreshed, an event is logged to the Windows event log when the status row is recorded.</span></span> <span data-ttu-id="49c9b-142">Par défaut, la ligne d'état est enregistrée toutes les minutes si le moniteur n'est pas en cours d'exécution.</span><span class="sxs-lookup"><span data-stu-id="49c9b-142">By default, the status row is recorded once a minute if the monitor is not running.</span></span> <span data-ttu-id="49c9b-143">Vous pouvez configurer une alerte sur chaque type d'événement consigné en utilisant l'Agent SQL Server ou un autre programme tel que Microsoft Operations Manager (MOM).</span><span class="sxs-lookup"><span data-stu-id="49c9b-143">You can configure an alert on each type of logged event by using the SQL Server Agent or another program, such as Microsoft Management Operations Manager (MOM).</span></span>  
  
 <span data-ttu-id="49c9b-144">Pour un partenaire spécifique, les événements consignés dépendent de son rôle actuel (principal ou miroir).</span><span class="sxs-lookup"><span data-stu-id="49c9b-144">On a given partner, the events logged depend on its current role, principal or mirror.</span></span> <span data-ttu-id="49c9b-145">Cependant, nous vous recommandons de définir un seuil d'avertissement pour un événement spécifique sur les deux partenaires, afin de vous assurer que l'avertissement persiste lors du basculement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="49c9b-145">However, we recommend that you set a warning threshold for a given event on both partners to ensure that the warning persists if the database fails over.</span></span> <span data-ttu-id="49c9b-146">Le seuil approprié pour chaque partenaire dépend des capacités de performance du système du partenaire.</span><span class="sxs-lookup"><span data-stu-id="49c9b-146">The appropriate threshold for each partner depends on the performance capabilities of that partner's system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="49c9b-147">Vous pouvez également utiliser la procédure stockée système **sp_dbmmonitorchangealert** pour configurer des seuils pour les événements équivalents (journal non envoyé, journal non restauré, transaction non envoyée la plus ancienne et temps de traitement de validation de miroir).</span><span class="sxs-lookup"><span data-stu-id="49c9b-147">You can also use the **sp_dbmmonitorchangealert** system stored procedure to configure thresholds for the equivalent events-unsent log, unrecovered log, oldest unsent transaction, and mirror commit overhead.</span></span> <span data-ttu-id="49c9b-148">Pour plus d’informations, consultez [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="49c9b-148">For more information, see [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span></span>  
  
 <span data-ttu-id="49c9b-149">Le tableau suivant affiche l'ID de l'événement associé à chaque avertissement.</span><span class="sxs-lookup"><span data-stu-id="49c9b-149">The following table shows the event ID associated with each warning.</span></span>  
  
|<span data-ttu-id="49c9b-150">Avertissement du moniteur de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="49c9b-150">Database Mirroring Monitor warning</span></span>|<span data-ttu-id="49c9b-151">Nom d'événement</span><span class="sxs-lookup"><span data-stu-id="49c9b-151">Event name</span></span>|<span data-ttu-id="49c9b-152">ID de l’événement</span><span class="sxs-lookup"><span data-stu-id="49c9b-152">Event ID</span></span>|  
|----------------------------------------|----------------|--------------|  
|<span data-ttu-id="49c9b-153">**Avertir si le journal non envoyé dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-153">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-154">Journal non envoyé</span><span class="sxs-lookup"><span data-stu-id="49c9b-154">Unsent log</span></span>|<span data-ttu-id="49c9b-155">32042</span><span class="sxs-lookup"><span data-stu-id="49c9b-155">32042</span></span>|  
|<span data-ttu-id="49c9b-156">**Avertir si le journal non restauré dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-156">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-157">Journal non restauré</span><span class="sxs-lookup"><span data-stu-id="49c9b-157">Unrestored log</span></span>|<span data-ttu-id="49c9b-158">32043</span><span class="sxs-lookup"><span data-stu-id="49c9b-158">32043</span></span>|  
|<span data-ttu-id="49c9b-159">**Avertir si la durée de vie de la plus ancienne transaction non envoyée dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-159">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-160">Transaction non envoyée la plus ancienne</span><span class="sxs-lookup"><span data-stu-id="49c9b-160">Oldest unsent transaction</span></span>|<span data-ttu-id="49c9b-161">32044</span><span class="sxs-lookup"><span data-stu-id="49c9b-161">32044</span></span>|  
|<span data-ttu-id="49c9b-162">**Avertir si le temps de traitement de validation de miroir dépasse le seuil**</span><span class="sxs-lookup"><span data-stu-id="49c9b-162">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="49c9b-163">Charge de validation par le serveur miroir</span><span class="sxs-lookup"><span data-stu-id="49c9b-163">Mirror commit overhead</span></span>|<span data-ttu-id="49c9b-164">32045</span><span class="sxs-lookup"><span data-stu-id="49c9b-164">32045</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="49c9b-165">Autorisations</span><span class="sxs-lookup"><span data-stu-id="49c9b-165">Permissions</span></span>  
 <span data-ttu-id="49c9b-166">Pour un accès complet, nécessite l’appartenance au rôle serveur fixe **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="49c9b-166">For full access, requires membership in the **sysadmin** fixed server role.</span></span> <span data-ttu-id="49c9b-167">Seuls les membres de **sysadmin** peuvent configurer et afficher des seuils d’avertissement pour les mesures de performances clés.</span><span class="sxs-lookup"><span data-stu-id="49c9b-167">Only members of **sysadmin** can configure and view warning thresholds for key performance metrics.</span></span>  
  
 <span data-ttu-id="49c9b-168">L’appartenance au rôle **dbm_monitor** vous permet de consulter uniquement la ligne d’état la plus récente dans la page **Avertissements** .</span><span class="sxs-lookup"><span data-stu-id="49c9b-168">Membership in the **dbm_monitor** role enables you to view only the most recent status row on the **Warnings** Page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="49c9b-169">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="49c9b-169">See Also</span></span>  
 <span data-ttu-id="49c9b-170">[Démarrer le moniteur de mise en miroir de bases de données &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="49c9b-170">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="49c9b-171">[Surveillance de la mise en miroir de bases de données &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="49c9b-171">[Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="49c9b-172">Démarrer l’Assistant Configuration de la sécurité de mise en miroir de bases de données &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="49c9b-172">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
