---
title: Surveillance de la mise en miroir de bases de données (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- monitoring [SQL Server], database mirroring
- database mirroring [SQL Server], monitoring
ms.assetid: a7b1b9b0-7c19-4acc-9de3-3a7c5e70694d
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 92179abd47df2ee40b48be8eade7ea3e7b9267af
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701862"
---
# <a name="monitoring-database-mirroring-sql-server"></a><span data-ttu-id="80e4f-102">Surveillance de la mise en miroir de bases de données (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="80e4f-102">Monitoring Database Mirroring (SQL Server)</span></span>
  <span data-ttu-id="80e4f-103">Cette section présente le moniteur de mise en miroir de bases de données et les procédures stockées système **sp_dbmmonitor** ; par ailleurs, elle décrit le fonctionnement de la surveillance de la mise en miroir de bases de données (ainsi que du **travail du moniteur de mise en miroir de bases de données)** et récapitule les informations que vous pouvez surveiller en matière de sessions de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-103">This section introduces Database Mirroring Monitor and the **sp_dbmmonitor** system stored procedures, explains how database mirroring monitoring works (including the **Database Mirroring Monitor Job)**, and summarizes the information that you can monitor about database mirroring sessions.</span></span> <span data-ttu-id="80e4f-104">De plus, cette section explique comment définir des seuils d'avertissement pour un jeu d'événements de mise en miroir de bases de données prédéfinis et comment configurer des alertes pour des événements de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-104">Additionally, this section introduces how to define warning thresholds for a set of predefined database mirroring events and how to set up alerts on any database mirroring event.</span></span>  
  
 <span data-ttu-id="80e4f-105">Vous pouvez surveiller une base de données mise en miroir durant une session de mise en miroir pour vérifier si le flux des données est correct.</span><span class="sxs-lookup"><span data-stu-id="80e4f-105">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span> <span data-ttu-id="80e4f-106">Pour configurer et gérer la surveillance d’une ou de plusieurs bases de données mises en miroir sur une instance de serveur, vous pouvez utiliser le moniteur de mise en miroir de bases de données ou les procédures stockées système **sp_dbmmonitor** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-106">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **sp_dbmmonitor** system stored procedures.</span></span>  
  
 <span data-ttu-id="80e4f-107">Le travail de surveillance de la mise en miroir de bases de données, **Travail du moniteur de mise en miroir de bases de données**, fonctionne en arrière-plan, indépendamment du moniteur de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-107">A database mirroring monitoring job, **Database Mirroring Monitor Job**, operates in the background, independently of Database Mirroring Monitor.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="80e4f-108">appelle le **Travail du moniteur de mise en miroir de bases de données** à intervalles réguliers, une fois par minute, et le travail appelle une procédure stockée pour mettre à jour l'état de mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-108">Agent calls **Database Mirroring Monitor Job** at regular intervals, the default is once a minute, and the job calls a stored procedure that updates mirroring status.</span></span> <span data-ttu-id="80e4f-109">Si vous utilisez [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] pour démarrer une session de mise en miroir, **Travail du moniteur de mise en miroir de bases de données** est automatiquement créé.</span><span class="sxs-lookup"><span data-stu-id="80e4f-109">If you use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to start a mirroring session, **Database Mirroring Monitor Job** is created automatically.</span></span> <span data-ttu-id="80e4f-110">Toutefois, si vous utilisez uniquement ALTER DATABASE *<nom_base_de_données>* SET PARTNER pour commencer la mise en miroir, vous devez créer le travail en exécutant une procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="80e4f-110">However, if you only use ALTER DATABASE *<database_name>* SET PARTNER to start mirroring, you must create the job by running a stored procedure.</span></span>  
  
 <span data-ttu-id="80e4f-111">**Dans cette rubrique :**</span><span class="sxs-lookup"><span data-stu-id="80e4f-111">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="80e4f-112">Surveillance de l'état de la mise en miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-112">Monitoring Mirroring Status</span></span>](#MonitoringStatus)  
  
-   [<span data-ttu-id="80e4f-113">Sources d'informations supplémentaires concernant une base de données mise en miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-113">Additional Sources of Information About a Mirrored Database</span></span>](#AdditionalSources)  
  
-   [<span data-ttu-id="80e4f-114">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="80e4f-114">Related Tasks</span></span>](#RelatedTasks)  
  
##  <a name="monitoring-mirroring-status"></a><a name="MonitoringStatus"></a> <span data-ttu-id="80e4f-115">Surveillance de l'état de la mise en miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-115">Monitoring Mirroring Status</span></span>  
 <span data-ttu-id="80e4f-116">Pour configurer et gérer le contrôle d'une ou de plusieurs bases de données mises en miroir sur une instance de serveur, vous pouvez utiliser le moniteur de mise en miroir de bases de données ou les procédures stockées système **dbmmonitor** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-116">To set up and manage monitoring for one or more of the mirrored databases on a server instance, you can use either Database Mirroring Monitor or the **dbmmonitor** system stored procedures.</span></span> <span data-ttu-id="80e4f-117">Vous pouvez surveiller une base de données mise en miroir durant une session de mise en miroir pour vérifier si le flux des données est correct.</span><span class="sxs-lookup"><span data-stu-id="80e4f-117">You can monitor a mirrored database during a mirroring session to verify whether and how well data is flowing.</span></span>  
  
 <span data-ttu-id="80e4f-118">Plus précisément, la surveillance d'une base de données mise en miroir vous permet d'effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="80e4f-118">Specifically, monitoring a mirrored database enables you to:</span></span>  
  
-   <span data-ttu-id="80e4f-119">Vérifier que la mise en miroir fonctionne.</span><span class="sxs-lookup"><span data-stu-id="80e4f-119">Verify that mirroring is functioning.</span></span>  
  
     <span data-ttu-id="80e4f-120">L'état de base permet de savoir si les deux instances de serveur sont opérationnelles, de vérifier que les serveurs sont connectés et que le journal est déplacé du principal vers le serveur miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-120">Basic status includes knowing if the two server instances are up, that the servers are connected, and that the log is being moved from the principal to the mirror.</span></span>  
  
-   <span data-ttu-id="80e4f-121">Déterminer si la base de données miroir reste au niveau de la base de données principale.</span><span class="sxs-lookup"><span data-stu-id="80e4f-121">Determine whether the mirror database is keeping up with the principal database.</span></span>  
  
     <span data-ttu-id="80e4f-122">En mode hautes performances, un serveur principal peut accumuler un retard de traitement d'enregistrements de journal non envoyés qui devront quand même être envoyés du serveur principal au serveur miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-122">During high-performance mode, a principal server can develop a backlog of unsent log records that still need to be sent from the principal server to the mirror server.</span></span> <span data-ttu-id="80e4f-123">Qui plus est, dans n'importe quel mode d'opération, le serveur miroir peut accumuler un retard de traitement des enregistrements de journal non restaurés qui ont été écrits dans le fichier journal mais qui doivent quand même être restaurés sur la base de données miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-123">Furthermore, in any operating mode, the mirror server can develop a backlog of unrestored log records that have been written to the log file but still need to be restored on the mirror database.</span></span>  
  
-   <span data-ttu-id="80e4f-124">Déterminer la quantité de données perdues lorsque l'instance du serveur principal n'est plus disponible en mode hautes performances.</span><span class="sxs-lookup"><span data-stu-id="80e4f-124">Determine how much data was lost when the principal server instance becomes unavailable during high-performance mode.</span></span>  
  
     <span data-ttu-id="80e4f-125">Vous pouvez déterminer la perte de données en analysant la proportion d'enregistrements de journal non envoyée (le cas échéant) et le délai de la validation des transactions perdues sur le principal.</span><span class="sxs-lookup"><span data-stu-id="80e4f-125">You can determine data loss by looking at the amount of unsent transaction log (if any) and the time interval in which the lost transactions were committed at the principal.</span></span>  
  
-   <span data-ttu-id="80e4f-126">Comparer les performances actuelles aux performances passées.</span><span class="sxs-lookup"><span data-stu-id="80e4f-126">Compare current performance with past performance.</span></span>  
  
     <span data-ttu-id="80e4f-127">Lorsque des problèmes surviennent, un administrateur de base de données peut consulter l'historique des performances de la mise en miroir pour mieux comprendre l'état actuel.</span><span class="sxs-lookup"><span data-stu-id="80e4f-127">When problems are occurring, a database administrator can view a history of the mirroring performance to help in understanding the current state.</span></span> <span data-ttu-id="80e4f-128">L'examen de l'historique permet à l'utilisateur de détecter des tendances au niveau des performances, d'identifier les causes récurrentes des problèmes de performances (comme les heures de la journée où le réseau est lent ou lorsqu'une importante quantité de commandes est entrée dans le journal).</span><span class="sxs-lookup"><span data-stu-id="80e4f-128">Looking at the history can allow the user to detect trends in performance, identify patterns of performance problems (such as times of day when the network is slow or the number of commands entering the log is very large).</span></span>  
  
-   <span data-ttu-id="80e4f-129">Trouver l'origine du problème de flux de données limité entre les partenaires de la mise en miroir puis résoudre ce problème.</span><span class="sxs-lookup"><span data-stu-id="80e4f-129">Troubleshoot the cause of reduced data flow between mirroring partners.</span></span>  
  
-   <span data-ttu-id="80e4f-130">Définir des seuils d'avertissement pour les mesures de performances clés.</span><span class="sxs-lookup"><span data-stu-id="80e4f-130">Set warning thresholds on key performance metrics.</span></span>  
  
     <span data-ttu-id="80e4f-131">Si une nouvelle ligne d'état contient une valeur qui dépasse un seuil, un événement d'informations est envoyé au journal des événements Windows.</span><span class="sxs-lookup"><span data-stu-id="80e4f-131">If a new status row contains a value that exceeds a threshold, an informational event is sent to the Windows event log.</span></span> <span data-ttu-id="80e4f-132">Un administrateur système peut alors configurer manuellement des alertes reposant sur ces événements.</span><span class="sxs-lookup"><span data-stu-id="80e4f-132">A system administrator can then manually configure alerts based on these events.</span></span> <span data-ttu-id="80e4f-133">Pour plus d’informations, consultez [Utiliser des seuils d’avertissement et d’alertes sur des métriques de performances de mise en miroir &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-133">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
###  <a name="tools-for-monitoring-database-mirroring-status"></a><a name="tools_for_monitoring_dbm_status"></a> <span data-ttu-id="80e4f-134">Outils pour la surveillance de l'état de la mise en miroir de base de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-134">Tools for Monitoring Database Mirroring Status</span></span>  
 <span data-ttu-id="80e4f-135">L’état de la mise en miroir peut être surveillé à l’aide du moniteur de mise en miroir de bases de données ou de la procédure stockée système **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-135">Mirroring status can be monitored using either Database Mirroring Monitor or the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="80e4f-136">Ces outils permettent de surveiller la mise en miroir sur toute base de données mise en miroir sur l’instance de serveur locale par les administrateurs système (c’est-à-dire, les membres du rôle serveur fixe **sysadmin** ) et par l’utilisateur qui a été ajouté au rôle de base de données fixe **dbm_monitor** dans la base de données **msdb** par un administrateur système.</span><span class="sxs-lookup"><span data-stu-id="80e4f-136">These tools can be used to monitor database mirroring on any mirrored database on the local server instance by both System administrators, that is, members of the **sysadmin** fixed server role, and user who have been added to the **dbm_monitor** fixed database role in the **msdb** database by a system administrator.</span></span> <span data-ttu-id="80e4f-137">Lorsqu'un administrateur système utilise ces outils, il peut également actualiser manuellement l'état de la mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-137">When using either tool, a system administrator can also manually refresh mirroring status.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="80e4f-138">Les administrateurs système peuvent également configurer et afficher des seuils d'avertissement pour les mesures de performances clés.</span><span class="sxs-lookup"><span data-stu-id="80e4f-138">System administrators can also configure and view warning thresholds for key performance metrics.</span></span> <span data-ttu-id="80e4f-139">Pour plus d’informations, consultez [Utiliser des seuils d’avertissement et d’alertes sur des métriques de performances de mise en miroir &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-139">For more information, see [Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md).</span></span>  
  
-   <span data-ttu-id="80e4f-140">Moniteur de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-140">Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="80e4f-141">Le moniteur de mise en miroir de bases de données est un outil d'interface utilisateur graphique qui permet aux administrateurs système d'afficher ou de mettre à jour l'état et de configurer des seuils d'avertissement pour plusieurs mesures de performances clés.</span><span class="sxs-lookup"><span data-stu-id="80e4f-141">Database Mirroring Monitor is a graphical user interface tool that enables system administrators to view and update status and to configure warning thresholds on several key performance metrics.</span></span> <span data-ttu-id="80e4f-142">Le moniteur de mise en miroir de bases de données peut également être utilisé par les membres du rôle de base de données fixe **dbm_monitor** pour afficher la ligne la plus récente de la table d’état de la mise en miroir, bien que ces membres ne puissent pas mettre à jour la table d’état.</span><span class="sxs-lookup"><span data-stu-id="80e4f-142">Database Mirroring Monitor can also be used by members of the **dbm_monitor** fixed database role to view the most recent row of the mirroring status table, though they cannot update the status table.</span></span>  
  
     <span data-ttu-id="80e4f-143">Le moniteur affiche l'état, notamment les mesures de performance, pour une base de données sélectionnée dans la page à onglet **État** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-143">The monitor displays the status, including performance metrics, for a selected database on the **Status** tabbed page.</span></span> <span data-ttu-id="80e4f-144">Le contenu de cette page provient des instances du principal et du serveur miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-144">The content of this page comes from both the principal and mirror server instances.</span></span> <span data-ttu-id="80e4f-145">La page est remplie de manière asynchrone au fur et à mesure que l'état est recueilli par le biais de connexions distinctes aux instances du principal et du serveur miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-145">The page is filled asynchronously as status is gathered through separate connections to the principal and mirror server instances.</span></span> <span data-ttu-id="80e4f-146">Le moniteur tente de mettre à jour la table d'état toutes les 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="80e4f-146">The monitor tries to update the status table at 30-second intervals.</span></span> <span data-ttu-id="80e4f-147">La mise à jour est effectuée uniquement si la table n'a pas été mise à jour dans les 15 secondes et si l'utilisateur est membre du rôle de serveur fixe **sysadmin** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-147">The update succeeds only if the table has not been updated within 15 seconds and the user is a member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="80e4f-148">Pour un résumé des informations indiquées dans la page **État** , consultez la section « [Mesures de performances affichées par le moniteur de mise en miroir de bases de données](#perf_metrics_of_dbm_monitor)» plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="80e4f-148">For a summary of the information reported on the **Status** page, see [Status Displayed by the Database Mirroring Monitor](#perf_metrics_of_dbm_monitor), later in this topic.</span></span>  
  
     <span data-ttu-id="80e4f-149">Pour obtenir une présentation de l'interface du moniteur de mise en miroir de bases de données, consultez [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-149">For an introduction to the Database Mirroring Monitor interface, see [Database Mirroring Monitor Overview](database-mirroring-monitor-overview.md).</span></span> <span data-ttu-id="80e4f-150">Pour plus d’informations sur le lancement du moniteur de mise en miroir de bases de données, consultez [Démarrer le moniteur de mise en miroir de bases de données &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-150">For information on launching Database Mirroring Monitor, see [Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="80e4f-151">Procédures stockées système</span><span class="sxs-lookup"><span data-stu-id="80e4f-151">System stored procedures</span></span>  
  
     <span data-ttu-id="80e4f-152">Vous pouvez aussi récupérer ou mettre à jour l’état actuel en exécutant la procédure stockée système **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-152">You can also retrieve or update the current status by running the **sp_dbmmonitorresults** system stored procedure.</span></span> <span data-ttu-id="80e4f-153">D'autres procédures stockées dbmmonitor vous permettent de configurer la mise en miroir, de modifier les paramètres de la mise en miroir, d'afficher la période de mise à jour actuelle et de supprimer la surveillance sur l'instance du serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-153">Other dbmmonitor stored procedures enable you to set up monitoring, change monitoring parameters, view the current update period, and drop monitoring on the server instance.</span></span>  
  
     <span data-ttu-id="80e4f-154">Le tableau suivant introduit les procédures stockées permettant de gérer et d'utiliser la surveillance de la mise en miroir de bases de données indépendamment du Moniteur de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-154">The following table introduces the stored procedures for managing and using database mirroring monitoring independently of the Database Mirroring Monitor.</span></span>  
  
    |<span data-ttu-id="80e4f-155">Procédure</span><span class="sxs-lookup"><span data-stu-id="80e4f-155">Procedure</span></span>|<span data-ttu-id="80e4f-156">Description</span><span class="sxs-lookup"><span data-stu-id="80e4f-156">Description</span></span>|  
    |---------------|-----------------|  
    |[<span data-ttu-id="80e4f-157">sp_dbmmonitoraddmonitoring</span><span class="sxs-lookup"><span data-stu-id="80e4f-157">sp_dbmmonitoraddmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)|<span data-ttu-id="80e4f-158">Crée un travail qui met régulièrement à jour les informations d'état de chaque base de données mise en miroir sur l'instance du serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-158">Creates a job that periodically updates the status information for every mirrored database on the server instance.</span></span>|  
    |[<span data-ttu-id="80e4f-159">sp_dbmmonitorchangemonitoring</span><span class="sxs-lookup"><span data-stu-id="80e4f-159">sp_dbmmonitorchangemonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)|<span data-ttu-id="80e4f-160">Modifie la valeur d'un paramètre de surveillance de mise en miroir de base de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-160">Changes the value of a database mirroring monitoring parameter.</span></span>|  
    |[<span data-ttu-id="80e4f-161">sp_dbmmonitorhelpmonitoring</span><span class="sxs-lookup"><span data-stu-id="80e4f-161">sp_dbmmonitorhelpmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)|<span data-ttu-id="80e4f-162">Retourne la période de mise à jour actuelle.</span><span class="sxs-lookup"><span data-stu-id="80e4f-162">Returns the current update period.</span></span>|  
    |[<span data-ttu-id="80e4f-163">sp_dbmmonitorresults</span><span class="sxs-lookup"><span data-stu-id="80e4f-163">sp_dbmmonitorresults</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)|<span data-ttu-id="80e4f-164">Retourne les lignes d'état d'une base de données mise en miroir et vous permet de déterminer si la procédure obtient l'état le plus récent à l'avance.</span><span class="sxs-lookup"><span data-stu-id="80e4f-164">Returns status rows for a monitored database and allows you to choose whether the procedure obtains the latest status beforehand.</span></span>|  
    |[<span data-ttu-id="80e4f-165">sp_dbmmonitordropmonitoring</span><span class="sxs-lookup"><span data-stu-id="80e4f-165">sp_dbmmonitordropmonitoring</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)|<span data-ttu-id="80e4f-166">Arrête et supprime le travail de surveillance de la mise en miroir pour toutes les bases de données sur l'instance du serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-166">Stops and deletes the mirroring monitor job for all the databases on the server instance.</span></span>|  
  
     <span data-ttu-id="80e4f-167">La procédure stockée système **dbmmonitor** peut être utilisée en complément du moniteur de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-167">The **dbmmonitor** system stored procedures can be used as an adjunct to the Database Mirroring Monitor.</span></span> <span data-ttu-id="80e4f-168">Par exemple, même si la surveillance a été configurée à l’aide de **sp_dbmmonitoraddmonitoring**, le moniteur de mise en miroir de bases de données peut être utilisé pour consulter l’état.</span><span class="sxs-lookup"><span data-stu-id="80e4f-168">For example, even if monitoring was configured using **sp_dbmmonitoraddmonitoring**, Database Mirroring Monitor can be used to view the status.</span></span>  
  
### <a name="how-monitoring-works"></a><span data-ttu-id="80e4f-169">Fonctionnement de la surveillance</span><span class="sxs-lookup"><span data-stu-id="80e4f-169">How Monitoring Works</span></span>  
 <span data-ttu-id="80e4f-170">Cette section présente la table d'état d'une mise en miroir de base de données, le travail de surveillance de la mise en miroir de bases de données et le moniteur. Elle indique également comment les utilisateurs peuvent surveiller l'état de la mise en miroir de bases de données et comment le travail de surveillance peut être arrêté.</span><span class="sxs-lookup"><span data-stu-id="80e4f-170">This section introduces the database mirroring status table, database mirroring monitor job and the monitor, how users can monitor database mirroring status, and how the monitoring job can be dropped.</span></span>  
  
#### <a name="database-mirroring-status-table"></a><span data-ttu-id="80e4f-171">Table d'état d'une mise en miroir de base de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-171">Database Mirroring Status Table</span></span>  
 <span data-ttu-id="80e4f-172">L'état de la mise en miroir d'une base de données est stocké dans une table d'état de mise en miroir de base de données interne, non documentée dans la base de données **msdb** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-172">Database mirroring status is stored in an internal, undocumented database mirroring status table in the **msdb** database.</span></span> <span data-ttu-id="80e4f-173">Cette table d'état est automatiquement créée la première fois que l'état de la mise en miroir est mis à jour sur l'instance du serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-173">This status table is automatically created the first time the mirroring status is updated on the server instance.</span></span>  
  
 <span data-ttu-id="80e4f-174">La table d'état peut être mise à jour automatiquement ou manuellement par un administrateur système, lequel doit respecter un intervalle de 15 secondes au minimum entre les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="80e4f-174">The status table may be updated either automatically or manually by a system administrator, with a minimum update interval of 15 seconds.</span></span> <span data-ttu-id="80e4f-175">Cette valeur minimale de 15 secondes permet d'éviter que les instances du serveur ne soient surchargées de demandes d'état.</span><span class="sxs-lookup"><span data-stu-id="80e4f-175">The 15 second minimum prevents server instances from being overloaded with status requests.</span></span>  
  
 <span data-ttu-id="80e4f-176">La table d'état est mise à jour automatiquement à la fois par le moniteur de mise en miroir de base de données et par le travail de surveillance de la mise en miroir de bases de données, si ce dernier est en cours d'exécution.</span><span class="sxs-lookup"><span data-stu-id="80e4f-176">The status table is updated automatically by both Database Mirroring Monitor and the database mirroring monitor job, if running.</span></span> <span data-ttu-id="80e4f-177">Par défaut, le**travail du moniteur de mise en miroir de bases de données** met à jour la table une fois par minute (un administrateur système peut spécifier une fréquence de mise à jour comprise entre 1 et 120 minutes).</span><span class="sxs-lookup"><span data-stu-id="80e4f-177">**Database Mirroring Monitor Job** updates the table once a minute by default (a system administrator can specify an update period of 1 to 120 minutes).</span></span> <span data-ttu-id="80e4f-178">Quant au moniteur de mise en miroir de bases de données, il met à jour la table automatiquement toutes les 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="80e4f-178">Database Mirroring Monitor, in contrast, updates the table automatically every 30 seconds.</span></span> <span data-ttu-id="80e4f-179">Pour ces mises à jour, le **travail du moniteur de mise en miroir de bases de données** et le moniteur de mise en miroir de bases de données appellent **sp_dbmmonitorupdate**.</span><span class="sxs-lookup"><span data-stu-id="80e4f-179">For these updates, **Database Mirroring Monitor Job** and Database Mirroring Monitor call **sp_dbmmonitorupdate**.</span></span>  
  
 <span data-ttu-id="80e4f-180">À sa première exécution, **sp_dbmmonitorupdate** crée la table **d’état de la mise en miroir de bases de données** et le rôle de base de données fixe **dbm_monitor** dans la base de données **msdb** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-180">The first time **sp_dbmmonitorupdate** runs, it creates the **database mirroring status** table and the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="80e4f-181">**sp_dbmmonitorupdate** met généralement à jour l’état de la mise en miroir en insérant une nouvelle ligne dans la table d’état pour chaque base de données mise en miroir sur l’instance du serveur ; pour plus d’informations, consultez la section « Table d’état d’une mise en miroir de base de données », plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="80e4f-181">**sp_dbmmonitorupdate** usually updates the mirroring status by inserting a new row into the status table for every mirrored database on the server instance; for more information, see "Database Mirroring Status Table," later in this topic.</span></span> <span data-ttu-id="80e4f-182">Cette procédure évalue également les mesures de performances dans les nouvelles lignes, et elle tronque les lignes antérieures à la période de rétention actuelle (la valeur par défaut est de 7 jours).</span><span class="sxs-lookup"><span data-stu-id="80e4f-182">This procedure also evaluates the performance metrics in the new rows and truncates rows older than the current retention period (the default is 7 days).</span></span> <span data-ttu-id="80e4f-183">Pour plus d’informations, consultez [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="80e4f-183">For more information, see [sp_dbmmonitorupdate &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="80e4f-184">Sauf si le moniteur de mise en miroir de bases de données est utilisé par un membre du rôle serveur fixe **sysadmin** , la table d’état est automatiquement mise à jour si le **travail du moniteur de mise en miroir de bases de données** existe et que [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="80e4f-184">Unless Database Mirroring Monitor is currently being used by a member of the **sysadmin** fixed server role, the status table is automatically updated only if the **Database Mirroring Monitor Job** exists and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running.</span></span>  
  
#### <a name="database-mirroring-monitor-job"></a><span data-ttu-id="80e4f-185">Travail du moniteur de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-185">Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="80e4f-186">Le travail de surveillance de la mise en miroir de bases de données, **Travail du moniteur de mise en miroir de bases de données**, fonctionne indépendamment du moniteur de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-186">The database mirroring monitoring job, **Database Mirroring Monitor Job**, operates independently of Database Mirroring Monitor.</span></span> <span data-ttu-id="80e4f-187">Le**Travail de surveillance de la mise en miroir de bases de données** est automatiquement créé uniquement si [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] est utilisé pour démarrer une session de mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-187">**Database Mirroring Monitor Job** is created automatically only if [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] is used to start a mirroring session.</span></span> <span data-ttu-id="80e4f-188">Si les commandes ALTER DATABASE *nom_base_de_données* SET PARTNER sont systématiquement utilisées pour démarrer la mise en miroir, le travail existe uniquement si l’administrateur système exécute la procédure stockée **sp_dbmmonitoraddmonitoring** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-188">If ALTER DATABASE *database_name* SET PARTNER commands are always used to start mirroring, the job exists only if the system administrator runs the **sp_dbmmonitoraddmonitoring** stored procedure.</span></span>  
  
 <span data-ttu-id="80e4f-189">Une fois que le **Travail de surveillance de la mise en miroir de bases de données** a été créé, en partant du principe que l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est en cours d'exécution, le travail est appelé une fois par minute par défaut.</span><span class="sxs-lookup"><span data-stu-id="80e4f-189">After **Database Mirroring Monitor Job** is created, assuming that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is running, the job is called once a minute, by default.</span></span> <span data-ttu-id="80e4f-190">Le travail appelle ensuite la procédure stockée système **sp_dbmmonitorupdate** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-190">The job then calls the **sp_dbmmonitorupdate** system stored procedure.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="80e4f-191">Agent appelle le **travail du moniteur de mise en miroir de bases de données** une fois par minute par défaut et le travail appelle **sp_dbmmonitorupdate** pour mettre à jour la table d’état.</span><span class="sxs-lookup"><span data-stu-id="80e4f-191">Agent calls **Database Mirroring Monitor Job** once a minute, by default, and the job calls **sp_dbmmonitorupdate** to update the status table.</span></span> <span data-ttu-id="80e4f-192">Les administrateurs système peuvent modifier la période de mise à jour à l’aide de la procédure stockée système **sp_dbmmonitorchangemonitoring** et peuvent afficher la période de mise à jour actuelle à l’aide de la procédure stockée système **sp_dbmmonitorchangemonitoring** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-192">System administrators can change the update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure, and they can view the current update period by using the **sp_dbmmonitorchangemonitoring** system stored procedure.</span></span> <span data-ttu-id="80e4f-193">Pour plus d’informations, consultez [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) et [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="80e4f-193">For more information, see [sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql) and [sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-system-administrators"></a><span data-ttu-id="80e4f-194">État de la mise en miroir de base de données (par les administrateurs système)</span><span class="sxs-lookup"><span data-stu-id="80e4f-194">Monitoring Database Mirroring Status (by System Administrators)</span></span>  
 <span data-ttu-id="80e4f-195">Les membres du rôle serveur fixe **sysadmin** peuvent afficher et mettre à jour la table d'état.</span><span class="sxs-lookup"><span data-stu-id="80e4f-195">Members of the **sysadmin** fixed server role can view and update the status table</span></span>  
  
-   <span data-ttu-id="80e4f-196">Utilisation du moniteur de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-196">Using Database Mirroring Monitor</span></span>  
  
     <span data-ttu-id="80e4f-197">Lorsqu'un administrateur système utilise le moniteur de mise en miroir de bases de données, il peut actualiser manuellement la page **État** , l'arborescence de navigation ou la page **Historique** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-197">When using Database Mirroring Monitor, a system administrator can manually refresh the **Status** page, navigation tree, or **History** page.</span></span> <span data-ttu-id="80e4f-198">La table d'état est également mise à jour, sauf si elle a déjà été mise à jour lors des 15 secondes précédentes.</span><span class="sxs-lookup"><span data-stu-id="80e4f-198">This also updates the status table, unless it has already been updated within the previous 15 seconds.</span></span>  
  
     <span data-ttu-id="80e4f-199">Pour afficher l’historique de l’état d’une mise en miroir sur une instance de serveur donnée, l’administrateur système peut également cliquer sur le bouton **Historique** correspondant à une instance de serveur (dans la page **État** ).</span><span class="sxs-lookup"><span data-stu-id="80e4f-199">To view the history of mirroring status on a given server instance, the system administrator can also click the **History** button for a server instance (on the **Status** page).</span></span> <span data-ttu-id="80e4f-200">L'historique est affiché dans la boîte de dialogue **Historique de la mise en miroir de bases de données** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-200">The history is displayed in the **Database Mirroring History** dialog box.</span></span> <span data-ttu-id="80e4f-201">Cette boîte de dialogue permet à l'administrateur système de consulter la totalité des lignes figurant dans la table d'état de l'instance du serveur, ou certaines d'entre elles.</span><span class="sxs-lookup"><span data-stu-id="80e4f-201">There, the system administrator can view some or all of the rows in the status table of the server instance.</span></span>  
  
     <span data-ttu-id="80e4f-202">Pour plus d'informations sur les mesures présentées dans la page **État** , consultez la section « Mesures de performances affichées par le moniteur de mise en miroir de bases de données » plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="80e4f-202">For information about the **Status** page metrics, see Performance Metrics Displayed by the "Database Mirroring Monitor," later in this topic.</span></span>  
  
-   <span data-ttu-id="80e4f-203">Utilisation de **sp_dbmmonitorresults**</span><span class="sxs-lookup"><span data-stu-id="80e4f-203">Using **sp_dbmmonitorresults**</span></span>  
  
     <span data-ttu-id="80e4f-204">Les administrateurs système peuvent utiliser la procédure stockée système **sp_dbmmonitorresults** pour afficher (et éventuellement mettre à jour) la table d’état si cette dernière n’a pas été mise à jour au cours des 15 secondes précédentes.</span><span class="sxs-lookup"><span data-stu-id="80e4f-204">System administrators can use the **sp_dbmmonitorresults** system stored procedure to view and, optionally, to update the status table, if it has not been updated within the previous 15 seconds.</span></span> <span data-ttu-id="80e4f-205">Cette procédure appelle la procédure **sp_dbmmonitorupdate** et retourne une ou plusieurs lignes d’historique, en fonction de la quantité demandée dans l’appel de procédure.</span><span class="sxs-lookup"><span data-stu-id="80e4f-205">This procedure calls the **sp_dbmmonitorupdate** procedure and returns one or more history rows, depending on the amount requested in the procedure call.</span></span> <span data-ttu-id="80e4f-206">Pour plus d’informations sur l’état dans son jeu de résultats, consultez [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="80e4f-206">For information about the status in its results set, see [sp_dbmmonitorresults &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql).</span></span>  
  
#### <a name="monitoring-database-mirroring-status-by-dbm_monitor-members"></a><span data-ttu-id="80e4f-207">État de la mise en miroir de base de données (par les membres dbm_monitor)</span><span class="sxs-lookup"><span data-stu-id="80e4f-207">Monitoring Database Mirroring Status (by dbm_monitor Members)</span></span>  
 <span data-ttu-id="80e4f-208">Comme nous l’avons mentionné, lors de la première exécution de la procédure **sp_dbmmonitorupdate** , le rôle de base de données fixe **dbm_monitor** est créé dans la base de données **msdb** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-208">As mentioned, the first time **sp_dbmmonitorupdate** runs, it creates the **dbm_monitor** fixed database role in the **msdb** database.</span></span> <span data-ttu-id="80e4f-209">Les membres du rôle de base de données fixe **dbm_monitor** peuvent consulter l’état de la mise en miroir existant à l’aide du moniteur de mise en miroir de bases de données ou de la procédure stockée **sp_dbmmonitorresults** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-209">Members of the **dbm_monitor** fixed database role can view the existing mirroring status by using either Database Mirroring Monitor or the **sp_dbmmonitorresults** stored procedure.</span></span> <span data-ttu-id="80e4f-210">Cependant, ces utilisateurs ne peuvent pas mettre à jour la table d'état.</span><span class="sxs-lookup"><span data-stu-id="80e4f-210">But these users cannot update the status table.</span></span> <span data-ttu-id="80e4f-211">Pour connaître l’ancienneté de l’état affiché, un utilisateur peut observer les heures dans les étiquettes **journal principal ( ***\<time>*** )** et **Journal miroir ( ***\<time>*** )** dans la page **État** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-211">To learn the age of the displayed status a user can look at the times in the **Principal log (***\<time>***)** and **Mirror log (***\<time>***)** labels on the **Status** page.</span></span>  
  
 <span data-ttu-id="80e4f-212">Les membres du rôle de base de données fixe **dbm_monitor** sont tributaires du **travail du moniteur de mise en miroir de bases de données** pour la mise à jour de la table d’état à des fréquences régulières.</span><span class="sxs-lookup"><span data-stu-id="80e4f-212">Members of the **dbm_monitor** fixed database role depend on the **Database Mirroring Monitor Job** to update the status table at regular intervals.</span></span> <span data-ttu-id="80e4f-213">Si le travail n'existe pas ou si l'Agent [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] est arrêté, l'état devient de plus en plus obsolète et ne correspondra plus forcément à la configuration de la session de mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-213">If the job does not exist or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent is stopped, the status becomes increasingly stale and may no longer reflect the configuration of the mirroring session.</span></span> <span data-ttu-id="80e4f-214">Par exemple, après un basculement, les partenaires peuvent sembler partager le même rôle (principal ou miroir), ou le serveur principal actuel peut être affiché comme serveur miroir, alors que le serveur miroir actuel est affiché comme principal.</span><span class="sxs-lookup"><span data-stu-id="80e4f-214">For example, after a failover, the partners might appear to share the same role-principal or mirror, or the current principal server might be shown as the mirror, while the current mirror server is shown as the principal.</span></span>  
  
#### <a name="dropping-the-database-mirroring-monitor-job"></a><span data-ttu-id="80e4f-215">Suppression du travail de surveillance de la mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-215">Dropping the Database Mirroring Monitor Job</span></span>  
 <span data-ttu-id="80e4f-216">Le **Travail de surveillance de la mise en miroir de bases de données**est conservé tant qu'il n'a pas été supprimé.</span><span class="sxs-lookup"><span data-stu-id="80e4f-216">The database mirroring monitor job, **Database Mirroring Monitor Job**, remains until it is dropped.</span></span> <span data-ttu-id="80e4f-217">Le travail de surveillance doit être géré par l'administrateur système.</span><span class="sxs-lookup"><span data-stu-id="80e4f-217">The monitoring job must be managed by the system administrator.</span></span> <span data-ttu-id="80e4f-218">Pour supprimer le **travail du moniteur de mise en miroir de bases de données**, utilisez **sp_dbmmonitordropmonitoring**.</span><span class="sxs-lookup"><span data-stu-id="80e4f-218">To drop **Database Mirroring Monitor Job**, use **sp_dbmmonitordropmonitoring**.</span></span> <span data-ttu-id="80e4f-219">Pour plus d’informations, consultez [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="80e4f-219">For more information, see [sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql).</span></span>  
  
###  <a name="status-displayed-by-the-database-mirroring-monitor"></a><a name="perf_metrics_of_dbm_monitor"></a> <span data-ttu-id="80e4f-220">Mesures de performances affichées par le moniteur de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-220">Status Displayed by the Database Mirroring Monitor</span></span>  
 <span data-ttu-id="80e4f-221">La page **État** du moniteur de mise en miroir de bases de données décrit les partenaires ainsi que l'état de la session de mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-221">The **Status** page of the Database Mirroring Monitor describes the partners, and also the state of the mirroring session.</span></span> <span data-ttu-id="80e4f-222">L'état inclut les mesures de performance telles que l'état du journal des transactions et d'autres informations destinées à estimer le temps nécessaire à l'exécution d'un basculement automatique et le risque de perte de données, si la session n'est pas synchronisée.</span><span class="sxs-lookup"><span data-stu-id="80e4f-222">The status includes performance metrics such as the state of the transaction log and other information that is intended to help currently estimate the time required to complete a failover and the potential of data loss, if the session is not synchronized.</span></span> <span data-ttu-id="80e4f-223">De plus, la page **État** affiche l'état ainsi que des informations concernant la session de mise en miroir en général.</span><span class="sxs-lookup"><span data-stu-id="80e4f-223">In addition, the **Status** page displays status and information about the mirroring session in general.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="80e4f-224">Pour une présentation du moniteur de mise en miroir de bases de données et de la page **État** , consultez [Outils pour la surveillance de l’état de la mise en miroir de base de données](#tools_for_monitoring_dbm_status), plus haut dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="80e4f-224">For an introduction to the Database Mirroring Monitor and **Status** page, see [Tools for Monitoring Database Mirroring Status](#tools_for_monitoring_dbm_status), earlier in this topic.</span></span>  
  
 <span data-ttu-id="80e4f-225">Les informations fournies pour chaque éléments sont résumées dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="80e4f-225">The information provided for each of these is summarized in the following sections.</span></span>  
  
#### <a name="partners"></a><span data-ttu-id="80e4f-226">Partenaires</span><span class="sxs-lookup"><span data-stu-id="80e4f-226">Partners</span></span>  
 <span data-ttu-id="80e4f-227">La page **État** affiche les informations suivantes pour chacun des partenaires :</span><span class="sxs-lookup"><span data-stu-id="80e4f-227">The **Status** page displays the following information for each of the partners:</span></span>  
  
-   <span data-ttu-id="80e4f-228">Instance de serveur</span><span class="sxs-lookup"><span data-stu-id="80e4f-228">Server instance</span></span>  
  
     <span data-ttu-id="80e4f-229">Nom de l'instance de serveur dont l'état est affiché dans la ligne **État** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-229">Name of the server instance whose status is displayed in the **Status** row.</span></span>  
  
-   <span data-ttu-id="80e4f-230">Rôle actuel</span><span class="sxs-lookup"><span data-stu-id="80e4f-230">Current role</span></span>  
  
     <span data-ttu-id="80e4f-231">Rôle actuel de l'instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-231">Current role of the server instance.</span></span> <span data-ttu-id="80e4f-232">Les états possibles sont :</span><span class="sxs-lookup"><span data-stu-id="80e4f-232">The possible states are:</span></span>  
  
    -   <span data-ttu-id="80e4f-233">Principal</span><span class="sxs-lookup"><span data-stu-id="80e4f-233">Principal</span></span>  
  
    -   <span data-ttu-id="80e4f-234">Miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-234">Mirror</span></span>  
  
-   <span data-ttu-id="80e4f-235">état de la mise en miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-235">Mirroring state</span></span>  
  
     <span data-ttu-id="80e4f-236">Les états possibles sont :</span><span class="sxs-lookup"><span data-stu-id="80e4f-236">The possible states are:</span></span>  
  
    -   <span data-ttu-id="80e4f-237">Unknown</span><span class="sxs-lookup"><span data-stu-id="80e4f-237">Unknown</span></span>  
  
    -   <span data-ttu-id="80e4f-238">Synchronisation</span><span class="sxs-lookup"><span data-stu-id="80e4f-238">Synchronizing</span></span>  
  
    -   <span data-ttu-id="80e4f-239">Synchronisé</span><span class="sxs-lookup"><span data-stu-id="80e4f-239">Synchronized</span></span>  
  
    -   <span data-ttu-id="80e4f-240">Interrompu</span><span class="sxs-lookup"><span data-stu-id="80e4f-240">Suspended</span></span>  
  
    -   <span data-ttu-id="80e4f-241">Déconnecté</span><span class="sxs-lookup"><span data-stu-id="80e4f-241">Disconnected</span></span>  
  
-   <span data-ttu-id="80e4f-242">Connexion témoin</span><span class="sxs-lookup"><span data-stu-id="80e4f-242">Witness connection</span></span>  
  
     <span data-ttu-id="80e4f-243">État de connexion du témoin.</span><span class="sxs-lookup"><span data-stu-id="80e4f-243">Connection status of the witness.</span></span> <span data-ttu-id="80e4f-244">Les états possibles sont :</span><span class="sxs-lookup"><span data-stu-id="80e4f-244">The possible states are:</span></span>  
  
    -   <span data-ttu-id="80e4f-245">Unknown</span><span class="sxs-lookup"><span data-stu-id="80e4f-245">Unknown</span></span>  
  
    -   <span data-ttu-id="80e4f-246">Connecté</span><span class="sxs-lookup"><span data-stu-id="80e4f-246">Connected</span></span>  
  
    -   <span data-ttu-id="80e4f-247">Déconnecté.</span><span class="sxs-lookup"><span data-stu-id="80e4f-247">Disconnected.</span></span>  
  
#### <a name="log-on-the-principal-server"></a><span data-ttu-id="80e4f-248">Journal sur le serveur principal</span><span class="sxs-lookup"><span data-stu-id="80e4f-248">Log on the Principal Server</span></span>  
 <span data-ttu-id="80e4f-249">La page **État** affiche les informations suivantes concernant l'état du journal sur le serveur principal à compter de l'heure indiquée :</span><span class="sxs-lookup"><span data-stu-id="80e4f-249">The **Status** page displays the following information about the status of the log on the principal server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="80e4f-250">Journal non envoyé</span><span class="sxs-lookup"><span data-stu-id="80e4f-250">Unsent log</span></span>  
  
     <span data-ttu-id="80e4f-251">Portion de journal en attente dans la file d'attente d'envoi en kilo-octets (Ko).</span><span class="sxs-lookup"><span data-stu-id="80e4f-251">The amount of log waiting in the send queue in kilobytes (KB).</span></span>  
  
-   <span data-ttu-id="80e4f-252">Transaction non envoyée la plus ancienne</span><span class="sxs-lookup"><span data-stu-id="80e4f-252">Oldest unsent transaction</span></span>  
  
     <span data-ttu-id="80e4f-253">Âge de la transaction non envoyée la plus ancienne dans la file d'attente d'envoi.</span><span class="sxs-lookup"><span data-stu-id="80e4f-253">Age of the oldest unsent transaction in the send queue.</span></span> <span data-ttu-id="80e4f-254">La durée de vie de cette transaction indique la quantité de transactions en minutes qui n'ont pas encore été envoyées à l'instance de serveur miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-254">The age of this transaction indicates how many minutes of transactions have not yet been sent to the mirror server instance.</span></span> <span data-ttu-id="80e4f-255">Cette valeur permet de mesurer la perte de données potentielle en termes de temps.</span><span class="sxs-lookup"><span data-stu-id="80e4f-255">This value helps measure the potential for data loss in terms of time.</span></span>  
  
-   <span data-ttu-id="80e4f-256">Durée (estimée) d'envoi du journal</span><span class="sxs-lookup"><span data-stu-id="80e4f-256">Time to send log (estimated)</span></span>  
  
     <span data-ttu-id="80e4f-257">Estimation du nombre de minutes dont l'instance de serveur principal a besoin pour envoyer le journal qui est actuellement dans la file d'attente d'envoi à l'instance du serveur miroir en fonction du débit d'envoi actuel.</span><span class="sxs-lookup"><span data-stu-id="80e4f-257">Estimated number of minutes the principal server instance requires to send the log that is currently in the send queue to the mirror server instance based on the current send rate.</span></span> <span data-ttu-id="80e4f-258">La durée réelle nécessaire pour l'envoi du journal sera conditionnée par le débit des transactions entrantes, lequel peut varier considérablement.</span><span class="sxs-lookup"><span data-stu-id="80e4f-258">The actual time to send the log will be affected by the rate of incoming transactions, which can vary significantly.</span></span> <span data-ttu-id="80e4f-259">Cependant, la valeur **Durée (estimée) d’envoi du journal** peut être utile pour estimer approximativement la durée requise pour un basculement manuel.</span><span class="sxs-lookup"><span data-stu-id="80e4f-259">However, the **Time to send log (estimated)** value can be useful for roughly estimating the time required for a manual failover.</span></span>  
  
-   <span data-ttu-id="80e4f-260">Taux d'envoi actuel</span><span class="sxs-lookup"><span data-stu-id="80e4f-260">Current send rate</span></span>  
  
     <span data-ttu-id="80e4f-261">Débit auquel les transactions sont envoyées à l'instance du serveur miroir en Kilo-octets par seconde.</span><span class="sxs-lookup"><span data-stu-id="80e4f-261">Rate at which transactions are being sent to the mirror server instance in KB per second.</span></span>  
  
-   <span data-ttu-id="80e4f-262">Taux actuel de nouvelles transactions</span><span class="sxs-lookup"><span data-stu-id="80e4f-262">Current rate of new transactions</span></span>  
  
     <span data-ttu-id="80e4f-263">Débit auquel les transactions entrantes sont consignées dans le journal du principal en Kilo-octets par seconde.</span><span class="sxs-lookup"><span data-stu-id="80e4f-263">Rate at which incoming transactions are being entered into the principal's log in KB per second.</span></span> <span data-ttu-id="80e4f-264">Pour déterminer si la mise en miroir prend du retard, reste à jour ou rattrape le retard, comparez cette valeur à la valeur **Durée (estimée) d'envoi du journal** .</span><span class="sxs-lookup"><span data-stu-id="80e4f-264">To determine whether mirroring is falling behind, staying up, or catching up, compare this value to the **Estimated time to send log** value.</span></span>  
  
#### <a name="log-on-the-mirror-server"></a><span data-ttu-id="80e4f-265">Journal sur le serveur miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-265">Log on the Mirror Server</span></span>  
 <span data-ttu-id="80e4f-266">La page **État** affiche les informations suivantes concernant l'état du journal sur le serveur miroir à compter de l'heure indiquée :</span><span class="sxs-lookup"><span data-stu-id="80e4f-266">The **Status** page displays the following information about the status of the log on the mirror server as of the indicated time:</span></span>  
  
-   <span data-ttu-id="80e4f-267">Journal non restauré</span><span class="sxs-lookup"><span data-stu-id="80e4f-267">Unrestored log</span></span>  
  
     <span data-ttu-id="80e4f-268">Portion de journal en attente dans la file d'attente de restauration par progression en Ko.</span><span class="sxs-lookup"><span data-stu-id="80e4f-268">The amount of log waiting in the redo queue in KB.</span></span>  
  
-   <span data-ttu-id="80e4f-269">Durée (estimée) de restauration du journal</span><span class="sxs-lookup"><span data-stu-id="80e4f-269">Time to restore log (estimated)</span></span>  
  
     <span data-ttu-id="80e4f-270">Nombre approximatif de minutes requises pour que le journal actuellement dans la file d'attente de restauration par progression soit appliqué à la base de données miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-270">Approximate number of minutes required for the log currently in the redo queue to be applied to the mirror database.</span></span>  
  
-   <span data-ttu-id="80e4f-271">Taux de restauration actuel</span><span class="sxs-lookup"><span data-stu-id="80e4f-271">Current restore rate</span></span>  
  
     <span data-ttu-id="80e4f-272">Débit auquel les transactions sont restaurées dans la base de données miroir (en Kilo-octets par seconde).</span><span class="sxs-lookup"><span data-stu-id="80e4f-272">Rate at which transactions are being restored into the mirror database (in KB per second).</span></span>  
  
#### <a name="mirroring-session"></a><span data-ttu-id="80e4f-273">Session de mise en miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-273">Mirroring Session</span></span>  
 <span data-ttu-id="80e4f-274">La page **État** affiche également les informations suivantes concernant la session de mise en miroir :</span><span class="sxs-lookup"><span data-stu-id="80e4f-274">In addition, the **Status** page displays the following information about the mirroring session:</span></span>  
  
-   <span data-ttu-id="80e4f-275">Temps de traitement de validation de miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-275">Mirroring commit overhead</span></span>  
  
     <span data-ttu-id="80e4f-276">Délai moyen par transaction en millisecondes (pertinent uniquement en mode Haute sécurité).</span><span class="sxs-lookup"><span data-stu-id="80e4f-276">Average delay per transaction in milliseconds (relevant only in high-safety mode).</span></span> <span data-ttu-id="80e4f-277">Ce délai correspond au temps de traitement pendant lequel l'instance de serveur principal attend que l'instance de serveur miroir écrive l'enregistrement du journal de transaction dans la file d'attente de restauration par progression.</span><span class="sxs-lookup"><span data-stu-id="80e4f-277">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span>  
  
-   <span data-ttu-id="80e4f-278">Durée (estimée) d'envoi et de restauration de la totalité du journal en cours</span><span class="sxs-lookup"><span data-stu-id="80e4f-278">Time to send and restore all current log (estimated)</span></span>  
  
     <span data-ttu-id="80e4f-279">Estimation de la durée requise pour envoyer l'intégralité du journal non envoyé qui a été validé sur le principal et pour restaurer l'intégralité du journal actuellement dans la file d'attente de restauration par progression.</span><span class="sxs-lookup"><span data-stu-id="80e4f-279">Estimated time needed to send all of the unsent log that has been committed at the principal and to restore all of the log currently in the redo queue.</span></span> <span data-ttu-id="80e4f-280">Cette estimation peut être inférieure à la somme des valeurs des champs **Durée (estimée) d’envoi du journal** et **Durée (estimée) de restauration du journal** , car l’envoi et la restauration peuvent fonctionner en parallèle.</span><span class="sxs-lookup"><span data-stu-id="80e4f-280">This estimate may be less than the sum of the values of the **Time to send log (estimated)** and **Time to restore log (estimated)** fields, because sending and restoring can operate in parallel.</span></span>  
  
-   <span data-ttu-id="80e4f-281">Adresse témoin</span><span class="sxs-lookup"><span data-stu-id="80e4f-281">Witness address</span></span>  
  
     <span data-ttu-id="80e4f-282">Adresse réseau de l'instance du serveur témoin.</span><span class="sxs-lookup"><span data-stu-id="80e4f-282">Network address of the witness server instance.</span></span> <span data-ttu-id="80e4f-283">Pour plus d’informations sur le format de cette adresse, consultez [Spécifier une adresse réseau de serveur &#40;mise en miroir de bases de données&#41;](specify-a-server-network-address-database-mirroring.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-283">For information about the format of this address, see [Specify a Server Network Address &#40;Database Mirroring&#41;](specify-a-server-network-address-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="80e4f-284">Mode d'opération</span><span class="sxs-lookup"><span data-stu-id="80e4f-284">Operating mode</span></span>  
  
     <span data-ttu-id="80e4f-285">Mode d'opération de la session de mise en miroir de bases de données :</span><span class="sxs-lookup"><span data-stu-id="80e4f-285">The operating mode of the database mirroring session:</span></span>  
  
    -   <span data-ttu-id="80e4f-286">Haute performance (asynchrone)</span><span class="sxs-lookup"><span data-stu-id="80e4f-286">High performance (asynchronous)</span></span>  
  
    -   <span data-ttu-id="80e4f-287">Haute sécurité sans basculement automatique (synchrone)</span><span class="sxs-lookup"><span data-stu-id="80e4f-287">High safety without automatic failover (synchronous)</span></span>  
  
    -   <span data-ttu-id="80e4f-288">Haute sécurité avec basculement automatique (synchrone)</span><span class="sxs-lookup"><span data-stu-id="80e4f-288">High safety with automatic failover (synchronous)</span></span>  
  
##  <a name="additional-sources-of-information-about-a-mirrored-database"></a><a name="AdditionalSources"></a> <span data-ttu-id="80e4f-289">Sources d'informations supplémentaires concernant une base de données mise en miroir</span><span class="sxs-lookup"><span data-stu-id="80e4f-289">Additional Sources of Information About a Mirrored Database</span></span>  
 <span data-ttu-id="80e4f-290">En plus d'utiliser le moniteur de mise en miroir de bases de données et les procédures stockées dbmmonitor pour surveiller une base de données mise en miroir et pour configurer des alertes sur des variables de performances analysées, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] met à disposition des affichages catalogue, des compteurs de performance et des notifications d'événements de mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-290">In addition to using the Database Mirroring Monitor and dbmmonitor stored procedures to monitor a mirrored database and set up alerts on monitored performance variables, [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] provides catalog views, performance counters, and event notifications for database mirroring.</span></span>  
  
 <span data-ttu-id="80e4f-291">**Dans cette section :**</span><span class="sxs-lookup"><span data-stu-id="80e4f-291">**In This Section:**</span></span>  
  
-   [<span data-ttu-id="80e4f-292">Métadonnées de la mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-292">Database Mirroring Metadata</span></span>](#DbmMetadata)  
  
-   [<span data-ttu-id="80e4f-293">Compteurs de performances de la mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-293">Database Mirroring Performance Counters</span></span>](#DbmPerfCounters)  
  
-   [<span data-ttu-id="80e4f-294">Notifications d'événements de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-294">Database Mirroring Event Notifications</span></span>](#DbmEventNotif)  
  
###  <a name="database-mirroring-metadata"></a><a name="DbmMetadata"></a> <span data-ttu-id="80e4f-295">Métadonnées de la mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-295">Database Mirroring Metadata</span></span>  
 <span data-ttu-id="80e4f-296">Chaque session de mise en miroir de bases de données est décrite dans des métadonnées qui sont exposées par le biais des affichages catalogue ou gestion dynamique suivants :</span><span class="sxs-lookup"><span data-stu-id="80e4f-296">Each database mirroring session is described in metadata that is exposed through the following catalog or dynamic management views:</span></span>  
  
-   <span data-ttu-id="80e4f-297">**sys.database_mirroring**</span><span class="sxs-lookup"><span data-stu-id="80e4f-297">**sys.database_mirroring**</span></span>  
  
     <span data-ttu-id="80e4f-298">Cet affichage comprend les métadonnées de la mise en miroir de bases de données correspondant à chaque base de données mise en miroir dans une instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-298">This view displays the database mirroring metadata for each mirrored database in a server instance.</span></span> <span data-ttu-id="80e4f-299">Pour plus d’informations, consultez [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="80e4f-299">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
-   <span data-ttu-id="80e4f-300">**sys.database_mirroring_endpoints**</span><span class="sxs-lookup"><span data-stu-id="80e4f-300">**sys.database_mirroring_endpoints**</span></span>  
  
     <span data-ttu-id="80e4f-301">L’affichage catalogue **sys.database_mirroring_endpoints** contient des informations concernant le point de terminaison de la mise en miroir de bases de données de l’instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="80e4f-301">The **sys.database_mirroring_endpoints** catalog view displays information about the database mirroring endpoint of the server instance.</span></span> <span data-ttu-id="80e4f-302">Pour plus d’informations, consultez [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="80e4f-302">For more information, see [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span></span>  
  
-   <span data-ttu-id="80e4f-303">**sys.database_mirroring_witnesses**</span><span class="sxs-lookup"><span data-stu-id="80e4f-303">**sys.database_mirroring_witnesses**</span></span>  
  
     <span data-ttu-id="80e4f-304">Cet affichage catalogue contient les métadonnées de la mise en miroir de bases de données correspondant à chaque session dans laquelle une instance de serveur est le témoin.</span><span class="sxs-lookup"><span data-stu-id="80e4f-304">This catalog view displays the database mirroring metadata for each session in which a server instance is the witness.</span></span> <span data-ttu-id="80e4f-305">Pour plus d’informations, consultez [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span><span class="sxs-lookup"><span data-stu-id="80e4f-305">For more information, see [sys.database_mirroring_witnesses &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/database-mirroring-witness-catalog-views-sys-database-mirroring-witnesses).</span></span>  
  
-   <span data-ttu-id="80e4f-306">**sys.dm_db_mirroring_connections**</span><span class="sxs-lookup"><span data-stu-id="80e4f-306">**sys.dm_db_mirroring_connections**</span></span>  
  
     <span data-ttu-id="80e4f-307">Cet affichage de gestion dynamique retourne une ligne pour chaque connexion réseau de la mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-307">This dynamic management view returns a row for each database mirroring network connection.</span></span>  
  
     <span data-ttu-id="80e4f-308">Pour plus d’informations, consultez [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span><span class="sxs-lookup"><span data-stu-id="80e4f-308">For more information, see [sys.dm_db_mirroring_connections &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/database-mirroring-sys-dm-db-mirroring-connections).</span></span>  
  
###  <a name="database-mirroring-performance-counters"></a><a name="DbmPerfCounters"></a> <span data-ttu-id="80e4f-309">Compteurs de performances de la mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-309">Database Mirroring Performance Counters</span></span>  
 <span data-ttu-id="80e4f-310">Les compteurs de performances vous permettent d'analyser les performances de la mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-310">Performance counters let you monitor database mirroring performance.</span></span> <span data-ttu-id="80e4f-311">Par exemple, vous pouvez examiner le compteur **Délai de transaction** pour savoir si la mise en miroir de bases de données a une incidence sur les performances du serveur principal, et vous pouvez examiner les compteurs **File d'attente de restauration par progression** et **File d'attente d'envoi du journal** pour savoir si la mise en miroir de la base de données est synchronisée avec la base de données principale.</span><span class="sxs-lookup"><span data-stu-id="80e4f-311">For example, you can examine the **Transaction Delay** counter to see if database mirroring is impacting performance on the principal server, you can examine the **Redo Queue** and **Log Send Queue** counters to see how well the mirror database is keeping up with the principal database.</span></span> <span data-ttu-id="80e4f-312">Vous pouvez examiner le compteur **Octets du journal envoyés/s** pour analyser la quantité de journal envoyée par seconde.</span><span class="sxs-lookup"><span data-stu-id="80e4f-312">You can examine the **Log Bytes Sent/sec** counter to monitor the amount of log sent per second.</span></span>  
  
 <span data-ttu-id="80e4f-313">Dans l’Analyseur de performances sur les partenaires, les compteurs de performances sont disponibles dans l’objet de performance de la mise en miroir de bases de données (**SQLServer:Database Mirroring**).</span><span class="sxs-lookup"><span data-stu-id="80e4f-313">In Performance Monitor on either partner, performance counters are available in the database mirroring performance object (**SQLServer:Database Mirroring**).</span></span> <span data-ttu-id="80e4f-314">Pour plus d’informations, consultez [SQL Server, objet Database Mirroring](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-314">For more information, see [SQL Server, Database Mirroring Object](../../relational-databases/performance-monitor/sql-server-database-mirroring-object.md).</span></span>  
  
 <span data-ttu-id="80e4f-315">**Pour démarrer l'Analyseur de performances**</span><span class="sxs-lookup"><span data-stu-id="80e4f-315">**To start the performance monitor**</span></span>  
  
-   [<span data-ttu-id="80e4f-316">Démarrer le Moniteur système &#40;Windows&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-316">Start System Monitor &#40;Windows&#41;</span></span>](../../relational-databases/performance/start-system-monitor-windows.md)  
  
###  <a name="database-mirroring-event-notifications"></a><a name="DbmEventNotif"></a> <span data-ttu-id="80e4f-317">Notifications d'événements de mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="80e4f-317">Database Mirroring Event Notifications</span></span>  
 <span data-ttu-id="80e4f-318">Les notifications d'événements sont un type spécial d'objet de base de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-318">Event notifications are a special kind of database object.</span></span> <span data-ttu-id="80e4f-319">Elles sont exécutées en réponse à une variété d'instructions en langage de définition de données (DDL) Transact-SQL et d'événements Trace SQL, et envoient des informations relatives aux événements de serveur et de base de données à un service [!INCLUDE[ssSB](../../includes/sssb-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="80e4f-319">Event notifications execute in response to a variety of Transact-SQL data definition language (DDL) statements and SQL Trace events and send information about server and database events to a [!INCLUDE[ssSB](../../includes/sssb-md.md)] service.</span></span>  
  
 <span data-ttu-id="80e4f-320">Les éléments suivants sont disponibles pour la mise en miroir de bases de données :</span><span class="sxs-lookup"><span data-stu-id="80e4f-320">The following events are available for database mirroring:</span></span>  
  
-   <span data-ttu-id="80e4f-321">Classe d'événements**Database Mirroring State Change**</span><span class="sxs-lookup"><span data-stu-id="80e4f-321">**Database Mirroring State Change** event class</span></span>  
  
     <span data-ttu-id="80e4f-322">Indique le changement de l'état de mise en miroir d'une base de données mise en miroir.</span><span class="sxs-lookup"><span data-stu-id="80e4f-322">This indicates when the mirroring state of a mirrored database changes.</span></span> <span data-ttu-id="80e4f-323">Pour plus d'informations, voir [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-323">For more information, see [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span></span>  
  
-   <span data-ttu-id="80e4f-324">Classe d'événements**Audit Database Mirroring Login**</span><span class="sxs-lookup"><span data-stu-id="80e4f-324">**Audit Database Mirroring Login** event class</span></span>  
  
     <span data-ttu-id="80e4f-325">Retourne les messages d'audit relatifs à la sécurité du transport de la mise en miroir de bases de données.</span><span class="sxs-lookup"><span data-stu-id="80e4f-325">This reports audit messages related to database mirroring transport security.</span></span> <span data-ttu-id="80e4f-326">Pour plus d’informations, consultez [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span><span class="sxs-lookup"><span data-stu-id="80e4f-326">For more information, see [Audit Database Mirroring Login Event Class](../../relational-databases/event-classes/audit-database-mirroring-login-event-class.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="80e4f-327">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="80e4f-327">Related Tasks</span></span>  
  
-   [<span data-ttu-id="80e4f-328">Utiliser des seuils d’avertissement et d’alertes sur des métriques de performances de mise en miroir &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-328">Use Warning Thresholds and Alerts on Mirroring Performance Metrics &#40;SQL Server&#41;</span></span>](use-warning-thresholds-and-alerts-on-mirroring-performance-metrics-sql-server.md)  
  
-   [<span data-ttu-id="80e4f-329">Démarrer le moniteur de mise en miroir de bases de données &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-329">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="80e4f-330">Afficher l’état d’une base de données mise en miroir &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-330">View the State of a Mirrored Database &#40;SQL Server Management Studio&#41;</span></span>](view-the-state-of-a-mirrored-database-sql-server-management-studio.md)  
  
 <span data-ttu-id="80e4f-331">**procédures stockées**</span><span class="sxs-lookup"><span data-stu-id="80e4f-331">**Stored procedures**</span></span>  
  
-   [<span data-ttu-id="80e4f-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-332">sp_dbmmonitoraddmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitoraddmonitoring-transact-sql)  
  
-   [<span data-ttu-id="80e4f-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-333">sp_dbmmonitorchangealert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)  
  
-   [<span data-ttu-id="80e4f-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-334">sp_dbmmonitorchangemonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangemonitoring-transact-sql)  
  
-   [<span data-ttu-id="80e4f-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-335">sp_dbmmonitordropalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropalert-transact-sql)  
  
-   [<span data-ttu-id="80e4f-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-336">sp_dbmmonitordropmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitordropmonitoring-transact-sql)  
  
-   [<span data-ttu-id="80e4f-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-337">sp_dbmmonitorhelpalert &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpalert-transact-sql)  
  
-   [<span data-ttu-id="80e4f-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-338">sp_dbmmonitorhelpmonitoring &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorhelpmonitoring-transact-sql)  
  
-   [<span data-ttu-id="80e4f-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-339">sp_dbmmonitorresults &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorresults-transact-sql)  
  
-   [<span data-ttu-id="80e4f-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="80e4f-340">sp_dbmmonitorupdate &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorupdate-transact-sql)  
  
## <a name="see-also"></a><span data-ttu-id="80e4f-341">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="80e4f-341">See Also</span></span>  
 <span data-ttu-id="80e4f-342">[Mise en miroir de bases de données &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="80e4f-342">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="80e4f-343">Fournisseur WMI pour les concepts des événements de serveur</span><span class="sxs-lookup"><span data-stu-id="80e4f-343">WMI Provider for Server Events Concepts</span></span>](../../relational-databases/wmi-provider-server-events/wmi-provider-for-server-events-concepts.md)  
  
  
