---
title: Configurer des comptes de connexion pour la mise en miroir de bases de données ou groupes de disponibilité AlwaysOn (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- database mirroring [SQL Server], deployment
- logins [SQL Server], database mirroring
ms.assetid: e9f5287b-1325-4cda-88a6-19eaaa52a652
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d149016dabd0239bd76eadc8655b6752afd916d9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87701766"
---
# <a name="set-up-login-accounts-for-database-mirroring-or-alwayson-availability-groups-sql-server"></a><span data-ttu-id="280af-102">Configurer des comptes de connexion pour la mise en miroir de bases de données ou les groupes de disponibilité AlwaysOn (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="280af-102">Set Up Login Accounts for Database Mirroring or AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="280af-103">Pour que deux instances de serveur se connectent au [point de terminaison de mise en miroir de bases de données](the-database-mirroring-endpoint-sql-server.md) de l'autre, le compte de connexion de chaque instance doit avoir accès à l'autre instance.</span><span class="sxs-lookup"><span data-stu-id="280af-103">For two server instances to connect to each other's [database mirroring endpoint](the-database-mirroring-endpoint-sql-server.md) point, the login account of each instance requires access to the other instance.</span></span> <span data-ttu-id="280af-104">Par ailleurs, chaque compte de connexion doit disposer d'une autorisation de connexion au point de terminaison de mise en miroir de bases de données de l'autre instance.</span><span class="sxs-lookup"><span data-stu-id="280af-104">Also, each login account requires connect permission to the Database Mirroring endpoint of the other instance.</span></span>  
  
 <span data-ttu-id="280af-105">L'impact de cette condition est différent suivant que les instances de serveur s'exécutent ou non sous le même compte d'utilisateur de domaine :</span><span class="sxs-lookup"><span data-stu-id="280af-105">The impact of this requirement depends on whether the server instances run as the same domain user account:</span></span>  
  
-   <span data-ttu-id="280af-106">Si les instances de serveur s'exécutent sous le même compte d'utilisateur de domaine, les noms de connexion d'utilisateur corrects existent automatiquement dans les deux bases de données **master** .</span><span class="sxs-lookup"><span data-stu-id="280af-106">If the server instances run as the same domain user account, the correct user logins exist automatically in both **master** databases.</span></span> <span data-ttu-id="280af-107">Cela simplifie la configuration de sécurité pour la mise en miroir de bases de données et pour les groupes de disponibilité AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="280af-107">This simplifies the security configuration for Database Mirroring and AlwaysOn Availability Groups.</span></span>  
  
-   <span data-ttu-id="280af-108">Si les instances de serveur s'exécutent sous des comptes d'utilisateur différents, les connexions utilisateur sur l'instance de serveur qui héberge le serveur ou le réplica principal doivent être manuellement reproduites sur l'instance de serveur qui héberge le serveur miroir ou sur chaque instance de serveur qui héberge un réplica secondaire.</span><span class="sxs-lookup"><span data-stu-id="280af-108">If the server instances run as different user accounts, user logins on the server instance that hosts the principal server or primary replica must be manually reproduced on the server instance that hosts the mirror server or on every server instance that hosts a secondary replica.</span></span> <span data-ttu-id="280af-109">Pour plus d'informations, consultez [Créer une connexion pour un compte différent](#CreateLogin) et [Accorder l'autorisation CONNECT](#GrantConnect), plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="280af-109">For more information, see [Create a Login for a Different Account](#CreateLogin) and [Grant Connect Permission](#GrantConnect), later in this topic.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="280af-110">Pour créer un environnement plus sécurisé, envisagez d'utiliser des comptes de domaine distincts pour chaque instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="280af-110">To create a more secure environment, consider using separate domain accounts for each server instance.</span></span>  
  
##  <a name="create-a-login-for-a-different-account"></a><a name="CreateLogin"></a><span data-ttu-id="280af-111">Créer une connexion pour un compte différent</span><span class="sxs-lookup"><span data-stu-id="280af-111">Create a Login for a Different Account</span></span>  
 <span data-ttu-id="280af-112">Si deux instances de serveur s'exécutent sous des comptes différents, l'administrateur système doit utiliser l'instruction [!INCLUDE[tsql](../../includes/tsql-md.md)] CREATE LOGIN pour créer une connexion pour le compte de service de démarrage de l'instance distante de chaque instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="280af-112">If two server instances run as different accounts, the system administrator must use the CREATE LOGIN [!INCLUDE[tsql](../../includes/tsql-md.md)] statement to create a login for the startup service account of the remote instance for each server instance.</span></span> <span data-ttu-id="280af-113">Pour plus d’informations, consultez [CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="280af-113">For more information, see [CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="280af-114">Si vous exécutez [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sous un compte qui n'appartient pas à un domaine, vous devez utiliser des certificats.</span><span class="sxs-lookup"><span data-stu-id="280af-114">If you run [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] under a non-domain account, you must use certificates.</span></span> <span data-ttu-id="280af-115">Pour plus d'informations, consultez [Utiliser des certificats pour un point de terminaison de mise en miroir de bases de données &#40;Transact-SQL&#41;](use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="280af-115">For more information, see [Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;](use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span></span>  
  
 <span data-ttu-id="280af-116">Par exemple, pour l'instance de serveur sqlA qui s'exécute sous loginA, pour vous connecter à l'instance de serveur sqlB, qui s'exécute sous loginB, loginA doit exister sur sqlB et loginB doit exister sur sqlA.</span><span class="sxs-lookup"><span data-stu-id="280af-116">For example, for the server instance sqlA, which runs under loginA, to connect to the server instance sqlB, which runs under loginB, loginA must exist on sqlB, and loginB must exist on sqlA.</span></span> <span data-ttu-id="280af-117">En outre, pour une session de mise en miroir de bases de données comprenant une instance du serveur témoin (sqlC) et dans laquelle les trois instances de serveur s'exécutent sous des comptes de domaine différents, les noms d'accès suivants doivent être créés :</span><span class="sxs-lookup"><span data-stu-id="280af-117">In addition, for a database mirroring session that includes a witness server instance (sqlC) and in which the three server instances run under different domain accounts, the following logins must be created:</span></span>  
  
|<span data-ttu-id="280af-118">Sur l'instance...</span><span class="sxs-lookup"><span data-stu-id="280af-118">On instance...</span></span>|<span data-ttu-id="280af-119">Créez des noms d'accès pour et accordez des autorisations de connexion à...</span><span class="sxs-lookup"><span data-stu-id="280af-119">Create logins for and grant connection permission to ...</span></span>|  
|--------------------|--------------------------------------------------------------|  
|<span data-ttu-id="280af-120">sqlA</span><span class="sxs-lookup"><span data-stu-id="280af-120">sqlA</span></span>|<span data-ttu-id="280af-121">sqlB et sqlC</span><span class="sxs-lookup"><span data-stu-id="280af-121">sqlB and sqlC</span></span>|  
|<span data-ttu-id="280af-122">sqlB</span><span class="sxs-lookup"><span data-stu-id="280af-122">sqlB</span></span>|<span data-ttu-id="280af-123">sqlA et sqlC</span><span class="sxs-lookup"><span data-stu-id="280af-123">sqlA and sqlC</span></span>|  
|<span data-ttu-id="280af-124">sqlC</span><span class="sxs-lookup"><span data-stu-id="280af-124">sqlC</span></span>|<span data-ttu-id="280af-125">sqlA et sqlB</span><span class="sxs-lookup"><span data-stu-id="280af-125">sqlA and sqlB</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="280af-126">Il est possible de se connecter au compte de service réseau en utilisant le compte d'ordinateur plutôt qu'un utilisateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="280af-126">It is possible to connect with the network service account by using the machine account instead of a domain user.</span></span> <span data-ttu-id="280af-127">Si le compte d'ordinateur est utilisé, il doit être ajouté en tant qu'utilisateur sur l'autre instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="280af-127">If the machine account is used, it must be added as a user on the other server instance.</span></span>  
  
##  <a name="grant-connect-permission"></a><a name="GrantConnect"></a><span data-ttu-id="280af-128">Accorder l’autorisation Connect</span><span class="sxs-lookup"><span data-stu-id="280af-128">Grant Connect Permission</span></span>  
 <span data-ttu-id="280af-129">Après avoir créé un nom d'accès sur une instance de serveur, vous devez lui accorder l'autorisation de se connecter au point de terminaison de mise en miroir de bases de données de l'instance de serveur.</span><span class="sxs-lookup"><span data-stu-id="280af-129">Once a login has been created on a server instance, the login must be granted permission to connect to the database mirroring endpoint of the server instance.</span></span> <span data-ttu-id="280af-130">L'administrateur système accorde l'autorisation de connexion à l'aide d'une instruction [!INCLUDE[tsql](../../includes/tsql-md.md)] GRANT.</span><span class="sxs-lookup"><span data-stu-id="280af-130">The system administrator grants the connect permission using a GRANT [!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="280af-131">Pour plus d’informations, consultez [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="280af-131">For more information, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="280af-132">Tâches associées</span><span class="sxs-lookup"><span data-stu-id="280af-132">Related Tasks</span></span>  
  
-   [<span data-ttu-id="280af-133">Créer un compte de connexion</span><span class="sxs-lookup"><span data-stu-id="280af-133">Create a Login</span></span>](../../relational-databases/security/authentication-access/create-a-login.md)  
  
-   <span data-ttu-id="280af-134">[Autorisez l’accès réseau à un point de terminaison de mise en miroir de bases de données à l’aide de l’authentification Windows &#40;SQL Server&#41;](../database-mirroring-allow-network-access-windows-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="280af-134">[Allow Network Access to a Database Mirroring Endpoint Using Windows Authentication &#40;SQL Server&#41;](../database-mirroring-allow-network-access-windows-authentication.md).</span></span>  
  
-   [<span data-ttu-id="280af-135">Utiliser des certificats pour un point de terminaison de mise en miroir de bases de données &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="280af-135">Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;</span></span>](use-certificates-for-a-database-mirroring-endpoint-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="280af-136">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="280af-136">See Also</span></span>  
 <span data-ttu-id="280af-137">[Point de terminaison de mise en miroir de bases de données &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="280af-137">[The Database Mirroring Endpoint &#40;SQL Server&#41;](the-database-mirroring-endpoint-sql-server.md) </span></span>  
 <span data-ttu-id="280af-138">[Résolution des problèmes de configuration de mise en miroir de bases de données &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="280af-138">[Troubleshoot Database Mirroring Configuration &#40;SQL Server&#41;](troubleshoot-database-mirroring-configuration-sql-server.md) </span></span>  
 [<span data-ttu-id="280af-139">Résoudre les problèmes de configuration groupes de disponibilité AlwaysOn &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="280af-139">Troubleshoot AlwaysOn Availability Groups Configuration &#40;SQL Server&#41;</span></span>](../availability-groups/windows/troubleshoot-always-on-availability-groups-configuration-sql-server.md)  
  
  
